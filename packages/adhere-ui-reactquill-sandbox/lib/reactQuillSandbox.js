var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var l in e=arguments[n])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var n={};for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&e.indexOf(l)<0&&(n[l]=t[l]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,l=Object.getOwnPropertySymbols(t);r<l.length;r++)e.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(t,l[r])&&(n[l[r]]=t[l[r]]);return n};import{useUpdateEffect}from"ahooks";import classNames from"classnames";import React,{forwardRef,memo,useImperativeHandle,useLayoutEffect,useRef}from"react";import ReactDOMStr from"./lib/react-dom.production.min";import ReactQuillStr from"./lib/react-quill";import ReactStr from"./lib/react.production.min";import QuillBubbleCssStr from"./lib/quill.bubble.css";import QuillSnowCssStr from"./lib/quill.snow.css";var THEME_MAP=new Map([["snow",QuillSnowCssStr],["bubble",QuillBubbleCssStr]]),selectorPrefix="adhere-ui-reactquillsandbox",ReactQuillSandbox=function(e,t){var n=e.wrapStyle,r=e.wrapClassName,o=e.quillStyle,i=__rest(e,["wrapStyle","wrapClassName","quillStyle"]),c=useRef(null),a=useRef();function u(){return new Promise(function(t){var e,n=null==(e=null==c?void 0:c.current)?void 0:e.contentDocument,r=null==(e=null==c?void 0:c.current)?void 0:e.contentWindow,l=n.getElementById("quillWrap");r.ReactDOM.render(React.createElement(r.ReactQuill,__assign({ref:a},i)),l,function(){return t({document:n,window:r,wrap:l})})})}return useImperativeHandle(t,function(){return{focus:function(){var t;null!=(t=a.current)&&t.focus()},blur:function(){var t;null!=(t=a.current)&&t.blur()},getEditor:function(){var t;return null==(t=a.current)?void 0:t.getEditor()},getQuill:function(){var t;return null==(t=null==(t=null==(t=null==c?void 0:c.current)?void 0:t.contentWindow)?void 0:t.ReactQuill)?void 0:t.Quill}}}),useLayoutEffect(function(){var t;function e(){u().then(function(){})}null!=(t=null==c?void 0:c.current)&&t.addEventListener("load",e);var n=URL.createObjectURL(new Blob([ReactStr],{type:"text/javascript"})),r=URL.createObjectURL(new Blob([ReactDOMStr],{type:"text/javascript"})),l=URL.createObjectURL(new Blob([ReactQuillStr],{type:"text/javascript"})),i=URL.createObjectURL(new Blob(['\n        <!DOCTYPE html>\n        <head>\n          <meta charset="UTF-8" />\n          <title></title>\n          <style>\n            html,body {\n              width: 100%;\n              height: 100%;\n              margin: 0;      \n              padding: 0;\n            }\n            \n            ::-webkit-scrollbar-thumb {\n              background-color: rgba(0, 0, 0, 0.1);\n              border-radius: 4px;\n            }\n            *::-webkit-scrollbar-track {\n              background-color: rgba(0, 0, 0, 0.1);\n            }\n            ::-webkit-scrollbar {\n              width: 10px;\n              height: 10px;\n            }\n            \n            .quill {\n              display: flex;\n              flex-direction: column;\n              width: 100%;\n              height: 100%;\n              padding: 0;\n              margin: 0; \n            }\n            \n            .quill > .ql-toolbar {\n              flex-shrink: 0;\n            }\n            \n            .quill > .ql-container {\n              flex-grow: 1;\n              min-height: 0;  \n            }\n            \n            '.concat(THEME_MAP.get("snow"),'\n          </style>\n          <script src="').concat(n,'"><\/script>\n          <script src="').concat(r,'"><\/script>\n          <script src="').concat(l,'"><\/script>\n        </head>\n        <html lang="en">\n        <body>\n          <div id="quillWrap" style="width: 100%;height: 100%;').concat(o||"",'"></div>\n        </body>\n        </html>\n        ')],{type:"text/html"}));return c.current.src=i,function(){var t;null!=(t=null==c?void 0:c.current)&&t.removeEventListener("load",e),URL.revokeObjectURL(i),URL.revokeObjectURL(n),URL.revokeObjectURL(r),URL.revokeObjectURL(l)}},[]),useUpdateEffect(function(){u().then(function(t){t.wrap.style.cssText="width: 100%;height: 100%;".concat(e.quillStyle||"")})},Array.from(Object.values(i))),React.createElement("div",{className:classNames("".concat(selectorPrefix),r||""),style:n||{}},React.createElement("iframe",{ref:c,className:"".concat(selectorPrefix,"-frame")}))};export default memo(forwardRef(ReactQuillSandbox));
//# sourceMappingURL=reactQuillSandbox.js.map
