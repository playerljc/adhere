{"version":3,"file":"SearchEditableStateTable.js","sources":["Editable/SearchEditableStateTable.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar dayjs_1 = tslib_1.__importDefault(require(\"dayjs\"));\r\nvar lodash_clonedeep_1 = tslib_1.__importDefault(require(\"lodash.clonedeep\"));\r\nvar SearchEditableCellStateTable_1 = tslib_1.__importDefault(require(\"./SearchEditableCellStateTable\"));\r\nvar SearchEditableFactory_1 = tslib_1.__importDefault(require(\"./SearchEditableFactory\"));\r\n/**\r\n * SearchEditableStateTable\r\n * @class\r\n * @classdesc 可编辑的表格(表格进行整体编辑)\r\n */\r\nvar SearchEditableStateTable = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchEditableStateTable, _super);\r\n    function SearchEditableStateTable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * updateEditorData\r\n     * @description 更新可编辑的所有单元格\r\n     * @return Promise<void>\r\n     */\r\n    SearchEditableStateTable.prototype.updateEditorData = function (changeData) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a;\r\n            var listData = lodash_clonedeep_1.default(_this.state[_this.getServiceName()]);\r\n            // 所有的数据\r\n            var dataSource = listData[_this.getFetchListPropName()][_this.getDataKey()] || [];\r\n            var rowKey = _this.getRowKey();\r\n            changeData.forEach(function (record) {\r\n                var keys = Object.keys(record);\r\n                keys.forEach(function (dataIndex) {\r\n                    var value = record[dataIndex];\r\n                    if (value instanceof dayjs_1.default) {\r\n                        value = value.valueOf();\r\n                    }\r\n                    var recordItem = dataSource.find(function (t) { return t[rowKey] === record[rowKey]; });\r\n                    if (recordItem) {\r\n                        recordItem[dataIndex] = value;\r\n                    }\r\n                });\r\n            });\r\n            _this.setState((_a = {},\r\n                _a[_this.getServiceName()] = listData,\r\n                _a), function () { return resolve(); });\r\n        });\r\n    };\r\n    return SearchEditableStateTable;\r\n}(SearchEditableFactory_1.default(SearchEditableCellStateTable_1.default)));\r\nexports.default = SearchEditableStateTable;\r\n//# sourceMappingURL=SearchEditableStateTable.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","dayjs_1","__importDefault","lodash_clonedeep_1","SearchEditableCellStateTable_1","SearchEditableFactory_1","SearchEditableStateTable","_super","apply","this","arguments","__extends","prototype","updateEditorData","changeData","_this","Promise","resolve","_a","listData","default","state","getServiceName","dataSource","getFetchListPropName","getDataKey","rowKey","getRowKey","forEach","record","keys","dataIndex","recordItem","valueOf","find","t","setState"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,QAAUF,QAAQG,gBAAgBF,QAAQ,OAAO,CAAC,EAClDG,mBAAqBJ,QAAQG,gBAAgBF,QAAQ,kBAAkB,CAAC,EACxEI,+BAAiCL,QAAQG,gBAAgBF,QAAQ,gCAAgC,CAAC,EAClGK,wBAA0BN,QAAQG,gBAAgBF,QAAQ,yBAAyB,CAAC,EAMpFM,yBAA0C,SAAUC,GAEpD,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOC,MAAMC,KAAMC,SAAS,GAAKD,IAC/D,CAgCA,OAnCAV,QAAQY,UAAUL,EAA0BC,CAAM,EASlDD,EAAyBM,UAAUC,iBAAmB,SAAUC,GAC5D,IAAIC,EAAQN,KACZ,OAAO,IAAIO,QAAQ,SAAUC,GACzB,IAAIC,EACAC,EAAWhB,mBAAmBiB,QAAQL,EAAMM,MAAMN,EAAMO,eAAe,EAAE,EAEzEC,EAAaJ,EAASJ,EAAMS,qBAAqB,GAAGT,EAAMU,WAAW,IAAM,GAC3EC,EAASX,EAAMY,UAAU,EAC7Bb,EAAWc,QAAQ,SAAUC,GACdlC,OAAOmC,KAAKD,CAAM,EACxBD,QAAQ,SAAUG,GACnB,IAAIjC,EAAQ+B,EAAOE,GAIfC,GAHAlC,aAAiBG,QAAQmB,UACzBtB,EAAQA,EAAMmC,QAAQ,GAETV,EAAWW,KAAK,SAAUC,GAAK,OAAOA,EAAET,KAAYG,EAAOH,EAAS,CAAC,GAClFM,IACAA,EAAWD,GAAajC,EAEhC,CAAC,CACL,CAAC,EACDiB,EAAMqB,WAAUlB,EAAK,IACdH,EAAMO,eAAe,GAAKH,EAC7BD,GAAK,WAAc,OAAOD,EAAQ,CAAG,CAAC,CAC9C,CAAC,CACL,EACOX,CACX,EAAED,wBAAwBe,QAAQhB,+BAA+BgB,OAAO,CAAE,EAC1EvB,QAAQuB,QAAUd"}