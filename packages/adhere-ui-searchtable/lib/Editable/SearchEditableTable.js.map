{"version":3,"file":"SearchEditableTable.js","sources":["Editable/SearchEditableTable.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar dayjs_1 = tslib_1.__importDefault(require(\"dayjs\"));\r\nvar lodash_clonedeep_1 = tslib_1.__importDefault(require(\"lodash.clonedeep\"));\r\nvar SearchEditableCellTable_1 = tslib_1.__importDefault(require(\"./SearchEditableCellTable\"));\r\nvar SearchEditableFactory_1 = tslib_1.__importDefault(require(\"./SearchEditableFactory\"));\r\n/**\r\n * SearchEditableTable\r\n * @class\r\n * @classdesc 可编辑的表格(表格进行整体编辑)\r\n */\r\nvar SearchEditableTable = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchEditableTable, _super);\r\n    function SearchEditableTable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * updateEditorData\r\n     * @description 更新可编辑的所有单元格\r\n     * @return Promise<void>\r\n     */\r\n    SearchEditableTable.prototype.updateEditorData = function (changeData) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a;\r\n            var listData = lodash_clonedeep_1.default(_this.props[_this.getServiceName()]);\r\n            var dataSource = listData[_this.getFetchListPropName()][_this.getDataKey()] || [];\r\n            var rowKey = _this.getRowKey();\r\n            changeData.forEach(function (record) {\r\n                var keys = Object.keys(record);\r\n                keys.forEach(function (dataIndex) {\r\n                    var value = record[dataIndex];\r\n                    if (value instanceof dayjs_1.default) {\r\n                        value = value.valueOf();\r\n                    }\r\n                    var recordItem = dataSource.find(function (t) { return t[rowKey] === record[rowKey]; });\r\n                    if (recordItem) {\r\n                        recordItem[dataIndex] = value;\r\n                    }\r\n                });\r\n            });\r\n            _this.props\r\n                .dispatch((_a = {\r\n                    type: _this.getServiceName() + \"/receive\"\r\n                },\r\n                _a[_this.getServiceName()] = listData,\r\n                _a))\r\n                .then(function () { return resolve(); });\r\n        });\r\n    };\r\n    return SearchEditableTable;\r\n}(SearchEditableFactory_1.default(SearchEditableCellTable_1.default)));\r\nexports.default = SearchEditableTable;\r\n//# sourceMappingURL=SearchEditableTable.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","dayjs_1","__importDefault","lodash_clonedeep_1","SearchEditableCellTable_1","SearchEditableFactory_1","SearchEditableTable","_super","apply","this","arguments","__extends","prototype","updateEditorData","changeData","_this","Promise","resolve","_a","listData","default","props","getServiceName","dataSource","getFetchListPropName","getDataKey","rowKey","getRowKey","forEach","record","keys","dataIndex","recordItem","valueOf","find","t","dispatch","type","then"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,QAAUF,QAAQG,gBAAgBF,QAAQ,OAAO,CAAC,EAClDG,mBAAqBJ,QAAQG,gBAAgBF,QAAQ,kBAAkB,CAAC,EACxEI,0BAA4BL,QAAQG,gBAAgBF,QAAQ,2BAA2B,CAAC,EACxFK,wBAA0BN,QAAQG,gBAAgBF,QAAQ,yBAAyB,CAAC,EAMpFM,oBAAqC,SAAUC,GAE/C,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOC,MAAMC,KAAMC,SAAS,GAAKD,IAC/D,CAmCA,OAtCAV,QAAQY,UAAUL,EAAqBC,CAAM,EAS7CD,EAAoBM,UAAUC,iBAAmB,SAAUC,GACvD,IAAIC,EAAQN,KACZ,OAAO,IAAIO,QAAQ,SAAUC,GACzB,IAAIC,EACAC,EAAWhB,mBAAmBiB,QAAQL,EAAMM,MAAMN,EAAMO,eAAe,EAAE,EACzEC,EAAaJ,EAASJ,EAAMS,qBAAqB,GAAGT,EAAMU,WAAW,IAAM,GAC3EC,EAASX,EAAMY,UAAU,EAC7Bb,EAAWc,QAAQ,SAAUC,GACdlC,OAAOmC,KAAKD,CAAM,EACxBD,QAAQ,SAAUG,GACnB,IAAIjC,EAAQ+B,EAAOE,GAIfC,GAHAlC,aAAiBG,QAAQmB,UACzBtB,EAAQA,EAAMmC,QAAQ,GAETV,EAAWW,KAAK,SAAUC,GAAK,OAAOA,EAAET,KAAYG,EAAOH,EAAS,CAAC,GAClFM,IACAA,EAAWD,GAAajC,EAEhC,CAAC,CACL,CAAC,EACDiB,EAAMM,MACDe,WAAUlB,EAAK,CACZmB,KAAMtB,EAAMO,eAAe,EAAI,UACnC,GACGP,EAAMO,eAAe,GAAKH,EAC7BD,EAAG,EACFoB,KAAK,WAAc,OAAOrB,EAAQ,CAAG,CAAC,CAC/C,CAAC,CACL,EACOX,CACX,EAAED,wBAAwBe,QAAQhB,0BAA0BgB,OAAO,CAAE,EACrEvB,QAAQuB,QAAUd"}