{"version":3,"file":"setting.js","sources":["Extension/ColumnSetting/setting.js"],"sourcesContent":["\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar antd_1 = require(\"antd\");\r\nvar array_move_1 = require(\"array-move\");\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar SearchTable_1 = require(\"../../SearchTable\");\r\nvar DragHandle = (0, react_sortable_hoc_1.SortableHandle)(function () { return (react_1.default.createElement(\"img\", { src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1pYyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTJzLjktMiAyLTJzMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMC02Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6bTYgNGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTJzLTIgLjktMiAycy45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6Ij48L3BhdGg+PC9zdmc+DQo=\", alt: \"\" })); });\r\nvar SortableItem = (0, react_sortable_hoc_1.SortableElement)(function (_a) {\r\n    var column = _a.column, onDisplayColumn = _a.onDisplayColumn;\r\n    return (react_1.default.createElement(\"li\", null,\r\n        react_1.default.createElement(DragHandle, null),\r\n        react_1.default.createElement(antd_1.Checkbox, { checked: column.display, onChange: function (e) {\r\n                onDisplayColumn(column, e.target.checked);\r\n            } }, column.title)));\r\n});\r\nvar SortableContainer = (0, react_sortable_hoc_1.SortableContainer)(function (_a) {\r\n    var children = _a.children;\r\n    return react_1.default.createElement(\"ul\", null, children);\r\n});\r\n/**\r\n * ColumnSetting\r\n * @param props\r\n * @constructor\r\n */\r\nfunction ColumnSetting(_a) {\r\n    var columns = _a.columns, onShowColumns = _a.onShowColumns, onReset = _a.onReset, onDisplayColumn = _a.onDisplayColumn, onSortEnd = _a.onSortEnd;\r\n    return (react_1.default.createElement(\"div\", { className: \"\".concat(SearchTable_1.selectorPrefix, \"-column-setting\") },\r\n        react_1.default.createElement(\"div\", { className: \"\".concat(SearchTable_1.selectorPrefix, \"-column-setting-header\") },\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(antd_1.Checkbox, { checked: columns.every(function (column) { return column.display; }), onChange: function (e) {\r\n                        onShowColumns(e.target.checked);\r\n                    } }, adhere_util_intl_1.default.v('列展示'))),\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(\"a\", { onClick: onReset }, adhere_util_intl_1.default.v('重置')))),\r\n        react_1.default.createElement(\"div\", { className: \"\".concat(SearchTable_1.selectorPrefix, \"-column-setting-body\") },\r\n            react_1.default.createElement(SortableContainer, { onSortEnd: function (_a) {\r\n                    var oldIndex = _a.oldIndex, newIndex = _a.newIndex;\r\n                    var changeColumns = (0, array_move_1.arrayMoveImmutable)(__spreadArray([], columns, true), oldIndex, newIndex);\r\n                    var map = new Map();\r\n                    changeColumns.forEach(function (column, index) {\r\n                        map.set(column.key, index);\r\n                    });\r\n                    onSortEnd(map);\r\n                }, useDragHandle: true, \r\n                // lockToContainerEdges\r\n                helperClass: \"\".concat(SearchTable_1.selectorPrefix, \"-sortableHelper\") }, columns.map(function (column, index) { return (react_1.default.createElement(SortableItem, { key: column.key, index: index, column: column, onDisplayColumn: onDisplayColumn })); })))));\r\n}\r\nColumnSetting.defaultProps = {\r\n    columns: [],\r\n};\r\nColumnSetting.propTypes = {\r\n    columns: prop_types_1.default.array,\r\n    onShowColumns: prop_types_1.default.func,\r\n    onReset: prop_types_1.default.func,\r\n    onDisplayColumn: prop_types_1.default.func,\r\n    onSortEnd: prop_types_1.default.func,\r\n};\r\nexports.default = ColumnSetting;\r\n"],"names":["__spreadArray","this","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","__importDefault","mod","__esModule","default","antd_1","Object","defineProperty","exports","value","require","array_move_1","prop_types_1","react_1","react_sortable_hoc_1","adhere_util_intl_1","SearchTable_1","DragHandle","SortableHandle","createElement","src","alt","SortableItem","SortableElement","_a","column","onDisplayColumn","Checkbox","checked","display","onChange","e","target","title","SortableContainer","children","ColumnSetting","columns","onShowColumns","onReset","onSortEnd","className","selectorPrefix","every","v","onClick","oldIndex","newIndex","changeColumns","arrayMoveImmutable","map","Map","forEach","index","set","key","useDragHandle","helperClass","defaultProps","propTypes","array","func"],"mappings":"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"}