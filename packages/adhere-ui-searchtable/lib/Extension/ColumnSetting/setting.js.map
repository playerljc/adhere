{"version":3,"file":"setting.js","sources":["Extension/ColumnSetting/setting.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar array_move_1 = require(\"array-move\");\r\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\r\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar SearchTable_1 = require(\"../../SearchTable\");\r\nvar DragHandle = react_sortable_hoc_1.SortableHandle(function () { return (react_1.default.createElement(\"img\", { src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1pYyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTJzLjktMiAyLTJzMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMC02Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6bTYgNGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTJzLTIgLjktMiAycy45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6Ij48L3BhdGg+PC9zdmc+DQo=\", alt: \"\" })); });\r\nvar SortableItem = react_sortable_hoc_1.SortableElement(function (_a) {\r\n    var column = _a.column, onDisplayColumn = _a.onDisplayColumn;\r\n    return (react_1.default.createElement(\"li\", null,\r\n        react_1.default.createElement(DragHandle, null),\r\n        react_1.default.createElement(antd_1.Checkbox, { checked: column.display, onChange: function (e) {\r\n                onDisplayColumn(column, e.target.checked);\r\n            } }, column.title)));\r\n});\r\nvar SortableContainer = react_sortable_hoc_1.SortableContainer(function (_a) {\r\n    var children = _a.children;\r\n    return react_1.default.createElement(\"ul\", null, children);\r\n});\r\n/**\r\n * ColumnSetting\r\n * @param props\r\n * @constructor\r\n */\r\nfunction ColumnSetting(_a) {\r\n    var columns = _a.columns, onShowColumns = _a.onShowColumns, onReset = _a.onReset, onDisplayColumn = _a.onDisplayColumn, onSortEnd = _a.onSortEnd;\r\n    return (react_1.default.createElement(\"div\", { className: SearchTable_1.selectorPrefix + \"-column-setting\" },\r\n        react_1.default.createElement(\"div\", { className: SearchTable_1.selectorPrefix + \"-column-setting-header\" },\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(antd_1.Checkbox, { checked: columns.every(function (column) { return column.display; }), onChange: function (e) {\r\n                        onShowColumns(e.target.checked);\r\n                    } }, adhere_util_intl_1.default.v('列展示'))),\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(\"a\", { onClick: onReset }, adhere_util_intl_1.default.v('重置')))),\r\n        react_1.default.createElement(\"div\", { className: SearchTable_1.selectorPrefix + \"-column-setting-body\" },\r\n            react_1.default.createElement(SortableContainer, { onSortEnd: function (_a) {\r\n                    var oldIndex = _a.oldIndex, newIndex = _a.newIndex;\r\n                    var changeColumns = array_move_1.arrayMoveImmutable(tslib_1.__spreadArrays(columns), oldIndex, newIndex);\r\n                    var map = new Map();\r\n                    changeColumns.forEach(function (column, index) {\r\n                        map.set(column.key, index);\r\n                    });\r\n                    onSortEnd(map);\r\n                }, useDragHandle: true, \r\n                // lockToContainerEdges\r\n                helperClass: SearchTable_1.selectorPrefix + \"-sortableHelper\" }, columns.map(function (column, index) { return (react_1.default.createElement(SortableItem, { key: column.key, index: index, column: column, onDisplayColumn: onDisplayColumn })); })))));\r\n}\r\nColumnSetting.defaultProps = {\r\n    columns: [],\r\n};\r\nColumnSetting.propTypes = {\r\n    columns: prop_types_1.default.array,\r\n    onShowColumns: prop_types_1.default.func,\r\n    onReset: prop_types_1.default.func,\r\n    onDisplayColumn: prop_types_1.default.func,\r\n    onSortEnd: prop_types_1.default.func,\r\n};\r\nexports.default = ColumnSetting;\r\n//# sourceMappingURL=setting.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","array_move_1","prop_types_1","__importDefault","react_1","react_sortable_hoc_1","adhere_util_intl_1","SearchTable_1","DragHandle","SortableHandle","default","createElement","src","alt","SortableItem","SortableElement","_a","column","onDisplayColumn","Checkbox","checked","display","onChange","e","target","title","SortableContainer","children","ColumnSetting","columns","onShowColumns","onReset","onSortEnd","className","selectorPrefix","every","v","onClick","oldIndex","newIndex","changeColumns","arrayMoveImmutable","__spreadArrays","map","Map","forEach","index","set","key","useDragHandle","helperClass","defaultProps","propTypes","array","func"],"mappings":"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"}