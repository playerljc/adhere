{"version":3,"file":"setting.js","sources":["Extension/ColumnSetting/setting.js"],"sourcesContent":["\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar antd_1 = require(\"antd\");\r\n// @ts-ignore\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar array_move_1 = require(\"array-move\");\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar searchtable_1 = require(\"../../searchtable\");\r\nvar DragHandle = react_sortable_hoc_1.sortableHandle(function () { return (react_1.default.createElement(\"img\", { src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1pYyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTJzLjktMiAyLTJzMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMC02Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6bTYgNGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTJzLTIgLjktMiAycy45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6Ij48L3BhdGg+PC9zdmc+DQo=\", alt: \"\" })); });\r\nvar SortableItem = react_sortable_hoc_1.sortableElement(function (_a) {\r\n    var column = _a.column, onDisplayColumn = _a.onDisplayColumn;\r\n    return (react_1.default.createElement(\"li\", null,\r\n        react_1.default.createElement(DragHandle, null),\r\n        react_1.default.createElement(antd_1.Checkbox, { checked: column.display, onChange: function (e) {\r\n                onDisplayColumn(column, e.target.checked);\r\n            } }, column.title)));\r\n});\r\nvar SortableContainer = react_sortable_hoc_1.sortableContainer(function (_a) {\r\n    var children = _a.children;\r\n    return react_1.default.createElement(\"ul\", null, children);\r\n});\r\n/**\r\n * ColumnSetting\r\n * @param props\r\n * @constructor\r\n */\r\nfunction ColumnSetting(_a) {\r\n    var columns = _a.columns, onShowColumns = _a.onShowColumns, onReset = _a.onReset, onDisplayColumn = _a.onDisplayColumn, onSortEnd = _a.onSortEnd;\r\n    return (react_1.default.createElement(\"div\", { className: searchtable_1.selectorPrefix + \"-column-setting\" },\r\n        react_1.default.createElement(\"div\", { className: searchtable_1.selectorPrefix + \"-column-setting-header\" },\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(antd_1.Checkbox, { checked: columns.every(function (column) { return column.display; }), onChange: function (e) {\r\n                        onShowColumns(e.target.checked);\r\n                    } }, adhere_util_intl_1.default.v('列展示'))),\r\n            react_1.default.createElement(\"div\", null,\r\n                react_1.default.createElement(\"a\", { onClick: onReset }, adhere_util_intl_1.default.v('重置')))),\r\n        react_1.default.createElement(\"div\", { className: searchtable_1.selectorPrefix + \"-column-setting-body\" },\r\n            react_1.default.createElement(SortableContainer, { onSortEnd: function (_a) {\r\n                    var oldIndex = _a.oldIndex, newIndex = _a.newIndex;\r\n                    // @ts-ignore\r\n                    var changeColumns = array_move_1.arrayMoveImmutable(__spreadArrays(columns), oldIndex, newIndex);\r\n                    var map = new Map();\r\n                    changeColumns.forEach(function (column, index) {\r\n                        map.set(column.key, index);\r\n                    });\r\n                    onSortEnd(map);\r\n                }, useDragHandle: true, \r\n                // lockToContainerEdges\r\n                helperClass: searchtable_1.selectorPrefix + \"-sortableHelper\" }, columns.map(function (column, index) { return (react_1.default.createElement(SortableItem, { key: column.key, index: index, column: column, onDisplayColumn: onDisplayColumn })); })))));\r\n}\r\nColumnSetting.defaultProps = {\r\n    columns: [],\r\n};\r\nColumnSetting.propTypes = {\r\n    columns: prop_types_1.default.array,\r\n    onShowColumns: prop_types_1.default.func,\r\n    onReset: prop_types_1.default.func,\r\n    onDisplayColumn: prop_types_1.default.func,\r\n    onSortEnd: prop_types_1.default.func,\r\n};\r\nexports.default = ColumnSetting;\r\n"],"names":["__spreadArrays","this","s","i","il","arguments","length","r","Array","k","a","j","jl","__importDefault","mod","__esModule","default","Object","defineProperty","exports","value","react_1","require","prop_types_1","antd_1","react_sortable_hoc_1","array_move_1","adhere_util_intl_1","searchtable_1","DragHandle","sortableHandle","createElement","src","alt","SortableItem","sortableElement","_a","column","onDisplayColumn","Checkbox","checked","display","onChange","e","target","title","SortableContainer","sortableContainer","children","ColumnSetting","columns","onShowColumns","onReset","onSortEnd","className","selectorPrefix","every","v","onClick","oldIndex","newIndex","changeColumns","arrayMoveImmutable","map","Map","forEach","index","set","key","useDragHandle","helperClass","defaultProps","propTypes","array","func"],"mappings":"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"}