"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.object.assign.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),react_1=tslib_1.__importStar(require("react")),react_dnd_1=require("react-dnd"),SearchTable_1=require("../../../SearchTable"),type="DraggableBodyRow",DragSortRow=function(r){var o=r.rowIndex,r=r.rowConfig,a=(0,react_1.useContext)(SearchTable_1.SearchTableContext),e={type:type,dropOverDownwardClassName:"".concat(SearchTable_1.selectorPrefix,"-row-drag-sort-drop-over-downward"),dropOverUpwardClasName:"".concat(SearchTable_1.selectorPrefix,"-row-drag-sort-drop-over-upward"),dragConfig:function(){return{type:n.type,item:{index:o},collect:function(r){return{isDragging:r.isDragging()}}}},dropConfig:function(){return{accept:n.type,collect:function(r){var e=(r.getItem()||{}).index;return e===o?{}:{isOver:r.isOver(),dropClassName:e<o?n.dropOverDownwardClassName:n.dropOverUpwardClasName}},drop:function(r){var e;null!=(e=null==a?void 0:a.context)&&e.moveRow(r.index,o)}}}},n=tslib_1.__assign(tslib_1.__assign({},e),(null==r?void 0:r.$rowDragSort)||{}),t=(null!=(s=null==r?void 0:r.$rowDragSort)&&s.dropConfig?n.dropConfig=Object.assign(e.dropConfig(),r.$rowDragSort.dropConfig||{}):n.dropConfig=e.dropConfig(),null!=(s=null==r?void 0:r.$rowDragSort)&&s.dragConfig?n.dragConfig=Object.assign(e.dragConfig(),r.$rowDragSort.dragConfig||{}):n.dragConfig=e.dragConfig(),(0,react_1.useRef)(null)),s=(0,react_dnd_1.useDrag)(n.dragConfig)[1],r=(0,react_dnd_1.useDrop)(n.dropConfig),e=r[0],i=e.isOver,d=e.dropClassName;return(0,r[1])(s(t)),function(r){var e={cursor:"canDrag"in n.dragConfig&&!n.dragConfig.canDrag()?"no-drop":"move"};return react_1.default.cloneElement(r,tslib_1.__assign(tslib_1.__assign({},r.props),{ref:t,style:tslib_1.__assign(tslib_1.__assign({},e),r.props.style||{}),className:(0,classnames_1.default)(r.props.className,i?d:"")}))}};exports.default=DragSortRow;
//# sourceMappingURL=DragSortRow.js.map
