{"version":3,"file":"SearchTableResizableColumnItem.js","sources":["Extension/ColumnResizable/SearchTableResizableColumnItem.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\n/**\r\n * handleResize\r\n * @description 表头列拖动的时候\r\n * @param context\r\n * @param column\r\n * @param columnsWidth\r\n * @protected\r\n */\r\nfunction handleResize(context, column, columnsWidth) {\r\n    return function (e, _a) {\r\n        var size = _a.size;\r\n        // 当拖动header的column时\r\n        columnsWidth.set(column.key, size);\r\n        context.forceUpdate();\r\n    };\r\n}\r\nexports.default = (function (_a) {\r\n    var _b, _c, _d, _e, _f;\r\n    var columnsWidth = _a.columnsWidth, context = _a.context, index = _a.index, column = _a.column;\r\n    // 如果设置了列可拖动\r\n    var colEls = (_d = (_c = (_b = context === null || context === void 0 ? void 0 : context.tableWrapRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.querySelectorAll) === null || _d === void 0 ? void 0 : _d.call(_c, '.ant-table-header > table > colgroup > col');\r\n    var spanCount = 0;\r\n    if (context.getRowSelection()) {\r\n        spanCount = spanCount + 1;\r\n    }\r\n    if (context.isShowNumber()) {\r\n        spanCount = spanCount + 1;\r\n    }\r\n    var computedWidth = colEls && colEls.length > spanCount ? (_f = (_e = colEls === null || colEls === void 0 ? void 0 : colEls[spanCount + index]) === null || _e === void 0 ? void 0 : _e.style) === null || _f === void 0 ? void 0 : _f.width : null;\r\n    if (computedWidth) {\r\n        computedWidth = parseInt(computedWidth);\r\n    }\r\n    var columnSizeItem = columnsWidth.get(column.key);\r\n    var width = columnSizeItem ? columnSizeItem.width : column.width ? column.width : computedWidth;\r\n    return tslib_1.__assign(tslib_1.__assign({}, column), { width: width, \r\n        // 加入onHeaderCell\r\n        onHeaderCell: function () {\r\n            var findLoop = function (__columns) {\r\n                var res;\r\n                for (var i = 0; i < __columns.length; i++) {\r\n                    if (__columns[i].dataIndex === column.dataIndex) {\r\n                        res = __columns[i];\r\n                        break;\r\n                    }\r\n                    else {\r\n                        if (__columns[i].children && Array.isArray(__columns[i].children)) {\r\n                            res = findLoop(__columns[i].children);\r\n                            if (res)\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                return res;\r\n            };\r\n            var _columns = context.getTableColumns();\r\n            var _column = findLoop(_columns);\r\n            var onHeaderCell = _column.onHeaderCell, _others = tslib_1.__rest(_column, [\"onHeaderCell\"]);\r\n            return {\r\n                width: _others.width,\r\n                onResize: handleResize(context, _others, columnsWidth),\r\n            };\r\n        } });\r\n});\r\n//# sourceMappingURL=SearchTableResizableColumnItem.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","handleResize","context","column","columnsWidth","e","_a","size","set","key","forceUpdate","default","index","colEls","_d","_c","_b","tableWrapRef","current","querySelectorAll","call","spanCount","getRowSelection","isShowNumber","computedWidth","length","_f","_e","style","width","parseInt","columnSizeItem","get","__assign","onHeaderCell","findLoop","__columns","res","i","dataIndex","children","Array","isArray","_columns","getTableColumns","_column","_others","__rest","onResize"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EAS7B,SAASC,aAAaC,EAASC,EAAQC,GACnC,OAAO,SAAUC,EAAGC,GACZC,EAAOD,EAAGC,KAEdH,EAAaI,IAAIL,EAAOM,IAAKF,CAAI,EACjCL,EAAQQ,YAAY,CACxB,CACJ,CACAb,QAAQc,QAAU,SAAWL,GACzB,IACIF,EAAeE,EAAGF,aAAcF,EAAUI,EAAGJ,QAASU,EAAQN,EAAGM,MAAOT,EAASG,EAAGH,OAEpFU,EAAS,OAACC,EAAK,OAACC,EAAK,OAACC,EAAKd,MAAAA,EAAyC,KAAA,EAASA,EAAQe,cAA0C,KAAA,EAASD,EAAGE,SAAqC,KAAA,EAASH,EAAGI,kBAA8C,KAAA,EAASL,EAAGM,KAAKL,EAAI,4CAA4C,EAC3SM,EAAY,EACZnB,EAAQoB,gBAAgB,IACxBD,GAAwB,GAExBnB,EAAQqB,aAAa,IACrBF,GAAwB,GAIxBG,GADAA,EADgBX,GAAUA,EAAOY,OAASJ,EAAY,OAACK,EAAK,OAACC,EAAKd,MAAAA,EAAuC,KAAA,EAASA,EAAOQ,EAAYT,IAAoC,KAAA,EAASe,EAAGC,OAAmC,KAAA,EAASF,EAAGG,MAAQ,OAE5NC,SAASN,CAAa,EAEtCO,EAAiB3B,EAAa4B,IAAI7B,EAAOM,GAAG,EAC5CoB,EAAQE,EAAiBA,EAAeF,MAAQ1B,EAAO0B,OAAuBL,EAClF,OAAOzB,QAAQkC,SAASlC,QAAQkC,SAAS,GAAI9B,CAAM,EAAG,CAAE0B,MAAOA,EAE3DK,aAAc,WACK,SAAXC,EAAqBC,GAErB,IADA,IAAIC,EACKC,EAAI,EAAGA,EAAIF,EAAUX,OAAQa,CAAC,GAAI,CACvC,GAAIF,EAAUE,GAAGC,YAAcpC,EAAOoC,UAAW,CAC7CF,EAAMD,EAAUE,GAChB,KACJ,CAEI,GAAIF,EAAUE,GAAGE,UAAYC,MAAMC,QAAQN,EAAUE,GAAGE,QAAQ,IAC5DH,EAAMF,EAASC,EAAUE,GAAGE,QAAQ,GAEhC,KAGhB,CACA,OAAOH,CACX,CAhBA,IAiBIM,EAAWzC,EAAQ0C,gBAAgB,EACnCC,EAAUV,EAASQ,CAAQ,EACUG,GAAtBD,EAAQX,aAAwBnC,QAAQgD,OAAOF,EAAS,CAAC,eAAe,GAC3F,MAAO,CACHhB,MAAOiB,EAAQjB,MACfmB,SAAU/C,aAAaC,EAAS4C,EAAS1C,CAAY,CACzD,CACJ,CAAE,CAAC,CACV"}