{"version":3,"file":"SearchTableResizableColumnItem.js","sources":["Extension/ColumnResizable/SearchTableResizableColumnItem.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.parse-int.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n/**\n * handleResize\n * @description 表头列拖动的时候\n * @param context\n * @param column\n * @param columnsWidth\n * @protected\n */\n\n\nfunction handleResize(context, column, columnsWidth) {\n  return function (e, _a) {\n    var size = _a.size; // 当拖动header的column时\n\n    columnsWidth.set(column.key, size);\n    context.forceUpdate();\n  };\n}\n\nexports.default = function (_a) {\n  var _b, _c, _d, _e, _f;\n\n  var columnsWidth = _a.columnsWidth,\n      context = _a.context,\n      index = _a.index,\n      column = _a.column; // 如果设置了列可拖动\n\n  var colEls = (_d = (_c = (_b = context === null || context === void 0 ? void 0 : context.tableWrapRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.querySelectorAll) === null || _d === void 0 ? void 0 : _d.call(_c, '.ant-table-header > table > colgroup > col');\n  var spanCount = 0;\n\n  if (context.getRowSelection()) {\n    spanCount = spanCount + 1;\n  }\n\n  if (context.isShowNumber()) {\n    spanCount = spanCount + 1;\n  }\n\n  var computedWidth = colEls && colEls.length > spanCount ? (_f = (_e = colEls === null || colEls === void 0 ? void 0 : colEls[spanCount + index]) === null || _e === void 0 ? void 0 : _e.style) === null || _f === void 0 ? void 0 : _f.width : null;\n\n  if (computedWidth) {\n    computedWidth = parseInt(computedWidth);\n  }\n\n  var columnSizeItem = columnsWidth.get(column.key);\n  var width = columnSizeItem ? columnSizeItem.width : column.width ? column.width : computedWidth;\n  return tslib_1.__assign(tslib_1.__assign({}, column), {\n    width: width,\n    // 加入onHeaderCell\n    onHeaderCell: function onHeaderCell() {\n      var findLoop = function findLoop(__columns) {\n        var res;\n\n        for (var i = 0; i < __columns.length; i++) {\n          if (__columns[i].dataIndex === column.dataIndex) {\n            res = __columns[i];\n            break;\n          } else {\n            if (__columns[i].children && Array.isArray(__columns[i].children)) {\n              res = findLoop(__columns[i].children);\n              if (res) break;\n            }\n          }\n        }\n\n        return res;\n      };\n\n      var _columns = context.getTableColumns();\n\n      var _column = findLoop(_columns);\n\n      var onHeaderCell = _column.onHeaderCell,\n          _others = tslib_1.__rest(_column, [\"onHeaderCell\"]);\n\n      return {\n        width: _others.width,\n        onResize: handleResize(context, _others, columnsWidth)\n      };\n    }\n  });\n};"],"names":["require","Object","defineProperty","exports","value","tslib_1","handleResize","context","column","columnsWidth","e","_a","size","set","key","forceUpdate","default","index","colEls","_d","_c","_b","tableWrapRef","current","querySelectorAll","call","spanCount","getRowSelection","isShowNumber","computedWidth","length","_f","_e","style","width","parseInt","columnSizeItem","get","__assign","onHeaderCell","_column","findLoop","__columns","res","i","dataIndex","children","Array","isArray","getTableColumns","_others","__rest","onResize"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDA,QAAQ,iCAAiC,EAEzCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,QAAUL,QAAQ,OAAO,EAW7B,SAASM,aAAaC,EAASC,EAAQC,GACrC,OAAO,SAAUC,EAAGC,GACdC,EAAOD,EAAGC,KAEdH,EAAaI,IAAIL,EAAOM,IAAKF,CAAI,EACjCL,EAAQQ,YAAY,CACtB,CACF,CAEAZ,QAAQa,QAAU,SAAUL,GAC1B,IAEIF,EAAeE,EAAGF,aAClBF,EAAUI,EAAGJ,QACbU,EAAQN,EAAGM,MACXT,EAASG,EAAGH,OAEZU,EAAS,OAACC,EAAK,OAACC,EAAK,OAACC,EAAKd,MAAAA,EAAyC,KAAA,EAASA,EAAQe,cAA0C,KAAA,EAASD,EAAGE,SAAqC,KAAA,EAASH,EAAGI,kBAA8C,KAAA,EAASL,EAAGM,KAAKL,EAAI,4CAA4C,EAC3SM,EAAY,EAEZnB,EAAQoB,gBAAgB,IAC1BD,GAAwB,GAGtBnB,EAAQqB,aAAa,IACvBF,GAAwB,GAMxBG,GADEA,EAFgBX,GAAUA,EAAOY,OAASJ,EAAY,OAACK,EAAK,OAACC,EAAKd,MAAAA,EAAuC,KAAA,EAASA,EAAOQ,EAAYT,IAAoC,KAAA,EAASe,EAAGC,OAAmC,KAAA,EAASF,EAAGG,MAAQ,OAG9NC,SAASN,CAAa,EAGpCO,EAAiB3B,EAAa4B,IAAI7B,EAAOM,GAAG,EAC5CoB,EAAQE,EAAiBA,EAAeF,MAAQ1B,EAAO0B,OAAuBL,EAClF,OAAOxB,QAAQiC,SAASjC,QAAQiC,SAAS,GAAI9B,CAAM,EAAG,CACpD0B,MAAOA,EAEPK,aAAc,WACZ,IAoBIC,EApBW,SAASC,EAASC,GAG/B,IAFA,IAAIC,EAEKC,EAAI,EAAGA,EAAIF,EAAUZ,OAAQc,CAAC,GAAI,CACzC,GAAIF,EAAUE,GAAGC,YAAcrC,EAAOqC,UAAW,CAC/CF,EAAMD,EAAUE,GAChB,KACF,CACE,GAAIF,EAAUE,GAAGE,UAAYC,MAAMC,QAAQN,EAAUE,GAAGE,QAAQ,IAC9DH,EAAMF,EAASC,EAAUE,GAAGE,QAAQ,GAC3B,KAGf,CAEA,OAAOH,CACT,EAEepC,EAAQ0C,gBAAgB,CAER,EAG3BC,GADeV,EAAQD,aACblC,QAAQ8C,OAAOX,EAAS,CAAC,eAAe,GAEtD,MAAO,CACLN,MAAOgB,EAAQhB,MACfkB,SAAU9C,aAAaC,EAAS2C,EAASzC,CAAY,CACvD,CACF,CACF,CAAC,CACH"}