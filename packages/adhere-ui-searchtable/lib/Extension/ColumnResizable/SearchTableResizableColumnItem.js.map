{"version":3,"file":"SearchTableResizableColumnItem.js","sources":["Extension/ColumnResizable/SearchTableResizableColumnItem.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * handleResize\n * @description 表头列拖动的时候\n * @param context\n * @param column\n * @param columnsWidth\n * @protected\n */\nfunction handleResize(context, column, columnsWidth) {\n  return function (e, _a) {\n    var size = _a.size;\n    // 当拖动header的column时\n    columnsWidth.set(column.key, size);\n    context.forceUpdate();\n  };\n}\nexports.default = function (_a) {\n  var _b, _c, _d, _e, _f;\n  var columnsWidth = _a.columnsWidth,\n    context = _a.context,\n    index = _a.index,\n    column = _a.column;\n  // 如果设置了列可拖动\n  var colEls = (_d = (_c = (_b = context === null || context === void 0 ? void 0 : context.tableWrapRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.querySelectorAll) === null || _d === void 0 ? void 0 : _d.call(_c, '.ant-table-header > table > colgroup > col');\n  var spanCount = 0;\n  if (context.getRowSelection()) {\n    spanCount = spanCount + 1;\n  }\n  if (context.isShowNumber()) {\n    spanCount = spanCount + 1;\n  }\n  var computedWidth = colEls && colEls.length > spanCount ? (_f = (_e = colEls === null || colEls === void 0 ? void 0 : colEls[spanCount + index]) === null || _e === void 0 ? void 0 : _e.style) === null || _f === void 0 ? void 0 : _f.width : null;\n  if (computedWidth) {\n    computedWidth = parseInt(computedWidth);\n  }\n  var columnSizeItem = columnsWidth.get(column.key);\n  var width = columnSizeItem ? columnSizeItem.width : column.width ? column.width : computedWidth;\n  return __assign(__assign({}, column), {\n    width: width,\n    // 加入onHeaderCell\n    onHeaderCell: function onHeaderCell() {\n      var findLoop = function findLoop(__columns) {\n        var res;\n        for (var i = 0; i < __columns.length; i++) {\n          if (__columns[i].dataIndex === column.dataIndex) {\n            res = __columns[i];\n            break;\n          } else {\n            if (__columns[i].children && Array.isArray(__columns[i].children)) {\n              res = findLoop(__columns[i].children);\n              if (res) break;\n            }\n          }\n        }\n        return res;\n      };\n      var _columns = context.getTableColumns();\n      var _column = findLoop(_columns);\n      var onHeaderCell = _column.onHeaderCell,\n        _others = __rest(_column, [\"onHeaderCell\"]);\n      return {\n        width: _others.width,\n        onResize: handleResize(context, _others, columnsWidth)\n      };\n    }\n  });\n};"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","handleResize","context","column","columnsWidth","_a","size","set","key","forceUpdate","defineProperty","exports","value","default","index","colEls","_d","_c","_b","tableWrapRef","current","querySelectorAll","spanCount","getRowSelection","isShowNumber","computedWidth","_f","_e","style","width","parseInt","columnSizeItem","get","onHeaderCell","_column","findLoop","__columns","res","dataIndex","children","Array","isArray","getTableColumns","_others","onResize"],"mappings":"AAAA,aAEA,IAAIA,SAA0C,WAQ5C,OAPAA,SAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMC,KAAMP,SAAS,CACvC,EACIQ,OAAsC,SAAUX,EAAGY,GACrD,IAAIb,EAAI,GACR,IAASM,KAAKL,EAAOH,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,GAAKO,EAAEC,QAAQR,CAAC,EAAI,IAAGN,EAAEM,GAAKL,EAAEK,IAC9F,GAAS,MAALL,GAAqD,YAAxC,OAAOH,OAAOiB,sBAAsC,IAAK,IAAIb,EAAI,EAAGI,EAAIR,OAAOiB,sBAAsBd,CAAC,EAAGC,EAAII,EAAED,OAAQH,CAAC,GACnIW,EAAEC,QAAQR,EAAEJ,EAAE,EAAI,GAAKJ,OAAOS,UAAUS,qBAAqBP,KAAKR,EAAGK,EAAEJ,EAAE,IAAGF,EAAEM,EAAEJ,IAAMD,EAAEK,EAAEJ,KAEhG,OAAOF,CACT,EAYA,SAASiB,aAAaC,EAASC,EAAQC,GACrC,OAAO,SAAUP,EAAGQ,GACdC,EAAOD,EAAGC,KAEdF,EAAaG,IAAIJ,EAAOK,IAAKF,CAAI,EACjCJ,EAAQO,YAAY,CACtB,CACF,CAlBA3B,OAAO4B,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAiBDD,QAAQE,QAAU,SAAUR,GAC1B,IACID,EAAeC,EAAGD,aACpBF,EAAUG,EAAGH,QACbY,EAAQT,EAAGS,MACXX,EAASE,EAAGF,OAEVY,EAAS,OAACC,EAAK,OAACC,EAAK,OAACC,EAAKhB,MAAAA,EAAyC,KAAA,EAASA,EAAQiB,cAA0C,KAAA,EAASD,EAAGE,SAAqC,KAAA,EAASH,EAAGI,kBAA8C,KAAA,EAASL,EAAGvB,KAAKwB,EAAI,4CAA4C,EAC3SK,EAAY,EACZpB,EAAQqB,gBAAgB,IAC1BD,GAAwB,GAEtBpB,EAAQsB,aAAa,IACvBF,GAAwB,GAGtBG,GAAAA,EADgBV,GAAUA,EAAO1B,OAASiC,EAAY,OAACI,EAAK,OAACC,EAAKZ,MAAAA,EAAuC,KAAA,EAASA,EAAOO,EAAYR,IAAoC,KAAA,EAASa,EAAGC,OAAmC,KAAA,EAASF,EAAGG,MAAQ,OAE9NC,SAASL,CAAa,EAEpCM,EAAiB3B,EAAa4B,IAAI7B,EAAOK,GAAG,EAC5CqB,EAAQE,EAAiBA,EAAeF,MAAQ1B,EAAO0B,OAAuBJ,EAClF,OAAO5C,SAASA,SAAS,GAAIsB,CAAM,EAAG,CACpC0B,MAAOA,EAEPI,aAAc,WACZ,IAgBIC,EAhBW,SAASC,EAASC,GAE/B,IADA,IAAIC,EACKnD,EAAI,EAAGA,EAAIkD,EAAU/C,OAAQH,CAAC,GAAI,CACzC,GAAIkD,EAAUlD,GAAGoD,YAAcnC,EAAOmC,UAAW,CAC/CD,EAAMD,EAAUlD,GAChB,KACF,CACE,GAAIkD,EAAUlD,GAAGqD,UAAYC,MAAMC,QAAQL,EAAUlD,GAAGqD,QAAQ,IAC9DF,EAAMF,EAASC,EAAUlD,GAAGqD,QAAQ,GAC3B,KAGf,CACA,OAAOF,CACT,EACenC,EAAQwC,gBAAgB,CACR,EAE7BC,GADiBT,EAAQD,aACfrC,OAAOsC,EAAS,CAAC,eAAe,GAC5C,MAAO,CACLL,MAAOc,EAAQd,MACfe,SAAU3C,aAAaC,EAASyC,EAASvC,CAAY,CACvD,CACF,CACF,CAAC,CACH"}