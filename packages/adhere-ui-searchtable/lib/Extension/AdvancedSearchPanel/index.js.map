{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar icons_1 = require(\"@ant-design/icons\");\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar adhere_ui_flexlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\n\nvar adhere_ui_slidelayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-slidelayout\"));\n\nvar adhere_ui_space_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-space\"));\n\nvar adhere_ui_tablegridlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-tablegridlayout\"));\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar SearchTable_1 = require(\"../../SearchTable\");\n\nvar VerticalFlexLayout = adhere_ui_flexlayout_1.default.VerticalFlexLayout,\n    ScrollLayout = adhere_ui_flexlayout_1.default.ScrollLayout;\nvar renderGridSearchFormGroup = adhere_ui_tablegridlayout_1.default.renderGridSearchFormGroup;\nvar Overlay = adhere_ui_slidelayout_1.default.Overlay;\n\nvar _selectorPrefix = \"\".concat(SearchTable_1.selectorPrefix, \"-advancedsearchpanel\");\n/**\n * AdvancedSearchPanel\n * @param props\n * @return {React.ReactPortal}\n * @constructor\n */\n\n\nvar AdvancedSearchPanel = function AdvancedSearchPanel(props) {\n  var _a = props.advancedSearchConfig,\n      _b = _a.advancedSearch,\n      getPopupContainer = _b.getPopupContainer,\n      overlayProps = tslib_1.__rest(_b, [\"getPopupContainer\"]),\n      _c = _a.showStrategy,\n      showStrategy = _c === void 0 ? 'all' : _c,\n      renderTitleLabel = _a.renderTitleLabel,\n      renderCollapse = _a.renderCollapse,\n      _d = props.tableGridLayoutConfig,\n      tableGridLayoutConfig = _d === void 0 ? {\n    layout: 'horizontal',\n    bordered: false\n  } : _d,\n      _e = props.groupData,\n      groupData = _e === void 0 ? [] : _e,\n      _f = props.remainingGroupData,\n      remainingGroupData = _f === void 0 ? [] : _f,\n      onSearch = props.onSearch,\n      onReset = props.onReset;\n\n  var _g = (0, react_1.useState)(overlayProps.collapse),\n      collapse = _g[0],\n      setCollapse = _g[1];\n\n  (0, react_1.useEffect)(function () {\n    setCollapse(overlayProps.collapse);\n  }, [overlayProps.collapse]);\n  return react_dom_1.default.createPortal(react_1.default.createElement(Overlay, tslib_1.__assign({}, overlayProps, {\n    className: (0, classnames_1.default)(\"\".concat(_selectorPrefix), overlayProps.className || ''),\n    collapse: collapse\n  }), react_1.default.createElement(VerticalFlexLayout, {\n    className: \"\".concat(_selectorPrefix, \"-inner\"),\n    renderTop: react_1.default.createElement(\"header\", {\n      className: \"\".concat(_selectorPrefix, \"-header\")\n    }, react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-title\")\n    }, react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !renderTitleLabel,\n      noMatch: function noMatch() {\n        return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel();\n      }\n    }, function () {\n      return react_1.default.createElement(adhere_ui_space_1.default.Group, {\n        direction: \"horizontal\",\n        size: 2\n      }, react_1.default.createElement(icons_1.FilterOutlined, null), react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('高级搜索')));\n    })), react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-collapse\"),\n      onClick: function onClick() {\n        return setCollapse(!collapse);\n      }\n    }, react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !renderCollapse,\n      noMatch: function noMatch() {\n        return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse);\n      }\n    }, function () {\n      return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n        conditional: collapse,\n        noMatch: function noMatch() {\n          return react_1.default.createElement(adhere_ui_space_1.default.Group, {\n            direction: \"horizontal\",\n            size: 2\n          }, react_1.default.createElement(icons_1.RightCircleOutlined, null), react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('展开')));\n        }\n      }, function () {\n        return react_1.default.createElement(adhere_ui_space_1.default.Group, {\n          direction: \"horizontal\",\n          size: 2\n        }, react_1.default.createElement(icons_1.LeftCircleOutlined, null), react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('收起')));\n      });\n    }))),\n    renderMain: react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-main\")\n    }, react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-scroll\")\n    }, react_1.default.createElement(ScrollLayout, {\n      scrollY: true\n    }, renderGridSearchFormGroup( // @ts-ignore\n    showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))), react_1.default.createElement(\"footer\", {\n      className: \"\".concat(_selectorPrefix, \"-footer\")\n    }, react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, react_1.default.createElement(antd_1.Button, {\n      type: \"primary\",\n      icon: react_1.default.createElement(icons_1.SearchOutlined, null),\n      onClick: function onClick() {\n        return onSearch().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, adhere_util_intl_1.default.v('确定'))), react_1.default.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, react_1.default.createElement(antd_1.Button, {\n      icon: react_1.default.createElement(icons_1.ReloadOutlined, null),\n      onClick: function onClick() {\n        return onReset().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, adhere_util_intl_1.default.v('重置')))))\n  })), getPopupContainer());\n};\n\nAdvancedSearchPanel.defaultProps = {\n  groupData: [],\n  tableGridLayoutConfig: {\n    layout: 'horizontal',\n    bordered: false\n  },\n  remainingGroupData: [],\n  advancedSearchConfig: {\n    // 显示少行 'auto' | number\n    // auto - 为自动\n    // number - 指定行数 超出行会在高级筛选中显示\n    rowCount: 'auto',\n    // 剩余的条件的显示方式 'all' | 'remaining'\n    // all - 全部显示\n    // remaining - 显示剩余\n    showStrategy: 'all',\n    // 高级搜索\n    advancedSearch: {\n      // 外围样式\n      className: '',\n      // 外围style\n      style: {},\n      // 宽度\n      width: '30%',\n      // 是否有遮罩\n      mask: true,\n      // 层级\n      zIndex: 19999,\n      // 过度时间\n      time: 300,\n      // 方向\n      direction: 'right',\n      // 默认不展开\n      collapse: false,\n      onBeforeShow: function onBeforeShow() {},\n      onBeforeClose: function onBeforeClose() {},\n      onAfterShow: function onAfterShow() {},\n      onAfterClose: function onAfterClose() {},\n      getPopupContainer: function getPopupContainer() {\n        return document.body;\n      }\n    }\n  }\n};\nexports.default = react_1.default.memo(AdvancedSearchPanel);"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","classnames_1","__importDefault","react_1","__importStar","react_dom_1","icons_1","adhere_ui_conditionalrender_1","adhere_ui_flexlayout_1","adhere_ui_slidelayout_1","adhere_ui_space_1","adhere_ui_tablegridlayout_1","adhere_util_intl_1","SearchTable_1","VerticalFlexLayout","default","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","concat","selectorPrefix","AdvancedSearchPanel","props","_a","advancedSearchConfig","_b","advancedSearch","getPopupContainer","overlayProps","__rest","_c","showStrategy","renderTitleLabel","renderCollapse","_d","tableGridLayoutConfig","layout","bordered","_e","groupData","_f","remainingGroupData","onSearch","onReset","_g","useState","collapse","setCollapse","useEffect","createPortal","createElement","__assign","className","renderTop","conditional","noMatch","Group","direction","size","FilterOutlined","v","onClick","RightCircleOutlined","LeftCircleOutlined","renderMain","scrollY","Button","type","icon","SearchOutlined","then","ReloadOutlined","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","memo"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,QAAUL,QAAQ,OAAO,EAEzBM,OAASN,QAAQ,MAAM,EAEvBO,aAAeF,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAE5DS,QAAUJ,QAAQK,aAAaV,QAAQ,OAAO,CAAC,EAE/CW,YAAcN,QAAQG,gBAAgBR,QAAQ,WAAW,CAAC,EAE1DY,QAAUZ,QAAQ,mBAAmB,EAErCa,8BAAgCR,QAAQG,gBAAgBR,QAAQ,yCAAyC,CAAC,EAE1Gc,uBAAyBT,QAAQG,gBAAgBR,QAAQ,kCAAkC,CAAC,EAE5Fe,wBAA0BV,QAAQG,gBAAgBR,QAAQ,mCAAmC,CAAC,EAE9FgB,kBAAoBX,QAAQG,gBAAgBR,QAAQ,6BAA6B,CAAC,EAElFiB,4BAA8BZ,QAAQG,gBAAgBR,QAAQ,uCAAuC,CAAC,EAEtGkB,mBAAqBb,QAAQG,gBAAgBR,QAAQ,8BAA8B,CAAC,EAEpFmB,cAAgBnB,QAAQ,mBAAmB,EAE3CoB,mBAAqBN,uBAAuBO,QAAQD,mBACpDE,aAAeR,uBAAuBO,QAAQC,aAC9CC,0BAA4BN,4BAA4BI,QAAQE,0BAChEC,QAAUT,wBAAwBM,QAAQG,QAE1CC,gBAAkB,GAAGC,OAAOP,cAAcQ,eAAgB,sBAAsB,EAShFC,oBAAsB,SAA6BC,GACrD,IAAIC,EAAKD,EAAME,qBACXC,EAAKF,EAAGG,eACRC,EAAoBF,EAAGE,kBACvBC,EAAe9B,QAAQ+B,OAAOJ,EAAI,CAAC,oBAAoB,EACvDK,EAAKP,EAAGQ,aACRA,EAAsB,KAAA,IAAPD,EAAgB,MAAQA,EACvCE,EAAmBT,EAAGS,iBACtBC,EAAiBV,EAAGU,eACpBC,EAAKZ,EAAMa,sBACXA,EAA+B,KAAA,IAAPD,EAAgB,CAC1CE,OAAQ,aACRC,SAAU,CAAA,CACZ,EAAIH,EACAI,EAAKhB,EAAMiB,UACXA,EAAmB,KAAA,IAAPD,EAAgB,GAAKA,EACjCE,EAAKlB,EAAMmB,mBACXA,EAA4B,KAAA,IAAPD,EAAgB,GAAKA,EAC1CE,EAAWpB,EAAMoB,SACjBC,EAAUrB,EAAMqB,QAEhBC,GAAK,EAAI1C,QAAQ2C,UAAUjB,EAAakB,QAAQ,EAChDA,EAAWF,EAAG,GACdG,EAAcH,EAAG,GAKrB,OAHA,EAAI1C,QAAQ8C,WAAW,WACrBD,EAAYnB,EAAakB,QAAQ,CACnC,EAAG,CAAClB,EAAakB,SAAS,EACnB1C,YAAYU,QAAQmC,aAAa/C,QAAQY,QAAQoC,cAAcjC,QAASnB,QAAQqD,SAAS,GAAIvB,EAAc,CAChHwB,WAAW,EAAIpD,aAAac,SAAS,GAAGK,OAAOD,eAAe,EAAGU,EAAawB,WAAa,EAAE,EAC7FN,SAAUA,CACZ,CAAC,EAAG5C,QAAQY,QAAQoC,cAAcrC,mBAAoB,CACpDuC,UAAW,GAAGjC,OAAOD,gBAAiB,QAAQ,EAC9CmC,UAAWnD,QAAQY,QAAQoC,cAAc,SAAU,CACjDE,UAAW,GAAGjC,OAAOD,gBAAiB,SAAS,CACjD,EAAGhB,QAAQY,QAAQoC,cAAc,MAAO,CACtCE,UAAW,GAAGjC,OAAOD,gBAAiB,QAAQ,CAChD,EAAGhB,QAAQY,QAAQoC,cAAc5C,8BAA8BQ,QAAS,CACtEwC,YAAa,CAACtB,EACduB,QAAS,WACP,OAAOvB,MAAAA,EAA2D,KAAA,EAASA,EAAiB,CAC9F,CACF,EAAG,WACD,OAAO9B,QAAQY,QAAQoC,cAAczC,kBAAkBK,QAAQ0C,MAAO,CACpEC,UAAW,aACXC,KAAM,CACR,EAAGxD,QAAQY,QAAQoC,cAAc7C,QAAQsD,eAAgB,IAAI,EAAGzD,QAAQY,QAAQoC,cAAc,SAAU,KAAMvC,mBAAmBG,QAAQ8C,EAAE,MAAM,CAAC,CAAC,CACrJ,CAAC,CAAC,EAAG1D,QAAQY,QAAQoC,cAAc,MAAO,CACxCE,UAAW,GAAGjC,OAAOD,gBAAiB,WAAW,EACjD2C,QAAS,WACP,OAAOd,EAAY,CAACD,CAAQ,CAC9B,CACF,EAAG5C,QAAQY,QAAQoC,cAAc5C,8BAA8BQ,QAAS,CACtEwC,YAAa,CAACrB,EACdsB,QAAS,WACP,OAAOtB,MAAAA,EAAuD,KAAA,EAASA,EAAea,CAAQ,CAChG,CACF,EAAG,WACD,OAAO5C,QAAQY,QAAQoC,cAAc5C,8BAA8BQ,QAAS,CAC1EwC,YAAaR,EACbS,QAAS,WACP,OAAOrD,QAAQY,QAAQoC,cAAczC,kBAAkBK,QAAQ0C,MAAO,CACpEC,UAAW,aACXC,KAAM,CACR,EAAGxD,QAAQY,QAAQoC,cAAc7C,QAAQyD,oBAAqB,IAAI,EAAG5D,QAAQY,QAAQoC,cAAc,SAAU,KAAMvC,mBAAmBG,QAAQ8C,EAAE,IAAI,CAAC,CAAC,CACxJ,CACF,EAAG,WACD,OAAO1D,QAAQY,QAAQoC,cAAczC,kBAAkBK,QAAQ0C,MAAO,CACpEC,UAAW,aACXC,KAAM,CACR,EAAGxD,QAAQY,QAAQoC,cAAc7C,QAAQ0D,mBAAoB,IAAI,EAAG7D,QAAQY,QAAQoC,cAAc,SAAU,KAAMvC,mBAAmBG,QAAQ8C,EAAE,IAAI,CAAC,CAAC,CACvJ,CAAC,CACH,CAAC,CAAC,CAAC,EACHI,WAAY9D,QAAQY,QAAQoC,cAAc,MAAO,CAC/CE,UAAW,GAAGjC,OAAOD,gBAAiB,OAAO,CAC/C,EAAGhB,QAAQY,QAAQoC,cAAc,MAAO,CACtCE,UAAW,GAAGjC,OAAOD,gBAAiB,SAAS,CACjD,EAAGhB,QAAQY,QAAQoC,cAAcnC,aAAc,CAC7CkD,QAAS,CAAA,CACX,EAAGjD,0BACc,QAAjBe,EAAyBQ,EAAYE,EAAoBN,CAAqB,CAAC,CAAC,EAAGjC,QAAQY,QAAQoC,cAAc,SAAU,CACzHE,UAAW,GAAGjC,OAAOD,gBAAiB,SAAS,CACjD,EAAGhB,QAAQY,QAAQoC,cAAc,MAAO,CACtCE,UAAW,GAAGjC,OAAOD,gBAAiB,OAAO,CAC/C,EAAGhB,QAAQY,QAAQoC,cAAcnD,OAAOmE,OAAQ,CAC9CC,KAAM,UACNC,KAAMlE,QAAQY,QAAQoC,cAAc7C,QAAQgE,eAAgB,IAAI,EAChER,QAAS,WACP,OAAOnB,EAAS,EAAE4B,KAAK,WACrB,OAAOvB,EAAY,CAAA,CAAK,CAC1B,CAAC,CACH,CACF,EAAGpC,mBAAmBG,QAAQ8C,EAAE,IAAI,CAAC,CAAC,EAAG1D,QAAQY,QAAQoC,cAAc,MAAO,CAC5EE,UAAW,GAAGjC,OAAOD,gBAAiB,OAAO,CAC/C,EAAGhB,QAAQY,QAAQoC,cAAcnD,OAAOmE,OAAQ,CAC9CE,KAAMlE,QAAQY,QAAQoC,cAAc7C,QAAQkE,eAAgB,IAAI,EAChEV,QAAS,WACP,OAAOlB,EAAQ,EAAE2B,KAAK,WACpB,OAAOvB,EAAY,CAAA,CAAK,CAC1B,CAAC,CACH,CACF,EAAGpC,mBAAmBG,QAAQ8C,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAC1C,CAAC,CAAC,EAAGjC,EAAkB,CAAC,CAC1B,EAEAN,oBAAoBmD,aAAe,CACjCjC,UAAW,GACXJ,sBAAuB,CACrBC,OAAQ,aACRC,SAAU,CAAA,CACZ,EACAI,mBAAoB,GACpBjB,qBAAsB,CAIpBiD,SAAU,OAIV1C,aAAc,MAEdL,eAAgB,CAEd0B,UAAW,GAEXsB,MAAO,GAEPC,MAAO,MAEPC,KAAM,CAAA,EAENC,OAAQ,MAERC,KAAM,IAENrB,UAAW,QAEXX,SAAU,CAAA,EACViC,aAAc,aACdC,cAAe,aACfC,YAAa,aACbC,aAAc,aACdvD,kBAAmB,WACjB,OAAOwD,SAASC,IAClB,CACF,CACF,CACF,EACAxF,QAAQkB,QAAUZ,QAAQY,QAAQuE,KAAKhE,mBAAmB"}