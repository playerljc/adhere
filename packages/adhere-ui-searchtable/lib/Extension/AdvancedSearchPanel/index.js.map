{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\r\nvar icons_1 = require(\"@ant-design/icons\");\r\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar adhere_ui_flexlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\r\nvar adhere_ui_slidelayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-slidelayout\"));\r\nvar adhere_ui_space_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-space\"));\r\nvar adhere_ui_tablegridlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-tablegridlayout\"));\r\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar SearchTable_1 = require(\"../../SearchTable\");\r\nvar VerticalFlexLayout = adhere_ui_flexlayout_1.default.VerticalFlexLayout, ScrollLayout = adhere_ui_flexlayout_1.default.ScrollLayout;\r\nvar renderGridSearchFormGroup = adhere_ui_tablegridlayout_1.default.renderGridSearchFormGroup;\r\nvar Overlay = adhere_ui_slidelayout_1.default.Overlay;\r\nvar _selectorPrefix = SearchTable_1.selectorPrefix + \"-advancedsearchpanel\";\r\n/**\r\n * AdvancedSearchPanel\r\n * @param props\r\n * @return {React.ReactPortal}\r\n * @constructor\r\n */\r\nvar AdvancedSearchPanel = function (props) {\r\n    var _a = props.advancedSearchConfig, _b = _a.advancedSearch, getPopupContainer = _b.getPopupContainer, overlayProps = tslib_1.__rest(_b, [\"getPopupContainer\"]), _c = _a.showStrategy, showStrategy = _c === void 0 ? 'all' : _c, renderTitleLabel = _a.renderTitleLabel, renderCollapse = _a.renderCollapse, _d = props.tableGridLayoutConfig, tableGridLayoutConfig = _d === void 0 ? {\r\n        layout: 'horizontal',\r\n        bordered: false,\r\n    } : _d, _e = props.groupData, groupData = _e === void 0 ? [] : _e, _f = props.remainingGroupData, remainingGroupData = _f === void 0 ? [] : _f, onSearch = props.onSearch, onReset = props.onReset;\r\n    var _g = react_1.useState(overlayProps.collapse), collapse = _g[0], setCollapse = _g[1];\r\n    react_1.useEffect(function () {\r\n        setCollapse(overlayProps.collapse);\r\n    }, [overlayProps.collapse]);\r\n    return react_dom_1.default.createPortal(react_1.default.createElement(Overlay, tslib_1.__assign({}, overlayProps, { className: classnames_1.default(\"\" + _selectorPrefix, overlayProps.className || ''), collapse: collapse }),\r\n        react_1.default.createElement(VerticalFlexLayout, { className: _selectorPrefix + \"-inner\", renderTop: react_1.default.createElement(\"header\", { className: _selectorPrefix + \"-header\" },\r\n                react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-title\" },\r\n                    react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !renderTitleLabel, noMatch: function () { return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel(); } }, function () { return (react_1.default.createElement(adhere_ui_space_1.default.Group, { direction: \"horizontal\", size: 2 },\r\n                        react_1.default.createElement(icons_1.FilterOutlined, null),\r\n                        react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('高级搜索')))); })),\r\n                react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-collapse\", onClick: function () { return setCollapse(!collapse); } },\r\n                    react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !renderCollapse, noMatch: function () { return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse); } }, function () { return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: collapse, noMatch: function () { return (react_1.default.createElement(adhere_ui_space_1.default.Group, { direction: \"horizontal\", size: 2 },\r\n                            react_1.default.createElement(icons_1.RightCircleOutlined, null),\r\n                            react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('展开')))); } }, function () { return (react_1.default.createElement(adhere_ui_space_1.default.Group, { direction: \"horizontal\", size: 2 },\r\n                        react_1.default.createElement(icons_1.LeftCircleOutlined, null),\r\n                        react_1.default.createElement(\"strong\", null, adhere_util_intl_1.default.v('收起')))); })); }))), renderMain: react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-main\" },\r\n                react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-main-inner\" },\r\n                    react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-scroll\" },\r\n                        react_1.default.createElement(ScrollLayout, { scrollY: true }, renderGridSearchFormGroup(\r\n                        // @ts-ignore\r\n                        showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))),\r\n                    react_1.default.createElement(\"footer\", { className: _selectorPrefix + \"-footer\" },\r\n                        react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-item\" },\r\n                            react_1.default.createElement(antd_1.Button, { type: \"primary\", icon: react_1.default.createElement(icons_1.SearchOutlined, null), onClick: function () { return onSearch().then(function () { return setCollapse(false); }); } }, adhere_util_intl_1.default.v('确定'))),\r\n                        react_1.default.createElement(\"div\", { className: _selectorPrefix + \"-item\" },\r\n                            react_1.default.createElement(antd_1.Button, { icon: react_1.default.createElement(icons_1.ReloadOutlined, null), onClick: function () { return onReset().then(function () { return setCollapse(false); }); } }, adhere_util_intl_1.default.v('重置')))))) })), getPopupContainer());\r\n};\r\nAdvancedSearchPanel.defaultProps = {\r\n    groupData: [],\r\n    tableGridLayoutConfig: {\r\n        layout: 'horizontal',\r\n        bordered: false,\r\n    },\r\n    remainingGroupData: [],\r\n    advancedSearchConfig: {\r\n        // 显示少行 'auto' | number\r\n        // auto - 为自动\r\n        // number - 指定行数 超出行会在高级筛选中显示\r\n        rowCount: 'auto',\r\n        // 剩余的条件的显示方式 'all' | 'remaining'\r\n        // all - 全部显示\r\n        // remaining - 显示剩余\r\n        showStrategy: 'all',\r\n        // 高级搜索\r\n        advancedSearch: {\r\n            // 外围样式\r\n            className: '',\r\n            // 外围style\r\n            style: {},\r\n            // 宽度\r\n            width: '30%',\r\n            // 是否有遮罩\r\n            mask: true,\r\n            // 层级\r\n            zIndex: 19999,\r\n            // 过度时间\r\n            time: 300,\r\n            // 方向\r\n            direction: 'right',\r\n            // 默认不展开\r\n            collapse: false,\r\n            onBeforeShow: function () { },\r\n            onBeforeClose: function () { },\r\n            onAfterShow: function () { },\r\n            onAfterClose: function () { },\r\n            getPopupContainer: function () { return document.body; },\r\n        },\r\n    },\r\n};\r\nexports.default = react_1.default.memo(AdvancedSearchPanel);\r\n//# sourceMappingURL=index.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","classnames_1","__importDefault","react_1","__importStar","react_dom_1","icons_1","adhere_ui_conditionalrender_1","adhere_ui_flexlayout_1","adhere_ui_slidelayout_1","adhere_ui_space_1","adhere_ui_tablegridlayout_1","adhere_util_intl_1","SearchTable_1","VerticalFlexLayout","default","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","selectorPrefix","AdvancedSearchPanel","props","_a","advancedSearchConfig","_b","advancedSearch","getPopupContainer","overlayProps","__rest","_c","showStrategy","renderTitleLabel","renderCollapse","_d","tableGridLayoutConfig","layout","bordered","_e","groupData","_f","remainingGroupData","onSearch","onReset","_g","useState","collapse","setCollapse","useEffect","createPortal","createElement","__assign","className","renderTop","conditional","noMatch","Group","direction","size","FilterOutlined","v","onClick","RightCircleOutlined","LeftCircleOutlined","renderMain","scrollY","Button","type","icon","SearchOutlined","then","ReloadOutlined","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","memo"],"mappings":"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"}