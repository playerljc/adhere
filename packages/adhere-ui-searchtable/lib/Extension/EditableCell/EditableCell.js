"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),react_1=tslib_1.__importStar(require("react")),SearchTable_1=require("../../SearchTable"),EditableCellEdit_1=tslib_1.__importDefault(require("./Edit/EditableCellEdit")),View_1=tslib_1.__importDefault(require("./View")),EditableCell=function(l){var e=l.column,t={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==e?void 0:e.dataIndex,useKeepEdit:!1},a=react_1.useMemo(function(){return tslib_1.__assign(tslib_1.__assign({},t),(null==e?void 0:e.$editable)||{})},[e,null==e?void 0:e.dataIndex]),i=react_1.useState(a.defaultStatus),n=i[0],u=i[1],r=react_1.useContext(SearchTable_1.SearchTableContext);return react_1.useEffect(function(){u(null==a?void 0:a.defaultStatus)},[null==(i=null==r?void 0:r.context)?void 0:i.getData()]),react_1.useEffect(function(){u(null==a?void 0:a.defaultStatus)},[null==a?void 0:a.defaultStatus]),function(e){var t=e;return a.editable?a.useKeepEdit?t=react_1.default.cloneElement(e,e.props,[react_1.default.createElement(EditableCellEdit_1.default,tslib_1.__assign({},l,{editableConfig:a,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==r?void 0:r.context)?void 0:e.setActiveValue)&&t.call(e,""),u("view")}}))]):"view"===n?t=react_1.default.cloneElement(e,e.props,[react_1.default.createElement(View_1.default,tslib_1.__assign({},l,{editableConfig:a,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==r?void 0:r.context)?void 0:e.setActiveValue)&&t.call(e,l.record[l.column.dataIndex]),u("edit")}}))]):"edit"===n&&(t=react_1.default.cloneElement(e,e.props,[react_1.default.createElement(EditableCellEdit_1.default,tslib_1.__assign({},l,{editableConfig:a,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==r?void 0:r.context)?void 0:e.setActiveValue)&&t.call(e,""),u("view")}}))])):t=e,t}};exports.default=EditableCell;
//# sourceMappingURL=EditableCell.js.map
