var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var a in t=arguments[l])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};import React,{useContext,useEffect,useMemo,useState}from"react";import{SearchTableContext}from"../../SearchTable";import EditableCellEdit from"./Edit/EditableCellEdit";import EditableCellView from"./View";var EditableCell=function(l){var e=l.column,t={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==e?void 0:e.dataIndex,useKeepEdit:!1},n=useMemo(function(){return __assign(__assign({},t),(null==e?void 0:e.$editable)||{})},[e,null==e?void 0:e.dataIndex]),a=useState(n.defaultStatus),i=a[0],o=a[1],u=useContext(SearchTableContext);return useEffect(function(){o(null==n?void 0:n.defaultStatus)},[null==(a=null==u?void 0:u.context)?void 0:a.getData()]),useEffect(function(){o(null==n?void 0:n.defaultStatus)},[null==n?void 0:n.defaultStatus]),function(e){var t=e;return n.editable?n.useKeepEdit?t=React.cloneElement(e,e.props,[React.createElement(EditableCellEdit,__assign({},l,{editableConfig:n,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==u?void 0:u.context)?void 0:e.setActiveValue)&&t.call(e,""),o("view")}}))]):"view"===i?t=React.cloneElement(e,e.props,[React.createElement(EditableCellView,__assign({},l,{editableConfig:n,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==u?void 0:u.context)?void 0:e.setActiveValue)&&t.call(e,l.record[l.column.dataIndex]),o("edit")}}))]):"edit"===i&&(t=React.cloneElement(e,e.props,[React.createElement(EditableCellEdit,__assign({},l,{editableConfig:n,onTriggerChange:function(){var e,t;null!=(t=null==(e=null==u?void 0:u.context)?void 0:e.setActiveValue)&&t.call(e,""),o("view")}}))])):t=e,t}};export default EditableCell;
//# sourceMappingURL=EditableCell.js.map
