"use strict";require("core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),react_1=tslib_1.__importStar(require("react")),SearchTable_1=require("../../SearchTable"),EditableTableCellEdit_1=tslib_1.__importDefault(require("./Edit/EditableTableCellEdit")),View_1=tslib_1.__importDefault(require("./View")),EditableTableCell=function(e){e.record;var t=e.column,l=(e.rowIndex,e.columns,tslib_1.__rest(e,["record","column","rowIndex","columns"])),a={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==t?void 0:t.dataIndex,useKeepEdit:!1},i=(0,react_1.useMemo)(function(){return tslib_1.__assign(tslib_1.__assign({},a),(null==t?void 0:t.$editable)||{})},[t,null==t?void 0:t.dataIndex]),r=(0,react_1.useState)(i.defaultStatus),n=r[0],u=r[1],r=(0,react_1.useContext)(SearchTable_1.SearchTableContext);return(0,react_1.useEffect)(function(){return u("view")},[null==(r=null==r?void 0:r.context)?void 0:r.getData()]),(0,react_1.useEffect)(function(){u(null==i?void 0:i.defaultStatus)},[null==i?void 0:i.defaultStatus]),i.editable?i.useKeepEdit?react_1.default.createElement("td",tslib_1.__assign({},l||{}),react_1.default.createElement(EditableTableCellEdit_1.default,tslib_1.__assign({},e,{editableConfig:i,onTriggerChange:function(){return u("view")}}))):"view"===n?react_1.default.createElement("td",tslib_1.__assign({},l||{}),react_1.default.createElement(View_1.default,tslib_1.__assign({},e,{editableConfig:i,onTriggerChange:function(){return u("edit")}}))):"edit"===n?react_1.default.createElement("td",tslib_1.__assign({},l||{}),react_1.default.createElement(EditableTableCellEdit_1.default,tslib_1.__assign({},e,{editableConfig:i,onTriggerChange:function(){return u("view")}}))):react_1.default.createElement("td",tslib_1.__assign({},l||{}),null==l?void 0:l.children):react_1.default.createElement("td",tslib_1.__assign({},l||{}),null==l?void 0:l.children)};exports.default=EditableTableCell;
//# sourceMappingURL=EditableTableCell.js.map
