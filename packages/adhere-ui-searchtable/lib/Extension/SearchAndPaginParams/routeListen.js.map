{"version":3,"file":"routeListen.js","sources":["Extension/SearchAndPaginParams/routeListen.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.last-index-of.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.string.starts-with.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ProSearchStateTable_1 = require(\"../../ProSearchStateTable\");\n\nvar ProSearchTable_1 = require(\"../../ProSearchTable\");\n\nvar historyStack = [];\n/**\n * clearSearAndPaginParamsByPathname\n * @description 清除查询条件根据pathname\n * @param pathname\n */\n\nfunction clearSearAndPaginParamsByPathname(pathname) {\n  var findIndex = ProSearchTable_1.SearchAndPaginParamsMemo.findIndexByPath(pathname);\n\n  if (findIndex !== -1) {\n    ProSearchTable_1.SearchAndPaginParamsMemo.deleteByIndex(findIndex);\n  }\n\n  findIndex = ProSearchStateTable_1.SearchAndPaginParamsMemo.findIndexByPath(pathname);\n\n  if (findIndex !== -1) {\n    ProSearchStateTable_1.SearchAndPaginParamsMemo.deleteByIndex(findIndex);\n  }\n}\n\nexports.default = function (_a) {\n  var location = _a.location,\n      action = _a.action;\n  var pathname = location.pathname;\n  var findIndex = historyStack.lastIndexOf(pathname); // 没找到\n\n  if (findIndex === -1) {\n    // 清除查询条件\n    clearSearAndPaginParamsByPathname(pathname);\n    historyStack.push(pathname);\n  } // 找到了\n  else {\n    var pathArr = historyStack.slice(findIndex + 1); // 1 2 1\n    // 之间只有一个页面的路径\n\n    if (pathArr.length === 1) {\n      // pathArr[0] /system/task/list/view\n      // pathname   /system/task/list/ 当前\n      if (!pathArr[0].startsWith(pathname)) {\n        // 清除查询条件\n        clearSearAndPaginParamsByPathname(pathname);\n      }\n    } else {\n      // 清除查询条件\n      clearSearAndPaginParamsByPathname(pathname);\n    } // 都需要清空路径\n\n\n    historyStack = historyStack.slice(0, findIndex);\n    historyStack.push(pathname);\n  }\n};"],"names":["require","Object","defineProperty","exports","value","ProSearchStateTable_1","ProSearchTable_1","historyStack","clearSearAndPaginParamsByPathname","pathname","findIndex","SearchAndPaginParamsMemo","findIndexByPath","deleteByIndex","default","_a","pathArr","location","action","lastIndexOf","slice","length","startsWith","push"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDA,QAAQ,2CAA2C,EAEnDA,QAAQ,mCAAmC,EAE3CA,QAAQ,0CAA0C,EAElDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,sBAAwBL,QAAQ,2BAA2B,EAE3DM,iBAAmBN,QAAQ,sBAAsB,EAEjDO,aAAe,GAOnB,SAASC,kCAAkCC,GACzC,IAAIC,EAAYJ,iBAAiBK,yBAAyBC,gBAAgBH,CAAQ,EAEhE,CAAC,IAAfC,GACFJ,iBAAiBK,yBAAyBE,cAAcH,CAAS,EAKjD,CAAC,KAFnBA,EAAYL,sBAAsBM,yBAAyBC,gBAAgBH,CAAQ,IAGjFJ,sBAAsBM,yBAAyBE,cAAcH,CAAS,CAE1E,CAEAP,QAAQW,QAAU,SAAUC,GAC1B,IAWMC,EAXFC,EAAWF,EAAGE,SAEdR,GADSM,EAAGG,OACDD,EAASR,UACpBC,EAAYH,aAAaY,YAAYV,CAAQ,GAE/B,CAAC,IAAfC,GAEFF,kCAAkCC,CAAQ,EAC1CF,eAMuB,KAHnBS,EAAUT,aAAaa,MAAMV,EAAY,CAAC,GAGlCW,QAGLL,EAAQ,GAAGM,WAAWb,CAAQ,GAMnCD,kCAAkCC,CAAQ,EAI5CF,aAAeA,aAAaa,MAAM,EAAGV,CAAS,IAnBjCa,KAAKd,CAAQ,CAsB9B"}