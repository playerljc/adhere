{"version":3,"file":"SearchTableImplement.js","sources":["SearchTableImplement.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SearchTableImplement = exports.selectorPrefix = void 0;\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar serviceregister_1 = __importDefault(require(\"@ctsj/state/lib/middleware/saga/serviceregister\"));\r\nvar SearchTable_1 = __importStar(require(\"./SearchTable\"));\r\nexports.selectorPrefix = 'adhere-ui-searchtableimplement';\r\n/**\r\n * SearchTableImplement\r\n * @class SearchTableImplement\r\n * @classdesc SearchTableImplement - SearchTable的默认实现\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar SearchTableImplement = /** @class */ (function (_super) {\r\n    __extends(SearchTableImplement, _super);\r\n    function SearchTableImplement(props) {\r\n        var _a;\r\n        var _this = _super.call(this, props) || this;\r\n        _this.innerWrapRef = (0, react_1.createRef)();\r\n        /**\r\n         * onSelectChange\r\n         * @description - onSelectChange\r\n         * @param {string} property\r\n         * @param {string} v\r\n         */\r\n        _this.onSelectChange = function (property, v) {\r\n            var _a;\r\n            _this.setState((_a = {},\r\n                _a[property] = v,\r\n                _a));\r\n        };\r\n        /**\r\n         * onInputChange\r\n         * @description - onInputChange\r\n         * @param {string} property\r\n         * @param {any} e\r\n         */\r\n        _this.onInputChange = function (property, e) {\r\n            var _a;\r\n            _this.setState((_a = {},\r\n                _a[property] = e.target.value.trim(),\r\n                _a));\r\n        };\r\n        /**\r\n         * onDateTimeRangeChange\r\n         * @description - onDateTimeRangeChange\r\n         * @param {string[]} propertys\r\n         * @param {any[]} dayjs\r\n         */\r\n        _this.onDateTimeRangeChange = function (propertys, dayjs) {\r\n            var _a;\r\n            _this.setState((_a = {},\r\n                _a[propertys[0]] = dayjs && dayjs.length ? dayjs[0] : null,\r\n                _a[propertys[1]] = dayjs && dayjs.length ? dayjs[1] : null,\r\n                _a));\r\n        };\r\n        Object.assign(_this.state, __assign(__assign({}, _this.getParams()), (_a = {}, _a[_this.getOrderFieldProp()] = _this.getOrderFieldValue(), _a[_this.getOrderProp()] = _this.getOrderPropValue() || 'descend', \r\n        // 查询参数\r\n        _a.searchParams = __assign({}, _this.getParams()), _a.selectedRowKeys = [], _a.selectedRows = [], _a)));\r\n        return _this;\r\n    }\r\n    SearchTableImplement.prototype.componentDidMount = function () {\r\n        _super.prototype.componentDidMount.call(this);\r\n        var getTableWrapperInstance = this.props.getTableWrapperInstance;\r\n        if (getTableWrapperInstance) {\r\n            getTableWrapperInstance(this.innerWrapRef);\r\n        }\r\n    };\r\n    /**\r\n     * getFetchListPropName\r\n     * @override\r\n     * @description - 获取调用列表接口的函数名\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getFetchListPropName = function () {\r\n        return '';\r\n    };\r\n    /**\r\n     * getFetchListPropNameToFirstUpper\r\n     * @override\r\n     * @description - 获取调用列表接口的函数名首字母大写\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getFetchListPropNameToFirstUpper = function () {\r\n        var fetchListPropName = this.getFetchListPropName();\r\n        if (fetchListPropName.length > 1) {\r\n            return \"\".concat(fetchListPropName.charAt(0).toUpperCase()).concat(fetchListPropName.substring(1));\r\n        }\r\n        return fetchListPropName;\r\n    };\r\n    /**\r\n     * getParams\r\n     * @override\r\n     * @description - 获取查询参数对象\r\n     * @return {any}\r\n     */\r\n    SearchTableImplement.prototype.getParams = function () {\r\n        return {};\r\n    };\r\n    /**\r\n     * getServiceName\r\n     * @override\r\n     * @description - 获取接口服务的model名称\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getServiceName = function () {\r\n        return '';\r\n    };\r\n    /**\r\n     * getFetchDataParams\r\n     * @override\r\n     * @description - 获取调用数据接口的参数\r\n     * @return {object}\r\n     */\r\n    SearchTableImplement.prototype.getFetchDataParams = function () {\r\n        return {};\r\n    };\r\n    /**\r\n     * isShowNumber\r\n     * @description - 是否线上序号列\r\n     * @override\r\n     * @return {boolean}\r\n     */\r\n    SearchTableImplement.prototype.isShowNumber = function () {\r\n        return true;\r\n    };\r\n    /**\r\n     * getNumberGeneratorRule\r\n     * @override\r\n     * @description - 表格序号列的生成规则\r\n     * @return {symbol}\r\n     */\r\n    SearchTableImplement.prototype.getNumberGeneratorRule = function () {\r\n        return SearchTable_1.default.NUMBER_GENERATOR_RULE_CONTINUITY;\r\n    };\r\n    /**\r\n     * getNumberGeneratorRule\r\n     * @description 获取符号列的生成规则\r\n     * @return {symbol}\r\n     */\r\n    SearchTableImplement.prototype.getRowSelectionMode = function () {\r\n        return SearchTable_1.default.ROW_SELECTION_NORMAL_MODE;\r\n    };\r\n    /**\r\n     * getTableNumberColumnWidth\r\n     * @override\r\n     * @description - 表格序号列的宽度\r\n     * @return {number}\r\n     */\r\n    SearchTableImplement.prototype.getTableNumberColumnWidth = function () {\r\n        return 80;\r\n    };\r\n    /**\r\n     * getTableNumberColumnProps\r\n     * @return {object}\r\n     */\r\n    SearchTableImplement.prototype.getTableNumberColumnProps = function () {\r\n        return {};\r\n    };\r\n    /**\r\n     * getRowKey\r\n     * @override\r\n     * @description - 数据的主键\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getRowKey = function () {\r\n        return 'id';\r\n    };\r\n    /**\r\n     * getDataKey\r\n     * @description - 获取数据的key\r\n     * @protected\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getDataKey = function () {\r\n        return 'list';\r\n    };\r\n    /**\r\n     * getTotalKey\r\n     * @description - 获取total的key\r\n     * @protected\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getTotalKey = function () {\r\n        return 'totalCount';\r\n    };\r\n    /**\r\n     * getData\r\n     * @description - Table的数据(Table的dataSource字段)\r\n     * @override\r\n     * @return {object[]}\r\n     */\r\n    SearchTableImplement.prototype.getData = function () {\r\n        return this.props[this.getServiceName()][this.getFetchListPropName()][this.getDataKey()];\r\n    };\r\n    /**\r\n     * getTotal\r\n     * @description - Table数据的总条数\r\n     * @override\r\n     * @return {number}\r\n     */\r\n    SearchTableImplement.prototype.getTotal = function () {\r\n        return this.props[this.getServiceName()][this.getFetchListPropName()][this.getTotalKey()];\r\n    };\r\n    /**\r\n     * getRowSelection\r\n     * @override\r\n     * @description - 获取表格行选择对象\r\n     * @return {TableRowSelection<object>}\r\n     */\r\n    SearchTableImplement.prototype.getRowSelection = function () {\r\n        var _this = this;\r\n        var filter = function (selected, records) {\r\n            var rowKey = _this.getRowKey();\r\n            if (selected) {\r\n                // add\r\n                _this.setState({\r\n                    selectedRowKeys: __spreadArray(__spreadArray([], (_this.state.selectedRowKeys || []), true), records.map(function (r) { return r[rowKey]; }), true),\r\n                    selectedRows: __spreadArray(__spreadArray([], (_this.state.selectedRows || []), true), records, true),\r\n                });\r\n            }\r\n            else {\r\n                // remove\r\n                _this.setState({\r\n                    selectedRows: (_this.state.selectedRows || []).filter(function (row) { return !records.find(function (r) { return r[rowKey] === row[rowKey]; }); }),\r\n                    selectedRowKeys: (_this.state.selectedRowKeys || []).filter(function (key) { return !records.find(function (r) { return r[rowKey] === key; }); }),\r\n                });\r\n            }\r\n        };\r\n        return {\r\n            selectedRowKeys: this.state.selectedRowKeys,\r\n            onChange: function (selectedRowKeys, selectedRows) {\r\n                if (_this.getRowSelectionMode() === SearchTable_1.default.ROW_SELECTION_CONTINUOUS_MODE)\r\n                    return;\r\n                // 如果是缺省模式(不能跨页选取)\r\n                _this.setState({\r\n                    selectedRowKeys: selectedRowKeys,\r\n                    selectedRows: selectedRows,\r\n                });\r\n            },\r\n            onSelect: function (record, selected) {\r\n                if (_this.getRowSelectionMode() === SearchTable_1.default.ROW_SELECTION_NORMAL_MODE)\r\n                    return;\r\n                filter(selected, [record]);\r\n            },\r\n            onSelectAll: function (selected, selectedRows, changeRows) {\r\n                if (_this.getRowSelectionMode() === SearchTable_1.default.ROW_SELECTION_NORMAL_MODE)\r\n                    return;\r\n                filter(selected, changeRows);\r\n            },\r\n        };\r\n    };\r\n    /**\r\n     * renderSearchForm\r\n     * @override\r\n     * @description - 渲染Table查询的表单\r\n     * @return {ReactNode}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchForm = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * renderInner\r\n     * @override\r\n     * @description - 渲染主体\r\n     * @return {ReactElement | null}\r\n     */\r\n    SearchTableImplement.prototype.renderInner = function () {\r\n        var innerJSX = _super.prototype.renderInner.call(this);\r\n        return (react_1.default.createElement(\"div\", { ref: this.innerWrapRef, className: \"\".concat(exports.selectorPrefix, \"-tablewrapper\") }, innerJSX));\r\n    };\r\n    /**\r\n     * renderSearchFooterItems\r\n     * @description - 渲染表格的工具栏\r\n     * @override\r\n     * @return {any[]}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchFooterItems = function () {\r\n        return [];\r\n    };\r\n    /**\r\n     * getOrderFieldProp\r\n     * @description - 获取排序字段\r\n     * @override\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getOrderFieldProp = function () {\r\n        return 'orderField';\r\n    };\r\n    /**\r\n     * getOrderFieldValue\r\n     * @description - 获取默认排序字段的值\r\n     * @override\r\n     * @protected\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getOrderFieldValue = function () {\r\n        return '';\r\n    };\r\n    /**\r\n     * getOrderProp\r\n     * @description - 获取排序方式\r\n     * @return {string}\r\n     */\r\n    SearchTableImplement.prototype.getOrderProp = function () {\r\n        return 'order';\r\n    };\r\n    /**\r\n     * getOrderPropValue\r\n     * @override\r\n     * @description - 获取默认排序方式\r\n     * @protected\r\n     * @return {'descend' | 'ascend'}\r\n     */\r\n    SearchTableImplement.prototype.getOrderPropValue = function () {\r\n        return 'descend';\r\n    };\r\n    /**\r\n     * clear\r\n     * @description - 清空查询条件\r\n     * @override\r\n     * @return {Promise<void>}\r\n     */\r\n    SearchTableImplement.prototype.clear = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a;\r\n            _this.setState(__assign(__assign({}, _this.getParams()), (_a = {}, _a[_this.getOrderFieldProp()] = _this.getOrderFieldValue(), _a[_this.getOrderProp()] = _this.getOrderPropValue() || 'descend', \r\n            // 查询参数\r\n            _a.searchParams = __assign({}, _this.getParams()), _a.selectedRowKeys = [], _a.selectedRows = [], _a)), function () {\r\n                resolve();\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * showLoading\r\n     * @description - 是否显示遮罩\r\n     * @override\r\n     * @return {boolean}\r\n     */\r\n    SearchTableImplement.prototype.showLoading = function () {\r\n        return this.props.loading[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\r\n    };\r\n    /**\r\n     * getSearchParams\r\n     * @description - 获取查询参数\r\n     * @protected\r\n     * @return {any}\r\n     */\r\n    SearchTableImplement.prototype.getSearchParams = function () {\r\n        var _a;\r\n        var _b = this.state, page = _b.page, limit = _b.limit, searchParams = _b.searchParams;\r\n        var order = this.state[this.getOrderProp()];\r\n        return __assign({}, __assign(__assign(__assign({ page: page, limit: limit }, searchParams), (_a = {}, _a[this.getOrderProp()] = order === 'descend' ? 'desc' : 'asc', _a[this.getOrderFieldProp()] = this.state[this.getOrderFieldProp()], _a)), this.getFetchDataParams()));\r\n    };\r\n    /**\r\n     * fetchData\r\n     * @description - 加载数据\r\n     * @override\r\n     * @return {Promise<any>}\r\n     */\r\n    SearchTableImplement.prototype.fetchData = function () {\r\n        return this.fetchDataExecute(this.getSearchParams());\r\n    };\r\n    /**\r\n     * sync\r\n     * @description 同步\r\n     * @return Promise<any>\r\n     */\r\n    SearchTableImplement.prototype.sync = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var page = _this.state.page;\r\n            if (page === 1) {\r\n                resolve(_this.fetchData());\r\n                return;\r\n            }\r\n            var res = _this.fetchData().then(function () {\r\n                var data = _this.getData();\r\n                if (data.length) {\r\n                    resolve(res);\r\n                }\r\n                else {\r\n                    _this.setState({\r\n                        page: page - 1,\r\n                    }, function () { return resolve(_this.fetchData()); });\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * fetchDataExecute\r\n     * @description - 真正的执行获取列表数据的接口\r\n     * @param {object} searchParams\r\n     * @protected\r\n     * @return {Promise<any>}\r\n     */\r\n    SearchTableImplement.prototype.fetchDataExecute = function (searchParams) {\r\n        return this.props[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\r\n    };\r\n    /**\r\n     * onSearch\r\n     * @description - 点击查询\r\n     * @override\r\n     * @return {Promise<void>}\r\n     */\r\n    SearchTableImplement.prototype.onSearch = function () {\r\n        var _this = this;\r\n        var keys = Object.keys(this.getParams());\r\n        var params = {};\r\n        keys.forEach(function (key) {\r\n            params[key] = _this.state[key];\r\n        });\r\n        return new Promise(function (resolve) {\r\n            var _a;\r\n            _this.setState({\r\n                searchParams: __assign(__assign({}, params), (_a = {}, _a[_this.getOrderFieldProp()] = _this.state[_this.getOrderFieldProp()], _a[_this.getOrderProp()] = _this.state[_this.getOrderProp()], _a)),\r\n            }, function () {\r\n                _this.fetchData().then(function () {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * getColumns\r\n     * @return {ColumnType<object>[]}\r\n     */\r\n    SearchTableImplement.prototype.getColumns = function () {\r\n        return [];\r\n    };\r\n    /**\r\n     * onSubTableChange\r\n     * @param {TablePaginationConfig} pagination\r\n     * @param {Record<string, FilterValue | null>} filters\r\n     * @param {SorterResult<object> | SorterResult<object>[]} sorter\r\n     * @param {TableCurrentDataSource<object> | undefined} extra\r\n     */\r\n    SearchTableImplement.prototype.onSubTableChange = function (\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    pagination, \r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    filters, \r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    sorter, \r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    extra) { };\r\n    /**\r\n     * renderSearchFormAfter\r\n     * @return {ReactNode}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchFormAfter = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * renderSearchFormBefore\r\n     * @return {ReactNode}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchFormBefore = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * renderSearchFooter\r\n     * @return {ReactNode}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchFooter = function () {\r\n        return null;\r\n    };\r\n    /**\r\n     * renderSearchHeader\r\n     * @return {ReactNode}\r\n     */\r\n    SearchTableImplement.prototype.renderSearchHeader = function () {\r\n        return null;\r\n    };\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    /**\r\n     * onTableRowComponentReducers\r\n     * @param {ColumnTypeExt[]} columns\r\n     * @return {string[]}\r\n     */\r\n    SearchTableImplement.prototype.onTableRowComponentReducers = function (columns) {\r\n        return this.tableRowComponentReducers;\r\n    };\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    /**\r\n     * onTableCellComponentReducers\r\n     * @param {ColumnTypeExt[]} columns\r\n     * @return {string[]}\r\n     */\r\n    SearchTableImplement.prototype.onTableCellComponentReducers = function (columns) {\r\n        return this.tableCellComponentReducers;\r\n    };\r\n    return SearchTableImplement;\r\n}(SearchTable_1.default));\r\nexports.SearchTableImplement = SearchTableImplement;\r\nSearchTableImplement.defaultProps = __assign({}, SearchTable_1.defaultProps);\r\nSearchTableImplement.propTypes = __assign(__assign({}, SearchTable_1.propTypes), { getTableWrapperInstance: prop_types_1.default.func });\r\n/**\r\n * SearchTableImplementFactory\r\n * @description 创建SearchTableImplementFactory\r\n * @param {\r\n *     serviceNames:string[];\r\n *     mapStateToProps: (props?: any) => any,\r\n *     mapDispatchToProps: (props?: any) => any,\r\n * } params\r\n * @constructor\r\n */\r\nvar SearchTableImplementFactory = function (_a) {\r\n    var _b = _a.serviceNames, serviceNames = _b === void 0 ? [] : _b, mapStateToProps = _a.mapStateToProps, mapDispatchToProps = _a.mapDispatchToProps;\r\n    var _mapStateToProps = function (state) { return (__assign(__assign(__assign({}, serviceregister_1.default.mapStateToProps({\r\n        namespaces: serviceNames || [],\r\n        state: state,\r\n    })), {\r\n        loading: state.loading,\r\n    }), (mapStateToProps ? mapStateToProps(state) : {}))); };\r\n    var _mapDispatchToProps = function (dispatch) { return (__assign(__assign({}, serviceregister_1.default.mapDispatchToProps({\r\n        namespaces: serviceNames || [],\r\n        dispatch: dispatch,\r\n    })), (mapDispatchToProps ? mapDispatchToProps(dispatch) : {}))); };\r\n    return function (Component) {\r\n        return serviceregister_1.default.connect(serviceNames || [])(_mapStateToProps, _mapDispatchToProps)((0, react_1.forwardRef)(function (props, ref) { return (\r\n        // @ts-ignore\r\n        react_1.default.createElement(Component, __assign({ ref: ref, className: \"\".concat(exports.selectorPrefix, \"-wrap\"), isShowExpandSearch: true, defaultExpandSearchCollapse: false, fixedHeaderAutoTable: true, fixedTableSpaceBetween: true }, props))); }));\r\n    };\r\n};\r\nexports.default = SearchTableImplementFactory;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__createBinding","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__spreadArray","to","from","pack","ar","l","slice","concat","__importDefault","default","prop_types_1","exports","SearchTableImplement","selectorPrefix","require","react_1","serviceregister_1","SearchTable_1","_super","props","_this","innerWrapRef","createRef","onSelectChange","property","_a","setState","onInputChange","e","target","trim","onDateTimeRangeChange","propertys","dayjs","state","getParams","getOrderFieldProp","getOrderFieldValue","getOrderProp","getOrderPropValue","searchParams","selectedRowKeys","selectedRows","componentDidMount","getTableWrapperInstance","getFetchListPropName","getFetchListPropNameToFirstUpper","fetchListPropName","charAt","toUpperCase","substring","getServiceName","getFetchDataParams","isShowNumber","getNumberGeneratorRule","NUMBER_GENERATOR_RULE_CONTINUITY","getRowSelectionMode","ROW_SELECTION_NORMAL_MODE","getTableNumberColumnWidth","getTableNumberColumnProps","getRowKey","getDataKey","getTotalKey","getData","getTotal","getRowSelection","filter","selected","records","rowKey","map","r","row","find","key","onChange","ROW_SELECTION_CONTINUOUS_MODE","onSelect","record","onSelectAll","changeRows","renderSearchForm","renderInner","innerJSX","createElement","ref","className","renderSearchFooterItems","clear","Promise","resolve","showLoading","loading","getSearchParams","_b","page","limit","order","fetchData","fetchDataExecute","sync","res","then","onSearch","keys","params","forEach","getColumns","onSubTableChange","pagination","filters","sorter","extra","renderSearchFormAfter","renderSearchFormBefore","renderSearchFooter","renderSearchHeader","onTableRowComponentReducers","columns","tableRowComponentReducers","onTableCellComponentReducers","tableCellComponentReducers","SearchTableImplementFactory","defaultProps","propTypes","func","_mapStateToProps","mapStateToProps","namespaces","serviceNames","_mapDispatchToProps","dispatch","mapDispatchToProps","Component","connect","forwardRef","isShowExpandSearch","defaultExpandSearchCollapse","fixedHeaderAutoTable","fixedTableSpaceBetween"],"mappings":"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"}