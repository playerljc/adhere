{"version":3,"file":"Search.js","sources":["Search.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.propTypes = exports.defaultProps = void 0;\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar adhere_ui_flexlayout_1 = __importDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\r\nvar adhere_ui_suspense_1 = __importDefault(require(\"@baifendian/adhere-ui-suspense\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar SearchTable_1 = require(\"./SearchTable\");\r\nvar Fixed = adhere_ui_flexlayout_1.default.Fixed, Auto = adhere_ui_flexlayout_1.default.Auto;\r\n/**\r\n * Search\r\n * @class\r\n * @classdesc 查询\r\n */\r\nvar Search = /** @class */ (function (_super) {\r\n    __extends(Search, _super);\r\n    function Search() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * getDerivedStateFromProps\r\n     * @description getDerivedStateFromProps\r\n     * @param {SearchProps} props\r\n     * @param {SearchState} state\r\n     * @return {any}\r\n     */\r\n    Search.getDerivedStateFromProps = function (props, state) {\r\n        return __assign(__assign({}, (state || {})), { \r\n            // TODO: 处理prePage\r\n            prePage: state === null || state === void 0 ? void 0 : state.page });\r\n    };\r\n    /**\r\n     * getPagination\r\n     * @description 获取分页信息\r\n     */\r\n    Search.prototype.getPagination = function () {\r\n        var _this = this;\r\n        return {\r\n            onChange: function (page, limit) {\r\n                _this.setState({\r\n                    page: page,\r\n                    limit: limit,\r\n                }, function () {\r\n                    _this.fetchData();\r\n                });\r\n            },\r\n            onShowSizeChange: function (page, limit) {\r\n                _this.setState({\r\n                    page: page,\r\n                    limit: limit,\r\n                }, function () {\r\n                    _this.fetchData();\r\n                });\r\n            },\r\n            showTotal: function (total /* [page, pageSize] */) {\r\n                return adhere_util_intl_1.default.v(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\r\n                    page: _this.state.page,\r\n                    pageSize: _this.state.limit,\r\n                    total: total,\r\n                });\r\n            },\r\n            total: this.getTotal(),\r\n            current: this.state.page,\r\n            pageSize: this.state.limit,\r\n            showQuickJumper: true,\r\n        };\r\n    };\r\n    /**\r\n     * getLimit\r\n     * @description limit参数\r\n     */\r\n    Search.prototype.getLimit = function () {\r\n        return 10;\r\n    };\r\n    /**\r\n     * onClear\r\n     * @description - 清除操作\r\n     */\r\n    Search.prototype.onClear = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            _this.setState({\r\n                page: 1,\r\n                limit: _this.getLimit(),\r\n            }, function () {\r\n                _this.clear().then(function () {\r\n                    _this.fetchData();\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * renderInner\r\n     * @description\r\n     * @param bodyWrapRef\r\n     * @param className\r\n     */\r\n    Search.prototype.renderInner = function (bodyWrapRef, className) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        var _l = this.props, style = _l.style, bodyClassName = _l.bodyClassName, bodyStyle = _l.bodyStyle, searchClassName = _l.searchClassName, searchStyle = _l.searchStyle, fitSearch = _l.fitSearch, fitBody = _l.fitBody, autoFixed = _l.autoFixed;\r\n        var _m = this.state.expand, expand = _m === void 0 ? false : _m;\r\n        return (react_1.default.createElement(adhere_ui_flexlayout_1.default, { direction: \"vertical\", className: (0, classnames_1.default)(SearchTable_1.selectorPrefix, className || ''), style: __assign({}, (style || {})) },\r\n            react_1.default.createElement(Fixed, { className: (0, classnames_1.default)(\"\".concat(SearchTable_1.selectorPrefix, \"-searchwrapper\"), searchClassName || ''), style: __assign({}, (searchStyle || {})), fit: fitSearch },\r\n                react_1.default.createElement(adhere_ui_flexlayout_1.default, { direction: \"vertical\" },\r\n                    !!this.renderSearchFormBefore && !!((_a = this.renderSearchFormBefore) === null || _a === void 0 ? void 0 : _a.call(this)) && (react_1.default.createElement(Fixed, null, (_b = this.renderSearchFormBefore) === null || _b === void 0 ? void 0 : _b.call(this))),\r\n                    !!this.renderSearchForm && !!((_c = this.renderSearchForm) === null || _c === void 0 ? void 0 : _c.call(this)) && (react_1.default.createElement(Fixed, null, expand && this.renderSearchForm())),\r\n                    !!this.renderSearchToolBar && !!((_d = this.renderSearchToolBar) === null || _d === void 0 ? void 0 : _d.call(this)) && (react_1.default.createElement(Fixed, null, this.renderSearchToolBar())),\r\n                    !!this.renderSearchFormAfter && !!((_e = this.renderSearchFormAfter) === null || _e === void 0 ? void 0 : _e.call(this)) && (react_1.default.createElement(Fixed, null, (_f = this.renderSearchFormAfter) === null || _f === void 0 ? void 0 : _f.call(this))))),\r\n            !!this.renderSearchHeader && !!((_g = this.renderSearchHeader) === null || _g === void 0 ? void 0 : _g.call(this)) && (react_1.default.createElement(Fixed, null, (_h = this.renderSearchHeader) === null || _h === void 0 ? void 0 : _h.call(this))),\r\n            react_1.default.createElement(Auto, { className: (0, classnames_1.default)(\"\".concat(SearchTable_1.selectorPrefix, \"-autowrapper\"), bodyClassName || '', autoFixed ? 'autofixed' : ''), style: __assign({}, (bodyStyle || {})), fit: fitBody, autoFixed: autoFixed },\r\n                react_1.default.createElement(\"div\", { ref: bodyWrapRef, className: \"\".concat(SearchTable_1.selectorPrefix, \"-tablewrapper\") }, this.renderBody())),\r\n            !!this.renderSearchFooter && !!((_j = this.renderSearchFooter) === null || _j === void 0 ? void 0 : _j.call(this)) && (react_1.default.createElement(Fixed, null, (_k = this.renderSearchFooter) === null || _k === void 0 ? void 0 : _k.call(this)))));\r\n    };\r\n    return Search;\r\n}(adhere_ui_suspense_1.default));\r\nexports.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    searchClassName: '',\r\n    searchStyle: {},\r\n    // 第一次\r\n    isFirst: true,\r\n    // 第一次加载\r\n    isFirstLoading: null,\r\n    isShowExpandSearch: true,\r\n    defaultExpandSearchCollapse: true,\r\n    fitSearch: true,\r\n    fitBody: true,\r\n    autoFixed: true,\r\n};\r\nexports.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    searchClassName: prop_types_1.default.string,\r\n    searchStyle: prop_types_1.default.object,\r\n    reset: prop_types_1.default.bool,\r\n    firstLoading: prop_types_1.default.node,\r\n    // 是否有展开和收缩的功能\r\n    isShowExpandSearch: prop_types_1.default.bool,\r\n    // 展开和收缩的默认状态\r\n    defaultExpandSearchCollapse: prop_types_1.default.bool,\r\n    // 撑开search\r\n    fitSearch: prop_types_1.default.bool,\r\n    // 撑开表格\r\n    fitBody: prop_types_1.default.bool,\r\n    // 是否是查询固定，表格自适应\r\n    autoFixed: prop_types_1.default.bool,\r\n};\r\nSearch.defaultProps = exports.defaultProps;\r\nSearch.propTypes = exports.propTypes;\r\nexports.default = Search;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__importDefault","mod","__esModule","default","classnames_1","defineProperty","exports","value","propTypes","defaultProps","require","prop_types_1","react_1","adhere_ui_flexlayout_1","adhere_ui_suspense_1","adhere_util_intl_1","SearchTable_1","Fixed","Auto","Search","_super","getDerivedStateFromProps","props","state","prePage","page","getPagination","_this","onChange","limit","setState","fetchData","onShowSizeChange","showTotal","total","v","pageSize","getTotal","current","showQuickJumper","getLimit","onClear","Promise","resolve","clear","then","renderInner","bodyWrapRef","className","_l","style","bodyClassName","bodyStyle","searchClassName","searchStyle","fitSearch","fitBody","autoFixed","_m","expand","createElement","direction","selectorPrefix","concat","fit","renderSearchFormBefore","_a","_b","renderSearchForm","_c","renderSearchToolBar","_d","renderSearchFormAfter","_e","_f","renderSearchHeader","_g","_h","ref","renderBody","renderSearchFooter","_j","_k","isFirst","isFirstLoading","isShowExpandSearch","defaultExpandSearchCollapse","string","object","reset","bool","firstLoading","node"],"mappings":"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"}