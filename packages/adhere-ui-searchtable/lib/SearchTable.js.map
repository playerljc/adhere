{"version":3,"file":"SearchTable.js","sources":["SearchTable.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.propTypes = exports.defaultProps = exports.SearchTableContext = exports.selectorPrefix = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\r\nvar lodash_clonedeep_1 = tslib_1.__importDefault(require(\"lodash.clonedeep\"));\r\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar adhere_ui_flexlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\r\nvar adhere_ui_suspense_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-suspense\"));\r\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar ColumnResizable_1 = tslib_1.__importStar(require(\"./Extension/ColumnResizable\"));\r\nvar ColumnSetting_1 = tslib_1.__importDefault(require(\"./Extension/ColumnSetting\"));\r\nvar TableCell_1 = tslib_1.__importDefault(require(\"./Extension/TableComponents/TableCell\"));\r\nvar TableRow_1 = tslib_1.__importDefault(require(\"./Extension/TableComponents/TableRow\"));\r\nvar TableDensitySetting_1 = tslib_1.__importDefault(require(\"./Extension/TableDensitySetting\"));\r\nvar types_1 = require(\"./types\");\r\nexports.selectorPrefix = 'adhere-ui-searchtable';\r\nvar Fixed = adhere_ui_flexlayout_1.default.Fixed, Auto = adhere_ui_flexlayout_1.default.Auto;\r\nexports.SearchTableContext = (0, react_1.createContext)(null);\r\n/**\r\n * SearchTable\r\n * @class SearchTable\r\n * @classdesc SearchTable\r\n */\r\nvar SearchTable = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchTable, _super);\r\n    function SearchTable(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.tableWrapRef = (0, react_1.createRef)();\r\n        // 自定义表格部分\r\n        _this.components = {\r\n            header: {\r\n                cell: ColumnResizable_1.SearchTableResizableTitle,\r\n            },\r\n            body: {\r\n                // 固定是这个组件\r\n                row: TableRow_1.default,\r\n                // 固定是这个组件\r\n                cell: TableCell_1.default,\r\n            },\r\n        };\r\n        // 列拖动对象\r\n        _this.columnResizable = new ColumnResizable_1.default();\r\n        // 列属性监控对象\r\n        _this.columnObserver = null;\r\n        // rowConfigReducers\r\n        // 给TableRow传递props的reducer\r\n        _this.rowConfigReducers = [];\r\n        // cellConfigReducers\r\n        // 给TableCell传递props的reducer\r\n        _this.cellConfigReducers = [];\r\n        // tableRowComponentReducers\r\n        // 处理TableRow的reducer\r\n        _this.tableRowComponentReducers = [];\r\n        // tableCellComponentReducers\r\n        // 处理TableCell的reducer\r\n        _this.tableCellComponentReducers = [];\r\n        /**\r\n         * onTableChange\r\n         * @description 表格change\r\n         */\r\n        _this.onTableChange = function (pagination, filters, sorter) {\r\n            var _a;\r\n            _this.setState((_a = {},\r\n                _a[_this.getOrderFieldProp()] = sorter.field || _this.getOrderFieldValue(),\r\n                _a[_this.getOrderProp()] = sorter.order || _this.getOrderPropValue(),\r\n                _a), function () {\r\n                var order = sorter.order;\r\n                if (!order)\r\n                    return;\r\n                _this.fetchData();\r\n                _this.onSubTableChange(pagination, filters, sorter);\r\n            });\r\n        };\r\n        // @ts-ignore\r\n        _this.state = {\r\n            page: 1,\r\n            limit: _this.getLimit(),\r\n            expand: props.defaultExpandSearchCollapse,\r\n            scrollY: 0,\r\n        };\r\n        Object.assign(_this.state, {\r\n            // 列设置\r\n            columnSetting: _this.getTableColumns().map(function (column, index) { return (tslib_1.__assign(tslib_1.__assign({}, column), { sort: index, display: true })); }),\r\n            // 表格密度设置\r\n            tableDensity: _this.getTableDensity(),\r\n        });\r\n        _this.onClear = _this.onClear.bind(_this);\r\n        return _this;\r\n    }\r\n    SearchTable.prototype.componentWillReceiveProps = function (nextProps) {\r\n        _super.prototype.componentWillReceiveProps.call(this, nextProps);\r\n        this.columnSettingEffect(nextProps);\r\n    };\r\n    SearchTable.prototype.componentDidUpdate = function (prevProps, prevState, snapshot) {\r\n        if (!this.tableWrapRef.current)\r\n            return;\r\n        this.searchTableResizableEffectLayout();\r\n        this.fixedHeaderAutoTableEffectLayout(prevProps, prevState);\r\n    };\r\n    /**\r\n     * searchTableResizableEffectLayout\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.searchTableResizableEffectLayout = function () {\r\n        // 监控header的属性变化(colgroup)\r\n        if (!this.columnObserver) {\r\n            this.columnObserver = (0, ColumnResizable_1.SearchTableResizableObserver)(this);\r\n        }\r\n    };\r\n    /**\r\n     * fixedHeaderAutoTableEffectLayout\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.fixedHeaderAutoTableEffectLayout = function (prevProps, prevState) {\r\n        var _a, _b;\r\n        if (this.props.fixedHeaderAutoTable) {\r\n            var dataSource = this.getData();\r\n            if (dataSource &&\r\n                dataSource.length &&\r\n                ((prevState.scrollY === 0 && this.state.scrollY === 0) ||\r\n                    prevState.scrollY !== this.state.scrollY ||\r\n                    prevState.expand !== this.state.expand)) {\r\n                var tableWrapRef = this.tableWrapRef.current;\r\n                var tableHeaderHeight = ((_a = tableWrapRef.querySelector('.ant-table-header')) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\r\n                var tablePaginationHeight = ((_b = tableWrapRef.querySelector('.ant-table-pagination')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\r\n                this.setState({\r\n                    scrollY: tableWrapRef.clientHeight -\r\n                        (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0)),\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * columnSettingEffect\r\n     * @param props\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.columnSettingEffect = function (props) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        var preColumnSetting = this.state.columnSetting || [];\r\n        var columnSetting = this.getTableColumns().map(function (column, index) { return (tslib_1.__assign(tslib_1.__assign({}, column), { sort: index, display: true })); });\r\n        // 长度不相等\r\n        if ((preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.length) !== columnSetting.length) {\r\n            this.setState({\r\n                columnSetting: columnSetting,\r\n            });\r\n            return;\r\n        }\r\n        var preColumnSettingRowKeys = (_a = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.map) === null || _a === void 0 ? void 0 : _a.call(preColumnSetting, function (t) { return t[_this.getRowKey()]; });\r\n        var columnSettingRowKeys = (_b = columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map) === null || _b === void 0 ? void 0 : _b.call(columnSetting, function (t) { return t[_this.getRowKey()]; });\r\n        // 长度相等但是key有变化\r\n        if ((preColumnSettingRowKeys === null || preColumnSettingRowKeys === void 0 ? void 0 : preColumnSettingRowKeys.toString()) !== columnSettingRowKeys.toString()) {\r\n            var rowKey_1 = this.getRowKey() || 'id';\r\n            this.setState({\r\n                columnSetting: columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map(function (t) {\r\n                    var item = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.find(function (item) { return item[rowKey_1] === t[rowKey_1]; });\r\n                    return tslib_1.__assign(tslib_1.__assign({}, t), { display: item ? item.display : true });\r\n                }),\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * onSearchPanelCollapse\r\n     * @description 查询面板展开之前\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.onSearchPanelCollapseBefore = function () { };\r\n    /**\r\n     * onSearchPanelCollapseAfter\r\n     * @description 查询面板展开之后\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.onSearchPanelCollapseAfter = function () { };\r\n    /**\r\n     * onClear\r\n     * @description - 清除操作\r\n     */\r\n    SearchTable.prototype.onClear = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            _this.setState({\r\n                page: 1,\r\n                limit: _this.getLimit(),\r\n            }, function () {\r\n                _this.clear().then(function () {\r\n                    _this.fetchData();\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * sortOrder\r\n     * @description table的column中加入\r\n     * sorter: true,\r\n     * sortOrder: this.sortOrder('distance'),\r\n     * @param columnName\r\n     * @return {*}\r\n     */\r\n    SearchTable.prototype.sortOrder = function (columnName) {\r\n        if (!this.state)\r\n            return '';\r\n        return this.state[this.getOrderFieldProp()] === columnName\r\n            ? this.state[this.getOrderProp()]\r\n            : '';\r\n    };\r\n    /**\r\n     * onCellConfigReducers\r\n     * @description 所有onCell的处理\r\n     * @return ColumnTypeExt\r\n     */\r\n    SearchTable.prototype.onCellConfigReducers = function (params) {\r\n        var _this = this;\r\n        var rowIndex = params.rowIndex, column = params.column, record = params.record, columns = params.columns;\r\n        return this.cellConfigReducers.reduce(function (params, reducer) {\r\n            params.value = reducer.call(_this, { rowIndex: rowIndex, record: record, columns: columns, column: params.value });\r\n            return params;\r\n        }, { value: column }).value;\r\n    };\r\n    /**\r\n     * onRowConfigReducers\r\n     * @description 所有row的处理\r\n     * @param params\r\n     */\r\n    SearchTable.prototype.onRowConfigReducers = function (params) {\r\n        var _this = this;\r\n        var rowIndex = params.rowIndex, record = params.record, columns = params.columns;\r\n        // const reducers = [this.rowEditableReducer];\r\n        return this.rowConfigReducers.reduce(function (params, reducer) {\r\n            params.value = reducer.call(_this, { rowIndex: rowIndex, record: record, columns: columns, rowConfig: params.value });\r\n            return params;\r\n        }, { value: {} }).value;\r\n    };\r\n    /**\r\n     * getLimit\r\n     * @description limit参数\r\n     */\r\n    SearchTable.prototype.getLimit = function () {\r\n        return 10;\r\n    };\r\n    /**\r\n     * getPagination\r\n     * @description 获取分页信息\r\n     */\r\n    SearchTable.prototype.getPagination = function () {\r\n        var _this = this;\r\n        return {\r\n            onChange: function (page, limit) {\r\n                _this.setState({\r\n                    page: page,\r\n                    limit: limit,\r\n                }, function () {\r\n                    _this.fetchData();\r\n                });\r\n            },\r\n            onShowSizeChange: function (page, limit) {\r\n                _this.setState({\r\n                    page: page,\r\n                    limit: limit,\r\n                }, function () {\r\n                    _this.fetchData();\r\n                });\r\n            },\r\n            showTotal: function (total /* [page, pageSize] */) {\r\n                return adhere_util_intl_1.default.v(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\r\n                    page: _this.state.page,\r\n                    pageSize: _this.state.limit,\r\n                    total: total,\r\n                });\r\n            },\r\n            total: this.getTotal(),\r\n            current: this.state.page,\r\n            pageSize: this.state.limit,\r\n            showQuickJumper: true,\r\n        };\r\n    };\r\n    /**\r\n     * getTableDensity\r\n     * @description 表格密度\r\n     */\r\n    SearchTable.prototype.getTableDensity = function () {\r\n        return types_1.TableDensity.DEFAULT;\r\n    };\r\n    /**\r\n     * getTableColumns\r\n     * @description 获取表格的列数据\r\n     * @return Array<any>\r\n     */\r\n    SearchTable.prototype.getTableColumns = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var isShowNumber = this.isShowNumber();\r\n        var getTableNumberColumnWidth = this.getTableNumberColumnWidth();\r\n        // 对权限进行过滤\r\n        var columns = this.getColumns()\r\n            .filter(function (column) {\r\n            var _a;\r\n            if ('$hide' in column && !column.$hide)\r\n                return false;\r\n            if ('$authorized' in column)\r\n                return (_a = column === null || column === void 0 ? void 0 : column.$authorized) === null || _a === void 0 ? void 0 : _a.call(column);\r\n            return true;\r\n        })\r\n            // $resizable 设置\r\n            .map(function (column, index) {\r\n            var res = { value: column };\r\n            var loop = function (_column) {\r\n                var _res = _column;\r\n                if ('$resizable' in _column && !!(_column === null || _column === void 0 ? void 0 : _column.$resizable)) {\r\n                    _res = _this.columnResizable.searchTableResizableColumnItem(_this, index, _column);\r\n                }\r\n                // @ts-ignore\r\n                if ((_res === null || _res === void 0 ? void 0 : _res.children) && Array.isArray(_res.children)) {\r\n                    // @ts-ignore\r\n                    _res.children.forEach(function (_t, _index) {\r\n                        // @ts-ignore\r\n                        _res.children[_index] = loop(_t);\r\n                    });\r\n                }\r\n                return _res;\r\n            };\r\n            // @ts-ignore\r\n            res.value = loop(column);\r\n            return res.value;\r\n        })\r\n            .map(function (column, index) {\r\n            return tslib_1.__assign(tslib_1.__assign({}, column), { \r\n                // 每个单元格都会调用\r\n                // 给TableCell传递的props参数\r\n                onCell: function (record, rowIndex) {\r\n                    var _column = (0, lodash_clonedeep_1.default)(column);\r\n                    return {\r\n                        // 行的索引\r\n                        rowIndex: rowIndex,\r\n                        // 行的数据\r\n                        record: record,\r\n                        // 列的配置\r\n                        column: _this.onCellConfigReducers({\r\n                            rowIndex: rowIndex,\r\n                            column: _column,\r\n                            record: record,\r\n                            columns: columns,\r\n                        }),\r\n                        // 所有列的配置\r\n                        columns: columns,\r\n                    };\r\n                } });\r\n        });\r\n        if (isShowNumber) {\r\n            var numberGeneratorRule_1 = (_a = this.getNumberGeneratorRule()) !== null && _a !== void 0 ? _a : SearchTable.NUMBER_GENERATOR_RULE_ALONE;\r\n            var _b = this.state, _c = _b.page, page_1 = _c === void 0 ? 0 : _c, _d = _b.limit, limit_1 = _d === void 0 ? 10 : _d;\r\n            return [\r\n                tslib_1.__assign(tslib_1.__assign({}, (this.getTableNumberColumnProps ? this.getTableNumberColumnProps() || {} : {})), {\r\n                    title: adhere_util_intl_1.default.v('序号'),\r\n                    dataIndex: '_number',\r\n                    key: '_number',\r\n                    align: 'center',\r\n                    width: getTableNumberColumnWidth !== null && getTableNumberColumnWidth !== void 0 ? getTableNumberColumnWidth : 80,\r\n                    render: function (v, r, index) { return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: numberGeneratorRule_1 === SearchTable.NUMBER_GENERATOR_RULE_ALONE, noMatch: function () {\r\n                            return _this.renderTableNumberColumn((page_1 - 1) * limit_1 + (index + 1), {\r\n                                value: v,\r\n                                record: r,\r\n                                index: index,\r\n                            });\r\n                        } }, function () { return _this.renderTableNumberColumn(index + 1, { value: v, record: r, index: index }); })); },\r\n                }),\r\n            ].concat(columns);\r\n        }\r\n        return columns;\r\n    };\r\n    /**\r\n     * getTableRowComponentReducers\r\n     */\r\n    SearchTable.prototype.getTableRowComponentReducers = function () {\r\n        return this.tableRowComponentReducers;\r\n    };\r\n    /**\r\n     * getTableCellComponentReducers\r\n     */\r\n    SearchTable.prototype.getTableCellComponentReducers = function () {\r\n        return this.tableCellComponentReducers;\r\n    };\r\n    /**\r\n     * renderTableNumberColumn\r\n     * @description - 渲染序号列\r\n     * @param number\r\n     * @param params\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.renderTableNumberColumn = function (number, params) {\r\n        if (number === void 0) { number = ''; }\r\n        return react_1.default.createElement(\"span\", null, number);\r\n    };\r\n    /**\r\n     * renderColumnSetting\r\n     * @description 创建列设置组件\r\n     */\r\n    SearchTable.prototype.renderColumnSetting = function () {\r\n        var _this = this;\r\n        var columns = tslib_1.__spreadArray([], this.state.columnSetting, true);\r\n        columns.sort(function (c1, c2) {\r\n            if (c1.sort > c2.sort)\r\n                return 1;\r\n            if (c1.sort < c2.sort)\r\n                return -1;\r\n            return 0;\r\n        });\r\n        return (react_1.default.createElement(ColumnSetting_1.default, { columns: columns, onShowColumns: function (checked) {\r\n                _this.setState(function (_a) {\r\n                    var _b;\r\n                    var columnSetting = _a.columnSetting;\r\n                    return ({\r\n                        columnSetting: (_b = (columnSetting || [])) === null || _b === void 0 ? void 0 : _b.map(function (column) { return (tslib_1.__assign(tslib_1.__assign({}, column), { display: checked })); }),\r\n                    });\r\n                });\r\n            }, onReset: function () {\r\n                _this.setState(function () { return ({\r\n                    columnSetting: _this.getTableColumns().map(function (column, index) { return (tslib_1.__assign(tslib_1.__assign({}, column), { display: true, sort: index })); }),\r\n                }); });\r\n            }, onDisplayColumn: function (column, checked) {\r\n                _this.setState(function (_a) {\r\n                    var _b;\r\n                    var columnSetting = _a.columnSetting;\r\n                    return ({\r\n                        columnSetting: (_b = (columnSetting || [])) === null || _b === void 0 ? void 0 : _b.map(function (_column) { return (tslib_1.__assign(tslib_1.__assign({}, _column), { display: _column.key === column.key ? checked : _column.display })); }),\r\n                    });\r\n                });\r\n            }, onSortEnd: function (map) {\r\n                _this.setState(function (_a) {\r\n                    var _b;\r\n                    var columnSetting = _a.columnSetting;\r\n                    return ({\r\n                        columnSetting: (_b = (columnSetting || [])) === null || _b === void 0 ? void 0 : _b.map(function (column) { return (tslib_1.__assign(tslib_1.__assign({}, column), { sort: map.get(column.key) })); }),\r\n                    });\r\n                });\r\n            } }));\r\n    };\r\n    /**\r\n     * renderTableDensitySetting\r\n     * @description 表格密度设置\r\n     */\r\n    SearchTable.prototype.renderTableDensitySetting = function () {\r\n        var _this = this;\r\n        return (react_1.default.createElement(TableDensitySetting_1.default, { density: this.state.tableDensity, onChange: function (density) {\r\n                _this.setState({\r\n                    tableDensity: density,\r\n                });\r\n            }, onReset: function () {\r\n                _this.setState({\r\n                    tableDensity: _this.getTableDensity(),\r\n                });\r\n            } }));\r\n    };\r\n    /**\r\n     * renderSearchFooter\r\n     * @description 渲染查询工具栏\r\n     * @return ReactElement\r\n     */\r\n    SearchTable.prototype.renderSearchFooter = function () {\r\n        var _this = this;\r\n        var isShowExpandSearch = this.props.isShowExpandSearch;\r\n        var defaultItems = [\r\n            react_1.default.createElement(antd_1.Button, { className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\"), type: \"primary\", key: \"search\", icon: react_1.default.createElement(\"i\", { className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-searchfooteritem-search-btn-icon\"), 'iconfont iconsousuo') }), onClick: function () {\r\n                    _this.setState({\r\n                        page: 1,\r\n                    }, function () {\r\n                        _this.onSearch();\r\n                    });\r\n                } }, adhere_util_intl_1.default.v('查询')),\r\n            react_1.default.createElement(antd_1.Button, { className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\"), key: \"reset\", onClick: this.onClear }, adhere_util_intl_1.default.v('重置')),\r\n        ];\r\n        if (isShowExpandSearch) {\r\n            defaultItems.push(react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: this.state.expand, noMatch: function () { return (react_1.default.createElement(\"a\", { key: \"expand\", className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem-expand-search-up-btn\"), onClick: function () {\r\n                        _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\r\n                        _this.setState({\r\n                            expand: true,\r\n                        }, function () { return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter(); });\r\n                    } },\r\n                    react_1.default.createElement(\"span\", null, adhere_util_intl_1.default.v('展开')),\r\n                    react_1.default.createElement(\"i\", { className: \"iconfont iconup\" }))); } }, function () { return (react_1.default.createElement(\"a\", { key: \"hide\", className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem-expand-search-down-btn\"), onClick: function () {\r\n                    _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\r\n                    _this.setState({\r\n                        expand: false,\r\n                    }, function () { return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter(); });\r\n                } },\r\n                react_1.default.createElement(\"span\", null, adhere_util_intl_1.default.v('关闭')),\r\n                react_1.default.createElement(\"i\", { className: \"iconfont icondownarrow\" }))); }));\r\n        }\r\n        var items = this.renderSearchFooterItems(defaultItems) || tslib_1.__spreadArray([], defaultItems, true);\r\n        return (react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-searchfooterwrapper\") }, items.map(function (t, index) { return (react_1.default.createElement(\"div\", { key: index, className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\") }, t)); })));\r\n    };\r\n    /**\r\n     * renderTable\r\n     * @description - 认选表格体\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.renderTable = function () {\r\n        var _this = this;\r\n        var _a = this.props, antdTableProps = _a.antdTableProps, fixedHeaderAutoTable = _a.fixedHeaderAutoTable;\r\n        var _b = this.state, _c = _b.columnSetting, columnSetting = _c === void 0 ? [] : _c, tableDensity = _b.tableDensity;\r\n        var columns = this.getTableColumns()\r\n            .map(function (column, index) { return (tslib_1.__assign(tslib_1.__assign({}, columnSetting[index]), column)); })\r\n            .filter(function (column) { return column.display; });\r\n        columns.sort(function (c1, c2) {\r\n            if (c1.sort > c2.sort)\r\n                return 1;\r\n            if (c1.sort < c2.sort)\r\n                return -1;\r\n            return 0;\r\n        });\r\n        // Table的antdProps配置\r\n        var tableProps = tslib_1.__assign({ rowKey: this.getRowKey(), dataSource: this.getData(), columns: columns, onChange: this.onTableChange, pagination: this.getPagination(), rowSelection: this.getRowSelection(), size: tableDensity, \r\n            // 组件\r\n            components: this.components, \r\n            // onRow\r\n            // 给TableRow的props参数\r\n            onRow: function (record, rowIndex) {\r\n                // 这块可能以后会有很多操作\r\n                // 行的所有操作都可以在这里处理\r\n                return {\r\n                    record: record,\r\n                    rowIndex: rowIndex,\r\n                    columns: columns,\r\n                    rowKey: _this.getRowKey(),\r\n                    rowConfig: _this.onRowConfigReducers({\r\n                        rowIndex: Number(rowIndex),\r\n                        record: record,\r\n                        columns: columns,\r\n                    }),\r\n                };\r\n            } }, (antdTableProps || {}));\r\n        // 是否支持锁定列头，表格体滚动\r\n        if (fixedHeaderAutoTable) {\r\n            var scrollY_1 = this.state.scrollY;\r\n            if (antdTableProps) {\r\n                if (antdTableProps.scroll) {\r\n                    tableProps.scroll.y = scrollY_1;\r\n                }\r\n                else {\r\n                    tableProps.scroll = { y: scrollY_1 };\r\n                }\r\n            }\r\n            else {\r\n                tableProps.scroll = { y: scrollY_1 };\r\n            }\r\n        }\r\n        this.tableRowComponentReducers = this.onTableRowComponentReducers(columns);\r\n        this.tableCellComponentReducers = this.onTableCellComponentReducers(columns);\r\n        return react_1.default.createElement(antd_1.Table, tslib_1.__assign({}, tableProps));\r\n    };\r\n    /**\r\n     * renderInner\r\n     * @description 渲染SearchTable\r\n     * @return ReactElement | null\r\n     */\r\n    SearchTable.prototype.renderInner = function () {\r\n        var _this = this;\r\n        var _a = this.props, className = _a.className, style = _a.style, tableClassName = _a.tableClassName, tableStyle = _a.tableStyle, searchClassName = _a.searchClassName, searchStyle = _a.searchStyle, fitSearch = _a.fitSearch, fitTable = _a.fitTable, autoFixed = _a.autoFixed, fixedTableSpaceBetween = _a.fixedTableSpaceBetween;\r\n        var _b = this.state.expand, expand = _b === void 0 ? false : _b;\r\n        return (react_1.default.createElement(adhere_ui_flexlayout_1.default, { direction: \"vertical\", className: (0, classnames_1.default)(exports.selectorPrefix, fixedTableSpaceBetween ? 'fixedtablespacebetween' : '', className || ''), style: tslib_1.__assign({}, (style || {})) },\r\n            react_1.default.createElement(Fixed, { className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-searchwrapper\"), searchClassName || ''), style: tslib_1.__assign({}, (searchStyle || {})), fit: fitSearch },\r\n                react_1.default.createElement(adhere_ui_flexlayout_1.default, { direction: \"vertical\" },\r\n                    react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!this.renderSearchFormBefore }, function () { return react_1.default.createElement(Fixed, null, _this.renderSearchFormBefore()); }),\r\n                    react_1.default.createElement(Fixed, null,\r\n                        react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: expand, noMatch: function () { return null; } }, function () { return _this.renderSearchForm(); })),\r\n                    react_1.default.createElement(Fixed, null, this.renderSearchFooter()),\r\n                    react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!this.renderSearchFormAfter }, function () { return react_1.default.createElement(Fixed, null, _this.renderSearchFormAfter()); }))),\r\n            react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!this.renderTableHeader }, function () { return react_1.default.createElement(Fixed, null, _this.renderTableHeader()); }),\r\n            react_1.default.createElement(Auto, { className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-autowrapper\"), tableClassName || '', autoFixed ? 'autofixed' : ''), style: tslib_1.__assign({}, (tableStyle || {})), fit: fitTable, autoFixed: autoFixed },\r\n                react_1.default.createElement(\"div\", { ref: this.tableWrapRef, className: \"\".concat(exports.selectorPrefix, \"-tablewrapper\") }, this.renderTable())),\r\n            react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!this.renderTableFooter }, function () { return react_1.default.createElement(Fixed, null, _this.renderTableFooter()); })));\r\n    };\r\n    SearchTable.prototype.renderChildren = function () {\r\n        return react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-wrap\") }, _super.prototype.render.call(this));\r\n    };\r\n    /**\r\n     * render\r\n     * @protected\r\n     */\r\n    SearchTable.prototype.render = function () {\r\n        return (react_1.default.createElement(exports.SearchTableContext.Provider, { value: {\r\n                context: this,\r\n            } }, this.renderChildren()));\r\n    };\r\n    // 序号生成的规则 - 单独模式\r\n    SearchTable.NUMBER_GENERATOR_RULE_ALONE = Symbol();\r\n    // 序号生成的规则 - 连续模式\r\n    SearchTable.NUMBER_GENERATOR_RULE_CONTINUITY = Symbol();\r\n    // 全选的规则 - 标准模式(不能跨页)\r\n    SearchTable.ROW_SELECTION_NORMAL_MODE = Symbol();\r\n    // 全选的规则 - 可以跨页\r\n    SearchTable.ROW_SELECTION_CONTINUOUS_MODE = Symbol();\r\n    return SearchTable;\r\n}(adhere_ui_suspense_1.default));\r\nexports.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    tableClassName: '',\r\n    tableStyle: {},\r\n    searchClassName: '',\r\n    searchStyle: {},\r\n    // 第一次\r\n    isFirst: true,\r\n    // 第一次加载\r\n    isFirstLoading: null,\r\n    antdTableProps: {},\r\n    isShowExpandSearch: true,\r\n    defaultExpandSearchCollapse: true,\r\n    fitSearch: true,\r\n    fitTable: true,\r\n    autoFixed: true,\r\n    fixedHeaderAutoTable: false,\r\n    fixedTableSpaceBetween: false,\r\n};\r\nexports.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    tableClassName: prop_types_1.default.string,\r\n    tableStyle: prop_types_1.default.object,\r\n    searchClassName: prop_types_1.default.string,\r\n    searchStyle: prop_types_1.default.object,\r\n    reset: prop_types_1.default.bool,\r\n    firstLoading: prop_types_1.default.node,\r\n    // antdTable的Props\r\n    antdTableProps: prop_types_1.default.object,\r\n    // 是否有展开和收缩的功能\r\n    isShowExpandSearch: prop_types_1.default.bool,\r\n    // 展开和收缩的默认状态\r\n    defaultExpandSearchCollapse: prop_types_1.default.bool,\r\n    // 撑开search\r\n    fitSearch: prop_types_1.default.bool,\r\n    // 撑开表格\r\n    fitTable: prop_types_1.default.bool,\r\n    // 是否是查询固定，表格自适应\r\n    autoFixed: prop_types_1.default.bool,\r\n    // 锁定列头，表格滚动\r\n    fixedHeaderAutoTable: prop_types_1.default.bool,\r\n    // 两端固定(表格的头始终在上方，分页始终在下方)\r\n    fixedTableSpaceBetween: prop_types_1.default.bool,\r\n};\r\nSearchTable.defaultProps = exports.defaultProps;\r\nSearchTable.propTypes = exports.propTypes;\r\nexports.default = SearchTable;\r\n//# sourceMappingURL=SearchTable.js.map"],"names":["Object","defineProperty","exports","value","propTypes","defaultProps","SearchTableContext","selectorPrefix","tslib_1","require","antd_1","classnames_1","__importDefault","lodash_clonedeep_1","prop_types_1","react_1","__importStar","adhere_ui_conditionalrender_1","adhere_ui_flexlayout_1","adhere_ui_suspense_1","adhere_util_intl_1","ColumnResizable_1","ColumnSetting_1","TableCell_1","TableRow_1","TableDensitySetting_1","types_1","Fixed","default","Auto","SearchTable","createContext","_super","props","_this","call","this","tableWrapRef","createRef","components","header","cell","SearchTableResizableTitle","body","row","columnResizable","columnObserver","rowConfigReducers","cellConfigReducers","tableRowComponentReducers","tableCellComponentReducers","onTableChange","pagination","filters","sorter","_a","setState","getOrderFieldProp","field","getOrderFieldValue","getOrderProp","order","getOrderPropValue","fetchData","onSubTableChange","state","page","limit","getLimit","expand","defaultExpandSearchCollapse","scrollY","assign","columnSetting","getTableColumns","map","column","index","__assign","sort","display","tableDensity","getTableDensity","onClear","bind","__extends","prototype","componentWillReceiveProps","nextProps","columnSettingEffect","componentDidUpdate","prevProps","prevState","snapshot","current","searchTableResizableEffectLayout","fixedHeaderAutoTableEffectLayout","SearchTableResizableObserver","tablePaginationHeight","fixedHeaderAutoTable","dataSource","getData","length","tableHeaderHeight","querySelector","offsetHeight","_b","clientHeight","preColumnSettingRowKeys","columnSettingRowKeys","rowKey_1","preColumnSetting","t","getRowKey","toString","item","find","onSearchPanelCollapseBefore","onSearchPanelCollapseAfter","Promise","resolve","clear","then","sortOrder","columnName","onCellConfigReducers","params","rowIndex","record","columns","reduce","reducer","onRowConfigReducers","rowConfig","getPagination","onChange","onShowSizeChange","showTotal","total","v","pageSize","getTotal","showQuickJumper","TableDensity","DEFAULT","numberGeneratorRule_1","page_1","_d","limit_1","isShowNumber","getTableNumberColumnWidth","getColumns","filter","$hide","$authorized","loop","_column","_res","$resizable","searchTableResizableColumnItem","children","Array","isArray","forEach","_t","_index","res","onCell","getNumberGeneratorRule","NUMBER_GENERATOR_RULE_ALONE","_c","getTableNumberColumnProps","title","dataIndex","key","align","width","render","r","createElement","conditional","noMatch","renderTableNumberColumn","concat","getTableRowComponentReducers","getTableCellComponentReducers","number","renderColumnSetting","__spreadArray","c1","c2","onShowColumns","checked","onReset","onDisplayColumn","onSortEnd","get","renderTableDensitySetting","density","renderSearchFooter","isShowExpandSearch","defaultItems","Button","className","type","icon","onClick","onSearch","items","push","renderSearchFooterItems","renderTable","antdTableProps","tableProps","rowKey","rowSelection","getRowSelection","size","onRow","Number","scrollY_1","scroll","y","onTableRowComponentReducers","onTableCellComponentReducers","Table","renderInner","style","tableClassName","tableStyle","searchClassName","searchStyle","fitSearch","fitTable","autoFixed","fixedTableSpaceBetween","direction","fit","renderSearchFormBefore","renderSearchForm","renderSearchFormAfter","renderTableHeader","ref","renderTableFooter","renderChildren","Provider","context","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","ROW_SELECTION_NORMAL_MODE","ROW_SELECTION_CONTINUOUS_MODE","isFirst","isFirstLoading","string","object","reset","bool","firstLoading","node"],"mappings":"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"}