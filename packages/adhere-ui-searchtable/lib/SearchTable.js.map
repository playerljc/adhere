{"version":3,"file":"SearchTable.js","sources":["SearchTable.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.sort.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.propTypes = exports.defaultProps = exports.SearchTableContext = exports.selectorPrefix = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar lodash_clonedeep_1 = tslib_1.__importDefault(require(\"lodash.clonedeep\"));\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar adhere_ui_flexlayout_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\n\nvar adhere_ui_suspense_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-suspense\"));\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar ColumnResizable_1 = tslib_1.__importStar(require(\"./Extension/ColumnResizable\"));\n\nvar ColumnSetting_1 = tslib_1.__importDefault(require(\"./Extension/ColumnSetting\"));\n\nvar TableCell_1 = tslib_1.__importDefault(require(\"./Extension/TableComponents/TableCell\"));\n\nvar TableRow_1 = tslib_1.__importDefault(require(\"./Extension/TableComponents/TableRow\"));\n\nvar TableDensitySetting_1 = tslib_1.__importDefault(require(\"./Extension/TableDensitySetting\"));\n\nvar types_1 = require(\"./types\");\n\nexports.selectorPrefix = 'adhere-ui-searchtable';\nvar Fixed = adhere_ui_flexlayout_1.default.Fixed,\n    Auto = adhere_ui_flexlayout_1.default.Auto;\nexports.SearchTableContext = (0, react_1.createContext)(null);\n/**\n * SearchTable\n * @class SearchTable\n * @classdesc SearchTable\n */\n\nvar SearchTable =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SearchTable, _super);\n\n  function SearchTable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.tableWrapRef = (0, react_1.createRef)(); // 自定义表格部分\n\n    _this.components = {\n      header: {\n        cell: ColumnResizable_1.SearchTableResizableTitle\n      },\n      body: {\n        // 固定是这个组件\n        row: TableRow_1.default,\n        // 固定是这个组件\n        cell: TableCell_1.default\n      }\n    }; // 列拖动对象\n\n    _this.columnResizable = new ColumnResizable_1.default(); // 列属性监控对象\n\n    _this.columnObserver = null; // rowConfigReducers\n    // 给TableRow传递props的reducer\n\n    _this.rowConfigReducers = []; // cellConfigReducers\n    // 给TableCell传递props的reducer\n\n    _this.cellConfigReducers = []; // tableRowComponentReducers\n    // 处理TableRow的reducer\n\n    _this.tableRowComponentReducers = []; // tableCellComponentReducers\n    // 处理TableCell的reducer\n\n    _this.tableCellComponentReducers = [];\n    /**\n     * onTableChange\n     * @description 表格change\n     */\n\n    _this.onTableChange = function (pagination, filters, sorter) {\n      var _a;\n\n      _this.setState((_a = {}, _a[_this.getOrderFieldProp()] = sorter.field || _this.getOrderFieldValue(), _a[_this.getOrderProp()] = sorter.order\n      /*|| this.getOrderPropValue()*/\n      , _a), function () {\n        var order = sorter.order;\n        if (!order) return;\n\n        _this.fetchData();\n\n        _this.onSubTableChange(pagination, filters, sorter);\n      });\n    }; // @ts-ignore\n\n\n    _this.state = {\n      page: 1,\n      limit: _this.getLimit(),\n      expand: props.defaultExpandSearchCollapse,\n      scrollY: 0\n    };\n    Object.assign(_this.state, {\n      // 列设置\n      columnSetting: _this.getTableColumns().map(function (column, index) {\n        return tslib_1.__assign(tslib_1.__assign({}, column), {\n          sort: index,\n          display: true\n        });\n      }),\n      // 表格密度设置\n      tableDensity: _this.getTableDensity()\n    });\n    _this.onClear = _this.onClear.bind(_this);\n    return _this;\n  }\n\n  SearchTable.prototype.componentWillReceiveProps = function (nextProps) {\n    _super.prototype.componentWillReceiveProps.call(this, nextProps);\n\n    this.columnSettingEffect(nextProps);\n  };\n\n  SearchTable.prototype.componentDidUpdate = function (prevProps, prevState, snapshot) {\n    if (!this.tableWrapRef.current) return;\n    this.searchTableResizableEffectLayout();\n    this.fixedHeaderAutoTableEffectLayout(prevProps, prevState);\n  };\n  /**\n   * searchTableResizableEffectLayout\n   * @protected\n   */\n\n\n  SearchTable.prototype.searchTableResizableEffectLayout = function () {\n    // 监控header的属性变化(colgroup)\n    if (!this.columnObserver) {\n      this.columnObserver = (0, ColumnResizable_1.SearchTableResizableObserver)(this);\n    }\n  };\n  /**\n   * fixedHeaderAutoTableEffectLayout\n   * @protected\n   */\n\n\n  SearchTable.prototype.fixedHeaderAutoTableEffectLayout = function (prevProps, prevState) {\n    var _a, _b;\n\n    if (this.props.fixedHeaderAutoTable) {\n      var dataSource = this.getData();\n\n      if (dataSource && dataSource.length && (prevState.scrollY === 0 && this.state.scrollY === 0 || prevState.scrollY !== this.state.scrollY || prevState.expand !== this.state.expand)) {\n        var tableWrapRef = this.tableWrapRef.current;\n        var tableHeaderHeight = ((_a = tableWrapRef.querySelector('.ant-table-header')) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\n        var tablePaginationHeight = ((_b = tableWrapRef.querySelector('.ant-table-pagination')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\n        this.setState({\n          scrollY: tableWrapRef.clientHeight - (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0))\n        });\n      }\n    }\n  };\n  /**\n   * columnSettingEffect\n   * @param props\n   * @protected\n   */\n\n\n  SearchTable.prototype.columnSettingEffect = function (props) {\n    var _this = this;\n\n    var _a, _b;\n\n    var preColumnSetting = this.state.columnSetting || [];\n    var columnSetting = this.getTableColumns().map(function (column, index) {\n      return tslib_1.__assign(tslib_1.__assign({}, column), {\n        sort: index,\n        display: true\n      });\n    }); // 长度不相等\n\n    if ((preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.length) !== columnSetting.length) {\n      this.setState({\n        columnSetting: columnSetting\n      });\n      return;\n    }\n\n    var preColumnSettingRowKeys = (_a = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.map) === null || _a === void 0 ? void 0 : _a.call(preColumnSetting, function (t) {\n      return t[_this.getRowKey()];\n    });\n    var columnSettingRowKeys = (_b = columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map) === null || _b === void 0 ? void 0 : _b.call(columnSetting, function (t) {\n      return t[_this.getRowKey()];\n    }); // 长度相等但是key有变化\n\n    if ((preColumnSettingRowKeys === null || preColumnSettingRowKeys === void 0 ? void 0 : preColumnSettingRowKeys.toString()) !== columnSettingRowKeys.toString()) {\n      var rowKey_1 = this.getRowKey() || 'id';\n      this.setState({\n        columnSetting: columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map(function (t) {\n          var item = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.find(function (item) {\n            return item[rowKey_1] === t[rowKey_1];\n          });\n          return tslib_1.__assign(tslib_1.__assign({}, t), {\n            display: item ? item.display : true\n          });\n        })\n      });\n    }\n  };\n  /**\n   * onSearchPanelCollapse\n   * @description 查询面板展开之前\n   * @protected\n   */\n\n\n  SearchTable.prototype.onSearchPanelCollapseBefore = function () {};\n  /**\n   * onSearchPanelCollapseAfter\n   * @description 查询面板展开之后\n   * @protected\n   */\n\n\n  SearchTable.prototype.onSearchPanelCollapseAfter = function () {};\n  /**\n   * onClear\n   * @description - 清除操作\n   */\n\n\n  SearchTable.prototype.onClear = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      _this.setState({\n        page: 1,\n        limit: _this.getLimit()\n      }, function () {\n        _this.clear().then(function () {\n          _this.fetchData();\n\n          resolve();\n        });\n      });\n    });\n  };\n  /**\n   * sortOrder\n   * @description table的column中加入\n   * sorter: true,\n   * sortOrder: this.sortOrder('distance'),\n   * @param columnName\n   * @return {*}\n   */\n\n\n  SearchTable.prototype.sortOrder = function (columnName) {\n    if (!this.state) return '';\n    return this.state[this.getOrderFieldProp()] === columnName ? this.state[this.getOrderProp()] : '';\n  };\n  /**\n   * onCellConfigReducers\n   * @description 所有onCell的处理\n   * @return ColumnTypeExt\n   */\n\n\n  SearchTable.prototype.onCellConfigReducers = function (params) {\n    var _this = this;\n\n    var rowIndex = params.rowIndex,\n        column = params.column,\n        record = params.record,\n        columns = params.columns;\n    return this.cellConfigReducers.reduce(function (params, reducer) {\n      params.value = reducer.call(_this, {\n        rowIndex: rowIndex,\n        record: record,\n        columns: columns,\n        column: params.value\n      });\n      return params;\n    }, {\n      value: column\n    }).value;\n  };\n  /**\n   * onRowConfigReducers\n   * @description 所有row的处理\n   * @param params\n   */\n\n\n  SearchTable.prototype.onRowConfigReducers = function (params) {\n    var _this = this;\n\n    var rowIndex = params.rowIndex,\n        record = params.record,\n        columns = params.columns; // const reducers = [this.rowEditableReducer];\n\n    return this.rowConfigReducers.reduce(function (params, reducer) {\n      params.value = reducer.call(_this, {\n        rowIndex: rowIndex,\n        record: record,\n        columns: columns,\n        rowConfig: params.value\n      });\n      return params;\n    }, {\n      value: {}\n    }).value;\n  };\n  /**\n   * getLimit\n   * @description limit参数\n   */\n\n\n  SearchTable.prototype.getLimit = function () {\n    return 10;\n  };\n  /**\n   * getPagination\n   * @description 获取分页信息\n   */\n\n\n  SearchTable.prototype.getPagination = function () {\n    var _this = this;\n\n    return {\n      onChange: function onChange(page, limit) {\n        _this.setState({\n          page: page,\n          limit: limit\n        }, function () {\n          _this.fetchData();\n        });\n      },\n      onShowSizeChange: function onShowSizeChange(page, limit) {\n        _this.setState({\n          page: page,\n          limit: limit\n        }, function () {\n          _this.fetchData();\n        });\n      },\n      showTotal: function showTotal(total\n      /* [page, pageSize] */\n      ) {\n        return adhere_util_intl_1.default.v(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\n          page: _this.state.page,\n          pageSize: _this.state.limit,\n          total: total\n        });\n      },\n      total: this.getTotal(),\n      current: this.state.page,\n      pageSize: this.state.limit,\n      showQuickJumper: true\n    };\n  };\n  /**\n   * getTableDensity\n   * @description 表格密度\n   */\n\n\n  SearchTable.prototype.getTableDensity = function () {\n    return types_1.TableDensity.DEFAULT;\n  };\n  /**\n   * getTableColumns\n   * @description 获取表格的列数据\n   * @return Array<any>\n   */\n\n\n  SearchTable.prototype.getTableColumns = function () {\n    var _this = this;\n\n    var _a;\n\n    var isShowNumber = this.isShowNumber();\n    var getTableNumberColumnWidth = this.getTableNumberColumnWidth(); // 对权限进行过滤\n\n    var columns = this.getColumns().filter(function (column) {\n      var _a;\n\n      if ('$hide' in column && !column.$hide) return false;\n      if ('$authorized' in column) return (_a = column === null || column === void 0 ? void 0 : column.$authorized) === null || _a === void 0 ? void 0 : _a.call(column);\n      return true;\n    }) // $resizable 设置\n    .map(function (column, index) {\n      var res = {\n        value: column\n      };\n\n      var loop = function loop(_column) {\n        var _res = _column;\n\n        if ('$resizable' in _column && !!(_column === null || _column === void 0 ? void 0 : _column.$resizable)) {\n          _res = _this.columnResizable.searchTableResizableColumnItem(_this, index, _column);\n        } // @ts-ignore\n\n\n        if ((_res === null || _res === void 0 ? void 0 : _res.children) && Array.isArray(_res.children)) {\n          // @ts-ignore\n          _res.children.forEach(function (_t, _index) {\n            // @ts-ignore\n            _res.children[_index] = loop(_t);\n          });\n        }\n\n        return _res;\n      }; // @ts-ignore\n\n\n      res.value = loop(column);\n      return res.value;\n    }).map(function (column, index) {\n      return tslib_1.__assign(tslib_1.__assign({}, column), {\n        // 每个单元格都会调用\n        // 给TableCell传递的props参数\n        onCell: function onCell(record, rowIndex) {\n          var _column = (0, lodash_clonedeep_1.default)(column);\n\n          return {\n            // 行的索引\n            rowIndex: rowIndex,\n            // 行的数据\n            record: record,\n            // 列的配置\n            column: _this.onCellConfigReducers({\n              rowIndex: rowIndex,\n              column: _column,\n              record: record,\n              columns: columns\n            }),\n            // 所有列的配置\n            columns: columns\n          };\n        }\n      });\n    });\n\n    if (isShowNumber) {\n      var numberGeneratorRule_1 = (_a = this.getNumberGeneratorRule()) !== null && _a !== void 0 ? _a : SearchTable.NUMBER_GENERATOR_RULE_ALONE;\n      var _b = this.state,\n          _c = _b.page,\n          page_1 = _c === void 0 ? 0 : _c,\n          _d = _b.limit,\n          limit_1 = _d === void 0 ? 10 : _d;\n      return [tslib_1.__assign(tslib_1.__assign({}, this.getTableNumberColumnProps ? this.getTableNumberColumnProps() || {} : {}), {\n        title: adhere_util_intl_1.default.v('序号'),\n        dataIndex: '_number',\n        key: '_number',\n        align: 'center',\n        width: getTableNumberColumnWidth !== null && getTableNumberColumnWidth !== void 0 ? getTableNumberColumnWidth : 80,\n        render: function render(v, r, index) {\n          return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n            conditional: numberGeneratorRule_1 === SearchTable.NUMBER_GENERATOR_RULE_ALONE,\n            noMatch: function noMatch() {\n              return _this.renderTableNumberColumn((page_1 - 1) * limit_1 + (index + 1), {\n                value: v,\n                record: r,\n                index: index\n              });\n            }\n          }, function () {\n            return _this.renderTableNumberColumn(index + 1, {\n              value: v,\n              record: r,\n              index: index\n            });\n          });\n        }\n      })].concat(columns);\n    }\n\n    return columns;\n  };\n  /**\n   * getTableRowComponentReducers\n   */\n\n\n  SearchTable.prototype.getTableRowComponentReducers = function () {\n    return this.tableRowComponentReducers;\n  };\n  /**\n   * getTableCellComponentReducers\n   */\n\n\n  SearchTable.prototype.getTableCellComponentReducers = function () {\n    return this.tableCellComponentReducers;\n  };\n  /**\n   * renderTableNumberColumn\n   * @description - 渲染序号列\n   * @param number\n   * @param params\n   * @protected\n   */\n\n\n  SearchTable.prototype.renderTableNumberColumn = function (number, params) {\n    if (number === void 0) {\n      number = '';\n    }\n\n    return react_1.default.createElement(\"span\", null, number);\n  };\n  /**\n   * renderColumnSetting\n   * @description 创建列设置组件\n   */\n\n\n  SearchTable.prototype.renderColumnSetting = function () {\n    var _this = this;\n\n    var columns = tslib_1.__spreadArray([], this.state.columnSetting, true);\n\n    columns.sort(function (c1, c2) {\n      if (c1.sort > c2.sort) return 1;\n      if (c1.sort < c2.sort) return -1;\n      return 0;\n    });\n    return react_1.default.createElement(ColumnSetting_1.default, {\n      columns: columns,\n      onShowColumns: function onShowColumns(checked) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (column) {\n              return tslib_1.__assign(tslib_1.__assign({}, column), {\n                display: checked\n              });\n            })\n          };\n        });\n      },\n      onReset: function onReset() {\n        _this.setState(function () {\n          return {\n            columnSetting: _this.getTableColumns().map(function (column, index) {\n              return tslib_1.__assign(tslib_1.__assign({}, column), {\n                display: true,\n                sort: index\n              });\n            })\n          };\n        });\n      },\n      onDisplayColumn: function onDisplayColumn(column, checked) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (_column) {\n              return tslib_1.__assign(tslib_1.__assign({}, _column), {\n                display: _column.key === column.key ? checked : _column.display\n              });\n            })\n          };\n        });\n      },\n      onSortEnd: function onSortEnd(map) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (column) {\n              return tslib_1.__assign(tslib_1.__assign({}, column), {\n                sort: map.get(column.key)\n              });\n            })\n          };\n        });\n      }\n    });\n  };\n  /**\n   * renderTableDensitySetting\n   * @description 表格密度设置\n   */\n\n\n  SearchTable.prototype.renderTableDensitySetting = function () {\n    var _this = this;\n\n    return react_1.default.createElement(TableDensitySetting_1.default, {\n      density: this.state.tableDensity,\n      onChange: function onChange(density) {\n        _this.setState({\n          tableDensity: density\n        });\n      },\n      onReset: function onReset() {\n        _this.setState({\n          tableDensity: _this.getTableDensity()\n        });\n      }\n    });\n  };\n  /**\n   * renderSearchFooter\n   * @description 渲染查询工具栏\n   * @return ReactElement\n   */\n\n\n  SearchTable.prototype.renderSearchFooter = function () {\n    var _this = this;\n\n    var isShowExpandSearch = this.props.isShowExpandSearch;\n    var defaultItems = [react_1.default.createElement(antd_1.Button, {\n      className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\"),\n      type: \"primary\",\n      key: \"search\",\n      icon: react_1.default.createElement(\"i\", {\n        className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-searchfooteritem-search-btn-icon\"), 'iconfont iconsousuo')\n      }),\n      onClick: function onClick() {\n        _this.setState({\n          page: 1\n        }, function () {\n          _this.onSearch();\n        });\n      }\n    }, adhere_util_intl_1.default.v('查询')), react_1.default.createElement(antd_1.Button, {\n      className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\"),\n      key: \"reset\",\n      onClick: this.onClear\n    }, adhere_util_intl_1.default.v('重置'))];\n\n    if (isShowExpandSearch) {\n      defaultItems.push(react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n        conditional: this.state.expand,\n        noMatch: function noMatch() {\n          return react_1.default.createElement(\"a\", {\n            key: \"expand\",\n            className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem-expand-search-up-btn\"),\n            onClick: function onClick() {\n              _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n\n              _this.setState({\n                expand: true\n              }, function () {\n                return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n              });\n            }\n          }, react_1.default.createElement(\"span\", null, adhere_util_intl_1.default.v('展开')), react_1.default.createElement(\"i\", {\n            className: \"iconfont iconup\"\n          }));\n        }\n      }, function () {\n        return react_1.default.createElement(\"a\", {\n          key: \"hide\",\n          className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem-expand-search-down-btn\"),\n          onClick: function onClick() {\n            _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n\n            _this.setState({\n              expand: false\n            }, function () {\n              return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n            });\n          }\n        }, react_1.default.createElement(\"span\", null, adhere_util_intl_1.default.v('关闭')), react_1.default.createElement(\"i\", {\n          className: \"iconfont icondownarrow\"\n        }));\n      }));\n    }\n\n    var items = this.renderSearchFooterItems(defaultItems) || tslib_1.__spreadArray([], defaultItems, true);\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-searchfooterwrapper\")\n    }, items.map(function (t, index) {\n      return react_1.default.createElement(\"div\", {\n        key: index,\n        className: \"\".concat(exports.selectorPrefix, \"-searchfooteritem\")\n      }, t);\n    }));\n  };\n  /**\n   * renderTable\n   * @description - 认选表格体\n   * @protected\n   */\n\n\n  SearchTable.prototype.renderTable = function () {\n    var _this = this;\n\n    var _a = this.props,\n        antdTableProps = _a.antdTableProps,\n        fixedHeaderAutoTable = _a.fixedHeaderAutoTable;\n    var _b = this.state,\n        _c = _b.columnSetting,\n        columnSetting = _c === void 0 ? [] : _c,\n        tableDensity = _b.tableDensity;\n    var columns = this.getTableColumns().map(function (column, index) {\n      return tslib_1.__assign(tslib_1.__assign({}, columnSetting[index]), column);\n    }).filter(function (column) {\n      return column.display;\n    });\n    columns.sort(function (c1, c2) {\n      if (c1.sort > c2.sort) return 1;\n      if (c1.sort < c2.sort) return -1;\n      return 0;\n    }); // Table的antdProps配置\n\n    var tableProps = tslib_1.__assign({\n      rowKey: this.getRowKey(),\n      dataSource: this.getData(),\n      columns: columns,\n      onChange: this.onTableChange,\n      pagination: this.getPagination(),\n      rowSelection: this.getRowSelection(),\n      size: tableDensity,\n      // 组件\n      components: this.components,\n      // onRow\n      // 给TableRow的props参数\n      onRow: function onRow(record, rowIndex) {\n        // 这块可能以后会有很多操作\n        // 行的所有操作都可以在这里处理\n        return {\n          record: record,\n          rowIndex: rowIndex,\n          columns: columns,\n          rowKey: _this.getRowKey(),\n          rowConfig: _this.onRowConfigReducers({\n            rowIndex: Number(rowIndex),\n            record: record,\n            columns: columns\n          })\n        };\n      }\n    }, antdTableProps || {}); // 是否支持锁定列头，表格体滚动\n\n\n    if (fixedHeaderAutoTable) {\n      var scrollY_1 = this.state.scrollY;\n\n      if (antdTableProps) {\n        if (antdTableProps.scroll) {\n          tableProps.scroll.y = scrollY_1;\n        } else {\n          tableProps.scroll = {\n            y: scrollY_1\n          };\n        }\n      } else {\n        tableProps.scroll = {\n          y: scrollY_1\n        };\n      }\n    }\n\n    this.tableRowComponentReducers = this.onTableRowComponentReducers(columns);\n    this.tableCellComponentReducers = this.onTableCellComponentReducers(columns);\n    return react_1.default.createElement(antd_1.Table, tslib_1.__assign({}, tableProps));\n  };\n  /**\n   * renderInner\n   * @description 渲染SearchTable\n   * @return ReactElement | null\n   */\n\n\n  SearchTable.prototype.renderInner = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        style = _a.style,\n        tableClassName = _a.tableClassName,\n        tableStyle = _a.tableStyle,\n        searchClassName = _a.searchClassName,\n        searchStyle = _a.searchStyle,\n        fitSearch = _a.fitSearch,\n        fitTable = _a.fitTable,\n        autoFixed = _a.autoFixed,\n        fixedTableSpaceBetween = _a.fixedTableSpaceBetween;\n    var _b = this.state.expand,\n        expand = _b === void 0 ? false : _b;\n    return react_1.default.createElement(adhere_ui_flexlayout_1.default, {\n      direction: \"vertical\",\n      className: (0, classnames_1.default)(exports.selectorPrefix, fixedTableSpaceBetween ? 'fixedtablespacebetween' : '', className || ''),\n      style: tslib_1.__assign({}, style || {})\n    }, react_1.default.createElement(Fixed, {\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-searchwrapper\"), searchClassName || ''),\n      style: tslib_1.__assign({}, searchStyle || {}),\n      fit: fitSearch\n    }, react_1.default.createElement(adhere_ui_flexlayout_1.default, {\n      direction: \"vertical\"\n    }, react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !!this.renderSearchFormBefore\n    }, function () {\n      return react_1.default.createElement(Fixed, null, _this.renderSearchFormBefore());\n    }), react_1.default.createElement(Fixed, null, react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: expand,\n      noMatch: function noMatch() {\n        return null;\n      }\n    }, function () {\n      return _this.renderSearchForm();\n    })), react_1.default.createElement(Fixed, null, this.renderSearchFooter()), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !!this.renderSearchFormAfter\n    }, function () {\n      return react_1.default.createElement(Fixed, null, _this.renderSearchFormAfter());\n    }))), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !!this.renderTableHeader\n    }, function () {\n      return react_1.default.createElement(Fixed, null, _this.renderTableHeader());\n    }), react_1.default.createElement(Auto, {\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-autowrapper\"), tableClassName || '', autoFixed ? 'autofixed' : ''),\n      style: tslib_1.__assign({}, tableStyle || {}),\n      fit: fitTable,\n      autoFixed: autoFixed\n    }, react_1.default.createElement(\"div\", {\n      ref: this.tableWrapRef,\n      className: \"\".concat(exports.selectorPrefix, \"-tablewrapper\")\n    }, this.renderTable())), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !!this.renderTableFooter\n    }, function () {\n      return react_1.default.createElement(Fixed, null, _this.renderTableFooter());\n    }));\n  };\n\n  SearchTable.prototype.renderChildren = function () {\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-wrap\")\n    }, _super.prototype.render.call(this));\n  };\n  /**\n   * render\n   * @protected\n   */\n\n\n  SearchTable.prototype.render = function () {\n    return react_1.default.createElement(exports.SearchTableContext.Provider, {\n      value: {\n        context: this\n      }\n    }, this.renderChildren());\n  }; // 序号生成的规则 - 单独模式\n\n\n  SearchTable.NUMBER_GENERATOR_RULE_ALONE = Symbol(); // 序号生成的规则 - 连续模式\n\n  SearchTable.NUMBER_GENERATOR_RULE_CONTINUITY = Symbol(); // 全选的规则 - 标准模式(不能跨页)\n\n  SearchTable.ROW_SELECTION_NORMAL_MODE = Symbol(); // 全选的规则 - 可以跨页\n\n  SearchTable.ROW_SELECTION_CONTINUOUS_MODE = Symbol();\n  return SearchTable;\n}(adhere_ui_suspense_1.default);\n\nexports.defaultProps = {\n  className: '',\n  style: {},\n  tableClassName: '',\n  tableStyle: {},\n  searchClassName: '',\n  searchStyle: {},\n  // 第一次\n  isFirst: true,\n  // 第一次加载\n  isFirstLoading: null,\n  antdTableProps: {},\n  isShowExpandSearch: true,\n  defaultExpandSearchCollapse: true,\n  fitSearch: true,\n  fitTable: true,\n  autoFixed: true,\n  fixedHeaderAutoTable: false,\n  fixedTableSpaceBetween: false\n};\nexports.propTypes = {\n  className: prop_types_1.default.string,\n  style: prop_types_1.default.object,\n  tableClassName: prop_types_1.default.string,\n  tableStyle: prop_types_1.default.object,\n  searchClassName: prop_types_1.default.string,\n  searchStyle: prop_types_1.default.object,\n  reset: prop_types_1.default.bool,\n  firstLoading: prop_types_1.default.node,\n  // antdTable的Props\n  antdTableProps: prop_types_1.default.object,\n  // 是否有展开和收缩的功能\n  isShowExpandSearch: prop_types_1.default.bool,\n  // 展开和收缩的默认状态\n  defaultExpandSearchCollapse: prop_types_1.default.bool,\n  // 撑开search\n  fitSearch: prop_types_1.default.bool,\n  // 撑开表格\n  fitTable: prop_types_1.default.bool,\n  // 是否是查询固定，表格自适应\n  autoFixed: prop_types_1.default.bool,\n  // 锁定列头，表格滚动\n  fixedHeaderAutoTable: prop_types_1.default.bool,\n  // 两端固定(表格的头始终在上方，分页始终在下方)\n  fixedTableSpaceBetween: prop_types_1.default.bool\n};\nSearchTable.defaultProps = exports.defaultProps;\nSearchTable.propTypes = exports.propTypes;\nexports.default = SearchTable;"],"names":["require","Object","defineProperty","exports","value","propTypes","defaultProps","SearchTableContext","selectorPrefix","tslib_1","antd_1","classnames_1","__importDefault","lodash_clonedeep_1","prop_types_1","react_1","__importStar","adhere_ui_conditionalrender_1","adhere_ui_flexlayout_1","adhere_ui_suspense_1","adhere_util_intl_1","ColumnResizable_1","ColumnSetting_1","TableCell_1","TableRow_1","TableDensitySetting_1","types_1","Fixed","default","Auto","SearchTable","createContext","_super","props","_this","call","this","tableWrapRef","createRef","components","header","cell","SearchTableResizableTitle","body","row","columnResizable","columnObserver","rowConfigReducers","cellConfigReducers","tableRowComponentReducers","tableCellComponentReducers","onTableChange","pagination","filters","sorter","_a","setState","getOrderFieldProp","field","getOrderFieldValue","getOrderProp","order","fetchData","onSubTableChange","state","page","limit","getLimit","expand","defaultExpandSearchCollapse","scrollY","assign","columnSetting","getTableColumns","map","column","index","__assign","sort","display","tableDensity","getTableDensity","onClear","bind","__extends","prototype","componentWillReceiveProps","nextProps","columnSettingEffect","componentDidUpdate","prevProps","prevState","snapshot","current","searchTableResizableEffectLayout","fixedHeaderAutoTableEffectLayout","SearchTableResizableObserver","tablePaginationHeight","fixedHeaderAutoTable","dataSource","getData","length","tableHeaderHeight","querySelector","offsetHeight","_b","clientHeight","preColumnSettingRowKeys","columnSettingRowKeys","rowKey_1","preColumnSetting","t","getRowKey","toString","item","find","onSearchPanelCollapseBefore","onSearchPanelCollapseAfter","Promise","resolve","clear","then","sortOrder","columnName","onCellConfigReducers","params","rowIndex","record","columns","reduce","reducer","onRowConfigReducers","rowConfig","getPagination","onChange","onShowSizeChange","showTotal","total","v","pageSize","getTotal","showQuickJumper","TableDensity","DEFAULT","numberGeneratorRule_1","page_1","_d","limit_1","isShowNumber","getTableNumberColumnWidth","getColumns","filter","$hide","$authorized","res","loop","_column","_res","$resizable","searchTableResizableColumnItem","children","Array","isArray","forEach","_t","_index","onCell","getNumberGeneratorRule","NUMBER_GENERATOR_RULE_ALONE","_c","getTableNumberColumnProps","title","dataIndex","key","align","width","render","r","createElement","conditional","noMatch","renderTableNumberColumn","concat","getTableRowComponentReducers","getTableCellComponentReducers","number","renderColumnSetting","__spreadArray","c1","c2","onShowColumns","checked","onReset","onDisplayColumn","onSortEnd","get","renderTableDensitySetting","density","renderSearchFooter","isShowExpandSearch","defaultItems","Button","className","type","icon","onClick","onSearch","items","push","renderSearchFooterItems","renderTable","antdTableProps","tableProps","rowKey","rowSelection","getRowSelection","size","onRow","Number","scrollY_1","scroll","y","onTableRowComponentReducers","onTableCellComponentReducers","Table","renderInner","style","tableClassName","tableStyle","searchClassName","searchStyle","fitSearch","fitTable","autoFixed","fixedTableSpaceBetween","direction","fit","renderSearchFormBefore","renderSearchForm","renderSearchFormAfter","renderTableHeader","ref","renderTableFooter","renderChildren","Provider","context","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","ROW_SELECTION_NORMAL_MODE","ROW_SELECTION_CONTINUOUS_MODE","isFirst","isFirstLoading","string","object","reset","bool","firstLoading","node"],"mappings":"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"}