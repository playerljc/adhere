{"version":3,"file":"SearchTableStateImplement.js","sources":["SearchTableStateImplement.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SearchTableStateImplement = exports.selectorPrefix = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar serviceregister_1 = tslib_1.__importDefault(require(\"@ctsj/state/lib/middleware/saga/serviceregister\"));\n\nvar react_2 = require(\"@ctsj/state/lib/react\");\n\nvar SearchTable_1 = require(\"./SearchTable\");\n\nvar SearchTableImplement_1 = require(\"./SearchTableImplement\");\n\nexports.selectorPrefix = 'adhere-ui-searchstatetableimplement';\n/**\n * SearchTableStateImplement\n * @class\n * @classdesc - SearchTable的state实现\n */\n\nvar SearchTableStateImplement =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SearchTableStateImplement, _super);\n\n  function SearchTableStateImplement(props) {\n    var _this = _super.call(this, props) || this;\n\n    var _a = props.$state,\n        serviceNames = _a.serviceNames,\n        middleWares = _a.middleWares,\n        reducer = _a.reducer,\n        models = _a.models,\n        mapStateToProps = _a.mapStateToProps,\n        mapDispatchToProps = _a.mapDispatchToProps;\n    _this.unsubscribe = (0, react_2.createState)({\n      initialState: tslib_1.__assign({}, _this.state),\n      models: models,\n      mapState: function mapState(state) {\n        return tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, serviceregister_1.default.mapStateToProps({\n          namespaces: serviceNames || [],\n          state: state\n        })), {\n          loading: state.loading\n        }), mapStateToProps ? mapStateToProps(state) : {});\n      },\n      mapDispatch: function mapDispatch(dispatch) {\n        return tslib_1.__assign(tslib_1.__assign({}, serviceregister_1.default.mapDispatchToProps({\n          namespaces: serviceNames || [],\n          dispatch: dispatch\n        })), mapDispatchToProps ? mapDispatchToProps(dispatch) : {});\n      },\n      middleWares: middleWares,\n      reducer: reducer,\n      ref: _this\n    });\n    return _this;\n  }\n\n  SearchTableStateImplement.prototype.componentWillUnmount = function () {\n    var _a;\n\n    (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.unsubscribe();\n  };\n  /**\n   * getData\n   * @description 获取列表的数据\n   */\n\n\n  SearchTableStateImplement.prototype.getData = function () {\n    return this.state[this.getServiceName()][this.getFetchListPropName()][this.getDataKey()];\n  };\n  /**\n   * getTotal\n   * @description 获取列表总的数据树\n   */\n\n\n  SearchTableStateImplement.prototype.getTotal = function () {\n    return this.state[this.getServiceName()][this.getFetchListPropName()][this.getTotalKey()];\n  };\n  /**\n   * showLoading\n   * @description loading\n   */\n\n\n  SearchTableStateImplement.prototype.showLoading = function () {\n    return this.state.loading[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\n  };\n  /**\n   * fetchDataExecute\n   * @description 调用列表数据接口\n   * @param searchParams\n   */\n\n\n  SearchTableStateImplement.prototype.fetchDataExecute = function (searchParams) {\n    return this.state[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\n  };\n\n  return SearchTableStateImplement;\n}(SearchTableImplement_1.SearchTableImplement);\n\nexports.SearchTableStateImplement = SearchTableStateImplement;\nSearchTableStateImplement.defaultProps = tslib_1.__assign({}, SearchTable_1.defaultProps);\nSearchTableStateImplement.propTypes = tslib_1.__assign({}, SearchTable_1.propTypes);\n/**\n * SearchTableStateImplementFactory\n * @description 创建SearchTableStateImplementFactory\n * @param serviceNames\n * @param middleWares\n * @param reducer\n * @param models\n * @param mapStateToProps\n * @param mapDispatchToProps\n */\n\nvar SearchTableStateImplementFactory = function SearchTableStateImplementFactory(_a) {\n  var serviceNames = _a.serviceNames,\n      middleWares = _a.middleWares,\n      reducer = _a.reducer,\n      models = _a.models,\n      mapStateToProps = _a.mapStateToProps,\n      mapDispatchToProps = _a.mapDispatchToProps;\n  return function (Component) {\n    return (0, react_1.forwardRef)(function (props, ref) {\n      return (// @ts-ignore\n        react_1.default.createElement(Component, tslib_1.__assign({\n          ref: ref,\n          className: \"\".concat(exports.selectorPrefix, \"-wrap\"),\n          isShowExpandSearch: true,\n          defaultExpandSearchCollapse: false,\n          openSearchParamsMemory: false,\n          fixedHeaderAutoTable: true,\n          fixedTableSpaceBetween: true\n        }, props, {\n          \"$state\": {\n            serviceNames: serviceNames,\n            middleWares: middleWares,\n            reducer: reducer,\n            models: models,\n            mapStateToProps: mapStateToProps,\n            mapDispatchToProps: mapDispatchToProps\n          }\n        }))\n      );\n    });\n  };\n};\n\nexports.default = SearchTableStateImplementFactory;"],"names":["require","Object","defineProperty","exports","value","SearchTableStateImplement","selectorPrefix","tslib_1","react_1","__importStar","serviceregister_1","__importDefault","react_2","SearchTable_1","SearchTableImplement_1","_super","props","_this","call","this","_a","$state","serviceNames","middleWares","reducer","models","mapStateToProps","mapDispatchToProps","unsubscribe","createState","initialState","__assign","state","mapState","default","namespaces","loading","mapDispatch","dispatch","ref","__extends","prototype","componentWillUnmount","getData","getServiceName","getFetchListPropName","getDataKey","getTotal","getTotalKey","showLoading","concat","fetchDataExecute","searchParams","getFetchListPropNameToFirstUpper","SearchTableImplement","SearchTableStateImplementFactory","defaultProps","propTypes","Component","forwardRef","createElement","className","isShowExpandSearch","defaultExpandSearchCollapse","openSearchParamsMemory","fixedHeaderAutoTable","fixedTableSpaceBetween"],"mappings":"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"}