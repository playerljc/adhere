{"version":3,"file":"SearchTableStateImplement.js","sources":["SearchTableStateImplement.js"],"sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SearchTableStateImplement = exports.selectorPrefix = void 0;\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar react_1 = __importStar(require(\"react\"));\nvar serviceregister_1 = __importDefault(require(\"@ctsj/state/lib/middleware/saga/serviceregister\"));\nvar react_2 = require(\"@ctsj/state/lib/react\");\nvar SearchTable_1 = require(\"./SearchTable\");\nvar SearchTableImplement_1 = require(\"./SearchTableImplement\");\nexports.selectorPrefix = 'adhere-ui-searchstatetableimplement';\n/**\n * SearchTableStateImplement\n * @class\n * @classdesc - SearchTable的state实现\n */\nvar SearchTableStateImplement = /** @class */function (_super) {\n  __extends(SearchTableStateImplement, _super);\n  function SearchTableStateImplement(props) {\n    var _this = _super.call(this, props) || this;\n    var _a = props.$state,\n      serviceNames = _a.serviceNames,\n      middleWares = _a.middleWares,\n      reducer = _a.reducer,\n      models = _a.models,\n      mapStateToProps = _a.mapStateToProps,\n      mapDispatchToProps = _a.mapDispatchToProps;\n    _this.unsubscribe = (0, react_2.createState)({\n      initialState: __assign({}, _this.state),\n      models: models,\n      mapState: function (state) {\n        return __assign(__assign(__assign({}, serviceregister_1.default.mapStateToProps({\n          namespaces: serviceNames || [],\n          state: state\n        })), {\n          loading: state.loading\n        }), mapStateToProps ? mapStateToProps(state) : {});\n      },\n      mapDispatch: function (dispatch) {\n        return __assign(__assign({}, serviceregister_1.default.mapDispatchToProps({\n          namespaces: serviceNames || [],\n          dispatch: dispatch\n        })), mapDispatchToProps ? mapDispatchToProps(dispatch) : {});\n      },\n      middleWares: middleWares,\n      reducer: reducer,\n      ref: _this\n    });\n    return _this;\n  }\n  SearchTableStateImplement.prototype.componentWillUnmount = function () {\n    var _a;\n    // @ts-ignore\n    (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.unsubscribe();\n  };\n  /**\n   * getData\n   * @description 获取列表的数据\n   * @return {object[]}\n   */\n  SearchTableStateImplement.prototype.getData = function () {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a[this.getServiceName()]) === null || _b === void 0 ? void 0 : _b[this.getFetchListPropName()]) === null || _c === void 0 ? void 0 : _c[this.getDataKey()];\n  };\n  /**\n   * getTotal\n   * @description 获取列表总的数据树\n   * @return {number}\n   */\n  SearchTableStateImplement.prototype.getTotal = function () {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a[this.getServiceName()]) === null || _b === void 0 ? void 0 : _b[this.getFetchListPropName()]) === null || _c === void 0 ? void 0 : _c[this.getTotalKey()];\n  };\n  /**\n   * fetchDataExecute\n   * @description 调用列表数据接口\n   * @param {any} searchParams\n   * @return {Promise<any>}\n   */\n  SearchTableStateImplement.prototype.fetchDataExecute = function (searchParams) {\n    var _a;\n    return (_a = this.state) === null || _a === void 0 ? void 0 : _a[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\n  };\n  /**\n   * showLoading\n   * @description loading\n   * @return {boolean}\n   */\n  SearchTableStateImplement.prototype.showLoading = function () {\n    var _a, _b;\n    return (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.loading) === null || _b === void 0 ? void 0 : _b[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\n  };\n  SearchTableStateImplement.displayName = 'SearchTableStateImplement';\n  return SearchTableStateImplement;\n}(SearchTableImplement_1.SearchTableImplement);\nexports.SearchTableStateImplement = SearchTableStateImplement;\nSearchTableStateImplement.defaultProps = __assign({}, SearchTable_1.defaultProps);\nSearchTableStateImplement.propTypes = __assign({}, SearchTable_1.propTypes);\n/**\n * SearchTableStateImplementFactory\n * @description 创建SearchTableStateImplementFactory\n * @param serviceNames\n * @param middleWares\n * @param reducer\n * @param models\n * @param mapStateToProps\n * @param mapDispatchToProps\n */\nvar SearchTableStateImplementFactory = function (_a) {\n  var serviceNames = _a.serviceNames,\n    middleWares = _a.middleWares,\n    reducer = _a.reducer,\n    models = _a.models,\n    mapStateToProps = _a.mapStateToProps,\n    mapDispatchToProps = _a.mapDispatchToProps;\n  return function (Component) {\n    return (0, react_1.forwardRef)(function (props, ref) {\n      var _a, _b;\n      return (\n        // @ts-ignore\n        react_1.default.createElement(Component, __assign({\n          ref: ref,\n          isShowExpandSearch: true,\n          defaultExpandSearchCollapse: false,\n          openSearchParamsMemory: false,\n          fixedHeaderAutoTable: true,\n          fixedTableSpaceBetween: true\n        }, props, {\n          className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-wrap\"), (_a = props.className) !== null && _a !== void 0 ? _a : ''),\n          style: (_b = props.style) !== null && _b !== void 0 ? _b : {},\n          \"$state\": {\n            serviceNames: serviceNames,\n            middleWares: middleWares,\n            reducer: reducer,\n            models: models,\n            mapStateToProps: mapStateToProps,\n            mapDispatchToProps: mapDispatchToProps\n          }\n        }))\n      );\n    });\n  };\n};\nexports.default = SearchTableStateImplementFactory;"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__createBinding","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__importDefault","default","classnames_1","exports","SearchTableStateImplement","selectorPrefix","require","react_1","serviceregister_1","react_2","SearchTable_1","SearchTableImplement_1","_super","props","_this","_a","$state","serviceNames","middleWares","reducer","models","mapStateToProps","mapDispatchToProps","unsubscribe","createState","initialState","state","mapState","namespaces","loading","mapDispatch","dispatch","ref","componentWillUnmount","getData","_c","_b","getServiceName","getFetchListPropName","getDataKey","getTotal","getTotalKey","fetchDataExecute","searchParams","concat","getFetchListPropNameToFirstUpper","showLoading","displayName","SearchTableImplement","SearchTableStateImplementFactory","defaultProps","propTypes","Component","forwardRef","createElement","isShowExpandSearch","defaultExpandSearchCollapse","openSearchParamsMemory","fixedHeaderAutoTable","fixedTableSpaceBetween","className","style"],"mappings":"AAAA,aAEA,IAAIA,UAA4C,WAC9C,IAAIC,EAAgB,SAAUC,EAAGC,GAQ/B,OAPAF,EAAgBG,OAAOC,iBAAkB,CACvCC,UAAW,EACb,YAAaC,MAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,CAChB,EAAK,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAC5E,IACqBN,EAAGC,CAAC,CAC3B,EACA,OAAO,SAAUD,EAAGC,GAClB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAAY,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAEnI,SAASW,IACPC,KAAKC,YAAcd,CACrB,CAHAD,EAAcC,EAAGC,CAAC,EAIlBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOa,OAAOd,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACjF,CACF,EAAE,EACEI,SAA0C,WAQ5C,OAPAA,SAAWd,OAAOe,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAId,KADTa,EAAIG,UAAUF,GACOlB,OAAOK,UAAUC,eAAeC,KAAKU,EAAGb,CAAC,IAAGY,EAAEZ,GAAKa,EAAEb,IAE5E,OAAOY,CACT,GACgBM,MAAMX,KAAMS,SAAS,CACvC,EACIG,gBAAyDvB,OAAOa,OAAS,SAAUW,EAAGC,EAAGC,EAAGC,GACnFC,KAAAA,IAAPD,IAAkBA,EAAKD,GAC3B,IAAIG,EAAO7B,OAAO8B,yBAAyBL,EAAGC,CAAC,EAC1CG,IAAS,QAASA,EAAQJ,EAAEM,WAAaF,CAAAA,EAAKG,UAAYH,CAAAA,EAAKI,gBAClEJ,EAAO,CACLK,WAAY,CAAA,EACZC,IAAK,WACH,OAAOV,EAAEC,EACX,CACF,GAEF1B,OAAOoC,eAAeZ,EAAGG,EAAIE,CAAI,CACnC,EAAI,SAAUL,EAAGC,EAAGC,EAAGC,GAErBH,EADsBG,EAAXC,KAAAA,IAAPD,EAAuBD,EACzBC,GAAMF,EAAEC,EACZ,EACIW,mBAA+DrC,OAAOa,OAAS,SAAUW,EAAGc,GAC9FtC,OAAOoC,eAAeZ,EAAG,UAAW,CAClCU,WAAY,CAAA,EACZK,MAAOD,CACT,CAAC,CACH,EAAI,SAAUd,EAAGc,GACfd,EAAW,QAAIc,CACjB,EACIE,aAAkD,SAAUC,GAC9D,GAAIA,GAAOA,EAAIV,WAAY,OAAOU,EAClC,IAAIC,EAAS,GACb,GAAW,MAAPD,EAAa,IAAK,IAAIf,KAAKe,EAAe,YAANf,GAAmB1B,OAAOK,UAAUC,eAAeC,KAAKkC,EAAKf,CAAC,GAAGH,gBAAgBmB,EAAQD,EAAKf,CAAC,EAEvI,OADAW,mBAAmBK,EAAQD,CAAG,EACvBC,CACT,EACIC,gBAAwD,SAAUF,GACpE,OAAOA,GAAOA,EAAIV,WAAaU,EAAM,CACnCG,QAAWH,CACb,CACF,EAKII,cAJJ7C,OAAOoC,eAAeU,QAAS,aAAc,CAC3CP,MAAO,CAAA,CACT,CAAC,EACDO,QAAQC,0BAA4BD,QAAQE,eAAiB,KAAA,EAC1CL,gBAAgBM,QAAQ,YAAY,CAAC,GACpDC,QAAUV,aAAaS,QAAQ,OAAO,CAAC,EACvCE,kBAAoBR,gBAAgBM,QAAQ,iDAAiD,CAAC,EAC9FG,QAAUH,QAAQ,uBAAuB,EACzCI,cAAgBJ,QAAQ,eAAe,EACvCK,uBAAyBL,QAAQ,wBAAwB,EAOzDF,2BANJD,QAAQE,eAAiB,sCAMoB,SAAUO,GAErD,SAASR,EAA0BS,GACjC,IAAIC,EAAQF,EAAOhD,KAAKI,KAAM6C,CAAK,GAAK7C,KACpC+C,EAAKF,EAAMG,OACbC,EAAeF,EAAGE,aAClBC,EAAcH,EAAGG,YACjBC,EAAUJ,EAAGI,QACbC,EAASL,EAAGK,OACZC,EAAkBN,EAAGM,gBACrBC,EAAqBP,EAAGO,mBAsB1B,OArBAR,EAAMS,aAAc,EAAId,QAAQe,aAAa,CAC3CC,aAActD,SAAS,GAAI2C,EAAMY,KAAK,EACtCN,OAAQA,EACRO,SAAU,SAAUD,GAClB,OAAOvD,SAASA,SAASA,SAAS,GAAIqC,kBAAkBP,QAAQoB,gBAAgB,CAC9EO,WAAYX,GAAgB,GAC5BS,MAAOA,CACT,CAAC,CAAC,EAAG,CACHG,QAASH,EAAMG,OACjB,CAAC,EAAGR,EAAkBA,EAAgBK,CAAK,EAAI,EAAE,CACnD,EACAI,YAAa,SAAUC,GACrB,OAAO5D,SAASA,SAAS,GAAIqC,kBAAkBP,QAAQqB,mBAAmB,CACxEM,WAAYX,GAAgB,GAC5Bc,SAAUA,CACZ,CAAC,CAAC,EAAGT,EAAqBA,EAAmBS,CAAQ,EAAI,EAAE,CAC7D,EACAb,YAAaA,EACbC,QAASA,EACTa,IAAKlB,CACP,CAAC,EACMA,CACT,CA6CA,OA7EA7D,UAAUmD,EAA2BQ,CAAM,EAiC3CR,EAA0B1C,UAAUuE,qBAAuB,WACzD,IAAIlB,EAEJ,OAACA,EAAKH,EAAOlD,UAAUuE,uBAA2DlB,EAAGnD,KAAKI,IAAI,EAC9FA,KAAKuD,YAAY,CACnB,EAMAnB,EAA0B1C,UAAUwE,QAAU,WAC5C,IAAYC,EACZ,OAAO,OAACA,EAAK,OAACC,EAAK,OAACrB,EAAK/C,KAAK0D,OAAmC,KAAA,EAASX,EAAG/C,KAAKqE,eAAe,IAAgC,KAAA,EAASD,EAAGpE,KAAKsE,qBAAqB,IAAgC,KAAA,EAASH,EAAGnE,KAAKuE,WAAW,EACrO,EAMAnC,EAA0B1C,UAAU8E,SAAW,WAC7C,IAAYL,EACZ,OAAO,OAACA,EAAK,OAACC,EAAK,OAACrB,EAAK/C,KAAK0D,OAAmC,KAAA,EAASX,EAAG/C,KAAKqE,eAAe,IAAgC,KAAA,EAASD,EAAGpE,KAAKsE,qBAAqB,IAAgC,KAAA,EAASH,EAAGnE,KAAKyE,YAAY,EACtO,EAOArC,EAA0B1C,UAAUgF,iBAAmB,SAAUC,GAC/D,IAAI5B,EACJ,OAAO,OAACA,EAAK/C,KAAK0D,OAAmC,KAAA,EAASX,EAAG,GAAG6B,OAAO5E,KAAKqE,eAAe,CAAC,EAAEO,OAAO5E,KAAK6E,iCAAiC,CAAC,GAAGF,CAAY,CACjK,EAMAvC,EAA0B1C,UAAUoF,YAAc,WAChD,IAAQV,EACR,OAAO,OAACA,EAAK,OAACrB,EAAK/C,KAAK0D,OAAmC,KAAA,EAASX,EAAGc,SAAqC,KAAA,EAASO,EAAG,GAAGQ,OAAO5E,KAAKqE,eAAe,EAAG,GAAG,EAAEO,OAAO5E,KAAKsE,qBAAqB,CAAC,EAClM,EACAlC,EAA0B2C,YAAc,4BACjC3C,CACT,EAAEO,uBAAuBqC,oBAAoB,GAczCC,mCAbJ9C,QAAQC,0BAA4BA,2BACV8C,aAAe/E,SAAS,GAAIuC,cAAcwC,YAAY,EAChF9C,0BAA0B+C,UAAYhF,SAAS,GAAIuC,cAAcyC,SAAS,EAWnC,SAAUpC,GAC/C,IAAIE,EAAeF,EAAGE,aACpBC,EAAcH,EAAGG,YACjBC,EAAUJ,EAAGI,QACbC,EAASL,EAAGK,OACZC,EAAkBN,EAAGM,gBACrBC,EAAqBP,EAAGO,mBAC1B,OAAO,SAAU8B,GACf,OAAO,EAAI7C,QAAQ8C,YAAY,SAAUxC,EAAOmB,GAE9C,OAEEzB,QAAQN,QAAQqD,cAAcF,EAAWjF,SAAS,CAChD6D,IAAKA,EACLuB,mBAAoB,CAAA,EACpBC,4BAA6B,CAAA,EAC7BC,uBAAwB,CAAA,EACxBC,qBAAsB,CAAA,EACtBC,uBAAwB,CAAA,CAC1B,EAAG9C,EAAO,CACR+C,WAAW,EAAI1D,aAAaD,SAAS,GAAG2C,OAAOzC,QAAQE,eAAgB,OAAO,EAAG,OAACU,EAAKF,EAAM+C,WAAuC7C,EAAK,EAAE,EAC3I8C,MAAO,OAACzB,EAAKvB,EAAMgD,OAAmCzB,EAAK,GAC3DpB,OAAU,CACRC,aAAcA,EACdC,YAAaA,EACbC,QAASA,EACTC,OAAQA,EACRC,gBAAiBA,EACjBC,mBAAoBA,CACtB,CACF,CAAC,CACH,CACF,CAAC,CACH,CACF,GACAnB,QAAQF,QAAUgD"}