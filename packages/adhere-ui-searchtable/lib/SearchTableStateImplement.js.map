{"version":3,"file":"SearchTableStateImplement.js","sources":["SearchTableStateImplement.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SearchTableStateImplement = exports.selectorPrefix = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar serviceregister_1 = tslib_1.__importDefault(require(\"@ctsj/state/lib/middleware/saga/serviceregister\"));\r\nvar react_2 = require(\"@ctsj/state/lib/react\");\r\nvar SearchTable_1 = require(\"./SearchTable\");\r\nvar SearchTableImplement_1 = require(\"./SearchTableImplement\");\r\nexports.selectorPrefix = 'adhere-ui-searchstatetableimplement';\r\n/**\r\n * SearchTableStateImplement\r\n * @class\r\n * @classdesc - SearchTable的state实现\r\n */\r\nvar SearchTableStateImplement = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchTableStateImplement, _super);\r\n    function SearchTableStateImplement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        var _a = props.$state, serviceNames = _a.serviceNames, middleWares = _a.middleWares, reducer = _a.reducer, models = _a.models, mapStateToProps = _a.mapStateToProps, mapDispatchToProps = _a.mapDispatchToProps;\r\n        _this.unsubscribe = (0, react_2.createState)({\r\n            initialState: tslib_1.__assign({}, _this.state),\r\n            models: models,\r\n            mapState: function (state) { return (tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, serviceregister_1.default.mapStateToProps({\r\n                namespaces: serviceNames || [],\r\n                state: state,\r\n            })), {\r\n                loading: state.loading,\r\n            }), (mapStateToProps ? mapStateToProps(state) : {}))); },\r\n            mapDispatch: function (dispatch) { return (tslib_1.__assign(tslib_1.__assign({}, serviceregister_1.default.mapDispatchToProps({\r\n                namespaces: serviceNames || [],\r\n                dispatch: dispatch,\r\n            })), (mapDispatchToProps ? mapDispatchToProps(dispatch) : {}))); },\r\n            middleWares: middleWares,\r\n            reducer: reducer,\r\n            ref: _this,\r\n        });\r\n        return _this;\r\n    }\r\n    SearchTableStateImplement.prototype.componentWillUnmount = function () {\r\n        var _a;\r\n        (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        this.unsubscribe();\r\n    };\r\n    /**\r\n     * getData\r\n     * @description 获取列表的数据\r\n     */\r\n    SearchTableStateImplement.prototype.getData = function () {\r\n        return this.state[this.getServiceName()][this.getFetchListPropName()][this.getDataKey()];\r\n    };\r\n    /**\r\n     * getTotal\r\n     * @description 获取列表总的数据树\r\n     */\r\n    SearchTableStateImplement.prototype.getTotal = function () {\r\n        return this.state[this.getServiceName()][this.getFetchListPropName()][this.getTotalKey()];\r\n    };\r\n    /**\r\n     * showLoading\r\n     * @description loading\r\n     */\r\n    SearchTableStateImplement.prototype.showLoading = function () {\r\n        return this.state.loading[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\r\n    };\r\n    /**\r\n     * fetchDataExecute\r\n     * @description 调用列表数据接口\r\n     * @param searchParams\r\n     */\r\n    SearchTableStateImplement.prototype.fetchDataExecute = function (searchParams) {\r\n        return this.state[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\r\n    };\r\n    return SearchTableStateImplement;\r\n}(SearchTableImplement_1.SearchTableImplement));\r\nexports.SearchTableStateImplement = SearchTableStateImplement;\r\nSearchTableStateImplement.defaultProps = tslib_1.__assign({}, SearchTable_1.defaultProps);\r\nSearchTableStateImplement.propTypes = tslib_1.__assign({}, SearchTable_1.propTypes);\r\n/**\r\n * SearchTableStateImplementFactory\r\n * @description 创建SearchTableStateImplementFactory\r\n * @param serviceNames\r\n * @param middleWares\r\n * @param reducer\r\n * @param models\r\n * @param mapStateToProps\r\n * @param mapDispatchToProps\r\n */\r\nvar SearchTableStateImplementFactory = function (_a) {\r\n    var serviceNames = _a.serviceNames, middleWares = _a.middleWares, reducer = _a.reducer, models = _a.models, mapStateToProps = _a.mapStateToProps, mapDispatchToProps = _a.mapDispatchToProps;\r\n    return function (Component) {\r\n        return (0, react_1.forwardRef)(function (props, ref) { return (\r\n        // @ts-ignore\r\n        react_1.default.createElement(Component, tslib_1.__assign({ ref: ref, className: \"\".concat(exports.selectorPrefix, \"-wrap\"), isShowExpandSearch: true, defaultExpandSearchCollapse: false, openSearchParamsMemory: false, fixedHeaderAutoTable: true, fixedTableSpaceBetween: true }, props, { \"$state\": {\r\n                serviceNames: serviceNames,\r\n                middleWares: middleWares,\r\n                reducer: reducer,\r\n                models: models,\r\n                mapStateToProps: mapStateToProps,\r\n                mapDispatchToProps: mapDispatchToProps,\r\n            } }))); });\r\n    };\r\n};\r\nexports.default = SearchTableStateImplementFactory;\r\n//# sourceMappingURL=SearchTableStateImplement.js.map"],"names":["Object","defineProperty","exports","value","SearchTableStateImplement","selectorPrefix","tslib_1","require","react_1","__importStar","serviceregister_1","__importDefault","react_2","SearchTable_1","SearchTableImplement_1","_super","props","_this","call","this","_a","$state","serviceNames","middleWares","reducer","models","mapStateToProps","mapDispatchToProps","unsubscribe","createState","initialState","__assign","state","mapState","default","namespaces","loading","mapDispatch","dispatch","ref","__extends","prototype","componentWillUnmount","getData","getServiceName","getFetchListPropName","getDataKey","getTotal","getTotalKey","showLoading","concat","fetchDataExecute","searchParams","getFetchListPropNameToFirstUpper","SearchTableImplement","SearchTableStateImplementFactory","defaultProps","propTypes","Component","forwardRef","createElement","className","isShowExpandSearch","defaultExpandSearchCollapse","openSearchParamsMemory","fixedHeaderAutoTable","fixedTableSpaceBetween"],"mappings":"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"}