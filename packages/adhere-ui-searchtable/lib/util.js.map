{"version":3,"file":"Util.js","sources":["Util.js"],"sourcesContent":["\"use strict\";\n\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clone = exports.cloneDeep = exports.createChildren = exports.createTreeDataChildren = exports.isSameLevel = exports.swap = exports.flatDataSource = exports.findBrother = exports.findRecord = void 0;\nvar lodash_clone_1 = __importDefault(require(\"lodash.clone\"));\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\n/**\n * findRecord\n * @description 在dataResource中查找rowKey是id的record\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any}\n */\nfunction findRecord(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var record;\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        record = _dataSource[i];\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        record = find(_item.children);\n        if (record) break;\n      }\n    }\n    return record;\n  }\n  return find(dataSource);\n}\nexports.findRecord = findRecord;\n/**\n * findBrother\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any[]}\n */\nfunction findBrother(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var res = [];\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        res = _dataSource;\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        res = find(_item.children);\n        if (res && !!res.length) break;\n      }\n    }\n    return res;\n  }\n  return find(dataSource);\n}\nexports.findBrother = findBrother;\n/**\n * flatDataSource\n * @description 拉平dataSource中的的children\n * @param {any[]} dataSource\n * @return {any[]}\n */\nfunction flatDataSource(dataSource) {\n  var flatData = [];\n  function loop(_dataSource) {\n    for (var i = 0; i < _dataSource.length; i++) {\n      var record = _dataSource[i];\n      flatData.push(record);\n      if ('children' in record && Array.isArray(record.children) && !!record.children) {\n        loop(record.children);\n      }\n    }\n  }\n  loop(dataSource);\n  return flatData;\n}\nexports.flatDataSource = flatDataSource;\n/**\n * swap\n * @description 交换两个record\n * @param {any} record1\n * @param {any} record2\n */\nfunction swap(record1, record2) {\n  var temp = JSON.parse(JSON.stringify(record1));\n  Object.assign(record1, record2);\n  Object.assign(record2, temp);\n}\nexports.swap = swap;\n/**\n * isSameLevel\n * @description 是否是同一层级\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {string} sourceId\n * @param {string} targetId\n * @return {boolean}\n */\nfunction isSameLevel(_a) {\n  var dataSource = _a.dataSource,\n    _b = _a.rowKey,\n    rowKey = _b === void 0 ? 'id' : _b,\n    sourceId = _a.sourceId,\n    targetId = _a.targetId;\n  var brother = findBrother(dataSource, rowKey, sourceId);\n  return brother.some(function (t) {\n    return t[rowKey] === targetId;\n  });\n}\nexports.isSameLevel = isSameLevel;\n/**\n * createTreeDataChildren\n * @description 创建TreeData的children\n * @param {ReactElement} tdREL 单元格\n * @param {ReactNode} subChildren\n * @return {ReactNode[]}\n */\nvar createTreeDataChildren = function (tdREL, subChildren) {\n  return [tdREL.props.children[0], subChildren];\n};\nexports.createTreeDataChildren = createTreeDataChildren;\n/**\n * createChildren\n * @description 创建children\n * @param {ReactElement} tdREL 单元格\n * @param {ReactNode} subChildren\n * @return {ReactNode[]}\n */\nvar createChildren = function (tdREL, subChildren) {\n  var _a;\n  // @ts-ignore\n  if ((((_a = tdREL === null || tdREL === void 0 ? void 0 : tdREL.props) === null || _a === void 0 ? void 0 : _a.className) || '').split(/\\s+/gim).includes('ant-table-cell-with-append')) {\n    // 如果是treeData数据\n    return (0, exports.createTreeDataChildren)(tdREL, subChildren);\n  }\n  return [subChildren];\n};\nexports.createChildren = createChildren;\nvar cloneDeep = function (obj) {\n  var targetObj = Object.keys(obj).reduce(function (cloneObj, prop) {\n    if (!prop.startsWith('_')) {\n      cloneObj[prop] = obj[prop];\n    }\n    return cloneObj;\n  }, {});\n  return (0, lodash_clonedeep_1.default)(targetObj);\n};\nexports.cloneDeep = cloneDeep;\nexports.clone = lodash_clone_1.default;"],"names":["__importDefault","mod","__esModule","default","lodash_clone_1","Object","defineProperty","exports","value","clone","cloneDeep","createChildren","createTreeDataChildren","isSameLevel","swap","flatDataSource","findBrother","findRecord","require","lodash_clonedeep_1","dataSource","rowKey","id","find","_dataSource","record","i","length","_item","Array","isArray","children","res","flatData","loop","push","record1","record2","temp","JSON","parse","stringify","assign","_a","_b","sourceId","targetId","some","t","tdREL","subChildren","props","className","split","includes","obj","targetObj","keys","reduce","cloneObj","prop","startsWith"],"mappings":"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"}