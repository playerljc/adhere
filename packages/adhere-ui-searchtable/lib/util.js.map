{"version":3,"file":"Util.js","sources":["Util.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createChildren = exports.createTreeDataChildren = exports.isSameLevel = exports.swap = exports.flatDataSource = exports.findBrother = exports.findRecord = void 0;\n/**\n * findRecord\n * @description 在dataResource中查找rowKey是id的record\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any}\n */\nfunction findRecord(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var record;\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        record = _dataSource[i];\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        record = find(_item.children);\n        if (record) break;\n      }\n    }\n    return record;\n  }\n  return find(dataSource);\n}\nexports.findRecord = findRecord;\n/**\n * findBrother\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any[]}\n */\nfunction findBrother(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var res = [];\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        res = _dataSource;\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        res = find(_item.children);\n        if (res && !!res.length) break;\n      }\n    }\n    return res;\n  }\n  return find(dataSource);\n}\nexports.findBrother = findBrother;\n/**\n * flatDataSource\n * @description 拉平dataSource中的的children\n * @param {any[]} dataSource\n * @return {any[]}\n */\nfunction flatDataSource(dataSource) {\n  var flatData = [];\n  function loop(_dataSource) {\n    for (var i = 0; i < _dataSource.length; i++) {\n      var record = _dataSource[i];\n      flatData.push(record);\n      if ('children' in record && Array.isArray(record.children) && !!record.children) {\n        loop(record.children);\n      }\n    }\n  }\n  loop(dataSource);\n  return flatData;\n}\nexports.flatDataSource = flatDataSource;\n/**\n * swap\n * @description 交换两个record\n * @param {any} record1\n * @param {any} record2\n */\nfunction swap(record1, record2) {\n  var temp = JSON.parse(JSON.stringify(record1));\n  Object.assign(record1, record2);\n  Object.assign(record2, temp);\n}\nexports.swap = swap;\n/**\n * isSameLevel\n * @description 是否是同一层级\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {string} sourceId\n * @param {string} targetId\n * @return {boolean}\n */\nfunction isSameLevel(_a) {\n  var dataSource = _a.dataSource,\n    _b = _a.rowKey,\n    rowKey = _b === void 0 ? 'id' : _b,\n    sourceId = _a.sourceId,\n    targetId = _a.targetId;\n  var brother = findBrother(dataSource, rowKey, sourceId);\n  return brother.some(function (t) {\n    return t[rowKey] === targetId;\n  });\n}\nexports.isSameLevel = isSameLevel;\n/**\n * createTreeDataChildren\n * @description 创建TreeData的children\n * @param {ReactElement} tdREL 单元格\n * @param {ReactNode} subChildren\n * @return {ReactNode[]}\n */\nvar createTreeDataChildren = function (tdREL, subChildren) {\n  return [tdREL.props.children[0], subChildren];\n};\nexports.createTreeDataChildren = createTreeDataChildren;\n/**\n * createChildren\n * @description 创建children\n * @param {ReactElement} tdREL 单元格\n * @param {ReactNode} subChildren\n * @return {ReactNode[]}\n */\nvar createChildren = function (tdREL, subChildren) {\n  var _a;\n  // @ts-ignore\n  if ((((_a = tdREL === null || tdREL === void 0 ? void 0 : tdREL.props) === null || _a === void 0 ? void 0 : _a.className) || '').split(/\\s+/gim).includes('ant-table-cell-with-append')) {\n    // 如果是treeData数据\n    return (0, exports.createTreeDataChildren)(tdREL, subChildren);\n  }\n  return [subChildren];\n};\nexports.createChildren = createChildren;"],"names":["findRecord","dataSource","rowKey","id","find","_dataSource","record","i","length","_item","Array","isArray","children","findBrother","res","flatDataSource","flatData","loop","push","swap","record1","record2","temp","JSON","parse","stringify","Object","assign","isSameLevel","_a","_b","sourceId","targetId","some","t","defineProperty","exports","value","createChildren","createTreeDataChildren","tdREL","subChildren","props","className","split","includes"],"mappings":"AAAA,aAcA,SAASA,WAAWC,EAAYC,EAAQC,GAmBtC,OAlBe,KAAA,IAAXD,IACFA,EAAS,MAEX,SAASE,EAAKC,GAEZ,IADA,IAAIC,EACKC,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,GAAIF,EAAYE,GAAGL,KAAYC,EAAI,CACjCG,EAASD,EAAYE,GACrB,KACF,CACA,IAAIE,EAAQJ,EAAYE,GACxB,GAAI,aAAcE,GAASC,MAAMC,QAAQF,EAAMG,QAAQ,GAAOH,EAAMG,SAASJ,SAC3EF,EAASF,EAAKK,EAAMG,QAAQ,GAChB,KAEhB,CACA,OAAON,CACT,EACYL,CAAU,CACxB,CASA,SAASY,YAAYZ,EAAYC,EAAQC,GAmBvC,OAlBe,KAAA,IAAXD,IACFA,EAAS,MAEX,SAASE,EAAKC,GAEZ,IADA,IAAIS,EAAM,GACDP,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,GAAIF,EAAYE,GAAGL,KAAYC,EAAI,CACjCW,EAAMT,EACN,KACF,CACA,IAAII,EAAQJ,EAAYE,GACxB,GAAI,aAAcE,GAASC,MAAMC,QAAQF,EAAMG,QAAQ,GAAOH,EAAMG,SAASJ,SAC3EM,EAAMV,EAAKK,EAAMG,QAAQ,IACZE,EAAIN,OAAQ,KAE7B,CACA,OAAOM,CACT,EACYb,CAAU,CACxB,CAQA,SAASc,eAAed,GACtB,IAAIe,EAAW,GAWf,OAVA,SAASC,EAAKZ,GACZ,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,IAAID,EAASD,EAAYE,GACzBS,EAASE,KAAKZ,CAAM,EAChB,aAAcA,GAAUI,MAAMC,QAAQL,EAAOM,QAAQ,GAAON,EAAOM,UACrEK,EAAKX,EAAOM,QAAQ,CAExB,CACF,EACKX,CAAU,EACRe,CACT,CAQA,SAASG,KAAKC,EAASC,GACrB,IAAIC,EAAOC,KAAKC,MAAMD,KAAKE,UAAUL,CAAO,CAAC,EAC7CM,OAAOC,OAAOP,EAASC,CAAO,EAC9BK,OAAOC,OAAON,EAASC,CAAI,CAC7B,CAWA,SAASM,YAAYC,GACnB,IAAI5B,EAAa4B,EAAG5B,WAClB6B,EAAKD,EAAG3B,OACRA,EAAgB,KAAA,IAAP4B,EAAgB,KAAOA,EAChCC,EAAWF,EAAGE,SACdC,EAAWH,EAAGG,SAEhB,OADcnB,YAAYZ,EAAYC,EAAQ6B,CAAQ,EACvCE,KAAK,SAAUC,GAC5B,OAAOA,EAAEhC,KAAY8B,CACvB,CAAC,CACH,CAnHAN,OAAOS,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACDD,QAAQE,eAAiBF,QAAQG,uBAAyBH,QAAQR,YAAcQ,QAAQjB,KAAOiB,QAAQrB,eAAiBqB,QAAQvB,YAAcuB,QAAQpC,WAAa,KAAA,EA8BnKoC,QAAQpC,WAAaA,WA6BrBoC,QAAQvB,YAAcA,YAqBtBuB,QAAQrB,eAAiBA,eAYzBqB,QAAQjB,KAAOA,KAqBfiB,QAAQR,YAAcA,YAQtB,IAAIW,uBAAyB,SAAUC,EAAOC,GAC5C,MAAO,CAACD,EAAME,MAAM9B,SAAS,GAAI6B,EACnC,EASIH,gBARJF,QAAQG,uBAAyBA,uBAQZ,SAAUC,EAAOC,GACpC,IAAIZ,EAEJ,QAAM,OAACA,EAAKW,MAAAA,EAAqC,KAAA,EAASA,EAAME,OAAmC,KAAA,EAASb,EAAGc,YAAc,IAAIC,MAAM,QAAQ,EAAEC,SAAS,4BAA4B,GAE7K,EAAIT,QAAQG,wBAAwBC,EAAOC,CAAW,EAExD,CAACA,EACV,GACAL,QAAQE,eAAiBA"}