{"version":3,"file":"SearchEditableRowFactory.js","sources":["Editable/SearchEditableRowFactory.js"],"sourcesContent":["import { __assign, __extends, __spreadArrays } from \"tslib\";\r\nexport default function (SuperClass) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1(props) {\r\n            var _this = _super.call(this, props) || this;\r\n            _this.state = __assign(__assign({}, _this.state), { editorRowId: '' });\r\n            _this.rowConfigReducers = __spreadArrays(_this.rowConfigReducers, [_this.rowEditableReducer]);\r\n            return _this;\r\n        }\r\n        /**\r\n         * rowEditableReducer\r\n         * @description 可编辑row的处理\r\n         * @param params\r\n         */\r\n        class_1.prototype.rowEditableReducer = function (params) {\r\n            var rowConfig = params.rowConfig, rowIndex = params.rowIndex, columns = params.columns, record = params.record;\r\n            if (this.onEditorRow) {\r\n                rowConfig.$editable = this.onEditorRow({\r\n                    rowIndex: rowIndex,\r\n                    record: record,\r\n                    columns: columns,\r\n                });\r\n            }\r\n            return rowConfig;\r\n        };\r\n        /**\r\n         * onEditorRow\r\n         * @param params\r\n         */\r\n        class_1.prototype.onEditorRow = function (params) {\r\n            return {\r\n                editable: true,\r\n            };\r\n        };\r\n        /**\r\n         * onEditorCell\r\n         * @param record\r\n         * @param editorConfig\r\n         */\r\n        class_1.prototype.onEditorCell = function (_a) {\r\n            var record = _a.record, editorConfig = _a.editorConfig;\r\n            if (editorConfig) {\r\n                editorConfig.useTrigger = false;\r\n                if (record[this.getRowKey()] === this.state.editorRowId) {\r\n                    editorConfig.defaultStatus = 'edit';\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * fetchData\r\n         */\r\n        class_1.prototype.fetchData = function () {\r\n            var _this = this;\r\n            return _super.prototype.fetchData.call(this).then(function (res) {\r\n                _this.setState({\r\n                    editorRowId: '',\r\n                });\r\n                return res;\r\n            });\r\n        };\r\n        return class_1;\r\n    }(SuperClass));\r\n}\r\n//# sourceMappingURL=SearchEditableRowFactory.js.map"],"names":["__assign","__extends","__spreadArrays","SuperClass","class_1","_super","prototype","rowEditableReducer","params","rowConfig","rowIndex","columns","record","this","onEditorRow","$editable","editable","onEditorCell","_a","editorConfig","useTrigger","getRowKey","state","editorRowId","defaultStatus","fetchData","_this","call","then","res","setState","props","rowConfigReducers"],"mappings":"OAASA,SAAUC,UAAWC,cAA6B,KAAP,uBACrC,SAAUC,GACrB,OACIF,UAAUG,EADkBC,EA4D9BF,CA3D2B,EAYzBC,EAAQE,UAAUC,mBAAqB,SAAUC,GAC7C,IAAIC,EAAYD,EAAOC,UAAWC,EAAWF,EAAOE,SAAUC,EAAUH,EAAOG,QAASC,EAASJ,EAAOI,OAQxG,OAPIC,KAAKC,cACLL,EAAUM,UAAYF,KAAKC,YAAY,CACnCJ,SAAUA,EACVE,OAAQA,EACRD,QAASA,CACb,CAAC,GAEEF,CACX,EAKAL,EAAQE,UAAUQ,YAAc,SAAUN,GACtC,MAAO,CACHQ,SAAU,CAAA,CACd,CACJ,EAMAZ,EAAQE,UAAUW,aAAe,SAAUC,GACvC,IAAIN,EAASM,EAAGN,OAAQO,EAAeD,EAAGC,aACtCA,IACAA,EAAaC,WAAa,CAAA,EACtBR,EAAOC,KAAKQ,UAAU,KAAOR,KAAKS,MAAMC,cACxCJ,EAAaK,cAAgB,QAGzC,EAIApB,EAAQE,UAAUmB,UAAY,WAC1B,IAAIC,EAAQb,KACZ,OAAOR,EAAOC,UAAUmB,UAAUE,KAAKd,IAAI,EAAEe,KAAK,SAAUC,GAIxD,OAHAH,EAAMI,SAAS,CACXP,YAAa,EACjB,CAAC,EACMM,CACX,CAAC,CACL,EACOzB,EAzDP,SAASA,EAAQ2B,GACTL,EAAQrB,EAAOsB,KAAKd,KAAMkB,CAAK,GAAKlB,KAGxC,OAFAa,EAAMJ,MAAQtB,SAASA,SAAS,GAAI0B,EAAMJ,KAAK,EAAG,CAAEC,YAAa,EAAG,CAAC,EACrEG,EAAMM,kBAAoB9B,eAAewB,EAAMM,kBAAmB,CAACN,EAAMnB,mBAAmB,EACrFmB,CACX,CAPkB,IAAUrB,CA6DpC"}