{"version":3,"file":"SearchTableStateImplement.js","sources":["SearchTableStateImplement.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { forwardRef } from 'react';\nimport ServiceRegister from '@ctsj/state/lib/middleware/saga/serviceregister';\nimport { createState } from '@ctsj/state/lib/react';\nimport { defaultProps, propTypes } from './SearchTable';\nimport { SearchTableImplement } from './SearchTableImplement';\nexport var selectorPrefix = 'adhere-ui-searchstatetableimplement';\n/**\n * SearchTableStateImplement\n * @class\n * @classdesc - SearchTable的state实现\n */\nvar SearchTableStateImplement = /** @class */function (_super) {\n  __extends(SearchTableStateImplement, _super);\n  function SearchTableStateImplement(props) {\n    var _this = _super.call(this, props) || this;\n    var _a = props.$state,\n      serviceNames = _a.serviceNames,\n      middleWares = _a.middleWares,\n      reducer = _a.reducer,\n      models = _a.models,\n      mapStateToProps = _a.mapStateToProps,\n      mapDispatchToProps = _a.mapDispatchToProps;\n    _this.unsubscribe = createState({\n      initialState: __assign({}, _this.state),\n      models: models,\n      mapState: function mapState(state) {\n        return __assign(__assign(__assign({}, ServiceRegister.mapStateToProps({\n          namespaces: serviceNames || [],\n          state: state\n        })), {\n          loading: state.loading\n        }), mapStateToProps ? mapStateToProps(state) : {});\n      },\n      mapDispatch: function mapDispatch(dispatch) {\n        return __assign(__assign({}, ServiceRegister.mapDispatchToProps({\n          namespaces: serviceNames || [],\n          dispatch: dispatch\n        })), mapDispatchToProps ? mapDispatchToProps(dispatch) : {});\n      },\n      middleWares: middleWares,\n      reducer: reducer,\n      ref: _this\n    });\n    return _this;\n  }\n  SearchTableStateImplement.prototype.componentWillUnmount = function () {\n    var _a;\n    // @ts-ignore\n    (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.unsubscribe();\n  };\n  /**\n   * getData\n   * @description 获取列表的数据\n   * @return {object[]}\n   */\n  SearchTableStateImplement.prototype.getData = function () {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a[this.getServiceName()]) === null || _b === void 0 ? void 0 : _b[this.getFetchListPropName()]) === null || _c === void 0 ? void 0 : _c[this.getDataKey()];\n  };\n  /**\n   * getTotal\n   * @description 获取列表总的数据树\n   * @return {number}\n   */\n  SearchTableStateImplement.prototype.getTotal = function () {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a[this.getServiceName()]) === null || _b === void 0 ? void 0 : _b[this.getFetchListPropName()]) === null || _c === void 0 ? void 0 : _c[this.getTotalKey()];\n  };\n  /**\n   * showLoading\n   * @description loading\n   * @return {boolean}\n   */\n  SearchTableStateImplement.prototype.showLoading = function () {\n    var _a, _b;\n    return (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a.loading) === null || _b === void 0 ? void 0 : _b[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\n  };\n  /**\n   * fetchDataExecute\n   * @description 调用列表数据接口\n   * @param {any} searchParams\n   * @return {Promise<any>}\n   */\n  SearchTableStateImplement.prototype.fetchDataExecute = function (searchParams) {\n    var _a;\n    return (_a = this.state) === null || _a === void 0 ? void 0 : _a[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\n  };\n  SearchTableStateImplement.displayName = 'SearchTableStateImplement';\n  return SearchTableStateImplement;\n}(SearchTableImplement);\nexport { SearchTableStateImplement };\nSearchTableStateImplement.defaultProps = __assign({}, defaultProps);\nSearchTableStateImplement.propTypes = __assign({}, propTypes);\n/**\n * SearchTableStateImplementFactory\n * @description 创建SearchTableStateImplementFactory\n * @param serviceNames\n * @param middleWares\n * @param reducer\n * @param models\n * @param mapStateToProps\n * @param mapDispatchToProps\n */\nvar SearchTableStateImplementFactory = function SearchTableStateImplementFactory(_a) {\n  var serviceNames = _a.serviceNames,\n    middleWares = _a.middleWares,\n    reducer = _a.reducer,\n    models = _a.models,\n    mapStateToProps = _a.mapStateToProps,\n    mapDispatchToProps = _a.mapDispatchToProps;\n  return function (Component) {\n    return /*#__PURE__*/forwardRef(function (props, ref) {\n      var _a, _b;\n      return (\n        /*#__PURE__*/\n        // @ts-ignore\n        React.createElement(Component, __assign({\n          ref: ref,\n          isShowExpandSearch: true,\n          defaultExpandSearchCollapse: false,\n          openSearchParamsMemory: false,\n          fixedHeaderAutoTable: true,\n          fixedTableSpaceBetween: true\n        }, props, {\n          className: classNames(\"\".concat(selectorPrefix, \"-wrap\"), (_a = props.className) !== null && _a !== void 0 ? _a : ''),\n          style: (_b = props.style) !== null && _b !== void 0 ? _b : {},\n          \"$state\": {\n            serviceNames: serviceNames,\n            middleWares: middleWares,\n            reducer: reducer,\n            models: models,\n            mapStateToProps: mapStateToProps,\n            mapDispatchToProps: mapDispatchToProps\n          }\n        }))\n      );\n    });\n  };\n};\nexport default SearchTableStateImplementFactory;"],"names":["__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","classNames","React","forwardRef","ServiceRegister","createState","defaultProps","propTypes","SearchTableImplement","selectorPrefix","SearchTableStateImplement","_super","props","_this","_a","$state","serviceNames","middleWares","reducer","models","mapStateToProps","mapDispatchToProps","unsubscribe","initialState","state","mapState","namespaces","loading","mapDispatch","dispatch","ref","componentWillUnmount","getData","_c","_b","getServiceName","getFetchListPropName","getDataKey","getTotal","getTotalKey","showLoading","concat","fetchDataExecute","searchParams","getFetchListPropNameToFirstUpper","displayName","SearchTableStateImplementFactory","Component","createElement","isShowExpandSearch","defaultExpandSearchCollapse","openSearchParamsMemory","fixedHeaderAutoTable","fixedTableSpaceBetween","className","style"],"mappings":"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"}