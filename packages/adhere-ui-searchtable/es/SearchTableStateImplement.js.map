{"version":3,"file":"SearchTableStateImplement.js","sources":["SearchTableStateImplement.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport React, { forwardRef } from 'react';\r\nimport ServiceRegister from '@ctsj/state/lib/middleware/saga/serviceregister';\r\nimport { createState } from '@ctsj/state/lib/react';\r\nimport { defaultProps, propTypes } from './SearchTable';\r\nimport { SearchTableImplement } from './SearchTableImplement';\r\nexport var selectorPrefix = 'adhere-ui-searchstatetableimplement';\r\n/**\r\n * SearchTableStateImplement\r\n * @class\r\n * @classdesc - SearchTable的state实现\r\n */\r\nvar SearchTableStateImplement = /** @class */ (function (_super) {\r\n    __extends(SearchTableStateImplement, _super);\r\n    function SearchTableStateImplement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        var _a = props.$state, serviceNames = _a.serviceNames, middleWares = _a.middleWares, reducer = _a.reducer, models = _a.models, mapStateToProps = _a.mapStateToProps, mapDispatchToProps = _a.mapDispatchToProps;\r\n        _this.unsubscribe = createState({\r\n            initialState: __assign({}, _this.state),\r\n            models: models,\r\n            mapState: function (state) { return (__assign(__assign(__assign({}, ServiceRegister.mapStateToProps({\r\n                namespaces: serviceNames || [],\r\n                state: state,\r\n            })), {\r\n                loading: state.loading,\r\n            }), (mapStateToProps ? mapStateToProps(state) : {}))); },\r\n            mapDispatch: function (dispatch) { return (__assign(__assign({}, ServiceRegister.mapDispatchToProps({\r\n                namespaces: serviceNames || [],\r\n                dispatch: dispatch,\r\n            })), (mapDispatchToProps ? mapDispatchToProps(dispatch) : {}))); },\r\n            middleWares: middleWares,\r\n            reducer: reducer,\r\n            ref: _this,\r\n        });\r\n        return _this;\r\n    }\r\n    SearchTableStateImplement.prototype.componentWillUnmount = function () {\r\n        var _a;\r\n        (_a = _super.prototype.componentWillUnmount) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        this.unsubscribe();\r\n    };\r\n    /**\r\n     * getData\r\n     * @description 获取列表的数据\r\n     */\r\n    SearchTableStateImplement.prototype.getData = function () {\r\n        return this.state[this.getServiceName()][this.getFetchListPropName()][this.getDataKey()];\r\n    };\r\n    /**\r\n     * getTotal\r\n     * @description 获取列表总的数据树\r\n     */\r\n    SearchTableStateImplement.prototype.getTotal = function () {\r\n        return this.state[this.getServiceName()][this.getFetchListPropName()][this.getTotalKey()];\r\n    };\r\n    /**\r\n     * showLoading\r\n     * @description loading\r\n     */\r\n    SearchTableStateImplement.prototype.showLoading = function () {\r\n        return this.state.loading[\"\".concat(this.getServiceName(), \"/\").concat(this.getFetchListPropName())];\r\n    };\r\n    /**\r\n     * fetchDataExecute\r\n     * @description 调用列表数据接口\r\n     * @param searchParams\r\n     */\r\n    SearchTableStateImplement.prototype.fetchDataExecute = function (searchParams) {\r\n        return this.state[\"\".concat(this.getServiceName()).concat(this.getFetchListPropNameToFirstUpper())](searchParams);\r\n    };\r\n    return SearchTableStateImplement;\r\n}(SearchTableImplement));\r\nexport { SearchTableStateImplement };\r\nSearchTableStateImplement.defaultProps = __assign({}, defaultProps);\r\nSearchTableStateImplement.propTypes = __assign({}, propTypes);\r\n/**\r\n * SearchTableStateImplementFactory\r\n * @description 创建SearchTableStateImplementFactory\r\n * @param serviceNames\r\n * @param middleWares\r\n * @param reducer\r\n * @param models\r\n * @param mapStateToProps\r\n * @param mapDispatchToProps\r\n */\r\nvar SearchTableStateImplementFactory = function (_a) {\r\n    var serviceNames = _a.serviceNames, middleWares = _a.middleWares, reducer = _a.reducer, models = _a.models, mapStateToProps = _a.mapStateToProps, mapDispatchToProps = _a.mapDispatchToProps;\r\n    return function (Component) {\r\n        return forwardRef(function (props, ref) { return (\r\n        // @ts-ignore\r\n        React.createElement(Component, __assign({ ref: ref, className: \"\".concat(selectorPrefix, \"-wrap\"), isShowExpandSearch: true, defaultExpandSearchCollapse: false, openSearchParamsMemory: false, fixedHeaderAutoTable: true, fixedTableSpaceBetween: true }, props, { \"$state\": {\r\n                serviceNames: serviceNames,\r\n                middleWares: middleWares,\r\n                reducer: reducer,\r\n                models: models,\r\n                mapStateToProps: mapStateToProps,\r\n                mapDispatchToProps: mapDispatchToProps,\r\n            } }))); });\r\n    };\r\n};\r\nexport default SearchTableStateImplementFactory;\r\n//# sourceMappingURL=SearchTableStateImplement.js.map"],"names":["__assign","__extends","React","forwardRef","ServiceRegister","createState","defaultProps","propTypes","SearchTableImplement","selectorPrefix","SearchTableStateImplement","_super","props","_this","call","this","_a","$state","serviceNames","middleWares","reducer","models","mapStateToProps","mapDispatchToProps","unsubscribe","initialState","state","mapState","namespaces","loading","mapDispatch","dispatch","ref","prototype","componentWillUnmount","getData","getServiceName","getFetchListPropName","getDataKey","getTotal","getTotalKey","showLoading","concat","fetchDataExecute","searchParams","getFetchListPropNameToFirstUpper","SearchTableStateImplementFactory","Component","createElement","className","isShowExpandSearch","defaultExpandSearchCollapse","openSearchParamsMemory","fixedHeaderAutoTable","fixedTableSpaceBetween"],"mappings":"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"}