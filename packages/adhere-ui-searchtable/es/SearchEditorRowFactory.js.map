{"version":3,"file":"SearchEditorRowFactory.js","sources":["SearchEditorRowFactory.js"],"sourcesContent":["import { __assign, __extends, __spreadArray } from \"tslib\";\nexport default function (SuperClass) {\n  return (\n    /** @class */\n    function (_super) {\n      __extends(class_1, _super);\n\n      function class_1(props) {\n        var _this = _super.call(this, props) || this;\n\n        _this.state = __assign(__assign({}, _this.state), {\n          editorRowId: ''\n        });\n        _this.rowConfigReducers = __spreadArray(__spreadArray([], _this.rowConfigReducers, true), [_this.rowEditableReducer], false);\n        return _this;\n      }\n      /**\n       * rowEditableReducer\n       * @description 可编辑row的处理\n       * @param params\n       */\n\n\n      class_1.prototype.rowEditableReducer = function (params) {\n        var rowConfig = params.rowConfig,\n            rowIndex = params.rowIndex,\n            columns = params.columns,\n            record = params.record;\n\n        if (this.onEditorRow) {\n          rowConfig.$editable = this.onEditorRow({\n            rowIndex: rowIndex,\n            record: record,\n            columns: columns\n          });\n        }\n\n        return rowConfig;\n      };\n      /**\n       * onEditorRow\n       * @param params\n       */\n\n\n      class_1.prototype.onEditorRow = function (params) {\n        return {\n          editable: true\n        };\n      };\n      /**\n       * onEditorCell\n       * @param record\n       * @param editorConfig\n       */\n\n\n      class_1.prototype.onEditorCell = function (_a) {\n        var record = _a.record,\n            editorConfig = _a.editorConfig;\n\n        if (editorConfig) {\n          editorConfig.useTrigger = false;\n\n          if (record[this.getRowKey()] === this.state.editorRowId) {\n            editorConfig.defaultStatus = 'edit';\n          }\n        }\n      };\n      /**\n       * fetchData\n       */\n\n\n      class_1.prototype.fetchData = function () {\n        var _this = this;\n\n        return _super.prototype.fetchData.call(this).then(function (res) {\n          _this.setState({\n            editorRowId: ''\n          });\n\n          return res;\n        });\n      };\n\n      return class_1;\n    }(SuperClass)\n  );\n}"],"names":["__assign","__extends","__spreadArray","SuperClass","class_1","_super","prototype","rowEditableReducer","params","rowConfig","rowIndex","columns","record","this","onEditorRow","$editable","editable","onEditorCell","_a","editorConfig","useTrigger","getRowKey","state","editorRowId","defaultStatus","fetchData","_this","call","then","res","setState","props","rowConfigReducers"],"mappings":"OAASA,SAAUC,UAAWC,aAA4B,KAAP,uBACpC,SAAUC,GACvB,OAGIF,UAAUG,EADFC,EAmFRF,CAlFyB,EAkBzBC,EAAQE,UAAUC,mBAAqB,SAAUC,GAC/C,IAAIC,EAAYD,EAAOC,UACnBC,EAAWF,EAAOE,SAClBC,EAAUH,EAAOG,QACjBC,EAASJ,EAAOI,OAUpB,OARIC,KAAKC,cACPL,EAAUM,UAAYF,KAAKC,YAAY,CACrCJ,SAAUA,EACVE,OAAQA,EACRD,QAASA,CACX,CAAC,GAGIF,CACT,EAOAL,EAAQE,UAAUQ,YAAc,SAAUN,GACxC,MAAO,CACLQ,SAAU,CAAA,CACZ,CACF,EAQAZ,EAAQE,UAAUW,aAAe,SAAUC,GACzC,IAAIN,EAASM,EAAGN,OACZO,EAAeD,EAAGC,aAElBA,IACFA,EAAaC,WAAa,CAAA,EAEtBR,EAAOC,KAAKQ,UAAU,KAAOR,KAAKS,MAAMC,cAC1CJ,EAAaK,cAAgB,QAGnC,EAMApB,EAAQE,UAAUmB,UAAY,WAC5B,IAAIC,EAAQb,KAEZ,OAAOR,EAAOC,UAAUmB,UAAUE,KAAKd,IAAI,EAAEe,KAAK,SAAUC,GAK1D,OAJAH,EAAMI,SAAS,CACbP,YAAa,EACf,CAAC,EAEMM,CACT,CAAC,CACH,EAEOzB,EA/EP,SAASA,EAAQ2B,GACXL,EAAQrB,EAAOsB,KAAKd,KAAMkB,CAAK,GAAKlB,KAMxC,OAJAa,EAAMJ,MAAQtB,SAASA,SAAS,GAAI0B,EAAMJ,KAAK,EAAG,CAChDC,YAAa,EACf,CAAC,EACDG,EAAMM,kBAAoB9B,cAAcA,cAAc,GAAIwB,EAAMM,kBAAmB,CAAA,CAAI,EAAG,CAACN,EAAMnB,oBAAqB,CAAA,CAAK,EACpHmB,CACT,CAXF,IAAUrB,CAqFd"}