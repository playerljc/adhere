import{__assign,__rest}from"tslib";import React,{useContext,useEffect,useMemo,useState}from"react";import{SearchTableContext}from"../../SearchTable";import EditableCellEdit from"./Edit";import EditableCellView from"./View";var EditableCell=function(e){e.record;var t=e.column,a=(e.rowIndex,e.columns,__rest(e,["record","column","rowIndex","columns"])),i={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==t?void 0:t.dataIndex,useKeepEdit:!1},n=useMemo(function(){return __assign(__assign({},i),(null==t?void 0:t.$editable)||{})},[t,null==t?void 0:t.dataIndex]),l=useState(n.defaultStatus),r=l[0],d=l[1],l=useContext(SearchTableContext);return useEffect(function(){return d("view")},[null==l?void 0:l.getData()]),useEffect(function(){d(null==n?void 0:n.defaultStatus)},[null==n?void 0:n.defaultStatus]),n.editable?n.useKeepEdit?React.createElement("td",__assign({},a||{}),React.createElement(EditableCellEdit,__assign({},e,{editableConfig:n,onTriggerChange:function(){return d("view")}}))):"view"===r?React.createElement("td",__assign({},a||{}),React.createElement(EditableCellView,__assign({},e,{editableConfig:n,onTriggerChange:function(){return d("edit")}}))):"edit"===r?React.createElement("td",__assign({},a||{}),React.createElement(EditableCellEdit,__assign({},e,{editableConfig:n,onTriggerChange:function(){return d("view")}}))):React.createElement("td",__assign({},a||{}),null==a?void 0:a.children):React.createElement("td",__assign({},a||{}),null==a?void 0:a.children)};export default EditableCell;
//# sourceMappingURL=EditableCell.js.map
