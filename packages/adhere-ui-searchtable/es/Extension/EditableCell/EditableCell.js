var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};import React,{useContext,useEffect,useMemo,useState}from"react";import{SearchTableContext}from"../../SearchTable";import{createChildren}from"../../Util";import EditableCellEdit from"./Edit/EditableCellEdit";import EditableCellView from"./View";var EditableCell=function(i){var t=i.column,a={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==t?void 0:t.dataIndex,useKeepEdit:!1},n=useMemo(function(){var e;return __assign(__assign({},a),null!=(e=null==t?void 0:t.$editable)?e:{})},[t,null==t?void 0:t.dataIndex]),e=useState(n.defaultStatus),l=e[0],r=e[1],e=useContext(SearchTableContext);return useEffect(function(){r(null==n?void 0:n.defaultStatus)},[null==(e=null==e?void 0:e.context)?void 0:e.getData()]),useEffect(function(){r(null==n?void 0:n.defaultStatus)},[null==n?void 0:n.defaultStatus]),function(e){var t=e;return n.editable?n.useKeepEdit?t=React.cloneElement(e,e.props,createChildren(e,React.createElement(EditableCellEdit,__assign({},i,{editableConfig:n,onTriggerChange:function(){r("view")}})))):"view"===l?t=React.cloneElement(e,e.props,React.createElement(EditableCellView,__assign({},i,{editableConfig:n,onTriggerChange:function(){r("edit")}}))):"edit"===l&&(t=React.cloneElement(e,e.props,createChildren(e,React.createElement(EditableCellEdit,__assign({},i,{editableConfig:n,onTriggerChange:function(){r("view")}}))))):t=e,t}};export default EditableCell;
//# sourceMappingURL=EditableCell.js.map
