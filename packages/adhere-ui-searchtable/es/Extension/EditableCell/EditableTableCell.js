var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};import React,{useContext,useEffect,useMemo,useState}from"react";import{SearchTableContext}from"../../SearchTable";import{createChildren}from"../../util";import EditableTableCellEdit from"./Edit/EditableTableCellEdit";import EditableCellView from"./View";var EditableTableCell=function(a){var e=a.column,t={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==e?void 0:e.dataIndex,useKeepEdit:!1},i=useMemo(function(){return __assign(__assign({},t),(null==e?void 0:e.$editable)||{})},[e,null==e?void 0:e.dataIndex]),l=useState(i.defaultStatus),n=l[0],r=l[1],l=useContext(SearchTableContext);return useEffect(function(){r(null==i?void 0:i.defaultStatus)},[null==(l=null==l?void 0:l.context)?void 0:l.getData()]),useEffect(function(){r(null==i?void 0:i.defaultStatus)},[null==i?void 0:i.defaultStatus]),function(e){var t=e;return i.editable?i.useKeepEdit?t=React.cloneElement(e,e.props,createChildren(e,React.createElement(EditableTableCellEdit,__assign({},a,{editableConfig:i,onTriggerChange:function(){return r("view")}})))):"view"===n?t=React.cloneElement(e,e.props,React.createElement(EditableCellView,__assign({},a,{editableConfig:i,onTriggerChange:function(){return r("edit")}}))):"edit"===n&&(t=React.cloneElement(e,e.props,createChildren(e,React.createElement(EditableTableCellEdit,__assign({},a,{editableConfig:i,onTriggerChange:function(){return r("view")}}))))):t=e,t}};export default EditableTableCell;
//# sourceMappingURL=EditableTableCell.js.map
