import{__assign}from"tslib";import React,{useContext,useEffect,useMemo,useState}from"react";import{SearchTableContext}from"../../SearchTable";import EditableTableCellEdit from"./Edit/EditableTableCellEdit";import EditableCellView from"./View";var EditableTableCell=function(e,t){var l=e.column,a={editable:!1,defaultStatus:"view",type:"input",props:{},formItemProps:{},useTrigger:!0,require:!0,dataIndex:null==l?void 0:l.dataIndex,useKeepEdit:!1},i=useMemo(function(){return __assign(__assign({},a),(null==l?void 0:l.$editable)||{})},[l,null==l?void 0:l.dataIndex]),n=useState(i.defaultStatus),r=n[0],o=n[1],n=useContext(SearchTableContext),u=(useEffect(function(){return o("view")},[null==(n=null==n?void 0:n.context)?void 0:n.getData()]),useEffect(function(){o(null==i?void 0:i.defaultStatus)},[null==i?void 0:i.defaultStatus]),t);return i.editable?i.useKeepEdit?u=React.cloneElement(t,t.props,[React.createElement(EditableTableCellEdit,__assign({},e,{editableConfig:i,onTriggerChange:function(){return o("view")}}))]):"view"===r?u=React.cloneElement(t,t.props,[React.createElement(EditableCellView,__assign({},e,{editableConfig:i,onTriggerChange:function(){return o("edit")}}))]):"edit"===r&&(u=React.cloneElement(t,t.props,[React.createElement(EditableTableCellEdit,__assign({},e,{editableConfig:i,onTriggerChange:function(){return o("view")}}))])):u=t,function(){return u}};export default EditableTableCell;
//# sourceMappingURL=EditableTableCell.js.map
