{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["import _Button from \"antd/es/button\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { FilterOutlined, LeftCircleOutlined, ReloadOutlined, RightCircleOutlined, SearchOutlined } from '@ant-design/icons';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport SlideLayout from '@baifendian/adhere-ui-slidelayout';\nimport Space from '@baifendian/adhere-ui-space';\nimport TableGridLayout from '@baifendian/adhere-ui-tablegridlayout';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from '../../SearchTable';\nvar VerticalFlexLayout = FlexLayout.VerticalFlexLayout,\n  ScrollLayout = FlexLayout.ScrollLayout;\nvar renderGridSearchFormGroup = TableGridLayout.renderGridSearchFormGroup;\nvar Overlay = SlideLayout.Overlay;\nvar _selectorPrefix = \"\".concat(selectorPrefix, \"-advancedsearchpanel\");\n/**\n * AdvancedSearchPanel\n * @param props\n * @return {React.ReactPortal}\n * @constructor\n */\nvar AdvancedSearchPanel = function AdvancedSearchPanel(props) {\n  var _a;\n  var _b = props.advancedSearchConfig,\n    _c = _b.advancedSearch,\n    getPopupContainer = _c.getPopupContainer,\n    overlayProps = __rest(_c, [\"getPopupContainer\"]),\n    _d = _b.showStrategy,\n    showStrategy = _d === void 0 ? 'all' : _d,\n    renderTitleLabel = _b.renderTitleLabel,\n    renderCollapse = _b.renderCollapse,\n    _e = props.tableGridLayoutConfig,\n    tableGridLayoutConfig = _e === void 0 ? {\n      layout: 'horizontal',\n      bordered: false\n    } : _e,\n    _f = props.groupData,\n    groupData = _f === void 0 ? [] : _f,\n    _g = props.remainingGroupData,\n    remainingGroupData = _g === void 0 ? [] : _g,\n    onSearch = props.onSearch,\n    onReset = props.onReset;\n  var _h = useState(overlayProps.collapse),\n    collapse = _h[0],\n    setCollapse = _h[1];\n  var overlayRef = useRef();\n  useEffect(function () {\n    setCollapse(overlayProps.collapse);\n  }, [overlayProps.collapse]);\n  return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(Overlay, __assign({\n    ref: overlayRef\n  }, overlayProps, {\n    className: classNames(\"\".concat(_selectorPrefix), (_a = overlayProps.className) !== null && _a !== void 0 ? _a : ''),\n    collapse: collapse\n  }), /*#__PURE__*/React.createElement(VerticalFlexLayout, {\n    className: \"\".concat(_selectorPrefix, \"-inner\"),\n    renderTop: /*#__PURE__*/React.createElement(\"header\", {\n      className: \"\".concat(_selectorPrefix, \"-header\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-title\")\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderTitleLabel,\n      noMatch: function noMatch() {\n        return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel();\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(Space.Group, {\n        direction: \"horizontal\",\n        size: 2\n      }, /*#__PURE__*/React.createElement(FilterOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('高级搜索')));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-collapse\"),\n      onClick: function onClick() {\n        return setCollapse(!collapse);\n      }\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderCollapse,\n      noMatch: function noMatch() {\n        return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse);\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: collapse,\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(Space.Group, {\n            direction: \"horizontal\",\n            size: 2\n          }, /*#__PURE__*/React.createElement(RightCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('展开')));\n        }\n      }, function () {\n        return /*#__PURE__*/React.createElement(Space.Group, {\n          direction: \"horizontal\",\n          size: 2\n        }, /*#__PURE__*/React.createElement(LeftCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('收起')));\n      });\n    }))),\n    renderMain: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-main\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-scroll\")\n    }, /*#__PURE__*/React.createElement(ScrollLayout, {\n      scrollY: true,\n      className: \"\".concat(_selectorPrefix, \"-scroll-innner\")\n    }, renderGridSearchFormGroup(\n    // @ts-ignore\n    showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"\".concat(_selectorPrefix, \"-footer\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(SearchOutlined, null),\n      onClick: function onClick() {\n        return onSearch().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('确定'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      icon: /*#__PURE__*/React.createElement(ReloadOutlined, null),\n      onClick: function onClick() {\n        return onReset().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('重置')))))\n  })), getPopupContainer());\n};\nAdvancedSearchPanel.defaultProps = {\n  groupData: [],\n  tableGridLayoutConfig: {\n    layout: 'horizontal',\n    bordered: false\n  },\n  remainingGroupData: [],\n  advancedSearchConfig: {\n    // 显示少行 'auto' | number\n    // auto - 为自动\n    // number - 指定行数 超出行会在高级筛选中显示\n    rowCount: 'auto',\n    // 剩余的条件的显示方式 'all' | 'remaining'\n    // all - 全部显示\n    // remaining - 显示剩余\n    showStrategy: 'all',\n    // 高级搜索\n    advancedSearch: {\n      // 外围样式\n      className: '',\n      // 外围style\n      style: {},\n      // 宽度\n      width: '30%',\n      // 是否有遮罩\n      mask: true,\n      // 层级\n      zIndex: 19999,\n      // 过度时间\n      time: 300,\n      // 方向\n      direction: 'right',\n      // 默认不展开\n      collapse: false,\n      onBeforeShow: function onBeforeShow() {},\n      onBeforeClose: function onBeforeClose() {},\n      onAfterShow: function onAfterShow() {},\n      onAfterClose: function onAfterClose() {},\n      getPopupContainer: function getPopupContainer() {\n        return document.body;\n      }\n    }\n  }\n};\nexport default /*#__PURE__*/React.memo(AdvancedSearchPanel);"],"names":["_Button","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","React","useEffect","useRef","useState","ReactDOM","FilterOutlined","LeftCircleOutlined","ReloadOutlined","RightCircleOutlined","SearchOutlined","ConditionalRender","FlexLayout","SlideLayout","Space","TableGridLayout","Intl","selectorPrefix","VerticalFlexLayout","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","concat","AdvancedSearchPanel","props","_b","advancedSearchConfig","_c","advancedSearch","getPopupContainer","overlayProps","_d","showStrategy","renderTitleLabel","renderCollapse","_e","tableGridLayoutConfig","layout","bordered","_f","groupData","_g","remainingGroupData","onSearch","onReset","_h","collapse","setCollapse","overlayRef","createPortal","createElement","ref","className","_a","renderTop","conditional","noMatch","Group","direction","size","v","onClick","renderMain","scrollY","type","icon","then","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","memo"],"mappings":"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"}