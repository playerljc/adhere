{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["import _Button from \"antd/es/button\";\nimport { __assign, __rest } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { FilterOutlined, LeftCircleOutlined, ReloadOutlined, RightCircleOutlined, SearchOutlined } from '@ant-design/icons';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport SlideLayout from '@baifendian/adhere-ui-slidelayout';\nimport Space from '@baifendian/adhere-ui-space';\nimport TableGridLayout from '@baifendian/adhere-ui-tablegridlayout';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from '../../SearchTable';\nvar VerticalFlexLayout = FlexLayout.VerticalFlexLayout,\n    ScrollLayout = FlexLayout.ScrollLayout;\nvar renderGridSearchFormGroup = TableGridLayout.renderGridSearchFormGroup;\nvar Overlay = SlideLayout.Overlay;\n\nvar _selectorPrefix = \"\".concat(selectorPrefix, \"-advancedsearchpanel\");\n/**\n * AdvancedSearchPanel\n * @param props\n * @return {React.ReactPortal}\n * @constructor\n */\n\n\nvar AdvancedSearchPanel = function AdvancedSearchPanel(props) {\n  var _a = props.advancedSearchConfig,\n      _b = _a.advancedSearch,\n      getPopupContainer = _b.getPopupContainer,\n      overlayProps = __rest(_b, [\"getPopupContainer\"]),\n      _c = _a.showStrategy,\n      showStrategy = _c === void 0 ? 'all' : _c,\n      renderTitleLabel = _a.renderTitleLabel,\n      renderCollapse = _a.renderCollapse,\n      _d = props.tableGridLayoutConfig,\n      tableGridLayoutConfig = _d === void 0 ? {\n    layout: 'horizontal',\n    bordered: false\n  } : _d,\n      _e = props.groupData,\n      groupData = _e === void 0 ? [] : _e,\n      _f = props.remainingGroupData,\n      remainingGroupData = _f === void 0 ? [] : _f,\n      onSearch = props.onSearch,\n      onReset = props.onReset;\n\n  var _g = useState(overlayProps.collapse),\n      collapse = _g[0],\n      setCollapse = _g[1];\n\n  useEffect(function () {\n    setCollapse(overlayProps.collapse);\n  }, [overlayProps.collapse]);\n  return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(Overlay, __assign({}, overlayProps, {\n    className: classNames(\"\".concat(_selectorPrefix), overlayProps.className || ''),\n    collapse: collapse\n  }), /*#__PURE__*/React.createElement(VerticalFlexLayout, {\n    className: \"\".concat(_selectorPrefix, \"-inner\"),\n    renderTop: /*#__PURE__*/React.createElement(\"header\", {\n      className: \"\".concat(_selectorPrefix, \"-header\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-title\")\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderTitleLabel,\n      noMatch: function noMatch() {\n        return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel();\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(Space.Group, {\n        direction: \"horizontal\",\n        size: 2\n      }, /*#__PURE__*/React.createElement(FilterOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('高级搜索')));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-collapse\"),\n      onClick: function onClick() {\n        return setCollapse(!collapse);\n      }\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderCollapse,\n      noMatch: function noMatch() {\n        return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse);\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: collapse,\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(Space.Group, {\n            direction: \"horizontal\",\n            size: 2\n          }, /*#__PURE__*/React.createElement(RightCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('展开')));\n        }\n      }, function () {\n        return /*#__PURE__*/React.createElement(Space.Group, {\n          direction: \"horizontal\",\n          size: 2\n        }, /*#__PURE__*/React.createElement(LeftCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('收起')));\n      });\n    }))),\n    renderMain: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-main\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-scroll\")\n    }, /*#__PURE__*/React.createElement(ScrollLayout, {\n      scrollY: true\n    }, renderGridSearchFormGroup( // @ts-ignore\n    showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"\".concat(_selectorPrefix, \"-footer\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(SearchOutlined, null),\n      onClick: function onClick() {\n        return onSearch().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('确定'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      icon: /*#__PURE__*/React.createElement(ReloadOutlined, null),\n      onClick: function onClick() {\n        return onReset().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('重置')))))\n  })), getPopupContainer());\n};\n\nAdvancedSearchPanel.defaultProps = {\n  groupData: [],\n  tableGridLayoutConfig: {\n    layout: 'horizontal',\n    bordered: false\n  },\n  remainingGroupData: [],\n  advancedSearchConfig: {\n    // 显示少行 'auto' | number\n    // auto - 为自动\n    // number - 指定行数 超出行会在高级筛选中显示\n    rowCount: 'auto',\n    // 剩余的条件的显示方式 'all' | 'remaining'\n    // all - 全部显示\n    // remaining - 显示剩余\n    showStrategy: 'all',\n    // 高级搜索\n    advancedSearch: {\n      // 外围样式\n      className: '',\n      // 外围style\n      style: {},\n      // 宽度\n      width: '30%',\n      // 是否有遮罩\n      mask: true,\n      // 层级\n      zIndex: 19999,\n      // 过度时间\n      time: 300,\n      // 方向\n      direction: 'right',\n      // 默认不展开\n      collapse: false,\n      onBeforeShow: function onBeforeShow() {},\n      onBeforeClose: function onBeforeClose() {},\n      onAfterShow: function onAfterShow() {},\n      onAfterClose: function onAfterClose() {},\n      getPopupContainer: function getPopupContainer() {\n        return document.body;\n      }\n    }\n  }\n};\nexport default /*#__PURE__*/React.memo(AdvancedSearchPanel);"],"names":["_Button","__assign","__rest","classNames","React","useEffect","useState","ReactDOM","FilterOutlined","LeftCircleOutlined","ReloadOutlined","RightCircleOutlined","SearchOutlined","ConditionalRender","FlexLayout","SlideLayout","Space","TableGridLayout","Intl","selectorPrefix","VerticalFlexLayout","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","concat","AdvancedSearchPanel","props","_a","advancedSearchConfig","_b","advancedSearch","getPopupContainer","overlayProps","_c","showStrategy","renderTitleLabel","renderCollapse","_d","tableGridLayoutConfig","layout","bordered","_e","groupData","_f","remainingGroupData","onSearch","onReset","_g","collapse","setCollapse","createPortal","createElement","className","renderTop","conditional","noMatch","Group","direction","size","v","onClick","renderMain","scrollY","type","icon","then","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","memo"],"mappings":"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"}