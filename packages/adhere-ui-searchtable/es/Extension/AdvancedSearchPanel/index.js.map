{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\r\nimport { Button } from 'antd';\r\nimport classNames from 'classnames';\r\nimport React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FilterOutlined, LeftCircleOutlined, ReloadOutlined, RightCircleOutlined, SearchOutlined, } from '@ant-design/icons';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\r\nimport SlideLayout from '@baifendian/adhere-ui-slidelayout';\r\nimport Space from '@baifendian/adhere-ui-space';\r\nimport TableGridLayout from '@baifendian/adhere-ui-tablegridlayout';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport { selectorPrefix } from '../../SearchTable';\r\nvar VerticalFlexLayout = FlexLayout.VerticalFlexLayout, ScrollLayout = FlexLayout.ScrollLayout;\r\nvar renderGridSearchFormGroup = TableGridLayout.renderGridSearchFormGroup;\r\nvar Overlay = SlideLayout.Overlay;\r\nvar _selectorPrefix = selectorPrefix + \"-advancedsearchpanel\";\r\n/**\r\n * AdvancedSearchPanel\r\n * @param props\r\n * @return {React.ReactPortal}\r\n * @constructor\r\n */\r\nvar AdvancedSearchPanel = function (props) {\r\n    var _a = props.advancedSearchConfig, _b = _a.advancedSearch, getPopupContainer = _b.getPopupContainer, overlayProps = __rest(_b, [\"getPopupContainer\"]), _c = _a.showStrategy, showStrategy = _c === void 0 ? 'all' : _c, renderTitleLabel = _a.renderTitleLabel, renderCollapse = _a.renderCollapse, _d = props.tableGridLayoutConfig, tableGridLayoutConfig = _d === void 0 ? {\r\n        layout: 'horizontal',\r\n        bordered: false,\r\n    } : _d, _e = props.groupData, groupData = _e === void 0 ? [] : _e, _f = props.remainingGroupData, remainingGroupData = _f === void 0 ? [] : _f, onSearch = props.onSearch, onReset = props.onReset;\r\n    var _g = useState(overlayProps.collapse), collapse = _g[0], setCollapse = _g[1];\r\n    useEffect(function () {\r\n        setCollapse(overlayProps.collapse);\r\n    }, [overlayProps.collapse]);\r\n    return ReactDOM.createPortal(React.createElement(Overlay, __assign({}, overlayProps, { className: classNames(\"\" + _selectorPrefix, overlayProps.className || ''), collapse: collapse }),\r\n        React.createElement(VerticalFlexLayout, { className: _selectorPrefix + \"-inner\", renderTop: React.createElement(\"header\", { className: _selectorPrefix + \"-header\" },\r\n                React.createElement(\"div\", { className: _selectorPrefix + \"-title\" },\r\n                    React.createElement(ConditionalRender, { conditional: !renderTitleLabel, noMatch: function () { return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel(); } }, function () { return (React.createElement(Space.Group, { direction: \"horizontal\", size: 2 },\r\n                        React.createElement(FilterOutlined, null),\r\n                        React.createElement(\"strong\", null, Intl.v('高级搜索')))); })),\r\n                React.createElement(\"div\", { className: _selectorPrefix + \"-collapse\", onClick: function () { return setCollapse(!collapse); } },\r\n                    React.createElement(ConditionalRender, { conditional: !renderCollapse, noMatch: function () { return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse); } }, function () { return (React.createElement(ConditionalRender, { conditional: collapse, noMatch: function () { return (React.createElement(Space.Group, { direction: \"horizontal\", size: 2 },\r\n                            React.createElement(RightCircleOutlined, null),\r\n                            React.createElement(\"strong\", null, Intl.v('展开')))); } }, function () { return (React.createElement(Space.Group, { direction: \"horizontal\", size: 2 },\r\n                        React.createElement(LeftCircleOutlined, null),\r\n                        React.createElement(\"strong\", null, Intl.v('收起')))); })); }))), renderMain: React.createElement(\"div\", { className: _selectorPrefix + \"-main\" },\r\n                React.createElement(\"div\", { className: _selectorPrefix + \"-main-inner\" },\r\n                    React.createElement(\"div\", { className: _selectorPrefix + \"-scroll\" },\r\n                        React.createElement(ScrollLayout, { scrollY: true }, renderGridSearchFormGroup(\r\n                        // @ts-ignore\r\n                        showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))),\r\n                    React.createElement(\"footer\", { className: _selectorPrefix + \"-footer\" },\r\n                        React.createElement(\"div\", { className: _selectorPrefix + \"-item\" },\r\n                            React.createElement(Button, { type: \"primary\", icon: React.createElement(SearchOutlined, null), onClick: function () { return onSearch().then(function () { return setCollapse(false); }); } }, Intl.v('确定'))),\r\n                        React.createElement(\"div\", { className: _selectorPrefix + \"-item\" },\r\n                            React.createElement(Button, { icon: React.createElement(ReloadOutlined, null), onClick: function () { return onReset().then(function () { return setCollapse(false); }); } }, Intl.v('重置')))))) })), getPopupContainer());\r\n};\r\nAdvancedSearchPanel.defaultProps = {\r\n    groupData: [],\r\n    tableGridLayoutConfig: {\r\n        layout: 'horizontal',\r\n        bordered: false,\r\n    },\r\n    remainingGroupData: [],\r\n    advancedSearchConfig: {\r\n        // 显示少行 'auto' | number\r\n        // auto - 为自动\r\n        // number - 指定行数 超出行会在高级筛选中显示\r\n        rowCount: 'auto',\r\n        // 剩余的条件的显示方式 'all' | 'remaining'\r\n        // all - 全部显示\r\n        // remaining - 显示剩余\r\n        showStrategy: 'all',\r\n        // 高级搜索\r\n        advancedSearch: {\r\n            // 外围样式\r\n            className: '',\r\n            // 外围style\r\n            style: {},\r\n            // 宽度\r\n            width: '30%',\r\n            // 是否有遮罩\r\n            mask: true,\r\n            // 层级\r\n            zIndex: 19999,\r\n            // 过度时间\r\n            time: 300,\r\n            // 方向\r\n            direction: 'right',\r\n            // 默认不展开\r\n            collapse: false,\r\n            onBeforeShow: function () { },\r\n            onBeforeClose: function () { },\r\n            onAfterShow: function () { },\r\n            onAfterClose: function () { },\r\n            getPopupContainer: function () { return document.body; },\r\n        },\r\n    },\r\n};\r\nexport default React.memo(AdvancedSearchPanel);\r\n//# sourceMappingURL=index.js.map"],"names":["__assign","__rest","Button","classNames","React","useEffect","useState","ReactDOM","FilterOutlined","LeftCircleOutlined","ReloadOutlined","RightCircleOutlined","SearchOutlined","ConditionalRender","FlexLayout","SlideLayout","Space","TableGridLayout","Intl","selectorPrefix","VerticalFlexLayout","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","AdvancedSearchPanel","props","_a","advancedSearchConfig","_b","advancedSearch","getPopupContainer","overlayProps","_c","showStrategy","renderTitleLabel","renderCollapse","_d","tableGridLayoutConfig","layout","bordered","_e","groupData","_f","remainingGroupData","onSearch","onReset","_g","collapse","setCollapse","createPortal","createElement","className","renderTop","conditional","noMatch","Group","direction","size","v","onClick","renderMain","scrollY","type","icon","then","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","memo"],"mappings":"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"}