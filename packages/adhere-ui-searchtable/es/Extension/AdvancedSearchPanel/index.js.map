{"version":3,"file":"index.js","sources":["Extension/AdvancedSearchPanel/index.js"],"sourcesContent":["import _ReloadOutlined from \"@ant-design/icons/es/icons/ReloadOutlined\";\nimport _SearchOutlined from \"@ant-design/icons/es/icons/SearchOutlined\";\nimport _Button from \"antd/es/button\";\nimport _LeftCircleOutlined from \"@ant-design/icons/es/icons/LeftCircleOutlined\";\nimport _RightCircleOutlined from \"@ant-design/icons/es/icons/RightCircleOutlined\";\nimport _FilterOutlined from \"@ant-design/icons/es/icons/FilterOutlined\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport React, { memo, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport SlideLayout from '@baifendian/adhere-ui-slidelayout';\nimport Space from '@baifendian/adhere-ui-space';\nimport TableGridLayout from '@baifendian/adhere-ui-tablegridlayout';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from '../../SearchTable';\nvar VerticalFlexLayout = FlexLayout.VerticalFlexLayout,\n  ScrollLayout = FlexLayout.ScrollLayout;\nvar renderGridSearchFormGroup = TableGridLayout.renderGridSearchFormGroup;\nvar Overlay = SlideLayout.Overlay;\nvar _selectorPrefix = \"\".concat(selectorPrefix, \"-advanced-search-panel\");\n/**\n * AdvancedSearchPanel\n * @param props\n * @return {React.ReactPortal}\n * @constructor\n */\nvar AdvancedSearchPanel = /*#__PURE__*/memo(function (props) {\n  var _a, _b, _c;\n  var _d = props.advancedSearchConfig,\n    _e = _d.advancedSearch,\n    getPopupContainer = _e.getPopupContainer,\n    overlayProps = __rest(_e, [\"getPopupContainer\"]),\n    _f = _d.showStrategy,\n    showStrategy = _f === void 0 ? 'all' : _f,\n    renderTitleLabel = _d.renderTitleLabel,\n    renderCollapse = _d.renderCollapse,\n    _g = props.tableGridLayoutConfig,\n    tableGridLayoutConfig = _g === void 0 ? {\n      layout: 'horizontal',\n      bordered: false\n    } : _g,\n    _h = props.groupData,\n    groupData = _h === void 0 ? [] : _h,\n    _j = props.remainingGroupData,\n    remainingGroupData = _j === void 0 ? [] : _j,\n    onSearch = props.onSearch,\n    onReset = props.onReset;\n  var _k = useState(overlayProps.collapse),\n    collapse = _k[0],\n    setCollapse = _k[1];\n  var overlayRef = useRef();\n  useEffect(function () {\n    setCollapse(overlayProps.collapse);\n  }, [overlayProps.collapse]);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(Overlay, __assign({\n    ref: overlayRef\n  }, overlayProps, {\n    className: classNames(\"\".concat(_selectorPrefix), (_a = overlayProps.className) !== null && _a !== void 0 ? _a : ''),\n    collapse: collapse\n  }), /*#__PURE__*/React.createElement(VerticalFlexLayout, {\n    className: \"\".concat(_selectorPrefix, \"-inner\"),\n    renderTop: /*#__PURE__*/React.createElement(\"header\", {\n      className: \"\".concat(_selectorPrefix, \"-header\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-title\")\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderTitleLabel,\n      noMatch: function () {\n        return renderTitleLabel === null || renderTitleLabel === void 0 ? void 0 : renderTitleLabel();\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(Space.Group, {\n        direction: \"horizontal\",\n        size: 2\n      }, /*#__PURE__*/React.createElement(_FilterOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('高级搜索')));\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-collapse\"),\n      onClick: function () {\n        return setCollapse(!collapse);\n      }\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !renderCollapse,\n      noMatch: function () {\n        return renderCollapse === null || renderCollapse === void 0 ? void 0 : renderCollapse(collapse);\n      }\n    }, function () {\n      return /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: collapse,\n        noMatch: function () {\n          return /*#__PURE__*/React.createElement(Space.Group, {\n            direction: \"horizontal\",\n            size: 2\n          }, /*#__PURE__*/React.createElement(_RightCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('展开')));\n        }\n      }, function () {\n        return /*#__PURE__*/React.createElement(Space.Group, {\n          direction: \"horizontal\",\n          size: 2\n        }, /*#__PURE__*/React.createElement(_LeftCircleOutlined, null), /*#__PURE__*/React.createElement(\"strong\", null, Intl.v('收起')));\n      });\n    }))),\n    renderMain: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-main\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-scroll\")\n    }, /*#__PURE__*/React.createElement(ScrollLayout, {\n      scrollY: true,\n      className: \"\".concat(_selectorPrefix, \"-scroll-innner\")\n    },\n    // @ts-ignore\n    (_c = (_b = props === null || props === void 0 ? void 0 : props.children) === null || _b === void 0 ? void 0 : _b.call(props, __assign({}, props))) !== null && _c !== void 0 ? _c : renderGridSearchFormGroup(\n    // @ts-ignore\n    showStrategy === 'all' ? groupData : remainingGroupData, tableGridLayoutConfig))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"\".concat(_selectorPrefix, \"-footer\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(_SearchOutlined, null),\n      onClick: function () {\n        return onSearch().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('确定'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(_selectorPrefix, \"-item\")\n    }, /*#__PURE__*/React.createElement(_Button, {\n      icon: /*#__PURE__*/React.createElement(_ReloadOutlined, null),\n      onClick: function () {\n        return onReset().then(function () {\n          return setCollapse(false);\n        });\n      }\n    }, Intl.v('重置')))))\n  })), getPopupContainer());\n});\n// @ts-ignore\nAdvancedSearchPanel.defaultProps = {\n  groupData: [],\n  tableGridLayoutConfig: {\n    layout: 'horizontal',\n    bordered: false\n  },\n  remainingGroupData: [],\n  advancedSearchConfig: {\n    // 显示少行 'auto' | number\n    // auto - 为自动\n    // number - 指定行数 超出行会在高级筛选中显示\n    rowCount: 'auto',\n    // 剩余的条件的显示方式 'all' | 'remaining'\n    // all - 全部显示\n    // remaining - 显示剩余\n    showStrategy: 'all',\n    // 高级搜索\n    advancedSearch: {\n      // 外围样式\n      className: '',\n      // 外围style\n      style: {},\n      // 宽度\n      width: '30%',\n      // 是否有遮罩\n      mask: true,\n      // 层级\n      zIndex: 19999,\n      // 过度时间\n      time: 300,\n      // 方向\n      direction: 'right',\n      // 默认不展开\n      collapse: false,\n      onBeforeShow: function () {},\n      onBeforeClose: function () {},\n      onAfterShow: function () {},\n      onAfterClose: function () {},\n      getPopupContainer: function () {\n        return document.body;\n      }\n    }\n  }\n};\nAdvancedSearchPanel.displayName = 'AdvancedSearchPanel';\nexport default AdvancedSearchPanel;"],"names":["_ReloadOutlined","_SearchOutlined","_Button","_LeftCircleOutlined","_RightCircleOutlined","_FilterOutlined","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","React","memo","useEffect","useRef","useState","createPortal","ConditionalRender","FlexLayout","SlideLayout","Space","TableGridLayout","Intl","selectorPrefix","VerticalFlexLayout","ScrollLayout","renderGridSearchFormGroup","Overlay","_selectorPrefix","concat","AdvancedSearchPanel","props","_d","advancedSearchConfig","_e","advancedSearch","getPopupContainer","overlayProps","_f","showStrategy","renderTitleLabel","renderCollapse","_g","tableGridLayoutConfig","layout","bordered","_h","groupData","_j","remainingGroupData","onSearch","onReset","_k","collapse","setCollapse","overlayRef","createElement","ref","className","_a","renderTop","conditional","noMatch","Group","direction","size","v","onClick","renderMain","scrollY","_c","_b","children","type","icon","then","defaultProps","rowCount","style","width","mask","zIndex","time","onBeforeShow","onBeforeClose","onAfterShow","onAfterClose","document","body","displayName"],"mappings":"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"}