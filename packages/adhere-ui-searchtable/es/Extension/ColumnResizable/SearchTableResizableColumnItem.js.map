{"version":3,"file":"SearchTableResizableColumnItem.js","sources":["Extension/ColumnResizable/SearchTableResizableColumnItem.js"],"sourcesContent":["import \"core-js/modules/es.parse-int.js\";\nimport { __assign, __rest } from \"tslib\";\n/**\n * handleResize\n * @description 表头列拖动的时候\n * @param context\n * @param column\n * @param columnsWidth\n * @protected\n */\n\nfunction handleResize(context, column, columnsWidth) {\n  return function (e, _a) {\n    var size = _a.size; // 当拖动header的column时\n\n    columnsWidth.set(column.key, size);\n    context.forceUpdate();\n  };\n}\n\nexport default (function (_a) {\n  var _b, _c, _d, _e, _f;\n\n  var columnsWidth = _a.columnsWidth,\n      context = _a.context,\n      index = _a.index,\n      column = _a.column; // 如果设置了列可拖动\n\n  var colEls = (_d = (_c = (_b = context === null || context === void 0 ? void 0 : context.tableWrapRef) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.querySelectorAll) === null || _d === void 0 ? void 0 : _d.call(_c, '.ant-table-header > table > colgroup > col');\n  var spanCount = 0;\n\n  if (context.getRowSelection()) {\n    spanCount = spanCount + 1;\n  }\n\n  if (context.isShowNumber()) {\n    spanCount = spanCount + 1;\n  }\n\n  var computedWidth = colEls && colEls.length > spanCount ? (_f = (_e = colEls === null || colEls === void 0 ? void 0 : colEls[spanCount + index]) === null || _e === void 0 ? void 0 : _e.style) === null || _f === void 0 ? void 0 : _f.width : null;\n\n  if (computedWidth) {\n    computedWidth = parseInt(computedWidth);\n  }\n\n  var columnSizeItem = columnsWidth.get(column.key);\n  var width = columnSizeItem ? columnSizeItem.width : column.width ? column.width : computedWidth;\n  return __assign(__assign({}, column), {\n    width: width,\n    // 加入onHeaderCell\n    onHeaderCell: function onHeaderCell() {\n      var findLoop = function findLoop(__columns) {\n        var res;\n\n        for (var i = 0; i < __columns.length; i++) {\n          if (__columns[i].dataIndex === column.dataIndex) {\n            res = __columns[i];\n            break;\n          } else {\n            if (__columns[i].children && Array.isArray(__columns[i].children)) {\n              res = findLoop(__columns[i].children);\n              if (res) break;\n            }\n          }\n        }\n\n        return res;\n      };\n\n      var _columns = context.getTableColumns();\n\n      var _column = findLoop(_columns);\n\n      var onHeaderCell = _column.onHeaderCell,\n          _others = __rest(_column, [\"onHeaderCell\"]);\n\n      return {\n        width: _others.width,\n        onResize: handleResize(context, _others, columnsWidth)\n      };\n    }\n  });\n});"],"names":["__assign","__rest","handleResize","context","column","columnsWidth","e","_a","size","set","key","forceUpdate","index","colEls","_d","_c","_b","tableWrapRef","current","querySelectorAll","call","spanCount","getRowSelection","isShowNumber","computedWidth","length","_f","_e","style","width","parseInt","columnSizeItem","get","onHeaderCell","_column","findLoop","__columns","res","i","dataIndex","children","Array","isArray","getTableColumns","_others","onResize"],"mappings":"MAAO,yCACEA,SAAUC,MAAqB,KAAP,QAUjC,SAASC,aAAaC,EAASC,EAAQC,GACrC,OAAO,SAAUC,EAAGC,GACdC,EAAOD,EAAGC,KAEdH,EAAaI,IAAIL,EAAOM,IAAKF,CAAI,EACjCL,EAAQQ,YAAY,CACtB,CACF,gBAEe,SAAWJ,GACxB,IAEIF,EAAeE,EAAGF,aAClBF,EAAUI,EAAGJ,QACbS,EAAQL,EAAGK,MACXR,EAASG,EAAGH,OAEZS,EAAS,OAACC,EAAK,OAACC,EAAK,OAACC,EAAKb,MAAAA,EAAyC,KAAA,EAASA,EAAQc,cAA0C,KAAA,EAASD,EAAGE,SAAqC,KAAA,EAASH,EAAGI,kBAA8C,KAAA,EAASL,EAAGM,KAAKL,EAAI,4CAA4C,EAC3SM,EAAY,EAEZlB,EAAQmB,gBAAgB,IAC1BD,GAAwB,GAGtBlB,EAAQoB,aAAa,IACvBF,GAAwB,GAMxBG,GADEA,EAFgBX,GAAUA,EAAOY,OAASJ,EAAY,OAACK,EAAK,OAACC,EAAKd,MAAAA,EAAuC,KAAA,EAASA,EAAOQ,EAAYT,IAAoC,KAAA,EAASe,EAAGC,OAAmC,KAAA,EAASF,EAAGG,MAAQ,OAG9NC,SAASN,CAAa,EAGpCO,EAAiB1B,EAAa2B,IAAI5B,EAAOM,GAAG,EAC5CmB,EAAQE,EAAiBA,EAAeF,MAAQzB,EAAOyB,OAAuBL,EAClF,OAAOxB,SAASA,SAAS,GAAII,CAAM,EAAG,CACpCyB,MAAOA,EAEPI,aAAc,WACZ,IAoBIC,EApBW,SAASC,EAASC,GAG/B,IAFA,IAAIC,EAEKC,EAAI,EAAGA,EAAIF,EAAUX,OAAQa,CAAC,GAAI,CACzC,GAAIF,EAAUE,GAAGC,YAAcnC,EAAOmC,UAAW,CAC/CF,EAAMD,EAAUE,GAChB,KACF,CACE,GAAIF,EAAUE,GAAGE,UAAYC,MAAMC,QAAQN,EAAUE,GAAGE,QAAQ,IAC9DH,EAAMF,EAASC,EAAUE,GAAGE,QAAQ,GAC3B,KAGf,CAEA,OAAOH,CACT,EAEelC,EAAQwC,gBAAgB,CAER,EAG3BC,GADeV,EAAQD,aACbhC,OAAOiC,EAAS,CAAC,eAAe,GAE9C,MAAO,CACLL,MAAOe,EAAQf,MACfgB,SAAU3C,aAAaC,EAASyC,EAASvC,CAAY,CACvD,CACF,CACF,CAAC,CACF"}