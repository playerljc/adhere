{"version":3,"file":"index.js","sources":["Extension/OptionsWrap/index.js"],"sourcesContent":["import _EllipsisOutlined from \"@ant-design/icons/es/icons/EllipsisOutlined\";\nimport _Dropdown from \"antd/es/dropdown\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport Split from '@baifendian/adhere-ui-split';\nimport { selectorPrefix } from '../../SearchTable';\nvar _selectorPrefix = \"\".concat(selectorPrefix, \"-options-wrap\");\n/**\n * OptionsWrap\n * @description - 表格操作列的父组件，自动加入分割线\n * @param children\n * @param className\n * @param style\n * @param ellipsisCount\n * @param isEllipsesShowOnlyOneAfterCollapsing\n * @return {JSX.Element}\n */\nvar OptionsWrap = function OptionsWrap(_a) {\n  var _b = _a.className,\n    className = _b === void 0 ? '' : _b,\n    _c = _a.style,\n    style = _c === void 0 ? {} : _c,\n    _d = _a.ellipsisCount,\n    ellipsisCount = _d === void 0 ? 3 : _d,\n    _e = _a.isEllipsesShowOnlyOneAfterCollapsing,\n    isEllipsesShowOnlyOneAfterCollapsing = _e === void 0 ? false : _e,\n    children = _a.children;\n  var result;\n  if (children.length <= 1) {\n    result = children;\n  } else {\n    var cloneChildren = React.Children.toArray(children);\n    var currentChildren_1 = cloneChildren.filter(function (t) {\n      if (_typeof(t) === 'object' && 'props' in t && 'conditional' in t.props) {\n        if (t.props.conditional) return true;\n        if ('noMatch' in t.props) {\n          if (t.props.noMatch instanceof Function) {\n            return !!t.props.noMatch();\n          }\n        }\n        return false;\n      }\n      return true;\n    });\n    if (currentChildren_1.length <= 1) {\n      result = children;\n    } else {\n      var currentEllipsisCount = ellipsisCount <= 0 ? 3 : ellipsisCount;\n      if (currentChildren_1.length >= currentEllipsisCount) {\n        var showOnlyOneDisplay = isEllipsesShowOnlyOneAfterCollapsing;\n        var displayEndIndex = showOnlyOneDisplay ? 1 : ellipsisCount - 1;\n        var ellipseStartIndex = showOnlyOneDisplay ? 1 : ellipsisCount - 1;\n        currentChildren_1 = __spreadArray(__spreadArray([], currentChildren_1.slice(0, displayEndIndex), true), [/*#__PURE__*/React.createElement(_Dropdown, {\n          key: \"menu\",\n          menu: {\n            items: currentChildren_1.slice(ellipseStartIndex).map(function (_v) {\n              return {\n                // @ts-ignore\n                key: _v.key,\n                label: _v\n              };\n            })\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: \"#\"\n        }, /*#__PURE__*/React.createElement(_EllipsisOutlined, null)))], false);\n      }\n      result = __spreadArray([], currentChildren_1, true);\n      var _loop_1 = function _loop_1(i) {\n        var index = result.findIndex(function (t) {\n          return t === currentChildren_1[i];\n        });\n        result.splice(index + 1, 0, /*#__PURE__*/React.createElement(Split, {\n          direction: \"horizontal\"\n        }));\n      };\n      // clone   0 1 2 3 4 5\n      // current 0 1 2 3 4\n      for (var i = 0; i <= currentChildren_1.length - 2; i++) {\n        _loop_1(i);\n      }\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(_selectorPrefix, className),\n    style: style !== null && style !== void 0 ? style : {}\n  }, result);\n};\nOptionsWrap.displayName = 'OptionsWrap';\nexport default OptionsWrap;"],"names":["_EllipsisOutlined","_Dropdown","_typeof","__spreadArray","this","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","classNames","React","Split","selectorPrefix","_selectorPrefix","OptionsWrap","_a","result","_b","className","_c","style","_d","ellipsisCount","_e","isEllipsesShowOnlyOneAfterCollapsing","children","currentChildren_1","Children","toArray","filter","t","props","conditional","noMatch","Function","ellipseStartIndex","createElement","key","menu","items","map","_v","label","href","_loop_1","index","findIndex","splice","direction","displayName"],"mappings":"OAAOA,sBAAuB,qDACvBC,cAAe,0BACfC,YAAa,gCACpB,IAAIC,cAAgBC,MAAQA,KAAKD,eAAiB,SAAUE,EAAIC,EAAMC,GACpE,GAAIA,GAA6B,IAArBC,UAAUC,OAAc,IAAK,IAA4BC,EAAxBC,EAAI,EAAGC,EAAIN,EAAKG,OAAYE,EAAIC,EAAGD,CAAC,GAC3ED,CAAAA,GAAQC,KAAKL,KACVI,EAAAA,GAASG,MAAMC,UAAUC,MAAMC,KAAKV,EAAM,EAAGK,CAAC,GAChDA,GAAKL,EAAKK,IAGjB,OAAON,EAAGY,OAAOP,GAAMG,MAAMC,UAAUC,MAAMC,KAAKV,CAAI,CAAC,CACzD,SACOY,eAAgB,oBAChBC,UAAW,eACXC,UAAW,qCACTC,cAAyC,KAAnB,oBAC/B,IAAIC,gBAAkB,GAAGL,OAAOI,eAAgB,eAAe,EAW3DE,YAAc,SAAqBC,GACrC,IASIC,EATAC,EAAKF,EAAGG,UACVA,EAAmB,KAAA,IAAPD,EAAgB,GAAKA,EACjCE,EAAKJ,EAAGK,MACRA,EAAe,KAAA,IAAPD,EAAgB,GAAKA,EAC7BE,EAAKN,EAAGO,cACRA,EAAuB,KAAA,IAAPD,EAAgB,EAAIA,EACpCE,EAAKR,EAAGS,qCACRA,EAA8C,KAAA,IAAPD,GAAwBA,EAC/DE,EAAWV,EAAGU,SAEhB,GAAIA,EAASzB,QAAU,EACrBgB,EAASS,MACJ,CACL,IACIC,EADgBhB,MAAMiB,SAASC,QAAQH,CAAQ,EACbI,OAAO,SAAUC,GACrD,MAAA,EAAmB,WAAfrC,QAAQqC,CAAC,GAAkB,UAAWA,GAAK,gBAAiBA,EAAEC,OAC5DD,CAAAA,EAAEC,MAAMC,cACR,YAAaF,EAAEC,OACbD,EAAEC,MAAME,mBAAmBC,UACtB,CAAC,CAACJ,EAAEC,MAAME,QAAQ,CAMjC,CAAC,EACD,GAAIP,EAAkB1B,QAAU,EAC9BgB,EAASS,MAET,CACIC,EAAkB1B,SADKsB,GAAiB,EAAI,EAAIA,KAKlDI,EAAoBhC,cAAcA,cAAc,GAAIgC,EAAkBpB,MAAM,EADxE6B,EAFqBX,EAEoB,EAAIF,EAAgB,CAC6B,EAAG,CAAA,CAAI,EAAG,CAAcZ,MAAM0B,cAAc5C,UAAW,CACnJ6C,IAAK,OACLC,KAAM,CACJC,MAAOb,EAAkBpB,MAAM6B,CAAiB,EAAEK,IAAI,SAAUC,GAC9D,MAAO,CAELJ,IAAKI,EAAGJ,IACRK,MAAOD,CACT,CACF,CAAC,CACH,CACF,EAAgB/B,MAAM0B,cAAc,IAAK,CACvCO,KAAM,GACR,EAAgBjC,MAAM0B,cAAc7C,kBAAmB,IAAI,CAAC,CAAC,GAAI,CAAA,CAAK,GAExEyB,EAAStB,cAAc,GAAIgC,EAAmB,CAAA,CAAI,EAWlD,IA/BA,IA+BSxB,EAAI,EAAGA,GAAKwB,EAAkB1B,OAAS,EAAGE,CAAC,GAClD0C,CAXY,SAAiB1C,GAC7B,IAAI2C,EAAQ7B,EAAO8B,UAAU,SAAUhB,GACrC,OAAOA,IAAMJ,EAAkBxB,EACjC,CAAC,EACDc,EAAO+B,OAAOF,EAAQ,EAAG,EAAgBnC,MAAM0B,cAAczB,MAAO,CAClEqC,UAAW,YACb,CAAC,CAAC,CACJ,EAIU9C,CAAC,CAhCsD,CAmCrE,CACA,OAAoBQ,MAAM0B,cAAc,MAAO,CAC7ClB,UAAWT,WAAWI,gBAAiBK,CAAS,EAChDE,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGJ,CAAM,CACX,EACAF,YAAYmC,YAAc,6BACXnC"}