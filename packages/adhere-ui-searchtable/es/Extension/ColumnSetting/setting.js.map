{"version":3,"file":"setting.js","sources":["Extension/ColumnSetting/setting.js"],"sourcesContent":["import _Checkbox from \"antd/es/checkbox\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __spreadArray } from \"tslib\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { SortableContainer as SortableContainerHOC, SortableElement, SortableHandle } from 'react-sortable-hoc';\nimport { arrayMoveImmutable } from 'array-move';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from '../../searchtable';\nvar DragHandle = SortableHandle(function () {\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1pYyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTJzLjktMiAyLTJzMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMC02Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6bTYgNGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTJzLTIgLjktMiAycy45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6Ij48L3BhdGg+PC9zdmc+DQo=\",\n    alt: \"\"\n  });\n});\nvar SortableItem = SortableElement(function (_a) {\n  var column = _a.column,\n      onDisplayColumn = _a.onDisplayColumn;\n  return /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(DragHandle, null), /*#__PURE__*/React.createElement(_Checkbox, {\n    checked: column.display,\n    onChange: function onChange(e) {\n      onDisplayColumn(column, e.target.checked);\n    }\n  }, column.title));\n});\nvar SortableContainer = SortableContainerHOC(function (_a) {\n  var children = _a.children;\n  return /*#__PURE__*/React.createElement(\"ul\", null, children);\n});\n/**\n * ColumnSetting\n * @param props\n * @constructor\n */\n\nfunction ColumnSetting(_a) {\n  var columns = _a.columns,\n      onShowColumns = _a.onShowColumns,\n      onReset = _a.onReset,\n      onDisplayColumn = _a.onDisplayColumn,\n      _onSortEnd = _a.onSortEnd;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting-header\")\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(_Checkbox, {\n    checked: columns.every(function (column) {\n      return column.display;\n    }),\n    onChange: function onChange(e) {\n      onShowColumns(e.target.checked);\n    }\n  }, Intl.v('列展示'))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: onReset\n  }, Intl.v('重置')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting-body\")\n  }, /*#__PURE__*/React.createElement(SortableContainer, {\n    onSortEnd: function onSortEnd(_a) {\n      var oldIndex = _a.oldIndex,\n          newIndex = _a.newIndex;\n      var changeColumns = arrayMoveImmutable(__spreadArray([], columns, true), oldIndex, newIndex);\n      var map = new Map();\n      changeColumns.forEach(function (column, index) {\n        map.set(column.key, index);\n      });\n\n      _onSortEnd(map);\n    },\n    useDragHandle: true,\n    // lockToContainerEdges\n    helperClass: \"\".concat(selectorPrefix, \"-sortableHelper\")\n  }, columns.map(function (column, index) {\n    return /*#__PURE__*/React.createElement(SortableItem, {\n      key: column.key,\n      index: index,\n      column: column,\n      onDisplayColumn: onDisplayColumn\n    });\n  }))));\n}\n\nColumnSetting.defaultProps = {\n  columns: []\n};\nColumnSetting.propTypes = {\n  columns: PropTypes.array,\n  onShowColumns: PropTypes.func,\n  onReset: PropTypes.func,\n  onDisplayColumn: PropTypes.func,\n  onSortEnd: PropTypes.func\n};\nexport default ColumnSetting;"],"names":["_Checkbox","__spreadArray","React","PropTypes","SortableContainerHOC","SortableElement","SortableHandle","arrayMoveImmutable","Intl","selectorPrefix","DragHandle","createElement","src","alt","SortableItem","_a","column","onDisplayColumn","checked","display","onChange","e","target","title","SortableContainer","children","ColumnSetting","columns","onShowColumns","onReset","_onSortEnd","onSortEnd","className","concat","every","v","onClick","oldIndex","newIndex","changeColumns","map","Map","forEach","index","set","key","useDragHandle","helperClass","defaultProps","propTypes","array","func"],"mappings":"OAAOA,67BAqBEC,iCACFC,yBACAC,kCACuBC,0CAAsBC,gBAAiBC,+CAC5DC,2CACFC,+CACEC,uCACT,IAAIC,WAAaJ,eAAe,WAC9B,OAAoBJ,MAAMS,cAAc,MAAO,CAC7CC,IAAK,iwBACLC,IAAK,OAGLC,aAAeT,gBAAgB,SAAUU,GAC3C,IAAIC,EAASD,EAAGC,OACZC,EAAkBF,EAAGE,gBACzB,OAAoBf,MAAMS,cAAc,KAAM,KAAmBT,MAAMS,cAAcD,WAAY,MAAoBR,MAAMS,cAAcX,UAAW,CAClJkB,QAASF,EAAOG,QAChBC,SAAU,SAAkBC,GAC1BJ,EAAgBD,EAAQK,EAAEC,OAAOJ,WAElCF,EAAOO,UAERC,kBAAoBpB,qBAAqB,SAAUW,GACjDU,EAAWV,EAAGU,SAClB,OAAoBvB,MAAMS,cAAc,KAAM,KAAMc,KAQtD,SAASC,cAAcX,GACrB,IAAIY,EAAUZ,EAAGY,QACbC,EAAgBb,EAAGa,cACnBC,EAAUd,EAAGc,QACbZ,EAAkBF,EAAGE,gBACrBa,EAAaf,EAAGgB,UACpB,OAAoB7B,MAAMS,cAAc,MAAO,CAC7CqB,UAAW,GAAGC,OAAOxB,eAAgB,oBACvBP,MAAMS,cAAc,MAAO,CACzCqB,UAAW,GAAGC,OAAOxB,eAAgB,2BACvBP,MAAMS,cAAc,MAAO,KAAmBT,MAAMS,cAAcX,UAAW,CAC3FkB,QAASS,EAAQO,MAAM,SAAUlB,GAC/B,OAAOA,EAAOG,UAEhBC,SAAU,SAAkBC,GAC1BO,EAAcP,EAAEC,OAAOJ,WAExBV,KAAK2B,EAAE,SAAuBjC,MAAMS,cAAc,MAAO,KAAmBT,MAAMS,cAAc,IAAK,CACtGyB,QAASP,GACRrB,KAAK2B,EAAE,SAAuBjC,MAAMS,cAAc,MAAO,CAC1DqB,UAAW,GAAGC,OAAOxB,eAAgB,yBACvBP,MAAMS,cAAca,kBAAmB,CACrDO,UAAW,SAAmBhB,GAC5B,IAAIsB,EAAWtB,EAAGsB,SACdC,EAAWvB,EAAGuB,SACdC,EAAgBhC,mBAAmBN,cAAc,GAAI0B,GAAS,GAAOU,EAAUC,GAC/EE,EAAM,IAAIC,IACdF,EAAcG,QAAQ,SAAU1B,EAAQ2B,GACtCH,EAAII,IAAI5B,EAAO6B,IAAKF,KAGtBb,EAAWU,IAEbM,eAAe,EAEfC,YAAa,GAAGd,OAAOxB,eAAgB,oBACtCkB,EAAQa,IAAI,SAAUxB,EAAQ2B,GAC/B,OAAoBzC,MAAMS,cAAcG,aAAc,CACpD+B,IAAK7B,EAAO6B,IACZF,MAAOA,EACP3B,OAAQA,EACRC,gBAAiBA,SAKvBS,cAAcsB,aAAe,CAC3BrB,QAAS,IAEXD,cAAcuB,UAAY,CACxBtB,QAASxB,UAAU+C,MACnBtB,cAAezB,UAAUgD,KACzBtB,QAAS1B,UAAUgD,KACnBlC,gBAAiBd,UAAUgD,KAC3BpB,UAAW5B,UAAUgD,qBAERzB"}