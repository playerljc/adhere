{"version":3,"file":"Setting.js","sources":["Extension/ColumnSetting/Setting.js"],"sourcesContent":["import _Checkbox from \"antd/es/checkbox\";\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { arrayMoveImmutable } from 'array-move';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SortableContainer as SortableContainerHOC, SortableElement, SortableHandle } from 'react-sortable-hoc';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from '../../SearchTable';\nvar DragHandle = SortableHandle(function () {\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1pYyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNjY2MiIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTJzLjktMiAyLTJzMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMC02Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6bTYgNGMxLjEgMCAyLS45IDItMnMtLjktMi0yLTJzLTIgLjktMiAycy45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyczItLjkgMi0ycy0uOS0yLTItMnptMCA2Yy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMnMyLS45IDItMnMtLjktMi0yLTJ6Ij48L3BhdGg+PC9zdmc+DQo=\",\n    alt: \"\"\n  });\n});\nvar SortableItem = SortableElement(function (_a) {\n  var column = _a.column,\n    onDisplayColumn = _a.onDisplayColumn;\n  return /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(DragHandle, null), /*#__PURE__*/React.createElement(_Checkbox, {\n    checked: column.display,\n    onChange: function onChange(e) {\n      onDisplayColumn(column, e.target.checked);\n    }\n  }, column.title));\n});\nvar SortableContainer = SortableContainerHOC(function (_a) {\n  var children = _a.children;\n  return /*#__PURE__*/React.createElement(\"ul\", null, children);\n});\n/**\n * ColumnSetting\n * @param props\n * @constructor\n */\nfunction ColumnSetting(_a) {\n  var columns = _a.columns,\n    onShowColumns = _a.onShowColumns,\n    onReset = _a.onReset,\n    onDisplayColumn = _a.onDisplayColumn,\n    _onSortEnd = _a.onSortEnd;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting-header\")\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(_Checkbox, {\n    checked: columns.every(function (column) {\n      return column.display;\n    }),\n    onChange: function onChange(e) {\n      onShowColumns(e.target.checked);\n    }\n  }, Intl.v('列展示'))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: onReset\n  }, Intl.v('重置')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-column-setting-body\")\n  }, /*#__PURE__*/React.createElement(SortableContainer, {\n    onSortEnd: function onSortEnd(_a) {\n      var oldIndex = _a.oldIndex,\n        newIndex = _a.newIndex;\n      var changeColumns = arrayMoveImmutable(__spreadArray([], columns, true), oldIndex, newIndex);\n      var map = new Map();\n      changeColumns.forEach(function (column, index) {\n        map.set(column.key, index);\n      });\n      _onSortEnd(map);\n    },\n    useDragHandle: true,\n    // lockToContainerEdges\n    helperClass: \"\".concat(selectorPrefix, \"-sortableHelper\")\n  }, columns.map(function (column, index) {\n    return /*#__PURE__*/React.createElement(SortableItem, {\n      key: column.key,\n      index: index,\n      column: column,\n      onDisplayColumn: onDisplayColumn\n    });\n  }))));\n}\nColumnSetting.defaultProps = {\n  columns: []\n};\nColumnSetting.propTypes = {\n  columns: PropTypes.array,\n  onShowColumns: PropTypes.func,\n  onReset: PropTypes.func,\n  onDisplayColumn: PropTypes.func,\n  onSortEnd: PropTypes.func\n};\nexport default ColumnSetting;"],"names":["_Checkbox","__spreadArray","this","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","arrayMoveImmutable","PropTypes","React","SortableContainerHOC","SortableElement","SortableHandle","Intl","selectorPrefix","DragHandle","createElement","src","alt","SortableItem","_a","column","onDisplayColumn","checked","display","onChange","e","target","title","SortableContainer","children","ColumnSetting","columns","onShowColumns","onReset","_onSortEnd","onSortEnd","className","every","v","onClick","oldIndex","newIndex","changeColumns","map","Map","forEach","index","set","key","useDragHandle","helperClass","defaultProps","propTypes","array","func"],"mappings":"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"}