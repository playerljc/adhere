{"version":3,"file":"routeListen.js","sources":["Extension/SearchAndPaginParams/routeListen.js"],"sourcesContent":["import { SearchAndPaginParamsMemo as StateSearchAndPaginParamsMemo } from '../../ProSearchStateTable';\r\nimport { SearchAndPaginParamsMemo } from '../../ProSearchTable';\r\nvar historyStack = [];\r\n/**\r\n * clearSearAndPaginParamsByPathname\r\n * @description 清除查询条件根据pathname\r\n * @param pathname\r\n */\r\nfunction clearSearAndPaginParamsByPathname(pathname) {\r\n    var findIndex = SearchAndPaginParamsMemo.findIndexByPath(pathname);\r\n    if (findIndex !== -1) {\r\n        SearchAndPaginParamsMemo.deleteByIndex(findIndex);\r\n    }\r\n    findIndex = StateSearchAndPaginParamsMemo.findIndexByPath(pathname);\r\n    if (findIndex !== -1) {\r\n        StateSearchAndPaginParamsMemo.deleteByIndex(findIndex);\r\n    }\r\n}\r\nexport default (function (_a) {\r\n    var location = _a.location, action = _a.action;\r\n    var pathname = location.pathname;\r\n    var findIndex = historyStack.lastIndexOf(pathname);\r\n    // 没找到\r\n    if (findIndex === -1) {\r\n        // 清除查询条件\r\n        clearSearAndPaginParamsByPathname(pathname);\r\n        historyStack.push(pathname);\r\n    }\r\n    // 找到了\r\n    else {\r\n        var pathArr = historyStack.slice(findIndex + 1);\r\n        // 1 2 1\r\n        // 之间只有一个页面的路径\r\n        if (pathArr.length === 1) {\r\n            // pathArr[0] /system/task/list/view\r\n            // pathname   /system/task/list/ 当前\r\n            if (!pathArr[0].startsWith(pathname)) {\r\n                // 清除查询条件\r\n                clearSearAndPaginParamsByPathname(pathname);\r\n            }\r\n        }\r\n        else {\r\n            // 清除查询条件\r\n            clearSearAndPaginParamsByPathname(pathname);\r\n        }\r\n        // 都需要清空路径\r\n        historyStack = historyStack.slice(0, findIndex);\r\n        historyStack.push(pathname);\r\n    }\r\n});\r\n//# sourceMappingURL=routeListen.js.map"],"names":["StateSearchAndPaginParamsMemo","SearchAndPaginParamsMemo","historyStack","clearSearAndPaginParamsByPathname","pathname","findIndex","findIndexByPath","deleteByIndex","_a","pathArr","location","action","lastIndexOf","slice","length","startsWith","push"],"mappings":"OAAqCA,yDAAgE,KAA3B,mCACjEC,wBAAsD,KAAtB,uBACzC,IAAIC,aAAe,GAMnB,SAASC,kCAAkCC,GACvC,IAAIC,EAAYJ,yBAAyBK,gBAAgBF,CAAQ,EAC/C,CAAC,IAAfC,GACAJ,yBAAyBM,cAAcF,CAAS,EAGlC,CAAC,KADnBA,EAAYL,8BAA8BM,gBAAgBF,CAAQ,IAE9DJ,8BAA8BO,cAAcF,CAAS,CAE7D,gBACe,SAAWG,GACtB,IAWQC,EAXJC,EAAWF,EAAGE,SACdN,GADiCI,EAAGG,OACzBD,EAASN,UACpBC,EAAYH,aAAaU,YAAYR,CAAQ,GAE/B,CAAC,IAAfC,GAEAF,kCAAkCC,CAAQ,EAC1CF,eAOuB,KAHnBO,EAAUP,aAAaW,MAAMR,EAAY,CAAC,GAGlCS,QAGHL,EAAQ,GAAGM,WAAWX,CAAQ,GAOnCD,kCAAkCC,CAAQ,EAG9CF,aAAeA,aAAaW,MAAM,EAAGR,CAAS,IApBjCW,KAAKZ,CAAQ,CAuBjC"}