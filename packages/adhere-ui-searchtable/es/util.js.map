{"version":3,"file":"util.js","sources":["util.js"],"sourcesContent":["/**\n * findRecord\n * @description 在dataResource中查找rowKey是id的record\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any}\n */\nexport function findRecord(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var record;\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        record = _dataSource[i];\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        record = find(_item.children);\n        if (record) break;\n      }\n    }\n    return record;\n  }\n  return find(dataSource);\n}\n/**\n * findBrother\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {any} id\n * @return {any[]}\n */\nexport function findBrother(dataSource, rowKey, id) {\n  if (rowKey === void 0) {\n    rowKey = 'id';\n  }\n  function find(_dataSource) {\n    var res = [];\n    for (var i = 0; i < _dataSource.length; i++) {\n      if (_dataSource[i][rowKey] === id) {\n        res = _dataSource;\n        break;\n      }\n      var _item = _dataSource[i];\n      if ('children' in _item && Array.isArray(_item.children) && !!_item.children.length) {\n        res = find(_item.children);\n        if (res && !!res.length) break;\n      }\n    }\n    return res;\n  }\n  return find(dataSource);\n}\n/**\n * flatDataSource\n * @description 拉平dataSource中的的children\n * @param {any[]} dataSource\n * @return {any[]}\n */\nexport function flatDataSource(dataSource) {\n  var flatData = [];\n  function loop(_dataSource) {\n    for (var i = 0; i < _dataSource.length; i++) {\n      var record = _dataSource[i];\n      flatData.push(record);\n      if ('children' in record && Array.isArray(record.children) && !!record.children) {\n        loop(record.children);\n      }\n    }\n  }\n  loop(dataSource);\n  return flatData;\n}\n/**\n * swap\n * @description 交换两个record\n * @param {any} record1\n * @param {any} record2\n */\nexport function swap(record1, record2) {\n  var temp = JSON.parse(JSON.stringify(record1));\n  Object.assign(record1, record2);\n  Object.assign(record2, temp);\n}\n/**\n * isSameLevel\n * @description 是否是同一层级\n * @param {any[]} dataSource\n * @param {string} rowKey\n * @param {string} sourceId\n * @param {string} targetId\n * @return {boolean}\n */\nexport function isSameLevel(_a) {\n  var dataSource = _a.dataSource,\n    _b = _a.rowKey,\n    rowKey = _b === void 0 ? 'id' : _b,\n    sourceId = _a.sourceId,\n    targetId = _a.targetId;\n  var brother = findBrother(dataSource, rowKey, sourceId);\n  return brother.some(function (t) {\n    return t[rowKey] === targetId;\n  });\n}"],"names":["findRecord","dataSource","rowKey","id","find","_dataSource","record","i","length","_item","Array","isArray","children","findBrother","res","flatDataSource","flatData","loop","push","swap","record1","record2","temp","JSON","parse","stringify","Object","assign","isSameLevel","_a","_b","sourceId","targetId","some","t"],"mappings":"AAQO,SAASA,WAAWC,EAAYC,EAAQC,GAmB7C,OAlBe,KAAA,IAAXD,IACFA,EAAS,MAEX,SAASE,EAAKC,GAEZ,IADA,IAAIC,EACKC,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,GAAIF,EAAYE,GAAGL,KAAYC,EAAI,CACjCG,EAASD,EAAYE,GACrB,KACF,CACA,IAAIE,EAAQJ,EAAYE,GACxB,GAAI,aAAcE,GAASC,MAAMC,QAAQF,EAAMG,QAAQ,GAAOH,EAAMG,SAASJ,SAC3EF,EAASF,EAAKK,EAAMG,QAAQ,GAChB,KAEhB,CACA,OAAON,CACT,EACYL,CAAU,CACxB,CAQO,SAASY,YAAYZ,EAAYC,EAAQC,GAmB9C,OAlBe,KAAA,IAAXD,IACFA,EAAS,MAEX,SAASE,EAAKC,GAEZ,IADA,IAAIS,EAAM,GACDP,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,GAAIF,EAAYE,GAAGL,KAAYC,EAAI,CACjCW,EAAMT,EACN,KACF,CACA,IAAII,EAAQJ,EAAYE,GACxB,GAAI,aAAcE,GAASC,MAAMC,QAAQF,EAAMG,QAAQ,GAAOH,EAAMG,SAASJ,SAC3EM,EAAMV,EAAKK,EAAMG,QAAQ,IACZE,EAAIN,OAAQ,KAE7B,CACA,OAAOM,CACT,EACYb,CAAU,CACxB,CAOO,SAASc,eAAed,GAC7B,IAAIe,EAAW,GAWf,OAVA,SAASC,EAAKZ,GACZ,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAYG,OAAQD,CAAC,GAAI,CAC3C,IAAID,EAASD,EAAYE,GACzBS,EAASE,KAAKZ,CAAM,EAChB,aAAcA,GAAUI,MAAMC,QAAQL,EAAOM,QAAQ,GAAON,EAAOM,UACrEK,EAAKX,EAAOM,QAAQ,CAExB,CACF,EACKX,CAAU,EACRe,CACT,CAOO,SAASG,KAAKC,EAASC,GAC5B,IAAIC,EAAOC,KAAKC,MAAMD,KAAKE,UAAUL,CAAO,CAAC,EAC7CM,OAAOC,OAAOP,EAASC,CAAO,EAC9BK,OAAOC,OAAON,EAASC,CAAI,CAC7B,CAUO,SAASM,YAAYC,GAC1B,IAAI5B,EAAa4B,EAAG5B,WAClB6B,EAAKD,EAAG3B,OACRA,EAAgB,KAAA,IAAP4B,EAAgB,KAAOA,EAChCC,EAAWF,EAAGE,SACdC,EAAWH,EAAGG,SAEhB,OADcnB,YAAYZ,EAAYC,EAAQ6B,CAAQ,EACvCE,KAAK,SAAUC,GAC5B,OAAOA,EAAEhC,KAAY8B,CACvB,CAAC,CACH,QAnGgBhC,WA4BAa,YA2BAE,eAoBAI,KAcAS,WAUhB"}