{"version":3,"file":"SearchEditorCellFactory.js","sources":["SearchEditorCellFactory.js"],"sourcesContent":["import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.map.delete-all.js\";\nimport \"core-js/modules/esnext.map.every.js\";\nimport \"core-js/modules/esnext.map.filter.js\";\nimport \"core-js/modules/esnext.map.find.js\";\nimport \"core-js/modules/esnext.map.find-key.js\";\nimport \"core-js/modules/esnext.map.includes.js\";\nimport \"core-js/modules/esnext.map.key-of.js\";\nimport \"core-js/modules/esnext.map.map-keys.js\";\nimport \"core-js/modules/esnext.map.map-values.js\";\nimport \"core-js/modules/esnext.map.merge.js\";\nimport \"core-js/modules/esnext.map.reduce.js\";\nimport \"core-js/modules/esnext.map.some.js\";\nimport \"core-js/modules/esnext.map.update.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { __assign, __extends, __spreadArray } from \"tslib\";\nimport moment from 'moment';\nexport default (function (SuperClass) {\n  return (\n    /** @class */\n    function (_super) {\n      __extends(class_1, _super);\n\n      function class_1(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * valueToFormItemValueMap\n         * @description 值和表单控件值之间的转换，现在只涉及到时间控件\n         */\n\n\n        _this.valueToFormItemValueMap = new Map([['rangePicker', function (_a) {\n          var record = _a.record,\n              dataIndex = _a.dataIndex;\n          var value = record === null || record === void 0 ? void 0 : record[dataIndex];\n          return Array.isArray(value) && value.length === 2 ? [moment(value[0]), moment(value[1])] : [moment(), moment()];\n        }], ['datePicker', function (_a) {\n          var record = _a.record,\n              dataIndex = _a.dataIndex;\n          var value = record === null || record === void 0 ? void 0 : record[dataIndex];\n          return moment(value);\n        }], ['timePicker', function (_a) {\n          var record = _a.record,\n              dataIndex = _a.dataIndex;\n          var value = record === null || record === void 0 ? void 0 : record[dataIndex];\n          return moment(value);\n        }]]);\n        _this.cellConfigReducers = __spreadArray(__spreadArray([], _this.cellConfigReducers, true), [_this.cellEditableReducer], false);\n        return _this;\n      }\n\n      class_1.prototype.onTableRowComponentReducers = function (columns) {\n        var existsEditor = columns.some(function (column) {\n          var _a;\n\n          return '$editable' in column && ((_a = column.$editable) === null || _a === void 0 ? void 0 : _a.editable);\n        });\n\n        if (existsEditor) {\n          return __spreadArray(__spreadArray([], this.tableRowComponentReducers, true), ['useEditableRow'], false);\n        }\n\n        return this.tableRowComponentReducers;\n      };\n\n      class_1.prototype.onTableCellComponentReducers = function (columns) {\n        var existsEditor = columns.some(function (column) {\n          var _a;\n\n          return '$editable' in column && ((_a = column.$editable) === null || _a === void 0 ? void 0 : _a.editable);\n        });\n\n        if (existsEditor) {\n          return __spreadArray(__spreadArray([], this.tableCellComponentReducers, true), ['useEditableCell'], false);\n        }\n\n        return this.tableCellComponentReducers;\n      };\n\n      class_1.prototype.onEditorRow = function (params) {\n        return {\n          editable: false\n        };\n      };\n\n      class_1.prototype.onEditorCell = function (params) {};\n      /**\n       * cellEditableReducer\n       * @description 可编辑单元格的onCell处理\n       * @param params\n       */\n\n\n      class_1.prototype.cellEditableReducer = function (params) {\n        var _a;\n\n        var rowIndex = params.rowIndex,\n            column = params.column,\n            record = params.record; // 如果设置了$editable则调用onEditorCell方法对每个cell进行props注入\n\n        if ('$editable' in column && ((_a = column.$editable) === null || _a === void 0 ? void 0 : _a.editable) && this.onEditorCell) {\n          this.onEditorCell({\n            rowIndex: rowIndex,\n            editorConfig: column.$editable,\n            record: __assign({}, record)\n          });\n          return column;\n        }\n\n        return column;\n      };\n      /**\n       * valueToFormItemValue\n       * @description 值和表单值的转换\n       */\n\n\n      class_1.prototype.valueToFormItemValue = function (_a) {\n        var type = _a.type,\n            record = _a.record,\n            dataIndex = _a.dataIndex;\n        var item = this.valueToFormItemValueMap.get(type);\n        return item ? item === null || item === void 0 ? void 0 : item({\n          record: record,\n          dataIndex: dataIndex\n        }) : record === null || record === void 0 ? void 0 : record[dataIndex];\n      };\n\n      return class_1;\n    }(SuperClass)\n  );\n});"],"names":["__assign","__extends","__spreadArray","moment","SuperClass","class_1","_super","prototype","onTableRowComponentReducers","columns","some","column","_a","$editable","editable","this","tableRowComponentReducers","onTableCellComponentReducers","tableCellComponentReducers","onEditorRow","params","onEditorCell","cellEditableReducer","rowIndex","record","editorConfig","valueToFormItemValue","type","dataIndex","item","valueToFormItemValueMap","get","props","_this","call","Map","value","Array","isArray","length","cellConfigReducers"],"mappings":"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"}