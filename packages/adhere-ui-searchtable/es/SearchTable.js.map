{"version":3,"file":"SearchTable.js","sources":["SearchTable.js"],"sourcesContent":["import _Table from \"antd/es/table\";\nimport _Button from \"antd/es/button\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { __assign, __extends, __spreadArray } from \"tslib\";\nimport classNames from 'classnames';\nimport cloneDeep from 'lodash.clonedeep';\nimport PropTypes from 'prop-types';\nimport React, { createContext, createRef } from 'react';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport Suspense from '@baifendian/adhere-ui-suspense';\nimport Intl from '@baifendian/adhere-util-intl';\nimport ColumnResizable, { SearchTableResizableObserver, SearchTableResizableTitle } from './Extension/ColumnResizable';\nimport ColumnSetting from './Extension/ColumnSetting';\nimport TableCell from './Extension/TableComponents/TableCell';\nimport TableRow from './Extension/TableComponents/TableRow';\nimport TableDensitySetting from './Extension/TableDensitySetting';\nimport { TableDensity } from './types';\nexport var selectorPrefix = 'adhere-ui-searchtable';\nvar Fixed = FlexLayout.Fixed,\n    Auto = FlexLayout.Auto;\nexport var SearchTableContext = /*#__PURE__*/createContext(null);\n/**\n * SearchTable\n * @class SearchTable\n * @classdesc SearchTable\n */\n\nvar SearchTable =\n/** @class */\nfunction (_super) {\n  __extends(SearchTable, _super);\n\n  function SearchTable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.tableWrapRef = /*#__PURE__*/createRef(); // 自定义表格部分\n\n    _this.components = {\n      header: {\n        cell: SearchTableResizableTitle\n      },\n      body: {\n        // 固定是这个组件\n        row: TableRow,\n        // 固定是这个组件\n        cell: TableCell\n      }\n    }; // 列拖动对象\n\n    _this.columnResizable = new ColumnResizable(); // 列属性监控对象\n\n    _this.columnObserver = null; // rowConfigReducers\n    // 给TableRow传递props的reducer\n\n    _this.rowConfigReducers = []; // cellConfigReducers\n    // 给TableCell传递props的reducer\n\n    _this.cellConfigReducers = []; // tableRowComponentReducers\n    // 处理TableRow的reducer\n\n    _this.tableRowComponentReducers = []; // tableCellComponentReducers\n    // 处理TableCell的reducer\n\n    _this.tableCellComponentReducers = [];\n    /**\n     * onTableChange\n     * @description 表格change\n     */\n\n    _this.onTableChange = function (pagination, filters, sorter) {\n      var _a;\n\n      _this.setState((_a = {}, _a[_this.getOrderFieldProp()] = sorter.field || _this.getOrderFieldValue(), _a[_this.getOrderProp()] = sorter.order || _this.getOrderPropValue(), _a), function () {\n        var order = sorter.order;\n        if (!order) return;\n\n        _this.fetchData();\n\n        _this.onSubTableChange(pagination, filters, sorter);\n      });\n    }; // @ts-ignore\n\n\n    _this.state = {\n      page: 1,\n      limit: _this.getLimit(),\n      expand: props.defaultExpandSearchCollapse,\n      scrollY: 0\n    };\n    Object.assign(_this.state, {\n      // 列设置\n      columnSetting: _this.getTableColumns().map(function (column, index) {\n        return __assign(__assign({}, column), {\n          sort: index,\n          display: true\n        });\n      }),\n      // 表格密度设置\n      tableDensity: _this.getTableDensity()\n    });\n    _this.onClear = _this.onClear.bind(_this);\n    return _this;\n  }\n\n  SearchTable.prototype.componentWillReceiveProps = function (nextProps) {\n    _super.prototype.componentWillReceiveProps.call(this, nextProps);\n\n    this.columnSettingEffect(nextProps);\n  };\n\n  SearchTable.prototype.componentDidUpdate = function (prevProps, prevState, snapshot) {\n    if (!this.tableWrapRef.current) return;\n    this.searchTableResizableEffectLayout();\n    this.fixedHeaderAutoTableEffectLayout(prevProps, prevState);\n  };\n  /**\n   * searchTableResizableEffectLayout\n   * @protected\n   */\n\n\n  SearchTable.prototype.searchTableResizableEffectLayout = function () {\n    // 监控header的属性变化(colgroup)\n    if (!this.columnObserver) {\n      this.columnObserver = SearchTableResizableObserver(this);\n    }\n  };\n  /**\n   * fixedHeaderAutoTableEffectLayout\n   * @protected\n   */\n\n\n  SearchTable.prototype.fixedHeaderAutoTableEffectLayout = function (prevProps, prevState) {\n    var _a, _b;\n\n    if (this.props.fixedHeaderAutoTable) {\n      var dataSource = this.getData();\n\n      if (dataSource && dataSource.length && (prevState.scrollY === 0 && this.state.scrollY === 0 || prevState.scrollY !== this.state.scrollY || prevState.expand !== this.state.expand)) {\n        var tableWrapRef = this.tableWrapRef.current;\n        var tableHeaderHeight = ((_a = tableWrapRef.querySelector('.ant-table-header')) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\n        var tablePaginationHeight = ((_b = tableWrapRef.querySelector('.ant-table-pagination')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\n        this.setState({\n          scrollY: tableWrapRef.clientHeight - (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0))\n        });\n      }\n    }\n  };\n  /**\n   * columnSettingEffect\n   * @param props\n   * @protected\n   */\n\n\n  SearchTable.prototype.columnSettingEffect = function (props) {\n    var _this = this;\n\n    var _a, _b;\n\n    var preColumnSetting = this.state.columnSetting || [];\n    var columnSetting = this.getTableColumns().map(function (column, index) {\n      return __assign(__assign({}, column), {\n        sort: index,\n        display: true\n      });\n    }); // 长度不相等\n\n    if ((preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.length) !== columnSetting.length) {\n      this.setState({\n        columnSetting: columnSetting\n      });\n      return;\n    }\n\n    var preColumnSettingRowKeys = (_a = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.map) === null || _a === void 0 ? void 0 : _a.call(preColumnSetting, function (t) {\n      return t[_this.getRowKey()];\n    });\n    var columnSettingRowKeys = (_b = columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map) === null || _b === void 0 ? void 0 : _b.call(columnSetting, function (t) {\n      return t[_this.getRowKey()];\n    }); // 长度相等但是key有变化\n\n    if ((preColumnSettingRowKeys === null || preColumnSettingRowKeys === void 0 ? void 0 : preColumnSettingRowKeys.toString()) !== columnSettingRowKeys.toString()) {\n      var rowKey_1 = this.getRowKey() || 'id';\n      this.setState({\n        columnSetting: columnSetting === null || columnSetting === void 0 ? void 0 : columnSetting.map(function (t) {\n          var item = preColumnSetting === null || preColumnSetting === void 0 ? void 0 : preColumnSetting.find(function (item) {\n            return item[rowKey_1] === t[rowKey_1];\n          });\n          return __assign(__assign({}, t), {\n            display: item ? item.display : true\n          });\n        })\n      });\n    }\n  };\n  /**\n   * onSearchPanelCollapse\n   * @description 查询面板展开之前\n   * @protected\n   */\n\n\n  SearchTable.prototype.onSearchPanelCollapseBefore = function () {};\n  /**\n   * onSearchPanelCollapseAfter\n   * @description 查询面板展开之后\n   * @protected\n   */\n\n\n  SearchTable.prototype.onSearchPanelCollapseAfter = function () {};\n  /**\n   * onClear\n   * @description - 清除操作\n   */\n\n\n  SearchTable.prototype.onClear = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      _this.setState({\n        page: 1,\n        limit: _this.getLimit()\n      }, function () {\n        _this.clear().then(function () {\n          _this.fetchData();\n\n          resolve();\n        });\n      });\n    });\n  };\n  /**\n   * sortOrder\n   * @description table的column中加入\n   * sorter: true,\n   * sortOrder: this.sortOrder('distance'),\n   * @param columnName\n   * @return {*}\n   */\n\n\n  SearchTable.prototype.sortOrder = function (columnName) {\n    if (!this.state) return '';\n    return this.state[this.getOrderFieldProp()] === columnName ? this.state[this.getOrderProp()] : '';\n  };\n  /**\n   * onCellConfigReducers\n   * @description 所有onCell的处理\n   * @return ColumnTypeExt\n   */\n\n\n  SearchTable.prototype.onCellConfigReducers = function (params) {\n    var _this = this;\n\n    var rowIndex = params.rowIndex,\n        column = params.column,\n        record = params.record,\n        columns = params.columns;\n    return this.cellConfigReducers.reduce(function (params, reducer) {\n      params.value = reducer.call(_this, {\n        rowIndex: rowIndex,\n        record: record,\n        columns: columns,\n        column: params.value\n      });\n      return params;\n    }, {\n      value: column\n    }).value;\n  };\n  /**\n   * onRowConfigReducers\n   * @description 所有row的处理\n   * @param params\n   */\n\n\n  SearchTable.prototype.onRowConfigReducers = function (params) {\n    var _this = this;\n\n    var rowIndex = params.rowIndex,\n        record = params.record,\n        columns = params.columns; // const reducers = [this.rowEditableReducer];\n\n    return this.rowConfigReducers.reduce(function (params, reducer) {\n      params.value = reducer.call(_this, {\n        rowIndex: rowIndex,\n        record: record,\n        columns: columns,\n        rowConfig: params.value\n      });\n      return params;\n    }, {\n      value: {}\n    }).value;\n  };\n  /**\n   * getLimit\n   * @description limit参数\n   */\n\n\n  SearchTable.prototype.getLimit = function () {\n    return 10;\n  };\n  /**\n   * getPagination\n   * @description 获取分页信息\n   */\n\n\n  SearchTable.prototype.getPagination = function () {\n    var _this = this;\n\n    return {\n      onChange: function onChange(page, limit) {\n        _this.setState({\n          page: page,\n          limit: limit\n        }, function () {\n          _this.fetchData();\n        });\n      },\n      onShowSizeChange: function onShowSizeChange(page, limit) {\n        _this.setState({\n          page: page,\n          limit: limit\n        }, function () {\n          _this.fetchData();\n        });\n      },\n      showTotal: function showTotal(total\n      /* [page, pageSize] */\n      ) {\n        return Intl.v(\"\\u5F53\\u524D {page}-{pageSize}/\\u5171 {total}\\u6761\", {\n          page: _this.state.page,\n          pageSize: _this.state.limit,\n          total: total\n        });\n      },\n      total: this.getTotal(),\n      current: this.state.page,\n      pageSize: this.state.limit,\n      showQuickJumper: true\n    };\n  };\n  /**\n   * getTableDensity\n   * @description 表格密度\n   */\n\n\n  SearchTable.prototype.getTableDensity = function () {\n    return TableDensity.DEFAULT;\n  };\n  /**\n   * getTableColumns\n   * @description 获取表格的列数据\n   * @return Array<any>\n   */\n\n\n  SearchTable.prototype.getTableColumns = function () {\n    var _this = this;\n\n    var _a;\n\n    var isShowNumber = this.isShowNumber();\n    var getTableNumberColumnWidth = this.getTableNumberColumnWidth(); // 对权限进行过滤\n\n    var columns = this.getColumns().filter(function (column) {\n      var _a;\n\n      if ('$hide' in column && !column.$hide) return false;\n      if ('$authorized' in column) return (_a = column === null || column === void 0 ? void 0 : column.$authorized) === null || _a === void 0 ? void 0 : _a.call(column);\n      return true;\n    }) // $resizable 设置\n    .map(function (column, index) {\n      if ('$resizable' in column && !!(column === null || column === void 0 ? void 0 : column.$resizable)) {\n        return _this.columnResizable.searchTableResizableColumnItem(_this, index, column);\n      }\n\n      return column;\n    }).map(function (column, index) {\n      return __assign(__assign({}, column), {\n        // 每个单元格都会调用\n        // 给TableCell传递的props参数\n        onCell: function onCell(record, rowIndex) {\n          var _column = cloneDeep(column);\n\n          return {\n            // 行的索引\n            rowIndex: rowIndex,\n            // 行的数据\n            record: record,\n            // 列的配置\n            column: _this.onCellConfigReducers({\n              rowIndex: rowIndex,\n              column: _column,\n              record: record,\n              columns: columns\n            }),\n            // 所有列的配置\n            columns: columns\n          };\n        }\n      });\n    });\n\n    if (isShowNumber) {\n      var numberGeneratorRule_1 = (_a = this.getNumberGeneratorRule()) !== null && _a !== void 0 ? _a : SearchTable.NUMBER_GENERATOR_RULE_ALONE;\n      var _b = this.state,\n          _c = _b.page,\n          page_1 = _c === void 0 ? 0 : _c,\n          _d = _b.limit,\n          limit_1 = _d === void 0 ? 10 : _d;\n      return [__assign(__assign({}, this.getTableNumberColumnProps ? this.getTableNumberColumnProps() || {} : {}), {\n        title: Intl.v('序号'),\n        dataIndex: '_number',\n        key: '_number',\n        align: 'center',\n        width: getTableNumberColumnWidth !== null && getTableNumberColumnWidth !== void 0 ? getTableNumberColumnWidth : 80,\n        render: function render(v, r, index) {\n          return /*#__PURE__*/React.createElement(ConditionalRender, {\n            conditional: numberGeneratorRule_1 === SearchTable.NUMBER_GENERATOR_RULE_ALONE,\n            noMatch: function noMatch() {\n              return _this.renderTableNumberColumn((page_1 - 1) * limit_1 + (index + 1), {\n                value: v,\n                record: r,\n                index: index\n              });\n            }\n          }, function () {\n            return _this.renderTableNumberColumn(index + 1, {\n              value: v,\n              record: r,\n              index: index\n            });\n          });\n        }\n      })].concat(columns);\n    }\n\n    return columns;\n  };\n  /**\n   * getTableRowComponentReducers\n   */\n\n\n  SearchTable.prototype.getTableRowComponentReducers = function () {\n    return this.tableRowComponentReducers;\n  };\n  /**\n   * getTableCellComponentReducers\n   */\n\n\n  SearchTable.prototype.getTableCellComponentReducers = function () {\n    return this.tableCellComponentReducers;\n  };\n  /**\n   * renderTableNumberColumn\n   * @description - 渲染序号列\n   * @param number\n   * @param params\n   * @protected\n   */\n\n\n  SearchTable.prototype.renderTableNumberColumn = function (number, params) {\n    if (number === void 0) {\n      number = '';\n    }\n\n    return /*#__PURE__*/React.createElement(\"span\", null, number);\n  };\n  /**\n   * renderColumnSetting\n   * @description 创建列设置组件\n   */\n\n\n  SearchTable.prototype.renderColumnSetting = function () {\n    var _this = this;\n\n    var columns = __spreadArray([], this.state.columnSetting, true);\n\n    columns.sort(function (c1, c2) {\n      if (c1.sort > c2.sort) return 1;\n      if (c1.sort < c2.sort) return -1;\n      return 0;\n    });\n    return /*#__PURE__*/React.createElement(ColumnSetting, {\n      columns: columns,\n      onShowColumns: function onShowColumns(checked) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (column) {\n              return __assign(__assign({}, column), {\n                display: checked\n              });\n            })\n          };\n        });\n      },\n      onReset: function onReset() {\n        _this.setState(function () {\n          return {\n            columnSetting: _this.getTableColumns().map(function (column, index) {\n              return __assign(__assign({}, column), {\n                display: true,\n                sort: index\n              });\n            })\n          };\n        });\n      },\n      onDisplayColumn: function onDisplayColumn(column, checked) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (_column) {\n              return __assign(__assign({}, _column), {\n                display: _column.key === column.key ? checked : _column.display\n              });\n            })\n          };\n        });\n      },\n      onSortEnd: function onSortEnd(map) {\n        _this.setState(function (_a) {\n          var _b;\n\n          var columnSetting = _a.columnSetting;\n          return {\n            columnSetting: (_b = columnSetting || []) === null || _b === void 0 ? void 0 : _b.map(function (column) {\n              return __assign(__assign({}, column), {\n                sort: map.get(column.key)\n              });\n            })\n          };\n        });\n      }\n    });\n  };\n  /**\n   * renderTableDensitySetting\n   * @description 表格密度设置\n   */\n\n\n  SearchTable.prototype.renderTableDensitySetting = function () {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(TableDensitySetting, {\n      density: this.state.tableDensity,\n      onChange: function onChange(density) {\n        _this.setState({\n          tableDensity: density\n        });\n      },\n      onReset: function onReset() {\n        _this.setState({\n          tableDensity: _this.getTableDensity()\n        });\n      }\n    });\n  };\n  /**\n   * renderSearchFooter\n   * @description 渲染查询工具栏\n   * @return ReactElement\n   */\n\n\n  SearchTable.prototype.renderSearchFooter = function () {\n    var _this = this;\n\n    var isShowExpandSearch = this.props.isShowExpandSearch;\n    var defaultItems = [/*#__PURE__*/React.createElement(_Button, {\n      className: \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n      type: \"primary\",\n      key: \"search\",\n      icon: /*#__PURE__*/React.createElement(\"i\", {\n        className: classNames(\"\".concat(selectorPrefix, \"-searchfooteritem-search-btn-icon\"), 'iconfont iconsousuo')\n      }),\n      onClick: function onClick() {\n        _this.setState({\n          page: 1\n        }, function () {\n          _this.onSearch();\n        });\n      }\n    }, Intl.v('查询')), /*#__PURE__*/React.createElement(_Button, {\n      className: \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n      key: \"reset\",\n      onClick: this.onClear\n    }, Intl.v('重置'))];\n\n    if (isShowExpandSearch) {\n      defaultItems.push( /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: this.state.expand,\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(\"a\", {\n            key: \"expand\",\n            className: \"\".concat(selectorPrefix, \"-searchfooteritem-expand-search-up-btn\"),\n            onClick: function onClick() {\n              _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n\n              _this.setState({\n                expand: true\n              }, function () {\n                return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n              });\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", null, Intl.v('展开')), /*#__PURE__*/React.createElement(\"i\", {\n            className: \"iconfont iconup\"\n          }));\n        }\n      }, function () {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: \"hide\",\n          className: \"\".concat(selectorPrefix, \"-searchfooteritem-expand-search-down-btn\"),\n          onClick: function onClick() {\n            _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n\n            _this.setState({\n              expand: false\n            }, function () {\n              return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n            });\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", null, Intl.v('关闭')), /*#__PURE__*/React.createElement(\"i\", {\n          className: \"iconfont icondownarrow\"\n        }));\n      }));\n    }\n\n    var items = this.renderSearchFooterItems(defaultItems) || __spreadArray([], defaultItems, true);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-searchfooterwrapper\")\n    }, items.map(function (t, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"\".concat(selectorPrefix, \"-searchfooteritem\")\n      }, t);\n    }));\n  };\n  /**\n   * renderTable\n   * @description - 认选表格体\n   * @protected\n   */\n\n\n  SearchTable.prototype.renderTable = function () {\n    var _this = this;\n\n    var _a = this.props,\n        antdTableProps = _a.antdTableProps,\n        fixedHeaderAutoTable = _a.fixedHeaderAutoTable;\n    var _b = this.state,\n        _c = _b.columnSetting,\n        columnSetting = _c === void 0 ? [] : _c,\n        tableDensity = _b.tableDensity;\n    var columns = this.getTableColumns().map(function (column, index) {\n      return __assign(__assign({}, columnSetting[index]), column);\n    }).filter(function (column) {\n      return column.display;\n    });\n    columns.sort(function (c1, c2) {\n      if (c1.sort > c2.sort) return 1;\n      if (c1.sort < c2.sort) return -1;\n      return 0;\n    }); // Table的antdProps配置\n\n    var tableProps = __assign({\n      rowKey: this.getRowKey(),\n      dataSource: this.getData(),\n      columns: columns,\n      onChange: this.onTableChange,\n      pagination: this.getPagination(),\n      rowSelection: this.getRowSelection(),\n      size: tableDensity,\n      // 组件\n      components: this.components,\n      // onRow\n      // 给TableRow的props参数\n      onRow: function onRow(record, rowIndex) {\n        // 这块可能以后会有很多操作\n        // 行的所有操作都可以在这里处理\n        return {\n          record: record,\n          rowIndex: rowIndex,\n          columns: columns,\n          rowKey: _this.getRowKey(),\n          rowConfig: _this.onRowConfigReducers({\n            rowIndex: Number(rowIndex),\n            record: record,\n            columns: columns\n          })\n        };\n      }\n    }, antdTableProps || {}); // 是否支持锁定列头，表格体滚动\n\n\n    if (fixedHeaderAutoTable) {\n      var scrollY_1 = this.state.scrollY;\n\n      if (antdTableProps) {\n        if (antdTableProps.scroll) {\n          tableProps.scroll.y = scrollY_1;\n        } else {\n          tableProps.scroll = {\n            y: scrollY_1\n          };\n        }\n      } else {\n        tableProps.scroll = {\n          y: scrollY_1\n        };\n      }\n    }\n\n    this.tableRowComponentReducers = this.onTableRowComponentReducers(columns);\n    this.tableCellComponentReducers = this.onTableCellComponentReducers(columns);\n    return /*#__PURE__*/React.createElement(_Table, __assign({}, tableProps));\n  };\n  /**\n   * renderInner\n   * @description 渲染SearchTable\n   * @return ReactElement | null\n   */\n\n\n  SearchTable.prototype.renderInner = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        style = _a.style,\n        tableClassName = _a.tableClassName,\n        tableStyle = _a.tableStyle,\n        searchClassName = _a.searchClassName,\n        searchStyle = _a.searchStyle,\n        fitSearch = _a.fitSearch,\n        fitTable = _a.fitTable,\n        autoFixed = _a.autoFixed,\n        fixedTableSpaceBetween = _a.fixedTableSpaceBetween;\n    var _b = this.state.expand,\n        expand = _b === void 0 ? false : _b;\n    return /*#__PURE__*/React.createElement(FlexLayout, {\n      direction: \"vertical\",\n      className: classNames(selectorPrefix, fixedTableSpaceBetween ? 'fixedtablespacebetween' : '', className || ''),\n      style: __assign({}, style || {})\n    }, /*#__PURE__*/React.createElement(Fixed, {\n      className: classNames(\"\".concat(selectorPrefix, \"-searchwrapper\"), searchClassName || ''),\n      style: __assign({}, searchStyle || {}),\n      fit: fitSearch\n    }, /*#__PURE__*/React.createElement(FlexLayout, {\n      direction: \"vertical\"\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !!this.renderSearchFormBefore\n    }, function () {\n      return /*#__PURE__*/React.createElement(Fixed, null, _this.renderSearchFormBefore());\n    }), /*#__PURE__*/React.createElement(Fixed, null, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: expand,\n      noMatch: function noMatch() {\n        return null;\n      }\n    }, function () {\n      return _this.renderSearchForm();\n    })), /*#__PURE__*/React.createElement(Fixed, null, this.renderSearchFooter()), /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !!this.renderSearchFormAfter\n    }, function () {\n      return /*#__PURE__*/React.createElement(Fixed, null, _this.renderSearchFormAfter());\n    }))), /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !!this.renderTableHeader\n    }, function () {\n      return /*#__PURE__*/React.createElement(Fixed, null, _this.renderTableHeader());\n    }), /*#__PURE__*/React.createElement(Auto, {\n      className: classNames(\"\".concat(selectorPrefix, \"-autowrapper\"), tableClassName || '', autoFixed ? 'autofixed' : ''),\n      style: __assign({}, tableStyle || {}),\n      fit: fitTable,\n      autoFixed: autoFixed\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.tableWrapRef,\n      className: \"\".concat(selectorPrefix, \"-tablewrapper\")\n    }, this.renderTable())), /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !!this.renderTableFooter\n    }, function () {\n      return /*#__PURE__*/React.createElement(Fixed, null, _this.renderTableFooter());\n    }));\n  };\n\n  SearchTable.prototype.renderChildren = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-wrap\")\n    }, _super.prototype.render.call(this));\n  };\n  /**\n   * render\n   * @protected\n   */\n\n\n  SearchTable.prototype.render = function () {\n    return /*#__PURE__*/React.createElement(SearchTableContext.Provider, {\n      value: {\n        context: this\n      }\n    }, this.renderChildren());\n  }; // 序号生成的规则 - 单独模式\n\n\n  SearchTable.NUMBER_GENERATOR_RULE_ALONE = Symbol(); // 序号生成的规则 - 连续模式\n\n  SearchTable.NUMBER_GENERATOR_RULE_CONTINUITY = Symbol(); // 全选的规则 - 标准模式(不能跨页)\n\n  SearchTable.ROW_SELECTION_NORMAL_MODE = Symbol(); // 全选的规则 - 可以跨页\n\n  SearchTable.ROW_SELECTION_CONTINUOUS_MODE = Symbol();\n  return SearchTable;\n}(Suspense);\n\nexport var defaultProps = {\n  className: '',\n  style: {},\n  tableClassName: '',\n  tableStyle: {},\n  searchClassName: '',\n  searchStyle: {},\n  // 第一次\n  isFirst: true,\n  // 第一次加载\n  isFirstLoading: null,\n  antdTableProps: {},\n  isShowExpandSearch: true,\n  defaultExpandSearchCollapse: true,\n  fitSearch: true,\n  fitTable: true,\n  autoFixed: true,\n  fixedHeaderAutoTable: false,\n  fixedTableSpaceBetween: false\n};\nexport var propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  tableClassName: PropTypes.string,\n  tableStyle: PropTypes.object,\n  searchClassName: PropTypes.string,\n  searchStyle: PropTypes.object,\n  reset: PropTypes.bool,\n  firstLoading: PropTypes.node,\n  // antdTable的Props\n  antdTableProps: PropTypes.object,\n  // 是否有展开和收缩的功能\n  isShowExpandSearch: PropTypes.bool,\n  // 展开和收缩的默认状态\n  defaultExpandSearchCollapse: PropTypes.bool,\n  // 撑开search\n  fitSearch: PropTypes.bool,\n  // 撑开表格\n  fitTable: PropTypes.bool,\n  // 是否是查询固定，表格自适应\n  autoFixed: PropTypes.bool,\n  // 锁定列头，表格滚动\n  fixedHeaderAutoTable: PropTypes.bool,\n  // 两端固定(表格的头始终在上方，分页始终在下方)\n  fixedTableSpaceBetween: PropTypes.bool\n};\nSearchTable.defaultProps = defaultProps;\nSearchTable.propTypes = propTypes;\nexport default SearchTable;"],"names":["_Table","_Button","__assign","__extends","__spreadArray","classNames","cloneDeep","PropTypes","React","createContext","createRef","ConditionalRender","FlexLayout","Suspense","Intl","ColumnResizable","SearchTableResizableObserver","SearchTableResizableTitle","ColumnSetting","TableCell","TableRow","TableDensitySetting","TableDensity","selectorPrefix","Fixed","Auto","SearchTableContext","SearchTable","_super","props","_this","call","this","tableWrapRef","components","header","cell","body","row","columnResizable","columnObserver","rowConfigReducers","cellConfigReducers","tableRowComponentReducers","tableCellComponentReducers","onTableChange","pagination","filters","sorter","_a","setState","getOrderFieldProp","field","getOrderFieldValue","getOrderProp","order","getOrderPropValue","fetchData","onSubTableChange","state","page","limit","getLimit","expand","defaultExpandSearchCollapse","scrollY","Object","assign","columnSetting","getTableColumns","map","column","index","sort","display","tableDensity","getTableDensity","onClear","bind","prototype","componentWillReceiveProps","nextProps","columnSettingEffect","componentDidUpdate","prevProps","prevState","snapshot","current","searchTableResizableEffectLayout","fixedHeaderAutoTableEffectLayout","tablePaginationHeight","fixedHeaderAutoTable","dataSource","getData","length","tableHeaderHeight","querySelector","offsetHeight","_b","clientHeight","preColumnSettingRowKeys","columnSettingRowKeys","rowKey_1","preColumnSetting","t","getRowKey","toString","item","find","onSearchPanelCollapseBefore","onSearchPanelCollapseAfter","Promise","resolve","clear","then","sortOrder","columnName","onCellConfigReducers","params","rowIndex","record","columns","reduce","reducer","value","onRowConfigReducers","rowConfig","getPagination","onChange","onShowSizeChange","showTotal","total","v","pageSize","getTotal","showQuickJumper","DEFAULT","numberGeneratorRule_1","page_1","_d","limit_1","isShowNumber","getTableNumberColumnWidth","getColumns","filter","$hide","$authorized","$resizable","searchTableResizableColumnItem","onCell","_column","getNumberGeneratorRule","NUMBER_GENERATOR_RULE_ALONE","_c","getTableNumberColumnProps","title","dataIndex","key","align","width","render","r","createElement","conditional","noMatch","renderTableNumberColumn","concat","getTableRowComponentReducers","getTableCellComponentReducers","number","renderColumnSetting","c1","c2","onShowColumns","checked","onReset","onDisplayColumn","onSortEnd","get","renderTableDensitySetting","density","renderSearchFooter","isShowExpandSearch","defaultItems","className","type","icon","onClick","onSearch","items","push","renderSearchFooterItems","renderTable","antdTableProps","tableProps","rowKey","rowSelection","getRowSelection","size","onRow","Number","scrollY_1","scroll","y","onTableRowComponentReducers","onTableCellComponentReducers","renderInner","style","tableClassName","tableStyle","searchClassName","searchStyle","fitSearch","fitTable","autoFixed","fixedTableSpaceBetween","direction","fit","renderSearchFormBefore","renderSearchForm","renderSearchFormAfter","renderTableHeader","ref","renderTableFooter","renderChildren","Provider","context","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","ROW_SELECTION_NORMAL_MODE","ROW_SELECTION_CONTINUOUS_MODE","defaultProps","isFirst","isFirstLoading","propTypes","string","object","reset","bool","firstLoading","node"],"mappings":"OAAOA,WAAY,uBACZC,YAAa,uBACb,4CACA,wCACA,+CACA,+CACA,yCACA,sCACA,2CACA,2CACA,2CACA,yCACA,iDACA,qCACA,kDACEC,SAAUC,UAAWC,aAA4B,KAAP,eAC5CC,eAAgB,oBAChBC,cAAe,0BACfC,cAAe,oBACfC,OAASC,cAAeC,SAAwB,KAAP,eACzCC,sBAAuB,iDACvBC,eAAgB,0CAChBC,aAAc,wCACdC,SAAU,sCACVC,iBAAmBC,6BAA8BC,yBAA8D,KAA7B,qCAClFC,kBAAmB,mCACnBC,cAAe,+CACfC,aAAc,8CACdC,wBAAyB,yCACvBC,YAA6B,KAAT,UACtB,IAAIC,eAAiB,wBACxBC,MAAQZ,WAAWY,MACnBC,KAAOb,WAAWa,KACXC,mBAAkCjB,cAAc,IAAI,EAO3DkB,YAEJ,SAAUC,GAGR,SAASD,EAAYE,GACnB,IAAIC,EAAQF,EAAOG,KAAKC,KAAMH,CAAK,GAAKG,KAoExC,OAlEAF,EAAMG,aAA4BvB,UAAU,EAE5CoB,EAAMI,WAAa,CACjBC,OAAQ,CACNC,KAAMnB,yBACR,EACAoB,KAAM,CAEJC,IAAKlB,SAELgB,KAAMjB,SACR,CACF,EAEAW,EAAMS,gBAAkB,IAAIxB,gBAE5Be,EAAMU,eAAiB,KAGvBV,EAAMW,kBAAoB,GAG1BX,EAAMY,mBAAqB,GAG3BZ,EAAMa,0BAA4B,GAGlCb,EAAMc,2BAA6B,GAMnCd,EAAMe,cAAgB,SAAUC,EAAYC,EAASC,GACnD,IAAIC,EAEJnB,EAAMoB,WAAUD,EAAK,IAAOnB,EAAMqB,kBAAkB,GAAKH,EAAOI,OAAStB,EAAMuB,mBAAmB,EAAGJ,EAAGnB,EAAMwB,aAAa,GAAKN,EAAOO,OAASzB,EAAM0B,kBAAkB,EAAGP,GAAK,WAClKD,EAAOO,QAGnBzB,EAAM2B,UAAU,EAEhB3B,EAAM4B,iBAAiBZ,EAAYC,EAASC,CAAM,EACpD,CAAC,CACH,EAGAlB,EAAM6B,MAAQ,CACZC,KAAM,EACNC,MAAO/B,EAAMgC,SAAS,EACtBC,OAAQlC,EAAMmC,4BACdC,QAAS,CACX,EACAC,OAAOC,OAAOrC,EAAM6B,MAAO,CAEzBS,cAAetC,EAAMuC,gBAAgB,EAAEC,IAAI,SAAUC,EAAQC,GAC3D,OAAOtE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CACpCE,KAAMD,EACNE,QAAS,CAAA,CACX,CAAC,CACH,CAAC,EAEDC,aAAc7C,EAAM8C,gBAAgB,CACtC,CAAC,EACD9C,EAAM+C,QAAU/C,EAAM+C,QAAQC,KAAKhD,CAAK,EACjCA,CACT,CA4tBA,OApyBA3B,UAAUwB,EAAaC,CAAM,EA0E7BD,EAAYoD,UAAUC,0BAA4B,SAAUC,GAC1DrD,EAAOmD,UAAUC,0BAA0BjD,KAAKC,KAAMiD,CAAS,EAE/DjD,KAAKkD,oBAAoBD,CAAS,CACpC,EAEAtD,EAAYoD,UAAUI,mBAAqB,SAAUC,EAAWC,EAAWC,GACpEtD,KAAKC,aAAasD,UACvBvD,KAAKwD,iCAAiC,EACtCxD,KAAKyD,iCAAiCL,EAAWC,CAAS,EAC5D,EAOA1D,EAAYoD,UAAUS,iCAAmC,WAElDxD,KAAKQ,iBACRR,KAAKQ,eAAiBxB,6BAA6BgB,IAAI,EAE3D,EAOAL,EAAYoD,UAAUU,iCAAmC,SAAUL,EAAWC,GAC5E,IAMQpD,EAEAyD,EANJ1D,KAAKH,MAAM8D,uBACTC,EAAa5D,KAAK6D,QAAQ,IAEZD,EAAWE,SAAiC,IAAtBT,EAAUpB,SAAwC,IAAvBjC,KAAK2B,MAAMM,SAAiBoB,EAAUpB,UAAYjC,KAAK2B,MAAMM,SAAWoB,EAAUtB,SAAW/B,KAAK2B,MAAMI,UAErKgC,GAAqB,OAAC9C,GADtBhB,EAAeD,KAAKC,aAAasD,SACOS,cAAc,mBAAmB,GAA+B,KAAA,EAAS/C,EAAGgD,eAAiB,EACrIP,GAAyB,OAACQ,EAAKjE,EAAa+D,cAAc,uBAAuB,GAA+B,KAAA,EAASE,EAAGD,eAAiB,EACjJjE,KAAKkB,SAAS,CACZe,QAAShC,EAAakE,cAAgBJ,GAAqBL,EAAwBA,EAAwB,GAAS,GACtH,CAAC,EAGP,EAQA/D,EAAYoD,UAAUG,oBAAsB,SAAUrD,GACpD,IAmBIuE,EAGAC,EAKEC,EA3BFxE,EAAQE,KAIRuE,EAAmBvE,KAAK2B,MAAMS,eAAiB,GAC/CA,EAAgBpC,KAAKqC,gBAAgB,EAAEC,IAAI,SAAUC,EAAQC,GAC/D,OAAOtE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CACpCE,KAAMD,EACNE,QAAS,CAAA,CACX,CAAC,CACH,CAAC,GAEI6B,MAAAA,EAA2D,KAAA,EAASA,EAAiBT,UAAY1B,EAAc0B,OAClH9D,KAAKkB,SAAS,CACZkB,cAAeA,CACjB,CAAC,GAICgC,EAA0B,OAACnD,EAAKsD,MAAAA,EAA2D,KAAA,EAASA,EAAiBjC,KAAiC,KAAA,EAASrB,EAAGlB,KAAKwE,EAAkB,SAAUC,GACrM,OAAOA,EAAE1E,EAAM2E,UAAU,EAC3B,CAAC,EACGJ,EAAuB,OAACH,EAAK9B,MAAAA,EAAqD,KAAA,EAASA,EAAcE,KAAiC,KAAA,EAAS4B,EAAGnE,KAAKqC,EAAe,SAAUoC,GACtL,OAAOA,EAAE1E,EAAM2E,UAAU,EAC3B,CAAC,GAEIL,MAAAA,EAAyE,KAAA,EAASA,EAAwBM,SAAS,KAAOL,EAAqBK,SAAS,IACvJJ,EAAWtE,KAAKyE,UAAU,GAAK,KACnCzE,KAAKkB,SAAS,CACZkB,cAAeA,MAAAA,EAAqD,KAAA,EAASA,EAAcE,IAAI,SAAUkC,GACvG,IAAIG,EAAOJ,MAAAA,EAA2D,KAAA,EAASA,EAAiBK,KAAK,SAAUD,GAC7G,OAAOA,EAAKL,KAAcE,EAAEF,EAC9B,CAAC,EACD,OAAOpG,SAASA,SAAS,GAAIsG,CAAC,EAAG,CAC/B9B,QAASiC,CAAAA,GAAOA,EAAKjC,OACvB,CAAC,CACH,CAAC,CACH,CAAC,GAEL,EAQA/C,EAAYoD,UAAU8B,4BAA8B,aAQpDlF,EAAYoD,UAAU+B,2BAA6B,aAOnDnF,EAAYoD,UAAUF,QAAU,WAC9B,IAAI/C,EAAQE,KAEZ,OAAO,IAAI+E,QAAQ,SAAUC,GAC3BlF,EAAMoB,SAAS,CACbU,KAAM,EACNC,MAAO/B,EAAMgC,SAAS,CACxB,EAAG,WACDhC,EAAMmF,MAAM,EAAEC,KAAK,WACjBpF,EAAM2B,UAAU,EAEhBuD,EAAQ,CACV,CAAC,CACH,CAAC,CACH,CAAC,CACH,EAWArF,EAAYoD,UAAUoC,UAAY,SAAUC,GAC1C,OAAKpF,KAAK2B,OACH3B,KAAK2B,MAAM3B,KAAKmB,kBAAkB,KAAOiE,EAAapF,KAAK2B,MAAM3B,KAAKsB,aAAa,GADlE,EAE1B,EAQA3B,EAAYoD,UAAUsC,qBAAuB,SAAUC,GACrD,IAAIxF,EAAQE,KAERuF,EAAWD,EAAOC,SAClBhD,EAAS+C,EAAO/C,OAChBiD,EAASF,EAAOE,OAChBC,EAAUH,EAAOG,QACrB,OAAOzF,KAAKU,mBAAmBgF,OAAO,SAAUJ,EAAQK,GAOtD,OANAL,EAAOM,MAAQD,EAAQ5F,KAAKD,EAAO,CACjCyF,SAAUA,EACVC,OAAQA,EACRC,QAASA,EACTlD,OAAQ+C,EAAOM,KACjB,CAAC,EACMN,CACT,EAAG,CACDM,MAAOrD,CACT,CAAC,EAAEqD,KACL,EAQAjG,EAAYoD,UAAU8C,oBAAsB,SAAUP,GACpD,IAAIxF,EAAQE,KAERuF,EAAWD,EAAOC,SAClBC,EAASF,EAAOE,OAChBC,EAAUH,EAAOG,QAErB,OAAOzF,KAAKS,kBAAkBiF,OAAO,SAAUJ,EAAQK,GAOrD,OANAL,EAAOM,MAAQD,EAAQ5F,KAAKD,EAAO,CACjCyF,SAAUA,EACVC,OAAQA,EACRC,QAASA,EACTK,UAAWR,EAAOM,KACpB,CAAC,EACMN,CACT,EAAG,CACDM,MAAO,EACT,CAAC,EAAEA,KACL,EAOAjG,EAAYoD,UAAUjB,SAAW,WAC/B,OAAO,EACT,EAOAnC,EAAYoD,UAAUgD,cAAgB,WACpC,IAAIjG,EAAQE,KAEZ,MAAO,CACLgG,SAAU,SAAkBpE,EAAMC,GAChC/B,EAAMoB,SAAS,CACbU,KAAMA,EACNC,MAAOA,CACT,EAAG,WACD/B,EAAM2B,UAAU,CAClB,CAAC,CACH,EACAwE,iBAAkB,SAA0BrE,EAAMC,GAChD/B,EAAMoB,SAAS,CACbU,KAAMA,EACNC,MAAOA,CACT,EAAG,WACD/B,EAAM2B,UAAU,CAClB,CAAC,CACH,EACAyE,UAAW,SAAmBC,GAG5B,OAAOrH,KAAKsH,EAAE,kCAAuD,CACnExE,KAAM9B,EAAM6B,MAAMC,KAClByE,SAAUvG,EAAM6B,MAAME,MACtBsE,MAAOA,CACT,CAAC,CACH,EACAA,MAAOnG,KAAKsG,SAAS,EACrB/C,QAASvD,KAAK2B,MAAMC,KACpByE,SAAUrG,KAAK2B,MAAME,MACrB0E,gBAAiB,CAAA,CACnB,CACF,EAOA5G,EAAYoD,UAAUH,gBAAkB,WACtC,OAAOtD,aAAakH,OACtB,EAQA7G,EAAYoD,UAAUV,gBAAkB,WACtC,IA+CMoE,EAGAC,EACAC,EACAC,EApDF9G,EAAQE,KAIR6G,EAAe7G,KAAK6G,aAAa,EACjCC,EAA4B9G,KAAK8G,0BAA0B,EAE3DrB,EAAUzF,KAAK+G,WAAW,EAAEC,OAAO,SAAUzE,GAC/C,IAAItB,EAEJ,MAAI,EAAA,UAAWsB,GAAWA,CAAAA,EAAO0E,SAC7B,EAAA,gBAAiB1E,KAAe,OAACtB,EAAKsB,MAAAA,EAAuC,KAAA,EAASA,EAAO2E,aAAyC,KAAA,EAASjG,EAAGlB,KAAKwC,CAAM,GAEnK,CAAC,EACAD,IAAI,SAAUC,EAAQC,GACrB,MAAI,eAAgBD,GAAaA,MAAAA,GAAgDA,EAAO4E,WAC/ErH,EAAMS,gBAAgB6G,+BAA+BtH,EAAO0C,EAAOD,CAAM,EAG3EA,CACT,CAAC,EAAED,IAAI,SAAUC,EAAQC,GACvB,OAAOtE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CAGpC8E,OAAQ,SAAgB7B,EAAQD,GAC9B,IAAI+B,EAAUhJ,UAAUiE,CAAM,EAE9B,MAAO,CAELgD,SAAUA,EAEVC,OAAQA,EAERjD,OAAQzC,EAAMuF,qBAAqB,CACjCE,SAAUA,EACVhD,OAAQ+E,EACR9B,OAAQA,EACRC,QAASA,CACX,CAAC,EAEDA,QAASA,CACX,CACF,CACF,CAAC,CACH,CAAC,EAED,OAAIoB,GACEJ,EAAwB,OAACxF,EAAKjB,KAAKuH,uBAAuB,GAA+BtG,EAAKtB,EAAY6H,4BAE1GC,GADAvD,EAAKlE,KAAK2B,OACFC,KACR8E,EAAgB,KAAA,IAAPe,EAAgB,EAAIA,EAC7Bd,EAAKzC,EAAGrC,MACR+E,EAAiB,KAAA,IAAPD,EAAgB,GAAKA,EAC5B,CAACzI,SAASA,SAAS,GAAI8B,KAAK0H,2BAA4B1H,KAAK0H,0BAA0B,GAAU,EAAE,EAAG,CAC3GC,MAAO7I,KAAKsH,EAAE,IAAI,EAClBwB,UAAW,UACXC,IAAK,UACLC,MAAO,SACPC,MAAOjB,MAAAA,EAA6EA,EAA4B,GAChHkB,OAAQ,SAAgB5B,EAAG6B,EAAGzF,GAC5B,OAAoBhE,MAAM0J,cAAcvJ,kBAAmB,CACzDwJ,YAAa1B,IAA0B9G,EAAY6H,4BACnDY,QAAS,WACP,OAAOtI,EAAMuI,yBAAyB3B,EAAS,GAAKE,GAAWpE,EAAQ,GAAI,CACzEoD,MAAOQ,EACPZ,OAAQyC,EACRzF,MAAOA,CACT,CAAC,CACH,CACF,EAAG,WACD,OAAO1C,EAAMuI,wBAAwB7F,EAAQ,EAAG,CAC9CoD,MAAOQ,EACPZ,OAAQyC,EACRzF,MAAOA,CACT,CAAC,CACH,CAAC,CACH,CACF,CAAC,GAAG8F,OAAO7C,CAAO,GAGbA,CACT,EAMA9F,EAAYoD,UAAUwF,6BAA+B,WACnD,OAAOvI,KAAKW,yBACd,EAMAhB,EAAYoD,UAAUyF,8BAAgC,WACpD,OAAOxI,KAAKY,0BACd,EAUAjB,EAAYoD,UAAUsF,wBAA0B,SAAUI,EAAQnD,GAKhE,OAAoB9G,MAAM0J,cAAc,OAAQ,KAH9CO,EADa,KAAA,IAAXA,EACO,GAG2CA,CAAM,CAC9D,EAOA9I,EAAYoD,UAAU2F,oBAAsB,WAC1C,IAAI5I,EAAQE,KAERyF,EAAUrH,cAAc,GAAI4B,KAAK2B,MAAMS,cAAe,CAAA,CAAI,EAO9D,OALAqD,EAAQhD,KAAK,SAAUkG,EAAIC,GACzB,OAAID,EAAGlG,KAAOmG,EAAGnG,KAAa,EAC1BkG,EAAGlG,KAAOmG,EAAGnG,KAAa,CAAC,EACxB,CACT,CAAC,EACmBjE,MAAM0J,cAAchJ,cAAe,CACrDuG,QAASA,EACToD,cAAe,SAAuBC,GACpChJ,EAAMoB,SAAS,SAAUD,GAIvB,MAAO,CACLmB,cAAe,OAAC8B,EAFEjD,EAAGmB,eAEiB,IAAgC,KAAA,EAAS8B,EAAG5B,IAAI,SAAUC,GAC9F,OAAOrE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CACpCG,QAASoG,CACX,CAAC,CACH,CAAC,CACH,CACF,CAAC,CACH,EACAC,QAAS,WACPjJ,EAAMoB,SAAS,WACb,MAAO,CACLkB,cAAetC,EAAMuC,gBAAgB,EAAEC,IAAI,SAAUC,EAAQC,GAC3D,OAAOtE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CACpCG,QAAS,CAAA,EACTD,KAAMD,CACR,CAAC,CACH,CAAC,CACH,CACF,CAAC,CACH,EACAwG,gBAAiB,SAAyBzG,EAAQuG,GAChDhJ,EAAMoB,SAAS,SAAUD,GAIvB,MAAO,CACLmB,cAAe,OAAC8B,EAFEjD,EAAGmB,eAEiB,IAAgC,KAAA,EAAS8B,EAAG5B,IAAI,SAAUgF,GAC9F,OAAOpJ,SAASA,SAAS,GAAIoJ,CAAO,EAAG,CACrC5E,QAAS4E,EAAQO,MAAQtF,EAAOsF,IAAMiB,EAAUxB,EAAQ5E,OAC1D,CAAC,CACH,CAAC,CACH,CACF,CAAC,CACH,EACAuG,UAAW,SAAmB3G,GAC5BxC,EAAMoB,SAAS,SAAUD,GAIvB,MAAO,CACLmB,cAAe,OAAC8B,EAFEjD,EAAGmB,eAEiB,IAAgC,KAAA,EAAS8B,EAAG5B,IAAI,SAAUC,GAC9F,OAAOrE,SAASA,SAAS,GAAIqE,CAAM,EAAG,CACpCE,KAAMH,EAAI4G,IAAI3G,EAAOsF,GAAG,CAC1B,CAAC,CACH,CAAC,CACH,CACF,CAAC,CACH,CACF,CAAC,CACH,EAOAlI,EAAYoD,UAAUoG,0BAA4B,WAChD,IAAIrJ,EAAQE,KAEZ,OAAoBxB,MAAM0J,cAAc7I,oBAAqB,CAC3D+J,QAASpJ,KAAK2B,MAAMgB,aACpBqD,SAAU,SAAkBoD,GAC1BtJ,EAAMoB,SAAS,CACbyB,aAAcyG,CAChB,CAAC,CACH,EACAL,QAAS,WACPjJ,EAAMoB,SAAS,CACbyB,aAAc7C,EAAM8C,gBAAgB,CACtC,CAAC,CACH,CACF,CAAC,CACH,EAQAjD,EAAYoD,UAAUsG,mBAAqB,WACzC,IAAIvJ,EAAQE,KAERsJ,EAAqBtJ,KAAKH,MAAMyJ,mBAChCC,EAAe,CAAc/K,MAAM0J,cAAcjK,QAAS,CAC5DuL,UAAW,GAAGlB,OAAO/I,eAAgB,mBAAmB,EACxDkK,KAAM,UACN5B,IAAK,SACL6B,KAAmBlL,MAAM0J,cAAc,IAAK,CAC1CsB,UAAWnL,WAAW,GAAGiK,OAAO/I,eAAgB,mCAAmC,EAAG,qBAAqB,CAC7G,CAAC,EACDoK,QAAS,WACP7J,EAAMoB,SAAS,CACbU,KAAM,CACR,EAAG,WACD9B,EAAM8J,SAAS,CACjB,CAAC,CACH,CACF,EAAG9K,KAAKsH,EAAE,IAAI,CAAC,EAAgB5H,MAAM0J,cAAcjK,QAAS,CAC1DuL,UAAW,GAAGlB,OAAO/I,eAAgB,mBAAmB,EACxDsI,IAAK,QACL8B,QAAS3J,KAAK6C,OAChB,EAAG/D,KAAKsH,EAAE,IAAI,CAAC,GAyCXyD,GAvCAP,GACFC,EAAaO,KAAmBtL,MAAM0J,cAAcvJ,kBAAmB,CACrEwJ,YAAanI,KAAK2B,MAAMI,OACxBqG,QAAS,WACP,OAAoB5J,MAAM0J,cAAc,IAAK,CAC3CL,IAAK,SACL2B,UAAW,GAAGlB,OAAO/I,eAAgB,wCAAwC,EAC7EoK,QAAS,WACP7J,EAAM+E,6BAA+B/E,EAAM+E,4BAA4B,EAEvE/E,EAAMoB,SAAS,CACba,OAAQ,CAAA,CACV,EAAG,WACD,OAAOjC,EAAMgF,4BAA8BhF,EAAMgF,2BAA2B,CAC9E,CAAC,CACH,CACF,EAAgBtG,MAAM0J,cAAc,OAAQ,KAAMpJ,KAAKsH,EAAE,IAAI,CAAC,EAAgB5H,MAAM0J,cAAc,IAAK,CACrGsB,UAAW,iBACb,CAAC,CAAC,CACJ,CACF,EAAG,WACD,OAAoBhL,MAAM0J,cAAc,IAAK,CAC3CL,IAAK,OACL2B,UAAW,GAAGlB,OAAO/I,eAAgB,0CAA0C,EAC/EoK,QAAS,WACP7J,EAAM+E,6BAA+B/E,EAAM+E,4BAA4B,EAEvE/E,EAAMoB,SAAS,CACba,OAAQ,CAAA,CACV,EAAG,WACD,OAAOjC,EAAMgF,4BAA8BhF,EAAMgF,2BAA2B,CAC9E,CAAC,CACH,CACF,EAAgBtG,MAAM0J,cAAc,OAAQ,KAAMpJ,KAAKsH,EAAE,IAAI,CAAC,EAAgB5H,MAAM0J,cAAc,IAAK,CACrGsB,UAAW,wBACb,CAAC,CAAC,CACJ,CAAC,CAAC,EAGQxJ,KAAK+J,wBAAwBR,CAAY,GAAKnL,cAAc,GAAImL,EAAc,CAAA,CAAI,GAE9F,OAAoB/K,MAAM0J,cAAc,MAAO,CAC7CsB,UAAW,GAAGlB,OAAO/I,eAAgB,sBAAsB,CAC7D,EAAGsK,EAAMvH,IAAI,SAAUkC,EAAGhC,GACxB,OAAoBhE,MAAM0J,cAAc,MAAO,CAC7CL,IAAKrF,EACLgH,UAAW,GAAGlB,OAAO/I,eAAgB,mBAAmB,CAC1D,EAAGiF,CAAC,CACN,CAAC,CAAC,CACJ,EAQA7E,EAAYoD,UAAUiH,YAAc,WAClC,IAAIlK,EAAQE,KAERiB,EAAKjB,KAAKH,MACVoK,EAAiBhJ,EAAGgJ,eACpBtG,EAAuB1C,EAAG0C,qBAC1BO,EAAKlE,KAAK2B,MACV8F,EAAKvD,EAAG9B,cACRA,EAAuB,KAAA,IAAPqF,EAAgB,GAAKA,EACrC9E,EAAeuB,EAAGvB,aAClB8C,EAAUzF,KAAKqC,gBAAgB,EAAEC,IAAI,SAAUC,EAAQC,GACzD,OAAOtE,SAASA,SAAS,GAAIkE,EAAcI,EAAM,EAAGD,CAAM,CAC5D,CAAC,EAAEyE,OAAO,SAAUzE,GAClB,OAAOA,EAAOG,OAChB,CAAC,EAOGwH,GANJzE,EAAQhD,KAAK,SAAUkG,EAAIC,GACzB,OAAID,EAAGlG,KAAOmG,EAAGnG,KAAa,EAC1BkG,EAAGlG,KAAOmG,EAAGnG,KAAa,CAAC,EACxB,CACT,CAAC,EAEgBvE,SAAS,CACxBiM,OAAQnK,KAAKyE,UAAU,EACvBb,WAAY5D,KAAK6D,QAAQ,EACzB4B,QAASA,EACTO,SAAUhG,KAAKa,cACfC,WAAYd,KAAK+F,cAAc,EAC/BqE,aAAcpK,KAAKqK,gBAAgB,EACnCC,KAAM3H,EAENzC,WAAYF,KAAKE,WAGjBqK,MAAO,SAAe/E,EAAQD,GAG5B,MAAO,CACLC,OAAQA,EACRD,SAAUA,EACVE,QAASA,EACT0E,OAAQrK,EAAM2E,UAAU,EACxBqB,UAAWhG,EAAM+F,oBAAoB,CACnCN,SAAUiF,OAAOjF,CAAQ,EACzBC,OAAQA,EACRC,QAASA,CACX,CAAC,CACH,CACF,CACF,EAAGwE,GAAkB,EAAE,GAuBvB,OApBItG,IACE8G,EAAYzK,KAAK2B,MAAMM,QAEvBgI,GACEA,EAAeS,OACjBR,EAAWQ,OAAOC,EAAIF,EAOxBP,EAAWQ,OAAS,CAClBC,EAAGF,CACL,GAIJzK,KAAKW,0BAA4BX,KAAK4K,4BAA4BnF,CAAO,EACzEzF,KAAKY,2BAA6BZ,KAAK6K,6BAA6BpF,CAAO,EACvDjH,MAAM0J,cAAclK,OAAQE,SAAS,GAAIgM,CAAU,CAAC,CAC1E,EAQAvK,EAAYoD,UAAU+H,YAAc,WAClC,IAAIhL,EAAQE,KAERiB,EAAKjB,KAAKH,MACV2J,EAAYvI,EAAGuI,UACfuB,EAAQ9J,EAAG8J,MACXC,EAAiB/J,EAAG+J,eACpBC,EAAahK,EAAGgK,WAChBC,EAAkBjK,EAAGiK,gBACrBC,EAAclK,EAAGkK,YACjBC,EAAYnK,EAAGmK,UACfC,EAAWpK,EAAGoK,SACdC,EAAYrK,EAAGqK,UACfC,EAAyBtK,EAAGsK,uBAC5BrH,EAAKlE,KAAK2B,MAAMI,OAChBA,EAAgB,KAAA,IAAPmC,GAAwBA,EACrC,OAAoB1F,MAAM0J,cAActJ,WAAY,CAClD4M,UAAW,WACXhC,UAAWnL,WAAWkB,eAAgBgM,EAAyB,yBAA2B,GAAI/B,GAAa,EAAE,EAC7GuB,MAAO7M,SAAS,GAAI6M,GAAS,EAAE,CACjC,EAAgBvM,MAAM0J,cAAc1I,MAAO,CACzCgK,UAAWnL,WAAW,GAAGiK,OAAO/I,eAAgB,gBAAgB,EAAG2L,GAAmB,EAAE,EACxFH,MAAO7M,SAAS,GAAIiN,GAAe,EAAE,EACrCM,IAAKL,CACP,EAAgB5M,MAAM0J,cAActJ,WAAY,CAC9C4M,UAAW,UACb,EAAgBhN,MAAM0J,cAAcvJ,kBAAmB,CACrDwJ,YAAa,CAAC,CAACnI,KAAK0L,sBACtB,EAAG,WACD,OAAoBlN,MAAM0J,cAAc1I,MAAO,KAAMM,EAAM4L,uBAAuB,CAAC,CACrF,CAAC,EAAgBlN,MAAM0J,cAAc1I,MAAO,KAAmBhB,MAAM0J,cAAcvJ,kBAAmB,CACpGwJ,YAAapG,EACbqG,QAAS,WACP,OAAO,IACT,CACF,EAAG,WACD,OAAOtI,EAAM6L,iBAAiB,CAChC,CAAC,CAAC,EAAgBnN,MAAM0J,cAAc1I,MAAO,KAAMQ,KAAKqJ,mBAAmB,CAAC,EAAgB7K,MAAM0J,cAAcvJ,kBAAmB,CACjIwJ,YAAa,CAAC,CAACnI,KAAK4L,qBACtB,EAAG,WACD,OAAoBpN,MAAM0J,cAAc1I,MAAO,KAAMM,EAAM8L,sBAAsB,CAAC,CACpF,CAAC,CAAC,CAAC,EAAgBpN,MAAM0J,cAAcvJ,kBAAmB,CACxDwJ,YAAa,CAAC,CAACnI,KAAK6L,iBACtB,EAAG,WACD,OAAoBrN,MAAM0J,cAAc1I,MAAO,KAAMM,EAAM+L,kBAAkB,CAAC,CAChF,CAAC,EAAgBrN,MAAM0J,cAAczI,KAAM,CACzC+J,UAAWnL,WAAW,GAAGiK,OAAO/I,eAAgB,cAAc,EAAGyL,GAAkB,GAAIM,EAAY,YAAc,EAAE,EACnHP,MAAO7M,SAAS,GAAI+M,GAAc,EAAE,EACpCQ,IAAKJ,EACLC,UAAWA,CACb,EAAgB9M,MAAM0J,cAAc,MAAO,CACzC4D,IAAK9L,KAAKC,aACVuJ,UAAW,GAAGlB,OAAO/I,eAAgB,eAAe,CACtD,EAAGS,KAAKgK,YAAY,CAAC,CAAC,EAAgBxL,MAAM0J,cAAcvJ,kBAAmB,CAC3EwJ,YAAa,CAAC,CAACnI,KAAK+L,iBACtB,EAAG,WACD,OAAoBvN,MAAM0J,cAAc1I,MAAO,KAAMM,EAAMiM,kBAAkB,CAAC,CAChF,CAAC,CAAC,CACJ,EAEApM,EAAYoD,UAAUiJ,eAAiB,WACrC,OAAoBxN,MAAM0J,cAAc,MAAO,CAC7CsB,UAAW,GAAGlB,OAAO/I,eAAgB,OAAO,CAC9C,EAAGK,EAAOmD,UAAUiF,OAAOjI,KAAKC,IAAI,CAAC,CACvC,EAOAL,EAAYoD,UAAUiF,OAAS,WAC7B,OAAoBxJ,MAAM0J,cAAcxI,mBAAmBuM,SAAU,CACnErG,MAAO,CACLsG,QAASlM,IACX,CACF,EAAGA,KAAKgM,eAAe,CAAC,CAC1B,EAGArM,EAAY6H,4BAA8B2E,OAAO,EAEjDxM,EAAYyM,iCAAmCD,OAAO,EAEtDxM,EAAY0M,0BAA4BF,OAAO,EAE/CxM,EAAY2M,8BAAgCH,OAAO,EAC5CxM,CACT,EAAEd,QAAQ,EAEC0N,aAAe,CACxB/C,UAAW,GACXuB,MAAO,GACPC,eAAgB,GAChBC,WAAY,GACZC,gBAAiB,GACjBC,YAAa,GAEbqB,QAAS,CAAA,EAETC,eAAgB,KAChBxC,eAAgB,GAChBX,mBAAoB,CAAA,EACpBtH,4BAA6B,CAAA,EAC7BoJ,UAAW,CAAA,EACXC,SAAU,CAAA,EACVC,UAAW,CAAA,EACX3H,qBAAsB,CAAA,EACtB4H,uBAAwB,CAAA,CAC1B,EACWmB,UAAY,CACrBlD,UAAWjL,UAAUoO,OACrB5B,MAAOxM,UAAUqO,OACjB5B,eAAgBzM,UAAUoO,OAC1B1B,WAAY1M,UAAUqO,OACtB1B,gBAAiB3M,UAAUoO,OAC3BxB,YAAa5M,UAAUqO,OACvBC,MAAOtO,UAAUuO,KACjBC,aAAcxO,UAAUyO,KAExB/C,eAAgB1L,UAAUqO,OAE1BtD,mBAAoB/K,UAAUuO,KAE9B9K,4BAA6BzD,UAAUuO,KAEvC1B,UAAW7M,UAAUuO,KAErBzB,SAAU9M,UAAUuO,KAEpBxB,UAAW/M,UAAUuO,KAErBnJ,qBAAsBpF,UAAUuO,KAEhCvB,uBAAwBhN,UAAUuO,IACpC,EACAnN,YAAY4M,aAAeA,aAC3B5M,YAAY+M,UAAYA,yBACT/M,mBAp2BJJ,eAGAG,mBAizBA6M,aAoBAG,SA4Be"}