{"version":3,"file":"QuickRangeDate.js","sources":["QuickRangeDate.js"],"sourcesContent":["import _CalendarModal from \"@baifendian/adhere-mobile-ui-anthoc/es/calendar-modal\";\nimport _CheckList from \"@baifendian/adhere-mobile-ui-anthoc/es/check-list\";\nimport _Modal from \"@baifendian/adhere-mobile-ui-anthoc/es/modal\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { useUpdateEffect } from 'ahooks';\nimport classNames from 'classnames';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\nimport AdhereQuickRangeDate from '@baifendian/adhere-ui-quick-range-date';\nvar selectorPrefix = 'adhere-mobile-ui-quick-range-date';\nfunction numbersToDate(start, end) {\n  if (start && end) {\n    return [new Date(start), new Date(end)];\n  }\n  return undefined;\n}\nvar InternalQuickRangeDate = /*#__PURE__*/memo(function (_a) {\n  var className = _a.className,\n    style = _a.style,\n    innerClassName = _a.innerClassName,\n    innerStyle = _a.innerStyle,\n    config = _a.config,\n    value = _a.value,\n    children = _a.children,\n    calendarModalProps = _a.calendarModalProps,\n    checkboxCheckListProps = _a.checkboxCheckListProps,\n    modalTriggerPromptProps = _a.modalTriggerPromptProps,\n    adhereQuickRangeDateProps = __rest(_a, [\"className\", \"style\", \"innerClassName\", \"innerStyle\", \"config\", \"value\", \"children\", \"calendarModalProps\", \"checkboxCheckListProps\", \"modalTriggerPromptProps\"]);\n  var _b = useState(AdhereQuickRangeDate.sync(value)),\n    selfValue = _b[0],\n    setSelfValue = _b[1];\n  var targetConfig = useMemo(function () {\n    if (!config) {\n      return [{\n        type: 'a-d',\n        value: 7\n      }, {\n        type: 'a-w',\n        value: 1\n      }, {\n        type: 'a-M',\n        value: 3\n      }, {\n        type: 'a-Q',\n        value: 1\n      }, {\n        type: 'a-y',\n        value: 1\n      }, {\n        type: 'a-h',\n        value: 24\n      }, {\n        type: 'a-m',\n        value: 60\n      }, {\n        type: 'a-s',\n        value: 60\n      }, {\n        type: 'a-ms',\n        value: 1000\n      }, {\n        type: 'b-d',\n        value: 7\n      }, {\n        type: 'b-w',\n        value: 1\n      }, {\n        type: 'b-M',\n        value: 3\n      }, {\n        type: 'b-Q',\n        value: 1\n      }, {\n        type: 'b-y',\n        value: 1\n      }, {\n        type: 'b-h',\n        value: 24\n      }, {\n        type: 'b-m',\n        value: 60\n      }, {\n        type: 'b-s',\n        value: 60\n      }, {\n        type: 'b-ms',\n        value: 1000\n      }, {\n        type: 'custom'\n      }];\n    }\n    return config;\n  }, [config]);\n  var renderDefaultElement = useCallback(function (_a) {\n    var _onChange = _a.onChange;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-inner\"), innerClassName !== null && innerClassName !== void 0 ? innerClassName : ''),\n      style: innerStyle !== null && innerStyle !== void 0 ? innerStyle : {}\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-trigger\")\n    }, /*#__PURE__*/React.createElement(_Modal.TriggerPrompt, __assign({\n      submitAction: {\n        key: 'submit',\n        primary: true,\n        onClick: function onClick() {\n          return Promise.resolve();\n        }\n      },\n      popoverTriggerProps: {\n        renderTrigger: function renderTrigger(_value) {\n          return AdhereQuickRangeDate.getLabel(selfValue);\n        }\n      },\n      onChange: function onChange(_value) {\n        var _a = AdhereQuickRangeDate.getValueEntityByStringValue(_value[0]),\n          type = _a.type,\n          value = _a.value;\n        _onChange({\n          type: type,\n          value: value\n        });\n      },\n      value: [AdhereQuickRangeDate.stringValue(selfValue)]\n    }, modalTriggerPromptProps !== null && modalTriggerPromptProps !== void 0 ? modalTriggerPromptProps : {}), /*#__PURE__*/React.createElement(_CheckList.CheckboxCheckList, __assign({\n      options: targetConfig.map(function (t) {\n        var entity = {\n          type: t.type,\n          value: t.value\n        };\n        return {\n          title: AdhereQuickRangeDate.getLabel(entity),\n          value: AdhereQuickRangeDate.stringValue(entity)\n        };\n      })\n    }, checkboxCheckListProps !== null && checkboxCheckListProps !== void 0 ? checkboxCheckListProps : {})))), (selfValue === null || selfValue === void 0 ? void 0 : selfValue.type) === 'custom' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-range-calendar-modal\")\n    }, /*#__PURE__*/React.createElement(_CalendarModal.RangeCalendarModal, __assign({\n      selectionMode: \"range\",\n      value: numbersToDate(selfValue === null || selfValue === void 0 ? void 0 : selfValue.start, selfValue === null || selfValue === void 0 ? void 0 : selfValue.end),\n      onChange: function onChange(dates) {\n        _onChange({\n          type: 'custom',\n          value: undefined,\n          start: dates ? dates[0].getTime() : undefined,\n          end: dates ? dates[1].getTime() : undefined\n        });\n      }\n    }, modalTriggerPromptProps !== null && modalTriggerPromptProps !== void 0 ? modalTriggerPromptProps : {}))));\n  }, [selfValue, targetConfig, checkboxCheckListProps, modalTriggerPromptProps, checkboxCheckListProps]);\n  useUpdateEffect(function () {\n    setSelfValue(AdhereQuickRangeDate.sync(value));\n  }, [value]);\n  return /*#__PURE__*/React.createElement(AdhereQuickRangeDate, __assign({\n    className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    config: targetConfig,\n    value: selfValue\n  }, adhereQuickRangeDateProps !== null && adhereQuickRangeDateProps !== void 0 ? adhereQuickRangeDateProps : {}), function (_a) {\n    var originDefaultElement = _a.defaultElement,\n      value = _a.value,\n      onChange = _a.onChange;\n    var defaultElement = renderDefaultElement({\n      onChange: onChange\n    });\n    if (children) {\n      return children({\n        originDefaultElement: originDefaultElement,\n        defaultElement: defaultElement,\n        value: value,\n        onChange: onChange\n      });\n    }\n    return defaultElement;\n  });\n});\nvar QuickRangeDate = InternalQuickRangeDate;\nQuickRangeDate.displayName = 'QuickRangeDate';\nQuickRangeDate.sync = AdhereQuickRangeDate.sync;\nQuickRangeDate.stringValue = AdhereQuickRangeDate.stringValue;\nQuickRangeDate.getLabel = AdhereQuickRangeDate.getLabel;\nQuickRangeDate.numberToDayjs = AdhereQuickRangeDate.numberToDayjs;\nQuickRangeDate.datesToNumbers = AdhereQuickRangeDate.datesToNumbers;\nQuickRangeDate.getValueEntityByStringValue = AdhereQuickRangeDate.getValueEntityByStringValue;\nexport default QuickRangeDate;"],"names":["_CalendarModal","_CheckList","_Modal","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","useUpdateEffect","classNames","React","memo","useCallback","useMemo","useState","AdhereQuickRangeDate","selectorPrefix","numbersToDate","start","end","Date","InternalQuickRangeDate","_a","className","style","innerClassName","innerStyle","config","value","children","checkboxCheckListProps","calendarModalProps","modalTriggerPromptProps","adhereQuickRangeDateProps","_b","sync","selfValue","setSelfValue","targetConfig","type","renderDefaultElement","_onChange","onChange","createElement","concat","TriggerPrompt","submitAction","key","primary","onClick","Promise","resolve","popoverTriggerProps","renderTrigger","_value","getLabel","getValueEntityByStringValue","stringValue","CheckboxCheckList","options","map","entity","title","RangeCalendarModal","selectionMode","dates","undefined","getTime","originDefaultElement","defaultElement","QuickRangeDate","displayName","numberToDayjs","datesToNumbers"],"mappings":"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"}