var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,l=0,a=t.length;l<a;l++)!r&&l in t||((r=r||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(r||Array.prototype.slice.call(t))};import classNames from"classnames";import React,{memo,useCallback,useEffect,useMemo,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Intl from"@baifendian/adhere-util-intl";import{createPopper}from"@popperjs/core";var selectorPrefix="adhere-ui-ellipsis",Ellipsis=memo(function(t){function e(e){return React.createElement("div",{onClick:function(){N(!R)}},e.children)}var n=t.className,r=t.style,l=t.wrap,a=void 0!==l&&l,l=t.wrapLines,i=void 0===l?2:l,o=t.tooltip,l=t.tooltipMaxLength,s=void 0===l?1024:l,l=t.isUseNativeTooltip,c=void 0===l||l,l=(t.trigger,t.tooltipClassName),l=void 0===l?"":l,u=t.tooltipStyle,u=void 0===u?{}:u,m=t.tooltipArrowClassName,m=void 0===m?"":m,f=t.tooltipArrowStyle,f=void 0===f?{}:f,p=t.tooltipClose,d=t.tooltipMore,v=t.customTooltipOptions,_=void 0===v?{}:v,h=t.dangerouslySetInnerHTML,E=t.children,y=useRef(),g=useRef(),b=useRef(null),v=useState(!1),R=v[0],N=v[1],w=useMemo(function(){var e;return o||E||(null!=h&&h.__html?((e=document.createElement("div")).innerHTML=h.__html,e.innerText):"")},[o,E,h]),C=useCallback(function(){return w.length>s},[o,E,h,s]),v=useMemo(function(){var e={};return C()?!R&&"wrapLines"in t&&2<=i?e.WebkitLineClamp=i:e.WebkitLineClamp="unset":"wrapLines"in t&&2<=i?e.WebkitLineClamp=i:e.WebkitLineClamp="unset",e},[R,i,o,E,h,s]),L=useCallback(function(){return!C()&&"isUseNativeTooltip"in t&&!c},[o,E,h,s,c]),x=useCallback(function(){return!C()&&(!("isUseNativeTooltip"in t)||c)},[o,E,h,s,c]),P=useCallback(function(){return C()?!(R||"warp"in t&&a):!("warp"in t&&a)},[R,a,o,E,h,s]),k=useCallback(function(){return C()?!R&&"wrap"in t&&a:"wrap"in t&&a},[R,a,o,E,h,s]),A=useCallback(function(){return!!C()&&R},[i,R,o,E,h,s]),P=(useEffect(function(){var e,t,n=["mouseenter","focus"],r=["mouseleave","blur"];function l(){var e,t;null!=(t=null==(e=b.current)?void 0:e.setAttribute)&&t.call(e,"data-show",""),null!=(e=null==(t=g.current)?void 0:t.setOptions)&&e.call(t,function(e){return __assign(__assign({},e),{modifiers:__spreadArray(__spreadArray([],null!=(e=e.modifiers)?e:[],!0),[{name:"eventListeners",enabled:!0}],!1)})}),null!=(t=null==(e=g.current)?void 0:e.update)&&t.call(e)}function a(){var e,t;null!=(e=null==(t=b.current)?void 0:t.removeAttribute)&&e.call(t,"data-show"),null!=(t=null==(e=g.current)?void 0:e.setOptions)&&t.call(e,function(e){return __assign(__assign({},e),{modifiers:__spreadArray(__spreadArray([],null!=(e=e.modifiers)?e:[],!0),[{name:"eventListeners",enabled:!1}],!1)})})}return L()&&(g.current&&null!=(t=null==(e=g.current)?void 0:e.destroy)&&t.call(e),g.current=createPopper(y.current,b.current,null!=_?_:{placement:"auto",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),n.forEach(function(e){var t,n;null!=(n=null==(t=y.current)?void 0:t.addEventListener)&&n.call(t,e,l)}),r.forEach(function(e){var t,n;null!=(n=null==(t=y.current)?void 0:t.addEventListener)&&n.call(t,e,a)})),function(){n.forEach(function(e){var t,n;null!=(n=null==(t=y.current)?void 0:t.removeEventListener)&&n.call(t,e,l)}),r.forEach(function(e){var t,n;null!=(n=null==(t=y.current)?void 0:t.removeEventListener)&&n.call(t,e,a)})}},[o,E,h,s,c,_]),{className:classNames("".concat(selectorPrefix,"-inner"),null!=n?n:"",((n={})["".concat(selectorPrefix,"-line-ellipsis")]=P(),n["".concat(selectorPrefix,"-multi-line-ellipsis")]=k(),n["".concat(selectorPrefix,"-wrap")]=A(),n)),style:__assign(__assign({},v),null!=r?r:{})});return h&&h.__html&&(P.dangerouslySetInnerHTML=h),x()&&(P.title=w),React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(selectorPrefix)},React.createElement("div",__assign({ref:y},P),E),C()&&React.createElement(ConditionalRender,{conditional:R,noMatch:function(){return React.createElement(e,null,null!=d?d:React.createElement("div",{className:"".concat(selectorPrefix,"-show-more")},Intl.v("展开")))}},function(){return React.createElement(e,null,null!=p?p:React.createElement("div",{className:"".concat(selectorPrefix,"-hide-more")},Intl.v("收起")))})),L()&&React.createElement("div",{ref:b,className:classNames("".concat(selectorPrefix,"-custom-tool-tip"),null!=l?l:""),style:null!=u?u:{}},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-custom-tool-tip-inner"))},w),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-custom-tool-tip-arrow"),null!=m?m:""),style:null!=f?f:{},"data-popper-arrow":!0})))});Ellipsis.displayName="Ellipsis";export default Ellipsis;
//# sourceMappingURL=Ellipsis.js.map
