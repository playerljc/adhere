"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&("get"in l?t.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,l)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),react_1=__importStar(require("react")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),selectorPrefix="adhere-ui-surnames",DURATION=100,Surnames=(0,react_1.memo)((0,react_1.forwardRef)(function(e,A){var t=e.position,n=void 0===t?"right":t,t=e.className,t=void 0===t?"":t,r=e.style,r=void 0===r?{}:r,l=e.indexClassName,l=void 0===l?"":l,a=e.indexStyle,a=void 0===a?{}:a,c=e.contentClassName,c=void 0===c?"":c,u=e.contentStyle,o=e.indexes,i=void 0===o?[]:o,o=e.dataSource,s=void 0===o?[]:o,d=e.onScroll,f=e.onBeforeScroll,v=(0,react_1.useRef)(null),m=(0,react_1.useRef)(null),p=(0,react_1.useRef)(null),o=(0,react_1.useRef)(null),_=(0,react_1.useRef)(null),h=(0,react_1.useRef)(null),g=(0,react_1.useRef)(!1),y=(0,react_1.useRef)(!1),x=(0,react_1.useRef)(!1),E=(0,react_1.useRef)(0),w=(0,react_1.useRef)(0),T=(0,react_1.useRef)(""),P=(0,react_1.useRef)([]);function b(){return"left"===n||"right"===n?"vertical":"horizontal"}function L(){"vertical"===b()?(v.current.style.height="".concat(_.current.offsetHeight+50,"px"),v.current.style.width="100%"):v.current.style.height="100%"}var e=(0,react_1.useCallback)(function(){return s.map(function(t){var e=i.find(function(e){return e.index===t.index});return react_1.default.createElement("div",{key:t.index,className:"".concat(selectorPrefix,"-group")},react_1.default.createElement("a",{className:"".concat(selectorPrefix,"-group-title"),"data-name":t.index},null!=e&&e.renderTitle?e.renderTitle(t):null==e?void 0:e.index),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-group-inner")},null!=e&&e.renderContent?null==e?void 0:e.renderContent(t):null))})},[s,i]),j=(0,react_1.useCallback)(function(){return i.map(function(e){return react_1.default.createElement("a",{key:e.index,className:"".concat(selectorPrefix,"-index-item"),"data-name":e.index},e.renderIndex?e.renderIndex(e):e.index)})},[i]);function D(){var e,t,n=null==(t=null==(e=_.current)?void 0:e.querySelectorAll)?void 0:t.call(e,".".concat(selectorPrefix,"-index-item"));P.current=[];for(var r=0;r<n.length;r++){var l=n[r],a=l.dataset.name,c=l.getBoundingClientRect();P.current.push({name:a,top:c.top,bottom:c.bottom,left:c.left,right:c.right,offsetTop:l.offsetTop,offsetLeft:l.offsetLeft,width:l.offsetWidth,height:l.offsetHeight})}}function R(e){var t=e.target;e.preventDefault(),g.current||(g.current=!0,h.current.style.display="block",S(t.dataset.name))}function N(e,t){e=function(e,t){for(var n,r=b(),l="vertical"===r?t-E.current:e-w.current,a=P.current.find(function(e){return e.name===T.current}),c=0,u=P.current.length-1;c<=u&&c<=P.current.length-1&&u<=P.current.length-1;){var o,i=P.current[o=u+c>>1],s=void 0,d=void 0,f=void 0,f="vertical"===r?(s=a.top+l,a.bottom,d=i.top,i.bottom):(s=a.left+l,a.right,d=i.left,i.right);if(d<=s&&s<=f){n=i;break}s<d?u=o-1:c=1+o}return n||null}(e,t);e&&(m.current.innerText=e.name,m.current.style.display="block","vertical"===b()?(t=e.offsetTop+Math.floor(e.height/2),m.current.style.transform="translate3d(0,".concat(t,"px,0)")):(t=e.offsetLeft+e.width,m.current.style.transform="translate3d(".concat(t,"px,0,0)")),O(e.name))}function S(n,e){void 0===e&&(e=100);var t=null==(t=null==(c=p.current)?void 0:c.querySelector)?void 0:t.call(c,".".concat(selectorPrefix,"-group-title[data-name='").concat(n,"']")),r=null==(c=p.current)?void 0:c.scrollTop,l=r,a=t.offsetTop,c=screen.updateInterval,u=v.current.scrollHeight/((DURATION|e)/(c||16.7)+((DURATION|e)%(c||16.7)!=0?1:0));f&&f(n),"undefined"!=typeof window&&window.requestAnimationFrame(function e(){function t(){g.current=!1,y.current=!1,h.current.style.display="none",d&&d(n)}r<a?a<l+u?l=a:l+=u:l-u<a?l=a:l-=u,p.current.scrollTop=l,r<a?a<=l?t():"undefined"!=typeof window&&window.requestAnimationFrame(e):l<=a?t():"undefined"!=typeof window&&window.requestAnimationFrame(e)})}function O(e){var t,n;p.current.scrollTop=(null==(n=null==(t=p.current)?void 0:t.querySelector)?void 0:n.call(t,".".concat(selectorPrefix,"-group-title[data-name='").concat(e,"']"))).offsetTop,d&&d(e)}function k(e){e.preventDefault(),e.stopPropagation(),R(e)}function C(e){e.preventDefault();var t=e.changedTouches[0].pageY,n=e.changedTouches[0].pageX,e=e.target,e=adhere_util_1.default.getTopDom(e,"".concat(selectorPrefix,"-index-item"));T.current=e.dataset.name,N(n,t)}function q(){m.current.style.display="none",m.current.innerText="",m.current.style.transform="translate3d(0,0,0)"}function M(e){e.preventDefault(),E.current=e.pageY,w.current=e.pageX;e=e.target,e=adhere_util_1.default.getTopDom(e,"".concat(selectorPrefix,"-index-item"));T.current=null==e?void 0:e.dataset.name,y.current=!0}function I(e){if(!y.current)return!1;x.current=!0,e.preventDefault();var t=e.pageY;N(e.pageX,t)}function B(){y.current=!1,x.current=!1,m.current.style.display="none",m.current.innerText="",m.current.style.transform="translate3d(0,0,0)"}function H(e){if(x.current)return y.current=!1,x.current=!1,m.current.style.display="none",m.current.innerText="",!(m.current.style.transform="translate3d(0,0,0)");e.preventDefault(),R(e)}function z(){L(),D()}return(0,react_1.useImperativeHandle)(A,function(){return{scrollToAnimation:S,scrollTo:O}}),(0,react_1.useLayoutEffect)(function(){var e;return(e=document.createElement("div")).innerHTML="<div class='".concat(selectorPrefix,"-mask'></div>"),h.current=e.firstElementChild,document.body.appendChild(h.current),L(),D(),function(){var e,t;null!=(t=null==(e=null==(e=h.current)?void 0:e.parentElement)?void 0:e.removeChild)&&t.call(e,h.current)}},[]),(0,react_1.useLayoutEffect)(function(){var e,t;return adhere_util_1.default.isTouch()?(null!=(t=null==(e=_.current)?void 0:e.addEventListener)&&t.call(e,"click",k),null!=(e=null==(t=_.current)?void 0:t.addEventListener)&&e.call(t,"touchmove",C),null!=(t=null==(e=_.current)?void 0:e.addEventListener)&&t.call(e,"touchend",q)):(null!=(e=null==(t=_.current)?void 0:t.addEventListener)&&e.call(t,"mousedown",M),null!=(t=null==(e=_.current)?void 0:e.addEventListener)&&t.call(e,"mousemove",I),null!=(e=null==(t=_.current)?void 0:t.addEventListener)&&e.call(t,"mouseleave",B),null!=(t=null==(e=_.current)?void 0:e.addEventListener)&&t.call(e,"mouseup",H),"undefined"!=typeof window&&window.addEventListener("resize",z)),L(),D(),function(){var e,t;null!=(t=null==(e=_.current)?void 0:e.removeEventListener)&&t.call(e,"click",k),null!=(e=null==(t=_.current)?void 0:t.removeEventListener)&&e.call(t,"touchmove",C),null!=(t=null==(e=_.current)?void 0:e.removeEventListener)&&t.call(e,"touchend",q),null!=(e=null==(t=_.current)?void 0:t.removeEventListener)&&e.call(t,"mousedown",M),null!=(t=null==(e=_.current)?void 0:e.removeEventListener)&&t.call(e,"mousemove",I),null!=(e=null==(t=_.current)?void 0:t.removeEventListener)&&e.call(t,"mouseleave",B),null!=(t=null==(e=_.current)?void 0:e.removeEventListener)&&t.call(e,"mouseup",H),"undefined"!=typeof window&&window.removeEventListener("resize",z)}}),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,"".concat(selectorPrefix,"-config-position-").concat(n),null!=t?t:""),style:null!=r?r:{},ref:v},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-highlighted"),ref:m}),react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-content"),c),style:null!=u?u:{},ref:p},e()),react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-index"),l),style:null!=a?a:{},ref:o},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-index-inner"),ref:_},j())))}));Surnames.displayName="Surnames",exports.default=Surnames;
//# sourceMappingURL=Surnames.js.map
