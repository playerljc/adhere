{"version":3,"file":"surnames.js","sources":["surnames.js"],"sourcesContent":["import classNames from 'classnames';\r\nimport React, { forwardRef, memo, useCallback, useImperativeHandle, useLayoutEffect, useRef, } from 'react';\r\nimport Util from '@baifendian/adhere-util';\r\nvar selectorPrefix = 'adhere-ui-surnames';\r\nvar DURATION = 100;\r\n// function isTouch() {\r\n//   return 'ontouchend' in document;\r\n// }\r\n//\r\n// /**\r\n//  * getTopDom\r\n//  * @param target\r\n//  * @param selector\r\n//  * @return HTMLElement\r\n//  */\r\n// function getTopDom(target, selector) {\r\n//   if (!target || !selector) return null;\r\n//\r\n//   if (target.className.indexOf(selector) !== -1) {\r\n//     return target;\r\n//   }\r\n//\r\n//   let parentDom = target;\r\n//   while ((parentDom = parentDom.parentElement)) {\r\n//     if (parentDom.className.indexOf(selector) !== -1 || parentDom === document.body) {\r\n//       break;\r\n//     }\r\n//   }\r\n//\r\n//   if (parentDom) {\r\n//     if (parentDom === document.body) {\r\n//       return null;\r\n//     } else {\r\n//       return parentDom;\r\n//     }\r\n//   } else {\r\n//     return null;\r\n//   }\r\n// }\r\nvar Surnames = function (props, ref) {\r\n    var _a = props.position, position = _a === void 0 ? 'right' : _a, _b = props.className, className = _b === void 0 ? '' : _b, _c = props.style, style = _c === void 0 ? {} : _c, _d = props.indexes, indexes = _d === void 0 ? [] : _d, _e = props.dataSource, dataSource = _e === void 0 ? [] : _e, onScroll = props.onScroll, onBeforeScroll = props.onBeforeScroll;\r\n    var el = useRef(null);\r\n    var highlightedEl = useRef(null);\r\n    var contentEl = useRef(null);\r\n    var indexEl = useRef(null);\r\n    var indexInnerEl = useRef(null);\r\n    var maskEl = useRef();\r\n    var key = useRef(false);\r\n    var isMouseClicked = useRef(false);\r\n    var isMouseMoved = useRef(false);\r\n    var startY = useRef(0);\r\n    var startX = useRef(0);\r\n    var curIndexName = useRef('');\r\n    var indexPositionMap = useRef([]);\r\n    function initEvent() {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        if (Util.isTouch()) {\r\n            (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('click', onClick);\r\n            // 索引touchmove和mousemove\r\n            (_b = indexInnerEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('touchmove', onTouchmove);\r\n            (_c = indexInnerEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchend', onTouchend);\r\n        }\r\n        else {\r\n            (_d = indexInnerEl.current) === null || _d === void 0 ? void 0 : _d.addEventListener('mousedown', onMousedown);\r\n            (_e = indexInnerEl.current) === null || _e === void 0 ? void 0 : _e.addEventListener('mousemove', onMousemove);\r\n            (_f = indexInnerEl.current) === null || _f === void 0 ? void 0 : _f.addEventListener('mouseleave', onMouseleave);\r\n            (_g = indexInnerEl.current) === null || _g === void 0 ? void 0 : _g.addEventListener('mouseup', onMouseup);\r\n            typeof window !== 'undefined' && window.addEventListener('resize', onResize);\r\n        }\r\n    }\r\n    function removeEvent() {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('click', onClick);\r\n        (_b = indexInnerEl.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchmove', onTouchmove);\r\n        (_c = indexInnerEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('touchend', onTouchend);\r\n        (_d = indexInnerEl.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('mousedown', onMousedown);\r\n        (_e = indexInnerEl.current) === null || _e === void 0 ? void 0 : _e.removeEventListener('mousemove', onMousemove);\r\n        (_f = indexInnerEl.current) === null || _f === void 0 ? void 0 : _f.removeEventListener('mouseleave', onMouseleave);\r\n        (_g = indexInnerEl.current) === null || _g === void 0 ? void 0 : _g.removeEventListener('mouseup', onMouseup);\r\n        typeof window !== 'undefined' && window.removeEventListener('resize', onResize);\r\n    }\r\n    function createMask() {\r\n        var el = document.createElement('div');\r\n        el.innerHTML = \"<div class='\" + selectorPrefix + \"-mask'></div>\";\r\n        maskEl.current = el.firstElementChild;\r\n        document.body.appendChild(maskEl.current);\r\n    }\r\n    function getDirection() {\r\n        return position === 'left' || position === 'right' ? 'vertical' : 'horizontal';\r\n    }\r\n    function adapterDimension() {\r\n        var direction = getDirection();\r\n        // 'vertical', 'horizontal'\r\n        if (direction === 'vertical') {\r\n            el.current.style.height = indexInnerEl.current.offsetHeight + 50 + \"px\";\r\n            el.current.style.width = '100%';\r\n        }\r\n        else {\r\n            el.current.style.height = '100%';\r\n        }\r\n    }\r\n    var renderContent = useCallback(function () {\r\n        return dataSource.map(function (record) {\r\n            var indexConfig = indexes.find(function (index) { return index.index === record.index; });\r\n            return (React.createElement(\"div\", { key: record.index, className: selectorPrefix + \"-group\" },\r\n                React.createElement(\"a\", { className: selectorPrefix + \"-group-title\", \"data-name\": record.index }, (indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderTitle) ? indexConfig.renderTitle(record) : indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.index),\r\n                React.createElement(\"div\", { className: selectorPrefix + \"-group-inner\" }, (indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderContent) ? indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderContent(record) : null)));\r\n        });\r\n    }, [dataSource]);\r\n    var renderIndex = useCallback(function () {\r\n        return indexes.map(function (index) {\r\n            return (React.createElement(\"a\", { key: index.index, className: selectorPrefix + \"-index-item\", \"data-name\": index.index }, index.renderIndex ? index.renderIndex(index) : index.index));\r\n        });\r\n    }, [indexes]);\r\n    function createIndexPosition() {\r\n        var _a;\r\n        var indexItemEls = (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".\" + selectorPrefix + \"-index-item\");\r\n        indexPositionMap.current = [];\r\n        // 计算每一项距离视口的top和bottom\r\n        for (var i = 0; i < indexItemEls.length; i++) {\r\n            var indexItemEl = indexItemEls[i];\r\n            var indexName = indexItemEl.dataset.name;\r\n            var rect = indexItemEl.getBoundingClientRect();\r\n            indexPositionMap.current.push({\r\n                name: indexName,\r\n                top: rect.top,\r\n                bottom: rect.bottom,\r\n                left: rect.left,\r\n                right: rect.right,\r\n                offsetTop: indexItemEl.offsetTop,\r\n                offsetLeft: indexItemEl.offsetLeft,\r\n                width: indexItemEl.offsetWidth,\r\n                height: indexItemEl.offsetHeight,\r\n            });\r\n        }\r\n    }\r\n    function findIndex(x, y) {\r\n        var direction = getDirection();\r\n        var val = direction === 'vertical' ? y - startY.current : x - startX.current;\r\n        var curIndex = indexPositionMap.current.find(function (t) { return t.name === curIndexName.current; });\r\n        // console.log('获取增量', val);\r\n        // console.log('移动获取当前索引信息', curIndex);\r\n        var low = 0;\r\n        var high = indexPositionMap.current.length - 1;\r\n        var middle;\r\n        var target;\r\n        while (low <= high &&\r\n            low <= indexPositionMap.current.length - 1 &&\r\n            high <= indexPositionMap.current.length - 1) {\r\n            middle = (high + low) >> 1;\r\n            var targetVal = indexPositionMap.current[middle];\r\n            var t1 = void 0;\r\n            var t2 = void 0;\r\n            var t3 = void 0;\r\n            var t4 = void 0;\r\n            if (direction === 'vertical') {\r\n                t1 = curIndex.top + val;\r\n                t2 = curIndex.bottom + val;\r\n                t3 = targetVal.top;\r\n                t4 = targetVal.bottom;\r\n            }\r\n            else {\r\n                t1 = curIndex.left + val;\r\n                t2 = curIndex.right + val;\r\n                t3 = targetVal.left;\r\n                t4 = targetVal.right;\r\n            }\r\n            // console.log(t1, t2, t3, t4);\r\n            if (t1 >= t3 && t1 <= t4) {\r\n                target = targetVal;\r\n                break;\r\n            }\r\n            else if (t1 < t3) {\r\n                high = middle - 1;\r\n            }\r\n            else {\r\n                low = middle + 1;\r\n            }\r\n        }\r\n        if (target) {\r\n            return target;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    function clickDetail(e) {\r\n        var target = e.target;\r\n        e.preventDefault();\r\n        if (key.current) {\r\n            return false;\r\n        }\r\n        key.current = true;\r\n        maskEl.current.style.display = 'block';\r\n        scrollToAnimation(target.dataset.name);\r\n    }\r\n    function moveDetail(x, y) {\r\n        var index = findIndex(x, y);\r\n        if (index) {\r\n            highlightedEl.current.innerText = index.name;\r\n            highlightedEl.current.style.display = 'block';\r\n            var direction = getDirection();\r\n            if (direction === 'vertical') {\r\n                var translateY = index.offsetTop + Math.floor(index.height / 2);\r\n                highlightedEl.current.style.transform = \"translate3d(0,\" + translateY + \"px,0)\";\r\n            }\r\n            else {\r\n                var translateX = index.offsetLeft + index.width;\r\n                highlightedEl.current.style.transform = \"translate3d(\" + translateX + \"px,0,0)\";\r\n            }\r\n            scrollTo(index.name);\r\n        }\r\n    }\r\n    function scrollToAnimation(name, duration) {\r\n        var _a, _b;\r\n        if (duration === void 0) { duration = 100; }\r\n        var targetEl = (_a = contentEl.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + selectorPrefix + \"-group-title[data-name='\" + name + \"']\");\r\n        var srcTop = (_b = contentEl.current) === null || _b === void 0 ? void 0 : _b.scrollTop;\r\n        var scrollVal = srcTop;\r\n        var targetTop = targetEl.offsetTop;\r\n        // @ts-ignore\r\n        var updateInterval = screen.updateInterval;\r\n        var step = el.current.scrollHeight /\r\n            ((DURATION | duration) / (updateInterval || 16.7) +\r\n                ((DURATION | duration) % (updateInterval || 16.7) !== 0 ? 1 : 0));\r\n        /**\r\n         * scrollAnimation\r\n         */\r\n        function scrollAnimation() {\r\n            if (srcTop < targetTop) {\r\n                if (scrollVal + step > targetTop) {\r\n                    scrollVal = targetTop;\r\n                }\r\n                else {\r\n                    scrollVal += step;\r\n                }\r\n            }\r\n            else if (scrollVal - step < targetTop) {\r\n                scrollVal = targetTop;\r\n            }\r\n            else {\r\n                scrollVal -= step;\r\n            }\r\n            contentEl.current.scrollTop = scrollVal;\r\n            if (srcTop < targetTop) {\r\n                if (scrollVal >= targetTop) {\r\n                    clear();\r\n                }\r\n                else {\r\n                    typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\r\n                }\r\n            }\r\n            else if (scrollVal <= targetTop) {\r\n                clear();\r\n            }\r\n            else {\r\n                typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\r\n            }\r\n            function clear() {\r\n                key.current = false;\r\n                isMouseClicked.current = false;\r\n                maskEl.current.style.display = 'none';\r\n                onScroll && onScroll(name);\r\n            }\r\n        }\r\n        onBeforeScroll && onBeforeScroll(name);\r\n        typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\r\n    }\r\n    function scrollTo(name) {\r\n        var _a;\r\n        contentEl.current.scrollTop = ((_a = contentEl.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + selectorPrefix + \"-group-title[data-name='\" + name + \"']\")).offsetTop;\r\n        onScroll && onScroll(name);\r\n    }\r\n    function update() {\r\n        adapterDimension();\r\n        createIndexPosition();\r\n    }\r\n    function onClick(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        clickDetail(e);\r\n    }\r\n    function onTouchmove(e) {\r\n        e.preventDefault();\r\n        var y = e.changedTouches[0].pageY;\r\n        var x = e.changedTouches[0].pageX;\r\n        var target = e.target;\r\n        var indexItemEl = Util.getTopDom(target, selectorPrefix + \"-index-item\");\r\n        curIndexName.current = indexItemEl.dataset.name;\r\n        moveDetail(x, y);\r\n    }\r\n    function onTouchend() {\r\n        highlightedEl.current.style.display = 'none';\r\n        highlightedEl.current.innerText = '';\r\n        highlightedEl.current.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    function onMousedown(e) {\r\n        e.preventDefault();\r\n        startY.current = e.pageY;\r\n        startX.current = e.pageX;\r\n        var target = e.target;\r\n        var indexItemEl = Util.getTopDom(target, selectorPrefix + \"-index-item\");\r\n        // console.log('按下获取索引名称', indexItemEl.dataset.name);\r\n        curIndexName.current = indexItemEl === null || indexItemEl === void 0 ? void 0 : indexItemEl.dataset.name;\r\n        isMouseClicked.current = true;\r\n    }\r\n    function onMousemove(e) {\r\n        if (!isMouseClicked.current)\r\n            return false;\r\n        isMouseMoved.current = true;\r\n        e.preventDefault();\r\n        var y = e.pageY;\r\n        var x = e.pageX;\r\n        moveDetail(x, y);\r\n    }\r\n    function onMouseleave() {\r\n        isMouseClicked.current = false;\r\n        isMouseMoved.current = false;\r\n        highlightedEl.current.style.display = 'none';\r\n        highlightedEl.current.innerText = '';\r\n        highlightedEl.current.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    function onMouseup(e) {\r\n        if (isMouseMoved.current) {\r\n            isMouseClicked.current = false;\r\n            isMouseMoved.current = false;\r\n            highlightedEl.current.style.display = 'none';\r\n            highlightedEl.current.innerText = '';\r\n            highlightedEl.current.style.transform = 'translate3d(0,0,0)';\r\n            return false;\r\n        }\r\n        e.preventDefault();\r\n        clickDetail(e);\r\n    }\r\n    function onResize() {\r\n        update();\r\n    }\r\n    useImperativeHandle(ref, function () { return ({\r\n        scrollToAnimation: scrollToAnimation,\r\n        scrollTo: scrollTo,\r\n    }); });\r\n    useLayoutEffect(function () {\r\n        createMask();\r\n        adapterDimension();\r\n        createIndexPosition();\r\n        return function () {\r\n            var _a, _b;\r\n            (_b = (_a = maskEl.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(maskEl.current);\r\n        };\r\n    }, []);\r\n    useLayoutEffect(function () {\r\n        initEvent();\r\n        adapterDimension();\r\n        createIndexPosition();\r\n        return function () { return removeEvent(); };\r\n    });\r\n    return (React.createElement(\"div\", { className: classNames(selectorPrefix, selectorPrefix + \"-config-position-\" + position, className || ''), style: style || {}, ref: el },\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-highlighted\", ref: highlightedEl }),\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-content\", ref: contentEl }, renderContent()),\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-index\", ref: indexEl },\r\n            React.createElement(\"div\", { className: selectorPrefix + \"-index-inner\", ref: indexInnerEl }, renderIndex()))));\r\n};\r\nexport default memo(forwardRef(Surnames));\r\n"],"names":["classNames","React","forwardRef","memo","useCallback","useImperativeHandle","useLayoutEffect","useRef","Util","selectorPrefix","DURATION","Surnames","props","ref","_a","position","_b","className","_c","style","_d","indexes","_e","dataSource","onScroll","onBeforeScroll","el","highlightedEl","contentEl","indexEl","indexInnerEl","maskEl","key","isMouseClicked","isMouseMoved","startY","startX","curIndexName","indexPositionMap","getDirection","adapterDimension","current","height","offsetHeight","width","renderContent","map","record","indexConfig","find","index","createElement","data-name","renderTitle","renderIndex","createIndexPosition","indexItemEls","querySelectorAll","i","length","indexItemEl","indexName","dataset","name","rect","getBoundingClientRect","push","top","bottom","left","right","offsetTop","offsetLeft","offsetWidth","clickDetail","e","target","preventDefault","display","scrollToAnimation","moveDetail","x","y","direction","val","curIndex","t","low","high","middle","targetVal","t1","t3","t4","innerText","translateY","Math","floor","transform","translateX","scrollTo","duration","targetEl","querySelector","srcTop","scrollTop","scrollVal","targetTop","updateInterval","screen","step","scrollHeight","window","requestAnimationFrame","scrollAnimation","clear","onClick","stopPropagation","onTouchmove","changedTouches","pageY","pageX","getTopDom","onTouchend","onMousedown","onMousemove","onMouseleave","onMouseup","onResize","document","innerHTML","firstElementChild","body","appendChild","parentElement","removeChild","_g","isTouch","addEventListener","_f","removeEventListener"],"mappings":"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"}