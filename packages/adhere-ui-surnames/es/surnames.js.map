{"version":3,"file":"Surnames.js","sources":["Surnames.js"],"sourcesContent":["import classNames from 'classnames';\nimport React, { forwardRef, memo, useCallback, useImperativeHandle, useLayoutEffect, useRef, } from 'react';\nimport Util from '@baifendian/adhere-util';\nvar selectorPrefix = 'adhere-ui-surnames';\nvar DURATION = 100;\nvar Surnames = memo(forwardRef(function (props, ref) {\n    var _a = props.position, position = _a === void 0 ? 'right' : _a, _b = props.className, className = _b === void 0 ? '' : _b, _c = props.style, style = _c === void 0 ? {} : _c, _d = props.indexClassName, indexClassName = _d === void 0 ? '' : _d, _e = props.indexStyle, indexStyle = _e === void 0 ? {} : _e, _f = props.contentClassName, contentClassName = _f === void 0 ? '' : _f, contentStyle = props.contentStyle, _g = props.indexes, indexes = _g === void 0 ? [] : _g, _h = props.dataSource, dataSource = _h === void 0 ? [] : _h, onScroll = props.onScroll, onBeforeScroll = props.onBeforeScroll;\n    var el = useRef(null);\n    var highlightedEl = useRef(null);\n    var contentEl = useRef(null);\n    var indexEl = useRef(null);\n    var indexInnerEl = useRef(null);\n    var maskEl = useRef(null);\n    var key = useRef(false);\n    var isMouseClicked = useRef(false);\n    var isMouseMoved = useRef(false);\n    var startY = useRef(0);\n    var startX = useRef(0);\n    var curIndexName = useRef('');\n    var indexPositionMap = useRef([]);\n    function initEvent() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        if (Util.isTouch()) {\n            (_b = (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onClick);\n            // 索引touchmove和mousemove\n            (_d = (_c = indexInnerEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener) === null || _d === void 0 ? void 0 : _d.call(_c, 'touchmove', onTouchmove);\n            (_f = (_e = indexInnerEl.current) === null || _e === void 0 ? void 0 : _e.addEventListener) === null || _f === void 0 ? void 0 : _f.call(_e, 'touchend', onTouchend);\n        }\n        else {\n            (_h = (_g = indexInnerEl.current) === null || _g === void 0 ? void 0 : _g.addEventListener) === null || _h === void 0 ? void 0 : _h.call(_g, 'mousedown', onMousedown);\n            (_k = (_j = indexInnerEl.current) === null || _j === void 0 ? void 0 : _j.addEventListener) === null || _k === void 0 ? void 0 : _k.call(_j, 'mousemove', onMousemove);\n            (_m = (_l = indexInnerEl.current) === null || _l === void 0 ? void 0 : _l.addEventListener) === null || _m === void 0 ? void 0 : _m.call(_l, 'mouseleave', onMouseleave);\n            (_p = (_o = indexInnerEl.current) === null || _o === void 0 ? void 0 : _o.addEventListener) === null || _p === void 0 ? void 0 : _p.call(_o, 'mouseup', onMouseup);\n            typeof window !== 'undefined' && window.addEventListener('resize', onResize);\n        }\n    }\n    function removeEvent() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        (_b = (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener) === null || _b === void 0 ? void 0 : _b.call(_a, 'click', onClick);\n        (_d = (_c = indexInnerEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener) === null || _d === void 0 ? void 0 : _d.call(_c, 'touchmove', onTouchmove);\n        (_f = (_e = indexInnerEl.current) === null || _e === void 0 ? void 0 : _e.removeEventListener) === null || _f === void 0 ? void 0 : _f.call(_e, 'touchend', onTouchend);\n        (_h = (_g = indexInnerEl.current) === null || _g === void 0 ? void 0 : _g.removeEventListener) === null || _h === void 0 ? void 0 : _h.call(_g, 'mousedown', onMousedown);\n        (_k = (_j = indexInnerEl.current) === null || _j === void 0 ? void 0 : _j.removeEventListener) === null || _k === void 0 ? void 0 : _k.call(_j, 'mousemove', onMousemove);\n        (_m = (_l = indexInnerEl.current) === null || _l === void 0 ? void 0 : _l.removeEventListener) === null || _m === void 0 ? void 0 : _m.call(_l, 'mouseleave', onMouseleave);\n        (_p = (_o = indexInnerEl.current) === null || _o === void 0 ? void 0 : _o.removeEventListener) === null || _p === void 0 ? void 0 : _p.call(_o, 'mouseup', onMouseup);\n        typeof window !== 'undefined' && window.removeEventListener('resize', onResize);\n    }\n    function createMask() {\n        var el = document.createElement('div');\n        el.innerHTML = \"<div class='\".concat(selectorPrefix, \"-mask'></div>\");\n        maskEl.current = el.firstElementChild;\n        document.body.appendChild(maskEl.current);\n    }\n    function getDirection() {\n        return position === 'left' || position === 'right' ? 'vertical' : 'horizontal';\n    }\n    function adapterDimension() {\n        var direction = getDirection();\n        // 'vertical', 'horizontal'\n        if (direction === 'vertical') {\n            el.current.style.height = \"\".concat(indexInnerEl.current.offsetHeight + 50, \"px\");\n            el.current.style.width = '100%';\n        }\n        else {\n            el.current.style.height = '100%';\n        }\n    }\n    var renderContent = useCallback(function () {\n        return dataSource.map(function (record) {\n            var indexConfig = indexes.find(function (index) { return index.index === record.index; });\n            return (React.createElement(\"div\", { key: record.index, className: \"\".concat(selectorPrefix, \"-group\") },\n                React.createElement(\"a\", { className: \"\".concat(selectorPrefix, \"-group-title\"), \"data-name\": record.index }, (indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderTitle) ? indexConfig.renderTitle(record) : indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.index),\n                React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-group-inner\") }, (indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderContent) ? indexConfig === null || indexConfig === void 0 ? void 0 : indexConfig.renderContent(record) : null)));\n        });\n    }, [dataSource, indexes]);\n    var renderIndex = useCallback(function () {\n        return indexes.map(function (index) {\n            return (React.createElement(\"a\", { key: index.index, className: \"\".concat(selectorPrefix, \"-index-item\"), \"data-name\": index.index }, index.renderIndex ? index.renderIndex(index) : index.index));\n        });\n    }, [indexes]);\n    function createIndexPosition() {\n        var _a, _b;\n        var indexItemEls = (_b = (_a = indexInnerEl.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll) === null || _b === void 0 ? void 0 : _b.call(_a, \".\".concat(selectorPrefix, \"-index-item\"));\n        indexPositionMap.current = [];\n        // 计算每一项距离视口的top和bottom\n        for (var i = 0; i < indexItemEls.length; i++) {\n            var indexItemEl = indexItemEls[i];\n            var indexName = indexItemEl.dataset.name;\n            var rect = indexItemEl.getBoundingClientRect();\n            indexPositionMap.current.push({\n                name: indexName,\n                top: rect.top,\n                bottom: rect.bottom,\n                left: rect.left,\n                right: rect.right,\n                offsetTop: indexItemEl.offsetTop,\n                offsetLeft: indexItemEl.offsetLeft,\n                width: indexItemEl.offsetWidth,\n                height: indexItemEl.offsetHeight,\n            });\n        }\n    }\n    function findIndex(x, y) {\n        var direction = getDirection();\n        var val = direction === 'vertical' ? y - startY.current : x - startX.current;\n        var curIndex = indexPositionMap.current.find(function (t) { return t.name === curIndexName.current; });\n        // console.log('获取增量', val);\n        // console.log('移动获取当前索引信息', curIndex);\n        var low = 0;\n        var high = indexPositionMap.current.length - 1;\n        var middle;\n        var target;\n        while (low <= high &&\n            low <= indexPositionMap.current.length - 1 &&\n            high <= indexPositionMap.current.length - 1) {\n            middle = (high + low) >> 1;\n            var targetVal = indexPositionMap.current[middle];\n            var t1 = void 0;\n            var t2 = void 0;\n            var t3 = void 0;\n            var t4 = void 0;\n            if (direction === 'vertical') {\n                t1 = curIndex.top + val;\n                t2 = curIndex.bottom + val;\n                t3 = targetVal.top;\n                t4 = targetVal.bottom;\n            }\n            else {\n                t1 = curIndex.left + val;\n                t2 = curIndex.right + val;\n                t3 = targetVal.left;\n                t4 = targetVal.right;\n            }\n            // console.log(t1, t2, t3, t4);\n            if (t1 >= t3 && t1 <= t4) {\n                target = targetVal;\n                break;\n            }\n            else if (t1 < t3) {\n                high = middle - 1;\n            }\n            else {\n                low = middle + 1;\n            }\n        }\n        if (target) {\n            return target;\n        }\n        else {\n            return null;\n        }\n    }\n    function clickDetail(e) {\n        var target = e.target;\n        e.preventDefault();\n        if (key.current) {\n            return false;\n        }\n        key.current = true;\n        maskEl.current.style.display = 'block';\n        scrollToAnimation(target.dataset.name);\n    }\n    function moveDetail(x, y) {\n        var index = findIndex(x, y);\n        if (index) {\n            highlightedEl.current.innerText = index.name;\n            highlightedEl.current.style.display = 'block';\n            var direction = getDirection();\n            if (direction === 'vertical') {\n                var translateY = index.offsetTop + Math.floor(index.height / 2);\n                highlightedEl.current.style.transform = \"translate3d(0,\".concat(translateY, \"px,0)\");\n            }\n            else {\n                var translateX = index.offsetLeft + index.width;\n                highlightedEl.current.style.transform = \"translate3d(\".concat(translateX, \"px,0,0)\");\n            }\n            scrollTo(index.name);\n        }\n    }\n    function scrollToAnimation(name, duration) {\n        var _a, _b, _c;\n        if (duration === void 0) { duration = 100; }\n        var targetEl = (_b = (_a = contentEl.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, \".\".concat(selectorPrefix, \"-group-title[data-name='\").concat(name, \"']\"));\n        var srcTop = (_c = contentEl.current) === null || _c === void 0 ? void 0 : _c.scrollTop;\n        var scrollVal = srcTop;\n        var targetTop = targetEl.offsetTop;\n        // @ts-ignore\n        var updateInterval = screen.updateInterval;\n        var step = el.current.scrollHeight /\n            ((DURATION | duration) / (updateInterval || 16.7) +\n                ((DURATION | duration) % (updateInterval || 16.7) !== 0 ? 1 : 0));\n        /**\n         * scrollAnimation\n         */\n        function scrollAnimation() {\n            if (srcTop < targetTop) {\n                if (scrollVal + step > targetTop) {\n                    scrollVal = targetTop;\n                }\n                else {\n                    scrollVal += step;\n                }\n            }\n            else if (scrollVal - step < targetTop) {\n                scrollVal = targetTop;\n            }\n            else {\n                scrollVal -= step;\n            }\n            contentEl.current.scrollTop = scrollVal;\n            if (srcTop < targetTop) {\n                if (scrollVal >= targetTop) {\n                    clear();\n                }\n                else {\n                    typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\n                }\n            }\n            else if (scrollVal <= targetTop) {\n                clear();\n            }\n            else {\n                typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\n            }\n            function clear() {\n                key.current = false;\n                isMouseClicked.current = false;\n                maskEl.current.style.display = 'none';\n                onScroll && onScroll(name);\n            }\n        }\n        onBeforeScroll && onBeforeScroll(name);\n        typeof window !== 'undefined' && window.requestAnimationFrame(scrollAnimation);\n    }\n    function scrollTo(name) {\n        var _a, _b;\n        contentEl.current.scrollTop = ((_b = (_a = contentEl.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, \".\".concat(selectorPrefix, \"-group-title[data-name='\").concat(name, \"']\"))).offsetTop;\n        onScroll && onScroll(name);\n    }\n    function update() {\n        adapterDimension();\n        createIndexPosition();\n    }\n    function onClick(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        clickDetail(e);\n    }\n    function onTouchmove(e) {\n        e.preventDefault();\n        var y = e.changedTouches[0].pageY;\n        var x = e.changedTouches[0].pageX;\n        var target = e.target;\n        var indexItemEl = Util.getTopDom(target, \"\".concat(selectorPrefix, \"-index-item\"));\n        curIndexName.current = indexItemEl.dataset.name;\n        moveDetail(x, y);\n    }\n    function onTouchend() {\n        highlightedEl.current.style.display = 'none';\n        highlightedEl.current.innerText = '';\n        highlightedEl.current.style.transform = 'translate3d(0,0,0)';\n    }\n    function onMousedown(e) {\n        e.preventDefault();\n        startY.current = e.pageY;\n        startX.current = e.pageX;\n        var target = e.target;\n        var indexItemEl = Util.getTopDom(target, \"\".concat(selectorPrefix, \"-index-item\"));\n        // console.log('按下获取索引名称', indexItemEl.dataset.name);\n        curIndexName.current = indexItemEl === null || indexItemEl === void 0 ? void 0 : indexItemEl.dataset.name;\n        isMouseClicked.current = true;\n    }\n    function onMousemove(e) {\n        if (!isMouseClicked.current)\n            return false;\n        isMouseMoved.current = true;\n        e.preventDefault();\n        var y = e.pageY;\n        var x = e.pageX;\n        moveDetail(x, y);\n    }\n    function onMouseleave() {\n        isMouseClicked.current = false;\n        isMouseMoved.current = false;\n        highlightedEl.current.style.display = 'none';\n        highlightedEl.current.innerText = '';\n        highlightedEl.current.style.transform = 'translate3d(0,0,0)';\n    }\n    function onMouseup(e) {\n        if (isMouseMoved.current) {\n            isMouseClicked.current = false;\n            isMouseMoved.current = false;\n            highlightedEl.current.style.display = 'none';\n            highlightedEl.current.innerText = '';\n            highlightedEl.current.style.transform = 'translate3d(0,0,0)';\n            return false;\n        }\n        e.preventDefault();\n        clickDetail(e);\n    }\n    function onResize() {\n        update();\n    }\n    useImperativeHandle(ref, function () { return ({\n        scrollToAnimation: scrollToAnimation,\n        scrollTo: scrollTo,\n    }); });\n    useLayoutEffect(function () {\n        createMask();\n        adapterDimension();\n        createIndexPosition();\n        return function () {\n            var _a, _b, _c;\n            (_c = (_b = (_a = maskEl.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild) === null || _c === void 0 ? void 0 : _c.call(_b, maskEl.current);\n        };\n    }, []);\n    useLayoutEffect(function () {\n        initEvent();\n        adapterDimension();\n        createIndexPosition();\n        return function () { return removeEvent(); };\n    });\n    return (React.createElement(\"div\", { className: classNames(selectorPrefix, \"\".concat(selectorPrefix, \"-config-position-\").concat(position), className !== null && className !== void 0 ? className : ''), style: style !== null && style !== void 0 ? style : {}, ref: el },\n        React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-highlighted\"), ref: highlightedEl }),\n        React.createElement(\"div\", { className: classNames(\"\".concat(selectorPrefix, \"-content\"), contentClassName), style: contentStyle !== null && contentStyle !== void 0 ? contentStyle : {}, ref: contentEl }, renderContent()),\n        React.createElement(\"div\", { className: classNames(\"\".concat(selectorPrefix, \"-index\"), indexClassName), style: indexStyle !== null && indexStyle !== void 0 ? indexStyle : {}, ref: indexEl },\n            React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-index-inner\"), ref: indexInnerEl }, renderIndex()))));\n}));\nSurnames.displayName = 'Surnames';\nexport default Surnames;\n"],"names":["classNames","React","forwardRef","memo","useCallback","useImperativeHandle","useLayoutEffect","useRef","Util","selectorPrefix","DURATION","Surnames","props","ref","_a","position","_b","className","_c","style","_d","indexClassName","_e","indexStyle","_f","contentClassName","contentStyle","_g","indexes","_h","dataSource","onScroll","onBeforeScroll","el","highlightedEl","contentEl","indexEl","indexInnerEl","maskEl","key","isMouseClicked","isMouseMoved","startY","startX","curIndexName","indexPositionMap","getDirection","adapterDimension","current","height","concat","offsetHeight","width","renderContent","map","record","indexConfig","find","index","createElement","data-name","renderTitle","renderIndex","createIndexPosition","indexItemEls","querySelectorAll","call","i","length","indexItemEl","indexName","dataset","name","rect","getBoundingClientRect","push","top","bottom","left","right","offsetTop","offsetLeft","offsetWidth","clickDetail","e","target","preventDefault","display","scrollToAnimation","moveDetail","x","y","direction","val","curIndex","t","low","high","middle","targetVal","t1","t3","t4","innerText","translateY","Math","floor","transform","translateX","scrollTo","duration","targetEl","querySelector","srcTop","scrollTop","scrollVal","targetTop","updateInterval","screen","step","scrollHeight","window","requestAnimationFrame","scrollAnimation","clear","onClick","stopPropagation","onTouchmove","changedTouches","pageY","pageX","getTopDom","onTouchend","onMousedown","onMousemove","onMouseleave","onMouseup","onResize","document","innerHTML","firstElementChild","body","appendChild","parentElement","removeChild","_o","_p","isTouch","addEventListener","_k","_j","_m","_l","removeEventListener","displayName"],"mappings":"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"}