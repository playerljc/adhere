var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,o=1,l=arguments.length;o<l;o++)for(var t in r=arguments[o])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var o={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(o[t[l]]=e[t[l]]);return o};import classNames from"classnames";import React,{memo,useCallback,useMemo,useRef,useState}from"react";import{createPortal}from"react-dom";import PopoverTrigger from"../PopoverTrigger";import{ValueHOC}from"../util";import Context from"./Context";import{PopupWrapper}from"./show";var selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalPopupTrigger=memo(function(e){var r,o=e.className,l=e.value,t=e.onChange,a=e.actions,n=e.popoverTriggerProps,s=e.disabled,s=void 0!==s&&s,i=e.children,c=__rest(e,["className","value","onChange","actions","popoverTriggerProps","disabled","children"]),e=useState(!1),u=e[0],p=e[1],m=useRef();var e=useMemo(function(){var e;return __assign(__assign({visible:u,destroyOnClose:!0,closeOnMaskClick:!0,showCloseButton:!0,closeOnAction:!0},c),{className:classNames("".concat(selectorPrefix,"-popup"),null!=(e=c.popupClassName)?e:""),style:null!=(e=c.style)?e:{},actions:(null!=a?a:[]).map(function(r){return __assign(__assign({},r),{onClick:function(){return null==(e=null==(e=r.onClick)?void 0:e())?void 0:e.then(function(e){f(),null!=t&&t(void 0!==e?null===e?void 0:e:null==(e=m.current)?void 0:e.getValue())});var e}})}),children:i&&React.createElement(ValueHOC,{className:"".concat(selectorPrefix,"-value-hoc"),ref:m,defaultFormItemValue:l},i),afterClose:function(){var e;null!=(e=null==c?void 0:c.afterClose)&&e.call(c)},onClose:function(){var e;f(),null!=(e=null==c?void 0:c.onClose)&&e.call(c)}})},[c,a,i,l,t,u]),g=useCallback(function(){p(!0)},[e]);function f(){p(!1)}return React.createElement(Context.Provider,{value:{close:f}},createPortal(React.createElement(PopupWrapper,__assign({},e,{bodyClassName:classNames("".concat(selectorPrefix,"-modal-body"),e.bodyClassName)})),null!=(r=null==(r=null==e?void 0:e.getContainer)?void 0:r.call(e))?r:document.body),React.createElement(PopoverTrigger,__assign({className:classNames(selectorPrefix,null!=o?o:""),value:l,renderPopover:g,disabled:null!=s&&s},null!=n?n:{})))}),PopupTrigger=InternalPopupTrigger;PopupTrigger.displayName="PopupTrigger";export default PopupTrigger;
//# sourceMappingURL=Trigger.js.map
