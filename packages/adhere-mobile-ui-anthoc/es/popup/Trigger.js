var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++)for(var s in r=arguments[n])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var n={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)r.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n};import{useUpdateEffect}from"ahooks";import classNames from"classnames";import React,{cloneElement,memo,useCallback,useMemo,useRef}from"react";import PopoverTrigger from"../PopoverTrigger";import{show}from"./show";var selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalPopupTrigger=memo(function(e){var r=e.value,n=e.onChange,o=e.actions,s=e.children,t=e.popoverTriggerProps,l=e.className,a=__rest(e,["value","onChange","actions","children","popoverTriggerProps","className"]),i=useRef(null);var c=useMemo(function(){var e;return __assign(__assign({closeOnMaskClick:!0,showCloseButton:!0,closeOnAction:!0},a),{className:classNames("".concat(selectorPrefix,"-popup"),null!=(e=a.popupClassName)?e:""),style:null!=(e=a.style)?e:{},actions:(null!=o?o:[]).map(function(r){return __assign(__assign({},r),{onClick:function(){return(e=r.onClick)?null==(e=null==e?void 0:e())?void 0:e.then(function(e){null!=n&&n(e)}):Promise.resolve();var e}})}),children:s&&cloneElement(s,__assign({defaultValue:r},s.props),s.props.children),afterClose:function(){var e;(i.current=null)!=(e=null==a?void 0:a.afterClose)&&e.call(a)}})},[a,o,s,r]),e=useCallback(function(){i.current=show(c)},[c]);return useUpdateEffect(function(){var e;i.current&&null!=(e=i.current)&&e.setConfig(function(e){return __assign(__assign({},e),a)})},[a]),React.createElement(PopoverTrigger,__assign({className:classNames(selectorPrefix,null!=l?l:""),renderPopover:e},null!=t?t:{}))}),PopupTrigger=InternalPopupTrigger;PopupTrigger.displayName="PopupTrigger";export default PopupTrigger;
//# sourceMappingURL=Trigger.js.map
