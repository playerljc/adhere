import _Modal from"antd-mobile/es/components/modal";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var o,r=1,l=arguments.length;r<l;r++)for(var t in o=arguments[r])Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,o){var r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)o.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(r[t[l]]=e[t[l]]);return r};import classNames from"classnames";import React,{memo,useCallback,useMemo,useRef,useState}from"react";import{createPortal}from"react-dom";import PopoverTrigger from"../PopoverTrigger";import{ValueHOC}from"../util";import Context from"./Context";var selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalModalTrigger=memo(function(e){var o,r=e.value,l=e.onChange,t=e.actions,a=e.children,n=e.popoverTriggerProps,s=e.disabled,s=void 0!==s&&s,i=__rest(e,["value","onChange","actions","children","popoverTriggerProps","disabled"]),e=useState(!1),c=e[0],u=e[1],m=useRef();var e=useMemo(function(){return __assign(__assign({visible:c,destroyOnClose:!0,closeOnMaskClick:!0,showCloseButton:!0},i),{actions:(null!=t?t:[]).map(function(o){return __assign(__assign({},o),{onClick:function(){var e;null!=(e=null==(e=o.onClick)?void 0:e())&&e.then(function(e){g(),null!=l&&l(void 0!==e?null===e?void 0:e:null==(e=m.current)?void 0:e.getValue())})}})}),content:a&&React.createElement(ValueHOC,{className:"".concat(selectorPrefix,"-value-hoc"),ref:m,defaultFormItemValue:r},a),afterClose:function(){var e;null!=(e=null==i?void 0:i.afterClose)&&e.call(i)},onClose:function(){var e;g(),null!=(e=null==i?void 0:i.onClose)&&e.call(i)}})},[i,t,a,r,l,c]),d=useCallback(function(){u(!0)},[e]);function g(){u(!1)}return React.createElement(Context.Provider,{value:{close:g}},createPortal(React.createElement(_Modal,__assign({},e,{bodyClassName:classNames("".concat(selectorPrefix,"-modal-body"),e.bodyClassName)})),null!=(o=null==(o=null==e?void 0:e.getContainer)?void 0:o.call(e))?o:document.body),React.createElement(PopoverTrigger,__assign({className:classNames(selectorPrefix,null!=(e=null==n?void 0:n.className)?e:""),value:r,disabled:null!=s&&s,renderPopover:d},null!=n?n:{})))}),ModalTrigger=InternalModalTrigger;ModalTrigger.displayName="ModalTrigger";export default ModalTrigger;
//# sourceMappingURL=Trigger.js.map
