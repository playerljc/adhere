var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++)for(var t in r=arguments[n])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var n={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]]);return n};import{useUpdateEffect}from"ahooks";import{Modal}from"antd-mobile";import classNames from"classnames";import React,{cloneElement,memo,useCallback,useMemo,useRef}from"react";import PopoverTrigger from"../PopoverTrigger";var selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalModalTrigger=memo(function(e){var r,n=e.value,t=e.onChange,o=e.actions,l=e.children,a=e.popoverTriggerProps,s=__rest(e,["value","onChange","actions","children","popoverTriggerProps"]),i=useRef(null);var c=useMemo(function(){return __assign(__assign({closeOnMaskClick:!0,showCloseButton:!0},s),{actions:(null!=o?o:[]).map(function(o){return __assign(__assign({},o),{onClick:function(){var e,r,n;r=o.onClick,n=null==(e=i.current)?void 0:e.close,null!=(r=null==r?void 0:r())&&r.then(function(e){null!=t&&t(e),setTimeout(function(){n()},300)})}})}),content:l&&cloneElement(l,__assign({defaultValue:n},l.props),l.props.children),afterClose:function(){var e;(i.current=null)!=(e=null==s?void 0:s.afterClose)&&e.call(s)}})},[s,o,l,n]),e=useCallback(function(){i.current=Modal.show(c)},[c]);return useUpdateEffect(function(){i.current&&i.current.replace(React.createElement(Modal,__assign({},c)))},[s]),React.createElement(PopoverTrigger,__assign({className:classNames(selectorPrefix,null!=(r=null==a?void 0:a.className)?r:""),renderPopover:e},null!=a?a:{}))}),ModalTrigger=InternalModalTrigger;ModalTrigger.displayName="ModalTrigger";export default ModalTrigger;
//# sourceMappingURL=Trigger.js.map
