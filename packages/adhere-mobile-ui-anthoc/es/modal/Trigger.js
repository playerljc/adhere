import _Modal from"antd-mobile/es/components/modal";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,o=1,n=arguments.length;o<n;o++)for(var t in r=arguments[o])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var o={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};import{useUpdateEffect}from"ahooks";import classNames from"classnames";import React,{cloneElement,memo,useCallback,useMemo,useRef}from"react";import PopoverTrigger from"../PopoverTrigger";var selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalModalTrigger=memo(function(e){var r,o=e.value,t=e.onChange,n=e.actions,l=e.children,a=e.popoverTriggerProps,s=__rest(e,["value","onChange","actions","children","popoverTriggerProps"]),i=useRef(null);var c=useMemo(function(){return __assign(__assign({closeOnMaskClick:!0,showCloseButton:!0},s),{actions:(null!=n?n:[]).map(function(n){return __assign(__assign({},n),{onClick:function(){var e,r,o;r=n.onClick,o=null==(e=i.current)?void 0:e.close,null!=(r=null==r?void 0:r())&&r.then(function(e){null!=t&&t(e),setTimeout(function(){o()},300)})}})}),content:l&&cloneElement(l,__assign({defaultValue:o},l.props),l.props.children),afterClose:function(){var e;(i.current=null)!=(e=null==s?void 0:s.afterClose)&&e.call(s)}})},[s,n,l,o]),e=useCallback(function(){i.current=_Modal.show(c)},[c]);return useUpdateEffect(function(){i.current&&i.current.replace(React.createElement(_Modal,__assign({},c)))},[s]),React.createElement(PopoverTrigger,__assign({className:classNames(selectorPrefix,null!=(r=null==a?void 0:a.className)?r:""),renderPopover:e},null!=a?a:{}))}),ModalTrigger=InternalModalTrigger;ModalTrigger.displayName="ModalTrigger";export default ModalTrigger;
//# sourceMappingURL=Trigger.js.map
