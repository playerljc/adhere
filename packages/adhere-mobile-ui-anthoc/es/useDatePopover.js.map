{"version":3,"file":"useDatePopover.js","sources":["useDatePopover.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { useConfig } from 'antd-mobile/es/components/config-provider/config-provider';\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport DatePickerView from './date-picker-view';\nimport useDateTimePopover from './useDateTimePopover';\nvar selectorPrefix = 'adhere-mobile-ui-ant-hoc-date-popover';\nfunction useDatePopover(_a) {\n  var popoverTriggerClassName = _a.popoverTriggerClassName,\n    popoverTriggerStyle = _a.popoverTriggerStyle,\n    placeholder = _a.placeholder,\n    value = _a.value,\n    okLabel = _a.okLabel,\n    cancelLabel = _a.cancelLabel,\n    renderDisplay = _a.renderDisplay,\n    locale = _a.locale,\n    datePickerViewProps = __rest(_a, [\"popoverTriggerClassName\", \"popoverTriggerStyle\", \"placeholder\", \"value\", \"okLabel\", \"cancelLabel\", \"renderDisplay\", \"locale\"]);\n  var config = useConfig();\n  var formatValue = useMemo(function () {\n    var _a;\n    if (!value) return '';\n    var targetLocale = (_a = locale !== null && locale !== void 0 ? locale : config.locale.locale) !== null && _a !== void 0 ? _a : 'zh';\n    if (renderDisplay) {\n      return renderDisplay(value, targetLocale);\n    }\n    var ymd = value.toLocaleDateString(targetLocale).split(/[-/]/gim);\n    var result = '';\n    switch (datePickerViewProps.precision) {\n      case 'year':\n        result = \"\".concat(value.getFullYear());\n        break;\n      case 'month':\n        result = [ymd[0], ymd[1]].join('/');\n        break;\n      case 'minute':\n        \"\".concat(value.toLocaleDateString(targetLocale), \" \").concat([value.getHours(), value.getMinutes()].join(':'));\n        break;\n      case 'second':\n        result = \"\".concat(value.toLocaleDateString(targetLocale), \" \").concat(value.toLocaleTimeString(targetLocale));\n        break;\n      case 'hour':\n        result = \"\".concat(value.toLocaleDateString(targetLocale), \" \").concat(value.getHours());\n        break;\n      case 'day':\n      case 'week':\n      case 'week-day':\n        result = value.toLocaleDateString(targetLocale);\n        break;\n      default:\n        result = '';\n    }\n    return result;\n  }, [value]);\n  var _b = useDateTimePopover({\n      popoverTriggerClassName: classNames(popoverTriggerClassName !== null && popoverTriggerClassName !== void 0 ? popoverTriggerClassName : '', selectorPrefix),\n      popoverTriggerStyle: popoverTriggerStyle,\n      placeholder: placeholder,\n      value: value,\n      okLabel: okLabel,\n      cancelLabel: cancelLabel,\n      defaultValue: datePickerViewProps === null || datePickerViewProps === void 0 ? void 0 : datePickerViewProps.defaultValue,\n      formatValue: formatValue\n    }),\n    actions = _b.actions,\n    popoverTriggerProps = _b.popoverTriggerProps,\n    setTargetValue = _b.setTargetValue;\n  return {\n    actions: actions,\n    popoverTriggerProps: popoverTriggerProps,\n    children: /*#__PURE__*/React.createElement(DatePickerView, __assign({\n      defaultValue: new Date()\n    }, datePickerViewProps, {\n      onChange: function onChange(_value) {\n        setTargetValue(_value);\n      }\n    }))\n  };\n}\nexport default useDatePopover;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","useConfig","classNames","React","useMemo","DatePickerView","useDateTimePopover","selectorPrefix","useDatePopover","_a","popoverTriggerClassName","popoverTriggerStyle","placeholder","value","okLabel","cancelLabel","renderDisplay","locale","datePickerViewProps","config","formatValue","targetLocale","ymd","toLocaleDateString","split","result","precision","concat","getFullYear","join","getHours","getMinutes","toLocaleTimeString","_b","defaultValue","actions","popoverTriggerProps","setTargetValue","children","createElement","Date","onChange","_value"],"mappings":"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"}