{"version":3,"file":"useCalendarPopover.js","sources":["useCalendarPopover.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { CalendarPickerView } from 'antd-mobile';\nimport { useConfig } from 'antd-mobile/es/components/config-provider/config-provider';\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport useDateTimePopover from './useDateTimePopover';\nvar selectorPrefix = 'adhere-mobile-ui-ant-hoc-calendar-popover';\nfunction useCalendarPopover(_a) {\n  var popoverTriggerClassName = _a.popoverTriggerClassName,\n    popoverTriggerStyle = _a.popoverTriggerStyle,\n    placeholder = _a.placeholder,\n    value = _a.value,\n    okLabel = _a.okLabel,\n    cancelLabel = _a.cancelLabel,\n    renderDisplay = _a.renderDisplay,\n    locale = _a.locale,\n    calendarPickerViewProps = __rest(_a, [\"popoverTriggerClassName\", \"popoverTriggerStyle\", \"placeholder\", \"value\", \"okLabel\", \"cancelLabel\", \"renderDisplay\", \"locale\"]);\n  var config = useConfig();\n  var formatValue = useMemo(function () {\n    var _a;\n    if (!value || Array.isArray(value) && value.length <= 1) return '';\n    var targetLocale = (_a = locale !== null && locale !== void 0 ? locale : config.locale.locale) !== null && _a !== void 0 ? _a : 'zh';\n    if (renderDisplay) {\n      return renderDisplay(value, targetLocale);\n    }\n    if ((calendarPickerViewProps === null || calendarPickerViewProps === void 0 ? void 0 : calendarPickerViewProps.selectionMode) === 'single' || !(calendarPickerViewProps === null || calendarPickerViewProps === void 0 ? void 0 : calendarPickerViewProps.selectionMode)) {\n      return value.toLocaleDateString(targetLocale);\n    } else if ((calendarPickerViewProps === null || calendarPickerViewProps === void 0 ? void 0 : calendarPickerViewProps.selectionMode) === 'range') {\n      return [value[0].toLocaleDateString(targetLocale), value[1].toLocaleDateString(targetLocale)].join('~');\n    }\n    return '';\n  }, [value]);\n  var _b = useDateTimePopover({\n      popoverTriggerClassName: classNames(popoverTriggerClassName !== null && popoverTriggerClassName !== void 0 ? popoverTriggerClassName : '', selectorPrefix),\n      popoverTriggerStyle: popoverTriggerStyle,\n      placeholder: placeholder,\n      value: value,\n      okLabel: okLabel,\n      cancelLabel: cancelLabel,\n      defaultValue: calendarPickerViewProps === null || calendarPickerViewProps === void 0 ? void 0 : calendarPickerViewProps.defaultValue,\n      formatValue: formatValue\n    }),\n    actions = _b.actions,\n    popoverTriggerProps = _b.popoverTriggerProps,\n    setTargetValue = _b.setTargetValue;\n  return {\n    actions: actions,\n    popoverTriggerProps: popoverTriggerProps,\n    children:\n    /*#__PURE__*/\n    // @ts-ignore\n    React.createElement(CalendarPickerView, __assign({}, calendarPickerViewProps, {\n      onChange: function onChange(_value) {\n        setTargetValue(_value);\n      }\n    }))\n  };\n}\nexport default useCalendarPopover;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","CalendarPickerView","useConfig","classNames","React","useMemo","useDateTimePopover","selectorPrefix","useCalendarPopover","_a","popoverTriggerClassName","popoverTriggerStyle","placeholder","value","okLabel","cancelLabel","renderDisplay","locale","calendarPickerViewProps","config","formatValue","targetLocale","Array","isArray","selectionMode","toLocaleDateString","join","_b","defaultValue","actions","popoverTriggerProps","setTargetValue","children","createElement","onChange","_value"],"mappings":"AAAA,IAAIA,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,EACIO,OAASd,MAAQA,KAAKc,QAAU,SAAUV,EAAGW,GAC/C,IAAIZ,EAAI,GACR,IAASM,KAAKL,EAAOH,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,GAAKM,EAAEC,QAAQP,CAAC,EAAI,IAAGN,EAAEM,GAAKL,EAAEK,IAC9F,GAAS,MAALL,GAAqD,YAAxC,OAAOH,OAAOgB,sBAAsC,IAAK,IAAIZ,EAAI,EAAGI,EAAIR,OAAOgB,sBAAsBb,CAAC,EAAGC,EAAII,EAAED,OAAQH,CAAC,GACnIU,EAAEC,QAAQP,EAAEJ,EAAE,EAAI,GAAKJ,OAAOS,UAAUQ,qBAAqBN,KAAKR,EAAGK,EAAEJ,EAAE,IAAGF,EAAEM,EAAEJ,IAAMD,EAAEK,EAAEJ,KAEhG,OAAOF,CACT,SACSgB,kBAAuC,KAAb,qBAC1BC,SAA4E,KAA3D,mEACnBC,eAAgB,oBAChBC,OAASC,OAAsB,KAAP,eACxBC,uBAAwB,uBAC/B,IAAIC,eAAiB,4CACrB,SAASC,mBAAmBC,GAC1B,IAAIC,EAA0BD,EAAGC,wBAC/BC,EAAsBF,EAAGE,oBACzBC,EAAcH,EAAGG,YACjBC,EAAQJ,EAAGI,MACXC,EAAUL,EAAGK,QACbC,EAAcN,EAAGM,YACjBC,EAAgBP,EAAGO,cACnBC,EAASR,EAAGQ,OACZC,EAA0BtB,OAAOa,EAAI,CAAC,0BAA2B,sBAAuB,cAAe,QAAS,UAAW,cAAe,gBAAiB,SAAS,EAClKU,EAASjB,UAAU,EACnBkB,EAAcf,QAAQ,WACxB,IAEIgB,EADJ,MAAI,CAACR,GAASS,MAAMC,QAAQV,CAAK,GAAKA,EAAMvB,QAAU,EAAU,IAC5D+B,EAAe,OAACZ,EAAKQ,MAAAA,EAAuCA,EAASE,EAAOF,OAAOA,QAAoCR,EAAK,KAC5HO,EACKA,EAAcH,EAAOQ,CAAY,EAEwF,YAA7HH,MAAAA,EAAyE,KAAA,EAASA,EAAwBM,gBAAiCN,MAAAA,GAAkFA,EAAwBM,cAEjH,WAA7HN,MAAAA,EAAyE,KAAA,EAASA,EAAwBM,eAC7G,CAACX,EAAM,GAAGY,mBAAmBJ,CAAY,EAAGR,EAAM,GAAGY,mBAAmBJ,CAAY,GAAGK,KAAK,GAAG,EAEjG,GAJEb,EAAMY,mBAAmBJ,CAAY,EAKhD,EAAG,CAACR,EAAM,EACNc,EAAKrB,mBAAmB,CACxBI,wBAAyBP,WAAWO,MAAAA,EAAyEA,EAA0B,GAAIH,cAAc,EACzJI,oBAAqBA,EACrBC,YAAaA,EACbC,MAAOA,EACPC,QAASA,EACTC,YAAaA,EACba,aAAcV,MAAAA,EAAyE,KAAA,EAASA,EAAwBU,aACxHR,YAAaA,CACf,CAAC,EACDS,EAAUF,EAAGE,QACbC,EAAsBH,EAAGG,oBACzBC,EAAiBJ,EAAGI,eACtB,MAAO,CACLF,QAASA,EACTC,oBAAqBA,EACrBE,SAGA5B,MAAM6B,cAAchC,mBAAoBpB,SAAS,GAAIqC,EAAyB,CAC5EgB,SAAU,SAAkBC,GAC1BJ,EAAeI,CAAM,CACvB,CACF,CAAC,CAAC,CACJ,CACF,gBACe3B"}