var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var t={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)r.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(t[a[o]]=e[a[o]]);return t};import{useUpdateEffect}from"ahooks";import{useConfig}from"antd-mobile/es/components/config-provider/config-provider";import React,{useMemo,useRef}from"react";import Intl from"@baifendian/adhere-util-intl";import DatePickerView from"./date-picker-view";var selectorPrefix="adhere-mobile-ui-ant-hoc-date-popover",useDatePopover=function(e){var r=e.popoverTriggerClassName,t=e.popoverTriggerStyle,o=e.placeholder,a=e.value,n=e.okLabel,c=e.cancelLabel,l=e.renderDisplay,i=e.locale,s=__rest(e,["popoverTriggerClassName","popoverTriggerStyle","placeholder","value","okLabel","cancelLabel","renderDisplay","locale"]),u=useRef(null!=(e=null!=a?a:s.defaultValue)?e:new Date),p=useConfig(),f=useMemo(function(){if(!a)return"";var e=null!=(r=null!=i?i:p.locale.locale)?r:"zh";if(l)return l(a,e);var r=s.precision,r=void 0===r?"day":r,t=a.toLocaleDateString(e).split(/[-/]/gim),o="";switch(r){case"year":o="".concat(a.getFullYear());break;case"month":o=[t[0],t[1]].join("/");break;case"minute":"".concat(a.toLocaleDateString(e)," ").concat([a.getHours(),a.getMinutes()].join(":"));break;case"second":o="".concat(a.toLocaleDateString(e)," ").concat(a.toLocaleTimeString(e));break;case"hour":o="".concat(a.toLocaleDateString(e)," ").concat(a.getHours());break;case"day":case"week":case"week-day":o=a.toLocaleDateString(e);break;default:o=""}return o},[a]),e=useMemo(function(){return[{key:"submit",text:null!=n?n:Intl.v("确定"),primary:!0,onClick:function(){return Promise.resolve(u.current)}},{key:"close",text:null!=c?c:Intl.v("关闭"),onClick:function(){return Promise.resolve(a)}}]},[n,c,u.current]);return useUpdateEffect(function(){u.current=a},[a]),{actions:e,popoverTriggerProps:{className:null!=r?r:"",style:null!=t?t:{},renderTrigger:function(){return React.createElement("div",{className:"".concat(selectorPrefix,"-trigger")},!!a&&f,!a&&React.createElement("div",{className:"".concat(selectorPrefix,"-placeholder")},null!=o?o:Intl.v("请选择")))}},children:React.createElement(DatePickerView,__assign({defaultValue:new Date},s,{onChange:function(e){u.current=e}}))}};export default useDatePopover;
//# sourceMappingURL=useDatePopover.js.map
