{"version":3,"file":"ListFilter.js","sources":["ListFilter.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { ErrorBlock, SearchBar } from 'antd-mobile';\nimport classNames from 'classnames';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport Util from '@baifendian/adhere-util';\nvar selectorPrefix = 'adhere-mobile-ui-ant-hoc-list-filter';\nfunction ListFilter(_a) {\n  var _b;\n  var options = _a.options,\n    filterProps = _a.filterProps,\n    children = _a.children,\n    wrapperClassName = _a.wrapperClassName,\n    wrapperStyle = _a.wrapperStyle,\n    filterWrapperClassName = _a.filterWrapperClassName,\n    filterWrapperStyle = _a.filterWrapperStyle,\n    bodyWrapperClassName = _a.bodyWrapperClassName,\n    bodyWrapperStyle = _a.bodyWrapperStyle,\n    renderEmpty = _a.renderEmpty;\n  var _c = useState(''),\n    filterValue = _c[0],\n    setFilterValue = _c[1];\n  function filter(_filterValue, option) {\n    var _a;\n    return option[(_a = filterProps === null || filterProps === void 0 ? void 0 : filterProps.optionFilterProp) !== null && _a !== void 0 ? _a : 'title'].includes(_filterValue);\n  }\n  var targetOptions = useMemo(function () {\n    if (!filterValue) return options !== null && options !== void 0 ? options : [];\n    // 是bool值\n    if (typeof (filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption) === 'boolean' && filterProps.filterOption) {\n      return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n        return filter(filterValue, _option);\n      });\n    }\n    // 是函数\n    else if (Util.isFunction(filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption)) {\n      return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n        return (filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption)(filterValue, _option);\n      });\n    }\n    return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n      return filter(filterValue, _option);\n    });\n  }, [filterValue, filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption, filterProps === null || filterProps === void 0 ? void 0 : filterProps.optionFilterProp, options]);\n  var isEmpty = useCallback(function () {\n    return !targetOptions.length;\n  }, [targetOptions]);\n  function onSearch(value) {\n    setFilterValue(value);\n  }\n  function onClear() {\n    setFilterValue('');\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, wrapperClassName !== null && wrapperClassName !== void 0 ? wrapperClassName : ''),\n    style: wrapperStyle !== null && wrapperStyle !== void 0 ? wrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-search\"), filterWrapperClassName !== null && filterWrapperClassName !== void 0 ? filterWrapperClassName : ''),\n    style: filterWrapperStyle !== null && filterWrapperStyle !== void 0 ? filterWrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(SearchBar, __assign({\n    onSearch: onSearch,\n    onClear: onClear\n  }, filterProps))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-list\"), bodyWrapperClassName !== null && bodyWrapperClassName !== void 0 ? bodyWrapperClassName : ''),\n    style: bodyWrapperStyle !== null && bodyWrapperStyle !== void 0 ? bodyWrapperStyle : {}\n  }, isEmpty() && ((_b = renderEmpty === null || renderEmpty === void 0 ? void 0 : renderEmpty()) !== null && _b !== void 0 ? _b : /*#__PURE__*/React.createElement(ErrorBlock, {\n    status: \"empty\"\n  })), children === null || children === void 0 ? void 0 : children(targetOptions, filterValue)));\n}\nexport default ListFilter;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","ErrorBlock","SearchBar","classNames","React","useCallback","useMemo","useState","Util","selectorPrefix","ListFilter","_a","options","filterProps","children","wrapperClassName","wrapperStyle","filterWrapperClassName","filterWrapperStyle","bodyWrapperClassName","bodyWrapperStyle","renderEmpty","_c","filterValue","setFilterValue","filter","_filterValue","option","optionFilterProp","includes","targetOptions","filterOption","_option","isFunction","isEmpty","createElement","className","style","concat","onSearch","value","onClear","_b","status"],"mappings":"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"}