{"version":3,"file":"useListFilter.js","sources":["useListFilter.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { SearchBar } from 'antd-mobile';\nimport classNames from 'classnames';\nimport React, { useMemo, useState } from 'react';\nimport Util from '@baifendian/adhere-util';\nvar selectorPrefix = 'adhere-mobile-ui-ant-hoc-list-filter';\nfunction useListFilter(_a) {\n  var options = _a.options,\n    filterProps = _a.filterProps,\n    children = _a.children,\n    wrapperClassName = _a.wrapperClassName,\n    wrapperStyle = _a.wrapperStyle,\n    filterWrapperClassName = _a.filterWrapperClassName,\n    filterWrapperStyle = _a.filterWrapperStyle,\n    bodyWrapperClassName = _a.bodyWrapperClassName,\n    bodyWrapperStyle = _a.bodyWrapperStyle;\n  var _b = useState(''),\n    filterValue = _b[0],\n    setFilterValue = _b[1];\n  function filter(_filterValue, option) {\n    var _a;\n    return option[(_a = filterProps === null || filterProps === void 0 ? void 0 : filterProps.optionFilterProp) !== null && _a !== void 0 ? _a : 'title'].includes(_filterValue);\n  }\n  var targetOptions = useMemo(function () {\n    if (!filterValue) return options !== null && options !== void 0 ? options : [];\n    // 是bool值\n    if (typeof (filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption) === 'boolean' && filterProps.filterOption) {\n      return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n        return filter(filterValue, _option);\n      });\n    }\n    // 是函数\n    else if (Util.isFunction(filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption)) {\n      return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n        return (filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption)(filterValue, _option);\n      });\n    }\n    return (options !== null && options !== void 0 ? options : []).filter(function (_option) {\n      return filter(filterValue, _option);\n    });\n  }, [filterValue, filterProps === null || filterProps === void 0 ? void 0 : filterProps.filterOption, filterProps === null || filterProps === void 0 ? void 0 : filterProps.optionFilterProp, options]);\n  function onSearch(value) {\n    setFilterValue(value);\n  }\n  function onClear() {\n    setFilterValue('');\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, wrapperClassName !== null && wrapperClassName !== void 0 ? wrapperClassName : ''),\n    style: wrapperStyle !== null && wrapperStyle !== void 0 ? wrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-search\"), filterWrapperClassName !== null && filterWrapperClassName !== void 0 ? filterWrapperClassName : ''),\n    style: filterWrapperStyle !== null && filterWrapperStyle !== void 0 ? filterWrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(SearchBar, __assign({\n    onSearch: onSearch,\n    onClear: onClear\n  }, filterProps))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-list\"), bodyWrapperClassName !== null && bodyWrapperClassName !== void 0 ? bodyWrapperClassName : ''),\n    style: bodyWrapperStyle !== null && bodyWrapperStyle !== void 0 ? bodyWrapperStyle : {}\n  }, children === null || children === void 0 ? void 0 : children(targetOptions)));\n}\nexport default useListFilter;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","SearchBar","classNames","React","useMemo","useState","Util","selectorPrefix","useListFilter","_a","options","filterProps","children","wrapperClassName","wrapperStyle","filterWrapperClassName","filterWrapperStyle","bodyWrapperClassName","bodyWrapperStyle","_b","filterValue","setFilterValue","filter","_filterValue","option","optionFilterProp","includes","targetOptions","filterOption","_option","isFunction","createElement","className","style","concat","onSearch","value","onClear"],"mappings":"AAAA,IAAIA,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACSO,SAA8B,KAAb,qBACnBC,eAAgB,oBAChBC,OAASC,QAASC,QAAuB,KAAP,eAClCC,SAAU,0BACjB,IAAIC,eAAiB,uCACrB,SAASC,cAAcC,GACrB,IAAIC,EAAUD,EAAGC,QACfC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SACdC,EAAmBJ,EAAGI,iBACtBC,EAAeL,EAAGK,aAClBC,EAAyBN,EAAGM,uBAC5BC,EAAqBP,EAAGO,mBACxBC,EAAuBR,EAAGQ,qBAC1BC,EAAmBT,EAAGS,iBACpBC,EAAKd,SAAS,EAAE,EAClBe,EAAcD,EAAG,GACjBE,EAAiBF,EAAG,GACtB,SAASG,EAAOC,EAAcC,GAE5B,OAAOA,EAAO,OAACf,EAAKE,MAAAA,EAAiD,KAAA,EAASA,EAAYc,kBAA8ChB,EAAK,SAASiB,SAASH,CAAY,CAC7K,CACII,EAAgBvB,QAAQ,WAC1B,OAAKgB,EAE+F,WAAhG,OAAQT,MAAAA,EAAiD,KAAA,EAASA,EAAYiB,eAA+BjB,EAAYiB,cACnHlB,MAAAA,EAAyCA,EAAU,IAAIY,OAAO,SAAUO,GAC9E,OAAOP,EAAOF,EAAaS,CAAO,CACpC,CAAC,EAGMvB,KAAKwB,WAAWnB,MAAAA,EAAiD,KAAA,EAASA,EAAYiB,YAAY,GACjGlB,MAAAA,EAAyCA,EAAU,IAAIY,OAAO,SAAUO,GAC9E,OAAQlB,MAAAA,EAAiD,KAAA,EAASA,EAAYiB,cAAcR,EAAaS,CAAO,CAClH,CAAC,GAEKnB,MAAAA,EAAyCA,EAAU,IAAIY,OAAO,SAAUO,GAC9E,OAAOP,EAAOF,EAAaS,CAAO,CACpC,CAAC,EAfwBnB,MAAAA,EAAyCA,EAAU,EAgB9E,EAAG,CAACU,EAAaT,MAAAA,EAAiD,KAAA,EAASA,EAAYiB,aAAcjB,MAAAA,EAAiD,KAAA,EAASA,EAAYc,iBAAkBf,EAAQ,EAOrM,OAAoBP,MAAM4B,cAAc,MAAO,CAC7CC,UAAW9B,WAAWK,eAAgBM,MAAAA,EAA2DA,EAAmB,EAAE,EACtHoB,MAAOnB,MAAAA,EAAmDA,EAAe,EAC3E,EAAgBX,MAAM4B,cAAc,MAAO,CACzCC,UAAW9B,WAAW,GAAGgC,OAAO3B,eAAgB,SAAS,EAAGQ,MAAAA,EAAuEA,EAAyB,EAAE,EAC9JkB,MAAOjB,MAAAA,EAA+DA,EAAqB,EAC7F,EAAgBb,MAAM4B,cAAc9B,UAAWf,SAAS,CACtDiD,SAbF,SAAkBC,GAChBf,EAAee,CAAK,CACtB,EAYEC,QAXF,WACEhB,EAAe,EAAE,CACnB,CAUA,EAAGV,CAAW,CAAC,CAAC,EAAgBR,MAAM4B,cAAc,MAAO,CACzDC,UAAW9B,WAAW,GAAGgC,OAAO3B,eAAgB,OAAO,EAAGU,MAAAA,EAAmEA,EAAuB,EAAE,EACtJgB,MAAOf,MAAAA,EAA2DA,EAAmB,EACvF,EAAGN,MAAAA,EAA2C,KAAA,EAASA,EAASe,CAAa,CAAC,CAAC,CACjF,gBACenB"}