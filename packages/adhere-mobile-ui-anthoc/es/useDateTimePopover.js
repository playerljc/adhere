import{useUpdateEffect}from"ahooks";import React,{useMemo,useRef,useState}from"react";import Intl from"@baifendian/adhere-util-intl";var selectorPrefix="adhere-mobile-ui-ant-hoc-date-timer-popover";function useDateTimePopover(e){var t=e.popoverTriggerClassName,r=e.popoverTriggerStyle,n=e.placeholder,o=e.value,l=e.okLabel,a=e.cancelLabel,c=e.clearLabel,u=e.allowClearValue,i=void 0===u||u,s=e.formatValue,u=useState("".concat(Date.now())),e=u[0],m=u[1],f=useRef(o);function v(e){f.current=e}var p=useMemo(function(){var e=React.createElement("div",{className:"".concat(selectorPrefix,"-placeholder")},null!=n?n:Intl.v("请选择"));return React.createElement(React.Fragment,null,!!o&&(s||e),!o&&e)},[o,n,s]),u=useMemo(function(){return[{key:"submit",text:null!=l?l:Intl.v("确定"),primary:!0,onClick:function(){var e;return Promise.resolve(null!=(e=f.current)?e:new Date)}},i&&{key:"clear",text:null!=c?c:Intl.v("清除"),onClick:function(){return m("".concat(Date.now())),Promise.resolve(void 0)}},{key:"close",text:null!=a?a:Intl.v("关闭"),onClick:function(){return Promise.resolve(o)}}].filter(function(e){return!!e})},[i,c,l,a,o,f.current]);return useUpdateEffect(function(){v(o)},[o]),{key:e,actions:u,popoverTriggerProps:{className:null!=t?t:"",style:null!=r?r:{},renderTrigger:function(){return React.createElement("div",{className:"".concat(selectorPrefix,"-trigger")},p)}},setInternalValue:v}}export default useDateTimePopover;
//# sourceMappingURL=useDateTimePopover.js.map
