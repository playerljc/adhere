{"version":3,"file":"InputMultiple.js","sources":["input-multiple/InputMultiple.js"],"sourcesContent":["import _CloseOutline from \"antd-mobile-icons/es/CloseOutline\";\nimport _AddOutline from \"antd-mobile-icons/es/AddOutline\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport React, { useMemo, useState } from 'react';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport Hooks from '@baifendian/adhere-ui-hooks';\nimport Space from '@baifendian/adhere-ui-space';\nimport Intl from '@baifendian/adhere-util-intl';\nimport Input from '../input';\nimport Selector from '../selector';\nvar selectorPrefix = 'adhere-mobile-ui-anthoc-input-multiple';\nvar usePropToState = Hooks.usePropToState;\n/**\n * InputMultiple\n * @param className\n * @param style\n * @param tagWrapperClassName\n * @param inputProps\n * @param renderAdd\n * @param renderClear\n * @param isCheckAll\n * @param options\n * @param value\n * @param onChange\n */\nvar InputMultiple = function (_a) {\n  var _b, _c;\n  var className = _a.className,\n    style = _a.style,\n    selectorWrapperClassName = _a.selectorWrapperClassName,\n    selectorWrapperStyle = _a.selectorWrapperStyle,\n    inputProps = _a.inputProps,\n    selectorProps = _a.selectorProps,\n    renderAdd = _a.renderAdd,\n    renderClear = _a.renderClear,\n    isCheckAll = _a.isCheckAll,\n    isFilter = _a.isFilter,\n    options = _a.options,\n    value = _a.value,\n    onChange = _a.onChange;\n  var _d = useState(''),\n    inputValue = _d[0],\n    setInputValue = _d[1];\n  var _e = usePropToState(options),\n    selectOptions = _e[0],\n    setSelectOptions = _e[1];\n  var _f = usePropToState(value),\n    targetValue = _f[0],\n    setTargetValue = _f[1];\n  var targetSelectorProps = useMemo(function () {\n    return selectorProps !== null && selectorProps !== void 0 ? selectorProps : {};\n  }, [selectorProps]);\n  var isCheckAllTarget = useMemo(function () {\n    return !!isCheckAll;\n  }, [isCheckAll]);\n  var isFilterTarget = useMemo(function () {\n    return !!isFilter;\n  }, [isFilter]);\n  var selectorOptions = useMemo(function () {\n    return (selectOptions !== null && selectOptions !== void 0 ? selectOptions : []).map(function (t) {\n      return __assign(__assign({}, t), {\n        description: t.label\n      });\n    });\n  }, [selectOptions]);\n  var SelectorComponent = useMemo(function () {\n    if (isFilterTarget) {\n      if (isCheckAllTarget) {\n        return Selector.FilterCheckAllSelector;\n      }\n      return Selector.FilterSelector;\n    } else {\n      if (isCheckAllTarget) {\n        return Selector.CheckAllSelector;\n      }\n      return Selector;\n    }\n  }, [isFilterTarget, isCheckAllTarget]);\n  /**\n   * onAdd\n   */\n  function onAdd() {\n    var targetInputValue = inputValue.trim();\n    if (!targetInputValue) return;\n    var item = (selectOptions !== null && selectOptions !== void 0 ? selectOptions : []).find(function (t) {\n      return t.value === targetInputValue;\n    });\n    if (!item) {\n      setSelectOptions(function (_options) {\n        return __spreadArray(__spreadArray([], _options !== null && _options !== void 0 ? _options : [], true), [{\n          label: inputValue,\n          value: inputValue\n        }], false);\n      });\n    }\n  }\n  /**\n   * onClear\n   */\n  function onClear() {\n    setSelectOptions([]);\n    setInputValue('');\n    setTargetValue([]);\n    // @ts-ignore\n    onChange === null || onChange === void 0 ? void 0 : onChange([]);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className),\n    style: style !== null && style !== void 0 ? style : {}\n  }, /*#__PURE__*/React.createElement(FlexLayout, {\n    direction: \"horizontal\"\n  }, /*#__PURE__*/React.createElement(Space.Group, {\n    direction: \"horizontal\",\n    size: 10\n  }, /*#__PURE__*/React.createElement(FlexLayout.Auto, null, /*#__PURE__*/React.createElement(Input, __assign({\n    placeholder: Intl.v('请输入关键字')\n  }, inputProps !== null && inputProps !== void 0 ? inputProps : {}, {\n    value: inputValue,\n    onChange: function (_value) {\n      setInputValue(_value);\n    }\n  }))), /*#__PURE__*/React.createElement(FlexLayout.Fixed, {\n    fit: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onAdd,\n    className: \"\".concat(selectorPrefix, \"-btn-wrapper\")\n  }, (_b = renderAdd === null || renderAdd === void 0 ? void 0 : renderAdd()) !== null && _b !== void 0 ? _b : /*#__PURE__*/React.createElement(_AddOutline, {\n    className: \"\".concat(selectorPrefix, \"-btn\")\n  }))), /*#__PURE__*/React.createElement(FlexLayout.Fixed, {\n    fit: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onClear,\n    className: \"\".concat(selectorPrefix, \"-btn-wrapper\")\n  }, (_c = renderClear === null || renderClear === void 0 ? void 0 : renderClear()) !== null && _c !== void 0 ? _c : /*#__PURE__*/React.createElement(_CloseOutline, {\n    className: \"\".concat(selectorPrefix, \"-btn\")\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-tag-wrapper\"), selectorWrapperClassName !== null && selectorWrapperClassName !== void 0 ? selectorWrapperClassName : ''),\n    style: selectorWrapperStyle !== null && selectorWrapperStyle !== void 0 ? selectorWrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(SelectorComponent, __assign({\n    multiple: true\n  }, targetSelectorProps, {\n    options: selectorOptions !== null && selectorOptions !== void 0 ? selectorOptions : [],\n    value: targetValue,\n    onChange: function () {\n      var params = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        params[_i] = arguments[_i];\n      }\n      setTargetValue(params[0]);\n      // @ts-ignore\n      onChange === null || onChange === void 0 ? void 0 : onChange.apply(void 0, params);\n    }\n  }))));\n};\nexport default InputMultiple;"],"names":["_CloseOutline","_AddOutline","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","ar","l","Array","slice","concat","classNames","React","useMemo","useState","FlexLayout","Hooks","Space","Intl","Input","Selector","selectorPrefix","usePropToState","InputMultiple","_a","className","style","selectorWrapperClassName","selectorWrapperStyle","inputProps","selectorProps","renderAdd","renderClear","isCheckAll","isFilter","options","value","onChange","_d","inputValue","setInputValue","_e","selectOptions","setSelectOptions","_f","targetValue","setTargetValue","targetSelectorProps","isCheckAllTarget","isFilterTarget","selectorOptions","map","description","label","SelectorComponent","FilterCheckAllSelector","FilterSelector","CheckAllSelector","createElement","direction","Group","size","Auto","placeholder","v","_value","Fixed","fit","onClick","targetInputValue","trim","find","_options","_b","_c","multiple","params","_i"],"mappings":"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"}