"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,t,r,a){void 0===a&&(a=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,o)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),config_provider_1=require("antd-mobile/es/components/config-provider/config-provider"),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),date_picker_view_1=__importDefault(require("./date-picker-view")),selectorPrefix="adhere-mobile-ui-ant-hoc-date-popover",useDatePopover=function(e){var t=e.popoverTriggerClassName,r=e.popoverTriggerStyle,a=e.placeholder,o=e.value,n=e.okLabel,l=e.cancelLabel,i=e.renderDisplay,c=e.locale,u=__rest(e,["popoverTriggerClassName","popoverTriggerStyle","placeholder","value","okLabel","cancelLabel","renderDisplay","locale"]),s=(0,react_1.useRef)(null!=(e=null!=o?o:u.defaultValue)?e:new Date),f=(0,config_provider_1.useConfig)(),_=(0,react_1.useMemo)(function(){if(!o)return"";var e=null!=(t=null!=c?c:f.locale.locale)?t:"zh";if(i)return i(o,e);var t=u.precision,t=void 0===t?"day":t,r=o.toLocaleDateString(e).split(/[-/]/gim),a="";switch(t){case"year":a="".concat(o.getFullYear());break;case"month":a=[r[0],r[1]].join("/");break;case"minute":"".concat(o.toLocaleDateString(e)," ").concat([o.getHours(),o.getMinutes()].join(":"));break;case"second":a="".concat(o.toLocaleDateString(e)," ").concat(o.toLocaleTimeString(e));break;case"hour":a="".concat(o.toLocaleDateString(e)," ").concat(o.getHours());break;case"day":case"week":case"week-day":a=o.toLocaleDateString(e);break;default:a=""}return a},[o]),e=(0,react_1.useMemo)(function(){return[{key:"submit",text:null!=n?n:adhere_util_intl_1.default.v("确定"),primary:!0,onClick:function(){return Promise.resolve(s.current)}},{key:"close",text:null!=l?l:adhere_util_intl_1.default.v("关闭"),onClick:function(){return Promise.resolve(o)}}]},[n,l,s.current]);return(0,ahooks_1.useUpdateEffect)(function(){s.current=o},[o]),{actions:e,popoverTriggerProps:{className:null!=t?t:"",style:null!=r?r:{},renderTrigger:function(){return react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-trigger")},!!o&&_,!o&&react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-placeholder")},null!=a?a:adhere_util_intl_1.default.v("请选择")))}},children:react_1.default.createElement(date_picker_view_1.default,__assign({defaultValue:new Date},u,{onChange:function(e){s.current=e}}))}};exports.default=useDatePopover;
//# sourceMappingURL=useDatePopover.js.map
