{"version":3,"file":"Form.js","sources":["form/Form.js"],"sourcesContent":["\"use strict\";\n\nvar __spreadArray = void 0 && (void 0).__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar antd_mobile_1 = require(\"antd-mobile\");\nvar adhere_util_validator_1 = __importDefault(require(\"@baifendian/adhere-util-validator\"));\nvar util_1 = require(\"../util\");\nvar CustomWrapperFormItem_1 = __importDefault(require(\"./CustomWrapperFormItem\"));\nvar FormItem_1 = __importDefault(require(\"./FormItem\"));\nvar NestingFormItem_1 = __importDefault(require(\"./NestingFormItem\"));\nvar FormHOC = (0, util_1.createFactory)(antd_mobile_1.Form, {});\n// entityInValue\n// dataSourceProp 数据源属性\nvar ValidatorRules;\n(function () {\n  var excludes = ['default', 'version', 'toDate', 'toFloat', 'toInt', 'toBoolean', 'equals', 'contains', 'matches', 'ltrim', 'rtrim', 'trim', 'escape', 'unescape', 'stripLow', 'whitelist', 'blacklist', 'isWhitelisted', 'normalizeEmail', 'toString'];\n  /**\n   * 设置Rules\n   * Rules根据@baifendian/adhere-util-validator库来生成\n   */\n  ValidatorRules = Array.from(Object.keys(adhere_util_validator_1.default)).filter(function (_key) {\n    return !excludes.includes(_key);\n  }).reduce(function (result, _key) {\n    result[_key] = function (argv) {\n      return {\n        /**\n         * validator\n         * @description 主要是实现validator方法\n         * @param _\n         * @param value\n         */\n        validator: function (_, value) {\n          var self = this;\n          function validate() {\n            var _a;\n            // 调用Validator的指定方法进行校验\n            if (!adhere_util_validator_1.default[_key].apply(self, __spreadArray([value], (argv === null || argv === void 0 ? void 0 : argv.params) || [], true))) {\n              return Promise.reject((_a = argv === null || argv === void 0 ? void 0 : argv.invalidMessage) !== null && _a !== void 0 ? _a : '');\n            }\n            return Promise.resolve();\n          }\n          if (_ === null || _ === void 0 ? void 0 : _.required) {\n            if (!value) {\n              return Promise.reject(_ === null || _ === void 0 ? void 0 : _.message);\n            } else {\n              return validate();\n            }\n          } else {\n            if (!value) {\n              return Promise.resolve();\n            } else {\n              return validate();\n            }\n          }\n        }\n      };\n    };\n    return result;\n  }, {});\n})();\nFormHOC.ValidatorRules = ValidatorRules;\nFormHOC.Item = FormItem_1.default;\nFormHOC.NestingFormItem = NestingFormItem_1.default;\nFormHOC.CustomWrapperFormItem = CustomWrapperFormItem_1.default;\nFormHOC.displayName = 'Form';\nexports.default = FormHOC;"],"names":["ValidatorRules","__spreadArray","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","__importDefault","mod","__esModule","default","antd_mobile_1","Object","defineProperty","exports","value","require","adhere_util_validator_1","util_1","CustomWrapperFormItem_1","FormItem_1","NestingFormItem_1","FormHOC","createFactory","Form","excludes","keys","filter","_key","includes","reduce","result","argv","validator","_","self","this","validate","_a","apply","params","Promise","resolve","reject","invalidMessage","required","message","Item","NestingFormItem","CustomWrapperFormItem","displayName"],"mappings":"AAAA,aAEA,IA0BIA,eA1BAC,cAAoD,SAAUC,EAAIC,EAAMC,GAC1E,GAAIA,GAA6B,IAArBC,UAAUC,OAAc,IAAK,IAA4BC,EAAxBC,EAAI,EAAGC,EAAIN,EAAKG,OAAYE,EAAIC,EAAGD,CAAC,GAC3ED,CAAAA,GAAQC,KAAKL,KACVI,EAAAA,GAASG,MAAMC,UAAUC,MAAMC,KAAKV,EAAM,EAAGK,CAAC,GAChDA,GAAKL,EAAKK,IAGjB,OAAON,EAAGY,OAAOP,GAAMG,MAAMC,UAAUC,MAAMC,KAAKV,CAAI,CAAC,CACzD,EACIY,gBAAwD,SAAUC,GACpE,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnCE,QAAWF,CACb,CACF,EAIIG,eAHJC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACmBC,QAAQ,aAAa,GACrCC,wBAA0BV,gBAAgBS,QAAQ,mCAAmC,CAAC,EACtFE,OAASF,QAAQ,SAAS,EAC1BG,wBAA0BZ,gBAAgBS,QAAQ,yBAAyB,CAAC,EAC5EI,WAAab,gBAAgBS,QAAQ,YAAY,CAAC,EAClDK,kBAAoBd,gBAAgBS,QAAQ,mBAAmB,CAAC,EAChEM,SAAU,EAAIJ,OAAOK,eAAeZ,cAAca,KAAM,EAAE,EAI9D,CAAA,WACE,IAAIC,EAAW,CAAC,UAAW,UAAW,SAAU,UAAW,QAAS,YAAa,SAAU,WAAY,UAAW,QAAS,QAAS,OAAQ,SAAU,WAAY,WAAY,YAAa,YAAa,gBAAiB,iBAAkB,YAK3OjC,eAAiBU,MAAMP,KAAKiB,OAAOc,KAAKT,wBAAwBP,OAAO,CAAC,EAAEiB,OAAO,SAAUC,GACzF,MAAO,CAACH,EAASI,SAASD,CAAI,CAChC,CAAC,EAAEE,OAAO,SAAUC,EAAQH,GAmC1B,OAlCAG,EAAOH,GAAQ,SAAUI,GACvB,MAAO,CAOLC,UAAW,SAAUC,EAAGnB,GACtB,IAAIoB,EAAOC,KACX,SAASC,IACP,IAAIC,EAEJ,OAAKrB,wBAAwBP,QAAQkB,GAAMW,MAAMJ,EAAM1C,cAAc,CAACsB,IAASiB,MAAAA,EAAmC,KAAA,EAASA,EAAKQ,SAAW,GAAI,CAAA,CAAI,CAAC,EAG7IC,QAAQC,QAAQ,EAFdD,QAAQE,OAAO,OAACL,EAAKN,MAAAA,EAAmC,KAAA,EAASA,EAAKY,gBAA4CN,EAAK,EAAE,CAGpI,CACA,OAAIJ,MAAAA,GAAsCA,EAAEW,SACrC9B,EAGIsB,EAAS,EAFTI,QAAQE,OAAOT,MAAAA,EAA6B,KAAA,EAASA,EAAEY,OAAO,EAKlE/B,EAGIsB,EAAS,EAFTI,QAAQC,QAAQ,CAK7B,CACF,CACF,EACOX,CACT,EAAG,EAAE,CACN,EAAE,EACHT,QAAQ9B,eAAiBA,eACzB8B,QAAQyB,KAAO3B,WAAWV,QAC1BY,QAAQ0B,gBAAkB3B,kBAAkBX,QAC5CY,QAAQ2B,sBAAwB9B,wBAAwBT,QACxDY,QAAQ4B,YAAc,OACtBpC,QAAQJ,QAAUY"}