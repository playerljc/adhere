"use strict";var lock,__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},antd_mobile_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=exports.show=exports.PopupWrapper=void 0,require("antd-mobile")),classnames_1=__importDefault(require("classnames")),react_1=__importDefault(require("react")),client_1=__importDefault(require("react-dom/client")),popupHandlers=new Map,selectorPrefix="adhere-mobile-ui-ant-hoc-show-popup-inner";function PopupWrapper(e){var t=e.actions,r=e.closeOnAction,s=void 0!==r&&r,r=e.title,o=e.header,n=(e.close,e.children),u=__rest(e,["actions","closeOnAction","title","header","close","children"]),e=u.showCloseButton,e=void 0===e||e;return react_1.default.createElement(antd_mobile_1.Popup,__assign({},u),react_1.default.createElement("div",{className:selectorPrefix},(e||!!r)&&react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-title")},r),!!o&&react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-header")},o),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-body")},n),!(null==t||!t.length)&&react_1.default.createElement("ul",{className:"".concat(selectorPrefix,"-actions")},t.map(function(e){var t=e.key,r=e.className,o=e.style,n=e.text,a=e.primary,a=void 0!==a&&a,l=e.disabled,l=void 0!==l&&l,c=e.danger,c=void 0!==c&&c,i=e.onClick;return react_1.default.createElement("li",{key:t,className:(0,classnames_1.default)("".concat(selectorPrefix,"-action"),null!=r?r:""),style:null!=o?o:{}},react_1.default.createElement(antd_mobile_1.Button,{block:!0,loading:"auto",color:c?"danger":"primary",fill:a?"solid":"none",disabled:l,onClick:function(){var e=null==i?void 0:i();e&&e.then?e.then(function(){s&&null!=u&&u.onClose()}):s&&null!=u&&u.onClose()}},n))}))))}function show(e){var t,r,o;if(!lock)return lock=!0,t=__assign({},e),r=document.createElement("div"),document.body.appendChild(r),o=client_1.default.createRoot(r),n(!1),popupHandlers.set(r,o),{close:a,setConfig:function(e){t=e(t),n(!0)}};function n(e){o.render(react_1.default.createElement(PopupWrapper,__assign({visible:e,getContainer:function(){return r},close:a},t)))}function a(){n(!1),setTimeout(function(){popupHandlers.delete(r),o.unmount(),lock=!1},300)}}function clear(){try{Array.from(popupHandlers.values()).forEach(function(e){e&&e.unmount()}),lock=!1,popupHandlers.clear()}catch(e){console.error(e)}}exports.PopupWrapper=PopupWrapper,exports.show=show,exports.clear=clear;
//# sourceMappingURL=show.js.map
