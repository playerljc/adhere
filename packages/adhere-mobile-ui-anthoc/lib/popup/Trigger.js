"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,l=arguments.length;t<l;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,l){void 0===l&&(l=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&("get"in o?r.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,l,o)}:function(e,r,t,l){e[l=void 0===l?t:l]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__rest=function(e,r){var t={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(t[o[l]]=e[o[l]]);return t},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),react_1=__importStar(require("react")),react_dom_1=require("react-dom"),PopoverTrigger_1=__importDefault(require("../PopoverTrigger")),util_1=require("../util"),Context_1=__importDefault(require("./Context")),show_1=require("./show"),selectorPrefix="adhere-mobile-ui-ant-hoc-modal-trigger",InternalPopupTrigger=(0,react_1.memo)(function(e){var r,t=e.className,l=e.value,o=e.onChange,a=e.actions,n=e.popoverTriggerProps,u=e.disabled,u=void 0!==u&&u,i=e.children,c=__rest(e,["className","value","onChange","actions","popoverTriggerProps","disabled","children"]),e=(0,react_1.useState)(!1),s=e[0],_=e[1],f=(0,react_1.useRef)();var e=(0,react_1.useMemo)(function(){var e;return __assign(__assign({visible:s,destroyOnClose:!0,closeOnMaskClick:!0,showCloseButton:!0,closeOnAction:!0},c),{className:(0,classnames_1.default)("".concat(selectorPrefix,"-popup"),null!=(e=c.popupClassName)?e:""),style:null!=(e=c.style)?e:{},actions:(null!=a?a:[]).map(function(r){return __assign(__assign({},r),{onClick:function(){return null==(e=null==(e=r.onClick)?void 0:e())?void 0:e.then(function(e){d(),null!=o&&o(void 0!==e?null===e?void 0:e:null==(e=f.current)?void 0:e.getValue())});var e}})}),children:i&&react_1.default.createElement(util_1.ValueHOC,{className:"".concat(selectorPrefix,"-value-hoc"),ref:f,defaultFormItemValue:l},i),afterClose:function(){var e;null!=(e=null==c?void 0:c.afterClose)&&e.call(c)},onClose:function(){var e;d(),null!=(e=null==c?void 0:c.onClose)&&e.call(c)}})},[c,a,i,l,o,s]),p=(0,react_1.useCallback)(function(){_(!0)},[e]);function d(){_(!1)}return react_1.default.createElement(Context_1.default.Provider,{value:{close:d}},(0,react_dom_1.createPortal)(react_1.default.createElement(show_1.PopupWrapper,__assign({},e,{bodyClassName:(0,classnames_1.default)("".concat(selectorPrefix,"-modal-body"),e.bodyClassName)})),null!=(r=null==(r=null==e?void 0:e.getContainer)?void 0:r.call(e))?r:document.body),react_1.default.createElement(PopoverTrigger_1.default,__assign({className:(0,classnames_1.default)(selectorPrefix,null!=t?t:""),value:l,renderPopover:p,disabled:null!=u&&u},null!=n?n:{})))}),PopupTrigger=InternalPopupTrigger;PopupTrigger.displayName="PopupTrigger",exports.default=PopupTrigger;
//# sourceMappingURL=Trigger.js.map
