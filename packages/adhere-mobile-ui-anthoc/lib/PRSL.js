"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,a){void 0===a&&(a=t);var n=Object.getOwnPropertyDescriptor(r,t);n&&("get"in n?r.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,a,n)}:function(e,r,t,a){e[a=void 0===a?t:a]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},antd_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("antd")),antd_mobile_1=require("antd-mobile"),classnames_1=__importDefault(require("classnames")),react_1=__importStar(require("react")),adhere_ui_backtopanimation_1=__importDefault(require("@baifendian/adhere-ui-backtopanimation")),adhere_ui_scrollload_1=__importDefault(require("@baifendian/adhere-ui-scrollload")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-mobile-ui-ant-hoc-prsl",PRSL=(0,react_1.memo)((0,react_1.forwardRef)(function(e,r){var t=e.className,a=e.style,n=e.scrollLoadProps,l=e.pullToRefreshProps,o=e.isLoading,i=e.firstLoading,c=e.loading,u=e.pages,d=e.onRefreshBefore,s=e.onRefresh,_=e.onLoadMore,f=e.children;function m(){var e;return null!=(e=null==(e=v.current)?void 0:e.getScrollContainer())?e:document.body}var v=(0,react_1.useRef)(),e=(0,react_1.useRef)(!0),p=(0,react_1.useRef)(!1),b=(0,react_1.useCallback)(function(){if(i)return i();for(var e=[],r=0;r<15;r++)e.push(react_1.default.createElement(antd_1.Skeleton,{key:r+1,loading:!0,active:!0,avatar:!0}));return react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-first-loading")},e)},[i]),g=(0,react_1.useCallback)(function(){return c?c():react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-loading")},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-loading-dot")},react_1.default.createElement(antd_mobile_1.DotLoading,{color:"primary"})),react_1.default.createElement("div",null,"".concat(adhere_util_intl_1.default.v("数据加载中")),"..."))},[c]),h=(0,react_1.useCallback)(function(){var e;return react_1.default.createElement(antd_mobile_1.PullToRefresh,__assign({},null!=l?l:{},{onRefresh:function(){return(d?d():Promise.resolve()).then(function(){return null==s?void 0:s()})}}),react_1.default.createElement(adhere_ui_scrollload_1.default,__assign({ref:v,renderLoading:g,onScrollBottom:_,distance:(null==n?void 0:n.distance)||50,disabled:u<=1},n||{},{className:(0,classnames_1.default)(null!=(e=null==n?void 0:n.className)?e:"","".concat(selectorPrefix,"-scroll-load"))}),f),react_1.default.createElement(adhere_ui_backtopanimation_1.default,{getContainer:m,onTrigger:function(){return Promise.resolve()}}))},[d,s,_,n,l,f]);return(0,react_1.useImperativeHandle)(r,function(){return{getScrollEl:m,hideAll:function(){var e,r;return null==(r=null==(e=null==v?void 0:v.current)?void 0:e.hideAll)?void 0:r.call(e)}}}),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,null!=t?t:""),style:null!=a?a:{}},(e.current&&!p.current&&o&&(p.current=!0),e.current&&p.current&&!o&&(e.current=!1,p.current=!1),(e.current?b:h)()))}));exports.default=PRSL;
//# sourceMappingURL=PRSL.js.map
