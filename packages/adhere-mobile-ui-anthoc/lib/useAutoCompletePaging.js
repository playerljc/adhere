"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ahooks_1=require("ahooks"),react_1=require("react"),Paging_1=require("./Paging");function UseAutoCompletePaging(n){var e=n.defaultSearchDataSource,t=n.pagingComponentProps,l=n.loadData,u=n.onDataSourceChange,r=(0,react_1.useRef)(!1),i=(0,react_1.useRef)(void 0),n=(0,react_1.useState)({data:null!=e?e:[],total:(null!=e?e:[]).length}),c=n[0],a=n[1],o=(0,react_1.useMemo)(function(){var n;return!("isLocal"in(null==t?void 0:t.pagingProps))||(null==(n=null==t?void 0:t.pagingProps)?void 0:n.isLocal)},[null==(n=null==t?void 0:t.pagingProps)?void 0:n.isLocal]),n=(0,react_1.useMemo)(function(){var n=t;return o||(n.pagingProps.onLoad=function(a,o){return new Promise(function(e){var n,t;r.current?(r.current=!1,e(c)):null!=(t=null==(n=null==l?void 0:l(i.current,a,o))?void 0:n.then)&&t.call(n,function(n){null!=u&&u(i.current,n.data),e(n)})})}),n},[t,o,c,l]),d=(0,react_1.useCallback)(function(n){r.current=!0;var e,n=[i.current=n,void 0,void 0];return o||n.push(1,null!=(e=null==(e=null==(e=null==t?void 0:t.pagingProps)?void 0:e.defaultPaging)?void 0:e.limit)?e:Paging_1.DEFAULT_LIMIT),null==(n=null==(e=null==l?void 0:l.apply(void 0,n.filter(function(n){return!!n})))?void 0:e.then)?void 0:n.call(e,function(n){return a(n),null!=u&&u(1,n.data),n})},[o,l,t]);return(0,ahooks_1.useUpdateEffect)(function(){a({data:null!=e?e:[],total:(null!=e?e:[]).length})},[e]),{searchDataSource:c,targetPagingComponentProps:n,autoCompleteLoadData:d}}exports.default=UseAutoCompletePaging;
//# sourceMappingURL=useAutoCompletePaging.js.map
