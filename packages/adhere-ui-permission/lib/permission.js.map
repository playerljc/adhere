{"version":3,"file":"permission.js","sources":["permission.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PermissionFun = exports.Permission = exports.checkPermission = exports.getPermission = exports.setPermission = void 0;\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\nvar react_1 = __importDefault(require(\"react\"));\nvar adhere_ui_conditionalrender_1 = __importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n// 所有的权限\nvar permissions = [];\n/**\n * setPermission - 设置拥有的所有权限\n * @param {Array<String>} permission\n */\nvar setPermission = function (permission) {\n    permissions = permission;\n};\nexports.setPermission = setPermission;\n/**\n * getPermission - 获取拥有的所有权限\n * @return\n */\nvar getPermission = function () { return JSON.parse(JSON.stringify(permissions)); };\nexports.getPermission = getPermission;\n/**\n * checkPermission - 判断是否有权限方法\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} currentPermissions 当前组件或者页面对应得权限key\n * @return boolean\n */\nvar checkPermission = function (allPermission, currentPermissions) {\n    if (allPermission === void 0) { allPermission = (0, exports.getPermission)(); }\n    allPermission = allPermission || (0, exports.getPermission)();\n    // 所有的权限\n    if (!allPermission || !Array.isArray(allPermission) || !currentPermissions) {\n        return true;\n    }\n    if (Array.isArray(currentPermissions)) {\n        return currentPermissions.every(function (curPermissions) { return allPermission.indexOf(curPermissions) !== -1; });\n    }\n    return allPermission.indexOf(currentPermissions) !== -1;\n};\nexports.checkPermission = checkPermission;\n/**\n * Permission - 组件或者某一个模块的权限渲染方式\n * @param {Array<String>} allPermission\n * @param {String | Array<String>} permissions 当前组件或者某一个模块对应得权限key\n * @param {String | ReactElement} children 想要渲染的部分\n * @param {String | ReactElement} noMatch 没有权限是想要提示的部分\n * @return {String | ReactElement}\n */\nvar Permission = function (_a) {\n    var _b = _a.allPermission, allPermission = _b === void 0 ? (0, exports.getPermission)() : _b, permissions = _a.permissions, children = _a.children, noMatch = _a.noMatch;\n    return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: (0, exports.checkPermission)(allPermission, permissions), noMatch: noMatch }, children));\n};\nexports.Permission = Permission;\n/**\n * PermissionFun - 函数方式实现\n * @param allPermission\n * @param permissions\n * @param match\n * @param noMatch\n * @constructor\n */\nfunction PermissionFun(_a) {\n    var _b = _a.allPermission, allPermission = _b === void 0 ? (0, exports.getPermission)() : _b, permissions = _a.permissions, match = _a.match, noMatch = _a.noMatch;\n    return adhere_ui_conditionalrender_1.default.conditionalRender({\n        conditional: (0, exports.checkPermission)(allPermission, permissions),\n        match: match,\n        noMatch: noMatch,\n    });\n}\nexports.PermissionFun = PermissionFun;\nexports.Permission.defaultProps = {\n    allPermission: undefined,\n    permissions: '',\n    noMatch: null,\n    children: null,\n};\nexports.Permission.propTypes = {\n    allPermission: prop_types_1.default.array,\n    permissions: prop_types_1.default.oneOfType([prop_types_1.default.array, prop_types_1.default.string]),\n    noMatch: prop_types_1.default.node,\n    children: prop_types_1.default.node,\n};\n"],"names":["__importDefault","this","mod","__esModule","default","prop_types_1","Object","defineProperty","exports","value","PermissionFun","Permission","checkPermission","getPermission","setPermission","require","react_1","adhere_ui_conditionalrender_1","permissions","permission","JSON","parse","stringify","allPermission","currentPermissions","Array","isArray","every","curPermissions","indexOf","_a","_b","children","noMatch","createElement","conditional","match","conditionalRender","defaultProps","undefined","propTypes","array","oneOfType","string","node"],"mappings":"AAAA,aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAGIG,cAFJC,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5DD,QAAQE,cAAgBF,QAAQG,WAAaH,QAAQI,gBAAkBJ,QAAQK,cAAgBL,QAAQM,cAAgB,KAAA,EACpGd,gBAAgBe,QAAQ,YAAY,CAAC,GACpDC,QAAUhB,gBAAgBe,QAAQ,OAAO,CAAC,EAC1CE,8BAAgCjB,gBAAgBe,QAAQ,yCAAyC,CAAC,EAElGG,YAAc,GAKdJ,cAAgB,SAAUK,GAC1BD,YAAcC,CAClB,EAMIN,eALJL,QAAQM,cAAgBA,cAKJ,WAAc,OAAOM,KAAKC,MAAMD,KAAKE,UAAUJ,WAAW,CAAC,CAAG,GAQ9EN,iBAPJJ,QAAQK,cAAgBA,cAOF,SAAUU,EAAeC,GAI3C,MAAI,GAFJD,GADgCA,EAAV,KAAA,IAAlBA,GAA4C,EAAIf,QAAQK,eAAe,EAC3DU,KAAiB,EAAIf,QAAQK,eAAe,IAErCY,MAAMC,QAAQH,CAAa,GAAMC,KAGpDC,MAAMC,QAAQF,CAAkB,EACzBA,EAAmBG,MAAM,SAAUC,GAAkB,MAAiD,CAAC,IAA3CL,EAAcM,QAAQD,CAAc,CAAU,CAAC,EAEjE,CAAC,IAA/CL,EAAcM,QAAQL,CAAkB,EACnD,GAUIb,YATJH,QAAQI,gBAAkBA,gBAST,SAAUkB,GACvB,IAAIC,EAAKD,EAAGP,cAAeA,EAAuB,KAAA,IAAPQ,GAAgB,EAAIvB,QAAQK,eAAe,EAAIkB,EAAIb,EAAcY,EAAGZ,YAAac,EAAWF,EAAGE,SAAUC,EAAUH,EAAGG,QACjK,OAAQjB,QAAQZ,QAAQ8B,cAAcjB,8BAA8Bb,QAAS,CAAE+B,aAAa,EAAI3B,QAAQI,iBAAiBW,EAAeL,CAAW,EAAGe,QAASA,CAAQ,EAAGD,CAAS,CACvL,GAUA,SAAStB,cAAcoB,GACnB,IAAIC,EAAKD,EAAGP,cAAeA,EAAuB,KAAA,IAAPQ,GAAgB,EAAIvB,QAAQK,eAAe,EAAIkB,EAAIb,EAAcY,EAAGZ,YAAakB,EAAQN,EAAGM,MAAOH,EAAUH,EAAGG,QAC3J,OAAOhB,8BAA8Bb,QAAQiC,kBAAkB,CAC3DF,aAAa,EAAI3B,QAAQI,iBAAiBW,EAAeL,CAAW,EACpEkB,MAAOA,EACPH,QAASA,CACb,CAAC,CACL,CAhBAzB,QAAQG,WAAaA,WAiBrBH,QAAQE,cAAgBA,cACxBF,QAAQG,WAAW2B,aAAe,CAC9Bf,cAAegB,KAAAA,EACfrB,YAAa,GACbe,QAAS,KACTD,SAAU,IACd,EACAxB,QAAQG,WAAW6B,UAAY,CAC3BjB,cAAelB,aAAaD,QAAQqC,MACpCvB,YAAab,aAAaD,QAAQsC,UAAU,CAACrC,aAAaD,QAAQqC,MAAOpC,aAAaD,QAAQuC,OAAO,EACrGV,QAAS5B,aAAaD,QAAQwC,KAC9BZ,SAAU3B,aAAaD,QAAQwC,IACnC"}