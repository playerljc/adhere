"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,a=1,u=arguments.length;a<u;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,t,a,u){void 0===u&&(u=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,u,n)}:function(e,t,a,u){e[u=void 0===u?a:u]=t[a]},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),antd_1=require("antd"),classnames_1=__importDefault(require("classnames")),dayjs_1=__importDefault(require("dayjs")),quarterOfYear_1=__importDefault(require("dayjs/plugin/quarterOfYear")),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix=(dayjs_1.default.extend(quarterOfYear_1.default),"adhere-ui-quick-range-date"),labelByTypeMap=new Map([["a-d",function(e){return adhere_util_intl_1.default.vHtml("近{value}天",{value:e})}],["a-w",function(e){return adhere_util_intl_1.default.vHtml("近{value}周",{value:e})}],["a-M",function(e){return adhere_util_intl_1.default.vHtml("近{value}月",{value:e})}],["a-Q",function(e){return adhere_util_intl_1.default.vHtml("近{value}季度",{value:e})}],["a-y",function(e){return adhere_util_intl_1.default.vHtml("近{value}年",{value:e})}],["a-h",function(e){return adhere_util_intl_1.default.vHtml("近{value}小时",{value:e})}],["a-m",function(e){return adhere_util_intl_1.default.vHtml("近{value}分钟",{value:e})}],["a-s",function(e){return adhere_util_intl_1.default.vHtml("近{value}秒",{value:e})}],["a-ms",function(e){return adhere_util_intl_1.default.vHtml("近{value}毫秒",{value:e})}],["b-d",function(e){return adhere_util_intl_1.default.vHtml("未来{value}天",{value:e})}],["b-w",function(e){return adhere_util_intl_1.default.vHtml("未来{value}周",{value:e})}],["b-M",function(e){return adhere_util_intl_1.default.vHtml("未来{value}月",{value:e})}],["b-Q",function(e){return adhere_util_intl_1.default.vHtml("未来{value}季度",{value:e})}],["b-y",function(e){return adhere_util_intl_1.default.vHtml("未来{value}年",{value:e})}],["b-h",function(e){return adhere_util_intl_1.default.vHtml("未来{value}小时",{value:e})}],["b-m",function(e){return adhere_util_intl_1.default.vHtml("未来{value}分钟",{value:e})}],["b-s",function(e){return adhere_util_intl_1.default.vHtml("未来{value}秒",{value:e})}],["b-ms",function(e){return adhere_util_intl_1.default.vHtml("未来{value}毫秒",{value:e})}],["custom",function(){return adhere_util_intl_1.default.v("自定义")}]]),sync=function(e){var t,a;if(e)return a=e.type,t=e.value,isCustomByType(a)||null!=e&&e.start||null!=e&&e.end?e:(a=getDataRangeByValue(a,t),__assign(__assign({},e),{start:a[0],end:a[1]}))},stringValue=function(e){var t;if(e)return t=e.type,e=e.value,isCustomByType(t)?t:[t,e].toString()},numberToDayjs=function(e){return e.filter(function(e){return!!e}).length?e.map(function(e){return(0,dayjs_1.default)(e)}):null},datesToNumbers=function(e){return e&&e.length?e.map(function(e){return e.valueOf()}):[void 0,void 0]},getValueEntityByStringValue=function(e){e=e.split(",");return{type:e[0],value:Number(e[1])}},getDataRangeByValue=function(e,t){var e=e.split("-"),a=e[0],e=e[1],u=(0,dayjs_1.default)();return"b"===a?[u.subtract(t,e).valueOf(),u.valueOf()]:"a"===a?[u.valueOf(),u.add(t,e).valueOf()]:[void 0,void 0]},getLabel=function(e){var t,a=e.type,e=e.value;return null==(t=labelByTypeMap.get(a))?void 0:t(isCustomByType(a)?void 0:e)},isCustomByType=function(e){return"custom"===e},InternalQuickRangeDate=(0,react_1.memo)(function(e){var t=e.className,a=e.style,u=e.config,r=e.value,i=e.onChange,n=e.radioGroupProps,l=e.rangePickerProps,e=e.children,o=(0,react_1.useState)(sync(r)),_=o[0],s=o[1],v=(0,react_1.useMemo)(function(){return u||[{type:"a-d",value:7},{type:"a-w",value:1},{type:"a-M",value:3},{type:"a-Q",value:1},{type:"a-y",value:1},{type:"a-h",value:24},{type:"a-m",value:60},{type:"a-s",value:60},{type:"a-ms",value:1e3},{type:"b-d",value:7},{type:"b-w",value:1},{type:"b-M",value:3},{type:"b-Q",value:1},{type:"b-y",value:1},{type:"b-h",value:24},{type:"b-m",value:60},{type:"b-s",value:60},{type:"b-ms",value:1e3},{type:"custom"}]},[u]),o=(0,react_1.useMemo)(function(){return react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-group")},react_1.default.createElement(antd_1.Radio.Group,__assign({value:stringValue(_)},null!=n?n:{},{optionType:"button",buttonStyle:"solid"}),v.map(function(e){var t=e.type,a=e.value,u=e.label,e=e.render,n={type:t,value:a},l=stringValue(n);return react_1.default.createElement(antd_1.Radio.Button,{key:l,value:l,onChange:function(){var e=getDataRangeByValue(t,a),e=__assign(__assign({},n),{start:e[0],end:e[1]});s(e),null!=i&&i(e)}},null!=(e=null!=(l=null==e?void 0:e(r))?l:u)?e:getLabel({type:t,value:a}))})),isCustomByType(null==_?void 0:_.type)&&react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-range")},react_1.default.createElement(antd_1.DatePicker.RangePicker,__assign({},null!=l?l:{},{value:numberToDayjs([null==_?void 0:_.start,null==_?void 0:_.end]),onChange:function(e){var t=datesToNumbers(e);s(function(e){return{type:"custom",value:void 0,start:t[0],end:t[1]}}),null!=i&&i({type:"custom",value:void 0,start:t[0],end:t[1]})}}))))},[v,_,l,n]);return(0,ahooks_1.useUpdateEffect)(function(){s(r)},[r]),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,null!=t?t:""),style:null!=a?a:{}},e&&e({defaultElement:o,value:r,onChange:function(e){var t;isCustomByType(null==e?void 0:e.type)||(t=getDataRangeByValue(e.type,e.value),e=__assign(__assign({},e),{start:t[0],end:t[1]})),s(e),null!=i&&i(e)}}),!e&&o)}),QuickRangeDate=InternalQuickRangeDate;QuickRangeDate.displayName="QuickRangeDate",QuickRangeDate.stringValue=stringValue,QuickRangeDate.getLabel=getLabel,QuickRangeDate.numberToDayjs=numberToDayjs,QuickRangeDate.datesToNumbers=datesToNumbers,QuickRangeDate.getValueEntityByStringValue=getValueEntityByStringValue,exports.default=QuickRangeDate;
//# sourceMappingURL=QuickRangeDate.js.map
