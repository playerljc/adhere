{"version":3,"file":"notnull.js","sources":["notnull.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\r\n/**\r\n * createProxy\r\n * @param target\r\n * @return Object\r\n */\r\nfunction createProxy(target) {\r\n    if (adhere_util_1.default.isEmpty(target)) {\r\n        target = {};\r\n    }\r\n    // 只有对象和数组才能进行代理\r\n    if (!adhere_util_1.default.isObject(target) && !adhere_util_1.default.isArray(target))\r\n        return target;\r\n    // 创建代理\r\n    var proxy = new Proxy(target, {\r\n        get: function (target, p, receiver) {\r\n            var value = target[p];\r\n            if (adhere_util_1.default.isEmpty(value)) {\r\n                value = {};\r\n                target[p] = createProxy(value);\r\n            }\r\n            return Reflect.get(target, p, receiver);\r\n        },\r\n        // @ts-ignore\r\n        set: function (target, key, value, receiver) {\r\n            if (adhere_util_1.default.isEmpty(value)) {\r\n                value = {};\r\n            }\r\n            // 是数组\r\n            if (adhere_util_1.default.isArray(target)) {\r\n                // 数组的原始长度\r\n                var srcLength = target.length;\r\n                var result = Reflect.set(target, key, value, receiver);\r\n                // 数组的当前长度\r\n                var targetLength = target.length;\r\n                // 数组是删除\r\n                if (targetLength < srcLength) {\r\n                    // @ts-ignore\r\n                    console.log('删除', \"key:\" + key, \"value:\" + value);\r\n                }\r\n                // 数组是添加\r\n                else if (targetLength > srcLength) {\r\n                    // @ts-ignore\r\n                    console.log('添加', \"key:\" + key, \"value:\" + value);\r\n                    // 如果可以则会给value继续创建代理\r\n                    if (adhere_util_1.default.isObject(value) || adhere_util_1.default.isArray(value)) {\r\n                        value = createProxy(value);\r\n                        result = Reflect.set(target, key, value, receiver);\r\n                    }\r\n                }\r\n                // 数组修改\r\n                else {\r\n                    // @ts-ignore\r\n                    console.log('修改', \"key:\" + key, \"value:\" + value);\r\n                    // 如果可以则会给value继续创建代理\r\n                    if (adhere_util_1.default.isObject(value) || adhere_util_1.default.isArray(value)) {\r\n                        value = createProxy(value);\r\n                        result = Reflect.set(target, key, value, receiver);\r\n                    }\r\n                }\r\n            }\r\n            // 是对象\r\n            if (adhere_util_1.default.isObject(target)) {\r\n                value = createProxy(value);\r\n            }\r\n            return Reflect.set(target, key, value, receiver);\r\n        },\r\n    });\r\n    // 继续进行迭代，迭代target的所有属性，为srcObj的所有属性都进行代理\r\n    for (var p in target) {\r\n        var objItem = target[p];\r\n        if (adhere_util_1.default.isObject(objItem) || adhere_util_1.default.isArray(objItem)) {\r\n            target[p] = createProxy(objItem);\r\n        }\r\n    }\r\n    return proxy;\r\n}\r\nexports.default = (function (target) {\r\n    return createProxy(target);\r\n});\r\n"],"names":["__importDefault","this","mod","__esModule","default","Object","defineProperty","exports","value","adhere_util_1","require","createProxy","target","isEmpty","isObject","isArray","p","proxy","Proxy","get","receiver","Reflect","set","key","srcLength","targetLength","length","console","log","objItem"],"mappings":"aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,IAExDG,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtD,IAAIC,cAAgBT,gBAAgBU,QAAQ,4BAM5C,SAASC,YAAYC,GAKjB,GAJIH,cAAcL,QAAQS,QAAQD,KAC9BA,EAAS,KAGRH,cAAcL,QAAQU,SAASF,KAAYH,cAAcL,QAAQW,QAAQH,GAC1E,OAAOA,EAEX,IAuDSI,EAvDLC,EAAQ,IAAIC,MAAMN,EAAQ,CAC1BO,IAAK,SAAUP,EAAQI,EAAGI,GACtB,IAAIZ,EAAQI,EAAOI,GAKnB,OAJIP,cAAcL,QAAQS,QAAQL,KAC9BA,EAAQ,GACRI,EAAOI,GAAKL,YAAYH,IAErBa,QAAQF,IAAIP,EAAQI,EAAGI,IAGlCE,IAAK,SAAUV,EAAQW,EAAKf,EAAOY,GAK/B,IAEQI,EAGAC,EA+BR,OAxCIhB,cAAcL,QAAQS,QAAQL,KAC9BA,EAAQ,IAGRC,cAAcL,QAAQW,QAAQH,KAE1BY,EAAYZ,EAAOc,OACVL,QAAQC,IAAIV,EAAQW,EAAKf,EAAOY,IAEzCK,EAAeb,EAAOc,QAEPF,EAEfG,QAAQC,IAAI,KAAM,OAASL,EAAK,SAAWf,IAGvBgB,EAAfC,EAELE,QAAQC,IAAI,KAAM,OAASL,EAAK,SAAWf,GAU3CmB,QAAQC,IAAI,KAAM,OAASL,EAAK,SAAWf,IARvCC,cAAcL,QAAQU,SAASN,IAAUC,cAAcL,QAAQW,QAAQP,MACvEA,EAAQG,YAAYH,GACXa,QAAQC,IAAIV,EAAQW,EAAKf,EAAOY,MAejDX,cAAcL,QAAQU,SAASF,KAC/BJ,EAAQG,YAAYH,IAEjBa,QAAQC,IAAIV,EAAQW,EAAKf,EAAOY,MAI/C,IAASJ,KAAKJ,EAAQ,CAClB,IAAIiB,EAAUjB,EAAOI,IACjBP,cAAcL,QAAQU,SAASe,IAAYpB,cAAcL,QAAQW,QAAQc,MACzEjB,EAAOI,GAAKL,YAAYkB,IAGhC,OAAOZ,EAEXV,QAAQH,QAAU,SAAWQ,GACzB,OAAOD,YAAYC"}