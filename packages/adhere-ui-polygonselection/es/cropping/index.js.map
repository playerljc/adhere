{"version":3,"file":"index.js","sources":["cropping/index.js"],"sourcesContent":["import _Button from \"antd/es/button\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { forwardRef, memo, useCallback, useRef } from 'react';\nimport MessageDialog from '@baifendian/adhere-ui-messagedialog';\nimport Intl from '@baifendian/adhere-util-intl';\nimport CroppingCore from './CroppingCore';\nvar selectorPrefix = 'adhere-ui-polygon-selection-cropping';\n/**\n * ForwardRefRenderFunction\n * @param props\n * @param ref\n * @constructor\n */\nvar InternalCropping = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function (_a, ref) {\n  var className = _a.className,\n    style = _a.style,\n    maskClassName = _a.maskClassName,\n    maskStyle = _a.maskStyle,\n    mask = _a.mask,\n    value = _a.value,\n    onChange = _a.onChange,\n    modalProps = _a.modalProps,\n    coreProps = _a.coreProps;\n  var coreRef = useRef(null);\n  var renderMask = useCallback(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(classNames(\"\".concat(selectorPrefix, \"-mask\"), maskClassName !== null && maskClassName !== void 0 ? maskClassName : '')),\n      style: maskStyle !== null && maskStyle !== void 0 ? maskStyle : {},\n      onClick: function onClick() {\n        var dialog = MessageDialog.Modal({\n          config: __assign({\n            title: Intl.v('编辑'),\n            width: 1024,\n            maskClosable: false,\n            footer: [/*#__PURE__*/React.createElement(_Button, {\n              key: \"submit\",\n              type: \"primary\",\n              title: Intl.v('保存'),\n              onClick: function onClick() {\n                var _a, _b;\n                if (!coreRef.current) return;\n                var base64 = (_b = (_a = coreRef === null || coreRef === void 0 ? void 0 : coreRef.current) === null || _a === void 0 ? void 0 : _a.save) === null || _b === void 0 ? void 0 : _b.call(_a);\n                if (onChange) {\n                  onChange(base64);\n                  dialog.close();\n                }\n              }\n            }, Intl.v('保存'))]\n          }, modalProps !== null && modalProps !== void 0 ? modalProps : {}),\n          children: /*#__PURE__*/React.createElement(CroppingCore, __assign({\n            ref: coreRef\n          }, coreProps))\n        });\n      }\n    }, mask || Intl.v('编辑'));\n  }, [maskClassName, maskStyle, mask, value, onChange]);\n  var renderInner = useCallback(function () {\n    return value ? /*#__PURE__*/React.createElement(\"img\", {\n      src: value,\n      alt: \"\"\n    }) : null;\n  }, [value]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {}\n  }, renderMask(), renderInner());\n}));\nvar Cropping = InternalCropping;\nCropping.CroppingCore = CroppingCore;\nexport default Cropping;"],"names":["_Button","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","React","forwardRef","memo","useCallback","useRef","MessageDialog","Intl","CroppingCore","selectorPrefix","InternalCropping","_a","ref","className","style","maskClassName","maskStyle","mask","value","onChange","modalProps","coreProps","coreRef","renderMask","createElement","concat","onClick","dialog","Modal","config","title","v","width","maskClosable","footer","key","type","base64","current","_b","save","close","children","renderInner","src","alt","Cropping"],"mappings":"OAAOA,YAAa,iBACpB,IAAIC,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACOO,eAAgB,oBAChBC,OAASC,WAAYC,KAAMC,YAAaC,MAAqB,KAAP,eACtDC,kBAAmB,6CACnBC,SAAU,sCACVC,iBAAkB,iBACzB,IAAIC,eAAiB,uCAOjBC,iBAAgCP,KAAmBD,WAAW,SAAUS,EAAIC,GAC9E,IAAIC,EAAYF,EAAGE,UACjBC,EAAQH,EAAGG,MACXC,EAAgBJ,EAAGI,cACnBC,EAAYL,EAAGK,UACfC,EAAON,EAAGM,KACVC,EAAQP,EAAGO,MACXC,EAAWR,EAAGQ,SACdC,EAAaT,EAAGS,WAChBC,EAAYV,EAAGU,UACbC,EAAUjB,OAAO,IAAI,EACrBkB,EAAanB,YAAY,WAC3B,OAAoBH,MAAMuB,cAAc,MAAO,CAC7CX,UAAW,GAAGY,OAAOzB,WAAW,GAAGyB,OAAOhB,eAAgB,OAAO,EAAGM,MAAAA,EAAqDA,EAAgB,EAAE,CAAC,EAC5ID,MAAOE,MAAAA,EAA6CA,EAAY,GAChEU,QAAS,WACP,IAAIC,EAASrB,cAAcsB,MAAM,CAC/BC,OAAQ5C,SAAS,CACf6C,MAAOvB,KAAKwB,EAAE,IAAI,EAClBC,MAAO,KACPC,aAAc,CAAA,EACdC,OAAQ,CAAcjC,MAAMuB,cAAcxC,QAAS,CACjDmD,IAAK,SACLC,KAAM,UACNN,MAAOvB,KAAKwB,EAAE,IAAI,EAClBL,QAAS,WACP,IAAIf,EAEA0B,EADCf,EAAQgB,UACTD,EAAS,OAACE,EAAK,OAAC5B,EAAKW,MAAAA,EAAyC,KAAA,EAASA,EAAQgB,SAAqC,KAAA,EAAS3B,EAAG6B,MAAkC,KAAA,EAASD,EAAGzC,KAAKa,CAAE,EACrLQ,KACFA,EAASkB,CAAM,EACfV,EAAOc,MAAM,EAEjB,CACF,EAAGlC,KAAKwB,EAAE,IAAI,CAAC,EACjB,EAAGX,MAAAA,EAA+CA,EAAa,EAAE,EACjEsB,SAAuBzC,MAAMuB,cAAchB,aAAcvB,SAAS,CAChE2B,IAAKU,CACP,EAAGD,CAAS,CAAC,CACf,CAAC,CACH,CACF,EAAGJ,GAAQV,KAAKwB,EAAE,IAAI,CAAC,CACzB,EAAG,CAAChB,EAAeC,EAAWC,EAAMC,EAAOC,EAAS,EAChDwB,EAAcvC,YAAY,WAC5B,OAAOc,EAAqBjB,MAAMuB,cAAc,MAAO,CACrDoB,IAAK1B,EACL2B,IAAK,EACP,CAAC,EAAI,IACP,EAAG,CAAC3B,EAAM,EACV,OAAoBjB,MAAMuB,cAAc,MAAO,CAC7CX,UAAWb,WAAWS,eAAgBI,MAAAA,EAA6CA,EAAY,EAAE,EACjGC,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGS,EAAW,EAAGoB,EAAY,CAAC,CAChC,CAAC,CAAC,EACEG,SAAWpC,iBACfoC,SAAStC,aAAeA,4BACTsC"}