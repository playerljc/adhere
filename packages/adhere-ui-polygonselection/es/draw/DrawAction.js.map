{"version":3,"file":"DrawAction.js","sources":["draw/DrawAction.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport Emitter from '@baifendian/adhere-util-emitter';\nimport defaultAnchorStyle from '../defaultAnchorStyle';\nimport defaultMoveGemStyle from '../defaultMoveGemStyle';\nimport defaultStyle from '../defaultStyle';\nimport { ActionStatus } from '../types';\n/**\n * DrawAction\n * @class DrawAction\n * @classdesc DrawAction\n */\nvar DrawAction = /** @class */function (_super) {\n  __extends(DrawAction, _super);\n  function DrawAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // 上下文对象\n    _this.context = null;\n    // 当前状态\n    _this.status = ActionStatus.UnStart;\n    // 样式对象\n    _this.style = __assign({}, defaultStyle);\n    // 修改样式对象\n    _this.anchorStyle = __assign({}, defaultAnchorStyle);\n    // 移动样式对象\n    _this.moveGemStyle = __assign({}, defaultMoveGemStyle);\n    return _this;\n  }\n  DrawAction.prototype.getAnchorStyle = function () {\n    return __assign({}, this.anchorStyle);\n  };\n  DrawAction.prototype.getStyle = function () {\n    return __assign({}, this.style);\n  };\n  DrawAction.prototype.getMoveGemStyle = function () {\n    return __assign({}, this.moveGemStyle);\n  };\n  DrawAction.prototype.setAnchorStyle = function (style) {\n    this.anchorStyle = __assign(__assign({}, defaultAnchorStyle), style !== null && style !== void 0 ? style : {});\n  };\n  DrawAction.prototype.setStyle = function (style) {\n    this.style = __assign(__assign({}, defaultStyle), style !== null && style !== void 0 ? style : {});\n  };\n  DrawAction.prototype.setMoveGemStyle = function (style) {\n    this.moveGemStyle = __assign(__assign({}, defaultMoveGemStyle), style !== null && style !== void 0 ? style : {});\n  };\n  /**\n   * destroy\n   */\n  DrawAction.prototype.destroy = function () {\n    var _a, _b;\n    if (!this.context || [ActionStatus.Running, ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = (_a = context === null || context === void 0 ? void 0 : context.getCanvasEl) === null || _a === void 0 ? void 0 : _a.call(context);\n    var assistCanvasEl = (_b = context === null || context === void 0 ? void 0 : context.getAssistCanvasEl) === null || _b === void 0 ? void 0 : _b.call(context);\n    if (!canvasEl || !assistCanvasEl) return;\n    canvasEl.style.cursor = assistCanvasEl.style.cursor = 'default';\n  };\n  /**\n   * end\n   * @param e\n   */\n  DrawAction.prototype.end = function (e) {\n    if (!this.context || [ActionStatus.Running, ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = context === null || context === void 0 ? void 0 : context.getCanvasEl();\n    var assistCanvasEl = context === null || context === void 0 ? void 0 : context.getAssistCanvasEl();\n    if (!canvasEl || !assistCanvasEl) return;\n    canvasEl.style.cursor = assistCanvasEl.style.cursor = 'default';\n  };\n  /**\n   * start\n   * @param style\n   */\n  DrawAction.prototype.start = function (style) {\n    if (!this.context || [ActionStatus.Running, ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = context.getCanvasEl();\n    if (!canvasEl) return;\n    canvasEl.style.cursor = \"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjI3OTEzNjM1NDc3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQzMDgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMi4wMDIgODg3QzMwNC44OTIgODg3IDEzNyA3MTkuMTA4IDEzNyA1MTIuMDAyIDEzNyAzMDQuODkyIDMwNC44OTIgMTM3IDUxMi4wMDIgMTM3IDcxOS4xMDggMTM3IDg4NyAzMDQuODkyIDg4NyA1MTIuMDAyIDg4NyA3MTkuMTA4IDcxOS4xMDggODg3IDUxMi4wMDIgODg3ek01MTIgNzg3YzE1MS44NzggMCAyNzUtMTIzLjEyMiAyNzUtMjc1UzY2My44NzggMjM3IDUxMiAyMzcgMjM3IDM2MC4xMjIgMjM3IDUxMnMxMjMuMTIyIDI3NSAyNzUgMjc1eiIgZmlsbD0iIzFBQTVGRiIgcC1pZD0iNDMwOSI+PC9wYXRoPjxwYXRoIGQ9Ik01MTIgNTEybS0yMjUgMGEyMjUgMjI1IDAgMSAwIDQ1MCAwIDIyNSAyMjUgMCAxIDAtNDUwIDBaIiBmaWxsPSIjMUFBNUZGIiBwLWlkPSI0MzEwIj48L3BhdGg+PC9zdmc+), auto\";\n  };\n  /**\n   * setContext\n   * @param context\n   */\n  DrawAction.prototype.setContext = function (context) {\n    this.context = context;\n  };\n  /**\n   * getStatus - 获取状态\n   */\n  DrawAction.prototype.getStatus = function () {\n    return this.status;\n  };\n  return DrawAction;\n}(Emitter.Events);\nexport default DrawAction;"],"names":["__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","Emitter","defaultAnchorStyle","defaultMoveGemStyle","defaultStyle","ActionStatus","DrawAction","_super","_this","context","status","UnStart","style","anchorStyle","moveGemStyle","getAnchorStyle","getStyle","getMoveGemStyle","setAnchorStyle","setStyle","setMoveGemStyle","destroy","canvasEl","assistCanvasEl","Running","Destroy","includes","_a","getCanvasEl","_b","getAssistCanvasEl","cursor","end","e","start","setContext","getStatus","Events"],"mappings":"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"}