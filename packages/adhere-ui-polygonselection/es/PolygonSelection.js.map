{"version":3,"file":"PolygonSelection.js","sources":["PolygonSelection.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport MathUtil from '@baifendian/adhere-util';\nimport Emitter from '@baifendian/adhere-util-emitter';\nimport Cropping from './cropping';\nimport CircleDrawAction from './draw/CircleDrawAction';\nimport DiamondDrawAction from './draw/DiamondDrawAction';\nimport FreeDrawAction from './draw/FreeDrawAction';\nimport PolygonDrawAction from './draw/PolygonDrawAction';\nimport RectangleDrawAction from './draw/RectangleDrawAction';\nimport StartDrawAction from './draw/StartDrawAction';\nimport TriangleDrawAction from './draw/TriangleDrawAction';\nimport { ActionStatus, PolygonSelectionActions, SelectType } from './types';\nvar selectorPrefix = 'adhere-ui-polygon-selection';\n/**\n * PolygonSelection\n * @class\n * @classdesc - PolygonSelection\n */\nvar PolygonSelection = /** @class */function (_super) {\n  __extends(PolygonSelection, _super);\n  /**\n   * constructor\n   * @param el: HtmlElement - 父元素\n   * @param defaultData: IActionData[] - 缺省的ActionData数据\n   * @param listeners: IListeners - 缺省的事件注册对象\n   */\n  function PolygonSelection(el, defaultData, listeners) {\n    var _this = _super.call(this) || this;\n    // 父元素\n    _this.el = null;\n    // 注册的事件对象\n    _this.listeners = null;\n    // 当前的Action\n    _this.curAction = null;\n    // 当前的canvas元素\n    _this.canvasEl = null;\n    // 当前的ctx对象\n    _this.ctx = null;\n    // 辅助的canvas元素\n    _this.assistCanvasEl = null;\n    // 辅助的ctx对象\n    _this.assistCtx = null;\n    // canvas上的所有数据\n    _this.canvasData = [];\n    // ActionType\n    // @ts-ignore\n    _this.typeActionMap = new Map([[SelectType.Polygon, PolygonDrawAction], [SelectType.Circle, CircleDrawAction], [SelectType.Rectangle, RectangleDrawAction], [SelectType.Triangle, TriangleDrawAction], [SelectType.Diamond, DiamondDrawAction], [SelectType.Start, StartDrawAction], [SelectType.Free, FreeDrawAction]]);\n    _this.el = el;\n    _this.listeners = listeners;\n    defaultData && (_this.canvasData = defaultData);\n    _this.onResize = _this.onResize.bind(_this);\n    // 初始化Listeners\n    _this.initListeners();\n    // 初始化Canvas\n    _this.initCanvas();\n    // 初始化Events\n    _this.initEvents();\n    return _this;\n  }\n  /**\n   * initListeners\n   * @description 注册用户的listeners\n   */\n  PolygonSelection.prototype.initListeners = function () {\n    var _this = this;\n    var listeners = this.listeners;\n    if (!listeners) return;\n    var keys = Object.keys(listeners);\n    keys.forEach(function (key) {\n      _this.on(key, listeners[key]);\n    });\n  };\n  /**\n   * initEvents\n   */\n  PolygonSelection.prototype.initEvents = function () {\n    var _this = this;\n    if (!this.el) return;\n    // 点击了el元素\n    this.el.addEventListener('mouseup', function (e) {\n      if (!e) return;\n      // 查看point命中了HistoryData中的哪一项\n      var historyData = _this.getHistoryData();\n      // if (!historyData ||  !historyData.length) {\n      //   this.trigger(PolygonSelectionActions.CanvasClickEmpty);\n      //   return;\n      // }\n      var point = MathUtil.clientToCtxPoint({\n        event: e,\n        rect: _this.el.getBoundingClientRect()\n      });\n      var findIndexes = [];\n      for (var i = 0; i < historyData.length; i++) {\n        var data = historyData[i];\n        var action = _this.typeActionMap.get(data.type);\n        var isIn = 'booleanPointInData' in action ? action === null || action === void 0 ? void 0 : action.booleanPointInData(point, data) : false;\n        if (isIn) {\n          findIndexes.push(i);\n        }\n      }\n      if (findIndexes.length) {\n        _this.trigger(PolygonSelectionActions.CanvasClickGeometry, JSON.parse(JSON.stringify(historyData[findIndexes[findIndexes.length - 1]])));\n      } else {\n        if (historyData.length) {\n          _this.trigger(PolygonSelectionActions.CanvasClickEmpty);\n        }\n      }\n    });\n  };\n  /**\n   * initCanvas - 初始化Canvas\n   */\n  PolygonSelection.prototype.initCanvas = function () {\n    if (!this.el) return;\n    // 创建一个canvas\n    this.canvasEl = document.createElement('canvas');\n    this.canvasEl.className = selectorPrefix;\n    this.ctx = this.canvasEl.getContext('2d');\n    // 创建一个assistCanvas\n    this.assistCanvasEl = document.createElement('canvas');\n    this.assistCanvasEl.className = \"\".concat(selectorPrefix, \"-assist\");\n    this.assistCtx = this.assistCanvasEl.getContext('2d');\n    this.el.appendChild(this.canvasEl);\n    this.el.appendChild(this.assistCanvasEl);\n    // 触发canvasMount事件\n    this.trigger(PolygonSelectionActions.CanvasMount);\n    // 适配canvas\n    this.adapterCanvas();\n    // window.addEventListener('resize', this.onResize);\n  };\n  /**\n   * adapterCanvas - 适配canvas\n   */\n  PolygonSelection.prototype.adapterCanvas = function () {\n    var _a, _b, _c, _d, _e, _f;\n    var _g = this,\n      canvasEl = _g.canvasEl,\n      assistCanvasEl = _g.assistCanvasEl,\n      el = _g.el;\n    if ((_b = (_a = !el) !== null && _a !== void 0 ? _a : !canvasEl) !== null && _b !== void 0 ? _b : !assistCanvasEl) return;\n    canvasEl.width = (_c = el === null || el === void 0 ? void 0 : el.offsetWidth) !== null && _c !== void 0 ? _c : 0;\n    canvasEl.height = (_d = el === null || el === void 0 ? void 0 : el.offsetHeight) !== null && _d !== void 0 ? _d : 0;\n    assistCanvasEl.width = (_e = el === null || el === void 0 ? void 0 : el.offsetWidth) !== null && _e !== void 0 ? _e : 0;\n    assistCanvasEl.height = (_f = el === null || el === void 0 ? void 0 : el.offsetHeight) !== null && _f !== void 0 ? _f : 0;\n    this.clearDraw();\n    this.clearAssistDraw();\n    this.drawHistoryData();\n  };\n  /**\n   * onResize\n   */\n  PolygonSelection.prototype.onResize = function () {\n    this.adapterCanvas();\n  };\n  /**\n   * getCtx\n   * @return CanvasRenderingContext2D | null\n   */\n  PolygonSelection.prototype.getCtx = function () {\n    return this.ctx;\n  };\n  /**\n   * getCanvasEl\n   * @return HTMLCanvasElement | null\n   */\n  PolygonSelection.prototype.getCanvasEl = function () {\n    return this.canvasEl;\n  };\n  /**\n   * getAssistCanvasEl\n   */\n  PolygonSelection.prototype.getAssistCanvasEl = function () {\n    return this.assistCanvasEl;\n  };\n  PolygonSelection.prototype.getAssistCtx = function () {\n    return this.assistCtx;\n  };\n  /**\n   * getWidth\n   * @return number\n   */\n  PolygonSelection.prototype.getWidth = function () {\n    var _a, _b;\n    return (_b = (_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetWidth) !== null && _b !== void 0 ? _b : 0;\n  };\n  /**\n   * getHeight\n   * @return number\n   */\n  PolygonSelection.prototype.getHeight = function () {\n    var _a, _b;\n    return (_b = (_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetHeight) !== null && _b !== void 0 ? _b : 0;\n  };\n  /**\n   * addHistoryData - 添加一个ActionData到canvasData中\n   * @param data\n   * @return void\n   */\n  PolygonSelection.prototype.addHistoryData = function (data) {\n    this.canvasData.push(data);\n  };\n  /**\n   * removeHistoryDataById - 删除一个ActionData中的数据\n   * @param actionDataId\n   * @return IActionData[]\n   */\n  PolygonSelection.prototype.removeHistoryDataById = function (actionDataId) {\n    var index = this.canvasData.findIndex(function (data) {\n      return data.id === actionDataId;\n    });\n    if (index === -1) return [];\n    return this.canvasData.splice(index, 1);\n  };\n  /**\n   * drawHistoryData - 绘制历史数据\n   * @return void\n   */\n  PolygonSelection.prototype.drawHistoryData = function () {\n    var _this = this;\n    this.canvasData.forEach(function (data) {\n      var _a;\n      var ctx = _this.ctx;\n      if (!ctx || !data) return;\n      // 绘制指定类型的路径\n      // @ts-ignore\n      (_a = _this.typeActionMap.get(data.type)) === null || _a === void 0 ? void 0 : _a.drawHistoryPath(ctx, data);\n    });\n  };\n  /**\n   * getHistoryDataById\n   * @param id\n   * @return IActionData | null | undefined\n   */\n  PolygonSelection.prototype.getHistoryDataById = function (id) {\n    return this.canvasData.find(function (data) {\n      return data.id === id;\n    });\n  };\n  /**\n   * getHistoryData\n   * @return IActionData []\n   */\n  PolygonSelection.prototype.getHistoryData = function () {\n    return __spreadArray([], this.canvasData, true);\n  };\n  /**\n   * setHistoryData\n   * @param data\n   */\n  PolygonSelection.prototype.setHistoryData = function (data) {\n    this.canvasData = data;\n  };\n  /**\n   * changeAction - 切换一个Action\n   * @param action - action对象\n   * @return void\n   */\n  PolygonSelection.prototype.changeAction = function (action) {\n    // 如果当前和传入一致则跳过\n    if (action === this.curAction) return;\n    // 只有是未开始才能切换\n    if (action.getStatus() !== ActionStatus.UnStart) return;\n    if (this.curAction) {\n      this.curAction.destroy();\n    }\n    action === null || action === void 0 ? void 0 : action.setContext(this);\n    this.curAction = action;\n  };\n  /**\n   * getCurAction\n   * @return IAction | null\n   */\n  PolygonSelection.prototype.getCurAction = function () {\n    return this.curAction;\n  };\n  /**\n   * start - 开始\n   * @param style\n   * @return void\n   */\n  PolygonSelection.prototype.start = function (style) {\n    if (!this.curAction) return;\n    this.curAction.start(style);\n  };\n  /**\n   * end - 结束\n   * @return void\n   */\n  PolygonSelection.prototype.end = function () {\n    if (!this.curAction) return;\n    this.curAction.end();\n  };\n  /**\n   * clear\n   */\n  PolygonSelection.prototype.clearDraw = function () {\n    var ctx = this.ctx;\n    if (!ctx) return;\n    ctx.clearRect(0, 0, this.getWidth(), this.getHeight());\n  };\n  /**\n   * clearAssistDraw\n   * @description 清除assist的canvas\n   */\n  PolygonSelection.prototype.clearAssistDraw = function () {\n    var assistCtx = this.assistCtx;\n    if (!assistCtx) return;\n    assistCtx.clearRect(0, 0, this.getWidth(), this.getHeight());\n  };\n  /**\n   * clearHistoryData\n   */\n  PolygonSelection.prototype.clearHistoryData = function () {\n    this.canvasData = [];\n  };\n  /**\n   * clearCanvasAll\n   */\n  PolygonSelection.prototype.clearCanvasAll = function () {\n    this.clearDraw();\n    this.clearAssistDraw();\n    this.clearHistoryData();\n  };\n  /**\n   * setFrontCanvas\n   * @description 置顶\n   * @param canvasEl\n   */\n  PolygonSelection.prototype.setFrontCanvas = function (canvasEl) {\n    // console.log('置顶');\n    canvasEl.style.zIndex = '9999';\n  };\n  /**\n   * setBackCanvas\n   * @description 置底\n   * @param canvasEl\n   */\n  PolygonSelection.prototype.setBackCanvas = function (canvasEl) {\n    // console.log('置底');\n    canvasEl.style.zIndex = '1';\n  };\n  /**\n   * destroy - 销毁\n   * @return void\n   */\n  PolygonSelection.prototype.destroy = function () {\n    typeof window !== 'undefined' && window.removeEventListener('resize', this.onResize);\n    if (this.curAction) {\n      this.curAction.destroy();\n    }\n    this.clearAll();\n    if (this.el) {\n      this.el.innerHTML = '';\n    }\n  };\n  PolygonSelection.Cropping = Cropping;\n  return PolygonSelection;\n}(Emitter.Events);\nexport default PolygonSelection;"],"names":["__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","pack","arguments","length","ar","i","l","slice","concat","MathUtil","Emitter","Cropping","CircleDrawAction","DiamondDrawAction","FreeDrawAction","PolygonDrawAction","RectangleDrawAction","StartDrawAction","TriangleDrawAction","ActionStatus","PolygonSelectionActions","SelectType","selectorPrefix","PolygonSelection","_super","el","defaultData","listeners","_this","curAction","canvasEl","ctx","assistCanvasEl","assistCtx","canvasData","typeActionMap","Map","Polygon","Circle","Rectangle","Triangle","Diamond","Start","Free","onResize","bind","initListeners","initCanvas","initEvents","keys","forEach","key","on","addEventListener","e","historyData","getHistoryData","point","clientToCtxPoint","event","rect","getBoundingClientRect","findIndexes","data","action","get","type","booleanPointInData","push","trigger","CanvasClickGeometry","JSON","parse","stringify","CanvasClickEmpty","document","createElement","className","getContext","appendChild","CanvasMount","adapterCanvas","_f","_g","_b","_a","width","_c","offsetWidth","height","_d","offsetHeight","_e","clearDraw","clearAssistDraw","drawHistoryData","getCtx","getCanvasEl","getAssistCanvasEl","getAssistCtx","getWidth","getHeight","addHistoryData","removeHistoryDataById","actionDataId","index","findIndex","id","splice","drawHistoryPath","getHistoryDataById","find","setHistoryData","changeAction","getStatus","UnStart","destroy","setContext","getCurAction","start","style","end","clearRect","clearHistoryData","clearCanvasAll","setFrontCanvas","zIndex","setBackCanvas","window","removeEventListener","clearAll","innerHTML","Events"],"mappings":"AAAA,IAAIA,UAAYC,MAAQA,KAAKD,WAAa,WACxC,IAAIE,EAAiB,SAAuBC,EAAGC,GAQ7C,OAPAF,EAAiBG,OAAOC,iBAAkB,CACxCC,UAAW,EACb,YAAaC,MAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,CAChB,EAAK,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAC5E,IACsBN,EAAGC,CAAC,CAC5B,EACA,OAAO,SAAUD,EAAGC,GAClB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAAY,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAEnI,SAASW,IACPd,KAAKe,YAAcb,CACrB,CAHAD,EAAeC,EAAGC,CAAC,EAInBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACjF,CACF,EAAE,EACEG,cAAgBjB,MAAQA,KAAKiB,eAAiB,SAAUC,EAAIC,EAAMC,GACpE,GAAIA,GAA6B,IAArBC,UAAUC,OAAc,IAAK,IAA4BC,EAAxBC,EAAI,EAAGC,EAAIN,EAAKG,OAAYE,EAAIC,EAAGD,CAAC,GAC3ED,CAAAA,GAAQC,KAAKL,KACVI,EAAAA,GAAShB,MAAME,UAAUiB,MAAMf,KAAKQ,EAAM,EAAGK,CAAC,GAChDA,GAAKL,EAAKK,IAGjB,OAAON,EAAGS,OAAOJ,GAAMhB,MAAME,UAAUiB,MAAMf,KAAKQ,CAAI,CAAC,CACzD,SACOS,aAAc,iCACdC,YAAa,yCACbC,aAAc,oBACdC,qBAAsB,iCACtBC,sBAAuB,kCACvBC,mBAAoB,+BACpBC,sBAAuB,kCACvBC,wBAAyB,oCACzBC,oBAAqB,gCACrBC,uBAAwB,mCACtBC,aAAcC,wBAAyBC,UAA2B,KAAT,UAClE,IAAIC,eAAiB,8BAMjBC,iBAAgC,SAAUC,GAQ5C,SAASD,EAAiBE,EAAIC,EAAaC,GACzC,IAAIC,EAAQJ,EAAOhC,KAAKX,IAAI,GAAKA,KA8BjC,OA5BA+C,EAAMH,GAAK,KAEXG,EAAMD,UAAY,KAElBC,EAAMC,UAAY,KAElBD,EAAME,SAAW,KAEjBF,EAAMG,IAAM,KAEZH,EAAMI,eAAiB,KAEvBJ,EAAMK,UAAY,KAElBL,EAAMM,WAAa,GAGnBN,EAAMO,cAAgB,IAAIC,IAAI,CAAC,CAACf,WAAWgB,QAAStB,mBAAoB,CAACM,WAAWiB,OAAQ1B,kBAAmB,CAACS,WAAWkB,UAAWvB,qBAAsB,CAACK,WAAWmB,SAAUtB,oBAAqB,CAACG,WAAWoB,QAAS5B,mBAAoB,CAACQ,WAAWqB,MAAOzB,iBAAkB,CAACI,WAAWsB,KAAM7B,gBAAgB,EACvTc,EAAMH,GAAKA,EACXG,EAAMD,UAAYA,EAClBD,IAAgBE,EAAMM,WAAaR,GACnCE,EAAMgB,SAAWhB,EAAMgB,SAASC,KAAKjB,CAAK,EAE1CA,EAAMkB,cAAc,EAEpBlB,EAAMmB,WAAW,EAEjBnB,EAAMoB,WAAW,EACVpB,CACT,CA0SA,OAjVAhD,UAAU2C,EAAkBC,CAAM,EA4ClCD,EAAiBjC,UAAUwD,cAAgB,WACzC,IAAIlB,EAAQ/C,KACR8C,EAAY9C,KAAK8C,UAChBA,GACM1C,OAAOgE,KAAKtB,CAAS,EAC3BuB,QAAQ,SAAUC,GACrBvB,EAAMwB,GAAGD,EAAKxB,EAAUwB,EAAI,CAC9B,CAAC,CACH,EAIA5B,EAAiBjC,UAAU0D,WAAa,WACtC,IAAIpB,EAAQ/C,KACPA,KAAK4C,IAEV5C,KAAK4C,GAAG4B,iBAAiB,UAAW,SAAUC,GAC5C,GAAKA,EAAL,CAYA,IAVA,IAAIC,EAAc3B,EAAM4B,eAAe,EAKnCC,EAAQhD,SAASiD,iBAAiB,CACpCC,MAAOL,EACPM,KAAMhC,EAAMH,GAAGoC,sBAAsB,CACvC,CAAC,EACGC,EAAc,GACTzD,EAAI,EAAGA,EAAIkD,EAAYpD,OAAQE,CAAC,GAAI,CAC3C,IAAI0D,EAAOR,EAAYlD,GACnB2D,EAASpC,EAAMO,cAAc8B,IAAIF,EAAKG,IAAI,EACnC,uBAAwBF,IAASA,MAAAA,EAAuC,KAAA,EAASA,EAAOG,mBAAmBV,EAAOM,CAAI,IAE/HD,EAAYM,KAAK/D,CAAC,CAEtB,CACIyD,EAAY3D,OACdyB,EAAMyC,QAAQjD,wBAAwBkD,oBAAqBC,KAAKC,MAAMD,KAAKE,UAAUlB,EAAYO,EAAYA,EAAY3D,OAAS,GAAG,CAAC,CAAC,EAEnIoD,EAAYpD,QACdyB,EAAMyC,QAAQjD,wBAAwBsD,gBAAgB,CAxB5C,CA2BhB,CAAC,CACH,EAIAnD,EAAiBjC,UAAUyD,WAAa,WACjClE,KAAK4C,KAEV5C,KAAKiD,SAAW6C,SAASC,cAAc,QAAQ,EAC/C/F,KAAKiD,SAAS+C,UAAYvD,eAC1BzC,KAAKkD,IAAMlD,KAAKiD,SAASgD,WAAW,IAAI,EAExCjG,KAAKmD,eAAiB2C,SAASC,cAAc,QAAQ,EACrD/F,KAAKmD,eAAe6C,UAAY,GAAGrE,OAAOc,eAAgB,SAAS,EACnEzC,KAAKoD,UAAYpD,KAAKmD,eAAe8C,WAAW,IAAI,EACpDjG,KAAK4C,GAAGsD,YAAYlG,KAAKiD,QAAQ,EACjCjD,KAAK4C,GAAGsD,YAAYlG,KAAKmD,cAAc,EAEvCnD,KAAKwF,QAAQjD,wBAAwB4D,WAAW,EAEhDnG,KAAKoG,cAAc,EAErB,EAIA1D,EAAiBjC,UAAU2F,cAAgB,WACzC,IAAwBC,EACpBC,EAAKtG,KACPiD,EAAWqD,EAAGrD,SACdE,EAAiBmD,EAAGnD,eACpBP,EAAK0D,EAAG1D,IAC2D,QAAhE2D,EAAoB,QAAdC,EAAK,CAAC5D,GAAgC4D,EAAK,CAACvD,GAAsCsD,CAAAA,EAAMpD,KACnGF,EAASwD,MAAQ,OAACC,EAAK9D,MAAAA,EAA+B,KAAA,EAASA,EAAG+D,aAAyCD,EAAK,EAChHzD,EAAS2D,OAAS,OAACC,EAAKjE,MAAAA,EAA+B,KAAA,EAASA,EAAGkE,cAA0CD,EAAK,EAClH1D,EAAesD,MAAQ,OAACM,EAAKnE,MAAAA,EAA+B,KAAA,EAASA,EAAG+D,aAAyCI,EAAK,EACtH5D,EAAeyD,OAAS,OAACP,EAAKzD,MAAAA,EAA+B,KAAA,EAASA,EAAGkE,cAA0CT,EAAK,EACxHrG,KAAKgH,UAAU,EACfhH,KAAKiH,gBAAgB,EACrBjH,KAAKkH,gBAAgB,EACvB,EAIAxE,EAAiBjC,UAAUsD,SAAW,WACpC/D,KAAKoG,cAAc,CACrB,EAKA1D,EAAiBjC,UAAU0G,OAAS,WAClC,OAAOnH,KAAKkD,GACd,EAKAR,EAAiBjC,UAAU2G,YAAc,WACvC,OAAOpH,KAAKiD,QACd,EAIAP,EAAiBjC,UAAU4G,kBAAoB,WAC7C,OAAOrH,KAAKmD,cACd,EACAT,EAAiBjC,UAAU6G,aAAe,WACxC,OAAOtH,KAAKoD,SACd,EAKAV,EAAiBjC,UAAU8G,SAAW,WACpC,IAAQhB,EACR,OAAO,OAACA,EAAK,OAACC,EAAKxG,MAAAA,KAAmC,KAAA,EAASA,KAAK4C,IAAgC,KAAA,EAAS4D,EAAGG,aAAyCJ,EAAK,CAChK,EAKA7D,EAAiBjC,UAAU+G,UAAY,WACrC,IAAQjB,EACR,OAAO,OAACA,EAAK,OAACC,EAAKxG,MAAAA,KAAmC,KAAA,EAASA,KAAK4C,IAAgC,KAAA,EAAS4D,EAAGM,cAA0CP,EAAK,CACjK,EAMA7D,EAAiBjC,UAAUgH,eAAiB,SAAUvC,GACpDlF,KAAKqD,WAAWkC,KAAKL,CAAI,CAC3B,EAMAxC,EAAiBjC,UAAUiH,sBAAwB,SAAUC,GAC3D,IAAIC,EAAQ5H,KAAKqD,WAAWwE,UAAU,SAAU3C,GAC9C,OAAOA,EAAK4C,KAAOH,CACrB,CAAC,EACD,MAAc,CAAC,IAAXC,EAAqB,GAClB5H,KAAKqD,WAAW0E,OAAOH,EAAO,CAAC,CACxC,EAKAlF,EAAiBjC,UAAUyG,gBAAkB,WAC3C,IAAInE,EAAQ/C,KACZA,KAAKqD,WAAWgB,QAAQ,SAAUa,GAChC,IAAIsB,EACAtD,EAAMH,EAAMG,IACXA,GAAQgC,GAGb,OAACsB,EAAKzD,EAAMO,cAAc8B,IAAIF,EAAKG,IAAI,IAAwCmB,EAAGwB,gBAAgB9E,EAAKgC,CAAI,CAC7G,CAAC,CACH,EAMAxC,EAAiBjC,UAAUwH,mBAAqB,SAAUH,GACxD,OAAO9H,KAAKqD,WAAW6E,KAAK,SAAUhD,GACpC,OAAOA,EAAK4C,KAAOA,CACrB,CAAC,CACH,EAKApF,EAAiBjC,UAAUkE,eAAiB,WAC1C,OAAO1D,cAAc,GAAIjB,KAAKqD,WAAY,CAAA,CAAI,CAChD,EAKAX,EAAiBjC,UAAU0H,eAAiB,SAAUjD,GACpDlF,KAAKqD,WAAa6B,CACpB,EAMAxC,EAAiBjC,UAAU2H,aAAe,SAAUjD,GAE9CA,IAAWnF,KAAKgD,WAEhBmC,EAAOkD,UAAU,IAAM/F,aAAagG,UACpCtI,KAAKgD,WACPhD,KAAKgD,UAAUuF,QAAQ,EAEzBpD,MAAAA,GAAgDA,EAAOqD,WAAWxI,IAAI,EACtEA,KAAKgD,UAAYmC,EACnB,EAKAzC,EAAiBjC,UAAUgI,aAAe,WACxC,OAAOzI,KAAKgD,SACd,EAMAN,EAAiBjC,UAAUiI,MAAQ,SAAUC,GACtC3I,KAAKgD,WACVhD,KAAKgD,UAAU0F,MAAMC,CAAK,CAC5B,EAKAjG,EAAiBjC,UAAUmI,IAAM,WAC1B5I,KAAKgD,WACVhD,KAAKgD,UAAU4F,IAAI,CACrB,EAIAlG,EAAiBjC,UAAUuG,UAAY,WACrC,IAAI9D,EAAMlD,KAAKkD,IACVA,GACLA,EAAI2F,UAAU,EAAG,EAAG7I,KAAKuH,SAAS,EAAGvH,KAAKwH,UAAU,CAAC,CACvD,EAKA9E,EAAiBjC,UAAUwG,gBAAkB,WAC3C,IAAI7D,EAAYpD,KAAKoD,UAChBA,GACLA,EAAUyF,UAAU,EAAG,EAAG7I,KAAKuH,SAAS,EAAGvH,KAAKwH,UAAU,CAAC,CAC7D,EAIA9E,EAAiBjC,UAAUqI,iBAAmB,WAC5C9I,KAAKqD,WAAa,EACpB,EAIAX,EAAiBjC,UAAUsI,eAAiB,WAC1C/I,KAAKgH,UAAU,EACfhH,KAAKiH,gBAAgB,EACrBjH,KAAK8I,iBAAiB,CACxB,EAMApG,EAAiBjC,UAAUuI,eAAiB,SAAU/F,GAEpDA,EAAS0F,MAAMM,OAAS,MAC1B,EAMAvG,EAAiBjC,UAAUyI,cAAgB,SAAUjG,GAEnDA,EAAS0F,MAAMM,OAAS,GAC1B,EAKAvG,EAAiBjC,UAAU8H,QAAU,WACjB,aAAlB,OAAOY,QAA0BA,OAAOC,oBAAoB,SAAUpJ,KAAK+D,QAAQ,EAC/E/D,KAAKgD,WACPhD,KAAKgD,UAAUuF,QAAQ,EAEzBvI,KAAKqJ,SAAS,EACVrJ,KAAK4C,KACP5C,KAAK4C,GAAG0G,UAAY,GAExB,EACA5G,EAAiBZ,SAAWA,SACrBY,CACT,EAAEb,QAAQ0H,MAAM,iBACD7G"}