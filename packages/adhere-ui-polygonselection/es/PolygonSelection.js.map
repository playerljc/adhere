{"version":3,"file":"PolygonSelection.js","sources":["PolygonSelection.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport MathUtil from '@baifendian/adhere-util';\r\nimport Emitter from '@baifendian/adhere-util-emitter';\r\nimport CircleDrawAction from './draw/CircleDrawAction';\r\nimport DiamondDrawAction from './draw/DiamondDrawAction';\r\nimport FreeDrawAction from './draw/FreeDrawAction';\r\nimport PolygonDrawAction from './draw/PolygonDrawAction';\r\nimport RectangleDrawAction from './draw/RectangleDrawAction';\r\nimport StartDrawAction from './draw/StartDrawAction';\r\nimport TriangleDrawAction from './draw/TriangleDrawAction';\r\nimport { ActionStatus, PolygonSelectionActions, SelectType, } from './types';\r\nvar selectorPrefix = 'adhere-ui-polygonselection';\r\n/**\r\n * PolygonSelection\r\n * @class\r\n * @classdesc - PolygonSelection\r\n */\r\nvar PolygonSelection = /** @class */ (function (_super) {\r\n    __extends(PolygonSelection, _super);\r\n    /**\r\n     * constructor\r\n     * @param el: HtmlElement - 父元素\r\n     * @param defaultData: IActionData[] - 缺省的ActionData数据\r\n     * @param listeners: IListeners - 缺省的事件注册对象\r\n     */\r\n    function PolygonSelection(el, defaultData, listeners) {\r\n        var _this = _super.call(this) || this;\r\n        // 父元素\r\n        _this.el = null;\r\n        // 注册的事件对象\r\n        _this.listeners = null;\r\n        // 当前的Action\r\n        _this.curAction = null;\r\n        // 当前的canvas元素\r\n        _this.canvasEl = null;\r\n        // 当前的ctx对象\r\n        _this.ctx = null;\r\n        // 辅助的canvas元素\r\n        _this.assistCanvasEl = null;\r\n        // 辅助的ctx对象\r\n        _this.assistCtx = null;\r\n        // canvas上的所有数据\r\n        _this.canvasData = [];\r\n        // ActionType\r\n        // @ts-ignore\r\n        _this.typeActionMap = new Map([\r\n            [SelectType.Polygon, PolygonDrawAction],\r\n            [SelectType.Circle, CircleDrawAction],\r\n            [SelectType.Rectangle, RectangleDrawAction],\r\n            [SelectType.Triangle, TriangleDrawAction],\r\n            [SelectType.Diamond, DiamondDrawAction],\r\n            [SelectType.Start, StartDrawAction],\r\n            [SelectType.Free, FreeDrawAction],\r\n        ]);\r\n        _this.el = el;\r\n        _this.listeners = listeners;\r\n        defaultData && (_this.canvasData = defaultData);\r\n        _this.onResize = _this.onResize.bind(_this);\r\n        // 初始化Listeners\r\n        _this.initListeners();\r\n        // 初始化Canvas\r\n        _this.initCanvas();\r\n        // 初始化Events\r\n        _this.initEvents();\r\n        return _this;\r\n    }\r\n    /**\r\n     * initListeners\r\n     * @description 注册用户的listeners\r\n     */\r\n    PolygonSelection.prototype.initListeners = function () {\r\n        var _this = this;\r\n        var listeners = this.listeners;\r\n        if (!listeners)\r\n            return;\r\n        var keys = Object.keys(listeners);\r\n        keys.forEach(function (key) {\r\n            _this.on(key, listeners[key]);\r\n        });\r\n    };\r\n    /**\r\n     * initEvents\r\n     */\r\n    PolygonSelection.prototype.initEvents = function () {\r\n        var _this = this;\r\n        if (!this.el)\r\n            return;\r\n        // 点击了el元素\r\n        this.el.addEventListener('mouseup', function (e) {\r\n            if (!e)\r\n                return;\r\n            // 查看point命中了HistoryData中的哪一项\r\n            var historyData = _this.getHistoryData();\r\n            // if (!historyData || !historyData.length) {\r\n            //   this.trigger(PolygonSelectionActions.CanvasClickEmpty);\r\n            //   return;\r\n            // }\r\n            var point = MathUtil.clientToCtxPoint({\r\n                event: e,\r\n                rect: _this.el.getBoundingClientRect(),\r\n            });\r\n            var findIndexes = [];\r\n            for (var i = 0; i < historyData.length; i++) {\r\n                var data = historyData[i];\r\n                var action = _this.typeActionMap.get(data.type);\r\n                var isIn = 'booleanPointInData' in action ? action === null || action === void 0 ? void 0 : action.booleanPointInData(point, data) : false;\r\n                if (isIn) {\r\n                    findIndexes.push(i);\r\n                }\r\n            }\r\n            if (findIndexes.length) {\r\n                _this.trigger(PolygonSelectionActions.CanvasClickGeometry, JSON.parse(JSON.stringify(historyData[findIndexes[findIndexes.length - 1]])));\r\n            }\r\n            else {\r\n                if (historyData.length) {\r\n                    _this.trigger(PolygonSelectionActions.CanvasClickEmpty);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * initCanvas - 初始化Canvas\r\n     */\r\n    PolygonSelection.prototype.initCanvas = function () {\r\n        if (!this.el)\r\n            return;\r\n        // 创建一个canvas\r\n        this.canvasEl = document.createElement('canvas');\r\n        this.canvasEl.className = selectorPrefix;\r\n        this.ctx = this.canvasEl.getContext('2d');\r\n        // 创建一个assistCanvas\r\n        this.assistCanvasEl = document.createElement('canvas');\r\n        this.assistCanvasEl.className = \"\".concat(selectorPrefix, \"-assist\");\r\n        this.assistCtx = this.assistCanvasEl.getContext('2d');\r\n        this.el.appendChild(this.canvasEl);\r\n        this.el.appendChild(this.assistCanvasEl);\r\n        // 触发canvasMount事件\r\n        this.trigger(PolygonSelectionActions.CanvasMount);\r\n        // 适配canvas\r\n        this.adapterCanvas();\r\n        // window.addEventListener('resize', this.onResize);\r\n    };\r\n    /**\r\n     * adapterCanvas - 适配canvas\r\n     */\r\n    PolygonSelection.prototype.adapterCanvas = function () {\r\n        var _a = this, canvasEl = _a.canvasEl, assistCanvasEl = _a.assistCanvasEl, el = _a.el;\r\n        if (!el || !canvasEl || !assistCanvasEl)\r\n            return;\r\n        canvasEl.width = el.offsetWidth || 0;\r\n        canvasEl.height = el.offsetHeight || 0;\r\n        assistCanvasEl.width = el.offsetWidth || 0;\r\n        assistCanvasEl.height = el.offsetHeight || 0;\r\n        this.clearDraw();\r\n        this.clearAssistDraw();\r\n        this.drawHistoryData();\r\n    };\r\n    /**\r\n     * onResize\r\n     */\r\n    PolygonSelection.prototype.onResize = function () {\r\n        this.adapterCanvas();\r\n    };\r\n    /**\r\n     * getCtx\r\n     * @return CanvasRenderingContext2D | null\r\n     */\r\n    PolygonSelection.prototype.getCtx = function () {\r\n        return this.ctx;\r\n    };\r\n    /**\r\n     * getCanvasEl\r\n     * @return HTMLCanvasElement | null\r\n     */\r\n    PolygonSelection.prototype.getCanvasEl = function () {\r\n        return this.canvasEl;\r\n    };\r\n    /**\r\n     * getAssistCanvasEl\r\n     */\r\n    PolygonSelection.prototype.getAssistCanvasEl = function () {\r\n        return this.assistCanvasEl;\r\n    };\r\n    PolygonSelection.prototype.getAssistCtx = function () {\r\n        return this.assistCtx;\r\n    };\r\n    /**\r\n     * getWidth\r\n     * @return number\r\n     */\r\n    PolygonSelection.prototype.getWidth = function () {\r\n        var _a;\r\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0;\r\n    };\r\n    /**\r\n     * getHeight\r\n     * @return number\r\n     */\r\n    PolygonSelection.prototype.getHeight = function () {\r\n        var _a;\r\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\r\n    };\r\n    /**\r\n     * addHistoryData - 添加一个ActionData到canvasData中\r\n     * @param data\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.addHistoryData = function (data) {\r\n        this.canvasData.push(data);\r\n    };\r\n    /**\r\n     * removeHistoryDataById - 删除一个ActionData中的数据\r\n     * @param actionDataId\r\n     * @return IActionData[]\r\n     */\r\n    PolygonSelection.prototype.removeHistoryDataById = function (actionDataId) {\r\n        var index = this.canvasData.findIndex(function (data) { return data.id === actionDataId; });\r\n        if (index === -1)\r\n            return [];\r\n        return this.canvasData.splice(index, 1);\r\n    };\r\n    /**\r\n     * drawHistoryData - 绘制历史数据\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.drawHistoryData = function () {\r\n        var _this = this;\r\n        this.canvasData.forEach(function (data) {\r\n            var _a;\r\n            var ctx = _this.ctx;\r\n            if (!ctx || !data)\r\n                return;\r\n            if (data.style) {\r\n                // 设置上下文属性\r\n                ctx.lineWidth = data.style.lineWidth;\r\n                ctx.lineJoin = data.style.lineJoin;\r\n                ctx.lineCap = data.style.lineCap;\r\n                ctx.setLineDash(data.style.lineDash);\r\n                ctx.lineDashOffset = data.style.lineDashOffset;\r\n                ctx.strokeStyle = data.style.strokeStyle;\r\n                ctx.fillStyle = data.style.fillStyle;\r\n            }\r\n            // 绘制指定类型的路径\r\n            // @ts-ignore\r\n            (_a = _this.typeActionMap.get(data.type)) === null || _a === void 0 ? void 0 : _a.drawHistoryPath(ctx, data.data);\r\n            // 描边\r\n            ctx.stroke();\r\n            // 填充\r\n            ctx.fill();\r\n        });\r\n    };\r\n    /**\r\n     * getHistoryDataById\r\n     * @param id\r\n     * @return IActionData | null | undefined\r\n     */\r\n    PolygonSelection.prototype.getHistoryDataById = function (id) {\r\n        return this.canvasData.find(function (data) { return data.id === id; });\r\n    };\r\n    /**\r\n     * getHistoryData\r\n     * @return IActionData []\r\n     */\r\n    PolygonSelection.prototype.getHistoryData = function () {\r\n        return __spreadArray([], this.canvasData, true);\r\n    };\r\n    /**\r\n     * setHistoryData\r\n     * @param data\r\n     */\r\n    PolygonSelection.prototype.setHistoryData = function (data) {\r\n        this.canvasData = data;\r\n    };\r\n    /**\r\n     * changeAction - 切换一个Action\r\n     * @param action - action对象\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.changeAction = function (action) {\r\n        // 如果当前和传入一致则跳过\r\n        if (action === this.curAction)\r\n            return;\r\n        // 只有是未开始才能切换\r\n        if (action.getStatus() !== ActionStatus.UnStart)\r\n            return;\r\n        if (this.curAction) {\r\n            this.curAction.destroy();\r\n        }\r\n        action === null || action === void 0 ? void 0 : action.setContext(this);\r\n        this.curAction = action;\r\n    };\r\n    /**\r\n     * getCurAction\r\n     * @return IAction | null\r\n     */\r\n    PolygonSelection.prototype.getCurAction = function () {\r\n        return this.curAction;\r\n    };\r\n    /**\r\n     * start - 开始\r\n     * @param style\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.start = function (style) {\r\n        if (!this.curAction)\r\n            return;\r\n        this.curAction.start(style);\r\n    };\r\n    /**\r\n     * end - 结束\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.end = function () {\r\n        if (!this.curAction)\r\n            return;\r\n        this.curAction.end();\r\n    };\r\n    /**\r\n     * clear\r\n     */\r\n    PolygonSelection.prototype.clearDraw = function () {\r\n        var ctx = this.ctx;\r\n        if (!ctx)\r\n            return;\r\n        ctx.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n    };\r\n    /**\r\n     * clearAssistDraw\r\n     * @description 清除assist的canvas\r\n     */\r\n    PolygonSelection.prototype.clearAssistDraw = function () {\r\n        var assistCtx = this.assistCtx;\r\n        if (!assistCtx)\r\n            return;\r\n        assistCtx.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n    };\r\n    /**\r\n     * setFrontCanvas\r\n     * @description 置顶\r\n     * @param canvasEl\r\n     */\r\n    PolygonSelection.prototype.setFrontCanvas = function (canvasEl) {\r\n        // console.log('置顶');\r\n        canvasEl.style.zIndex = '9999';\r\n    };\r\n    /**\r\n     * setBackCanvas\r\n     * @description 置底\r\n     * @param canvasEl\r\n     */\r\n    PolygonSelection.prototype.setBackCanvas = function (canvasEl) {\r\n        // console.log('置底');\r\n        canvasEl.style.zIndex = '1';\r\n    };\r\n    /**\r\n     * destroy - 销毁\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.destroy = function () {\r\n        typeof window !== 'undefined' && window.removeEventListener('resize', this.onResize);\r\n        if (this.curAction) {\r\n            this.curAction.destroy();\r\n        }\r\n    };\r\n    return PolygonSelection;\r\n}(Emitter.Events));\r\nexport default PolygonSelection;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","pack","arguments","length","ar","i","l","slice","concat","MathUtil","Emitter","CircleDrawAction","DiamondDrawAction","FreeDrawAction","PolygonDrawAction","RectangleDrawAction","StartDrawAction","TriangleDrawAction","ActionStatus","PolygonSelectionActions","SelectType","selectorPrefix","PolygonSelection","_super","el","defaultData","listeners","_this","curAction","canvasEl","ctx","assistCanvasEl","assistCtx","canvasData","typeActionMap","Map","Polygon","Circle","Rectangle","Triangle","Diamond","Start","Free","onResize","bind","initListeners","initCanvas","initEvents","keys","forEach","key","on","addEventListener","e","historyData","getHistoryData","point","clientToCtxPoint","event","rect","getBoundingClientRect","findIndexes","data","action","get","type","booleanPointInData","push","trigger","CanvasClickGeometry","JSON","parse","stringify","CanvasClickEmpty","document","createElement","className","getContext","appendChild","CanvasMount","adapterCanvas","_a","width","offsetWidth","height","offsetHeight","clearDraw","clearAssistDraw","drawHistoryData","getCtx","getCanvasEl","getAssistCanvasEl","getAssistCtx","getWidth","getHeight","addHistoryData","removeHistoryDataById","actionDataId","index","findIndex","id","splice","style","lineWidth","lineJoin","lineCap","setLineDash","lineDash","lineDashOffset","strokeStyle","fillStyle","drawHistoryPath","stroke","fill","getHistoryDataById","find","setHistoryData","changeAction","getStatus","UnStart","destroy","setContext","getCurAction","start","end","clearRect","setFrontCanvas","zIndex","setBackCanvas","window","removeEventListener","Events"],"mappings":"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"}