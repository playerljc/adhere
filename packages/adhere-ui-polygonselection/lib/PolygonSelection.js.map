{"version":3,"file":"PolygonSelection.js","sources":["PolygonSelection.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\r\nvar adhere_util_emitter_1 = __importDefault(require(\"@baifendian/adhere-util-emitter\"));\r\nvar CircleDrawAction_1 = __importDefault(require(\"./draw/CircleDrawAction\"));\r\nvar DiamondDrawAction_1 = __importDefault(require(\"./draw/DiamondDrawAction\"));\r\nvar FreeDrawAction_1 = __importDefault(require(\"./draw/FreeDrawAction\"));\r\nvar PolygonDrawAction_1 = __importDefault(require(\"./draw/PolygonDrawAction\"));\r\nvar RectangleDrawAction_1 = __importDefault(require(\"./draw/RectangleDrawAction\"));\r\nvar StartDrawAction_1 = __importDefault(require(\"./draw/StartDrawAction\"));\r\nvar TriangleDrawAction_1 = __importDefault(require(\"./draw/TriangleDrawAction\"));\r\nvar types_1 = require(\"./types\");\r\nvar selectorPrefix = 'adhere-ui-polygonselection';\r\n/**\r\n * PolygonSelection\r\n * @class\r\n * @classdesc - PolygonSelection\r\n */\r\nvar PolygonSelection = /** @class */ (function (_super) {\r\n    __extends(PolygonSelection, _super);\r\n    /**\r\n     * constructor\r\n     * @param el: HtmlElement - 父元素\r\n     * @param defaultData: IActionData[] - 缺省的ActionData数据\r\n     * @param listeners: IListeners - 缺省的事件注册对象\r\n     */\r\n    function PolygonSelection(el, defaultData, listeners) {\r\n        var _this = _super.call(this) || this;\r\n        // 父元素\r\n        _this.el = null;\r\n        // 注册的事件对象\r\n        _this.listeners = null;\r\n        // 当前的Action\r\n        _this.curAction = null;\r\n        // 当前的canvas元素\r\n        _this.canvasEl = null;\r\n        // 当前的ctx对象\r\n        _this.ctx = null;\r\n        // 辅助的canvas元素\r\n        _this.assistCanvasEl = null;\r\n        // 辅助的ctx对象\r\n        _this.assistCtx = null;\r\n        // canvas上的所有数据\r\n        _this.canvasData = [];\r\n        // ActionType\r\n        // @ts-ignore\r\n        _this.typeActionMap = new Map([\r\n            [types_1.SelectType.Polygon, PolygonDrawAction_1.default],\r\n            [types_1.SelectType.Circle, CircleDrawAction_1.default],\r\n            [types_1.SelectType.Rectangle, RectangleDrawAction_1.default],\r\n            [types_1.SelectType.Triangle, TriangleDrawAction_1.default],\r\n            [types_1.SelectType.Diamond, DiamondDrawAction_1.default],\r\n            [types_1.SelectType.Start, StartDrawAction_1.default],\r\n            [types_1.SelectType.Free, FreeDrawAction_1.default],\r\n        ]);\r\n        _this.el = el;\r\n        _this.listeners = listeners;\r\n        defaultData && (_this.canvasData = defaultData);\r\n        _this.onResize = _this.onResize.bind(_this);\r\n        // 初始化Listeners\r\n        _this.initListeners();\r\n        // 初始化Canvas\r\n        _this.initCanvas();\r\n        // 初始化Events\r\n        _this.initEvents();\r\n        return _this;\r\n    }\r\n    /**\r\n     * initListeners\r\n     * @description 注册用户的listeners\r\n     */\r\n    PolygonSelection.prototype.initListeners = function () {\r\n        var _this = this;\r\n        var listeners = this.listeners;\r\n        if (!listeners)\r\n            return;\r\n        var keys = Object.keys(listeners);\r\n        keys.forEach(function (key) {\r\n            _this.on(key, listeners[key]);\r\n        });\r\n    };\r\n    /**\r\n     * initEvents\r\n     */\r\n    PolygonSelection.prototype.initEvents = function () {\r\n        var _this = this;\r\n        if (!this.el)\r\n            return;\r\n        // 点击了el元素\r\n        this.el.addEventListener('mouseup', function (e) {\r\n            if (!e)\r\n                return;\r\n            // 查看point命中了HistoryData中的哪一项\r\n            var historyData = _this.getHistoryData();\r\n            // if (!historyData || !historyData.length) {\r\n            //   this.trigger(PolygonSelectionActions.CanvasClickEmpty);\r\n            //   return;\r\n            // }\r\n            var point = adhere_util_1.default.clientToCtxPoint({\r\n                event: e,\r\n                rect: _this.el.getBoundingClientRect(),\r\n            });\r\n            var findIndexes = [];\r\n            for (var i = 0; i < historyData.length; i++) {\r\n                var data = historyData[i];\r\n                var action = _this.typeActionMap.get(data.type);\r\n                var isIn = 'booleanPointInData' in action ? action === null || action === void 0 ? void 0 : action.booleanPointInData(point, data) : false;\r\n                if (isIn) {\r\n                    findIndexes.push(i);\r\n                }\r\n            }\r\n            if (findIndexes.length) {\r\n                _this.trigger(types_1.PolygonSelectionActions.CanvasClickGeometry, JSON.parse(JSON.stringify(historyData[findIndexes[findIndexes.length - 1]])));\r\n            }\r\n            else {\r\n                if (historyData.length) {\r\n                    _this.trigger(types_1.PolygonSelectionActions.CanvasClickEmpty);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * initCanvas - 初始化Canvas\r\n     */\r\n    PolygonSelection.prototype.initCanvas = function () {\r\n        if (!this.el)\r\n            return;\r\n        // 创建一个canvas\r\n        this.canvasEl = document.createElement('canvas');\r\n        this.canvasEl.className = selectorPrefix;\r\n        this.ctx = this.canvasEl.getContext('2d');\r\n        // 创建一个assistCanvas\r\n        this.assistCanvasEl = document.createElement('canvas');\r\n        this.assistCanvasEl.className = selectorPrefix + \"-assist\";\r\n        this.assistCtx = this.assistCanvasEl.getContext('2d');\r\n        this.el.appendChild(this.canvasEl);\r\n        this.el.appendChild(this.assistCanvasEl);\r\n        // 触发canvasMount事件\r\n        this.trigger(types_1.PolygonSelectionActions.CanvasMount);\r\n        // 适配canvas\r\n        this.adapterCanvas();\r\n        // window.addEventListener('resize', this.onResize);\r\n    };\r\n    /**\r\n     * adapterCanvas - 适配canvas\r\n     */\r\n    PolygonSelection.prototype.adapterCanvas = function () {\r\n        var _a = this, canvasEl = _a.canvasEl, assistCanvasEl = _a.assistCanvasEl, el = _a.el;\r\n        if (!el || !canvasEl || !assistCanvasEl)\r\n            return;\r\n        canvasEl.width = el.offsetWidth || 0;\r\n        canvasEl.height = el.offsetHeight || 0;\r\n        assistCanvasEl.width = el.offsetWidth || 0;\r\n        assistCanvasEl.height = el.offsetHeight || 0;\r\n        this.clearDraw();\r\n        this.clearAssistDraw();\r\n        this.drawHistoryData();\r\n    };\r\n    /**\r\n     * onResize\r\n     */\r\n    PolygonSelection.prototype.onResize = function () {\r\n        this.adapterCanvas();\r\n    };\r\n    /**\r\n     * getCtx\r\n     * @return CanvasRenderingContext2D | null\r\n     */\r\n    PolygonSelection.prototype.getCtx = function () {\r\n        return this.ctx;\r\n    };\r\n    /**\r\n     * getCanvasEl\r\n     * @return HTMLCanvasElement | null\r\n     */\r\n    PolygonSelection.prototype.getCanvasEl = function () {\r\n        return this.canvasEl;\r\n    };\r\n    /**\r\n     * getAssistCanvasEl\r\n     */\r\n    PolygonSelection.prototype.getAssistCanvasEl = function () {\r\n        return this.assistCanvasEl;\r\n    };\r\n    PolygonSelection.prototype.getAssistCtx = function () {\r\n        return this.assistCtx;\r\n    };\r\n    /**\r\n     * getWidth\r\n     * @return number\r\n     */\r\n    PolygonSelection.prototype.getWidth = function () {\r\n        var _a;\r\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0;\r\n    };\r\n    /**\r\n     * getHeight\r\n     * @return number\r\n     */\r\n    PolygonSelection.prototype.getHeight = function () {\r\n        var _a;\r\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\r\n    };\r\n    /**\r\n     * addHistoryData - 添加一个ActionData到canvasData中\r\n     * @param data\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.addHistoryData = function (data) {\r\n        this.canvasData.push(data);\r\n    };\r\n    /**\r\n     * removeHistoryDataById - 删除一个ActionData中的数据\r\n     * @param actionDataId\r\n     * @return IActionData[]\r\n     */\r\n    PolygonSelection.prototype.removeHistoryDataById = function (actionDataId) {\r\n        var index = this.canvasData.findIndex(function (data) { return data.id === actionDataId; });\r\n        if (index === -1)\r\n            return [];\r\n        return this.canvasData.splice(index, 1);\r\n    };\r\n    /**\r\n     * drawHistoryData - 绘制历史数据\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.drawHistoryData = function () {\r\n        var _this = this;\r\n        this.canvasData.forEach(function (data) {\r\n            var _a;\r\n            var ctx = _this.ctx;\r\n            if (!ctx || !data)\r\n                return;\r\n            if (data.style) {\r\n                // 设置上下文属性\r\n                ctx.lineWidth = data.style.lineWidth;\r\n                ctx.lineJoin = data.style.lineJoin;\r\n                ctx.lineCap = data.style.lineCap;\r\n                ctx.setLineDash(data.style.lineDash);\r\n                ctx.lineDashOffset = data.style.lineDashOffset;\r\n                ctx.strokeStyle = data.style.strokeStyle;\r\n                ctx.fillStyle = data.style.fillStyle;\r\n            }\r\n            // 绘制指定类型的路径\r\n            // @ts-ignore\r\n            (_a = _this.typeActionMap.get(data.type)) === null || _a === void 0 ? void 0 : _a.drawHistoryPath(ctx, data.data);\r\n            // 描边\r\n            ctx.stroke();\r\n            // 填充\r\n            ctx.fill();\r\n        });\r\n    };\r\n    /**\r\n     * getHistoryDataById\r\n     * @param id\r\n     * @return IActionData | null | undefined\r\n     */\r\n    PolygonSelection.prototype.getHistoryDataById = function (id) {\r\n        return this.canvasData.find(function (data) { return data.id === id; });\r\n    };\r\n    /**\r\n     * getHistoryData\r\n     * @return IActionData []\r\n     */\r\n    PolygonSelection.prototype.getHistoryData = function () {\r\n        return __spreadArrays(this.canvasData);\r\n    };\r\n    /**\r\n     * setHistoryData\r\n     * @param data\r\n     */\r\n    PolygonSelection.prototype.setHistoryData = function (data) {\r\n        this.canvasData = data;\r\n    };\r\n    /**\r\n     * changeAction - 切换一个Action\r\n     * @param action - action对象\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.changeAction = function (action) {\r\n        // 如果当前和传入一致则跳过\r\n        if (action === this.curAction)\r\n            return;\r\n        // 只有是未开始才能切换\r\n        if (action.getStatus() !== types_1.ActionStatus.UnStart)\r\n            return;\r\n        if (this.curAction) {\r\n            this.curAction.destroy();\r\n        }\r\n        action === null || action === void 0 ? void 0 : action.setContext(this);\r\n        this.curAction = action;\r\n    };\r\n    /**\r\n     * getCurAction\r\n     * @return IAction | null\r\n     */\r\n    PolygonSelection.prototype.getCurAction = function () {\r\n        return this.curAction;\r\n    };\r\n    /**\r\n     * start - 开始\r\n     * @param style\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.start = function (style) {\r\n        if (!this.curAction)\r\n            return;\r\n        this.curAction.start(style);\r\n    };\r\n    /**\r\n     * end - 结束\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.end = function () {\r\n        if (!this.curAction)\r\n            return;\r\n        this.curAction.end();\r\n    };\r\n    /**\r\n     * clear\r\n     */\r\n    PolygonSelection.prototype.clearDraw = function () {\r\n        var ctx = this.ctx;\r\n        if (!ctx)\r\n            return;\r\n        ctx.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n    };\r\n    /**\r\n     * clearAssistDraw\r\n     * @description 清除assist的canvas\r\n     */\r\n    PolygonSelection.prototype.clearAssistDraw = function () {\r\n        var assistCtx = this.assistCtx;\r\n        if (!assistCtx)\r\n            return;\r\n        assistCtx.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n    };\r\n    /**\r\n     * setFrontCanvas\r\n     * @description 置顶\r\n     * @param canvasEl\r\n     */\r\n    PolygonSelection.prototype.setFrontCanvas = function (canvasEl) {\r\n        // console.log('置顶');\r\n        canvasEl.style.zIndex = '9999';\r\n    };\r\n    /**\r\n     * setBackCanvas\r\n     * @description 置底\r\n     * @param canvasEl\r\n     */\r\n    PolygonSelection.prototype.setBackCanvas = function (canvasEl) {\r\n        // console.log('置底');\r\n        canvasEl.style.zIndex = '1';\r\n    };\r\n    /**\r\n     * destroy - 销毁\r\n     * @return void\r\n     */\r\n    PolygonSelection.prototype.destroy = function () {\r\n        typeof window !== 'undefined' && window.removeEventListener('resize', this.onResize);\r\n        if (this.curAction) {\r\n            this.curAction.destroy();\r\n        }\r\n    };\r\n    return PolygonSelection;\r\n}(adhere_util_emitter_1.default.Events));\r\nexports.default = PolygonSelection;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","__importDefault","mod","__esModule","default","adhere_util_1","defineProperty","exports","value","require","adhere_util_emitter_1","CircleDrawAction_1","DiamondDrawAction_1","FreeDrawAction_1","PolygonDrawAction_1","RectangleDrawAction_1","StartDrawAction_1","TriangleDrawAction_1","types_1","selectorPrefix","PolygonSelection","_super","el","defaultData","listeners","_this","call","curAction","canvasEl","ctx","assistCanvasEl","assistCtx","canvasData","typeActionMap","Map","SelectType","Polygon","Circle","Rectangle","Triangle","Diamond","Start","Free","onResize","bind","initListeners","initCanvas","initEvents","keys","forEach","key","on","addEventListener","e","historyData","getHistoryData","point","clientToCtxPoint","event","rect","getBoundingClientRect","findIndexes","data","action","get","type","booleanPointInData","push","trigger","PolygonSelectionActions","CanvasClickGeometry","JSON","parse","stringify","CanvasClickEmpty","document","createElement","className","getContext","appendChild","CanvasMount","adapterCanvas","_a","width","offsetWidth","height","offsetHeight","clearDraw","clearAssistDraw","drawHistoryData","getCtx","getCanvasEl","getAssistCanvasEl","getAssistCtx","getWidth","getHeight","addHistoryData","removeHistoryDataById","actionDataId","index","findIndex","id","splice","style","lineWidth","lineJoin","lineCap","setLineDash","lineDash","lineDashOffset","strokeStyle","fillStyle","drawHistoryPath","stroke","fill","getHistoryDataById","find","setHistoryData","changeAction","getStatus","ActionStatus","UnStart","destroy","setContext","getCurAction","start","end","clearRect","setFrontCanvas","zIndex","setBackCanvas","window","removeEventListener","Events"],"mappings":"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"}