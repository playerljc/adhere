{"version":3,"file":"PolygonSelection.js","sources":["PolygonSelection.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar adhere_util_emitter_1 = __importDefault(require(\"@baifendian/adhere-util-emitter\"));\nvar CircleDrawAction_1 = __importDefault(require(\"./draw/CircleDrawAction\"));\nvar DiamondDrawAction_1 = __importDefault(require(\"./draw/DiamondDrawAction\"));\nvar FreeDrawAction_1 = __importDefault(require(\"./draw/FreeDrawAction\"));\nvar PolygonDrawAction_1 = __importDefault(require(\"./draw/PolygonDrawAction\"));\nvar RectangleDrawAction_1 = __importDefault(require(\"./draw/RectangleDrawAction\"));\nvar StartDrawAction_1 = __importDefault(require(\"./draw/StartDrawAction\"));\nvar TriangleDrawAction_1 = __importDefault(require(\"./draw/TriangleDrawAction\"));\nvar types_1 = require(\"./types\");\nvar selectorPrefix = 'adhere-ui-polygonselection';\n/**\n * PolygonSelection\n * @class\n * @classdesc - PolygonSelection\n */\nvar PolygonSelection = /** @class */ (function (_super) {\n    __extends(PolygonSelection, _super);\n    /**\n     * constructor\n     * @param el: HtmlElement - 父元素\n     * @param defaultData: IActionData[] - 缺省的ActionData数据\n     * @param listeners: IListeners - 缺省的事件注册对象\n     */\n    function PolygonSelection(el, defaultData, listeners) {\n        var _this = _super.call(this) || this;\n        // 父元素\n        _this.el = null;\n        // 注册的事件对象\n        _this.listeners = null;\n        // 当前的Action\n        _this.curAction = null;\n        // 当前的canvas元素\n        _this.canvasEl = null;\n        // 当前的ctx对象\n        _this.ctx = null;\n        // 辅助的canvas元素\n        _this.assistCanvasEl = null;\n        // 辅助的ctx对象\n        _this.assistCtx = null;\n        // canvas上的所有数据\n        _this.canvasData = [];\n        // ActionType\n        // @ts-ignore\n        _this.typeActionMap = new Map([\n            [types_1.SelectType.Polygon, PolygonDrawAction_1.default],\n            [types_1.SelectType.Circle, CircleDrawAction_1.default],\n            [types_1.SelectType.Rectangle, RectangleDrawAction_1.default],\n            [types_1.SelectType.Triangle, TriangleDrawAction_1.default],\n            [types_1.SelectType.Diamond, DiamondDrawAction_1.default],\n            [types_1.SelectType.Start, StartDrawAction_1.default],\n            [types_1.SelectType.Free, FreeDrawAction_1.default],\n        ]);\n        _this.el = el;\n        _this.listeners = listeners;\n        defaultData && (_this.canvasData = defaultData);\n        _this.onResize = _this.onResize.bind(_this);\n        // 初始化Listeners\n        _this.initListeners();\n        // 初始化Canvas\n        _this.initCanvas();\n        // 初始化Events\n        _this.initEvents();\n        return _this;\n    }\n    /**\n     * initListeners\n     * @description 注册用户的listeners\n     */\n    PolygonSelection.prototype.initListeners = function () {\n        var _this = this;\n        var listeners = this.listeners;\n        if (!listeners)\n            return;\n        var keys = Object.keys(listeners);\n        keys.forEach(function (key) {\n            _this.on(key, listeners[key]);\n        });\n    };\n    /**\n     * initEvents\n     */\n    PolygonSelection.prototype.initEvents = function () {\n        var _this = this;\n        if (!this.el)\n            return;\n        // 点击了el元素\n        this.el.addEventListener('mouseup', function (e) {\n            if (!e)\n                return;\n            // 查看point命中了HistoryData中的哪一项\n            var historyData = _this.getHistoryData();\n            // if (!historyData || !historyData.length) {\n            //   this.trigger(PolygonSelectionActions.CanvasClickEmpty);\n            //   return;\n            // }\n            var point = adhere_util_1.default.clientToCtxPoint({\n                event: e,\n                rect: _this.el.getBoundingClientRect(),\n            });\n            var findIndexes = [];\n            for (var i = 0; i < historyData.length; i++) {\n                var data = historyData[i];\n                var action = _this.typeActionMap.get(data.type);\n                var isIn = 'booleanPointInData' in action ? action === null || action === void 0 ? void 0 : action.booleanPointInData(point, data) : false;\n                if (isIn) {\n                    findIndexes.push(i);\n                }\n            }\n            if (findIndexes.length) {\n                _this.trigger(types_1.PolygonSelectionActions.CanvasClickGeometry, JSON.parse(JSON.stringify(historyData[findIndexes[findIndexes.length - 1]])));\n            }\n            else {\n                if (historyData.length) {\n                    _this.trigger(types_1.PolygonSelectionActions.CanvasClickEmpty);\n                }\n            }\n        });\n    };\n    /**\n     * initCanvas - 初始化Canvas\n     */\n    PolygonSelection.prototype.initCanvas = function () {\n        if (!this.el)\n            return;\n        // 创建一个canvas\n        this.canvasEl = document.createElement('canvas');\n        this.canvasEl.className = selectorPrefix;\n        this.ctx = this.canvasEl.getContext('2d');\n        // 创建一个assistCanvas\n        this.assistCanvasEl = document.createElement('canvas');\n        this.assistCanvasEl.className = \"\".concat(selectorPrefix, \"-assist\");\n        this.assistCtx = this.assistCanvasEl.getContext('2d');\n        this.el.appendChild(this.canvasEl);\n        this.el.appendChild(this.assistCanvasEl);\n        // 触发canvasMount事件\n        this.trigger(types_1.PolygonSelectionActions.CanvasMount);\n        // 适配canvas\n        this.adapterCanvas();\n        // window.addEventListener('resize', this.onResize);\n    };\n    /**\n     * adapterCanvas - 适配canvas\n     */\n    PolygonSelection.prototype.adapterCanvas = function () {\n        var _a = this, canvasEl = _a.canvasEl, assistCanvasEl = _a.assistCanvasEl, el = _a.el;\n        if (!el || !canvasEl || !assistCanvasEl)\n            return;\n        canvasEl.width = el.offsetWidth || 0;\n        canvasEl.height = el.offsetHeight || 0;\n        assistCanvasEl.width = el.offsetWidth || 0;\n        assistCanvasEl.height = el.offsetHeight || 0;\n        this.clearDraw();\n        this.clearAssistDraw();\n        this.drawHistoryData();\n    };\n    /**\n     * onResize\n     */\n    PolygonSelection.prototype.onResize = function () {\n        this.adapterCanvas();\n    };\n    /**\n     * getCtx\n     * @return CanvasRenderingContext2D | null\n     */\n    PolygonSelection.prototype.getCtx = function () {\n        return this.ctx;\n    };\n    /**\n     * getCanvasEl\n     * @return HTMLCanvasElement | null\n     */\n    PolygonSelection.prototype.getCanvasEl = function () {\n        return this.canvasEl;\n    };\n    /**\n     * getAssistCanvasEl\n     */\n    PolygonSelection.prototype.getAssistCanvasEl = function () {\n        return this.assistCanvasEl;\n    };\n    PolygonSelection.prototype.getAssistCtx = function () {\n        return this.assistCtx;\n    };\n    /**\n     * getWidth\n     * @return number\n     */\n    PolygonSelection.prototype.getWidth = function () {\n        var _a;\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetWidth) || 0;\n    };\n    /**\n     * getHeight\n     * @return number\n     */\n    PolygonSelection.prototype.getHeight = function () {\n        var _a;\n        return ((_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetHeight) || 0;\n    };\n    /**\n     * addHistoryData - 添加一个ActionData到canvasData中\n     * @param data\n     * @return void\n     */\n    PolygonSelection.prototype.addHistoryData = function (data) {\n        this.canvasData.push(data);\n    };\n    /**\n     * removeHistoryDataById - 删除一个ActionData中的数据\n     * @param actionDataId\n     * @return IActionData[]\n     */\n    PolygonSelection.prototype.removeHistoryDataById = function (actionDataId) {\n        var index = this.canvasData.findIndex(function (data) { return data.id === actionDataId; });\n        if (index === -1)\n            return [];\n        return this.canvasData.splice(index, 1);\n    };\n    /**\n     * drawHistoryData - 绘制历史数据\n     * @return void\n     */\n    PolygonSelection.prototype.drawHistoryData = function () {\n        var _this = this;\n        this.canvasData.forEach(function (data) {\n            var _a;\n            var ctx = _this.ctx;\n            if (!ctx || !data)\n                return;\n            // 绘制指定类型的路径\n            // @ts-ignore\n            (_a = _this.typeActionMap.get(data.type)) === null || _a === void 0 ? void 0 : _a.drawHistoryPath(ctx, data);\n        });\n    };\n    /**\n     * getHistoryDataById\n     * @param id\n     * @return IActionData | null | undefined\n     */\n    PolygonSelection.prototype.getHistoryDataById = function (id) {\n        return this.canvasData.find(function (data) { return data.id === id; });\n    };\n    /**\n     * getHistoryData\n     * @return IActionData []\n     */\n    PolygonSelection.prototype.getHistoryData = function () {\n        return __spreadArray([], this.canvasData, true);\n    };\n    /**\n     * setHistoryData\n     * @param data\n     */\n    PolygonSelection.prototype.setHistoryData = function (data) {\n        this.canvasData = data;\n    };\n    /**\n     * changeAction - 切换一个Action\n     * @param action - action对象\n     * @return void\n     */\n    PolygonSelection.prototype.changeAction = function (action) {\n        // 如果当前和传入一致则跳过\n        if (action === this.curAction)\n            return;\n        // 只有是未开始才能切换\n        if (action.getStatus() !== types_1.ActionStatus.UnStart)\n            return;\n        if (this.curAction) {\n            this.curAction.destroy();\n        }\n        action === null || action === void 0 ? void 0 : action.setContext(this);\n        this.curAction = action;\n    };\n    /**\n     * getCurAction\n     * @return IAction | null\n     */\n    PolygonSelection.prototype.getCurAction = function () {\n        return this.curAction;\n    };\n    /**\n     * start - 开始\n     * @param style\n     * @return void\n     */\n    PolygonSelection.prototype.start = function (style) {\n        if (!this.curAction)\n            return;\n        this.curAction.start(style);\n    };\n    /**\n     * end - 结束\n     * @return void\n     */\n    PolygonSelection.prototype.end = function () {\n        if (!this.curAction)\n            return;\n        this.curAction.end();\n    };\n    /**\n     * clear\n     */\n    PolygonSelection.prototype.clearDraw = function () {\n        var ctx = this.ctx;\n        if (!ctx)\n            return;\n        ctx.clearRect(0, 0, this.getWidth(), this.getHeight());\n    };\n    /**\n     * clearAssistDraw\n     * @description 清除assist的canvas\n     */\n    PolygonSelection.prototype.clearAssistDraw = function () {\n        var assistCtx = this.assistCtx;\n        if (!assistCtx)\n            return;\n        assistCtx.clearRect(0, 0, this.getWidth(), this.getHeight());\n    };\n    /**\n     * clearHistoryData\n     */\n    PolygonSelection.prototype.clearHistoryData = function () {\n        this.canvasData = [];\n    };\n    /**\n     * clearCanvasAll\n     */\n    PolygonSelection.prototype.clearCanvasAll = function () {\n        this.clearDraw();\n        this.clearAssistDraw();\n        this.clearHistoryData();\n    };\n    /**\n     * setFrontCanvas\n     * @description 置顶\n     * @param canvasEl\n     */\n    PolygonSelection.prototype.setFrontCanvas = function (canvasEl) {\n        // console.log('置顶');\n        canvasEl.style.zIndex = '9999';\n    };\n    /**\n     * setBackCanvas\n     * @description 置底\n     * @param canvasEl\n     */\n    PolygonSelection.prototype.setBackCanvas = function (canvasEl) {\n        // console.log('置底');\n        canvasEl.style.zIndex = '1';\n    };\n    /**\n     * destroy - 销毁\n     * @return void\n     */\n    PolygonSelection.prototype.destroy = function () {\n        typeof window !== 'undefined' && window.removeEventListener('resize', this.onResize);\n        if (this.curAction) {\n            this.curAction.destroy();\n        }\n    };\n    return PolygonSelection;\n}(adhere_util_emitter_1.default.Events));\nexports.default = PolygonSelection;\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","pack","arguments","length","ar","i","l","slice","concat","__importDefault","mod","__esModule","default","adhere_util_1","defineProperty","exports","value","require","adhere_util_emitter_1","CircleDrawAction_1","DiamondDrawAction_1","FreeDrawAction_1","PolygonDrawAction_1","RectangleDrawAction_1","StartDrawAction_1","TriangleDrawAction_1","types_1","selectorPrefix","PolygonSelection","_super","el","defaultData","listeners","_this","curAction","canvasEl","ctx","assistCanvasEl","assistCtx","canvasData","typeActionMap","Map","SelectType","Polygon","Circle","Rectangle","Triangle","Diamond","Start","Free","onResize","bind","initListeners","initCanvas","initEvents","keys","forEach","key","on","addEventListener","e","historyData","getHistoryData","point","clientToCtxPoint","event","rect","getBoundingClientRect","findIndexes","data","action","get","type","booleanPointInData","push","trigger","PolygonSelectionActions","CanvasClickGeometry","JSON","parse","stringify","CanvasClickEmpty","document","createElement","className","getContext","appendChild","CanvasMount","adapterCanvas","_a","width","offsetWidth","height","offsetHeight","clearDraw","clearAssistDraw","drawHistoryData","getCtx","getCanvasEl","getAssistCanvasEl","getAssistCtx","getWidth","getHeight","addHistoryData","removeHistoryDataById","actionDataId","index","findIndex","id","splice","drawHistoryPath","getHistoryDataById","find","setHistoryData","changeAction","getStatus","ActionStatus","UnStart","destroy","setContext","getCurAction","start","style","end","clearRect","clearHistoryData","clearCanvasAll","setFrontCanvas","zIndex","setBackCanvas","window","removeEventListener","Events"],"mappings":"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"}