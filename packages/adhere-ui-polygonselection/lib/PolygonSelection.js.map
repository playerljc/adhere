{"version":3,"file":"PolygonSelection.js","sources":["PolygonSelection.js"],"sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArray = void 0 && (void 0).__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar adhere_util_emitter_1 = __importDefault(require(\"@baifendian/adhere-util-emitter\"));\nvar cropping_1 = __importDefault(require(\"./cropping\"));\nvar CircleDrawAction_1 = __importDefault(require(\"./draw/CircleDrawAction\"));\nvar DiamondDrawAction_1 = __importDefault(require(\"./draw/DiamondDrawAction\"));\nvar FreeDrawAction_1 = __importDefault(require(\"./draw/FreeDrawAction\"));\nvar PolygonDrawAction_1 = __importDefault(require(\"./draw/PolygonDrawAction\"));\nvar RectangleDrawAction_1 = __importDefault(require(\"./draw/RectangleDrawAction\"));\nvar StartDrawAction_1 = __importDefault(require(\"./draw/StartDrawAction\"));\nvar TriangleDrawAction_1 = __importDefault(require(\"./draw/TriangleDrawAction\"));\nvar types_1 = require(\"./types\");\nvar selectorPrefix = 'adhere-ui-polygon-selection';\n/**\n * PolygonSelection\n * @class\n * @classdesc - PolygonSelection\n */\nvar PolygonSelection = /** @class */function (_super) {\n  __extends(PolygonSelection, _super);\n  /**\n   * constructor\n   * @param el: HtmlElement - 父元素\n   * @param defaultData: IActionData[] - 缺省的ActionData数据\n   * @param listeners: IListeners - 缺省的事件注册对象\n   */\n  function PolygonSelection(el, defaultData, listeners) {\n    var _this = _super.call(this) || this;\n    // 父元素\n    _this.el = null;\n    // 注册的事件对象\n    _this.listeners = null;\n    // 当前的Action\n    _this.curAction = null;\n    // 当前的canvas元素\n    _this.canvasEl = null;\n    // 当前的ctx对象\n    _this.ctx = null;\n    // 辅助的canvas元素\n    _this.assistCanvasEl = null;\n    // 辅助的ctx对象\n    _this.assistCtx = null;\n    // canvas上的所有数据\n    _this.canvasData = [];\n    // ActionType\n    // @ts-ignore\n    _this.typeActionMap = new Map([[types_1.SelectType.Polygon, PolygonDrawAction_1.default], [types_1.SelectType.Circle, CircleDrawAction_1.default], [types_1.SelectType.Rectangle, RectangleDrawAction_1.default], [types_1.SelectType.Triangle, TriangleDrawAction_1.default], [types_1.SelectType.Diamond, DiamondDrawAction_1.default], [types_1.SelectType.Start, StartDrawAction_1.default], [types_1.SelectType.Free, FreeDrawAction_1.default]]);\n    _this.el = el;\n    _this.listeners = listeners;\n    defaultData && (_this.canvasData = defaultData);\n    _this.onResize = _this.onResize.bind(_this);\n    // 初始化Listeners\n    _this.initListeners();\n    // 初始化Canvas\n    _this.initCanvas();\n    // 初始化Events\n    _this.initEvents();\n    return _this;\n  }\n  /**\n   * initListeners\n   * @description 注册用户的listeners\n   */\n  PolygonSelection.prototype.initListeners = function () {\n    var _this = this;\n    var listeners = this.listeners;\n    if (!listeners) return;\n    var keys = Object.keys(listeners);\n    keys.forEach(function (key) {\n      _this.on(key, listeners[key]);\n    });\n  };\n  /**\n   * initEvents\n   */\n  PolygonSelection.prototype.initEvents = function () {\n    var _this = this;\n    if (!this.el) return;\n    // 点击了el元素\n    this.el.addEventListener('mouseup', function (e) {\n      if (!e) return;\n      // 查看point命中了HistoryData中的哪一项\n      var historyData = _this.getHistoryData();\n      // if (!historyData ||  !historyData.length) {\n      //   this.trigger(PolygonSelectionActions.CanvasClickEmpty);\n      //   return;\n      // }\n      var point = adhere_util_1.default.clientToCtxPoint({\n        event: e,\n        rect: _this.el.getBoundingClientRect()\n      });\n      var findIndexes = [];\n      for (var i = 0; i < historyData.length; i++) {\n        var data = historyData[i];\n        var action = _this.typeActionMap.get(data.type);\n        var isIn = 'booleanPointInData' in action ? action === null || action === void 0 ? void 0 : action.booleanPointInData(point, data) : false;\n        if (isIn) {\n          findIndexes.push(i);\n        }\n      }\n      if (findIndexes.length) {\n        _this.trigger(types_1.PolygonSelectionActions.CanvasClickGeometry, JSON.parse(JSON.stringify(historyData[findIndexes[findIndexes.length - 1]])));\n      } else {\n        if (historyData.length) {\n          _this.trigger(types_1.PolygonSelectionActions.CanvasClickEmpty);\n        }\n      }\n    });\n  };\n  /**\n   * initCanvas - 初始化Canvas\n   */\n  PolygonSelection.prototype.initCanvas = function () {\n    if (!this.el) return;\n    // 创建一个canvas\n    this.canvasEl = document.createElement('canvas');\n    this.canvasEl.className = selectorPrefix;\n    this.ctx = this.canvasEl.getContext('2d');\n    // 创建一个assistCanvas\n    this.assistCanvasEl = document.createElement('canvas');\n    this.assistCanvasEl.className = \"\".concat(selectorPrefix, \"-assist\");\n    this.assistCtx = this.assistCanvasEl.getContext('2d');\n    this.el.appendChild(this.canvasEl);\n    this.el.appendChild(this.assistCanvasEl);\n    // 触发canvasMount事件\n    this.trigger(types_1.PolygonSelectionActions.CanvasMount);\n    // 适配canvas\n    this.adapterCanvas();\n    // window.addEventListener('resize', this.onResize);\n  };\n  /**\n   * adapterCanvas - 适配canvas\n   */\n  PolygonSelection.prototype.adapterCanvas = function () {\n    var _a, _b, _c, _d, _e, _f;\n    var _g = this,\n      canvasEl = _g.canvasEl,\n      assistCanvasEl = _g.assistCanvasEl,\n      el = _g.el;\n    if ((_b = (_a = !el) !== null && _a !== void 0 ? _a : !canvasEl) !== null && _b !== void 0 ? _b : !assistCanvasEl) return;\n    canvasEl.width = (_c = el === null || el === void 0 ? void 0 : el.offsetWidth) !== null && _c !== void 0 ? _c : 0;\n    canvasEl.height = (_d = el === null || el === void 0 ? void 0 : el.offsetHeight) !== null && _d !== void 0 ? _d : 0;\n    assistCanvasEl.width = (_e = el === null || el === void 0 ? void 0 : el.offsetWidth) !== null && _e !== void 0 ? _e : 0;\n    assistCanvasEl.height = (_f = el === null || el === void 0 ? void 0 : el.offsetHeight) !== null && _f !== void 0 ? _f : 0;\n    this.clearDraw();\n    this.clearAssistDraw();\n    this.drawHistoryData();\n  };\n  /**\n   * onResize\n   */\n  PolygonSelection.prototype.onResize = function () {\n    this.adapterCanvas();\n  };\n  /**\n   * getCtx\n   * @return CanvasRenderingContext2D | null\n   */\n  PolygonSelection.prototype.getCtx = function () {\n    return this.ctx;\n  };\n  /**\n   * getCanvasEl\n   * @return HTMLCanvasElement | null\n   */\n  PolygonSelection.prototype.getCanvasEl = function () {\n    return this.canvasEl;\n  };\n  /**\n   * getAssistCanvasEl\n   */\n  PolygonSelection.prototype.getAssistCanvasEl = function () {\n    return this.assistCanvasEl;\n  };\n  PolygonSelection.prototype.getAssistCtx = function () {\n    return this.assistCtx;\n  };\n  /**\n   * getWidth\n   * @return number\n   */\n  PolygonSelection.prototype.getWidth = function () {\n    var _a, _b;\n    return (_b = (_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetWidth) !== null && _b !== void 0 ? _b : 0;\n  };\n  /**\n   * getHeight\n   * @return number\n   */\n  PolygonSelection.prototype.getHeight = function () {\n    var _a, _b;\n    return (_b = (_a = this === null || this === void 0 ? void 0 : this.el) === null || _a === void 0 ? void 0 : _a.offsetHeight) !== null && _b !== void 0 ? _b : 0;\n  };\n  /**\n   * addHistoryData - 添加一个ActionData到canvasData中\n   * @param data\n   * @return void\n   */\n  PolygonSelection.prototype.addHistoryData = function (data) {\n    this.canvasData.push(data);\n  };\n  /**\n   * removeHistoryDataById - 删除一个ActionData中的数据\n   * @param actionDataId\n   * @return IActionData[]\n   */\n  PolygonSelection.prototype.removeHistoryDataById = function (actionDataId) {\n    var index = this.canvasData.findIndex(function (data) {\n      return data.id === actionDataId;\n    });\n    if (index === -1) return [];\n    return this.canvasData.splice(index, 1);\n  };\n  /**\n   * drawHistoryData - 绘制历史数据\n   * @return void\n   */\n  PolygonSelection.prototype.drawHistoryData = function () {\n    var _this = this;\n    this.canvasData.forEach(function (data) {\n      var _a;\n      var ctx = _this.ctx;\n      if (!ctx || !data) return;\n      // 绘制指定类型的路径\n      // @ts-ignore\n      (_a = _this.typeActionMap.get(data.type)) === null || _a === void 0 ? void 0 : _a.drawHistoryPath(ctx, data);\n    });\n  };\n  /**\n   * getHistoryDataById\n   * @param id\n   * @return IActionData | null | undefined\n   */\n  PolygonSelection.prototype.getHistoryDataById = function (id) {\n    return this.canvasData.find(function (data) {\n      return data.id === id;\n    });\n  };\n  /**\n   * getHistoryData\n   * @return IActionData []\n   */\n  PolygonSelection.prototype.getHistoryData = function () {\n    return __spreadArray([], this.canvasData, true);\n  };\n  /**\n   * setHistoryData\n   * @param data\n   */\n  PolygonSelection.prototype.setHistoryData = function (data) {\n    this.canvasData = data;\n  };\n  /**\n   * changeAction - 切换一个Action\n   * @param action - action对象\n   * @return void\n   */\n  PolygonSelection.prototype.changeAction = function (action) {\n    // 如果当前和传入一致则跳过\n    if (action === this.curAction) return;\n    // 只有是未开始才能切换\n    if (action.getStatus() !== types_1.ActionStatus.UnStart) return;\n    if (this.curAction) {\n      this.curAction.destroy();\n    }\n    action === null || action === void 0 ? void 0 : action.setContext(this);\n    this.curAction = action;\n  };\n  /**\n   * getCurAction\n   * @return IAction | null\n   */\n  PolygonSelection.prototype.getCurAction = function () {\n    return this.curAction;\n  };\n  /**\n   * start - 开始\n   * @param style\n   * @return void\n   */\n  PolygonSelection.prototype.start = function (style) {\n    if (!this.curAction) return;\n    this.curAction.start(style);\n  };\n  /**\n   * end - 结束\n   * @return void\n   */\n  PolygonSelection.prototype.end = function () {\n    if (!this.curAction) return;\n    this.curAction.end();\n  };\n  /**\n   * clear\n   */\n  PolygonSelection.prototype.clearDraw = function () {\n    var ctx = this.ctx;\n    if (!ctx) return;\n    ctx.clearRect(0, 0, this.getWidth(), this.getHeight());\n  };\n  /**\n   * clearAssistDraw\n   * @description 清除assist的canvas\n   */\n  PolygonSelection.prototype.clearAssistDraw = function () {\n    var assistCtx = this.assistCtx;\n    if (!assistCtx) return;\n    assistCtx.clearRect(0, 0, this.getWidth(), this.getHeight());\n  };\n  /**\n   * clearHistoryData\n   */\n  PolygonSelection.prototype.clearHistoryData = function () {\n    this.canvasData = [];\n  };\n  /**\n   * clearCanvasAll\n   */\n  PolygonSelection.prototype.clearCanvasAll = function () {\n    this.clearDraw();\n    this.clearAssistDraw();\n    this.clearHistoryData();\n  };\n  /**\n   * setFrontCanvas\n   * @description 置顶\n   * @param canvasEl\n   */\n  PolygonSelection.prototype.setFrontCanvas = function (canvasEl) {\n    // console.log('置顶');\n    canvasEl.style.zIndex = '9999';\n  };\n  /**\n   * setBackCanvas\n   * @description 置底\n   * @param canvasEl\n   */\n  PolygonSelection.prototype.setBackCanvas = function (canvasEl) {\n    // console.log('置底');\n    canvasEl.style.zIndex = '1';\n  };\n  /**\n   * destroy - 销毁\n   * @return void\n   */\n  PolygonSelection.prototype.destroy = function () {\n    typeof window !== 'undefined' && window.removeEventListener('resize', this.onResize);\n    if (this.curAction) {\n      this.curAction.destroy();\n    }\n    this.clearAll();\n    if (this.el) {\n      this.el.innerHTML = '';\n    }\n  };\n  PolygonSelection.Cropping = cropping_1.default;\n  return PolygonSelection;\n}(adhere_util_emitter_1.default.Events);\nexports.default = PolygonSelection;"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","__spreadArray","to","from","pack","arguments","length","ar","i","l","slice","concat","__importDefault","mod","__esModule","default","adhere_util_1","defineProperty","exports","value","require","adhere_util_emitter_1","cropping_1","CircleDrawAction_1","DiamondDrawAction_1","FreeDrawAction_1","PolygonDrawAction_1","RectangleDrawAction_1","StartDrawAction_1","TriangleDrawAction_1","types_1","selectorPrefix","PolygonSelection","_super","el","defaultData","listeners","_this","curAction","canvasEl","ctx","assistCanvasEl","assistCtx","canvasData","typeActionMap","Map","SelectType","Polygon","Circle","Rectangle","Triangle","Diamond","Start","Free","onResize","bind","initListeners","initCanvas","initEvents","keys","forEach","key","on","addEventListener","e","historyData","getHistoryData","point","clientToCtxPoint","event","rect","getBoundingClientRect","findIndexes","data","action","get","type","booleanPointInData","push","trigger","PolygonSelectionActions","CanvasClickGeometry","JSON","parse","stringify","CanvasClickEmpty","document","createElement","className","getContext","appendChild","CanvasMount","adapterCanvas","_f","_g","_b","_a","width","_c","offsetWidth","height","_d","offsetHeight","_e","clearDraw","clearAssistDraw","drawHistoryData","getCtx","getCanvasEl","getAssistCanvasEl","getAssistCtx","getWidth","getHeight","addHistoryData","removeHistoryDataById","actionDataId","index","findIndex","id","splice","drawHistoryPath","getHistoryDataById","find","setHistoryData","changeAction","getStatus","ActionStatus","UnStart","destroy","setContext","getCurAction","start","style","end","clearRect","clearHistoryData","clearCanvasAll","setFrontCanvas","zIndex","setBackCanvas","window","removeEventListener","clearAll","innerHTML","Cropping","Events"],"mappings":"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"}