"use strict";var __assign=function(){return(__assign=Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++)for(var l in e=arguments[a])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t}).apply(this,arguments)},types_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.sort=exports.getClipDataUrl=exports.getPolygonRectangle=exports.drawPolygon=exports.getTriangleRectangle=exports.drawTriangle=exports.getStartRectangle=exports.drawStart=exports.getDiamondRectangle=exports.drawDiamond=exports.getSelfRectangle=exports.drawRectangle=exports.getCircleRectangle=exports.drawCircle=void 0,require("../types"));function drawCircle(t,e){var a;null!=t&&t.beginPath(),null!=t&&t.ellipse((null==(a=e.data.center)?void 0:a.x)||0,(null==(a=e.data.center)?void 0:a.y)||0,e.data.radius,e.data.radius,45*Math.PI/180,0,2*Math.PI),null!=t&&t.closePath()}function getCircleRectangle(t){return getSelfRectangle({leftTopPoint:{x:t.center.x-t.radius,y:t.center.y-t.radius},width:2*t.radius,height:2*t.radius})}function drawRectangle(t,e){var a;null!=t&&t.beginPath(),t.rect((null==(a=e.data.leftTopPoint)?void 0:a.x)||0,(null==(a=e.data.leftTopPoint)?void 0:a.y)||0,e.data.width,e.data.height),null!=t&&t.closePath()}function getSelfRectangle(t){return __assign({},t)}function drawDiamond(t,e){null!=t&&t.beginPath();var a=e.data.width/2,n=e.data.height/2;t.moveTo(e.data.leftTopPoint.x,e.data.leftTopPoint.y+n),t.lineTo(e.data.leftTopPoint.x+a,e.data.leftTopPoint.y),t.lineTo(e.data.leftTopPoint.x+e.data.width,e.data.leftTopPoint.y+n),t.lineTo(e.data.leftTopPoint.x+a,e.data.leftTopPoint.y+e.data.height),null!=t&&t.closePath()}function getDiamondRectangle(t){return __assign({},t)}function drawStart(t,e){null!=t&&t.beginPath();for(var a=72,n=0;n<5;n++)t.lineTo(Math.cos((18+n*a)/180*Math.PI)*e.data.outRadius+e.data.center.x,-Math.sin((18+n*a)/180*Math.PI)*e.data.outRadius+e.data.center.y),t.lineTo(Math.cos((54+n*a)/180*Math.PI)*e.data.innerRadius+e.data.center.x,-Math.sin((54+n*a)/180*Math.PI)*e.data.innerRadius+e.data.center.y);null!=t&&t.closePath()}function getStartRectangle(t){return getCircleRectangle({center:t.center,radius:t.outRadius})}function drawTriangle(t,e){null!=t&&t.beginPath(),t.moveTo(e.data.points[0].x,e.data.points[0].y),t.lineTo(e.data.points[1].x,e.data.points[1].y),t.lineTo(e.data.points[2].x,e.data.points[2].y),null!=t&&t.closePath()}function getTriangleRectangle(t){return getSelfRectangle({leftTopPoint:{x:t.points[0].x,y:t.points[1].y},width:t.points[2].x-t.points[0].x,height:t.points[2].y-t.points[1].y})}function drawPolygon(a,t){a.beginPath(),((null==t?void 0:t.data)||[]).forEach(function(t,e){0===e?a.moveTo(t.x,t.y):a.lineTo(t.x,t.y)}),null!=a&&a.closePath()}function getPolygonRectangle(t){var e=t.map(function(t){return t.x}),t=t.map(function(t){return t.y}),e={minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e)},a=e.minX,e=e.maxX,t={minY:Math.min.apply(Math,t),maxY:Math.max.apply(Math,t)},n=t.minY;return{leftTopPoint:{x:a,y:n},width:e-a,height:t.maxY-n}}function getClipDataUrl(t){var e=t.data,t=t.clipCtx,a=null==(a=new Map([[types_1.SelectType.Circle,getCircleRectangle],[types_1.SelectType.Rectangle,getSelfRectangle],[types_1.SelectType.Diamond,getDiamondRectangle],[types_1.SelectType.Start,getStartRectangle],[types_1.SelectType.Triangle,getTriangleRectangle],[types_1.SelectType.Polygon,getPolygonRectangle]]).get(e.data.type))?void 0:a(e.data.data),e=t.getImageData(a.leftTopPoint.x,a.leftTopPoint.y,a.width,a.height),t=document.createElement("canvas");return t.width=a.width,t.height=a.height,t.getContext("2d").putImageData(e,0,0),t.toDataURL("image/png",1)}function sort(t){var a=Array.from({length:t.length}).fill(null),n=[];return t.forEach(function(t,e){"sort"in t?n.push(t):a[e]=t}),n.forEach(function(t){a.splice(t.sort,0,t)}),a.filter(function(t){return!!t})}exports.drawCircle=drawCircle,exports.getCircleRectangle=getCircleRectangle,exports.drawRectangle=drawRectangle,exports.getSelfRectangle=getSelfRectangle,exports.drawDiamond=drawDiamond,exports.getDiamondRectangle=getDiamondRectangle,exports.drawStart=drawStart,exports.getStartRectangle=getStartRectangle,exports.drawTriangle=drawTriangle,exports.getTriangleRectangle=getTriangleRectangle,exports.drawPolygon=drawPolygon,exports.getPolygonRectangle=getPolygonRectangle,exports.getClipDataUrl=getClipDataUrl,exports.sort=sort;
//# sourceMappingURL=util.js.map
