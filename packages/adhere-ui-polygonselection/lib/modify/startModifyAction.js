var __extends=this&&this.__extends||function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(t,i)};return function(t,i){function o(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();import MathUtil from"@baifendian/adhere-util/lib/math";import{SelectType}from"../types";import ModifyAction from"./modifyAction";var StartModifyAction=function(i){function t(t){return i.call(this,t)||this}return __extends(t,i),t.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t){for(var i=null===(o=null===(i=null==this?void 0:this.data)||void 0===i?void 0:i.data)||void 0===o?void 0:o.data,o=i.center,i=i.outRadius,n=[{x:o.x,y:o.y-i},{x:o.x+i,y:o.y},{x:o.x,y:o.y+i},{x:o.x-i,y:o.y}],a=0;a<n.length;a++){var e=n[a];t.beginPath(),this.setAnchorStyle(),t.ellipse(e.x,e.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.stroke(),t.fill()}t.beginPath(),this.setAnchorStyle(),t.ellipse(o.x,o.y,i,i,45*Math.PI/180,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}},t.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var i=null,o=-1,n=null===(a=null===(n=null==this?void 0:this.data)||void 0===n?void 0:n.data)||void 0===a?void 0:a.data,a=n.center,n=n.outRadius,e=[{x:a.x,y:a.y-n},{x:a.x+n,y:a.y},{x:a.x,y:a.y+n},{x:a.x-n,y:a.y}],r=0;r<e.length;r++){var s=e[r],d=this.anchorRadius+this.anchorLineWidth;if(MathUtil.isPointInCircle(t,{center:s,radius:d})){i=s,o=r;break}}return i&&-1!==o?{point:i,index:o}:null},t.prototype.draw=function(t){var i,o=this.context,n=null==o?void 0:o.getCtx();o&&n&&this.data&&this.startPoint&&((i=o.getHistoryDataById(this.data.data.id))&&(n=i.data.center,i.data.outRadius=MathUtil.getDistanceByBetweenPoint({p1:n,p2:t}),i.data.innerRadius=i.data.outRadius/2,o.clearDraw(),o.drawHistoryData(),this.drawAnchors()))},t.prototype.getSelectType=function(){return SelectType.Start},t}(ModifyAction);export default StartModifyAction;
//# sourceMappingURL=startModifyAction.js.map
