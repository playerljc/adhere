var __extends=this&&this.__extends||function(){var o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)};return function(t,i){function n(){this.constructor=t}o(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();import MathUtil from"@baifendian/adhere-util/lib/math";import{SelectType}from"../types";import ModifyAction from"./modifyAction";var CircleModifyAction=function(i){function t(t){return i.call(this,t)||this}return __extends(t,i),t.prototype.drawAnchors=function(){if(this.context){var t=this.context.getCtx();if(t)for(var i=null===(n=null===(i=null==this?void 0:this.data)||void 0===i?void 0:i.data)||void 0===n?void 0:n.data,n=i.center,i=i.radius,o=[{x:n.x,y:n.y-i},{x:n.x+i,y:n.y},{x:n.x,y:n.y+i},{x:n.x-i,y:n.y}],r=0;r<o.length;r++){var e=o[r];t.beginPath(),this.setAnchorStyle(),t.ellipse(e.x,e.y,this.anchorRadius,this.anchorRadius,45*Math.PI/180,0,2*Math.PI),t.stroke(),t.fill()}}},t.prototype.getPointInAnchor=function(t){if(!this.data)return null;for(var i=null,n=-1,o=null===(r=null===(o=null==this?void 0:this.data)||void 0===o?void 0:o.data)||void 0===r?void 0:r.data,r=o.center,o=o.radius,e=[{x:r.x,y:r.y-o},{x:r.x+o,y:r.y},{x:r.x,y:r.y+o},{x:r.x-o,y:r.y}],a=0;a<e.length;a++){var d=e[a],c=this.anchorRadius+this.anchorLineWidth;if(MathUtil.isPointInCircle(t,{center:d,radius:c})){i=d,n=a;break}}return i&&-1!==n?{point:i,index:n}:null},t.prototype.draw=function(t){var i,n=this.context,o=null==n?void 0:n.getCtx();n&&o&&this.data&&this.startPoint&&((i=n.getHistoryDataById(this.data.data.id))&&(o=i.data.center,i.data.radius=MathUtil.getDistanceByBetweenPoint({p1:o,p2:t}),n.clearDraw(),n.drawHistoryData(),this.drawAnchors()))},t.prototype.getSelectType=function(){return SelectType.Circle},t}(ModifyAction);export default CircleModifyAction;
//# sourceMappingURL=circleModifyAction.js.map
