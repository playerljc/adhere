{"version":3,"file":"DrawAction.js","sources":["draw/DrawAction.js"],"sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar adhere_util_emitter_1 = __importDefault(require(\"@baifendian/adhere-util-emitter\"));\nvar defaultAnchorStyle_1 = __importDefault(require(\"../defaultAnchorStyle\"));\nvar defaultMoveGemStyle_1 = __importDefault(require(\"../defaultMoveGemStyle\"));\nvar defaultStyle_1 = __importDefault(require(\"../defaultStyle\"));\nvar types_1 = require(\"../types\");\n/**\n * DrawAction\n * @class DrawAction\n * @classdesc DrawAction\n */\nvar DrawAction = /** @class */function (_super) {\n  __extends(DrawAction, _super);\n  function DrawAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // 上下文对象\n    _this.context = null;\n    // 当前状态\n    _this.status = types_1.ActionStatus.UnStart;\n    // 样式对象\n    _this.style = __assign({}, defaultStyle_1.default);\n    // 修改样式对象\n    _this.anchorStyle = __assign({}, defaultAnchorStyle_1.default);\n    // 移动样式对象\n    _this.moveGemStyle = __assign({}, defaultMoveGemStyle_1.default);\n    return _this;\n  }\n  DrawAction.prototype.getAnchorStyle = function () {\n    return __assign({}, this.anchorStyle);\n  };\n  DrawAction.prototype.getStyle = function () {\n    return __assign({}, this.style);\n  };\n  DrawAction.prototype.getMoveGemStyle = function () {\n    return __assign({}, this.moveGemStyle);\n  };\n  DrawAction.prototype.setAnchorStyle = function (style) {\n    this.anchorStyle = __assign(__assign({}, defaultAnchorStyle_1.default), style !== null && style !== void 0 ? style : {});\n  };\n  DrawAction.prototype.setStyle = function (style) {\n    this.style = __assign(__assign({}, defaultStyle_1.default), style !== null && style !== void 0 ? style : {});\n  };\n  DrawAction.prototype.setMoveGemStyle = function (style) {\n    this.moveGemStyle = __assign(__assign({}, defaultMoveGemStyle_1.default), style !== null && style !== void 0 ? style : {});\n  };\n  /**\n   * destroy\n   */\n  DrawAction.prototype.destroy = function () {\n    var _a, _b;\n    if (!this.context || [types_1.ActionStatus.Running, types_1.ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = (_a = context === null || context === void 0 ? void 0 : context.getCanvasEl) === null || _a === void 0 ? void 0 : _a.call(context);\n    var assistCanvasEl = (_b = context === null || context === void 0 ? void 0 : context.getAssistCanvasEl) === null || _b === void 0 ? void 0 : _b.call(context);\n    if (!canvasEl || !assistCanvasEl) return;\n    canvasEl.style.cursor = assistCanvasEl.style.cursor = 'default';\n  };\n  /**\n   * end\n   * @param e\n   */\n  DrawAction.prototype.end = function (e) {\n    if (!this.context || [types_1.ActionStatus.Running, types_1.ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = context === null || context === void 0 ? void 0 : context.getCanvasEl();\n    var assistCanvasEl = context === null || context === void 0 ? void 0 : context.getAssistCanvasEl();\n    if (!canvasEl || !assistCanvasEl) return;\n    canvasEl.style.cursor = assistCanvasEl.style.cursor = 'default';\n  };\n  /**\n   * start\n   * @param style\n   */\n  DrawAction.prototype.start = function (style) {\n    if (!this.context || [types_1.ActionStatus.Running, types_1.ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = context.getCanvasEl();\n    if (!canvasEl) return;\n    canvasEl.style.cursor = \"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjI3OTEzNjM1NDc3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQzMDgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUxMi4wMDIgODg3QzMwNC44OTIgODg3IDEzNyA3MTkuMTA4IDEzNyA1MTIuMDAyIDEzNyAzMDQuODkyIDMwNC44OTIgMTM3IDUxMi4wMDIgMTM3IDcxOS4xMDggMTM3IDg4NyAzMDQuODkyIDg4NyA1MTIuMDAyIDg4NyA3MTkuMTA4IDcxOS4xMDggODg3IDUxMi4wMDIgODg3ek01MTIgNzg3YzE1MS44NzggMCAyNzUtMTIzLjEyMiAyNzUtMjc1UzY2My44NzggMjM3IDUxMiAyMzcgMjM3IDM2MC4xMjIgMjM3IDUxMnMxMjMuMTIyIDI3NSAyNzUgMjc1eiIgZmlsbD0iIzFBQTVGRiIgcC1pZD0iNDMwOSI+PC9wYXRoPjxwYXRoIGQ9Ik01MTIgNTEybS0yMjUgMGEyMjUgMjI1IDAgMSAwIDQ1MCAwIDIyNSAyMjUgMCAxIDAtNDUwIDBaIiBmaWxsPSIjMUFBNUZGIiBwLWlkPSI0MzEwIj48L3BhdGg+PC9zdmc+), auto\";\n  };\n  /**\n   * setContext\n   * @param context\n   */\n  DrawAction.prototype.setContext = function (context) {\n    this.context = context;\n  };\n  /**\n   * getStatus - 获取状态\n   */\n  DrawAction.prototype.getStatus = function () {\n    return this.status;\n  };\n  return DrawAction;\n}(adhere_util_emitter_1.default.Events);\nexports.default = DrawAction;"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__importDefault","mod","__esModule","default","adhere_util_emitter_1","defineProperty","exports","value","require","defaultAnchorStyle_1","defaultMoveGemStyle_1","defaultStyle_1","types_1","DrawAction","_super","_this","context","status","ActionStatus","UnStart","style","anchorStyle","moveGemStyle","getAnchorStyle","getStyle","getMoveGemStyle","setAnchorStyle","setStyle","setMoveGemStyle","destroy","canvasEl","assistCanvasEl","Running","Destroy","includes","_a","getCanvasEl","_b","getAssistCanvasEl","cursor","end","e","start","setContext","getStatus","Events"],"mappings":"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"}