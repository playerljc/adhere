{"version":3,"file":"StartDrawAction.js","sources":["draw/StartDrawAction.js"],"sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar turf = __importStar(require(\"@turf/turf\"));\nvar types_1 = require(\"../types\");\nvar DrawAction_1 = __importDefault(require(\"./DrawAction\"));\n/**\n * StartDrawAction\n * @class\n * @classdesc - 五角星选取\n * @remark: - 一个start - end的周期中只能绘制一个五角星\n */\nvar StartDrawAction = /** @class */function (_super) {\n  __extends(StartDrawAction, _super);\n  /**\n   * context\n   */\n  function StartDrawAction() {\n    var _this = _super.call(this) || this;\n    // 中心点\n    _this.centerPoint = null;\n    // 外圆半径\n    _this.outRadius = 0;\n    // 内圆半径\n    _this.innerRadius = 0;\n    _this.isMove = false;\n    _this.onCanvasMouseDown = _this.onCanvasMouseDown.bind(_this);\n    _this.onCanvasMouseMove = _this.onCanvasMouseMove.bind(_this);\n    _this.onCanvasMouseUp = _this.onCanvasMouseUp.bind(_this);\n    return _this;\n  }\n  /**\n   * booleanPointInData\n   * @description 判断点是否在\n   * @param point\n   * @param data\n   */\n  StartDrawAction.booleanPointInData = function (point, data) {\n    var _a = data.data,\n      // 圆的中心点\n      center = _a.center,\n      // 外半径\n      outRadius = _a.outRadius,\n      // 内半径(外半径的一半)\n      innerRadius = _a.innerRadius;\n    var pt = turf.point([point.x, point.y]);\n    var startCount = 5;\n    var spend = 360 / startCount;\n    var min = 90 - spend;\n    var max = spend - min;\n    var points = [];\n    for (var i = 0; i < startCount; i++) {\n      points.push({\n        x: Math.cos((min + i * spend) / 180 * Math.PI) * outRadius + center.x,\n        y: -Math.sin((min + i * spend) / 180 * Math.PI) * outRadius + center.y\n      });\n      points.push({\n        x: Math.cos((max + i * spend) / 180 * Math.PI) * innerRadius + center.x,\n        y: -Math.sin((max + i * spend) / 180 * Math.PI) * innerRadius + center.y\n      });\n    }\n    var polygon = points.map(function (point) {\n      return [point.x, point.y];\n    });\n    polygon.push(polygon[0]);\n    var poly = turf.polygon([polygon]);\n    return turf.booleanPointInPolygon(pt, poly);\n  };\n  /**\n   * drawStart\n   * @param ctx\n   * @param data\n   */\n  StartDrawAction.drawStart = function (_a) {\n    var _b;\n    var ctx = _a.ctx,\n      data = _a.data;\n    if (!data || !ctx) return;\n    var _c = data.data,\n      center = _c.center,\n      outRadius = _c.outRadius,\n      innerRadius = _c.innerRadius,\n      style = data.style;\n    ctx.beginPath();\n    if (data.style) {\n      // 设置上下文属性\n      ctx.lineWidth = data.style.lineWidth;\n      ctx.lineJoin = data.style.lineJoin;\n      ctx.lineCap = data.style.lineCap;\n      data.style.lineDash && ctx.setLineDash(data.style.lineDash);\n      ctx.lineDashOffset = data.style.lineDashOffset;\n      ctx.strokeStyle = data.style.strokeStyle;\n      ctx.fillStyle = data.style.fillStyle;\n      ctx.globalAlpha = (_b = data.style.globalAlpha) !== null && _b !== void 0 ? _b : 1;\n    }\n    var startCount = 5;\n    var spend = 360 / startCount;\n    var min = 90 - spend;\n    var max = spend - min;\n    for (var i = 0; i < startCount; i++) {\n      if (style) {\n        ctx.lineWidth = style.lineWidth;\n        ctx.lineJoin = style.lineJoin;\n        ctx.lineCap = style.lineCap;\n        style.lineDash && ctx.setLineDash(style.lineDash);\n        ctx.lineDashOffset = style.lineDashOffset;\n        ctx.strokeStyle = style.strokeStyle;\n        ctx.fillStyle = style.fillStyle;\n        ctx.globalAlpha = style.globalAlpha;\n      }\n      ctx.lineTo(Math.cos((min + i * spend) / 180 * Math.PI) * outRadius + center.x, -Math.sin((min + i * spend) / 180 * Math.PI) * outRadius + center.y);\n      ctx.lineTo(Math.cos((max + i * spend) / 180 * Math.PI) * innerRadius + center.x, -Math.sin((max + i * spend) / 180 * Math.PI) * innerRadius + center.y);\n    }\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n  };\n  /**\n   * draw\n   * @param e\n   */\n  StartDrawAction.prototype.draw = function (e) {\n    var _a = this,\n      context = _a.context,\n      centerPoint = _a.centerPoint;\n    var ctx = context === null || context === void 0 ? void 0 : context.getCtx();\n    if (!context || !centerPoint || !ctx) return;\n    var canvasEl = context.getCanvasEl();\n    if (!canvasEl || !this.centerPoint) return;\n    var targetPoint = adhere_util_1.default.clientToCtxPoint({\n      event: e,\n      rect: canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.getBoundingClientRect()\n    });\n    context.clearDraw();\n    context.drawHistoryData();\n    this.outRadius = adhere_util_1.default.getDistanceByBetweenPoint({\n      p1: centerPoint,\n      p2: targetPoint\n    });\n    this.innerRadius = this.outRadius / 2;\n    StartDrawAction.drawStart({\n      ctx: ctx,\n      data: {\n        data: {\n          center: this.centerPoint,\n          outRadius: this.outRadius,\n          innerRadius: this.innerRadius\n        },\n        style: this.style\n      }\n    });\n  };\n  /**\n   * onCanvasMouseDown\n   * @param e\n   */\n  StartDrawAction.prototype.onCanvasMouseDown = function (e) {\n    if (!this.context) return;\n    var canvasEl = this.context.getCanvasEl();\n    if (!canvasEl) return;\n    this.centerPoint = adhere_util_1.default.clientToCtxPoint({\n      event: e,\n      rect: canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.getBoundingClientRect()\n    });\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.addEventListener('mousemove', this.onCanvasMouseMove);\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.addEventListener('mouseup', this.onCanvasMouseUp);\n  };\n  /**\n   * onCanvasMouseMove\n   * @param e\n   */\n  StartDrawAction.prototype.onCanvasMouseMove = function (e) {\n    var context = this.context;\n    if (!context) return;\n    this.isMove = true;\n    this.draw(e);\n    this.trigger(types_1.ActionEvents.Drawing, {\n      selectType: types_1.SelectType.Start,\n      actionType: types_1.ActionType.Draw,\n      data: {\n        id: adhere_util_1.default.uuid(),\n        type: types_1.SelectType.Start,\n        data: {\n          center: this.centerPoint,\n          outRadius: this.outRadius,\n          innerRadius: this.innerRadius\n        },\n        style: this.style\n      }\n    });\n  };\n  /**\n   * onCanvasMouseUp\n   * @param e\n   */\n  StartDrawAction.prototype.onCanvasMouseUp = function (e) {\n    if (!this.isMove) return;\n    this.end(e);\n    e.stopPropagation();\n  };\n  /**\n   * draw\n   * @description\n   * @param ctx\n   * @param data\n   */\n  StartDrawAction.draw = function (ctx, data) {\n    if (!ctx || !data) return;\n    this.drawHistoryPath(ctx, data);\n  };\n  /**\n   * drawHistoryPath - 绘制历史数据\n   * @param ctx\n   * @param data\n   */\n  StartDrawAction.drawHistoryPath = function (ctx, data) {\n    if (!data) return;\n    StartDrawAction.drawStart({\n      ctx: ctx,\n      data: data\n      // data: {\n      //   data,\n      // },\n    });\n  };\n  /**\n   * start\n   * @param style\n   */\n  StartDrawAction.prototype.start = function (style) {\n    var _a;\n    if (!this.context || [types_1.ActionStatus.Running, types_1.ActionStatus.Destroy].includes(this.status)) return;\n    var context = this.context;\n    var canvasEl = (_a = context === null || context === void 0 ? void 0 : context.getCanvasEl) === null || _a === void 0 ? void 0 : _a.call(context);\n    if (!canvasEl) return;\n    _super.prototype.start.call(this, style);\n    style && (this.style = style);\n    // 触发开始之前事件\n    this.trigger(types_1.ActionEvents.DrawBeforeStart, {\n      selectType: types_1.SelectType.Start,\n      actionType: types_1.ActionType.Draw\n    });\n    // 注册事件\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.addEventListener('mousedown', this.onCanvasMouseDown);\n    // 修改状态\n    this.status = types_1.ActionStatus.Running;\n    // 触发开始事件\n    this.trigger(types_1.ActionEvents.DrawStart, {\n      selectType: types_1.SelectType.Start,\n      actionType: types_1.ActionType.Draw\n    });\n  };\n  /**\n   * end\n   */\n  StartDrawAction.prototype.end = function (e) {\n    var _a;\n    var context = this.context;\n    if (!context) {\n      _super.prototype.end.call(this, e);\n      return;\n    }\n    var canvasEl = (_a = context === null || context === void 0 ? void 0 : context.getCanvasEl) === null || _a === void 0 ? void 0 : _a.call(context);\n    if (!canvasEl || !this.centerPoint || !this.outRadius || !this.innerRadius) {\n      _super.prototype.end.call(this, e);\n      return;\n    }\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mousedown', this.onCanvasMouseDown);\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mousemove', this.onCanvasMouseMove);\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mouseup', this.onCanvasMouseUp);\n    e && this.draw(e);\n    this.status = types_1.ActionStatus.End;\n    var data = {\n      id: adhere_util_1.default.uuid(),\n      type: types_1.SelectType.Start,\n      data: {\n        center: this.centerPoint,\n        outRadius: this.outRadius,\n        innerRadius: this.innerRadius\n      },\n      style: this.style\n    };\n    context.addHistoryData(data);\n    this.centerPoint = null;\n    this.outRadius = 0;\n    this.innerRadius = 0;\n    this.isMove = false;\n    this.trigger(types_1.ActionEvents.DrawEnd, {\n      selectType: types_1.SelectType.Start,\n      actionType: types_1.ActionType.Draw,\n      data: data\n    });\n    _super.prototype.end.call(this, e);\n  };\n  /**\n   * destroy\n   */\n  StartDrawAction.prototype.destroy = function () {\n    var context = this.context;\n    if (!context) {\n      _super.prototype.destroy.call(this);\n      return;\n    }\n    var canvasEl = context.getCanvasEl();\n    if (!canvasEl) {\n      _super.prototype.destroy.call(this);\n      return;\n    }\n    // 如果是运行状态则删除之前的绘制\n    if (this.status === types_1.ActionStatus.Running) {\n      context.clearDraw();\n      context.drawHistoryData();\n    }\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mousedown', this.onCanvasMouseDown);\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mousemove', this.onCanvasMouseMove);\n    canvasEl === null || canvasEl === void 0 ? void 0 : canvasEl.removeEventListener('mouseup', this.onCanvasMouseUp);\n    this.centerPoint = null;\n    this.outRadius = 0;\n    this.innerRadius = 0;\n    this.isMove = false;\n    this.status = types_1.ActionStatus.Destroy;\n    this.trigger(types_1.ActionEvents.Destroy, {\n      selectType: types_1.SelectType.Start,\n      actionType: types_1.ActionType.Draw\n    });\n    _super.prototype.destroy.call(this);\n  };\n  return StartDrawAction;\n}(DrawAction_1.default);\nexports.default = StartDrawAction;"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","__createBinding","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__importDefault","default","adhere_util_1","exports","require","turf","types_1","DrawAction_1","StartDrawAction","_super","_this","centerPoint","outRadius","innerRadius","isMove","onCanvasMouseDown","bind","onCanvasMouseMove","onCanvasMouseUp","booleanPointInData","point","data","_a","center","pt","x","y","spend","points","i","push","Math","cos","PI","sin","polygon","map","poly","booleanPointInPolygon","drawStart","ctx","_c","style","beginPath","lineWidth","lineJoin","lineCap","lineDash","setLineDash","lineDashOffset","strokeStyle","fillStyle","globalAlpha","_b","lineTo","closePath","stroke","fill","draw","e","canvasEl","context","getCtx","getCanvasEl","targetPoint","clientToCtxPoint","event","rect","getBoundingClientRect","clearDraw","drawHistoryData","getDistanceByBetweenPoint","p1","p2","addEventListener","trigger","ActionEvents","Drawing","selectType","SelectType","Start","actionType","ActionType","Draw","id","uuid","type","end","stopPropagation","drawHistoryPath","start","ActionStatus","Running","Destroy","includes","status","DrawBeforeStart","DrawStart","removeEventListener","End","addHistoryData","DrawEnd","destroy"],"mappings":"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"}