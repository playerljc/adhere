{"version":3,"file":"SearchList.js","sources":["SearchList.js"],"sourcesContent":["import _List from \"antd/es/list\";\nimport _Button from \"antd/es/button\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { createContext, createRef } from 'react';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport SearchTable from '@baifendian/adhere-ui-searchtable';\nimport Intl from '@baifendian/adhere-util-intl';\nimport ListDensitySetting from './Extension/ListDensitySetting';\nvar Search = SearchTable.Search;\nexport var selectorPrefix = 'adhere-ui-searchtable';\nexport var SearchListContext = /*#__PURE__*/createContext(null);\n/**\n * SearchList\n */\nvar SearchList = /** @class */function (_super) {\n  __extends(SearchList, _super);\n  function SearchList(props) {\n    var _this = _super.call(this, props) || this;\n    _this.listWrapRef = /*#__PURE__*/createRef();\n    // @ts-ignore\n    _this.state = {\n      prePage: 1,\n      page: 1,\n      // @ts-ignore\n      limit: _this.getLimit(),\n      expand: props.defaultExpandSearchCollapse\n    };\n    // @ts-ignore\n    Object.assign(_this.state, {\n      // 表格密度设置\n      listDensity: _this.getListDensity()\n    });\n    // @ts-ignore\n    _this.onClear = _this.onClear.bind(_this);\n    return _this;\n  }\n  /**\n   * onSearchPanelCollapse\n   * @description 查询面板展开之前\n   * @protected\n   */\n  SearchList.prototype.onSearchPanelCollapseBefore = function () {};\n  /**\n   * onSearchPanelCollapseAfter\n   * @description 查询面板展开之后\n   * @protected\n   */\n  SearchList.prototype.onSearchPanelCollapseAfter = function () {};\n  /**\n   * getTableDensity\n   * @description 表格密度\n   * @return {ListSize}\n   */\n  SearchList.prototype.getListDensity = function () {\n    return 'default';\n  };\n  /**\n   * renderTableDensitySetting\n   * @description 表格密度设置\n   * @return {ReactElement}\n   */\n  SearchList.prototype.renderTableDensitySetting = function () {\n    var _this = this;\n    return /*#__PURE__*/React.createElement(ListDensitySetting\n    // @ts-ignore\n    , {\n      // @ts-ignore\n      density: this.state.listDensity,\n      onChange: function onChange(density) {\n        // @ts-ignore\n        _this.setState({\n          listDensity: density\n        });\n      },\n      onReset: function onReset(density) {\n        // @ts-ignore\n        _this.setState({\n          listDensity: density\n        });\n      }\n    });\n  };\n  /**\n   * renderSearchToolBar\n   * @description 渲染查询工具栏\n   * @return {ReactElement}\n   */\n  SearchList.prototype.renderSearchToolBar = function () {\n    var _this = this;\n    // @ts-ignore\n    var isShowExpandSearch = this.props.isShowExpandSearch;\n    var defaultItems = [/*#__PURE__*/React.createElement(_Button, {\n      className: \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n      type: \"primary\",\n      key: \"search\",\n      icon: /*#__PURE__*/React.createElement(\"i\", {\n        className: classNames(\"\".concat(selectorPrefix, \"-searchfooteritem-search-btn-icon\"), 'iconfont iconsousuo')\n      }),\n      onClick: function onClick() {\n        // @ts-ignore\n        _this.setState({\n          page: 1\n        }, function () {\n          // @ts-ignore\n          _this.onSearch();\n        });\n      }\n    }, Intl.v('查询')), /*#__PURE__*/React.createElement(_Button, {\n      className: \"\".concat(selectorPrefix, \"-searchfooteritem\"),\n      key: \"reset\",\n      // @ts-ignore\n      onClick: this.onClear\n    }, Intl.v('重置'))];\n    if (isShowExpandSearch) {\n      defaultItems.push( /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional:\n        // @ts-ignore\n        this.state.expand,\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(\"a\", {\n            key: \"expand\",\n            className: \"\".concat(selectorPrefix, \"-searchfooteritem-expand-search-up-btn\"),\n            onClick: function onClick() {\n              // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n              _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n              // @ts-ignore\n              _this.setState({\n                expand: true\n              }, function () {\n                return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n              });\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", null, Intl.v('展开')), /*#__PURE__*/React.createElement(\"i\", {\n            className: \"iconfont iconup\"\n          }));\n        }\n      }, function () {\n        return /*#__PURE__*/React.createElement(\"a\", {\n          key: \"hide\",\n          className: \"\".concat(selectorPrefix, \"-searchfooteritem-expand-search-down-btn\"),\n          onClick: function onClick() {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            _this.onSearchPanelCollapseBefore && _this.onSearchPanelCollapseBefore();\n            // @ts-ignore\n            _this.setState({\n              expand: false\n            }, function () {\n              return _this.onSearchPanelCollapseAfter && _this.onSearchPanelCollapseAfter();\n            });\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", null, Intl.v('关闭')), /*#__PURE__*/React.createElement(\"i\", {\n          className: \"iconfont icondownarrow\"\n        }));\n      }));\n    }\n    // @ts-ignore\n    var items = this.renderSearchFooterItems(defaultItems) || __spreadArray([], defaultItems, true);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-searchfooterwrapper\")\n    }, items.map(function (t, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"\".concat(selectorPrefix, \"-searchfooteritem\")\n      }, t);\n    }));\n  };\n  /**\n   * renderBody\n   * @return {ReactNode}\n   */\n  SearchList.prototype.renderBody = function () {\n    var _this = this;\n    // @ts-ignore\n    var antdListProps = this.props.antdListProps;\n    // @ts-ignore\n    var listDensity = this.state.listDensity;\n    var listProps = __assign({\n      rowKey: this.getRowKey(),\n      dataSource: this.getData(),\n      // @ts-ignore\n      pagination: this.getPagination(),\n      renderItem: function renderItem(record, rowIndex) {\n        return _this.renderItem(record, rowIndex);\n      },\n      header: this.renderListHeader(),\n      size: listDensity\n    }, antdListProps || {});\n    return /*#__PURE__*/React.createElement(_List, __assign({}, listProps));\n  };\n  /**\n   * renderInner\n   * @description 渲染SearchTable\n   * @return {ReactElement | null}\n   */\n  SearchList.prototype.renderInner = function () {\n    var _a;\n    // @ts-ignore\n    var _b = this.props.fixedListSpaceBetween,\n      fixedListSpaceBetween = _b === void 0 ? true : _b;\n    return _super.prototype.renderInner.call(this, this.listWrapRef, classNames((_a = {}, _a['fixedlistspacebetween'] = fixedListSpaceBetween, _a)));\n  };\n  /**\n   * renderChildren\n   * @description renderChildren\n   * @return {ReactNode}\n   */\n  SearchList.prototype.renderChildren = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-wrap\")\n    }, _super.prototype.render.call(this));\n  };\n  /**\n   * render\n   * @protected\n   * @return {ReactElement}\n   */\n  SearchList.prototype.render = function () {\n    return /*#__PURE__*/React.createElement(SearchListContext.Provider, {\n      value: {\n        context: this\n      }\n    }, this.renderChildren());\n  };\n  // 序号生成的规则 - 单独模式\n  SearchList.NUMBER_GENERATOR_RULE_ALONE = Symbol();\n  // 序号生成的规则 - 连续模式\n  SearchList.NUMBER_GENERATOR_RULE_CONTINUITY = Symbol();\n  return SearchList;\n}(Search);\nexport var defaultProps = {\n  antdListProps: {},\n  // 锁定选择猎头，列表滚动\n  fixedSelectionHeaderAutoList: true,\n  // 两端固定(表格的头始终在上方，分页始终在下方)\n  fixedListSpaceBetween: true\n};\nexport var propTypes = {\n  antdListProps: PropTypes.object,\n  // 锁定选择猎头，列表滚动\n  fixedSelectionHeaderAutoList: PropTypes.bool,\n  // 两端固定(表格的头始终在上方，分页始终在下方)\n  fixedListSpaceBetween: PropTypes.bool\n};\nSearchList.defaultProps = defaultProps;\nSearchList.propTypes = propTypes;\nexport default SearchList;"],"names":["_List","_Button","__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","ar","l","slice","concat","classNames","PropTypes","React","createContext","createRef","ConditionalRender","SearchTable","Intl","ListDensitySetting","Search","selectorPrefix","SearchListContext","SearchList","_super","props","_this","listWrapRef","state","prePage","page","limit","getLimit","expand","defaultExpandSearchCollapse","listDensity","getListDensity","onClear","bind","onSearchPanelCollapseBefore","onSearchPanelCollapseAfter","renderTableDensitySetting","createElement","density","onChange","setState","onReset","renderSearchToolBar","isShowExpandSearch","defaultItems","className","type","key","icon","onClick","onSearch","v","items","push","conditional","noMatch","renderSearchFooterItems","map","index","renderBody","antdListProps","listProps","rowKey","getRowKey","dataSource","getData","pagination","getPagination","renderItem","record","rowIndex","header","renderListHeader","size","renderInner","_a","_b","fixedListSpaceBetween","renderChildren","render","Provider","value","context","NUMBER_GENERATOR_RULE_ALONE","Symbol","NUMBER_GENERATOR_RULE_CONTINUITY","defaultProps","fixedSelectionHeaderAutoList","propTypes","object","bool"],"mappings":"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"}