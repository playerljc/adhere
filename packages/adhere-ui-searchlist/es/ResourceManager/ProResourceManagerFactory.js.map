{"version":3,"file":"ProResourceManagerFactory.js","sources":["ResourceManager/ProResourceManagerFactory.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { Radio, Space } from 'antd';\r\nimport classNames from 'classnames';\r\nimport React, { createRef } from 'react';\r\nimport { CreditCardOutlined, InsertRowAboveOutlined } from '@ant-design/icons';\r\nimport ContourBlock from '@baifendian/adhere-ui-contourblock';\r\nimport DateDisplay from '@baifendian/adhere-ui-datedisplay';\r\nimport Util from '@baifendian/adhere-util';\r\nimport Dict from '@baifendian/adhere-util-dict';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nexport var selectorPrefix = 'adhere-ui-searchtable-protable';\r\n// @ts-ignore\r\nvar DateDisplay18 = DateDisplay.DateDisplay18;\r\n/**\r\n * ProResourceManagerFactory\r\n * @param SuperClass\r\n */\r\nexport default function (SuperClass) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1(props) {\r\n            var _this = _super.call(this, props) || this;\r\n            // 存储view的引用\r\n            _this.ref = createRef();\r\n            _this.state = __assign(__assign({}, _this.state), { viewType: 'info' });\r\n            return _this;\r\n        }\r\n        class_1.prototype.getParams = function () {\r\n            var _a, _b;\r\n            var view = (_a = this === null || this === void 0 ? void 0 : this.ref) === null || _a === void 0 ? void 0 : _a.current;\r\n            return __assign({}, (((_b = view === null || view === void 0 ? void 0 : view.getParams) === null || _b === void 0 ? void 0 : _b.call(view)) || {}));\r\n        };\r\n        class_1.prototype.getColumns = function (columns) {\r\n            return columns !== null && columns !== void 0 ? columns : [];\r\n        };\r\n        class_1.prototype.renderSearchFooterItemsImpl = function (defaultItems) {\r\n            var _this = this;\r\n            var superItems = _super.prototype.renderSearchFooterItemsImpl.call(this, defaultItems);\r\n            return __spreadArray([\r\n                React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-headeritem\") },\r\n                    React.createElement(Radio.Group, { optionType: \"button\", buttonStyle: \"solid\", value: this.state.viewType, onChange: function (e) { return _this.setState({ viewType: e.target.value }); } },\r\n                        React.createElement(Radio, { value: \"info\" },\r\n                            React.createElement(CreditCardOutlined, { className: \"\".concat(selectorPrefix, \"-resource-type-change-btn\") })),\r\n                        React.createElement(Radio, { value: \"thumbnail\" },\r\n                            React.createElement(InsertRowAboveOutlined, { className: \"\".concat(selectorPrefix, \"-resource-type-change-btn\") }))))\r\n            ], (superItems || []), true);\r\n        };\r\n        class_1.prototype.renderTableDensitySetting = function () {\r\n            var _this = this;\r\n            var _a, _b;\r\n            var view = (_a = this === null || this === void 0 ? void 0 : this.ref) === null || _a === void 0 ? void 0 : _a.current;\r\n            return (_b = view === null || view === void 0 ? void 0 : view.renderTableDensitySetting) === null || _b === void 0 ? void 0 : _b.call(view, {\r\n                density: this.state.listDensity,\r\n                onChange: function (density) {\r\n                    _this.setState({\r\n                        listDensity: density,\r\n                    });\r\n                },\r\n                onReset: function (density) {\r\n                    _this.setState({\r\n                        listDensity: density,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        /**\r\n         * getViewParams\r\n         * @override\r\n         */\r\n        class_1.prototype.getViewParams = function () {\r\n            return {\r\n                name: null,\r\n                resourceType: null,\r\n                size: null,\r\n                modifyTimeStart: undefined,\r\n                modifyTimeEnd: undefined,\r\n            };\r\n        };\r\n        /**\r\n         * getTableViewColumns\r\n         * @override\r\n         */\r\n        class_1.prototype.getTableViewColumns = function () {\r\n            var _a, _b, _c, _d;\r\n            return [\r\n                {\r\n                    title: Intl.v('文件名称'),\r\n                    dataIndex: 'name',\r\n                    key: 'name',\r\n                    sorter: true,\r\n                    sortOrder: (_a = this === null || this === void 0 ? void 0 : this.sortOrder) === null || _a === void 0 ? void 0 : _a.call(this, 'name'),\r\n                    $search: {\r\n                        type: 'input',\r\n                        visible: true,\r\n                    },\r\n                    render: function (value, record) { return (React.createElement(Space, { size: 25 },\r\n                        React.createElement(\"span\", { className: \"\".concat(selectorPrefix, \"-resource-table-file-column-icon\") }, Dict.value.AdhereSearchListResourceManagerIconMap.value.get(record.type || 'other')),\r\n                        React.createElement(\"span\", { className: \"\".concat(selectorPrefix, \"-resource-table-file-column-name\") }, value))); },\r\n                },\r\n                {\r\n                    title: Intl.v('类型'),\r\n                    dataIndex: 'resourceType',\r\n                    key: 'resourceType',\r\n                    align: 'center',\r\n                    width: 150,\r\n                    sorter: true,\r\n                    sortOrder: (_b = this === null || this === void 0 ? void 0 : this.sortOrder) === null || _b === void 0 ? void 0 : _b.call(this, 'resourceType'),\r\n                    $search: {\r\n                        type: 'select',\r\n                        visible: true,\r\n                        dictName: 'AdhereSearchListResourceManagerLabelValueSelect',\r\n                    },\r\n                    render: function (value) { return (React.createElement(\"span\", null, Dict.value.AdhereSearchListResourceManagerLabelValueMap.value.get(value || 'other'))); },\r\n                },\r\n                {\r\n                    title: Intl.v('文件大小'),\r\n                    dataIndex: 'size',\r\n                    key: 'size',\r\n                    align: 'center',\r\n                    width: 200,\r\n                    sorter: true,\r\n                    sortOrder: (_c = this === null || this === void 0 ? void 0 : this.sortOrder) === null || _c === void 0 ? void 0 : _c.call(this, 'size'),\r\n                    $search: {\r\n                        type: 'inputNumberDecimal2',\r\n                        visible: true,\r\n                    },\r\n                    render: function (value) { return (value ? React.createElement(\"span\", null, Util.prettyBytes(value)) : '-'); },\r\n                },\r\n                {\r\n                    title: Intl.v('修改时间'),\r\n                    dataIndex: 'modifyTime',\r\n                    key: 'modifyTime',\r\n                    align: 'center',\r\n                    width: 300,\r\n                    sorter: true,\r\n                    sortOrder: (_d = this === null || this === void 0 ? void 0 : this.sortOrder) === null || _d === void 0 ? void 0 : _d.call(this, 'modifyTime'),\r\n                    $search: {\r\n                        type: 'rangePicker',\r\n                        visible: true,\r\n                        startName: 'modifyTimeStart',\r\n                        endName: 'modifyTimeEnd',\r\n                    },\r\n                    render: function (value) { return React.createElement(DateDisplay18, { value: value }); },\r\n                },\r\n            ];\r\n        };\r\n        /**\r\n         * renderGridViewCard\r\n         * @override\r\n         */\r\n        class_1.prototype.renderGridViewCard = function (_a) {\r\n            var _b;\r\n            var record = _a.record;\r\n            var rowSelection = this.getRowSelection();\r\n            var id = record[this.getRowKey()];\r\n            var className = classNames((_b = {},\r\n                _b[\"\".concat(selectorPrefix, \"-grid-view-item\")] = true,\r\n                _b), this.getSelectionClassName(id));\r\n            return (React.createElement(ContourBlock, null,\r\n                React.createElement(\"div\", { className: className },\r\n                    !!rowSelection && (React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-grid-view-item-selection\") }, this.renderItemSelection(record))),\r\n                    React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-grid-view-item-icon\") }, Dict.value.AdhereSearchListResourceManagerIconMap.value.get(record.type || 'other')),\r\n                    React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-grid-view-item-name\"), title: record.name }, record.name))));\r\n        };\r\n        return class_1;\r\n    }(SuperClass));\r\n}\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","ar","l","slice","concat","Radio","Space","classNames","React","createRef","CreditCardOutlined","InsertRowAboveOutlined","ContourBlock","DateDisplay","Util","Dict","Intl","selectorPrefix","DateDisplay18","SuperClass","class_1","_super","getParams","_b","view","_a","ref","current","getColumns","columns","renderSearchFooterItemsImpl","defaultItems","_this","superItems","createElement","className","Group","optionType","buttonStyle","value","state","viewType","onChange","e","setState","target","renderTableDensitySetting","density","listDensity","onReset","getViewParams","name","resourceType","size","modifyTimeStart","undefined","modifyTimeEnd","getTableViewColumns","_d","title","v","dataIndex","key","sorter","sortOrder","$search","type","visible","render","record","AdhereSearchListResourceManagerIconMap","get","align","width","dictName","AdhereSearchListResourceManagerLabelValueMap","_c","prettyBytes","startName","endName","renderGridViewCard","rowSelection","getRowSelection","id","getRowKey","getSelectionClassName","renderItemSelection","props"],"mappings":"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"}