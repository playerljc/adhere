{"version":3,"file":"sliderscale.js","sources":["sliderscale.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar selectorPrefix = 'adhere-ui-sliderscale';\r\n/**\r\n * SliderScale\r\n * @class SliderScale\r\n * @classdesc SliderScale\r\n */\r\nvar SliderScale = /** @class */ (function (_super) {\r\n    __extends(SliderScale, _super);\r\n    function SliderScale() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.onMousemove = function (e) {\r\n            _this.touchEvent(e);\r\n        };\r\n        _this.onTouchmove = function (e) {\r\n            _this.touchEvent(e);\r\n        };\r\n        return _this;\r\n    }\r\n    SliderScale.prototype.componentDidMount = function () {\r\n        var _a;\r\n        // @ts-ignore\r\n        (_a = this.rangeEl) === null || _a === void 0 ? void 0 : _a.value = this.props.value;\r\n    };\r\n    SliderScale.prototype.componentWillReceiveProps = function (nextProps, nextContext) {\r\n        var _a;\r\n        // @ts-ignore\r\n        (_a = this.rangeEl) === null || _a === void 0 ? void 0 : _a.value = nextProps.value;\r\n    };\r\n    SliderScale.prototype.touchEvent = function (e) {\r\n        // console.log('touchEvent', e.target, e.target.value, this.preValue);\r\n        var _a;\r\n        var value = e.target.value;\r\n        // @ts-ignore\r\n        (_a = this.rangeEl) === null || _a === void 0 ? void 0 : _a.value = value;\r\n        if (this.preValue !== value) {\r\n            this.preValue = value;\r\n            var onChange = this.props.onChange;\r\n            if (onChange) {\r\n                onChange(value);\r\n            }\r\n        }\r\n    };\r\n    SliderScale.prototype.renderScale = function () {\r\n        var _a = this.props, min = _a.min, max = _a.max, interval = _a.interval;\r\n        var itResult = [];\r\n        // @ts-ignore\r\n        for (var i = min; i < max; i++) {\r\n            // @ts-ignore\r\n            if (max - 1 === min) {\r\n                break;\r\n            }\r\n            var itemJSX = null;\r\n            // @ts-ignore\r\n            if ((i + 1) % interval === 0) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item \" + selectorPrefix + \"-scale-item-point\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, \r\n                    // @ts-ignore\r\n                    i + 1)));\r\n            }\r\n            else if (i === min) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min)));\r\n            }\r\n            // @ts-ignore\r\n            else if ((i + 1) % interval !== 0 && i === max - 1) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, i + 1)));\r\n            }\r\n            else {\r\n                itemJSX = react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" });\r\n            }\r\n            // @ts-ignore\r\n            itResult.push(itemJSX);\r\n        }\r\n        var result = [];\r\n        if (min === max) {\r\n            result.push(react_1.default.createElement(\"div\", { key: 0, className: selectorPrefix + \"-scale-item\" },\r\n                react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, \"0\"),\r\n                react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } },\r\n                    \"$\",\r\n                    max)));\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            if (max - 1 === min) {\r\n                result.push(react_1.default.createElement(\"div\", { key: min, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min),\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } }, max)));\r\n            }\r\n        }\r\n        return result.concat(itResult);\r\n    };\r\n    SliderScale.prototype.render = function () {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        var _a = this.props, className = _a.className, style = _a.style;\r\n        var _b = this.props, min = _b.min, max = _b.max, step = _b.step;\r\n        // @ts-ignore\r\n        return (react_1.default.createElement(\"div\", { className: classnames_1.default(selectorPrefix, \r\n            // @ts-ignore\r\n            className.split(/\\s+/)), style: __assign({}, style), ref: function (el) { return (_this.el = el); } },\r\n            react_1.default.createElement(\"div\", { className: selectorPrefix + \"-scale\" }, this.renderScale()),\r\n            react_1.default.createElement(\"input\", { ref: function (el) { return (_this.rangeEl = el); }, className: selectorPrefix + \"-range\", type: \"range\", min: min, max: max, step: step, onMouseMove: this.onMousemove, onTouchMove: this.onTouchmove })));\r\n    };\r\n    return SliderScale;\r\n}(react_1.default.Component));\r\nSliderScale.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    min: 0,\r\n    max: 100,\r\n    step: 1,\r\n    value: 0,\r\n    interval: 5,\r\n    onChange: function () { },\r\n};\r\nSliderScale.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    // 最小值\r\n    min: prop_types_1.default.number,\r\n    // 最大值\r\n    max: prop_types_1.default.number,\r\n    // 步进\r\n    step: prop_types_1.default.number,\r\n    // 当前值\r\n    value: prop_types_1.default.number,\r\n    // 刻度的间隔\r\n    interval: prop_types_1.default.number,\r\n    onChange: prop_types_1.default.func,\r\n};\r\nexports.default = SliderScale;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","prop_types_1","classnames_1","selectorPrefix","SliderScale","_super","_this","onMousemove","e","touchEvent","onTouchmove","componentDidMount","_a","rangeEl","props","componentWillReceiveProps","nextProps","nextContext","target","preValue","onChange","renderScale","min","max","interval","itResult","itemJSX","createElement","key","className","push","result","style","right","left","concat","render","_b","step","split","ref","el","type","onMouseMove","onTouchMove","Component","defaultProps","propTypes","string","object","number","func"],"mappings":"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"}