{"version":3,"file":"sliderscale.js","sources":["sliderscale.js"],"sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar selectorPrefix = 'adhere-ui-sliderscale';\r\nvar SliderScale = function (props) {\r\n    var _a = props.className, className = _a === void 0 ? '' : _a, _b = props.style, style = _b === void 0 ? {} : _b, _c = props.min, min = _c === void 0 ? 0 : _c, _d = props.max, max = _d === void 0 ? 100 : _d, _e = props.step, step = _e === void 0 ? 1 : _e, _f = props.value, value = _f === void 0 ? 0 : _f, _g = props.interval, interval = _g === void 0 ? 5 : _g, onChange = props.onChange;\r\n    var el = react_1.useRef(null);\r\n    var rangeEl = react_1.useRef(null);\r\n    var preValue = react_1.useRef('');\r\n    function renderScale() {\r\n        var itResult = [];\r\n        for (var i = min; i < max; i++) {\r\n            if (max - 1 === min) {\r\n                break;\r\n            }\r\n            var itemJSX = null;\r\n            if ((i + 1) % interval === 0) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item \" + selectorPrefix + \"-scale-item-point\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, i + 1)));\r\n            }\r\n            else if (i === min) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min)));\r\n            }\r\n            else if ((i + 1) % interval !== 0 && i === max - 1) {\r\n                itemJSX = (react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, i + 1)));\r\n            }\r\n            else {\r\n                itemJSX = react_1.default.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" });\r\n            }\r\n            itResult.push(itemJSX);\r\n        }\r\n        var result = [];\r\n        if (min === max) {\r\n            result.push(react_1.default.createElement(\"div\", { key: 0, className: selectorPrefix + \"-scale-item\" },\r\n                react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, \"0\"),\r\n                react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } },\r\n                    \"$\",\r\n                    max)));\r\n        }\r\n        else {\r\n            if (max - 1 === min) {\r\n                result.push(react_1.default.createElement(\"div\", { key: min, className: selectorPrefix + \"-scale-item\" },\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min),\r\n                    react_1.default.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } }, max)));\r\n            }\r\n        }\r\n        return result.concat(itResult);\r\n    }\r\n    function onMousemove(e) {\r\n        touchEvent(e);\r\n    }\r\n    function onTouchmove(e) {\r\n        touchEvent(e);\r\n    }\r\n    function touchEvent(e) {\r\n        var value = e.target.value;\r\n        rangeEl.current.value = value;\r\n        if (preValue.current !== value) {\r\n            preValue.current = value;\r\n            if (onChange) {\r\n                onChange(value);\r\n            }\r\n        }\r\n    }\r\n    react_1.useLayoutEffect(function () {\r\n        rangeEl.current.value = \"\" + value;\r\n    }, [min, max, step, value, interval]);\r\n    return (react_1.default.createElement(\"div\", { className: classnames_1.default(selectorPrefix, className || ''), style: style || {}, ref: el },\r\n        react_1.default.createElement(\"div\", { className: selectorPrefix + \"-scale\" }, renderScale()),\r\n        react_1.default.createElement(\"input\", { ref: rangeEl, className: selectorPrefix + \"-range\", type: \"range\", min: min, max: max, step: step, onMouseMove: onMousemove, onTouchMove: onTouchmove })));\r\n};\r\n// /**\r\n//  * SliderScale\r\n//  * @class SliderScale\r\n//  * @classdesc SliderScale\r\n//  */\r\n// class SliderScale extends React.Component<ISliderScaleProps, any> {\r\n//   static defaultProps: any;\r\n//   static propTypes: any;\r\n//\r\n//   private el: HTMLDivElement | null | undefined;\r\n//   private preValue: string | number | undefined;\r\n//   private rangeEl: HTMLInputElement | null | undefined;\r\n//\r\n//   componentDidMount() {\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = this.props.value;\r\n//   }\r\n//\r\n//   componentWillReceiveProps(nextProps: Readonly<ISliderScaleProps>, nextContext: any) {\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = nextProps.value;\r\n//   }\r\n//\r\n//   private onMousemove = (e) => {\r\n//     this.touchEvent(e);\r\n//   };\r\n//\r\n//   private onTouchmove = (e) => {\r\n//     this.touchEvent(e);\r\n//   };\r\n//\r\n//   private touchEvent(e) {\r\n//     // console.log('touchEvent', e.target, e.target.value, this.preValue);\r\n//\r\n//     const { value } = e.target;\r\n//\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = value;\r\n//\r\n//     if (this.preValue !== value) {\r\n//       this.preValue = value;\r\n//\r\n//       const { onChange } = this.props;\r\n//\r\n//       if (onChange) {\r\n//         onChange(value);\r\n//       }\r\n//     }\r\n//   }\r\n//\r\n//   private renderScale() {\r\n//     const { min, max, interval } = this.props;\r\n//\r\n//     const itResult: Array<React.ReactElement> = [];\r\n//\r\n//     // @ts-ignore\r\n//     for (let i = min; i < max; i++) {\r\n//       // @ts-ignore\r\n//       if (max - 1 === min) {\r\n//         break;\r\n//       }\r\n//\r\n//       let itemJSX: React.ReactElement | null = null;\r\n//\r\n//       // @ts-ignore\r\n//       if ((i + 1) % interval === 0) {\r\n//         itemJSX = (\r\n//           <div\r\n//             key={i}\r\n//             className={`${selectorPrefix}-scale-item ${selectorPrefix}-scale-item-point`}\r\n//           >\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>\r\n//               {\r\n//                 // @ts-ignore\r\n//                 i + 1\r\n//               }\r\n//             </span>\r\n//           </div>\r\n//         );\r\n//       } else if (i === min) {\r\n//         itemJSX = (\r\n//           <div key={i} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{min}</span>\r\n//           </div>\r\n//         );\r\n//       }\r\n//\r\n//       // @ts-ignore\r\n//       else if ((i + 1) % interval !== 0 && i === max - 1) {\r\n//         itemJSX = (\r\n//           <div key={i} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{i + 1}</span>\r\n//           </div>\r\n//         );\r\n//       } else {\r\n//         itemJSX = <div key={i} className={`${selectorPrefix}-scale-item`} />;\r\n//       }\r\n//\r\n//       // @ts-ignore\r\n//       itResult.push(itemJSX);\r\n//     }\r\n//\r\n//     const result: Array<React.ReactElement> = [];\r\n//\r\n//     if (min === max) {\r\n//       result.push(\r\n//         <div key={0} className={`${selectorPrefix}-scale-item`}>\r\n//           <span className={`${selectorPrefix}-scale-item-value`}>0</span>\r\n//           <span className={`${selectorPrefix}-scale-item-value`} style={{ right: 0, left: 'auto' }}>\r\n//             ${max}\r\n//           </span>\r\n//         </div>,\r\n//       );\r\n//     } else {\r\n//       // @ts-ignore\r\n//       if (max - 1 === min) {\r\n//         result.push(\r\n//           <div key={min} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{min}</span>\r\n//             <span\r\n//               className={`${selectorPrefix}-scale-item-value`}\r\n//               style={{ right: 0, left: 'auto' }}\r\n//             >\r\n//               {max}\r\n//             </span>\r\n//           </div>,\r\n//         );\r\n//       }\r\n//     }\r\n//\r\n//     return result.concat(itResult);\r\n//   }\r\n//\r\n//   render() {\r\n//     // @ts-ignore\r\n//     const { className, style } = this.props;\r\n//\r\n//     const { min, max, step } = this.props;\r\n//\r\n//     // @ts-ignore\r\n//     return (\r\n//       <div\r\n//         className={classNames(\r\n//           selectorPrefix,\r\n//           // @ts-ignore\r\n//           className.split(/\\s+/),\r\n//         )}\r\n//         style={{ ...style }}\r\n//         ref={(el) => (this.el = el)}\r\n//       >\r\n//         <div className={`${selectorPrefix}-scale`}>{this.renderScale()}</div>\r\n//\r\n//         <input\r\n//           ref={(el) => (this.rangeEl = el)}\r\n//           className={`${selectorPrefix}-range`}\r\n//           type=\"range\"\r\n//           min={min}\r\n//           max={max}\r\n//           step={step}\r\n//           onMouseMove={this.onMousemove}\r\n//           onTouchMove={this.onTouchmove}\r\n//         />\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n//\r\n// SliderScale.defaultProps = {\r\n//   className: '',\r\n//   style: {},\r\n//   min: 0,\r\n//   max: 100,\r\n//   step: 1,\r\n//   value: 0,\r\n//   interval: 5,\r\n//   onChange: () => {},\r\n// };\r\n//\r\n// SliderScale.propTypes = {\r\n//   className: PropTypes.string,\r\n//   style: PropTypes.object,\r\n//   // 最小值\r\n//   min: PropTypes.number,\r\n//   // 最大值\r\n//   max: PropTypes.number,\r\n//   // 步进\r\n//   step: PropTypes.number,\r\n//   // 当前值\r\n//   value: PropTypes.number,\r\n//   // 刻度的间隔\r\n//   interval: PropTypes.number,\r\n//   onChange: PropTypes.func,\r\n// };\r\nexports.default = SliderScale;\r\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","hasOwnProperty","call","__importDefault","default","exports","react_1","require","classnames_1","selectorPrefix","SliderScale","props","_a","className","_b","style","_c","min","_d","max","_e","step","_f","_g","interval","onChange","el","useRef","rangeEl","preValue","touchEvent","e","target","current","useLayoutEffect","createElement","ref","itResult","i","itemJSX","key","push","right","left","concat","renderScale","type","onMouseMove","onTouchMove"],"mappings":"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"}