{"version":3,"file":"sliderscale.js","sources":["sliderscale.js"],"sourcesContent":["import React, { useRef, useLayoutEffect } from 'react';\r\nimport classNames from 'classnames';\r\nvar selectorPrefix = 'adhere-ui-sliderscale';\r\nvar SliderScale = function (props) {\r\n    var _a = props.className, className = _a === void 0 ? '' : _a, _b = props.style, style = _b === void 0 ? {} : _b, _c = props.min, min = _c === void 0 ? 0 : _c, _d = props.max, max = _d === void 0 ? 100 : _d, _e = props.step, step = _e === void 0 ? 1 : _e, _f = props.value, value = _f === void 0 ? 0 : _f, _g = props.interval, interval = _g === void 0 ? 5 : _g, onChange = props.onChange;\r\n    var el = useRef(null);\r\n    var rangeEl = useRef(null);\r\n    var preValue = useRef('');\r\n    function renderScale() {\r\n        var itResult = [];\r\n        for (var i = min; i < max; i++) {\r\n            if (max - 1 === min) {\r\n                break;\r\n            }\r\n            var itemJSX = null;\r\n            if ((i + 1) % interval === 0) {\r\n                itemJSX = (React.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item \" + selectorPrefix + \"-scale-item-point\" },\r\n                    React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, i + 1)));\r\n            }\r\n            else if (i === min) {\r\n                itemJSX = (React.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min)));\r\n            }\r\n            else if ((i + 1) % interval !== 0 && i === max - 1) {\r\n                itemJSX = (React.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" },\r\n                    React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, i + 1)));\r\n            }\r\n            else {\r\n                itemJSX = React.createElement(\"div\", { key: i, className: selectorPrefix + \"-scale-item\" });\r\n            }\r\n            itResult.push(itemJSX);\r\n        }\r\n        var result = [];\r\n        if (min === max) {\r\n            result.push(React.createElement(\"div\", { key: 0, className: selectorPrefix + \"-scale-item\" },\r\n                React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, \"0\"),\r\n                React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } },\r\n                    \"$\",\r\n                    max)));\r\n        }\r\n        else {\r\n            if (max - 1 === min) {\r\n                result.push(React.createElement(\"div\", { key: min, className: selectorPrefix + \"-scale-item\" },\r\n                    React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\" }, min),\r\n                    React.createElement(\"span\", { className: selectorPrefix + \"-scale-item-value\", style: { right: 0, left: 'auto' } }, max)));\r\n            }\r\n        }\r\n        return result.concat(itResult);\r\n    }\r\n    function onMousemove(e) {\r\n        touchEvent(e);\r\n    }\r\n    function onTouchmove(e) {\r\n        touchEvent(e);\r\n    }\r\n    function touchEvent(e) {\r\n        var value = e.target.value;\r\n        rangeEl.current.value = value;\r\n        if (preValue.current !== value) {\r\n            preValue.current = value;\r\n            if (onChange) {\r\n                onChange(value);\r\n            }\r\n        }\r\n    }\r\n    useLayoutEffect(function () {\r\n        rangeEl.current.value = \"\" + value;\r\n    }, [min, max, step, value, interval]);\r\n    return (React.createElement(\"div\", { className: classNames(selectorPrefix, className || ''), style: style || {}, ref: el },\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-scale\" }, renderScale()),\r\n        React.createElement(\"input\", { ref: rangeEl, className: selectorPrefix + \"-range\", type: \"range\", min: min, max: max, step: step, onMouseMove: onMousemove, onTouchMove: onTouchmove })));\r\n};\r\n// /**\r\n//  * SliderScale\r\n//  * @class SliderScale\r\n//  * @classdesc SliderScale\r\n//  */\r\n// class SliderScale extends React.Component<ISliderScaleProps, any> {\r\n//   static defaultProps: any;\r\n//   static propTypes: any;\r\n//\r\n//   private el: HTMLDivElement | null | undefined;\r\n//   private preValue: string | number | undefined;\r\n//   private rangeEl: HTMLInputElement | null | undefined;\r\n//\r\n//   componentDidMount() {\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = this.props.value;\r\n//   }\r\n//\r\n//   componentWillReceiveProps(nextProps: Readonly<ISliderScaleProps>, nextContext: any) {\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = nextProps.value;\r\n//   }\r\n//\r\n//   private onMousemove = (e) => {\r\n//     this.touchEvent(e);\r\n//   };\r\n//\r\n//   private onTouchmove = (e) => {\r\n//     this.touchEvent(e);\r\n//   };\r\n//\r\n//   private touchEvent(e) {\r\n//     // console.log('touchEvent', e.target, e.target.value, this.preValue);\r\n//\r\n//     const { value } = e.target;\r\n//\r\n//     // @ts-ignore\r\n//     this.rangeEl?.value = value;\r\n//\r\n//     if (this.preValue !== value) {\r\n//       this.preValue = value;\r\n//\r\n//       const { onChange } = this.props;\r\n//\r\n//       if (onChange) {\r\n//         onChange(value);\r\n//       }\r\n//     }\r\n//   }\r\n//\r\n//   private renderScale() {\r\n//     const { min, max, interval } = this.props;\r\n//\r\n//     const itResult: Array<React.ReactElement> = [];\r\n//\r\n//     // @ts-ignore\r\n//     for (let i = min; i < max; i++) {\r\n//       // @ts-ignore\r\n//       if (max - 1 === min) {\r\n//         break;\r\n//       }\r\n//\r\n//       let itemJSX: React.ReactElement | null = null;\r\n//\r\n//       // @ts-ignore\r\n//       if ((i + 1) % interval === 0) {\r\n//         itemJSX = (\r\n//           <div\r\n//             key={i}\r\n//             className={`${selectorPrefix}-scale-item ${selectorPrefix}-scale-item-point`}\r\n//           >\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>\r\n//               {\r\n//                 // @ts-ignore\r\n//                 i + 1\r\n//               }\r\n//             </span>\r\n//           </div>\r\n//         );\r\n//       } else if (i === min) {\r\n//         itemJSX = (\r\n//           <div key={i} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{min}</span>\r\n//           </div>\r\n//         );\r\n//       }\r\n//\r\n//       // @ts-ignore\r\n//       else if ((i + 1) % interval !== 0 && i === max - 1) {\r\n//         itemJSX = (\r\n//           <div key={i} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{i + 1}</span>\r\n//           </div>\r\n//         );\r\n//       } else {\r\n//         itemJSX = <div key={i} className={`${selectorPrefix}-scale-item`} />;\r\n//       }\r\n//\r\n//       // @ts-ignore\r\n//       itResult.push(itemJSX);\r\n//     }\r\n//\r\n//     const result: Array<React.ReactElement> = [];\r\n//\r\n//     if (min === max) {\r\n//       result.push(\r\n//         <div key={0} className={`${selectorPrefix}-scale-item`}>\r\n//           <span className={`${selectorPrefix}-scale-item-value`}>0</span>\r\n//           <span className={`${selectorPrefix}-scale-item-value`} style={{ right: 0, left: 'auto' }}>\r\n//             ${max}\r\n//           </span>\r\n//         </div>,\r\n//       );\r\n//     } else {\r\n//       // @ts-ignore\r\n//       if (max - 1 === min) {\r\n//         result.push(\r\n//           <div key={min} className={`${selectorPrefix}-scale-item`}>\r\n//             <span className={`${selectorPrefix}-scale-item-value`}>{min}</span>\r\n//             <span\r\n//               className={`${selectorPrefix}-scale-item-value`}\r\n//               style={{ right: 0, left: 'auto' }}\r\n//             >\r\n//               {max}\r\n//             </span>\r\n//           </div>,\r\n//         );\r\n//       }\r\n//     }\r\n//\r\n//     return result.concat(itResult);\r\n//   }\r\n//\r\n//   render() {\r\n//     // @ts-ignore\r\n//     const { className, style } = this.props;\r\n//\r\n//     const { min, max, step } = this.props;\r\n//\r\n//     // @ts-ignore\r\n//     return (\r\n//       <div\r\n//         className={classNames(\r\n//           selectorPrefix,\r\n//           // @ts-ignore\r\n//           className.split(/\\s+/),\r\n//         )}\r\n//         style={{ ...style }}\r\n//         ref={(el) => (this.el = el)}\r\n//       >\r\n//         <div className={`${selectorPrefix}-scale`}>{this.renderScale()}</div>\r\n//\r\n//         <input\r\n//           ref={(el) => (this.rangeEl = el)}\r\n//           className={`${selectorPrefix}-range`}\r\n//           type=\"range\"\r\n//           min={min}\r\n//           max={max}\r\n//           step={step}\r\n//           onMouseMove={this.onMousemove}\r\n//           onTouchMove={this.onTouchmove}\r\n//         />\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n//\r\n// SliderScale.defaultProps = {\r\n//   className: '',\r\n//   style: {},\r\n//   min: 0,\r\n//   max: 100,\r\n//   step: 1,\r\n//   value: 0,\r\n//   interval: 5,\r\n//   onChange: () => {},\r\n// };\r\n//\r\n// SliderScale.propTypes = {\r\n//   className: PropTypes.string,\r\n//   style: PropTypes.object,\r\n//   // 最小值\r\n//   min: PropTypes.number,\r\n//   // 最大值\r\n//   max: PropTypes.number,\r\n//   // 步进\r\n//   step: PropTypes.number,\r\n//   // 当前值\r\n//   value: PropTypes.number,\r\n//   // 刻度的间隔\r\n//   interval: PropTypes.number,\r\n//   onChange: PropTypes.func,\r\n// };\r\nexport default SliderScale;\r\n"],"names":["React","useRef","useLayoutEffect","classNames","selectorPrefix","SliderScale","props","_a","className","_b","style","_c","min","_d","max","_e","step","_f","value","_g","interval","onChange","el","rangeEl","preValue","touchEvent","e","target","current","createElement","ref","itResult","i","itemJSX","key","push","result","right","left","concat","renderScale","type","onMouseMove","onTouchMove"],"mappings":"OAAOA,OAASC,OAAQC,mCACjBC,4BACP,IAAIC,eAAiB,wBACjBC,YAAc,SAAUC,GACxB,IAAIC,EAAKD,EAAME,UAAWA,OAAmB,IAAPD,EAAgB,GAAKA,EAAIE,EAAKH,EAAMI,MAAOA,OAAe,IAAPD,EAAgB,GAAKA,EAAIE,EAAKL,EAAMM,IAAKA,OAAa,IAAPD,EAAgB,EAAIA,EAAIE,EAAKP,EAAMQ,IAAKA,OAAa,IAAPD,EAAgB,IAAMA,EAAIE,EAAKT,EAAMU,KAAMA,OAAc,IAAPD,EAAgB,EAAIA,EAAIE,EAAKX,EAAMY,MAAOA,OAAe,IAAPD,EAAgB,EAAIA,EAAIE,EAAKb,EAAMc,SAAUA,OAAkB,IAAPD,EAAgB,EAAIA,EAAIE,EAAWf,EAAMe,SACvXC,EAAKrB,OAAO,MACZsB,EAAUtB,OAAO,MACjBuB,EAAWvB,OAAO,IAgDtB,SAASwB,EAAWC,GACZR,EAAQQ,EAAEC,OAAOT,MACrBK,EAAQK,QAAQV,MAAQA,EACpBM,EAASI,UAAYV,IACrBM,EAASI,QAAUV,EACfG,GACAA,EAASH,IAOrB,OAHAhB,gBAAgB,WACZqB,EAAQK,QAAQV,MAAQ,GAAKA,GAC9B,CAACN,EAAKE,EAAKE,EAAME,EAAOE,IACnBpB,MAAM6B,cAAc,MAAO,CAAErB,UAAWL,WAAWC,eAAgBI,GAAa,IAAKE,MAAOA,GAAS,GAAIoB,IAAKR,GAClHtB,MAAM6B,cAAc,MAAO,CAAErB,UAAWJ,eAAiB,UA7D7D,WAEI,IADA,IAAI2B,EAAW,GACNC,EAAIpB,EAAKoB,EAAIlB,GACdA,EAAM,IAAMF,EADOoB,IAAK,CAI5B,IAAIC,EAAU,KAEVA,GADCD,EAAI,GAAKZ,GAAa,EACZpB,MAAM6B,cAAc,MAAO,CAAEK,IAAKF,EAAGxB,UAAWJ,eAAiB,eAAiBA,eAAiB,qBAC1GJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,qBAAuB4B,EAAI,IAEpFA,IAAMpB,EACAZ,MAAM6B,cAAc,MAAO,CAAEK,IAAKF,EAAGxB,UAAWJ,eAAiB,eACxEJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,qBAAuBQ,KAE/EoB,EAAI,GAAKZ,GAAa,GAAKY,IAAMlB,EAAM,EAClCd,MAAM6B,cAAc,MAAO,CAAEK,IAAKF,EAAGxB,UAAWJ,eAAiB,eACxEJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,qBAAuB4B,EAAI,IAG/EhC,MAAM6B,cAAc,MAAO,CAAEK,IAAKF,EAAGxB,UAAWJ,eAAiB,gBAE/E2B,EAASI,KAAKF,GAElB,IAAIG,EAAS,GAeb,OAdIxB,IAAQE,EACRsB,EAAOD,KAAKnC,MAAM6B,cAAc,MAAO,CAAEK,IAAK,EAAG1B,UAAWJ,eAAiB,eACzEJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,qBAAuB,KACjFJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,oBAAqBM,MAAO,CAAE2B,MAAO,EAAGC,KAAM,SACpG,IACAxB,KAGJA,EAAM,IAAMF,GACZwB,EAAOD,KAAKnC,MAAM6B,cAAc,MAAO,CAAEK,IAAKtB,EAAKJ,UAAWJ,eAAiB,eAC3EJ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,qBAAuBQ,GACjFZ,MAAM6B,cAAc,OAAQ,CAAErB,UAAWJ,eAAiB,oBAAqBM,MAAO,CAAE2B,MAAO,EAAGC,KAAM,SAAYxB,KAGzHsB,EAAOG,OAAOR,GAsBgDS,IACrExC,MAAM6B,cAAc,QAAS,CAAEC,IAAKP,EAASf,UAAWJ,eAAiB,SAAUqC,KAAM,QAAS7B,IAAKA,EAAKE,IAAKA,EAAKE,KAAMA,EAAM0B,YArBtI,SAAqBhB,GACjBD,EAAWC,IAoBiJiB,YAlBhK,SAAqBjB,GACjBD,EAAWC,uBAoNJrB"}