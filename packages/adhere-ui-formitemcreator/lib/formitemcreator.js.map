{"version":3,"file":"formitemcreator.js","sources":["formitemcreator.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar formitem_1 = tslib_1.__importDefault(require(\"./formitem\"));\r\nvar TEXT = Symbol('text');\r\nvar INPUT = Symbol('input');\r\nvar SEARCH = Symbol('search');\r\nvar PASSWORD = Symbol('password');\r\nvar TEXTAREA = Symbol('textarea');\r\nvar NUMBER = Symbol('number');\r\nvar RADIO = Symbol('radio');\r\nvar CHECKBOX = Symbol('checkbox');\r\nvar DATEPICKER = Symbol('datepicker');\r\nvar RANGEPICKER = Symbol('rangepicker');\r\nvar TIMEPICKER = Symbol('timepicker');\r\nvar SWITCH = Symbol('switch');\r\nvar SELECT = Symbol('select');\r\nvar SLIDER = Symbol('slider');\r\nvar RATE = Symbol('rate');\r\nvar UPLOAD = Symbol('upload');\r\nvar TAG = Symbol('tag');\r\nvar DEFINE = Symbol('define');\r\nvar FormItemCreator = function (props) {\r\n    var columns = props.columns, layout = props.layout, row = props.row;\r\n    /**\r\n     * renderFormItem\r\n     * @description 表单单项渲染 通过type来制定\r\n     * @param item\r\n     */\r\n    function renderFormItem(item) {\r\n        var type = item.type, _a = item.contentProps, contentProps = _a === void 0 ? {} : _a;\r\n        if (type === DEFINE) {\r\n            return item.content;\r\n        }\r\n        else {\r\n            var renderMethodName = FORM_ITEM_CONFIG.get(type || INPUT);\r\n            if (renderMethodName) {\r\n                var FormItem = formitem_1.default[renderMethodName];\r\n                return react_1.default.createElement(FormItem, tslib_1.__assign({}, contentProps));\r\n            }\r\n            return null;\r\n            // return renderMethodName ? renderItem[renderMethodName](contentProps) : null;\r\n        }\r\n    }\r\n    /**\r\n     * getDefaultItemProps\r\n     * @description 表单单项的默认配置 通过type来制定\r\n     * @param item\r\n     */\r\n    function getDefaultItemProps(item) {\r\n        switch (item.type) {\r\n            case SWITCH:\r\n                return { valuePropName: 'checked' };\r\n            case CHECKBOX:\r\n                return { valuePropName: 'checked' };\r\n            case UPLOAD:\r\n                return { valuePropName: 'fileList' };\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n    var FORM_ITEM_CONFIG = (0, react_1.useMemo)(function () {\r\n        return new Map([\r\n            [TEXT, 'renderText'],\r\n            [INPUT, 'renderInput'],\r\n            [SEARCH, 'renderSearch'],\r\n            [PASSWORD, 'renderPassword'],\r\n            [TEXTAREA, 'renderInputArea'],\r\n            [NUMBER, 'renderInputNumber'],\r\n            [RADIO, 'renderRadio'],\r\n            [CHECKBOX, 'renderCheckbox'],\r\n            [DATEPICKER, 'renderDatePicker'],\r\n            [RANGEPICKER, 'renderRangePicker'],\r\n            [TIMEPICKER, 'renderTimePicker'],\r\n            [SWITCH, 'renderSwitch'],\r\n            [SELECT, 'renderSelect'],\r\n            [SLIDER, 'renderSlider'],\r\n            [RATE, 'renderRate'],\r\n            [UPLOAD, 'renderUpload'],\r\n            [TAG, 'renderTag'],\r\n        ]);\r\n    }, []);\r\n    var formItems = (0, react_1.useMemo)(function () {\r\n        return columns\r\n            .filter(function (item) { return !('skip' in item); })\r\n            .map(function (item) {\r\n            var contentProps = item.contentProps, col = item.col, type = item.type, itemProps = tslib_1.__rest(item, [\"contentProps\", \"col\", \"type\"]);\r\n            var formItem = (react_1.default.createElement(antd_1.Form.Item, tslib_1.__assign({}, getDefaultItemProps(item), layout, itemProps, { key: item.name }), renderFormItem(item)));\r\n            return col ? react_1.default.createElement(antd_1.Col, tslib_1.__assign({}, col, { key: item.name }), formItem) : formItem;\r\n        });\r\n    }, [columns]);\r\n    return react_1.default.createElement(react_1.default.Fragment, null, row ? react_1.default.createElement(antd_1.Row, tslib_1.__assign({}, row), formItems) : formItems);\r\n};\r\n//@ts-ignore\r\nvar MemoWrap = (0, react_1.memo)(FormItemCreator);\r\nMemoWrap.TEXT = TEXT;\r\nMemoWrap.INPUT = INPUT;\r\nMemoWrap.SEARCH = SEARCH;\r\nMemoWrap.PASSWORD = PASSWORD;\r\nMemoWrap.TEXTAREA = TEXTAREA;\r\nMemoWrap.NUMBER = NUMBER;\r\nMemoWrap.RADIO = RADIO;\r\nMemoWrap.CHECKBOX = CHECKBOX;\r\nMemoWrap.DATEPICKER = DATEPICKER;\r\nMemoWrap.RANGEPICKER = RANGEPICKER;\r\nMemoWrap.TIMEPICKER = TIMEPICKER;\r\nMemoWrap.SWITCH = SWITCH;\r\nMemoWrap.SELECT = SELECT;\r\nMemoWrap.SLIDER = SLIDER;\r\nMemoWrap.RATE = RATE;\r\nMemoWrap.UPLOAD = UPLOAD;\r\nMemoWrap.TAG = TAG;\r\nMemoWrap.DEFINE = DEFINE;\r\nexports.default = MemoWrap;\r\n//# sourceMappingURL=formitemcreator.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","react_1","__importStar","formitem_1","__importDefault","TEXT","Symbol","INPUT","SEARCH","PASSWORD","TEXTAREA","NUMBER","RADIO","CHECKBOX","DATEPICKER","RANGEPICKER","TIMEPICKER","SWITCH","SELECT","SLIDER","RATE","UPLOAD","TAG","DEFINE","FormItemCreator","props","columns","layout","row","FORM_ITEM_CONFIG","useMemo","Map","formItems","filter","item","map","contentProps","type","col","itemProps","__rest","formItem","default","createElement","Form","Item","__assign","valuePropName","key","name","_a","content","renderMethodName","get","FormItem","Col","Fragment","Row","MemoWrap","memo"],"mappings":"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"}