{"version":3,"file":"useTriggerQuery.js","sources":["useTriggerQuery.js"],"sourcesContent":["import { useCreation, useLatest } from 'ahooks';\nimport { useImmer } from 'use-immer';\nimport useSetState from './useSetState';\n/**\n * useTriggerQuery\n * @param defaultValue\n */\nfunction useTriggerQuery(defaultValue) {\n    var memoDefaultValue = useCreation(function () { return defaultValue; }, []);\n    // 状态参数\n    var _a = useImmer(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), fieldsValue = _a[0], setFieldsValue = _a[1];\n    // 查询参数\n    var _b = useSetState(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), targetSearchParamsRef = _b[0], setSearchParams = _b[1];\n    var targetFieldsValueRef = useLatest(fieldsValue);\n    function search(cb) {\n        var keys = Object.keys(targetFieldsValueRef.current);\n        var searchParams = {};\n        keys.forEach(function (key) {\n            searchParams[key] = targetFieldsValueRef.current[key];\n        });\n        setSearchParams(searchParams, cb);\n    }\n    function reset(cb) {\n        var keys = Object.keys(memoDefaultValue);\n        setFieldsValue(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n        var searchParams = {};\n        keys.forEach(function (key) {\n            searchParams[key] = memoDefaultValue[key];\n        });\n        setSearchParams(searchParams, cb);\n    }\n    return {\n        setFieldsValue: setFieldsValue,\n        fieldsValue: targetFieldsValueRef,\n        searchParams: targetSearchParamsRef,\n        search: search,\n        reset: reset,\n    };\n}\nexport default useTriggerQuery;\n"],"names":["useCreation","useLatest","useImmer","useSetState","useTriggerQuery","defaultValue","memoDefaultValue","_a","fieldsValue","setFieldsValue","_b","targetSearchParamsRef","setSearchParams","targetFieldsValueRef","searchParams","search","cb","keys","Object","current","forEach","key","reset","draft"],"mappings":"OAASA,YAAaC,SAAyB,KAAR,gBAC9BC,QAA2B,KAAX,mBAClBC,gBAAiB,gBAKxB,SAASC,gBAAgBC,GACrB,IAAIC,EAAmBN,YAAY,WAAc,OAAOK,CAAc,EAAG,EAAE,EAEvEE,EAAKL,SAASI,MAAAA,EAA2DA,EAAmB,EAAE,EAAGE,EAAcD,EAAG,GAAIE,EAAiBF,EAAG,GAE1IG,EAAKP,YAAYG,MAAAA,EAA2DA,EAAmB,EAAE,EAAGK,EAAwBD,EAAG,GAAIE,EAAkBF,EAAG,GACxJG,EAAuBZ,UAAUO,CAAW,EAsBhD,MAAO,CACHC,eAAgBA,EAChBD,YAAaK,EACbC,aAAcH,EACdI,OAzBJ,SAAgBC,GACZ,IAAIC,EAAOC,OAAOD,KAAKJ,EAAqBM,OAAO,EAC/CL,EAAe,GACnBG,EAAKG,QAAQ,SAAUC,GACnBP,EAAaO,GAAOR,EAAqBM,QAAQE,EACrD,CAAC,EACDT,EAAgBE,EAAcE,CAAE,CACpC,EAmBIM,MAlBJ,SAAeN,GACX,IAAIC,EAAOC,OAAOD,KAAKX,CAAgB,EAMnCQ,GALJL,EAAe,SAAUc,GACrBN,EAAKG,QAAQ,SAAUC,GACnBE,EAAMF,GAAOf,EAAiBe,EAClC,CAAC,CACL,CAAC,EACkB,IACnBJ,EAAKG,QAAQ,SAAUC,GACnBP,EAAaO,GAAOf,EAAiBe,EACzC,CAAC,EACDT,EAAgBE,EAAcE,CAAE,CACpC,CAOA,CACJ,gBACeZ"}