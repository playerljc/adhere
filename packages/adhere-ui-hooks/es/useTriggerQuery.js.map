{"version":3,"file":"useTriggerQuery.js","sources":["useTriggerQuery.js"],"sourcesContent":["import { useCreation, useLatest } from 'ahooks';\nimport { useImmer } from 'use-immer';\n/**\n * useTriggerQuery\n * @param defaultValue\n */\nfunction useTriggerQuery(defaultValue) {\n    var memoDefaultValue = useCreation(function () { return defaultValue; }, []);\n    // 状态参数\n    var _a = useImmer(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), fieldsValue = _a[0], setFieldsValue = _a[1];\n    // 查询参数\n    var _b = useImmer(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), searchParams = _b[0], setSearchParams = _b[1];\n    var targetFieldsValueRef = useLatest(fieldsValue);\n    var targetSearchParamsRef = useLatest(searchParams);\n    function search() {\n        var keys = Object.keys(targetFieldsValueRef.current);\n        setSearchParams(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = targetFieldsValueRef.current[key];\n            });\n        });\n    }\n    function reset() {\n        var keys = Object.keys(memoDefaultValue);\n        setFieldsValue(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n        setSearchParams(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n    }\n    return {\n        setFieldsValue: setFieldsValue,\n        fieldsValue: targetFieldsValueRef.current,\n        searchParams: targetSearchParamsRef.current,\n        search: search,\n        reset: reset,\n    };\n}\nexport default useTriggerQuery;\n"],"names":["useCreation","useLatest","useImmer","useTriggerQuery","defaultValue","memoDefaultValue","_a","fieldsValue","setFieldsValue","_b","searchParams","setSearchParams","targetFieldsValueRef","targetSearchParamsRef","current","search","keys","Object","draft","forEach","key","reset"],"mappings":"OAASA,YAAaC,SAAyB,KAAR,gBAC9BC,QAA2B,KAAX,YAKzB,SAASC,gBAAgBC,GACrB,IAAIC,EAAmBL,YAAY,WAAc,OAAOI,CAAc,EAAG,EAAE,EAEvEE,EAAKJ,SAASG,MAAAA,EAA2DA,EAAmB,EAAE,EAAGE,EAAcD,EAAG,GAAIE,EAAiBF,EAAG,GAE1IG,EAAKP,SAASG,MAAAA,EAA2DA,EAAmB,EAAE,EAAGK,EAAeD,EAAG,GAAIE,EAAkBF,EAAG,GAC5IG,EAAuBX,UAAUM,CAAW,EAC5CM,EAAwBZ,UAAUS,CAAY,EAsBlD,MAAO,CACHF,eAAgBA,EAChBD,YAAaK,EAAqBE,QAClCJ,aAAcG,EAAsBC,QACpCC,OAzBJ,WACI,IAAIC,EAAOC,OAAOD,KAAKJ,EAAqBE,OAAO,EACnDH,EAAgB,SAAUO,GACtBF,EAAKG,QAAQ,SAAUC,GACnBF,EAAME,GAAOR,EAAqBE,QAAQM,EAC9C,CAAC,CACL,CAAC,CACL,EAmBIC,MAlBJ,WACI,IAAIL,EAAOC,OAAOD,KAAKX,CAAgB,EACvCG,EAAe,SAAUU,GACrBF,EAAKG,QAAQ,SAAUC,GACnBF,EAAME,GAAOf,EAAiBe,EAClC,CAAC,CACL,CAAC,EACDT,EAAgB,SAAUO,GACtBF,EAAKG,QAAQ,SAAUC,GACnBF,EAAME,GAAOf,EAAiBe,EAClC,CAAC,CACL,CAAC,CACL,CAOA,CACJ,gBACejB"}