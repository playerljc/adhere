{"version":3,"file":"useTriggerQuery.js","sources":["useTriggerQuery.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ahooks_1 = require(\"ahooks\");\nvar use_immer_1 = require(\"use-immer\");\n/**\n * useTriggerQuery\n * @param defaultValue\n */\nfunction useTriggerQuery(defaultValue) {\n    var memoDefaultValue = (0, ahooks_1.useCreation)(function () { return defaultValue; }, []);\n    // 状态参数\n    var _a = (0, use_immer_1.useImmer)(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), fieldsValue = _a[0], setFieldsValue = _a[1];\n    // 查询参数\n    var _b = (0, use_immer_1.useImmer)(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), searchParams = _b[0], setSearchParams = _b[1];\n    var targetFieldsValueRef = (0, ahooks_1.useLatest)(fieldsValue);\n    var targetSearchParamsRef = (0, ahooks_1.useLatest)(searchParams);\n    function search() {\n        var keys = Object.keys(targetFieldsValueRef.current);\n        setSearchParams(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = targetFieldsValueRef.current[key];\n            });\n        });\n    }\n    function reset() {\n        var keys = Object.keys(memoDefaultValue);\n        setFieldsValue(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n        setSearchParams(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n    }\n    return {\n        setFieldsValue: setFieldsValue,\n        fieldsValue: targetFieldsValueRef.current,\n        searchParams: targetSearchParamsRef.current,\n        search: search,\n        reset: reset,\n    };\n}\nexports.default = useTriggerQuery;\n"],"names":["Object","defineProperty","exports","value","ahooks_1","require","use_immer_1","useTriggerQuery","defaultValue","memoDefaultValue","useCreation","_a","useImmer","fieldsValue","setFieldsValue","_b","searchParams","setSearchParams","targetFieldsValueRef","useLatest","targetSearchParamsRef","current","search","keys","draft","forEach","key","reset","default"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,SAAWC,QAAQ,QAAQ,EAC3BC,YAAcD,QAAQ,WAAW,EAKrC,SAASE,gBAAgBC,GACrB,IAAIC,GAAmB,EAAIL,SAASM,aAAa,WAAc,OAAOF,CAAc,EAAG,EAAE,EAErFG,GAAK,EAAIL,YAAYM,UAAUH,MAAAA,EAA2DA,EAAmB,EAAE,EAAGI,EAAcF,EAAG,GAAIG,EAAiBH,EAAG,GAE3JI,GAAK,EAAIT,YAAYM,UAAUH,MAAAA,EAA2DA,EAAmB,EAAE,EAAGO,EAAeD,EAAG,GAAIE,EAAkBF,EAAG,GAC7JG,GAAuB,EAAId,SAASe,WAAWN,CAAW,EAC1DO,GAAwB,EAAIhB,SAASe,WAAWH,CAAY,EAsBhE,MAAO,CACHF,eAAgBA,EAChBD,YAAaK,EAAqBG,QAClCL,aAAcI,EAAsBC,QACpCC,OAzBJ,WACI,IAAIC,EAAOvB,OAAOuB,KAAKL,EAAqBG,OAAO,EACnDJ,EAAgB,SAAUO,GACtBD,EAAKE,QAAQ,SAAUC,GACnBF,EAAME,GAAOR,EAAqBG,QAAQK,EAC9C,CAAC,CACL,CAAC,CACL,EAmBIC,MAlBJ,WACI,IAAIJ,EAAOvB,OAAOuB,KAAKd,CAAgB,EACvCK,EAAe,SAAUU,GACrBD,EAAKE,QAAQ,SAAUC,GACnBF,EAAME,GAAOjB,EAAiBiB,EAClC,CAAC,CACL,CAAC,EACDT,EAAgB,SAAUO,GACtBD,EAAKE,QAAQ,SAAUC,GACnBF,EAAME,GAAOjB,EAAiBiB,EAClC,CAAC,CACL,CAAC,CACL,CAOA,CACJ,CACAxB,QAAQ0B,QAAUrB"}