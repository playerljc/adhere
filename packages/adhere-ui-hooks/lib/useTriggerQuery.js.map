{"version":3,"file":"useTriggerQuery.js","sources":["useTriggerQuery.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ahooks_1 = require(\"ahooks\");\nvar use_immer_1 = require(\"use-immer\");\nvar useSetState_1 = __importDefault(require(\"./useSetState\"));\n/**\n * useTriggerQuery\n * @param defaultValue\n */\nfunction useTriggerQuery(defaultValue) {\n    var memoDefaultValue = (0, ahooks_1.useCreation)(function () { return defaultValue; }, []);\n    // 状态参数\n    var _a = (0, use_immer_1.useImmer)(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), fieldsValue = _a[0], setFieldsValue = _a[1];\n    // 查询参数\n    var _b = (0, useSetState_1.default)(memoDefaultValue !== null && memoDefaultValue !== void 0 ? memoDefaultValue : {}), targetSearchParamsRef = _b[0], setSearchParams = _b[1];\n    var targetFieldsValueRef = (0, ahooks_1.useLatest)(fieldsValue);\n    function search(cb) {\n        var keys = Object.keys(targetFieldsValueRef.current);\n        var searchParams = {};\n        keys.forEach(function (key) {\n            searchParams[key] = targetFieldsValueRef.current[key];\n        });\n        setSearchParams(searchParams, cb);\n    }\n    function reset(cb) {\n        var keys = Object.keys(memoDefaultValue);\n        setFieldsValue(function (draft) {\n            keys.forEach(function (key) {\n                draft[key] = memoDefaultValue[key];\n            });\n        });\n        var searchParams = {};\n        keys.forEach(function (key) {\n            searchParams[key] = memoDefaultValue[key];\n        });\n        setSearchParams(searchParams, cb);\n    }\n    return {\n        setFieldsValue: setFieldsValue,\n        fieldsValue: targetFieldsValueRef,\n        searchParams: targetSearchParamsRef,\n        search: search,\n        reset: reset,\n    };\n}\nexports.default = useTriggerQuery;\n"],"names":["__importDefault","this","mod","__esModule","default","ahooks_1","Object","defineProperty","exports","value","require","use_immer_1","useSetState_1","useTriggerQuery","defaultValue","memoDefaultValue","useCreation","_a","useImmer","fieldsValue","setFieldsValue","_b","targetSearchParamsRef","setSearchParams","targetFieldsValueRef","useLatest","searchParams","search","cb","keys","current","forEach","key","reset","draft"],"mappings":"AAAA,aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAEIG,UADJC,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC7CC,QAAQ,QAAQ,GAC3BC,YAAcD,QAAQ,WAAW,EACjCE,cAAgBZ,gBAAgBU,QAAQ,eAAe,CAAC,EAK5D,SAASG,gBAAgBC,GACrB,IAAIC,GAAmB,EAAIV,SAASW,aAAa,WAAc,OAAOF,CAAc,EAAG,EAAE,EAErFG,GAAK,EAAIN,YAAYO,UAAUH,MAAAA,EAA2DA,EAAmB,EAAE,EAAGI,EAAcF,EAAG,GAAIG,EAAiBH,EAAG,GAE3JI,GAAK,EAAIT,cAAcR,SAASW,MAAAA,EAA2DA,EAAmB,EAAE,EAAGO,EAAwBD,EAAG,GAAIE,EAAkBF,EAAG,GACvKG,GAAuB,EAAInB,SAASoB,WAAWN,CAAW,EAsB9D,MAAO,CACHC,eAAgBA,EAChBD,YAAaK,EACbE,aAAcJ,EACdK,OAzBJ,SAAgBC,GACZ,IAAIC,EAAOvB,OAAOuB,KAAKL,EAAqBM,OAAO,EAC/CJ,EAAe,GACnBG,EAAKE,QAAQ,SAAUC,GACnBN,EAAaM,GAAOR,EAAqBM,QAAQE,EACrD,CAAC,EACDT,EAAgBG,EAAcE,CAAE,CACpC,EAmBIK,MAlBJ,SAAeL,GACX,IAAIC,EAAOvB,OAAOuB,KAAKd,CAAgB,EAMnCW,GALJN,EAAe,SAAUc,GACrBL,EAAKE,QAAQ,SAAUC,GACnBE,EAAMF,GAAOjB,EAAiBiB,EAClC,CAAC,CACL,CAAC,EACkB,IACnBH,EAAKE,QAAQ,SAAUC,GACnBN,EAAaM,GAAOjB,EAAiBiB,EACzC,CAAC,EACDT,EAAgBG,EAAcE,CAAE,CACpC,CAOA,CACJ,CACApB,QAAQJ,QAAUS"}