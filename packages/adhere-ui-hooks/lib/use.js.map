{"version":3,"file":"use.js","sources":["use.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ahooks_1 = require(\"ahooks\");\nvar react_1 = require(\"react\");\nvar DEFAULT_STATUS = {\n    data: null,\n    isPending: true,\n    isValidate: false,\n};\nvar SUCCESS_STATUS = {\n    isPending: false,\n    isValidate: false,\n};\nvar FAIL_STATUS = {\n    isPending: false,\n    isValidate: true,\n};\n/**\n * use\n * @description use promise\n * @param { data: any; isPending: boolean; isValidate: boolean; } p\n * @param defaultArgs\n */\nvar use = function (p, defaultArgs) {\n    var _a = (0, react_1.useState)(__assign({}, DEFAULT_STATUS)), result = _a[0], setResult = _a[1];\n    var _b = (0, react_1.useState)('reset'), type = _b[0], setType = _b[1];\n    /**\n     * executePromise\n     * @description execute promise\n     * @param {any[]} _defaultArgs\n     */\n    function executePromise(_defaultArgs) {\n        var _a, _b;\n        // @ts-ignore\n        (_b = (_a = p === null || p === void 0 ? void 0 : p.apply) === null || _a === void 0 ? void 0 : _a.call(p, this, _defaultArgs)) === null || _b === void 0 ? void 0 : _b.then(function (res) {\n            setResult(__assign({ data: res }, SUCCESS_STATUS));\n        }).catch(function (err) {\n            setResult(__assign({ data: err }, FAIL_STATUS));\n        });\n    }\n    /**\n     * reset\n     * @description 重新调用接口\n     * @param {any[]} args\n     */\n    function reset() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        setResult(__assign({}, DEFAULT_STATUS));\n        setType('reset');\n        executePromise(args);\n    }\n    /**\n     * reload\n     * @description 重新调用接口\n     * @param {any[]} args\n     */\n    function reload() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        setResult(__assign(__assign({}, DEFAULT_STATUS), { data: result.data }));\n        setType('reload');\n        executePromise(args);\n    }\n    (0, ahooks_1.useMount)(function () {\n        executePromise(defaultArgs !== null && defaultArgs !== void 0 ? defaultArgs : []);\n    });\n    return __assign(__assign({}, result), { type: type, reset: reset, reload: reload });\n};\nexports.default = use;\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","ahooks_1","defineProperty","exports","value","require","react_1","DEFAULT_STATUS","data","isPending","isValidate","SUCCESS_STATUS","FAIL_STATUS","use","defaultArgs","_a","useState","result","setResult","_b","type","setType","executePromise","_defaultArgs","then","res","catch","err","useMount","reset","args","_i","reload","default"],"mappings":"AAAA,aACA,IAAIA,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE7C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAC1DN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,GACgBU,MAAMb,KAAMO,SAAS,CACzC,EAEIO,UADJb,OAAOc,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC7CC,QAAQ,QAAQ,GAC3BC,QAAUD,QAAQ,OAAO,EACzBE,eAAiB,CACjBC,KAAM,KACNC,UAAW,CAAA,EACXC,WAAY,CAAA,CAChB,EACIC,eAAiB,CACjBF,UAAW,CAAA,EACXC,WAAY,CAAA,CAChB,EACIE,YAAc,CACdH,UAAW,CAAA,EACXC,WAAY,CAAA,CAChB,EAOIG,IAAM,SAAUjB,EAAGkB,GACnB,IAAIC,GAAK,EAAIT,QAAQU,UAAU9B,SAAS,GAAIqB,cAAc,CAAC,EAAGU,EAASF,EAAG,GAAIG,EAAYH,EAAG,GACzFI,GAAK,EAAIb,QAAQU,UAAU,OAAO,EAAGI,EAAOD,EAAG,GAAIE,EAAUF,EAAG,GAMpE,SAASG,EAAeC,GACpB,IAAQJ,EAER,OAACA,EAAK,OAACJ,EAAKnB,MAAAA,EAA6B,KAAA,EAASA,EAAEI,OAAmC,KAAA,EAASe,EAAGhB,KAAKH,EAAGT,KAAMoC,CAAY,IAAwCJ,EAAGK,KAAK,SAAUC,GACnLP,EAAUhC,SAAS,CAAEsB,KAAMiB,CAAI,EAAGd,cAAc,CAAC,CACrD,CAAC,EAAEe,MAAM,SAAUC,GACfT,EAAUhC,SAAS,CAAEsB,KAAMmB,CAAI,EAAGf,WAAW,CAAC,CAClD,CAAC,CACL,CAgCA,OAHA,EAAIX,SAAS2B,UAAU,WACnBN,EAAeR,MAAAA,EAAiDA,EAAc,EAAE,CACpF,CAAC,EACM5B,SAASA,SAAS,GAAI+B,CAAM,EAAG,CAAEG,KAAMA,EAAMS,MA1BpD,WAEI,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAKrC,UAAUC,OAAQoC,CAAE,GACtCD,EAAKC,GAAMrC,UAAUqC,GAEzBb,EAAUhC,SAAS,GAAIqB,cAAc,CAAC,EACtCc,EAAQ,OAAO,EACfC,EAAeQ,CAAI,CACvB,EAkBkEE,OAZlE,WAEI,IADA,IAAIF,EAAO,GACFC,EAAK,EAAGA,EAAKrC,UAAUC,OAAQoC,CAAE,GACtCD,EAAKC,GAAMrC,UAAUqC,GAEzBb,EAAUhC,SAASA,SAAS,GAAIqB,cAAc,EAAG,CAAEC,KAAMS,EAAOT,IAAK,CAAC,CAAC,EACvEa,EAAQ,QAAQ,EAChBC,EAAeQ,CAAI,CACvB,CAIiF,CAAC,CACtF,EACA3B,QAAQ8B,QAAUpB"}