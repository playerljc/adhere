var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,l=arguments.length;a<l;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};import classNames from"classnames";import IScroll from"iscroll/build/iscroll-probe";import React,{forwardRef,memo,useImperativeHandle,useLayoutEffect,useRef}from"react";import StickupLayout from"@baifendian/adhere-ui-stickuplayout";var selectorPrefix="adhere-ui-cascade-compared",defaultCellWidth=120,Item=StickupLayout.Item,StickupLayoutItem=Item;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var CascadeCompared=function(e,t){var a,l=e.className,l=void 0===l?"":l,s=e.style,s=void 0===s?{}:s,n=e.indicatorClassName,n=void 0===n?"":n,r=e.indicatorStyle,r=void 0===r?{}:r,c=e.indicatorFixedWrapClassName,c=void 0===c?"":c,i=e.indicatorFixedWrapStyle,i=void 0===i?{}:i,o=e.indicatorAutoWrapClassName,o=void 0===o?"":o,u=e.indicatorAutoWrapStyle,u=void 0===u?{}:u,d=e.indicator,m=d.columns,m=void 0===m?[]:m,d=d.dataSource,f=void 0===d?{}:d,d=e.masterClassName,d=void 0===d?"":d,v=e.masterStyle,v=void 0===v?{}:v,y=e.masterInnerClassName,y=void 0===y?"":y,N=e.masterInnerStyle,N=void 0===N?{}:N,p=e.masterStickFixedClassName,p=void 0===p?"":p,_=e.masterStickFixedStyle,_=void 0===_?{}:_,x=e.masterStickInnerClassName,x=void 0===x?"":x,h=e.masterStickInnerStyle,h=void 0===h?{}:h,g=e.master,g=void 0===g?[]:g,e=e.onStickChange,S=useRef(null),R=useRef(null),E=useRef([]);function C(){for(var a=S.current.querySelectorAll(".".concat(selectorPrefix,"-auto-wrap")),e=0;e<E.current.length;e++)E.current[e].destroy();E.current=[];for(e=0;e<a.length;e++)!function(e){var t=new IScroll(a[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});E.current.push(t),t.on("scroll",function(){for(var e=0;e<E.current.length;e++)E.current[e]!==t&&E.current[e].scrollTo(t.x,t.y)})}(e)}function P(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)}function I(e,t,a,l,s){return e?e.render?e.render(t[e.dataIndex],t,a,l,s):t[e.dataIndex]:null}function w(e,t){var n,a,l,s,r,c=e.title,c=void 0===c?void 0:c,i=e.className,i=void 0===i?"":i,o=e.style,o=void 0===o?{}:o;return React.createElement(StickupLayoutItem,{key:t,className:classNames(null!=i?i:""),style:__assign({},null!=o?o:{}),title:c,content:(n=t,o=void 0===(o=(i=e).dataSource)?[]:o,a=void 0===(c=i.columns)?[]:c,c=void 0===(c=i.fixedWrapClassName)?"":c,t=void 0===(t=i.fixedWrapStyle)?{}:t,e=void 0===(e=i.autoWrapClassName)?"":e,l=void 0===(l=i.autoWrapStyle)?{}:l,s=void 0===(s=i.autoInnerClassName)?"":s,i=void 0===(i=i.autoInnerStyle)?{}:i,r=P(a),React.createElement(React.Fragment,null,React.createElement("div",{className:classNames("".concat(selectorPrefix,"-fixed-wrap"),null!=c?c:""),style:__assign(__assign({},null!=t?t:{}),{width:(null==r?void 0:r.width)||defaultCellWidth})},o.map(function(e,t){var a;return React.createElement("div",{key:t,className:"".concat(selectorPrefix,"-item")},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-cell"),null!=(a=null==r?void 0:r.className)?a:""),style:__assign({},null!=(a=null==r?void 0:r.style)?a:{})},I(r,e,n,t,-1)))})),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-auto-wrap"),null!=e?e:""),style:__assign({},null!=l?l:{})},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-auto-inner"),null!=s?s:""),style:__assign({},i)},o.map(function(l,s){return React.createElement("div",{key:s,className:"".concat(selectorPrefix,"-item")},a.filter(function(e){return e!==r}).map(function(e,t){var a;return React.createElement("div",{key:e.dataIndex,className:classNames("".concat(selectorPrefix,"-cell"),null!=(a=e.className)?a:""),style:__assign(__assign({},null!=(a=e.style)?a:{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},I(e,l,n,s,t))}))})))))})}return useImperativeHandle(t,function(){return{scrollToByIndex:function(e,t){R.current.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByHeaderEl:function(e,t){R.current.scrollToByHeaderEl(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=E.current[0],e=t.wrapper.querySelector(".".concat(selectorPrefix,"-item .").concat(selectorPrefix,"-cell:nth-of-type(").concat(e,")"));t.scrollToElement(e)}}}),useLayoutEffect(function(){R.current.refresh(),C()}),React.createElement("div",{className:classNames(selectorPrefix,null!=l?l:""),style:__assign({},null!=s?s:{}),ref:S},(a=P(m),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-indicator"),null!=n?n:""),style:__assign({},r)},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-fixed-wrap"),null!=c?c:""),style:__assign(__assign({},null!=i?i:{}),{width:(null==a?void 0:a.width)||defaultCellWidth})},React.createElement("div",{className:"".concat(selectorPrefix,"-item")},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-cell"),null!=(t=null==a?void 0:a.className)?t:""),style:__assign({},null!=(t=null==a?void 0:a.style)?t:{})},I(a,f,-1,-1,-1)))),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-auto-wrap"),null!=o?o:""),style:__assign({},null!=u?u:{})},React.createElement("div",{className:"".concat(selectorPrefix,"-item")},m.filter(function(e){return e!==a}).map(function(e,t){var a;return React.createElement("div",{key:e.dataIndex,className:classNames("".concat(selectorPrefix,"-cell"),null!=(a=e.className)?a:""),style:__assign(__assign({},null!=(a=e.style)?a:{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},I(e,f,-1,-1,t))}))))),(l={ref:R,className:classNames("".concat(selectorPrefix,"-master-inner"),null!=y?y:""),style:null!=N?N:{},fixedClassName:classNames(null!=p?p:""),fixedStyle:null!=_?_:{},innerClassName:classNames(null!=x?x:""),innerStyle:null!=h?h:{},onChange:e},React.createElement("div",{className:classNames("".concat(selectorPrefix,"-master"),null!=d?d:""),style:__assign({},null!=v?v:{})},React.createElement(StickupLayout,__assign({},l),g.map(w)))))};export default memo(forwardRef(CascadeCompared));
//# sourceMappingURL=cascadecompared.js.map
