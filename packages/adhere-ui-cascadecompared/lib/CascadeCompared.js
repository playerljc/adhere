"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,l=arguments.length;a<l;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,r)}:function(e,t,a,l){e[l=void 0===l?a:l]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),iscroll_probe_1=__importDefault(require("iscroll/build/iscroll-probe")),react_1=__importStar(require("react")),adhere_ui_stickuplayout_1=__importDefault(require("@baifendian/adhere-ui-stickuplayout")),selectorPrefix="adhere-ui-cascade-compared",defaultCellWidth=120,Item=adhere_ui_stickuplayout_1.default.Item,StickupLayoutItem=Item;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var CascadeCompared=(0,react_1.memo)((0,react_1.forwardRef)(function(e,t){var a,l=e.className,l=void 0===l?"":l,r=e.style,r=void 0===r?{}:r,n=e.indicatorClassName,n=void 0===n?"":n,s=e.indicatorStyle,s=void 0===s?{}:s,c=e.indicatorFixedWrapClassName,c=void 0===c?"":c,i=e.indicatorFixedWrapStyle,i=void 0===i?{}:i,u=e.indicatorAutoWrapClassName,u=void 0===u?"":u,o=e.indicatorAutoWrapStyle,o=void 0===o?{}:o,d=e.indicator,f=d.columns,f=void 0===f?[]:f,d=d.dataSource,_=void 0===d?{}:d,d=e.masterClassName,d=void 0===d?"":d,m=e.masterStyle,m=void 0===m?{}:m,v=e.masterInnerClassName,v=void 0===v?"":v,p=e.masterInnerStyle,p=void 0===p?{}:p,y=e.masterStickFixedClassName,y=void 0===y?"":y,h=e.masterStickFixedStyle,h=void 0===h?{}:h,x=e.masterStickInnerClassName,x=void 0===x?"":x,g=e.masterStickInnerStyle,g=void 0===g?{}:g,N=e.master,N=void 0===N?[]:N,e=e.onStickChange,P=(0,react_1.useRef)(null),C=(0,react_1.useRef)(null),S=(0,react_1.useRef)([]);function E(){for(var a=P.current.querySelectorAll(".".concat(selectorPrefix,"-auto-wrap")),e=0;e<S.current.length;e++)S.current[e].destroy();S.current=[];for(e=0;e<a.length;e++)!function(e){var t=new iscroll_probe_1.default(a[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});S.current.push(t),t.on("scroll",function(){for(var e=0;e<S.current.length;e++)S.current[e]!==t&&S.current[e].scrollTo(t.x,t.y)})}(e)}function b(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)}function w(e,t,a,l,r){return e?e.render?e.render(t[e.dataIndex],t,a,l,r):t[e.dataIndex]:null}function I(e,t){var n,a,l,r,s,c=e.title,c=void 0===c?void 0:c,i=e.className,i=void 0===i?"":i,u=e.style,u=void 0===u?{}:u;return react_1.default.createElement(StickupLayoutItem,{key:t,className:(0,classnames_1.default)(null!=i?i:""),style:__assign({},null!=u?u:{}),title:c,content:(n=t,u=void 0===(u=(i=e).dataSource)?[]:u,a=void 0===(c=i.columns)?[]:c,c=void 0===(c=i.fixedWrapClassName)?"":c,t=void 0===(t=i.fixedWrapStyle)?{}:t,e=void 0===(e=i.autoWrapClassName)?"":e,l=void 0===(l=i.autoWrapStyle)?{}:l,r=void 0===(r=i.autoInnerClassName)?"":r,i=void 0===(i=i.autoInnerStyle)?{}:i,s=b(a),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-fixed-wrap"),null!=c?c:""),style:__assign(__assign({},null!=t?t:{}),{width:(null==s?void 0:s.width)||defaultCellWidth})},u.map(function(e,t){var a;return react_1.default.createElement("div",{key:t,className:"".concat(selectorPrefix,"-item")},react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-cell"),null!=(a=null==s?void 0:s.className)?a:""),style:__assign({},null!=(a=null==s?void 0:s.style)?a:{})},w(s,e,n,t,-1)))})),react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-auto-wrap"),null!=e?e:""),style:__assign({},null!=l?l:{})},react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-auto-inner"),null!=r?r:""),style:__assign({},i)},u.map(function(l,r){return react_1.default.createElement("div",{key:r,className:"".concat(selectorPrefix,"-item")},a.filter(function(e){return e!==s}).map(function(e,t){var a;return react_1.default.createElement("div",{key:e.dataIndex,className:(0,classnames_1.default)("".concat(selectorPrefix,"-cell"),null!=(a=e.className)?a:""),style:__assign(__assign({},null!=(a=e.style)?a:{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},w(e,l,n,r,t))}))})))))})}return(0,react_1.useImperativeHandle)(t,function(){return{scrollToByIndex:function(e,t){C.current.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByHeaderEl:function(e,t){C.current.scrollToByHeaderEl(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=S.current[0],e=t.wrapper.querySelector(".".concat(selectorPrefix,"-item .").concat(selectorPrefix,"-cell:nth-of-type(").concat(e,")"));t.scrollToElement(e)}}}),(0,react_1.useLayoutEffect)(function(){C.current.refresh(),E()}),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,null!=l?l:""),style:__assign({},null!=r?r:{}),ref:P},(a=b(f),react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-indicator"),null!=n?n:""),style:__assign({},s)},react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-fixed-wrap"),null!=c?c:""),style:__assign(__assign({},null!=i?i:{}),{width:(null==a?void 0:a.width)||defaultCellWidth})},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-item")},react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-cell"),null!=(t=null==a?void 0:a.className)?t:""),style:__assign({},null!=(t=null==a?void 0:a.style)?t:{})},w(a,_,-1,-1,-1)))),react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-auto-wrap"),null!=u?u:""),style:__assign({},null!=o?o:{})},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-item")},f.filter(function(e){return e!==a}).map(function(e,t){var a;return react_1.default.createElement("div",{key:e.dataIndex,className:(0,classnames_1.default)("".concat(selectorPrefix,"-cell"),null!=(a=e.className)?a:""),style:__assign(__assign({},null!=(a=e.style)?a:{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},w(e,_,-1,-1,t))}))))),(l={ref:C,className:(0,classnames_1.default)("".concat(selectorPrefix,"-master-inner"),null!=v?v:""),style:null!=p?p:{},fixedClassName:(0,classnames_1.default)(null!=y?y:""),fixedStyle:null!=h?h:{},innerClassName:(0,classnames_1.default)(null!=x?x:""),innerStyle:null!=g?g:{},onChange:e},react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-master"),null!=d?d:""),style:__assign({},null!=m?m:{})},react_1.default.createElement(adhere_ui_stickuplayout_1.default,__assign({},l),N.map(I)))))}));CascadeCompared.displayName="CascadeCompared",exports.default=CascadeCompared;
//# sourceMappingURL=CascadeCompared.js.map
