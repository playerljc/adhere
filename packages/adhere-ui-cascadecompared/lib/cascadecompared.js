"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){e[r=void 0===r?a:r]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(require("react")),classnames_1=__importDefault(require("classnames")),iscroll_probe_1=__importDefault(require("iscroll/build/iscroll-probe")),adhere_ui_stickuplayout_1=__importDefault(require("@baifendian/adhere-ui-stickuplayout")),selectorPrefix="adhere-ui-cascadecompared",defaultCellWidth=120;function initTouch(){document.addEventListener("touchmove",function(e){e.preventDefault()},!!function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()&&{capture:!1,passive:!1})}initTouch();var CascadeCompared=function(e,t){var a,r=e.className,l=void 0===r?"":r,s=e.style,i=void 0===s?{}:s,n=e.indicatorClassName,c=void 0===n?"":n,o=e.indicatorStyle,u=void 0===o?{}:o,d=e.indicatorFixedWrapClassName,f=void 0===d?"":d,_=e.indicatorFixedWrapStyle,m=void 0===_?{}:_,v=e.indicatorAutoWrapClassName,y=void 0===v?"":v,p=e.indicatorAutoWrapStyle,h=void 0===p?{}:p,x=e.indicator,g=x.columns,r=void 0===g?[]:g,s=x.dataSource,N=void 0===s?{}:s,n=e.masterClassName,o=void 0===n?"":n,d=e.masterStyle,_=void 0===d?{}:d,v=e.masterInnerClassName,p=void 0===v?"":v,g=e.masterInnerStyle,x=void 0===g?{}:g,s=e.masterStickFixedClassName,n=void 0===s?"":s,d=e.masterStickFixedStyle,v=void 0===d?{}:d,g=e.masterStickInnerClassName,s=void 0===g?"":g,d=e.masterStickInnerStyle,g=void 0===d?{}:d,d=e.master,d=void 0===d?[]:d,e=e.onStickChange,P=react_1.useRef(null),E=react_1.useRef(null),C=react_1.useRef([]);function S(){for(var a=P.current.querySelectorAll("."+selectorPrefix+"-autoWrap"),e=0;e<C.current.length;e++)C.current[e].destroy();C.current=[];for(e=0;e<a.length;e++)!function(e){var t=new iscroll_probe_1.default(a[e],{probeType:3,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1});C.current.push(t),t.on("scroll",function(){for(var e=0;e<C.current.length;e++)C.current[e]!==t&&C.current[e].scrollTo(t.x,t.y)})}(e)}function W(e){var t=e.find(function(e){return e.isFixed});return t||(e.length?e[0]:null)}function b(e,t){return e?e.render?e.render(t[e.dataIndex],t):t[e.dataIndex]:null}function I(e,t){var a,r,l=e.title,s=void 0===l?void 0:l,i=e.className,n=e.style,c=void 0===n?{}:n;return react_1.default.createElement(adhere_ui_stickuplayout_1.default.Item,{key:t,className:classnames_1.default((void 0===i?"":i)||""),style:__assign({},c||{}),title:s,content:(t=void 0===(n=(l=e).dataSource)?[]:n,a=void 0===(i=l.columns)?[]:i,s=void 0===(c=l.fixedWrapClassName)?"":c,n=void 0===(e=l.fixedWrapStyle)?{}:e,c=void 0===(i=l.autoWrapClassName)?"":i,i=void 0===(e=l.autoWrapStyle)?{}:e,e=void 0===(e=l.autoInnerClassName)?"":e,l=void 0===(l=l.autoInnerStyle)?{}:l,r=W(a),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-fixedWrap",s||""),style:__assign(__assign({},n||{}),{width:(null==r?void 0:r.width)||defaultCellWidth})},t.map(function(e,t){return react_1.default.createElement("div",{key:t,className:selectorPrefix+"-item"},react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-cell",(null==r?void 0:r.className)||""),style:__assign({},(null==r?void 0:r.style)||{})},b(r,e)))})),react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-autoWrap",c||""),style:__assign({},i||{})},react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-autoInner",e||""),style:__assign({},l)},t.map(function(t,e){return react_1.default.createElement("div",{key:e,className:selectorPrefix+"-item"},a.filter(function(e){return e!==r}).map(function(e){return react_1.default.createElement("div",{key:e.dataIndex,className:classnames_1.default(selectorPrefix+"-cell",e.className||""),style:__assign(__assign({},e.style||{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},b(e,t))}))})))))})}return react_1.useImperativeHandle(t,function(){return{scrollToByIndex:function(e,t){E.current.scrollToByIndex(e,t=void 0===t?300:t)},scrollToByHeaderEl:function(e,t){E.current.scrollToByHeaderEl(e,t=void 0===t?300:t)},scrollToByColumn:function(e){var t=C.current[0],e=t.wrapper.querySelector("."+selectorPrefix+"-item ."+selectorPrefix+"-cell:nth-of-type("+e+")");t.scrollToElement(e)}}}),react_1.useLayoutEffect(function(){E.current.refresh(),S()}),react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix,l||""),style:__assign({},i||{}),ref:P},(a=W(r),react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-indicator",c||""),style:__assign({},u)},react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-fixedWrap",f||""),style:__assign(__assign({},m||{}),{width:(null==a?void 0:a.width)||defaultCellWidth})},react_1.default.createElement("div",{className:selectorPrefix+"-item"},react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-cell",(null==a?void 0:a.className)||""),style:__assign({},(null==a?void 0:a.style)||{})},b(a,N)))),react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-autoWrap",y||""),style:__assign({},h||{})},react_1.default.createElement("div",{className:selectorPrefix+"-item"},r.filter(function(e){return e!==a}).map(function(e){return react_1.default.createElement("div",{key:e.dataIndex,className:classnames_1.default(selectorPrefix+"-cell",e.className||""),style:__assign(__assign({},e.style||{}),{width:(null==e?void 0:e.width)||defaultCellWidth})},b(e,N))}))))),(e={ref:E,className:classnames_1.default(selectorPrefix+"-master-inner",p||""),style:__assign({},x||{}),fixedClassName:classnames_1.default(n||""),fixedStyle:__assign({},v||{}),innerClassName:classnames_1.default(s||""),innerStyle:__assign({},g||{}),onChange:e},react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-master",o||""),style:__assign({},_||{})},react_1.default.createElement(adhere_ui_stickuplayout_1.default,__assign({},e),d.map(I)))))};exports.default=react_1.forwardRef(CascadeCompared);
//# sourceMappingURL=cascadecompared.js.map
