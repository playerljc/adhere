{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tinycolor2_1 = __importDefault(require(\"tinycolor2\"));\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar defaultThemeMap = new Map([\n    // 品牌颜色\n    [\n        'adhere-color-primary',\n        {\n            value: '#2480ff',\n        },\n    ],\n    // 主文字颜色\n    [\n        'adhere-color-text-base',\n        {\n            value: '#000',\n            mapToken: new Map([\n                // 最深的文本色\n                ['adhere-color-text', { alpha: '0.88' }],\n                // 第二级文本\n                ['adhere-color-text-secondary', { alpha: '0.65' }],\n                // 第三级文本\n                ['adhere-color-text-tertiary', { alpha: '0.45' }],\n                // 第四级\n                ['adhere-color-text-quaternary', { alpha: '0.25' }],\n            ]),\n        },\n    ],\n    // 主背景颜色\n    [\n        'adhere-color-bg-base',\n        {\n            value: '#fff',\n        },\n    ],\n    // 主边框颜色\n    [\n        'adhere-color-border-base',\n        {\n            value: '#d9d9d9',\n        },\n    ],\n    // 主分割线颜色\n    [\n        'adhere-color-split-base',\n        {\n            value: '#f0f0f0',\n        },\n    ],\n    // 主字体大小\n    [\n        'adhere-font-size-base',\n        {\n            value: '14px',\n            mapToken: new Map([\n                [\n                    'adhere-font-size-lg',\n                    {\n                        calc: ' + 2px',\n                    },\n                ],\n                [\n                    'adhere-font-size-sm',\n                    {\n                        calc: '- 2px',\n                    },\n                ],\n                [\n                    'adhere-font-size-xl',\n                    {\n                        calc: '+ 6px',\n                    },\n                ],\n            ]),\n        },\n    ],\n    // 主层级最大值\n    [\n        'adhere-z-index-max-base',\n        {\n            value: '1999',\n        },\n    ],\n    // 主圆角大小\n    [\n        'adhere-border-radius-base',\n        {\n            value: '6px',\n        },\n    ],\n    // 用于控制组件边框、分割线等的宽度\n    [\n        'adhere-line-width',\n        {\n            value: '1px',\n        },\n    ],\n    // 用于控制组件边框、分割线等的样式，默认是实线\n    [\n        'adhere-line-type',\n        {\n            value: 'solid',\n        },\n    ],\n]);\n/**\n * init\n * @param theme\n * @param wrapperEL\n */\nvar init = function (theme, wrapperEL) {\n    if (wrapperEL === void 0) { wrapperEL = document.documentElement; }\n    // 当前变量\n    var cssVars = {};\n    var exportObj = {};\n    var curTheme = theme !== null && theme !== void 0 ? theme : {};\n    var keys = Array.from(defaultThemeMap.keys());\n    keys.forEach(function (varName) {\n        var _a, _b, _c;\n        // 小写的驼峰\n        // 例子: adhereColorPrimary\n        var varCamelCaseName = adhere_util_1.default.toCamelCase(varName, '-');\n        // 大写的驼峰\n        // 例子: AdhereColorPrimary\n        var varUpperCamelCaseName = adhere_util_1.default.toCamelCase(varName, '-', true);\n        var entryValue = defaultThemeMap.get(varName);\n        // cssVars定义驼峰变量\n        Object.defineProperty(cssVars, varCamelCaseName, {\n            set: function (value) {\n                var _a, _b, _c, _d;\n                // --------------定义css变量 -------------\n                wrapperEL.style.setProperty(\"--\".concat(varName), value);\n                if (!document.documentElement.style.getPropertyValue(\"--\".concat(varName))) {\n                    document.documentElement.style.setProperty(\"--\".concat(varName), value);\n                }\n                // 是颜色需要在定义一个-rgb的变量\n                var color = (0, tinycolor2_1.default)(value);\n                if (color.isValid()) {\n                    var rgb = color.toRgb();\n                    wrapperEL.style.setProperty(\"--\".concat(varName, \"-rgb\"), \"\".concat([rgb.r, rgb.g, rgb.b].join(',')));\n                    if (!document.documentElement.style.getPropertyValue(\"--\".concat(varName, \"-rgb\"))) {\n                        document.documentElement.style.setProperty(\"--\".concat(varName, \"-rgb\"), \"\".concat([rgb.r, rgb.g, rgb.b].join(',')));\n                    }\n                }\n                // 处理mapToken\n                if (!(entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken))\n                    return;\n                (_d = (_c = Array.from((_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.keys) === null || _b === void 0 ? void 0 : _b.call(_a))) === null || _c === void 0 ? void 0 : _c.forEach) === null || _d === void 0 ? void 0 : _d.call(_c, function (mapTokenVarName) {\n                    var _a, _b;\n                    var mapTokenVEntryValue = (_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.get) === null || _b === void 0 ? void 0 : _b.call(_a, mapTokenVarName);\n                    if (mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha) {\n                        color.setAlpha(Number.parseFloat(mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha));\n                        wrapperEL.style.setProperty(\"--\".concat(mapTokenVarName), color.toPercentageRgbString());\n                        if (!document.documentElement.style.getPropertyValue(\"--\".concat(mapTokenVarName))) {\n                            document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), color.toPercentageRgbString());\n                        }\n                    }\n                    if (mapTokenVEntryValue.calc) {\n                        wrapperEL.style.setProperty(\"--\".concat(mapTokenVarName), \"calc(\".concat(value, \" \").concat(mapTokenVEntryValue.calc, \")\"));\n                        if (!document.documentElement.style.getPropertyValue(\"--\".concat(mapTokenVarName))) {\n                            document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), \"calc(\".concat(value, \" \").concat(mapTokenVEntryValue.calc, \")\"));\n                        }\n                    }\n                });\n            },\n        });\n        // 定义导出变量\n        exportObj[\"set\".concat(varUpperCamelCaseName)] = function (value) {\n            cssVars[varCamelCaseName] = value;\n        };\n        // 定义导出变量\n        exportObj[\"get\".concat(varUpperCamelCaseName)] = function () {\n            return wrapperEL.style.getPropertyValue(\"--\".concat(varName));\n        };\n        // -----------------------------------------------------------------------------------------\n        // ColorPrimary\n        (_a = exportObj === null || exportObj === void 0 ? void 0 : exportObj[\"set\".concat(varUpperCamelCaseName)]) === null || _a === void 0 ? void 0 : _a.call(exportObj, (_b = curTheme[adhere_util_1.default.lowercaseInitial(varUpperCamelCaseName.substring(varUpperCamelCaseName.indexOf('Adhere') + 'Adhere'.length))]) !== null && _b !== void 0 ? _b : (_c = defaultThemeMap.get(varName)) === null || _c === void 0 ? void 0 : _c.value);\n    });\n    // keys.forEach((varName) => {\n    //   // varName === adhere-color-primary\n    //\n    //   // AdhereColorPrimary\n    //   const varCamelCaseName = Util.toCamelCase(varName, '-', true);\n    //\n    //   // ColorPrimary\n    //   const inputName = Util.lowercaseInitial(\n    //     varCamelCaseName.substring(varCamelCaseName.indexOf('Adhere') + 'Adhere'.length),\n    //   );\n    //\n    //   exportObj?.[`set${varCamelCaseName}`]?.(\n    //     curTheme[inputName] ?? defaultThemeMap.get(varName)?.value,\n    //   );\n    // });\n};\n/**\n * theme\n * {\n *   colorPrimary\n * }\n * @param theme\n */\nexports.default = init;\n"],"names":["__importDefault","this","mod","__esModule","default","tinycolor2_1","Object","defineProperty","exports","value","require","adhere_util_1","defaultThemeMap","Map","mapToken","alpha","calc","init","theme","wrapperEL","document","documentElement","cssVars","exportObj","curTheme","Array","from","keys","forEach","varName","_b","varCamelCaseName","toCamelCase","varUpperCamelCaseName","entryValue","get","set","style","setProperty","concat","getPropertyValue","_c","rgb","color","isValid","toRgb","r","g","b","join","_d","_a","call","mapTokenVarName","mapTokenVEntryValue","setAlpha","Number","parseFloat","toPercentageRgbString","lowercaseInitial","substring","indexOf","length"],"mappings":"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"}