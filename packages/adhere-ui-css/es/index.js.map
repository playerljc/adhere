{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["import tinyColor from 'tinycolor2';\nimport Util from '@baifendian/adhere-util';\nvar defaultThemeMap = new Map([\n    // 品牌颜色\n    [\n        'adhere-color-primary',\n        {\n            value: '#2480ff',\n        },\n    ],\n    // 主文字颜色\n    [\n        'adhere-color-text-base',\n        {\n            value: '#000',\n            mapToken: new Map([\n                // 最深的文本色\n                ['adhere-color-text', { alpha: '0.88' }],\n                // 第二级文本\n                ['adhere-color-text-secondary', { alpha: '0.65' }],\n                // 第三级文本\n                ['adhere-color-text-tertiary', { alpha: '0.45' }],\n                // 第四级\n                ['adhere-color-text-quaternary', { alpha: '0.25' }],\n            ]),\n        },\n    ],\n    // 主背景颜色\n    [\n        'adhere-color-bg-base',\n        {\n            value: '#fff',\n        },\n    ],\n    // 主边框颜色\n    [\n        'adhere-color-border-base',\n        {\n            value: '#d9d9d9',\n        },\n    ],\n    // 主分割线颜色\n    [\n        'adhere-color-split-base',\n        {\n            value: '#f0f0f0',\n        },\n    ],\n    // 主字体大小\n    [\n        'adhere-font-size-base',\n        {\n            value: '14px',\n            mapToken: new Map([\n                [\n                    'adhere-font-size-lg',\n                    {\n                        calc: ' + 2px',\n                    },\n                ],\n                [\n                    'adhere-font-size-sm',\n                    {\n                        calc: '- 2px',\n                    },\n                ],\n                [\n                    'adhere-font-size-xl',\n                    {\n                        calc: '+ 6px',\n                    },\n                ],\n            ]),\n        },\n    ],\n    // 主层级最大值\n    [\n        'adhere-z-index-max-base',\n        {\n            value: '1999',\n        },\n    ],\n    // 主圆角大小\n    [\n        'adhere-border-radius-base',\n        {\n            value: '6px',\n        },\n    ],\n    // 用于控制组件边框、分割线等的宽度\n    [\n        'adhere-line-width',\n        {\n            value: '1px',\n        },\n    ],\n    // 用于控制组件边框、分割线等的样式，默认是实线\n    [\n        'adhere-line-type',\n        {\n            value: 'solid',\n        },\n    ],\n    // DPR\n    [\n        'adhere-device-pixel-ratio',\n        {\n            value: window.devicePixelRatio,\n        },\n    ],\n]);\n/**\n * init\n * @param theme\n * @param wrapperEL\n */\nvar init = function (theme, wrapperEL) {\n    if (wrapperEL === void 0) { wrapperEL = document.documentElement; }\n    // 当前变量\n    var cssVars = {};\n    var exportObj = {};\n    var curTheme = theme !== null && theme !== void 0 ? theme : {};\n    var keys = Array.from(defaultThemeMap.keys());\n    keys.forEach(function (varName) {\n        var _a, _b, _c;\n        // 小写的驼峰\n        // 例子: adhereColorPrimary\n        var varCamelCaseName = Util.toCamelCase(varName, '-');\n        // 大写的驼峰\n        // 例子: AdhereColorPrimary\n        var varUpperCamelCaseName = Util.toCamelCase(varName, '-', true);\n        var entryValue = defaultThemeMap.get(varName);\n        // cssVars定义驼峰变量\n        Object.defineProperty(cssVars, varCamelCaseName, {\n            set: function (value) {\n                var _a, _b, _c, _d;\n                // --------------定义css变量 -------------\n                wrapperEL.style.setProperty(\"--\".concat(varName), value);\n                if (!document.documentElement.style.getPropertyValue(\"--\".concat(varName))) {\n                    document.documentElement.style.setProperty(\"--\".concat(varName), value);\n                }\n                // 是颜色需要在定义一个-rgb的变量\n                var color = tinyColor(value);\n                if (color.isValid()) {\n                    var rgb = color.toRgb();\n                    wrapperEL.style.setProperty(\"--\".concat(varName, \"-rgb\"), \"\".concat([rgb.r, rgb.g, rgb.b].join(',')));\n                    if (!document.documentElement.style.getPropertyValue(\"--\".concat(varName, \"-rgb\"))) {\n                        document.documentElement.style.setProperty(\"--\".concat(varName, \"-rgb\"), \"\".concat([rgb.r, rgb.g, rgb.b].join(',')));\n                    }\n                }\n                // 处理mapToken\n                if (!(entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken))\n                    return;\n                (_d = (_c = Array.from((_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.keys) === null || _b === void 0 ? void 0 : _b.call(_a))) === null || _c === void 0 ? void 0 : _c.forEach) === null || _d === void 0 ? void 0 : _d.call(_c, function (mapTokenVarName) {\n                    var _a, _b;\n                    var mapTokenVEntryValue = (_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.get) === null || _b === void 0 ? void 0 : _b.call(_a, mapTokenVarName);\n                    if (mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha) {\n                        color.setAlpha(Number.parseFloat(mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha));\n                        wrapperEL.style.setProperty(\"--\".concat(mapTokenVarName), color.toPercentageRgbString());\n                        if (!document.documentElement.style.getPropertyValue(\"--\".concat(mapTokenVarName))) {\n                            document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), color.toPercentageRgbString());\n                        }\n                    }\n                    if (mapTokenVEntryValue.calc) {\n                        wrapperEL.style.setProperty(\"--\".concat(mapTokenVarName), \"calc(\".concat(value, \" \").concat(mapTokenVEntryValue.calc, \")\"));\n                        if (!document.documentElement.style.getPropertyValue(\"--\".concat(mapTokenVarName))) {\n                            document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), \"calc(\".concat(value, \" \").concat(mapTokenVEntryValue.calc, \")\"));\n                        }\n                    }\n                });\n            },\n        });\n        // 定义导出变量\n        exportObj[\"set\".concat(varUpperCamelCaseName)] = function (value) {\n            cssVars[varCamelCaseName] = value;\n        };\n        // 定义导出变量\n        exportObj[\"get\".concat(varUpperCamelCaseName)] = function () {\n            return wrapperEL.style.getPropertyValue(\"--\".concat(varName));\n        };\n        // -----------------------------------------------------------------------------------------\n        // ColorPrimary\n        (_a = exportObj === null || exportObj === void 0 ? void 0 : exportObj[\"set\".concat(varUpperCamelCaseName)]) === null || _a === void 0 ? void 0 : _a.call(exportObj, (_b = curTheme[Util.lowercaseInitial(varUpperCamelCaseName.substring(varUpperCamelCaseName.indexOf('Adhere') + 'Adhere'.length))]) !== null && _b !== void 0 ? _b : (_c = defaultThemeMap.get(varName)) === null || _c === void 0 ? void 0 : _c.value);\n    });\n    // keys.forEach((varName) => {\n    //   // varName === adhere-color-primary\n    //\n    //   // AdhereColorPrimary\n    //   const varCamelCaseName = Util.toCamelCase(varName, '-', true);\n    //\n    //   // ColorPrimary\n    //   const inputName = Util.lowercaseInitial(\n    //     varCamelCaseName.substring(varCamelCaseName.indexOf('Adhere') + 'Adhere'.length),\n    //   );\n    //\n    //   exportObj?.[`set${varCamelCaseName}`]?.(\n    //     curTheme[inputName] ?? defaultThemeMap.get(varName)?.value,\n    //   );\n    // });\n};\n/**\n * theme\n * {\n *   colorPrimary\n * }\n * @param theme\n */\nexport default init;\n"],"names":["tinyColor","Util","defaultThemeMap","Map","value","mapToken","alpha","calc","window","devicePixelRatio","init","theme","wrapperEL","document","documentElement","cssVars","exportObj","curTheme","Array","from","keys","forEach","varName","_b","varCamelCaseName","toCamelCase","varUpperCamelCaseName","entryValue","get","Object","defineProperty","set","style","setProperty","concat","getPropertyValue","_c","rgb","color","isValid","toRgb","r","g","b","join","_d","_a","call","mapTokenVarName","mapTokenVEntryValue","setAlpha","Number","parseFloat","toPercentageRgbString","lowercaseInitial","substring","indexOf","length"],"mappings":"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"}