{"version":3,"file":"globalindicator.js","sources":["globalindicator.js"],"sourcesContent":["import { Spinner } from 'spin.js';\nimport Resource from '@baifendian/adhere-util-resource';\nvar selectorPrefix = 'adhere-ui-global-indicator';\nvar MAX_ZINDEX = Resource.Dict.value.ResourceNormalMaxZIndex.value;\nvar handlers = new Set();\nexport default {\n    /**\n     * show - 显示一个遮罩\n     * @param {HTMLElement} parent\n     * @param {string} text\n     * @param {number} zIndex\n     * @param size\n     * @return {HTMLElement}\n     */\n    show: function (parent, text, zIndex, size) {\n        if (parent === void 0) { parent = document.body; }\n        if (text === void 0) { text = ''; }\n        if (zIndex === void 0) { zIndex = MAX_ZINDEX; }\n        if (size === void 0) { size = 'default'; }\n        var el = document.createElement('div');\n        el.innerHTML = \"\\n      <div class=\\\"\".concat(selectorPrefix, \"\\\" style=\\\"z-index: \").concat(zIndex || MAX_ZINDEX, \"\\\">\\n       <span class=\\\"\").concat(selectorPrefix, \"-dot\\\"></span>\\n       \").concat(text && \"<div class=\\\"\".concat(selectorPrefix, \"-text\\\">\").concat(text, \"</div>\"), \"\\n      </div>\");\n        var indicatorDom = el.firstElementChild;\n        var dotDom = indicatorDom.querySelector(\".\".concat(selectorPrefix, \"-dot\"));\n        var scaleMap = new Map([\n            ['small', 0.1],\n            ['default', 0.2],\n            ['large', 0.3],\n        ]);\n        var scale = scaleMap.get(size);\n        var color = document.documentElement.style.getPropertyValue(\"--adhere-color-primary\");\n        new Spinner({\n            lines: 4,\n            length: 0,\n            width: 52,\n            radius: 29,\n            scale: scale,\n            corners: 1,\n            speed: 2.1,\n            rotate: 19,\n            animation: 'spinner-line-fade-quick',\n            direction: 1,\n            color: color,\n            fadeColor: 'transparent',\n            top: '46%',\n            left: '50%',\n            shadow: '0 0 1px transparent',\n            zIndex: zIndex,\n            className: \"\".concat(selectorPrefix, \"-spinner\"),\n            position: 'absolute', // Element positioning\n        }).spin(dotDom);\n        if (parent === document.body) {\n            indicatorDom.style.position = 'fixed';\n        }\n        parent.appendChild(indicatorDom);\n        handlers.add(indicatorDom);\n        return indicatorDom;\n    },\n    /**\n     * hide - 取消一个遮罩\n     * @param {HTMLElement} indicatorDom\n     */\n    hide: function (indicatorDom) {\n        var _a, _b;\n        if (indicatorDom) {\n            try {\n                (_b = (_a = indicatorDom === null || indicatorDom === void 0 ? void 0 : indicatorDom.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, indicatorDom);\n                handlers.delete(indicatorDom);\n            }\n            catch (e) { }\n        }\n    },\n    /**\n     * hideAll - 隐藏所有遮罩\n     */\n    hideAll: function () {\n        var values = Array.from(handlers.values());\n        values.forEach(function (el) {\n            var _a, _b;\n            try {\n                (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n            }\n            catch (e) { }\n        });\n        handlers.clear();\n    },\n};\n"],"names":["Spinner","Resource","selectorPrefix","MAX_ZINDEX","Dict","value","ResourceNormalMaxZIndex","handlers","Set","show","parent","text","zIndex","size","document","body","el","createElement","indicatorDom","innerHTML","concat","firstElementChild","dotDom","querySelector","scale","Map","get","color","documentElement","style","getPropertyValue","lines","length","width","radius","corners","speed","rotate","animation","direction","fadeColor","top","left","shadow","className","position","spin","appendChild","add","hide","_a","_b","parentElement","removeChild","call","delete","e","hideAll","Array","from","values","forEach","clear"],"mappings":"OAASA,OAAwB,KAAT,iBACjBC,aAAc,mCACrB,IAAIC,eAAiB,6BACjBC,WAAaF,SAASG,KAAKC,MAAMC,wBAAwBD,MACzDE,SAAW,IAAIC,kBACJ,CASXC,KAAM,SAAUC,EAAQC,EAAMC,EAAQC,GACnB,KAAA,IAAXH,IAAqBA,EAASI,SAASC,MAC9B,KAAA,IAATJ,IAAmBA,EAAO,IACf,KAAA,IAAXC,IAAqBA,EAAST,YACrB,KAAA,IAATU,IAAmBA,EAAO,WAC9B,IAAIG,EAAKF,SAASG,cAAc,KAAK,EAEjCC,GADJF,EAAGG,UAAY,uBAAwBC,OAAOlB,eAAgB,oBAAsB,EAAEkB,OAAOR,GAAUT,WAAY,0BAA4B,EAAEiB,OAAOlB,eAAgB,wBAAyB,EAAEkB,OAAOT,GAAQ,eAAgBS,OAAOlB,eAAgB,SAAU,EAAEkB,OAAOT,EAAM,QAAQ,EAAG,gBAAgB,EAC1RK,EAAGK,mBAClBC,EAASJ,EAAaK,cAAc,IAAIH,OAAOlB,eAAgB,MAAM,CAAC,EAMtEsB,EALW,IAAIC,IAAI,CACnB,CAAC,QAAS,IACV,CAAC,UAAW,IACZ,CAAC,QAAS,IACb,EACoBC,IAAIb,CAAI,EACzBc,EAAQb,SAASc,gBAAgBC,MAAMC,iBAAiB,wBAAwB,EA0BpF,OAzBA,IAAI9B,QAAQ,CACR+B,MAAO,EACPC,OAAQ,EACRC,MAAO,GACPC,OAAQ,GACRV,MAAOA,EACPW,QAAS,EACTC,MAAO,IACPC,OAAQ,GACRC,UAAW,0BACXC,UAAW,EACXZ,MAAOA,EACPa,UAAW,cACXC,IAAK,MACLC,KAAM,MACNC,OAAQ,sBACR/B,OAAQA,EACRgC,UAAW,GAAGxB,OAAOlB,eAAgB,UAAU,EAC/C2C,SAAU,UACd,CAAC,EAAEC,KAAKxB,CAAM,EACVZ,IAAWI,SAASC,OACpBG,EAAaW,MAAMgB,SAAW,SAElCnC,EAAOqC,YAAY7B,CAAY,EAC/BX,SAASyC,IAAI9B,CAAY,EAClBA,CACX,EAKA+B,KAAM,SAAU/B,GACZ,IAAIgC,EAAIC,EACR,GAAIjC,EACA,IACI,OAACiC,EAAK,OAACD,EAAKhC,MAAAA,EAAmD,KAAA,EAASA,EAAakC,eAA2C,KAAA,EAASF,EAAGG,cAAkDF,EAAGG,KAAKJ,EAAIhC,CAAY,EACtNX,SAASgD,OAAOrC,CAAY,CAEpB,CAAZ,MAAOsC,IAEf,EAIAC,QAAS,WACQC,MAAMC,KAAKpD,SAASqD,OAAO,CAAC,EAClCC,QAAQ,SAAU7C,GACrB,IAAIkC,EAAIC,EACR,IACI,OAACA,EAAK,OAACD,EAAKlC,MAAAA,EAA+B,KAAA,EAASA,EAAGoC,eAA2C,KAAA,EAASF,EAAGG,cAAkDF,EAAGG,KAAKJ,EAAIlC,CAAE,CAEtK,CAAZ,MAAOwC,IACX,CAAC,EACDjD,SAASuD,MAAM,CACnB,CACJ"}