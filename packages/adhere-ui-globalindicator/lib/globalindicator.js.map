{"version":3,"file":"globalindicator.js","sources":["globalindicator.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar spin_js_1 = require(\"spin.js\");\nvar adhere_util_resource_1 = __importDefault(require(\"@baifendian/adhere-util-resource\"));\nvar selectorPrefix = 'adhere-ui-global-indicator';\nvar MAX_ZINDEX = adhere_util_resource_1.default.Dict.value.ResourceNormalMaxZIndex.value;\nvar handlers = new Set();\nexports.default = {\n    /**\n     * show - 显示一个遮罩\n     * @param {HTMLElement} parent\n     * @param {string} text\n     * @param {number} zIndex\n     * @param size\n     * @return {HTMLElement}\n     */\n    show: function (parent, text, zIndex, size) {\n        if (parent === void 0) { parent = document.body; }\n        if (text === void 0) { text = ''; }\n        if (zIndex === void 0) { zIndex = MAX_ZINDEX; }\n        if (size === void 0) { size = 'default'; }\n        var el = document.createElement('div');\n        el.innerHTML = \"\\n      <div class=\\\"\".concat(selectorPrefix, \"\\\" style=\\\"z-index: \").concat(zIndex || MAX_ZINDEX, \"\\\">\\n       <span class=\\\"\").concat(selectorPrefix, \"-dot\\\"></span>\\n       \").concat(text && \"<div class=\\\"\".concat(selectorPrefix, \"-text\\\">\").concat(text, \"</div>\"), \"\\n      </div>\");\n        var indicatorDom = el.firstElementChild;\n        var dotDom = indicatorDom.querySelector(\".\".concat(selectorPrefix, \"-dot\"));\n        var scaleMap = new Map([\n            ['small', 0.1],\n            ['default', 0.2],\n            ['large', 0.3],\n        ]);\n        var scale = scaleMap.get(size);\n        var color = document.documentElement.style.getPropertyValue(\"--adhere-color-primary\");\n        new spin_js_1.Spinner({\n            lines: 4,\n            length: 0,\n            width: 52,\n            radius: 29,\n            scale: scale,\n            corners: 1,\n            speed: 2.1,\n            rotate: 19,\n            animation: 'spinner-line-fade-quick',\n            direction: 1,\n            color: color,\n            fadeColor: 'transparent',\n            top: '46%',\n            left: '50%',\n            shadow: '0 0 1px transparent',\n            zIndex: zIndex,\n            className: \"\".concat(selectorPrefix, \"-spinner\"),\n            position: 'absolute', // Element positioning\n        }).spin(dotDom);\n        if (parent === document.body) {\n            indicatorDom.style.position = 'fixed';\n        }\n        parent.appendChild(indicatorDom);\n        handlers.add(indicatorDom);\n        return indicatorDom;\n    },\n    /**\n     * hide - 取消一个遮罩\n     * @param {HTMLElement} indicatorDom\n     */\n    hide: function (indicatorDom) {\n        var _a, _b;\n        if (indicatorDom) {\n            try {\n                (_b = (_a = indicatorDom === null || indicatorDom === void 0 ? void 0 : indicatorDom.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, indicatorDom);\n                handlers.delete(indicatorDom);\n            }\n            catch (e) { }\n        }\n    },\n    /**\n     * hideAll - 隐藏所有遮罩\n     */\n    hideAll: function () {\n        var values = Array.from(handlers.values());\n        values.forEach(function (el) {\n            var _a, _b;\n            try {\n                (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n            }\n            catch (e) { }\n        });\n        handlers.clear();\n    },\n};\n"],"names":["__importDefault","this","mod","__esModule","default","spin_js_1","Object","defineProperty","exports","value","require","adhere_util_resource_1","selectorPrefix","MAX_ZINDEX","Dict","ResourceNormalMaxZIndex","handlers","Set","show","parent","text","zIndex","size","document","body","el","createElement","indicatorDom","innerHTML","concat","firstElementChild","dotDom","querySelector","scale","Map","get","color","documentElement","style","getPropertyValue","Spinner","lines","length","width","radius","corners","speed","rotate","animation","direction","fadeColor","top","left","shadow","className","position","spin","appendChild","add","hide","_a","_b","parentElement","removeChild","call","delete","e","hideAll","Array","from","values","forEach","clear"],"mappings":"AAAA,aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAEIG,WADJC,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5CC,QAAQ,SAAS,GAC7BC,uBAAyBX,gBAAgBU,QAAQ,kCAAkC,CAAC,EACpFE,eAAiB,6BACjBC,WAAaF,uBAAuBP,QAAQU,KAAKL,MAAMM,wBAAwBN,MAC/EO,SAAW,IAAIC,IACnBT,QAAQJ,QAAU,CASdc,KAAM,SAAUC,EAAQC,EAAMC,EAAQC,GACnB,KAAA,IAAXH,IAAqBA,EAASI,SAASC,MAC9B,KAAA,IAATJ,IAAmBA,EAAO,IACf,KAAA,IAAXC,IAAqBA,EAASR,YACrB,KAAA,IAATS,IAAmBA,EAAO,WAC9B,IAAIG,EAAKF,SAASG,cAAc,KAAK,EAEjCC,GADJF,EAAGG,UAAY,uBAAwBC,OAAOjB,eAAgB,oBAAsB,EAAEiB,OAAOR,GAAUR,WAAY,0BAA4B,EAAEgB,OAAOjB,eAAgB,wBAAyB,EAAEiB,OAAOT,GAAQ,eAAgBS,OAAOjB,eAAgB,SAAU,EAAEiB,OAAOT,EAAM,QAAQ,EAAG,gBAAgB,EAC1RK,EAAGK,mBAClBC,EAASJ,EAAaK,cAAc,IAAIH,OAAOjB,eAAgB,MAAM,CAAC,EAMtEqB,EALW,IAAIC,IAAI,CACnB,CAAC,QAAS,IACV,CAAC,UAAW,IACZ,CAAC,QAAS,IACb,EACoBC,IAAIb,CAAI,EACzBc,EAAQb,SAASc,gBAAgBC,MAAMC,iBAAiB,wBAAwB,EA0BpF,OAzBA,IAAIlC,UAAUmC,QAAQ,CAClBC,MAAO,EACPC,OAAQ,EACRC,MAAO,GACPC,OAAQ,GACRX,MAAOA,EACPY,QAAS,EACTC,MAAO,IACPC,OAAQ,GACRC,UAAW,0BACXC,UAAW,EACXb,MAAOA,EACPc,UAAW,cACXC,IAAK,MACLC,KAAM,MACNC,OAAQ,sBACRhC,OAAQA,EACRiC,UAAW,GAAGzB,OAAOjB,eAAgB,UAAU,EAC/C2C,SAAU,UACd,CAAC,EAAEC,KAAKzB,CAAM,EACVZ,IAAWI,SAASC,OACpBG,EAAaW,MAAMiB,SAAW,SAElCpC,EAAOsC,YAAY9B,CAAY,EAC/BX,SAAS0C,IAAI/B,CAAY,EAClBA,CACX,EAKAgC,KAAM,SAAUhC,GACZ,IAAIiC,EAAIC,EACR,GAAIlC,EACA,IACI,OAACkC,EAAK,OAACD,EAAKjC,MAAAA,EAAmD,KAAA,EAASA,EAAamC,eAA2C,KAAA,EAASF,EAAGG,cAAkDF,EAAGG,KAAKJ,EAAIjC,CAAY,EACtNX,SAASiD,OAAOtC,CAAY,CAEpB,CAAZ,MAAOuC,IAEf,EAIAC,QAAS,WACQC,MAAMC,KAAKrD,SAASsD,OAAO,CAAC,EAClCC,QAAQ,SAAU9C,GACrB,IAAImC,EAAIC,EACR,IACI,OAACA,EAAK,OAACD,EAAKnC,MAAAA,EAA+B,KAAA,EAASA,EAAGqC,eAA2C,KAAA,EAASF,EAAGG,cAAkDF,EAAGG,KAAKJ,EAAInC,CAAE,CAEtK,CAAZ,MAAOyC,IACX,CAAC,EACDlD,SAASwD,MAAM,CACnB,CACJ"}