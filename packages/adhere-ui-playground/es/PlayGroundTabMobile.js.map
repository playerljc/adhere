{"version":3,"file":"PlayGroundTabMobile.js","sources":["PlayGroundTabMobile.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport classNames from 'classnames';\nimport QRCode from 'qrcode';\nimport React from 'react';\nimport { FullscreenOutlined, QrcodeOutlined, ReloadOutlined } from '@ant-design/icons';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport APlayGround, { APlayGroundDefaultProps, APlayGroundPropTypes } from './APlayGround';\nimport { selectPrefix } from './APlayGround';\nimport Card from './Card';\nimport CodeTabPanel, { CodeTabPanelDefaultProps, CodeTabPanelPropTypes } from './CodeTabPanel';\n/**\n * PlayGroundTabMobile\n * @class PlayGroundTabMobile\n * @classdesc PlayGroundTabMobile\n */\nvar PlayGroundTabMobile = /** @class */ (function (_super) {\n    __extends(PlayGroundTabMobile, _super);\n    function PlayGroundTabMobile(props) {\n        var _this = _super.call(this, props) || this;\n        Object.assign(_this.state, {\n            activeKey: props.active,\n            iframeCount: 0,\n        });\n        return _this;\n    }\n    PlayGroundTabMobile.prototype.componentWillReceiveProps = function (nextProps) {\n        _super.prototype.componentWillReceiveProps.call(this, nextProps);\n        this.setState({\n            activeKey: nextProps.active,\n            iframeCount: nextProps.iframeCount,\n        });\n    };\n    /**\n     * renderAction\n     */\n    PlayGroundTabMobile.prototype.renderAction = function () {\n        var _this = this;\n        return this.actionConfig.slice(0, 1).map(function (config) { return config.call(_this); });\n    };\n    /**\n     * renderCodeView - 代码展示视图\n     * @return {*}\n     */\n    PlayGroundTabMobile.prototype.renderCodeView = function () {\n        var _this = this;\n        var activeKey = this.state.activeKey;\n        var isFirst = this.isFirst;\n        var _a = this.props, cardProps = _a.cardProps, id = _a.id, isActive = _a.isActive, restProps = __rest(_a, [\"cardProps\", \"id\", \"isActive\"]);\n        return (React.createElement(ConditionalRender, { conditional: isFirst, noMatch: function () { return (React.createElement(Card, null,\n                React.createElement(CodeTabPanel, __assign({}, restProps, { active: activeKey, onChange: function (key) {\n                        return _this.setState({\n                            activeKey: key,\n                        });\n                    } })))); } }, function () { return (React.createElement(Card, null,\n            React.createElement(CodeTabPanel, __assign({}, restProps, { active: activeKey, onChange: function (key) {\n                    return _this.setState({\n                        activeKey: key,\n                    });\n                } })))); }));\n    };\n    /**\n     * getClipboardText\n     */\n    PlayGroundTabMobile.prototype.getClipboardText = function () {\n        var config = this.props.config;\n        var activeKey = this.state.activeKey;\n        var item = config === null || config === void 0 ? void 0 : config.find(function (c) { return c.key === activeKey; });\n        return Promise.resolve(item ? item.codeText : '');\n    };\n    /**\n     * render\n     * @return {*}\n     */\n    PlayGroundTabMobile.prototype.render = function () {\n        var _a;\n        var _this = this;\n        var _b = this.props, cardProps = _b.cardProps, isActive = _b.isActive, id = _b.id, url = _b.url, className = _b.className, style = _b.style, bodyClassName = _b.bodyClassName, bodyStyle = _b.bodyStyle, displayClassName = _b.displayClassName, displayBodyStyle = _b.displayBodyStyle;\n        var idProps = {\n            id: id,\n        };\n        return (React.createElement(\"div\", __assign({}, idProps, { className: classNames(selectPrefix, \"\".concat(selectPrefix, \"-mobile\"), className !== null && className !== void 0 ? className : '', (_a = {},\n                _a[\"\".concat(selectPrefix, \"-active\")] = isActive,\n                _a)), style: style !== null && style !== void 0 ? style : {} }),\n            this.state.qrcode && (React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-qr-code-mask\"), onClick: function () {\n                    console.log('click qr mask');\n                    _this.setState({\n                        qrcode: undefined,\n                    });\n                } })),\n            React.createElement(\"div\", { className: classNames(\"\".concat(selectPrefix, \"-mobile-body\"), bodyClassName !== null && bodyClassName !== void 0 ? bodyClassName : ''), style: bodyStyle !== null && bodyStyle !== void 0 ? bodyStyle : {} },\n                React.createElement(Card, __assign({ actions: this.renderAction() }, (cardProps !== null && cardProps !== void 0 ? cardProps : {})), this.renderCodeView())),\n            React.createElement(\"div\", { className: classNames(\"\".concat(selectPrefix, \"-mobile-display\"), displayClassName !== null && displayClassName !== void 0 ? displayClassName : ''), style: displayBodyStyle !== null && displayBodyStyle !== void 0 ? displayBodyStyle : {} },\n                React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-inner\") },\n                    React.createElement(\"iframe\", { src: url, key: this.state.iframeCount })),\n                React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-actions\") },\n                    React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-action\"), onClick: function () {\n                            _this.setState({\n                                iframeCount: _this.state.iframeCount + 1,\n                            });\n                        } },\n                        React.createElement(ReloadOutlined, null)),\n                    React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-action\"), onClick: function () {\n                            // With promises\n                            QRCode.toDataURL(url)\n                                .then(function (_url) {\n                                _this.setState({\n                                    qrcode: _url,\n                                });\n                            })\n                                .catch(function (err) {\n                                console.error(err);\n                            });\n                        } },\n                        this.state.qrcode && (React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-qr-code\") },\n                            React.createElement(\"img\", { src: this.state.qrcode, alt: \"\" }))),\n                        React.createElement(QrcodeOutlined, null)),\n                    React.createElement(\"div\", { className: \"\".concat(selectPrefix, \"-mobile-display-action\"), onClick: function () {\n                            window.open(url);\n                        } },\n                        React.createElement(FullscreenOutlined, null))))));\n    };\n    return PlayGroundTabMobile;\n}(APlayGround));\nexport var PlayGroundTabDefaultProps = __assign(__assign({ url: '' }, APlayGroundDefaultProps), CodeTabPanelDefaultProps);\nexport var PlayGroundTabPropTypes = __assign(__assign({}, APlayGroundPropTypes), CodeTabPanelPropTypes);\nPlayGroundTabMobile.defaultProps = PlayGroundTabDefaultProps;\nPlayGroundTabMobile.propTypes = PlayGroundTabPropTypes;\nexport default PlayGroundTabMobile;\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","QRCode","React","FullscreenOutlined","QrcodeOutlined","ReloadOutlined","ConditionalRender","APlayGround","APlayGroundDefaultProps","APlayGroundPropTypes","selectPrefix","Card","CodeTabPanel","CodeTabPanelDefaultProps","CodeTabPanelPropTypes","PlayGroundTabMobile","_super","props","_this","state","activeKey","active","iframeCount","componentWillReceiveProps","nextProps","setState","renderAction","actionConfig","slice","map","config","renderCodeView","isFirst","_a","restProps","cardProps","id","isActive","createElement","conditional","noMatch","onChange","key","getClipboardText","item","find","c","Promise","resolve","codeText","render","_b","url","className","style","bodyClassName","bodyStyle","displayClassName","displayBodyStyle","concat","qrcode","onClick","console","log","undefined","actions","src","toDataURL","then","_url","catch","err","error","alt","window","open","PlayGroundTabDefaultProps","PlayGroundTabPropTypes","defaultProps","propTypes"],"mappings":"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"}