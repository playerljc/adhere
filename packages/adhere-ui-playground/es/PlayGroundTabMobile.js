var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var a={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]]);return a};import classNames from"classnames";import QRCode from"qrcode";import React from"react";import{FullscreenOutlined,QrcodeOutlined,ReloadOutlined}from"@ant-design/icons";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import APlayGround,{APlayGroundDefaultProps,APlayGroundPropTypes}from"./APlayGround";import{selectPrefix}from"./APlayGround";import Card from"./Card";import CodeTabPanel,{CodeTabPanelDefaultProps,CodeTabPanelPropTypes}from"./CodeTabPanel";var PlayGroundTabMobile=function(a){function e(e){var t=a.call(this,e)||this;return Object.assign(t.state,{activeKey:e.active,iframeCount:0}),t}return __extends(e,a),e.prototype.componentWillReceiveProps=function(e){a.prototype.componentWillReceiveProps.call(this,e),this.setState({activeKey:e.active,iframeCount:e.iframeCount})},e.prototype.renderAction=function(){var t=this;return this.actionConfig.slice(0,1).map(function(e){return e.call(t)})},e.prototype.renderCodeView=function(){var t=this,e=this.state.activeKey,a=this.isFirst,n=this.props,o=(n.cardProps,n.id,n.isActive,__rest(n,["cardProps","id","isActive"]));return React.createElement(ConditionalRender,{conditional:a,noMatch:function(){return React.createElement(Card,null,React.createElement(CodeTabPanel,__assign({},o,{active:e,onChange:function(e){return t.setState({activeKey:e})}})))}},function(){return React.createElement(Card,null,React.createElement(CodeTabPanel,__assign({},o,{active:e,onChange:function(e){return t.setState({activeKey:e})}})))})},e.prototype.getClipboardText=function(){var e=this.props.config,t=this.state.activeKey,e=null==e?void 0:e.find(function(e){return e.key===t});return Promise.resolve(e?e.codeText:"")},e.prototype.render=function(){var t=this,e=this.props,a=e.cardProps,n=e.isActive,o=e.id,r=e.url,i=e.className,l=e.style,c=e.bodyClassName,s=e.bodyStyle,d=e.displayClassName,e=e.displayBodyStyle;return React.createElement("div",__assign({},{id:o},{className:classNames(selectPrefix,"".concat(selectPrefix,"-mobile"),null!=i?i:"",((o={})["".concat(selectPrefix,"-active")]=n,o)),style:null!=l?l:{}}),this.state.qrcode&&React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-qr-code-mask"),onClick:function(){console.log("click qr mask"),t.setState({qrcode:void 0})}}),React.createElement("div",{className:classNames("".concat(selectPrefix,"-mobile-body"),null!=c?c:""),style:null!=s?s:{}},React.createElement(Card,__assign({actions:this.renderAction()},null!=a?a:{}),this.renderCodeView())),React.createElement("div",{className:classNames("".concat(selectPrefix,"-mobile-display"),null!=d?d:""),style:null!=e?e:{}},React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-inner")},React.createElement("iframe",{src:r,key:this.state.iframeCount})),React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-actions")},React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-action"),onClick:function(){t.setState({iframeCount:t.state.iframeCount+1})}},React.createElement(ReloadOutlined,null)),React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-action"),onClick:function(){QRCode.toDataURL(r).then(function(e){t.setState({qrcode:e})}).catch(function(e){console.error(e)})}},this.state.qrcode&&React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-qr-code")},React.createElement("img",{src:this.state.qrcode,alt:""})),React.createElement(QrcodeOutlined,null)),React.createElement("div",{className:"".concat(selectPrefix,"-mobile-display-action"),onClick:function(){window.open(r)}},React.createElement(FullscreenOutlined,null)))))},e.displayName="PlayGroundTabMobile",e}(APlayGround),PlayGroundTabDefaultProps=__assign(__assign({url:""},APlayGroundDefaultProps),CodeTabPanelDefaultProps),PlayGroundTabPropTypes=__assign(__assign({},APlayGroundPropTypes),CodeTabPanelPropTypes);PlayGroundTabMobile.defaultProps=PlayGroundTabDefaultProps,PlayGroundTabMobile.propTypes=PlayGroundTabPropTypes;export default PlayGroundTabMobile;export{PlayGroundTabDefaultProps,PlayGroundTabPropTypes};
//# sourceMappingURL=PlayGroundTabMobile.js.map
