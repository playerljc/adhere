import _Swiper from"antd-mobile/es/components/swiper";import _Tabs from"antd-mobile/es/components/tabs";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,n){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(r[o[t]]=e[o[t]]);return r};import classNames from"classnames";import React,{memo,useEffect,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import ArrowMore from"./arrowMore";import Tab from"./tab";var useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-tabs",InternalSystemTabs=memo(function(r){var e=r.swiper,e=void 0!==e&&e,n=r.showArrowMore,t=void 0===n||n,n=r.arrowZIndex,n=void 0===n?100:n,o=r.className,o=void 0===o?"":o,i=r.style,i=void 0===i?{}:i,a=r.innerClassName,a=void 0===a?"":a,l=r.innerStyle,l=void 0===l?{}:l,s=r.swiperProps,s=void 0===s?{}:s,c=r.children,u=__rest(r,["swiper","showArrowMore","arrowZIndex","className","style","innerClassName","innerStyle","swiperProps","children"]),d=useRef(null),f=useRef(null),p=useRef(!1),m=useRef(new Map),v=useState(r.activeKey||(c&&c.length?c[0].key:"")),y=v[0],_=v[1],h=useForceUpdate();function b(n){var e;return null==(e=null==c?void 0:c.findIndex)?void 0:e.call(c,function(e){return e.key===n})}function w(e){var n;_(e),null!=(n=null==d?void 0:d.current)&&n.swipeTo(null===b?void 0:b(e)),null!=(n=null==r?void 0:r.onChange)&&n.call(r,e)}return useEffect(function(){t&&h()},[]),useEffect(function(){var e,n;r.activeKey&&(_(r.activeKey),null!=(n=null==(e=null==d?void 0:d.current)?void 0:e.swipeTo))&&n.call(e,null===b?void 0:b(r.activeKey))},[r.activeKey]),useEffect(function(){p.current?m.current.clear():p.current=!0},[c]),React.createElement("div",{ref:f,className:classNames(selectorPrefix,null!=o?o:"",((v={})["".concat(selectorPrefix,"-swiper")]=e,v["".concat(selectorPrefix,"-arrowMore")]=t,v)),style:null!=i?i:{}},React.createElement(_Tabs,__assign({className:null!=a?a:"",style:null!=l?l:{},activeKey:y},u,{onChange:function(e){w(e)}}),ConditionalRender.conditionalRender({conditional:e,match:null==(o=null==c?void 0:c.map)?void 0:o.call(c,function(e){var n=e.props,n=(n.children,__rest(n,["children"])),e=__rest(e,["props"]);return __assign(__assign({},e),{props:__assign(__assign({},n),{children:null})})}),noMatch:r.children})),t&&React.createElement(ArrowMore,{zIndex:n,wrapRef:f,data:null==(i=null==(v=null==r?void 0:r.children)?void 0:v.map)?void 0:i.call(v,function(e){return{key:e.key,title:e.props.title}}),activeKey:y,swiper:e,getActiveIndexByKey:b,onChange:function(e){w(e)}}),e&&React.createElement(_Swiper,__assign({ref:d,direction:"horizontal",indicator:function(){return null},defaultIndex:b(y),onIndexChange:function(e){var n;return _(null==(n=null==(n=null==r?void 0:r.children)?void 0:n[e])?void 0:n.key)},loop:!1},s||{}),null==(a=null==c?void 0:c.map)?void 0:a.call(c,function(e){var n=e.key,r=e.props.children;return n===y&&m.current.set(n,!0),React.createElement(_Swiper.Item,{key:n},React.createElement(ConditionalRender,{conditional:!(n!==y&&!m.current.get(n))},function(){return r}))})))}),SystemTabs=InternalSystemTabs;SystemTabs.Tab=Tab,SystemTabs.displayName="SystemTabs";export default SystemTabs;
//# sourceMappingURL=index.js.map
