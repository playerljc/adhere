import _Swiper from"antd-mobile/es/components/swiper";import _Tabs from"antd-mobile/es/components/tabs";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,n){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(r[o[t]]=e[o[t]]);return r};import classNames from"classnames";import React,{useEffect,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import ArrowMore from"./arrowMore";import Tab from"./tab";var useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-tabs",SystemTabs=function(r){var e=r.swiper,t=void 0!==e&&e,e=r.showArrowMore,n=void 0===e||e,e=r.className,e=void 0===e?"":e,o=r.style,o=void 0===o?{}:o,i=r.innerClassName,i=void 0===i?"":i,l=r.innerStyle,l=void 0===l?{}:l,a=r.swiperProps,s=void 0===a?{}:a,c=r.children,a=__rest(r,["swiper","showArrowMore","className","style","innerClassName","innerStyle","swiperProps","children"]),u=useRef(null),d=useRef(null),f=useRef(!1),p=useRef(new Map),v=useState(r.activeKey||(c&&c.length?c[0].key:"")),m=v[0],y=v[1],_=useForceUpdate();function h(n){var e;return null==(e=null==c?void 0:c.findIndex)?void 0:e.call(c,function(e){return e.key===n})}function w(e){var n;y(e),null!=(n=null==u?void 0:u.current)&&n.swipeTo(null===h?void 0:h(e)),null!=(n=null==r?void 0:r.onChange)&&n.call(r,e)}return useEffect(function(){n&&_()},[]),useEffect(function(){var e,n;r.activeKey&&(y(r.activeKey),null!=(n=null==(e=null==u?void 0:u.current)?void 0:e.swipeTo))&&n.call(e,null===h?void 0:h(r.activeKey))},[r.activeKey]),useEffect(function(){f.current?p.current.clear():f.current=!0},[c]),React.createElement("div",{ref:d,className:classNames(selectorPrefix,null!=e?e:"",((v={})["".concat(selectorPrefix,"-swiper")]=t,v["".concat(selectorPrefix,"-arrowMore")]=n,v)),style:null!=o?o:{}},React.createElement(_Tabs,__assign({className:null!=i?i:"",style:null!=l?l:{},activeKey:m},a,{onChange:function(e){w(e)}}),ConditionalRender.conditionalRender({conditional:t,match:null==(e=null==c?void 0:c.map)?void 0:e.call(c,function(e){var n=e.props,n=(n.children,__rest(n,["children"])),e=__rest(e,["props"]);return __assign(__assign({},e),{props:__assign(__assign({},n),{children:null})})}),noMatch:r.children})),React.createElement(ConditionalRender,{conditional:n},function(){var e,n;return React.createElement(ArrowMore,{data:null==(n=null==(e=null==r?void 0:r.children)?void 0:e.map)?void 0:n.call(e,function(e){return{key:e.key,title:e.props.title}}),activeKey:m,onChange:function(e){w(e)},swiper:t,getActiveIndexByKey:h,wrapRef:d})}),React.createElement(ConditionalRender,{conditional:t},function(){var e;return React.createElement(_Swiper,__assign({direction:"horizontal",indicator:function(){return null},ref:u,defaultIndex:h(m),onIndexChange:function(e){var n;return y(null==(n=null==(n=null==r?void 0:r.children)?void 0:n[e])?void 0:n.key)},loop:!1},s||{}),null==(e=null==c?void 0:c.map)?void 0:e.call(c,function(e){var n=e.key,r=e.props.children;return n===m&&p.current.set(n,!0),React.createElement(_Swiper.Item,{key:n},React.createElement(ConditionalRender,{conditional:!(n!==m&&!p.current.get(n))},function(){return r}))}))}))};SystemTabs.Tab=Tab;export default SystemTabs;
//# sourceMappingURL=index.js.map
