import _Swiper from"antd-mobile/es/components/swiper";import _Tabs from"antd-mobile/es/components/tabs";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,n){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,o=Object.getOwnPropertySymbols(e);t<o.length;t++)n.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(r[o[t]]=e[o[t]]);return r};import classNames from"classnames";import React,{memo,useEffect,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import ArrowMore from"./arrowMore";import Tab from"./tab";var useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-tabs",InternalSystemTabs=memo(function(r){var e=r.swiper,e=void 0!==e&&e,n=r.showArrowMore,t=void 0===n||n,n=r.className,n=void 0===n?"":n,o=r.style,o=void 0===o?{}:o,i=r.innerClassName,i=void 0===i?"":i,l=r.innerStyle,l=void 0===l?{}:l,a=r.swiperProps,a=void 0===a?{}:a,s=r.children,c=__rest(r,["swiper","showArrowMore","className","style","innerClassName","innerStyle","swiperProps","children"]),u=useRef(null),d=useRef(null),f=useRef(!1),p=useRef(new Map),m=useState(r.activeKey||(s&&s.length?s[0].key:"")),v=m[0],y=m[1],_=useForceUpdate();function h(n){var e;return null==(e=null==s?void 0:s.findIndex)?void 0:e.call(s,function(e){return e.key===n})}function b(e){var n;y(e),null!=(n=null==u?void 0:u.current)&&n.swipeTo(null===h?void 0:h(e)),null!=(n=null==r?void 0:r.onChange)&&n.call(r,e)}return useEffect(function(){t&&_()},[]),useEffect(function(){var e,n;r.activeKey&&(y(r.activeKey),null!=(n=null==(e=null==u?void 0:u.current)?void 0:e.swipeTo))&&n.call(e,null===h?void 0:h(r.activeKey))},[r.activeKey]),useEffect(function(){f.current?p.current.clear():f.current=!0},[s]),React.createElement("div",{ref:d,className:classNames(selectorPrefix,null!=n?n:"",((m={})["".concat(selectorPrefix,"-swiper")]=e,m["".concat(selectorPrefix,"-arrowMore")]=t,m)),style:null!=o?o:{}},React.createElement(_Tabs,__assign({className:null!=i?i:"",style:null!=l?l:{},activeKey:v},c,{onChange:function(e){b(e)}}),ConditionalRender.conditionalRender({conditional:e,match:null==(n=null==s?void 0:s.map)?void 0:n.call(s,function(e){var n=e.props,n=(n.children,__rest(n,["children"])),e=__rest(e,["props"]);return __assign(__assign({},e),{props:__assign(__assign({},n),{children:null})})}),noMatch:r.children})),t&&React.createElement(ArrowMore,{wrapRef:d,data:null==(o=null==(m=null==r?void 0:r.children)?void 0:m.map)?void 0:o.call(m,function(e){return{key:e.key,title:e.props.title}}),activeKey:v,swiper:e,getActiveIndexByKey:h,onChange:function(e){b(e)}}),e&&React.createElement(_Swiper,__assign({ref:u,direction:"horizontal",indicator:function(){return null},defaultIndex:h(v),onIndexChange:function(e){var n;return y(null==(n=null==(n=null==r?void 0:r.children)?void 0:n[e])?void 0:n.key)},loop:!1},a||{}),null==(i=null==s?void 0:s.map)?void 0:i.call(s,function(e){var n=e.key,r=e.props.children;return n===v&&p.current.set(n,!0),React.createElement(_Swiper.Item,{key:n},React.createElement(ConditionalRender,{conditional:!(n!==v&&!p.current.get(n))},function(){return r}))})))}),SystemTabs=InternalSystemTabs;SystemTabs.Tab=Tab,SystemTabs.displayName="SystemTabs";export default SystemTabs;
//# sourceMappingURL=index.js.map
