{"version":3,"file":"index.js","sources":["Tabs/index.js"],"sourcesContent":["import _Swiper from \"antd-mobile/es/components/swiper\";\nimport _Tabs from \"antd-mobile/es/components/tabs\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport React, { memo, useEffect, useRef, useState } from 'react';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport Hooks from '@baifendian/adhere-ui-hooks';\nimport ArrowMore from './arrowMore';\nimport Tab from './tab';\nvar useForceUpdate = Hooks.useForceUpdate;\nvar selectorPrefix = 'adhere-ui-tabs';\nvar InternalSystemTabs = /*#__PURE__*/memo(function (props) {\n  var _a;\n  var _b, _c, _d, _e;\n  var _f = props.swiper,\n    swiper = _f === void 0 ? false : _f,\n    _g = props.showArrowMore,\n    showArrowMore = _g === void 0 ? true : _g,\n    _h = props.className,\n    className = _h === void 0 ? '' : _h,\n    _j = props.style,\n    style = _j === void 0 ? {} : _j,\n    _k = props.innerClassName,\n    innerClassName = _k === void 0 ? '' : _k,\n    _l = props.innerStyle,\n    innerStyle = _l === void 0 ? {} : _l,\n    _m = props.swiperProps,\n    swiperProps = _m === void 0 ? {} : _m,\n    children = props.children,\n    restProps = __rest(props, [\"swiper\", \"showArrowMore\", \"className\", \"style\", \"innerClassName\", \"innerStyle\", \"swiperProps\", \"children\"]);\n  var swiperRef = useRef(null);\n  var wrapRef = useRef(null);\n  var childrenEffectFirst = useRef(false);\n  var swiperLoad = useRef(new Map());\n  var _o = useState(props.activeKey ? props.activeKey : children && children.length ? children[0].key : ''),\n    activeKey = _o[0],\n    setActiveKey = _o[1];\n  var forceUpdate = useForceUpdate();\n  function getActiveIndexByKey(key) {\n    var _a;\n    return (_a = children === null || children === void 0 ? void 0 : children.findIndex) === null || _a === void 0 ? void 0 : _a.call(children, function (c) {\n      return c.key === key;\n    });\n  }\n  function keyChange(key) {\n    var _a, _b;\n    setActiveKey(key);\n    (_a = swiperRef === null || swiperRef === void 0 ? void 0 : swiperRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(getActiveIndexByKey === null || getActiveIndexByKey === void 0 ? void 0 : getActiveIndexByKey(key));\n    (_b = props === null || props === void 0 ? void 0 : props.onChange) === null || _b === void 0 ? void 0 : _b.call(props, key);\n  }\n  useEffect(function () {\n    if (showArrowMore) {\n      forceUpdate();\n    }\n  }, []);\n  useEffect(function () {\n    var _a, _b;\n    if (!props.activeKey) return;\n    setActiveKey(props.activeKey);\n    (_b = (_a = swiperRef === null || swiperRef === void 0 ? void 0 : swiperRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo) === null || _b === void 0 ? void 0 : _b.call(_a, getActiveIndexByKey === null || getActiveIndexByKey === void 0 ? void 0 : getActiveIndexByKey(props.activeKey));\n  }, [props.activeKey]);\n  useEffect(function () {\n    if (!childrenEffectFirst.current) {\n      childrenEffectFirst.current = true;\n      return;\n    }\n    swiperLoad.current.clear();\n  }, [children]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: wrapRef,\n    className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : '', (_a = {}, _a[\"\".concat(selectorPrefix, \"-swiper\")] = swiper, _a[\"\".concat(selectorPrefix, \"-arrowMore\")] = showArrowMore, _a)),\n    style: style !== null && style !== void 0 ? style : {}\n  }, /*#__PURE__*/React.createElement(_Tabs, __assign({\n    className: innerClassName !== null && innerClassName !== void 0 ? innerClassName : '',\n    style: innerStyle !== null && innerStyle !== void 0 ? innerStyle : {},\n    activeKey: activeKey\n  }, restProps, {\n    onChange: function onChange(key) {\n      keyChange(key);\n    }\n  }), ConditionalRender.conditionalRender({\n    conditional: swiper,\n    match: (_b = children === null || children === void 0 ? void 0 : children.map) === null || _b === void 0 ? void 0 : _b.call(children, function (_rElement) {\n      var _a = _rElement.props,\n        _children = _a.children,\n        _props = __rest(_a, [\"children\"]),\n        _rest = __rest(_rElement, [\"props\"]);\n      return __assign(__assign({}, _rest), {\n        props: __assign(__assign({}, _props), {\n          children: null\n        })\n      });\n    }),\n    noMatch: props.children\n  })), showArrowMore && /*#__PURE__*/React.createElement(ArrowMore, {\n    wrapRef: wrapRef,\n    data: (_d = (_c = props === null || props === void 0 ? void 0 : props.children) === null || _c === void 0 ? void 0 : _c.map) === null || _d === void 0 ? void 0 : _d.call(_c, function (_rElement) {\n      return {\n        key: _rElement.key,\n        title: _rElement.props.title\n      };\n    }),\n    activeKey: activeKey,\n    swiper: swiper,\n    getActiveIndexByKey: getActiveIndexByKey,\n    onChange: function onChange(key) {\n      keyChange(key);\n    }\n  }), swiper && /*#__PURE__*/React.createElement(_Swiper, __assign({\n    ref: swiperRef,\n    direction: \"horizontal\",\n    indicator: function indicator() {\n      return null;\n    },\n    defaultIndex: getActiveIndexByKey(activeKey),\n    onIndexChange: function onIndexChange(index) {\n      var _a, _b;\n      return setActiveKey((_b = (_a = props === null || props === void 0 ? void 0 : props.children) === null || _a === void 0 ? void 0 : _a[index]) === null || _b === void 0 ? void 0 : _b.key);\n    },\n    loop: false\n  }, swiperProps || {}), (_e = children === null || children === void 0 ? void 0 : children.map) === null || _e === void 0 ? void 0 : _e.call(children, function (_rElement) {\n    var key = _rElement.key,\n      _children = _rElement.props.children;\n    if (key === activeKey) {\n      swiperLoad.current.set(key, true);\n    }\n    return /*#__PURE__*/React.createElement(_Swiper.Item, {\n      key: key\n    }, /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !!(key === activeKey || swiperLoad.current.get(key))\n    }, function () {\n      return _children;\n    }));\n  })));\n});\nvar SystemTabs = InternalSystemTabs;\nSystemTabs.Tab = Tab;\nSystemTabs.displayName = 'SystemTabs';\nexport default SystemTabs;"],"names":["_Swiper","_Tabs","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","React","memo","useEffect","useRef","useState","ConditionalRender","Hooks","ArrowMore","Tab","useForceUpdate","selectorPrefix","InternalSystemTabs","props","_f","swiper","_g","showArrowMore","_h","className","_j","style","_k","innerClassName","_l","innerStyle","_m","swiperProps","children","restProps","swiperRef","wrapRef","childrenEffectFirst","swiperLoad","Map","_o","activeKey","key","setActiveKey","forceUpdate","getActiveIndexByKey","_a","findIndex","c","keyChange","_b","current","swipeTo","onChange","clear","createElement","ref","concat","conditionalRender","conditional","match","map","_rElement","_props","_rest","noMatch","data","_d","_c","title","direction","indicator","defaultIndex","onIndexChange","index","loop","_e","_children","set","Item","get","SystemTabs","displayName"],"mappings":"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"}