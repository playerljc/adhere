{"version":3,"file":"index.js","sources":["Tabs/index.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar antd_mobile_1 = require(\"antd-mobile\");\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar react_1 = __importStar(require(\"react\"));\nvar adhere_ui_conditionalrender_1 = __importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\nvar adhere_ui_hooks_1 = __importDefault(require(\"@baifendian/adhere-ui-hooks\"));\nvar arrowMore_1 = __importDefault(require(\"./arrowMore\"));\nvar tab_1 = __importDefault(require(\"./tab\"));\nvar useForceUpdate = adhere_ui_hooks_1.default.useForceUpdate;\nvar selectorPrefix = 'adhere-ui-tabs';\nvar InternalSystemTabs = (0, react_1.memo)(function (props) {\n  var _a;\n  var _b, _c, _d, _e;\n  var _f = props.swiper,\n    swiper = _f === void 0 ? false : _f,\n    _g = props.showArrowMore,\n    showArrowMore = _g === void 0 ? true : _g,\n    _h = props.arrowZIndex,\n    arrowZIndex = _h === void 0 ? 100 : _h,\n    _j = props.className,\n    className = _j === void 0 ? '' : _j,\n    _k = props.style,\n    style = _k === void 0 ? {} : _k,\n    _l = props.innerClassName,\n    innerClassName = _l === void 0 ? '' : _l,\n    _m = props.innerStyle,\n    innerStyle = _m === void 0 ? {} : _m,\n    _o = props.swiperProps,\n    swiperProps = _o === void 0 ? {} : _o,\n    children = props.children,\n    restProps = __rest(props, [\"swiper\", \"showArrowMore\", \"arrowZIndex\", \"className\", \"style\", \"innerClassName\", \"innerStyle\", \"swiperProps\", \"children\"]);\n  var swiperRef = (0, react_1.useRef)(null);\n  var wrapRef = (0, react_1.useRef)(null);\n  var childrenEffectFirst = (0, react_1.useRef)(false);\n  var swiperLoad = (0, react_1.useRef)(new Map());\n  var _p = (0, react_1.useState)(props.activeKey ? props.activeKey : children && children.length ? children[0].key : ''),\n    activeKey = _p[0],\n    setActiveKey = _p[1];\n  var forceUpdate = useForceUpdate();\n  function getActiveIndexByKey(key) {\n    var _a;\n    return (_a = children === null || children === void 0 ? void 0 : children.findIndex) === null || _a === void 0 ? void 0 : _a.call(children, function (c) {\n      return c.key === key;\n    });\n  }\n  function keyChange(key) {\n    var _a, _b;\n    setActiveKey(key);\n    (_a = swiperRef === null || swiperRef === void 0 ? void 0 : swiperRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(getActiveIndexByKey === null || getActiveIndexByKey === void 0 ? void 0 : getActiveIndexByKey(key));\n    (_b = props === null || props === void 0 ? void 0 : props.onChange) === null || _b === void 0 ? void 0 : _b.call(props, key);\n  }\n  (0, react_1.useEffect)(function () {\n    if (showArrowMore) {\n      forceUpdate();\n    }\n  }, []);\n  (0, react_1.useEffect)(function () {\n    var _a, _b;\n    if (!props.activeKey) return;\n    setActiveKey(props.activeKey);\n    (_b = (_a = swiperRef === null || swiperRef === void 0 ? void 0 : swiperRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo) === null || _b === void 0 ? void 0 : _b.call(_a, getActiveIndexByKey === null || getActiveIndexByKey === void 0 ? void 0 : getActiveIndexByKey(props.activeKey));\n  }, [props.activeKey]);\n  (0, react_1.useEffect)(function () {\n    if (!childrenEffectFirst.current) {\n      childrenEffectFirst.current = true;\n      return;\n    }\n    swiperLoad.current.clear();\n  }, [children]);\n  return react_1.default.createElement(\"div\", {\n    ref: wrapRef,\n    className: (0, classnames_1.default)(selectorPrefix, className !== null && className !== void 0 ? className : '', (_a = {}, _a[\"\".concat(selectorPrefix, \"-swiper\")] = swiper, _a[\"\".concat(selectorPrefix, \"-arrowMore\")] = showArrowMore, _a)),\n    style: style !== null && style !== void 0 ? style : {}\n  }, react_1.default.createElement(antd_mobile_1.Tabs, __assign({\n    className: innerClassName !== null && innerClassName !== void 0 ? innerClassName : '',\n    style: innerStyle !== null && innerStyle !== void 0 ? innerStyle : {},\n    activeKey: activeKey\n  }, restProps, {\n    onChange: function (key) {\n      keyChange(key);\n    }\n  }), adhere_ui_conditionalrender_1.default.conditionalRender({\n    conditional: swiper,\n    match: (_b = children === null || children === void 0 ? void 0 : children.map) === null || _b === void 0 ? void 0 : _b.call(children, function (_rElement) {\n      var _a = _rElement.props,\n        _children = _a.children,\n        _props = __rest(_a, [\"children\"]),\n        _rest = __rest(_rElement, [\"props\"]);\n      return __assign(__assign({}, _rest), {\n        props: __assign(__assign({}, _props), {\n          children: null\n        })\n      });\n    }),\n    noMatch: props.children\n  })), showArrowMore && react_1.default.createElement(arrowMore_1.default, {\n    zIndex: arrowZIndex,\n    wrapRef: wrapRef,\n    data: (_d = (_c = props === null || props === void 0 ? void 0 : props.children) === null || _c === void 0 ? void 0 : _c.map) === null || _d === void 0 ? void 0 : _d.call(_c, function (_rElement) {\n      return {\n        key: _rElement.key,\n        title: _rElement.props.title\n      };\n    }),\n    activeKey: activeKey,\n    swiper: swiper,\n    getActiveIndexByKey: getActiveIndexByKey,\n    onChange: function (key) {\n      keyChange(key);\n    }\n  }), swiper && react_1.default.createElement(antd_mobile_1.Swiper, __assign({\n    ref: swiperRef,\n    direction: \"horizontal\",\n    indicator: function () {\n      return null;\n    },\n    defaultIndex: getActiveIndexByKey(activeKey),\n    onIndexChange: function (index) {\n      var _a, _b;\n      return setActiveKey((_b = (_a = props === null || props === void 0 ? void 0 : props.children) === null || _a === void 0 ? void 0 : _a[index]) === null || _b === void 0 ? void 0 : _b.key);\n    },\n    loop: false\n  }, swiperProps || {}), (_e = children === null || children === void 0 ? void 0 : children.map) === null || _e === void 0 ? void 0 : _e.call(children, function (_rElement) {\n    var key = _rElement.key,\n      _children = _rElement.props.children;\n    if (key === activeKey) {\n      swiperLoad.current.set(key, true);\n    }\n    return react_1.default.createElement(antd_mobile_1.Swiper.Item, {\n      key: key\n    }, react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !!(key === activeKey || swiperLoad.current.get(key))\n    }, function () {\n      return _children;\n    }));\n  })));\n});\nvar SystemTabs = InternalSystemTabs;\nSystemTabs.Tab = tab_1.default;\nSystemTabs.displayName = 'SystemTabs';\nexports.default = SystemTabs;"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","default","antd_mobile_1","exports","require","classnames_1","react_1","adhere_ui_conditionalrender_1","adhere_ui_hooks_1","arrowMore_1","tab_1","useForceUpdate","selectorPrefix","InternalSystemTabs","memo","props","_f","swiper","_g","showArrowMore","_h","arrowZIndex","_j","className","_k","style","_l","innerClassName","_m","innerStyle","_o","swiperProps","children","restProps","swiperRef","useRef","wrapRef","childrenEffectFirst","swiperLoad","Map","_p","useState","activeKey","key","setActiveKey","forceUpdate","getActiveIndexByKey","_a","findIndex","c","keyChange","_b","current","swipeTo","onChange","useEffect","clear","createElement","ref","concat","Tabs","conditionalRender","conditional","match","map","_rElement","_props","_rest","noMatch","zIndex","data","_d","_c","title","Swiper","direction","indicator","defaultIndex","onIndexChange","index","loop","_e","_children","set","Item","SystemTabs","Tab","displayName"],"mappings":"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"}