{"version":3,"file":"theme.js","sources":["theme.js"],"sourcesContent":["\"use strict\";\n\nvar __spreadArray = void 0 && (void 0).__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.antdThemeToCssVariable = void 0;\nvar antd_1 = require(\"antd\");\nvar tinycolor2_1 = __importDefault(require(\"tinycolor2\"));\nvar adhere_1 = require(\"@baifendian/adhere\");\n/**\n * setCssVariable\n * @description 设置css变量\n * @param {string} varName 这个变量 xxx-xxx-xxx 类型\n */\nfunction setCssVariable(varName) {\n  // 小写驼峰\n  // 例子: adhereColorPrimary\n  var varCamelCaseName = adhere_1.Util.toCamelCase(varName, '-');\n  // 大写驼峰\n  // 例子: AdhereColorPrimary\n  var varUpperCamelCaseName = adhere_1.Util.toCamelCase(varName, '-', true);\n  if (varCamelCaseName in cssVars) return;\n  var entryValue = themes.get(varName);\n  // 定义驼峰变量\n  Object.defineProperty(cssVars, varCamelCaseName, {\n    set: function set(value) {\n      var _a, _b, _c, _d;\n      // --------------定义css变量 -------------\n      document.documentElement.style.setProperty(\"--\".concat(varName), value);\n      // 是颜色需要在定义一个-rgb的变量\n      var color = (0, tinycolor2_1.default)(value);\n      if (color.isValid()) {\n        var rgb = color.toRgb();\n        document.documentElement.style.setProperty(\"--\".concat(varName, \"-rgb\"), \"\".concat([rgb.r, rgb.g, rgb.b].join(',')));\n      }\n      // 处理mapToken\n      if (!(entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken)) return;\n      (_d = (_c = Array.from((_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.keys) === null || _b === void 0 ? void 0 : _b.call(_a))) === null || _c === void 0 ? void 0 : _c.forEach) === null || _d === void 0 ? void 0 : _d.call(_c, function (mapTokenVarName) {\n        var _a, _b;\n        var mapTokenVEntryValue = (_b = (_a = entryValue === null || entryValue === void 0 ? void 0 : entryValue.mapToken) === null || _a === void 0 ? void 0 : _a.get) === null || _b === void 0 ? void 0 : _b.call(_a, mapTokenVarName);\n        if (mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha) {\n          color.setAlpha(Number.parseFloat(mapTokenVEntryValue === null || mapTokenVEntryValue === void 0 ? void 0 : mapTokenVEntryValue.alpha));\n          document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), color.toPercentageRgbString());\n        }\n        if (mapTokenVEntryValue.calc) {\n          document.documentElement.style.setProperty(\"--\".concat(mapTokenVarName), \"calc(\".concat(value, \" \").concat(mapTokenVEntryValue.calc, \")\"));\n        }\n      });\n    }\n  });\n  // 定义导出变量\n  exportObj[\"set\".concat(varUpperCamelCaseName)] = function (value) {\n    cssVars[varCamelCaseName] = value;\n    adhere_1.Preferences.putStringByLocal(varUpperCamelCaseName, value);\n  };\n  // 定义导出变量\n  exportObj[\"get\".concat(varUpperCamelCaseName)] = function () {\n    return document.documentElement.style.getPropertyValue(\"--\".concat(varName));\n  };\n}\n/**\n * init\n */\nfunction init(curTheme) {\n  var _a;\n  // 主题的变量\n  var mapToken = ((_a = themes.get(curTheme)) !== null && _a !== void 0 ? _a : themes.get('default')).mapToken;\n  // 主题的变量\n  Object.keys(mapToken).forEach(function (_key) {\n    // colorPrimary\n    var varName = adhere_1.Util.capitalized(adhere_1.Util.toCamelCase(_key, '-', true));\n    exportObj[\"setAntd\".concat(varName)](mapToken[_key]);\n  });\n  Object.keys(designToken).forEach(function (_key) {\n    // colorPrimary\n    var varName = adhere_1.Util.capitalized(adhere_1.Util.toCamelCase(_key, '-', true));\n    exportObj[\"setAntd\".concat(varName)](designToken[_key]);\n  });\n}\nvar getDesignToken = antd_1.theme.getDesignToken,\n  defaultAlgorithm = antd_1.theme.defaultAlgorithm,\n  defaultSeed = antd_1.theme.defaultSeed,\n  darkAlgorithm = antd_1.theme.darkAlgorithm;\nvar designToken = getDesignToken();\nvar themes = new Map([[\n// 缺省主题\n'default', {\n  // 算法(antd)\n  algorithm: antd_1.theme.defaultAlgorithm,\n  // 算法对用的mapToken(antd)\n  mapToken: defaultAlgorithm(defaultSeed)\n}], [\n// 暗黑主题\n'dark', {\n  algorithm: antd_1.theme.darkAlgorithm,\n  mapToken: darkAlgorithm(defaultSeed)\n}]]);\n// 当前变量\nvar cssVars = {};\n// 导出对象\nvar exportObj = {};\n/**\n * antdThemeToCssVariable\n * @param curTheme\n */\nfunction antdThemeToCssVariable(curTheme) {\n  var antdKeys = Object.keys(themes.get('default').mapToken);\n  var antdDesignKeys = Object.keys(designToken);\n  /* 全局的css Vars*/\n  __spreadArray(__spreadArray([], antdKeys, true), antdDesignKeys, true).map(function (_key) {\n    return adhere_1.Util.pascalCaseToKebabCase(\"antd\".concat(adhere_1.Util.capitalized(_key)));\n  }).forEach(function (varName) {\n    setCssVariable(varName);\n  });\n  init(curTheme);\n}\nexports.antdThemeToCssVariable = antdThemeToCssVariable;"],"names":["__spreadArray","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","__importDefault","mod","__esModule","default","antd_1","Object","defineProperty","exports","value","antdThemeToCssVariable","require","tinycolor2_1","adhere_1","setCssVariable","varName","entryValue","varCamelCaseName","Util","toCamelCase","varUpperCamelCaseName","cssVars","themes","get","set","document","documentElement","style","setProperty","_c","rgb","color","isValid","toRgb","r","g","b","join","mapToken","_d","_b","_a","keys","forEach","mapTokenVarName","mapTokenVEntryValue","alpha","setAlpha","Number","parseFloat","toPercentageRgbString","calc","exportObj","Preferences","putStringByLocal","getPropertyValue","init","curTheme","_key","capitalized","designToken","getDesignToken","theme","defaultAlgorithm","defaultSeed","darkAlgorithm","Map","algorithm","antdKeys","antdDesignKeys","map","pascalCaseToKebabCase"],"mappings":"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"}