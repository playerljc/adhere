"use strict";var renderToWrapper,__createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){e[i=void 0===i?n:i]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},react_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importStar(require("react"))),client_1=__importDefault(require("react-dom/client")),uuid_1=require("uuid"),adhere_ui_configprovider_1=__importDefault(require("@baifendian/adhere-ui-configprovider")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),selectorPrefix="adhere-ui-notification",Notification=function(){function e(e,t){this.config={style:"material",type:"top"},this.notifications={},this.key=!1,this.container=e,this.config=Object.assign(this.config,t),this.createInnerContainer(),this.init(),this.initEvents()}return e.prototype.createInnerContainer=function(){var e,t=this.container.querySelector(".".concat(selectorPrefix));t&&null!=(e=null==t?void 0:t.parentElement)&&e.removeChild(t),this.innerContainer=document.createElement("div"),this.innerContainer.className=selectorPrefix,this.notificationContainer=document.createElement("ul"),this.innerContainer.appendChild(this.notificationContainer),this.container.appendChild(this.innerContainer)},e.prototype.init=function(){var e,t=this.config;null!=(e=this.innerContainer)&&e.classList.remove([selectorPrefix].concat(["top"===t.type?"bottom":"top",t.style]).join("-")),null!=(e=this.innerContainer)&&e.classList.add([selectorPrefix].concat([t.type,t.style]).join("-"))},e.prototype.initEvents=function(){var e,t=this;null!=(e=this.notificationContainer)&&e.addEventListener("click",function(e){e.target.classList.contains("close-btn")&&t.closeNotification.call(t,e.target.parentNode.dataset.id)})},e.prototype.closeNotification=function(e){var n,i=this;i.key||(i.key=!0,n=i.notifications[e],i.trigger("onCloseBefore",n),n.addEventListener("transitionend",function e(){var t;n.removeEventListener("transitionend",e),null!=(t=null==i?void 0:i.notificationContainer)&&t.removeChild(n),i.key=!1,i.trigger("onCloseAfter",n)}),n.style.overflow="hidden",n.querySelector(".info").style.opacity="0",n.style.height="0")},e.prototype.buildCustom=function(e){function t(){var e=(0,react_1.useContext)(adhere_ui_configprovider_1.default.Context).media;return(0,react_1.useEffect)(function(){n.build(a,o,e)},[]),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:"info"},r),i?react_1.default.createElement("span",{className:"close-btn"}):null)}var n=this,i=e.closed,r=e.children,a=(0,uuid_1.v1)(),o=document.createElement("li");o.dataset.id=a;return client_1.default.createRoot(o).render(null!=(e=null==renderToWrapper?void 0:renderToWrapper(function(){return react_1.default.createElement(t,null)}))?e:react_1.default.createElement(t,null)),a},e.prototype.buildStandard=function(e){function t(){var e=(0,react_1.useContext)(adhere_ui_configprovider_1.default.Context).media;return(0,react_1.useEffect)(function(){n.build(u,f,e)},[]),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:"info"},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-header")},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-header-icon")},a?react_1.default.createElement("img",{src:a,alt:""}):null),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-header-label")},null!=r?r:"")),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content")},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content-media-l")},l?react_1.default.createElement("img",{src:l,alt:""}):null),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content-row")},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content-row-title")},null!=o?o:""),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content-row-text")},null!=c?c:"")),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-standard-content-media-r")},null!=s?s:""))),d?react_1.default.createElement("span",{className:"close-btn"}):null)}var n=this,i=e.headerLabel,r=void 0===i?"":i,i=e.headerIcon,a=void 0===i?"":i,i=e.title,o=void 0===i?"":i,i=e.text,c=void 0===i?"":i,i=e.icon,l=void 0===i?"":i,i=e.closed,d=void 0===i||i,i=e.datetime,s=void 0===i?"":i,u=(0,uuid_1.v1)(),f=document.createElement("li");f.dataset.id=u;return client_1.default.createRoot(f).render(null!=(e=null==renderToWrapper?void 0:renderToWrapper(function(){return react_1.default.createElement(t,null)}))?e:react_1.default.createElement(t,null)),this.build(u,f),u},e.prototype.build=function(e,n,i){void 0===i&&(i={isUseMedia:!1,designWidth:192});var r=this;return this.notifications[e]=n,this.notificationContainer.appendChild(n),setTimeout(function(){r.trigger("onCreate",n),n.style.height="auto";var t=n.clientHeight;"material"===r.config.style?t<40&&(t=40):"ios"===r.config.style&&t<70&&(t=70),n.style.height="0",setTimeout(function(){var e="".concat(t,"px");null!=i&&i.isUseMedia&&(e="".concat(adhere_util_1.default.pxToRem(t,null==i?void 0:i.designWidth))),n.style.height="".concat(e),n.querySelector(".info").style.opacity="1",r.trigger("onShow",n)},100)},100),e},e.prototype.trigger=function(e,t){this.config[e]&&this.config[e](t)},e.prototype.show=function(e){return this.buildCustom(e)},e.prototype.showStandard=function(e){return this.buildStandard(e)},e.prototype.close=function(e){this.closeNotification(e)},e}(),NotificationFactory={setRenderToWrapper:function(e){renderToWrapper=e},build:function(e,t){return new Notification(e,t)}};exports.default=NotificationFactory;
//# sourceMappingURL=Notification.js.map
