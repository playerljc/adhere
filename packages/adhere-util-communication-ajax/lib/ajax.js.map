{"version":3,"file":"ajax.js","sources":["ajax.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar antd_1 = require(\"antd\");\r\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar adhere_ui_globalindicator_1 = __importDefault(require(\"@baifendian/adhere-ui-globalindicator\"));\r\n// 是否触发过402\r\nvar trigger402 = false;\r\n/**\r\n * errorInfo - 错误的提示\r\n * @param title\r\n * @param message\r\n */\r\nfunction errorInfo(title, message) {\r\n    antd_1.notification.error({\r\n        message: title,\r\n        description: message,\r\n    });\r\n}\r\n/**\r\n * warnInfo - 警告的提示\r\n * @param title\r\n * @param message\r\n */\r\nfunction warnInfo(title, message) {\r\n    antd_1.notification.warn({\r\n        message: title,\r\n        description: message,\r\n    });\r\n}\r\n/**\r\n * createXHR - 创建一个XHR对象\r\n * @return XMLHttpRequest\r\n */\r\nfunction createXHR() {\r\n    return new XMLHttpRequest();\r\n}\r\n/**\r\n * getDefaultConfig - 返回构造函数config的默认值\r\n * @return IConfig\r\n */\r\nfunction getDefaultConfig() {\r\n    var _this = this;\r\n    return {\r\n        timeout: Ajax.TIMEOUT,\r\n        withCredentials: true,\r\n        onLoad: function () { },\r\n        onLoadsStart: function () { },\r\n        onLoadend: function () { },\r\n        onProgress: function () { },\r\n        // 超时\r\n        onTimeout: function () {\r\n            warnInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求超时'));\r\n        },\r\n        // 取消\r\n        onAbort: function () {\r\n            warnInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求终止'));\r\n        },\r\n        // 发生错误\r\n        onError: function () {\r\n            errorInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求发生错误'));\r\n        },\r\n        // 拦截器\r\n        interceptor: function (_a) {\r\n            var status = _a.status;\r\n            switch (status) {\r\n                case 401:\r\n                    // @ts-ignore\r\n                    deal401.call(_this);\r\n                    break;\r\n                case 402:\r\n                    // @ts-ignore\r\n                    deal402.call(_this);\r\n                    break;\r\n            }\r\n        },\r\n    };\r\n}\r\n/**\r\n * initXhrEvents - 初始化XHR的事件\r\n * @param xhr\r\n * @param events\r\n */\r\nfunction initXhrEvents(xhr, events) {\r\n    var onTimeout = events.onTimeout, onLoadsStart = events.onLoadsStart, onProgress = events.onProgress, onAbort = events.onAbort, onError = events.onError, onLoad = events.onLoad, onLoadend = events.onLoadend;\r\n    // events\r\n    if (onTimeout) {\r\n        xhr.addEventListener('timeout', onTimeout);\r\n    }\r\n    if (onLoadsStart) {\r\n        xhr.addEventListener('loadstart', onLoadsStart);\r\n    }\r\n    if (onProgress) {\r\n        xhr.addEventListener('progress', onProgress);\r\n    }\r\n    if (onAbort) {\r\n        xhr.addEventListener('abort', onAbort);\r\n    }\r\n    if (onError) {\r\n        xhr.addEventListener('error', onError);\r\n    }\r\n    if (onLoad) {\r\n        xhr.addEventListener('load', onLoad);\r\n    }\r\n    if (onLoadend) {\r\n        xhr.addEventListener('loadend', onLoadend);\r\n    }\r\n}\r\n/**\r\n * resolveData - onreadystatechange中resolve的数据\r\n * @param show\r\n * @param data\r\n * @param indicator\r\n */\r\nfunction resolveData(_a) {\r\n    var show = _a.show, data = _a.data, indicator = _a.indicator;\r\n    return show\r\n        ? {\r\n            data: data,\r\n            hideIndicator: function () {\r\n                adhere_ui_globalindicator_1.default.hide(indicator);\r\n            },\r\n        }\r\n        : data;\r\n}\r\n/**\r\n * onreadystatechange - onreadystatechange的处理\r\n * @param xhr\r\n * @param interceptor\r\n * @param show\r\n * @param indicator\r\n * @param messageKey\r\n * @param codeKey\r\n * @param codeSuccess\r\n * @param showWarn\r\n * @param resolve\r\n * @param reject\r\n */\r\nfunction onreadystatechange(_a) {\r\n    var xhr = _a.xhr, interceptor = _a.interceptor, _b = _a.loading, show = _b.show, indicator = _b.indicator, _c = _a.business, messageKey = _c.messageKey, codeKey = _c.codeKey, codeSuccess = _c.codeSuccess, showWarn = _c.showWarn, resolve = _a.resolve, reject = _a.reject;\r\n    var status = xhr.status, readyState = xhr.readyState, statusText = xhr.statusText, response = xhr.response, responseText = xhr.responseText;\r\n    // readyState === 4\r\n    if (readyState === Ajax.READY_STATE_DONE) {\r\n        // status success\r\n        if ((status >= 200 && status < 300) || status === 304) {\r\n            // 获取contentType\r\n            var contentType = xhr.getResponseHeader('Content-type');\r\n            // response ContentType是application/json\r\n            if (contentType.indexOf(Ajax.CONTENT_TYPE_APPLICATION_JSON) !== -1) {\r\n                // 只有application/json才进行三大值的判断\r\n                var jsonObj = JSON.parse(xhr.responseText);\r\n                if (showWarn && jsonObj[codeKey] !== codeSuccess) {\r\n                    warnInfo(adhere_util_intl_1.default.v('提示'), jsonObj[messageKey]);\r\n                }\r\n                resolve(resolveData({ show: show, data: jsonObj, indicator: indicator }));\r\n            }\r\n            // response ContentType是xml\r\n            else if ([Ajax.CONTENT_TYPE_TEXT_XML, Ajax.CONTENT_TYPE_TEXT_XML].includes(contentType)) {\r\n                resolve(resolveData({ show: show, data: xhr.responseXML, indicator: indicator }));\r\n            }\r\n            // response ContentType是其他\r\n            else {\r\n                resolve(resolveData({ show: show, data: xhr.response, indicator: indicator }));\r\n            }\r\n        }\r\n        // status error\r\n        else {\r\n            // 3xx\r\n            // 4xx\r\n            // 5xx\r\n            errorInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('已提出请求，但未收到任何回复'));\r\n            // 拦截器\r\n            interceptor({\r\n                status: status,\r\n                statusText: statusText,\r\n                response: response,\r\n                responseText: responseText,\r\n            });\r\n            // catch\r\n            if (status)\r\n                reject({\r\n                    status: status,\r\n                    statusText: statusText,\r\n                    response: response,\r\n                    responseText: responseText,\r\n                });\r\n            // 取消遮罩\r\n            if (show && indicator) {\r\n                adhere_ui_globalindicator_1.default.hide(indicator);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * sendPrepare - send前的准备\r\n */\r\nfunction sendPrepare(_a, _b) {\r\n    var resolve = _b.resolve, reject = _b.reject;\r\n    var \r\n    // 当前方法独有\r\n    method = _a.method, \r\n    // get|post|path|put|delete方法独有\r\n    path = _a.path, headers = _a.headers, \r\n    // 业务参数\r\n    mock = _a.mock, loading = _a.loading, onBeforeResponse = _a.onBeforeResponse, \r\n    // 下面是后端返回的三组值\r\n    _c = _a.dataKey, \r\n    // 下面是后端返回的三组值\r\n    dataKey = _c === void 0 ? 'data' : _c, _d = _a.messageKey, messageKey = _d === void 0 ? 'message' : _d, _e = _a.codeKey, codeKey = _e === void 0 ? 'code' : _e, _f = _a.codeSuccess, codeSuccess = _f === void 0 ? 200 : _f, _g = _a.showWarn, showWarn = _g === void 0 ? true : _g, \r\n    // curConfig\r\n    curConfig = __rest(_a, [\"method\", \"path\", \"headers\", \"mock\", \"loading\", \"onBeforeResponse\", \"dataKey\", \"messageKey\", \"codeKey\", \"codeSuccess\", \"showWarn\"]) // timeout && withCredentials && events\r\n    ;\r\n    var indicator;\r\n    var defaultLoadingText = adhere_util_intl_1.default.v('加载中') + \"...\";\r\n    var _h = loading.show, show = _h === void 0 ? false : _h, _j = loading.text, text = _j === void 0 ? defaultLoadingText : _j, _k = loading.el, el = _k === void 0 ? document.body : _k;\r\n    // 显示loading\r\n    if (show) {\r\n        indicator = adhere_ui_globalindicator_1.default.show(el || document.body, text || defaultLoadingText);\r\n    }\r\n    if (mock) {\r\n        setTimeout(function () {\r\n            if (show) {\r\n                resolve({\r\n                    data: path,\r\n                    hideIndicator: function () {\r\n                        adhere_ui_globalindicator_1.default.hide(indicator);\r\n                    },\r\n                });\r\n            }\r\n            else {\r\n                resolve(path);\r\n            }\r\n        }, 200);\r\n        return null;\r\n    }\r\n    var _l = this, baseURL = _l.baseURL, config = _l.config;\r\n    var _m = Object.assign(\r\n    // 默认的属性\r\n    getDefaultConfig.call(this), config, curConfig), timeout = _m.timeout, withCredentials = _m.withCredentials, interceptor = _m.interceptor, events = __rest(_m, [\"timeout\", \"withCredentials\", \"interceptor\"]);\r\n    // xhr\r\n    var xhr = createXHR();\r\n    // open\r\n    xhr.open(method, baseURL + \"/\" + path, true);\r\n    // timeout\r\n    xhr.timeout = timeout;\r\n    // withCredentials\r\n    xhr.withCredentials = withCredentials;\r\n    // requestHeaders\r\n    if (!adhere_util_1.default.isEmpty(headers) && adhere_util_1.default.isObject(headers)) {\r\n        // 如果用户没有定义Content-type 则默认添加application/json\r\n        if (!('Content-type' in headers)) {\r\n            headers['Content-Type'] = Ajax.CONTENT_TYPE_APPLICATION_JSON + \";charset=utf-8\";\r\n        }\r\n        for (var header in headers) {\r\n            xhr.setRequestHeader(header, headers[header]);\r\n        }\r\n    }\r\n    // 默认Content-Type\r\n    else {\r\n        xhr.setRequestHeader('Content-Type', Ajax.CONTENT_TYPE_APPLICATION_JSON + \";charset=utf-8\");\r\n    }\r\n    // events\r\n    initXhrEvents(xhr, events);\r\n    // onreadystatechange\r\n    xhr.onreadystatechange = onreadystatechange.bind(this, {\r\n        xhr: xhr,\r\n        interceptor: interceptor,\r\n        loading: {\r\n            show: show,\r\n            indicator: indicator,\r\n        },\r\n        business: {\r\n            dataKey: dataKey,\r\n            messageKey: messageKey,\r\n            codeKey: codeKey,\r\n            codeSuccess: codeSuccess,\r\n            showWarn: showWarn,\r\n        },\r\n        resolve: resolve,\r\n        reject: reject,\r\n    });\r\n    // return\r\n    return xhr;\r\n}\r\n/**\r\n * getSendParams\r\n * @param data\r\n * @param contentType\r\n */\r\nfunction getSendParams(_a) {\r\n    var data = _a.data, contentType = _a.contentType;\r\n    contentType = contentType || '';\r\n    // 四种Content-Type的处理(也就是send的参数)\r\n    // application/json\r\n    // \"{}\"\r\n    // application/x-www-form-urlencoded\r\n    // key1=1&key2=2&key3=3&key4=4&key5=5\r\n    // multipart/form-data\r\n    // FormData\r\n    // application/json\r\n    if (contentType.indexOf(Ajax.CONTENT_TYPE_APPLICATION_JSON) === 0 && adhere_util_1.default.isObject(data)) {\r\n        return JSON.stringify(data);\r\n    }\r\n    // application/x-www-form-urlencoded\r\n    if (contentType.indexOf(Ajax.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED) === 0 &&\r\n        adhere_util_1.default.isObject(data)) {\r\n        return Array.from(Object.keys(data))\r\n            .map(function (k) { return encodeURIComponent(k + \"=\" + data[k]); })\r\n            .join('&');\r\n    }\r\n    // multipart/form-data\r\n    if (contentType.indexOf(Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA) === 0 && adhere_util_1.default.isObject(data)) {\r\n        var formData_1 = new FormData(data.form);\r\n        Array.from(Object.keys(data)).forEach(function (k) {\r\n            formData_1.set(k, data[k]);\r\n        });\r\n        return formData_1;\r\n    }\r\n}\r\n/**\r\n * complexRequest - 复杂的请求\r\n * @param method\r\n * @param data\r\n * @param arg\r\n */\r\nfunction complexRequest(method, _a) {\r\n    var _this = this;\r\n    var data = _a.data, arg = __rest(_a, [\"data\"]);\r\n    return new Promise(function (resolve, reject) {\r\n        var xhr = sendPrepare.call(\r\n        // @ts-ignore\r\n        _this, __assign({ \r\n            // @ts-ignore\r\n            method: method }, arg), {\r\n            resolve: resolve,\r\n            reject: reject,\r\n        });\r\n        if (xhr) {\r\n            // @ts-ignore\r\n            xhr.send(getSendParams.call(_this, { data: data, contentType: arg.headers['Content-type'] }));\r\n        }\r\n    });\r\n}\r\n/**\r\n * deal401\r\n */\r\nfunction deal401() {\r\n    // 像top发送消息\r\n    if (window.top && window.top !== window) {\r\n        window.top.postMessage('http_status_401', '*');\r\n    }\r\n    if (trigger402) {\r\n        return false;\r\n    }\r\n    window.location.href = adhere_util_1.default.casUrl({\r\n        // @ts-ignore\r\n        baseUrl: this.systemManagerBaseUrl,\r\n        enterUrl: window.location.href,\r\n    });\r\n}\r\n/**\r\n * deal402\r\n */\r\nfunction deal402() {\r\n    trigger402 = true;\r\n    if (window.parent && window.parent !== window) {\r\n        window.parent.postMessage('http_status_402', '*');\r\n        return false;\r\n    }\r\n    window.location.href = adhere_util_1.default.casLogoutUrl({\r\n        // @ts-ignore\r\n        baseUrl: this.systemManagerBaseUrl,\r\n        enterUrl: window.location.href,\r\n        params: '&code=402',\r\n    });\r\n}\r\n/**\r\n * Ajax\r\n * @class Ajax\r\n * @classdesc Ajax\r\n */\r\nvar Ajax = /** @class */ (function () {\r\n    /**\r\n     * constructor\r\n     * @param baseURL\r\n     * @param systemManagerBaseURL\r\n     * @param config\r\n     */\r\n    function Ajax(baseURL, systemManagerBaseURL, config) {\r\n        this.baseURL = baseURL;\r\n        this.systemManagerBaseURL = systemManagerBaseURL;\r\n        this.config = config;\r\n    }\r\n    /**\r\n     * get\r\n     * @param data\r\n     * @param arg\r\n     */\r\n    Ajax.prototype.get = function (_a) {\r\n        var _this = this;\r\n        var data = _a.data, arg = __rest(_a, [\"data\"]);\r\n        return new Promise(function (resolve, reject) {\r\n            var xhr = sendPrepare.call(_this, __assign({ method: 'get' }, arg), {\r\n                resolve: resolve,\r\n                reject: reject,\r\n            });\r\n            if (xhr) {\r\n                xhr.send(null);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * post\r\n     * @param params\r\n     */\r\n    Ajax.prototype.post = function (params) {\r\n        return complexRequest('post', params);\r\n    };\r\n    /**\r\n     * path\r\n     * @param params\r\n     */\r\n    Ajax.prototype.path = function (params) {\r\n        return complexRequest('path', params);\r\n    };\r\n    /**\r\n     * put\r\n     * @param params\r\n     */\r\n    Ajax.prototype.put = function (params) {\r\n        return complexRequest('put', params);\r\n    };\r\n    /**\r\n     * delete\r\n     * @param params\r\n     */\r\n    Ajax.prototype.delete = function (params) {\r\n        return complexRequest('delete', params);\r\n    };\r\n    /**\r\n     * 超时时间(10分钟)\r\n     */\r\n    Ajax.TIMEOUT = 1000 * 1000;\r\n    /**\r\n     * 状态成功代码\r\n     */\r\n    Ajax.STATUS_SUCCESS_CODES = [200, 201, 202, 203, 204, 205, 206, 207, 208, 226];\r\n    /**\r\n     * 状态重定向代码\r\n     */\r\n    Ajax.STATUS_REDIRECT_CODES = [300, 301, 302, 303, 304, 305, 306, 307, 308];\r\n    /**\r\n     * 代理被创建，但尚未调用 open() 方法。\r\n     */\r\n    Ajax.READY_STATE_UNSENT = 0;\r\n    /**\r\n     * open() 方法已经被调用\r\n     */\r\n    Ajax.READY_STATE_OPENED = 1;\r\n    /**\r\n     * send() 方法已经被调用，并且头部和状态已经可获得\r\n     */\r\n    Ajax.READY_STATE_HEADERS_RECEIVED = 2;\r\n    /**\r\n     * 下载中； responseText 属性已经包含部分数据\r\n     */\r\n    Ajax.READY_STATE_LOADING = 3;\r\n    /**\r\n     * 下载操作已完成\r\n     */\r\n    Ajax.READY_STATE_DONE = 4;\r\n    Ajax.CONTENT_TYPE_APPLICATION_JSON = 'application/json';\r\n    Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA = 'multipart/form-data';\r\n    Ajax.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED = 'application/x-www-form-urlencoded';\r\n    Ajax.CONTENT_TYPE_TEXT_XML = 'text/xml';\r\n    Ajax.CONTENT_TYPE_APPLICATION_XML = 'application/xml';\r\n    Ajax.CONTENT_TYPE_TEXT_PLAIN = 'text/plain';\r\n    return Ajax;\r\n}());\r\nexports.default = Ajax;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","mod","__esModule","default","defineProperty","exports","value","antd_1","require","adhere_util_1","adhere_util_intl_1","adhere_ui_globalindicator_1","trigger402","errorInfo","title","message","notification","error","description","warnInfo","warn","createXHR","XMLHttpRequest","getDefaultConfig","_this","timeout","Ajax","TIMEOUT","withCredentials","onLoad","onLoadsStart","onLoadend","onProgress","onTimeout","v","onAbort","onError","interceptor","_a","status","deal401","deal402","initXhrEvents","xhr","events","addEventListener","resolveData","show","data","indicator","hideIndicator","hide","onreadystatechange","_b","loading","_c","business","messageKey","codeKey","codeSuccess","showWarn","resolve","reject","readyState","statusText","response","responseText","READY_STATE_DONE","contentType","getResponseHeader","CONTENT_TYPE_APPLICATION_JSON","jsonObj","JSON","parse","CONTENT_TYPE_TEXT_XML","includes","responseXML","sendPrepare","method","path","headers","mock","onBeforeResponse","dataKey","_d","_e","_f","_g","curConfig","defaultLoadingText","_h","_j","text","_k","el","document","body","setTimeout","baseURL","config","_m","open","isEmpty","isObject","header","setRequestHeader","bind","getSendParams","stringify","CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED","Array","from","keys","map","k","encodeURIComponent","join","CONTENT_TYPE_MULTIPART_FORM_DATA","formData_1","FormData","form","forEach","set","complexRequest","arg","Promise","send","window","top","postMessage","location","href","casUrl","baseUrl","systemManagerBaseUrl","enterUrl","parent","casLogoutUrl","params","systemManagerBaseURL","get","post","put","delete","STATUS_SUCCESS_CODES","STATUS_REDIRECT_CODES","READY_STATE_UNSENT","READY_STATE_OPENED","READY_STATE_HEADERS_RECEIVED","READY_STATE_LOADING","CONTENT_TYPE_APPLICATION_XML","CONTENT_TYPE_TEXT_PLAIN"],"mappings":"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"}