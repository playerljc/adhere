{"version":3,"file":"ajax.js","sources":["ajax.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar antd_1 = require(\"antd\");\nvar adhere_mobile_ui_globalindicator_1 = __importDefault(require(\"@baifendian/adhere-mobile-ui-globalindicator\"));\nvar adhere_ui_globalindicator_1 = __importDefault(require(\"@baifendian/adhere-ui-globalindicator\"));\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\n// 是否触发过402\nvar trigger402 = false;\n// notification的节流时间(毫秒)\nvar notificationThrottlingTime = 300;\nvar errorInfoHandler;\nvar warnInfoHandler;\n/**\n * Interceptors\n * @description 拦截器\n */\nvar Interceptors = /** @class */function () {\n  function Interceptors() {\n    // 请求拦截器容器\n    this.requestInterceptors = new Set();\n    // 响应拦截器容器\n    this.responseInterceptors = new Set();\n  }\n  /**\n   * addRequest\n   * @description 添加一个请求拦截器\n   * @param handler\n   */\n  Interceptors.prototype.addRequest = function (handler) {\n    var _this = this;\n    if (Array.isArray(handler)) {\n      handler.forEach(function (_handler) {\n        _this.requestInterceptors.add(_handler);\n      });\n      return this.requestInterceptors;\n    }\n    return this.requestInterceptors.add(handler);\n  };\n  /**\n   * addResponse\n   * @description 添加一个响应拦截器\n   * @param handler\n   */\n  Interceptors.prototype.addResponse = function (handler) {\n    var _this = this;\n    if (Array.isArray(handler)) {\n      handler.forEach(function (_handler) {\n        _this.responseInterceptors.add(_handler);\n      });\n      return this.responseInterceptors;\n    }\n    return this.responseInterceptors.add(handler);\n  };\n  /**\n   * remove\n   * @description 删除拦截器\n   * @param handler\n   */\n  Interceptors.prototype.remove = function (handler) {\n    if (this.requestInterceptors.has(handler)) {\n      this.requestInterceptors.delete(handler);\n    } else if (this.responseInterceptors.has(handler)) {\n      this.responseInterceptors.delete(handler);\n    }\n  };\n  /**\n   * requestReducer\n   * @description 对请求参数进行拦截器处理\n   * @param params\n   */\n  Interceptors.prototype.requestReducer = function (params) {\n    return Array.from(this.requestInterceptors).reduce(function (result, interceptor) {\n      return interceptor(result);\n    }, params);\n  };\n  /**\n   * responseReducer\n   * @description 对响应参数进行拦截器处理\n   * @param params\n   */\n  Interceptors.prototype.responseReducer = function (params) {\n    return Array.from(this.responseInterceptors).reduce(function (result, interceptor) {\n      return interceptor(result);\n    }, params);\n  };\n  return Interceptors;\n}();\n/**\n * Ajax\n * @class Ajax\n * @classdesc Ajax\n */\nvar Ajax = /** @class */function () {\n  /**\n   * constructor\n   * @param baseURL\n   * @param systemManagerBaseURL\n   * @param config\n   */\n  function Ajax(baseURL, systemManagerBaseURL, config) {\n    this.baseURL = baseURL || '';\n    this.systemManagerBaseURL = systemManagerBaseURL || '';\n    this.config = config !== null && config !== void 0 ? config : {};\n  }\n  /**\n   * get\n   * @param data\n   * @param arg\n   */\n  Ajax.prototype.get = function (_a) {\n    var _this = this;\n    var data = _a.data,\n      arg = __rest(_a, [\"data\"]);\n    var prepare = {};\n    var promise = new Promise(function (resolve, reject) {\n      prepare = sendPrepare.call(_this, __assign(__assign(__assign(__assign({}, getDefaultConfig.call(_this)), _this.config), {\n        method: 'get'\n      }), arg), {\n        resolve: resolve,\n        reject: reject\n      });\n      var xhr = prepare.xhr;\n      if (xhr) {\n        xhr.send(null);\n      }\n    });\n    return __assign(__assign({}, prepare), {\n      promise: promise\n    });\n  };\n  /**\n   * post\n   * @param params\n   */\n  Ajax.prototype.post = function (params) {\n    return complexRequest.call(this, 'post', params);\n  };\n  /**\n   * path\n   * @param params\n   */\n  Ajax.prototype.path = function (params) {\n    return complexRequest.call(this, 'path', params);\n  };\n  /**\n   * put\n   * @param params\n   */\n  Ajax.prototype.put = function (params) {\n    return complexRequest.call(this, 'put', params);\n  };\n  /**\n   * delete\n   * @param params\n   */\n  Ajax.prototype.delete = function (params) {\n    return complexRequest.call(this, 'delete', params);\n  };\n  /**\n   * 超时时间(10分钟)\n   */\n  Ajax.TIMEOUT = 1000 * 1000;\n  /**\n   * 状态成功代码\n   */\n  Ajax.STATUS_SUCCESS_CODES = [200, 201, 202, 203, 204, 205, 206, 207, 208, 226];\n  /**\n   * 状态重定向代码\n   */\n  Ajax.STATUS_REDIRECT_CODES = [300, 301, 302, 303, 304, 305, 306, 307, 308];\n  /**\n   * 代理被创建，但尚未调用 open() 方法。\n   */\n  Ajax.READY_STATE_UNSENT = 0;\n  /**\n   * open() 方法已经被调用\n   */\n  Ajax.READY_STATE_OPENED = 1;\n  /**\n   * send() 方法已经被调用，并且头部和状态已经可获得\n   */\n  Ajax.READY_STATE_HEADERS_RECEIVED = 2;\n  /**\n   * 下载中； responseText 属性已经包含部分数据\n   */\n  Ajax.READY_STATE_LOADING = 3;\n  /**\n   * 下载操作已完成\n   */\n  Ajax.READY_STATE_DONE = 4;\n  Ajax.CONTENT_TYPE_APPLICATION_JSON = 'application/json';\n  Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA = 'multipart/form-data';\n  Ajax.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED = 'application/x-www-form-urlencoded';\n  Ajax.CONTENT_TYPE_TEXT_XML = 'text/xml';\n  Ajax.CONTENT_TYPE_APPLICATION_XML = 'application/xml';\n  Ajax.CONTENT_TYPE_TEXT_PLAIN = 'text/plain';\n  // 真正的烂机器\n  Ajax.interceptors = new Interceptors();\n  return Ajax;\n}();\n/**\n * errorInfo - 错误的提示\n * @param title\n * @param message\n */\nfunction errorInfo(title, message) {\n  if (errorInfoHandler) {\n    clearTimeout(errorInfoHandler);\n    errorInfoHandler = null;\n  }\n  errorInfoHandler = setTimeout(function () {\n    antd_1.notification.error({\n      message: title,\n      description: message\n    });\n  }, notificationThrottlingTime);\n}\n/**\n * warnInfo - 警告的提示\n * @param title\n * @param message\n */\nfunction warnInfo(title, message) {\n  if (warnInfoHandler) {\n    clearTimeout(warnInfoHandler);\n    warnInfoHandler = null;\n  }\n  warnInfoHandler = setTimeout(function () {\n    antd_1.notification.warning({\n      message: title,\n      description: message\n    });\n  }, notificationThrottlingTime);\n}\n/**\n * createXHR - 创建一个XHR对象\n * @return XMLHttpRequest\n */\nfunction createXHR() {\n  return new XMLHttpRequest();\n}\n/**\n * getDefaultConfig - 返回构造函数config的默认值\n * @return IConfig\n */\nfunction getDefaultConfig() {\n  var _this = this;\n  return {\n    timeout: Ajax.TIMEOUT,\n    withCredentials: true,\n    onLoad: function () {},\n    onLoadsStart: function () {},\n    onLoadend: function () {},\n    onProgress: function () {},\n    // 超时\n    onTimeout: function () {\n      warnInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求超时'));\n    },\n    // 取消\n    onAbort: function () {\n      warnInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求终止'));\n    },\n    // 发生错误\n    onError: function () {\n      errorInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('请求发生错误'));\n    },\n    // 拦截器\n    interceptor: function (_a) {\n      var status = _a.status;\n      switch (status) {\n        case 401:\n          deal401.call(_this);\n          break;\n        case 402:\n          deal402.call(_this);\n          break;\n        default:\n          errorInfo(adhere_util_intl_1.default.v('提示'), adhere_util_intl_1.default.v('已提出请求，但未收到任何回复'));\n          break;\n      }\n    },\n    mock: false,\n    // loading的配置\n    loading: {\n      // 是否显示遮罩\n      show: false,\n      // 遮罩的内容\n      text: '',\n      // 遮罩的元素\n      el: document.body,\n      zIndex: 19999,\n      size: 'default'\n    },\n    onBeforeResponse: function () {},\n    dataKey: 'data',\n    messageKey: 'message',\n    codeKey: 'code',\n    codeSuccess: 200,\n    showWarn: true,\n    responseType: ''\n  };\n}\n/**\n * initXhrEvents - 初始化XHR的事件\n * @param xhr\n * @param events\n * @param reject\n */\nfunction initXhrEvents(_a) {\n  var xhr = _a.xhr,\n    events = _a.events,\n    reject = _a.reject;\n  var onTimeout = events.onTimeout,\n    onLoadsStart = events.onLoadsStart,\n    onProgress = events.onProgress,\n    onAbort = events.onAbort,\n    onError = events.onError,\n    onLoad = events.onLoad,\n    onLoadend = events.onLoadend;\n  if (onTimeout) {\n    xhr.addEventListener('timeout', function () {\n      var params = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        params[_i] = arguments[_i];\n      }\n      onTimeout.apply(void 0, params !== null && params !== void 0 ? params : {});\n      reject.apply(void 0, params !== null && params !== void 0 ? params : {});\n    });\n  }\n  if (onAbort) {\n    xhr.addEventListener('abort', function () {\n      var params = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        params[_i] = arguments[_i];\n      }\n      onAbort.apply(void 0, params !== null && params !== void 0 ? params : {});\n      reject.apply(void 0, params !== null && params !== void 0 ? params : {});\n    });\n  }\n  if (onError) {\n    xhr.addEventListener('error', function () {\n      var params = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        params[_i] = arguments[_i];\n      }\n      onError.apply(void 0, params !== null && params !== void 0 ? params : {});\n      reject.apply(void 0, params !== null && params !== void 0 ? params : {});\n    });\n  }\n  if (onLoadsStart) {\n    xhr.addEventListener('loadstart', onLoadsStart);\n  }\n  if (onProgress) {\n    xhr.addEventListener('progress', onProgress);\n  }\n  if (onLoad) {\n    xhr.addEventListener('load', onLoad);\n  }\n  if (onLoadend) {\n    xhr.addEventListener('loadend', onLoadend);\n  }\n}\n/**\n * resolveData - onreadystatechange中resolve的数据\n * @param params\n */\nfunction resolveData(params) {\n  // 调用response拦截器\n  var _a = Ajax.interceptors.responseReducer(params),\n    show = _a.show,\n    terminal = _a.terminal,\n    data = _a.data,\n    indicator = _a.indicator,\n    xhr = _a.xhr;\n  var targetGlobalIndicator = getGlobalIndicator(terminal);\n  return __assign({\n    xhr: xhr,\n    data: data\n  }, show ? {\n    hideIndicator: function () {\n      return targetGlobalIndicator.hide(indicator);\n    }\n  } : {});\n}\n/**\n * onreadystatechange - onreadystatechange的处理\n * @param xhr\n * @param interceptor\n * @param show\n * @param indicator\n * @param terminal\n * @param messageKey\n * @param codeKey\n * @param codeSuccess\n * @param showWarn\n * @param resolve\n * @param reject\n */\nfunction onreadystatechange(_a) {\n  // const { status, readyState, statusText, response, responseText } = xhr;\n  var xhr = _a.xhr,\n    interceptor = _a.interceptor,\n    _b = _a.loading,\n    show = _b.show,\n    indicator = _b.indicator,\n    terminal = _b.terminal,\n    _c = _a.business,\n    messageKey = _c.messageKey,\n    codeKey = _c.codeKey,\n    codeSuccess = _c.codeSuccess,\n    showWarn = _c.showWarn,\n    resolve = _a.resolve,\n    reject = _a.reject;\n  var targetGlobalIndicator = getGlobalIndicator(terminal);\n  // readyState === 4\n  if (xhr.readyState === Ajax.READY_STATE_DONE) {\n    // status success\n    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {\n      // 获取contentType\n      var contentType = xhr.getResponseHeader('Content-type');\n      // response ContentType是application/json\n      if (contentType.indexOf(Ajax.CONTENT_TYPE_APPLICATION_JSON) !== -1) {\n        // 只有application/json才进行三大值的判断\n        var jsonObj = JSON.parse(xhr.responseText);\n        if (showWarn && codeKey in jsonObj && jsonObj[codeKey] !== codeSuccess) {\n          warnInfo(adhere_util_intl_1.default.v('提示'), jsonObj[messageKey]);\n        }\n        resolve(resolveData({\n          show: show,\n          terminal: terminal,\n          data: jsonObj,\n          indicator: indicator,\n          xhr: xhr\n        }));\n      }\n      // response ContentType是xml\n      else if ([Ajax.CONTENT_TYPE_TEXT_XML, Ajax.CONTENT_TYPE_TEXT_XML].includes(contentType)) {\n        resolve(resolveData({\n          show: show,\n          terminal: terminal,\n          data: xhr.responseXML,\n          indicator: indicator,\n          xhr: xhr\n        }));\n      }\n      // response ContentType是其他\n      else {\n        resolve(resolveData({\n          show: show,\n          terminal: terminal,\n          data: xhr.response,\n          indicator: indicator,\n          xhr: xhr\n        }));\n      }\n    }\n    // status error\n    else {\n      // 3xx\n      // 4xx\n      // 5xx\n      // 拦截器\n      interceptor({\n        status: xhr.status,\n        statusText: xhr.statusText,\n        response: xhr.response,\n        responseText: xhr.responseText\n      });\n      // catch\n      // if (xhr.status)\n      reject({\n        status: xhr.status,\n        statusText: xhr.statusText,\n        response: xhr.response,\n        responseText: xhr.responseText\n      });\n      // 取消遮罩\n      if (show && indicator) {\n        targetGlobalIndicator.hide(indicator);\n      }\n    }\n  }\n}\n/**\n * isMultipartFormData\n * @description 是否是上传\n * @param data\n */\nfunction isMultipartFormData(data) {\n  return data && 'form' in data && 'data' in data && !adhere_util_1.default.isEmpty(data.form) && !adhere_util_1.default.isEmpty(data.data) && data.form instanceof HTMLFormElement;\n}\n/**\n * getGlobalIndicator\n * @param terminal\n */\nfunction getGlobalIndicator(terminal) {\n  if (terminal === 'pc') return adhere_ui_globalindicator_1.default;\n  return adhere_mobile_ui_globalindicator_1.default;\n}\n/**\n * sendPrepare - send前的准备\n */\nfunction sendPrepare(_a, _b) {\n  var _c;\n  var\n    // 当前方法独有\n    method = _a.method,\n    params = __rest(_a, [\"method\"]);\n  var resolve = _b.resolve,\n    reject = _b.reject;\n  var indicator;\n  var _d =\n    // 调用request拦截器\n    Ajax.interceptors.requestReducer(params),\n    // get|post|path|put|delete方法独有\n    path = _d.path,\n    headers = _d.headers,\n    // 数据\n    data = _d.data,\n    // 业务参数\n    mock = _d.mock,\n    loading = _d.loading,\n    onBeforeResponse = _d.onBeforeResponse,\n    // 下面是后端返回的三组值\n    _e = _d.dataKey,\n    // 下面是后端返回的三组值\n    dataKey = _e === void 0 ? 'data' : _e,\n    _f = _d.messageKey,\n    messageKey = _f === void 0 ? 'message' : _f,\n    _g = _d.codeKey,\n    codeKey = _g === void 0 ? 'code' : _g,\n    _h = _d.codeSuccess,\n    codeSuccess = _h === void 0 ? 200 : _h,\n    _j = _d.showWarn,\n    showWarn = _j === void 0 ? true : _j,\n    // curConfig\n    curConfig = __rest(_d, [\"path\", \"headers\", \"data\", \"mock\", \"loading\", \"onBeforeResponse\", \"dataKey\", \"messageKey\", \"codeKey\", \"codeSuccess\", \"showWarn\"]) // timeout && withCredentials && events\n  ;\n  var defaultLoadingText = \"\".concat(adhere_util_intl_1.default.v('加载中'), \"...\");\n  var _k = loading,\n    _l = _k.show,\n    show = _l === void 0 ? false : _l,\n    _m = _k.text,\n    text = _m === void 0 ? defaultLoadingText : _m,\n    _o = _k.el,\n    el = _o === void 0 ? document.body : _o,\n    _p = _k.zIndex,\n    zIndex = _p === void 0 ? 19999 : _p,\n    _q = _k.size,\n    size = _q === void 0 ? 'default' : _q,\n    _r = _k.terminal,\n    terminal = _r === void 0 ? 'pc' : _r;\n  var targetGlobalIndicator = getGlobalIndicator(terminal);\n  // 显示loading\n  if (show) {\n    indicator = targetGlobalIndicator.show(el || document.body, text || defaultLoadingText, zIndex, size);\n  }\n  // 如果是mock数据\n  if (mock) {\n    setTimeout(function () {\n      if (show) {\n        resolve({\n          data: path,\n          hideIndicator: function () {\n            targetGlobalIndicator.hide(indicator);\n          }\n        });\n      } else {\n        resolve(path);\n      }\n    }, 200);\n    return {\n      xhr: null,\n      contentType: ''\n    };\n  }\n  var _s = this,\n    baseURL = _s.baseURL,\n    config = _s.config;\n  var _t = Object.assign(\n    // 默认的属性\n    getDefaultConfig.call(this), config, curConfig),\n    timeout = _t.timeout,\n    withCredentials = _t.withCredentials,\n    responseType = _t.responseType,\n    interceptor = _t.interceptor,\n    events = __rest(_t, [\"timeout\", \"withCredentials\", \"responseType\", \"interceptor\"]);\n  // xhr\n  var xhr = createXHR();\n  // open\n  xhr.open(method, \"\".concat(baseURL, \"/\").concat(path), true);\n  // timeout\n  xhr.timeout = timeout;\n  // withCredentials\n  xhr.withCredentials = withCredentials;\n  // responseType\n  xhr.responseType = responseType || '';\n  var contentType = '';\n  // requestHeaders - 在open之后\n  // 如果用户设置了header\n  if (!adhere_util_1.default.isEmpty(headers) && adhere_util_1.default.isObject(headers)) {\n    // 不是get请求且如果用户没有定义Content-type 则默认添加application/json\n    if (!('Content-Type' in headers)) {\n      if (!isMultipartFormData(data)) {\n        headers['Content-Type'] = \"\".concat(Ajax.CONTENT_TYPE_APPLICATION_JSON, \";charset=utf-8\");\n      }\n      // console.log('设置了header，但是没有设置Content-Type', Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA);\n    }\n    contentType = (_c = headers['Content-Type']) !== null && _c !== void 0 ? _c : '';\n    for (var header in headers) {\n      xhr.setRequestHeader(header, headers[header]);\n    }\n  } else {\n    // 用户没有设置header\n    // 会根据data初始化heeader\n    if (!adhere_util_1.default.isEmpty(data) && adhere_util_1.default.isRef(data) && method !== ('get' || 'GET')) {\n      if (!isMultipartFormData(data)) {\n        // console.log('默认设置Content-Type', `${Ajax.CONTENT_TYPE_APPLICATION_JSON};charset=utf-8`);\n        contentType = \"\".concat(Ajax.CONTENT_TYPE_APPLICATION_JSON, \";charset=utf-8\");\n        xhr.setRequestHeader('Content-Type', \"\".concat(Ajax.CONTENT_TYPE_APPLICATION_JSON, \";charset=utf-8\"));\n      } else {\n        // console.log('有formData不需要设置Content-Type');\n        contentType = Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA;\n      }\n    }\n  }\n  // 默认Content-Type\n  // else {\n  //   xhr.setRequestHeader('Content-Type', `${Ajax.CONTENT_TYPE_APPLICATION_JSON};charset=utf-8`);\n  // }\n  // events\n  initXhrEvents({\n    xhr: xhr,\n    events: events,\n    reject: reject\n  });\n  // onreadystatechange\n  xhr.onreadystatechange = onreadystatechange.bind(this, {\n    xhr: xhr,\n    interceptor: interceptor,\n    loading: {\n      show: show,\n      terminal: terminal,\n      indicator: indicator\n    },\n    business: {\n      dataKey: dataKey,\n      messageKey: messageKey,\n      codeKey: codeKey,\n      codeSuccess: codeSuccess,\n      showWarn: showWarn\n    },\n    resolve: resolve,\n    reject: reject\n  });\n  // return\n  return {\n    xhr: xhr,\n    contentType: contentType\n  };\n}\n/**\n * getSendParams\n * @param data\n * @param contentType\n * @param customSendJSONStringify\n */\nfunction getSendParams(_a) {\n  // 四种Content-Type的处理(也就是send的参数)\n  var _b;\n  var data = _a.data,\n    _c = _a.contentType,\n    contentType = _c === void 0 ? '' : _c,\n    customSendJSONStringify = _a.customSendJSONStringify;\n  // application/json\n  // \"{}\"\n  // application/x-www-form-urlencoded\n  // key1=1&key2=2&key3=3&key4=4&key5=5\n  // multipart/form-data\n  // FormData\n  // console.log('getSendParams', data, contentType);\n  /**\n   * application/json\n   */\n  if (contentType.startsWith(Ajax.CONTENT_TYPE_APPLICATION_JSON) && adhere_util_1.default.isRef(data)) {\n    // console.log('数据需要被转换成JSON字符串', JSON.stringify(data));\n    if (customSendJSONStringify) {\n      return JSON.stringify(data, customSendJSONStringify);\n    }\n    return JSON.stringify(data);\n  }\n  /**\n   * application/x-www-form-urlencoded\n   */\n  if (contentType.startsWith(Ajax.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED) && adhere_util_1.default.isObject(data)) {\n    // console.log('application/x-www-form-urlencoded转换', JSON.stringify(data));\n    return Array.from(Object.keys(data)).map(function (k) {\n      return \"\".concat(k, \"=\").concat(encodeURIComponent(data[k]));\n    }).join('&');\n  }\n  /**\n   * multipart/form-data\n   */\n  if ( /*contentType.startsWith(Ajax.CONTENT_TYPE_MULTIPART_FORM_DATA) &&*/\n  adhere_util_1.default.isObject(data) && isMultipartFormData(data)) {\n    // console.log('multipart/form-data转换');\n    // console.log('form', data.form);\n    var formData_1 = new FormData(data.form);\n    Array.from(Object.keys(data.data)).forEach(function (k) {\n      // 获取值\n      var value = data.data[k];\n      // 如果值是函数\n      if (value instanceof Function) {\n        formData_1.append(k, value());\n      }\n      // 如果值是数组\n      else if (Array.isArray(value)) {\n        value.forEach(function (_value) {\n          formData_1.append(k, _value);\n        });\n      }\n      // 正常的情况\n      else {\n        formData_1.append(k, value);\n      }\n      // let target = value;\n      // // 如果值是函数\n      // if (value instanceof Function) {\n      //   target = value();\n      // }\n      //\n      // let params = [k];\n      //\n      // if (Array.isArray(target)) {\n      //   params = [...params, ...target];\n      // } else {\n      //   params = [...params, target];\n      // }\n      //\n      // // @ts-ignore\n      // formData.append(...params);\n      // console.log(k, data.data[k]);\n    });\n    return formData_1;\n  }\n  /**\n   * text/plain\n   */\n  if (contentType.startsWith(Ajax.CONTENT_TYPE_TEXT_PLAIN)) {\n    if (adhere_util_1.default.isString(data)) return data;\n    if (adhere_util_1.default.isObject(data)) {\n      if (customSendJSONStringify) {\n        return JSON.stringify(data, customSendJSONStringify);\n      }\n      return JSON.stringify(data);\n    }\n  }\n  return (_b = data === null || data === void 0 ? void 0 : data.toString) === null || _b === void 0 ? void 0 : _b.call(data);\n}\n/**\n * complexRequest - 复杂的请求\n * @param method\n * @param params\n */\nfunction complexRequest(method, params) {\n  var _this = this;\n  var prepare = {};\n  var promise = new Promise(function (resolve, reject) {\n    prepare = sendPrepare.call(_this, __assign(__assign(__assign(__assign({}, getDefaultConfig.call(_this)), _this.config), {\n      method: method\n    }), params), {\n      resolve: resolve,\n      reject: reject\n    });\n    var xhr = prepare.xhr,\n      contentType = prepare.contentType;\n    if (xhr) {\n      xhr.send(getSendParams.call(_this, {\n        data: params.data,\n        contentType: contentType,\n        customSendJSONStringify: params.customSendJSONStringify\n      }));\n    }\n  });\n  return __assign(__assign({}, prepare), {\n    promise: promise\n  });\n}\n/**\n * deal401\n */\nfunction deal401() {\n  // 像top发送消息\n  if (typeof window === 'undefined') return;\n  if (window.top && window.top !== window) {\n    window.top.postMessage('http_status_401', '*');\n  }\n  if (trigger402) {\n    return false;\n  }\n  window.location.href = adhere_util_1.default.casUrl({\n    baseUrl: this.systemManagerBaseURL,\n    enterUrl: window.location.href,\n    defaultLocal: 'zh_CN'\n  });\n}\n/**\n * deal402\n */\nfunction deal402() {\n  trigger402 = true;\n  if (typeof window === 'undefined') return;\n  if (window.parent && window.parent !== window) {\n    window.parent.postMessage('http_status_402', '*');\n    return false;\n  }\n  window.location.href = adhere_util_1.default.casLogoutUrl({\n    baseUrl: this.systemManagerBaseURL,\n    enterUrl: window.location.href,\n    params: '&code=402'\n  });\n}\nexports.default = Ajax;"],"names":["errorInfoHandler","warnInfoHandler","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","require","adhere_mobile_ui_globalindicator_1","adhere_ui_globalindicator_1","adhere_util_1","adhere_util_intl_1","trigger402","notificationThrottlingTime","Interceptors","requestInterceptors","Set","responseInterceptors","addRequest","handler","_this","Array","isArray","forEach","_handler","add","addResponse","remove","has","delete","requestReducer","params","from","reduce","result","interceptor","responseReducer","Ajax","baseURL","systemManagerBaseURL","config","get","_a","arg","data","prepare","promise","Promise","resolve","reject","xhr","sendPrepare","getDefaultConfig","method","send","post","complexRequest","path","put","TIMEOUT","STATUS_SUCCESS_CODES","STATUS_REDIRECT_CODES","READY_STATE_UNSENT","READY_STATE_OPENED","READY_STATE_HEADERS_RECEIVED","READY_STATE_LOADING","READY_STATE_DONE","CONTENT_TYPE_APPLICATION_JSON","CONTENT_TYPE_MULTIPART_FORM_DATA","CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED","CONTENT_TYPE_TEXT_XML","CONTENT_TYPE_APPLICATION_XML","CONTENT_TYPE_TEXT_PLAIN","interceptors","errorInfo","title","message","clearTimeout","setTimeout","notification","error","description","warnInfo","warning","createXHR","XMLHttpRequest","timeout","withCredentials","onLoad","onLoadsStart","onLoadend","onProgress","onTimeout","v","onAbort","onError","status","deal401","deal402","mock","loading","show","text","el","document","body","zIndex","size","onBeforeResponse","dataKey","messageKey","codeKey","codeSuccess","showWarn","responseType","initXhrEvents","events","addEventListener","_i","resolveData","terminal","indicator","targetGlobalIndicator","getGlobalIndicator","hideIndicator","hide","onreadystatechange","contentType","jsonObj","_b","_c","business","readyState","getResponseHeader","JSON","parse","responseText","includes","responseXML","response","statusText","isMultipartFormData","isEmpty","form","HTMLFormElement","_d","headers","_e","_f","_g","_h","_j","curConfig","defaultLoadingText","concat","_l","_m","_o","_p","_q","_r","_t","open","isObject","header","setRequestHeader","isRef","bind","getSendParams","formData_1","customSendJSONStringify","startsWith","stringify","keys","map","k","encodeURIComponent","join","FormData","Function","append","_value","isString","toString","window","top","postMessage","location","href","casUrl","baseUrl","enterUrl","defaultLocal","parent","casLogoutUrl"],"mappings":"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"}