{"version":3,"file":"suspenseSync.js","sources":["suspenseSync.js"],"sourcesContent":["import _Empty from \"antd/es/empty\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __extends } from \"tslib\";\nimport Suspense from './suspense';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n/**\n * SuspenseSync\n * @class\n * @classdesc 传数据\n */\n// @ts-ignore\n\nvar SuspenseSync =\n/** @class */\nfunction (_super) {\n  __extends(SuspenseSync, _super);\n\n  function SuspenseSync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      loading: true\n    };\n    _this.isLoading = true;\n    return _this;\n  }\n\n  SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n\n    var data = this.props.data;\n\n    if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\n      this.setState({\n        loading: false\n      }, function () {\n        _this.isLoading = false;\n      });\n    }\n  };\n\n  SuspenseSync.prototype.reset = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true; // 第一次加载\n\n      _this.isFirstLoading = false;\n      _this.isLoading = true;\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return resolve();\n      });\n    });\n  };\n\n  SuspenseSync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n\n  SuspenseSync.prototype.renderInner = function () {\n    var _a = this.props,\n        isEmpty = _a.isEmpty,\n        renderEmpty = _a.renderEmpty,\n        children = _a.children;\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : /*#__PURE__*/React.createElement(_Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n\n  SuspenseSync.prototype.fetchData = function () {};\n\n  return SuspenseSync;\n}(Suspense);\n\nSuspenseSync.defaultProps = {\n  reset: false\n};\nSuspenseSync.propTypes = {\n  firstLoading: PropTypes.node,\n  data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  isEmpty: PropTypes.func.isRequired,\n  renderEmpty: PropTypes.func\n};\nexport default SuspenseSync;"],"names":["_Empty","__extends","Suspense","ConditionalRender","PropTypes","React","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","createElement","conditional","noMatch","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"OAAOA,uHAGEC,6BACFC,iCACAC,uEACAC,kCACAC,kBAQP,IAAIC,aAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAJAF,EAAMI,MAAQ,CACZC,SAAS,GAEXL,EAAMM,WAAY,EACXN,EAwDT,OAjEAP,UAAUK,EAAcC,GAYxBD,EAAaS,UAAUC,0BAA4B,SAAUC,GAC3D,IAAIT,EAAQE,KAERQ,EAAOR,KAAKS,MAAMD,KAElBR,KAAKI,WAAaM,KAAKC,UAAUJ,EAAUC,MAAQ,MAAQE,KAAKC,UAAUH,GAAQ,KACpFR,KAAKY,SAAS,CACZT,SAAS,GACR,WACDL,EAAMM,WAAY,KAKxBR,EAAaS,UAAUQ,MAAQ,WAC7B,IAAIf,EAAQE,KAEZ,OAAO,IAAIc,QAAQ,SAAUC,GAE3BjB,EAAMkB,SAAU,EAEhBlB,EAAMmB,gBAAiB,EACvBnB,EAAMM,WAAY,EAElBN,EAAMc,SAAS,CACbT,SAAS,GACR,WACD,OAAOY,SAKbnB,EAAaS,UAAUa,YAAc,WACnC,OAAOlB,KAAKE,MAAMC,SAGpBP,EAAaS,UAAUc,YAAc,WACnC,IAAIC,EAAKpB,KAAKS,MACVY,EAAUD,EAAGC,QACbC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SAClB,OAAoB5B,MAAM6B,cAAc/B,kBAAmB,CACzDgC,aAAcJ,IACdK,QAAS,WACP,OAAOJ,EAAcA,IAA6B3B,MAAM6B,cAAclC,OAAQ,QAE/E,WACD,OAAOiC,KAIX3B,EAAaS,UAAUsB,UAAY,aAE5B/B,EAlET,CAmEEJ,UAEFI,aAAagC,aAAe,CAC1Bf,OAAO,GAETjB,aAAaiC,UAAY,CACvBC,aAAcpC,UAAUqC,KACxBvB,KAAMd,UAAUsC,UAAU,CAACtC,UAAUuC,OAAQvC,UAAUwC,QAAQC,WAC/Dd,QAAS3B,UAAU0C,KAAKD,WACxBb,YAAa5B,UAAU0C,qBAEVxC"}