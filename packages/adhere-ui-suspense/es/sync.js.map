{"version":3,"file":"Sync.js","sources":["Sync.js"],"sourcesContent":["import _Empty from \"antd/es/empty\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport Suspense from './Suspense';\n/**\n * SuspenseSync\n * @class\n * @classdesc 传数据\n */\nvar SuspenseSync = /** @class */function (_super) {\n  __extends(SuspenseSync, _super);\n  function SuspenseSync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      loading: true\n    };\n    _this.isLoading = true;\n    return _this;\n  }\n  SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n    var data = this.props.data;\n    if (this.isLoading && this.isDataDirty(data, nextProps.data)) {\n      this.setState({\n        loading: false\n      }, function () {\n        _this.isLoading = false;\n      });\n    }\n  };\n  SuspenseSync.prototype.isDataDirty = function (data, nextData) {\n    // if (typeof data !== typeof nextData) return true;\n    //\n    // if (Util.isObject(data) && Util.isObject(nextData)) {\n    //   return !Object.is(data, nextData);\n    // }\n    //\n    // if (Util.isArray(data) && Util.isArray(nextData)) {\n    //   if (data.length !== nextData.length) return true;\n    //\n    //   return data.some((t1, index) => !Object.is(t1, nextData[index]));\n    // }\n    //\n    // return false;\n    return !Object.is(data, nextData);\n  };\n  SuspenseSync.prototype.reset = function () {\n    var _this = this;\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true;\n      // 第一次加载\n      _this.isFirstLoading = false;\n      _this.isLoading = true;\n      _this.setState({\n        loading: true\n      }, function () {\n        return resolve();\n      });\n    });\n  };\n  SuspenseSync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n  SuspenseSync.prototype.renderInner = function () {\n    var _a = this.props,\n      isEmpty = _a.isEmpty,\n      renderEmpty = _a.renderEmpty,\n      children = _a.children;\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : /*#__PURE__*/React.createElement(_Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n  SuspenseSync.prototype.fetchData = function () {};\n  SuspenseSync.displayName = 'SuspenseSync';\n  return SuspenseSync;\n}(Suspense);\nSuspenseSync.defaultProps = {};\nSuspenseSync.propTypes = {\n  firstLoading: PropTypes.node,\n  isEmpty: PropTypes.func.isRequired,\n  renderEmpty: PropTypes.func,\n  data: PropTypes.object\n};\nexport default SuspenseSync;"],"names":["_Empty","__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","PropTypes","React","ConditionalRender","Suspense","SuspenseSync","_super","_this","apply","arguments","state","loading","isLoading","componentWillReceiveProps","nextProps","data","props","isDataDirty","setState","nextData","is","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","createElement","conditional","noMatch","fetchData","displayName","defaultProps","propTypes","firstLoading","node","func","isRequired","object"],"mappings":"OAAOA,WAAY,gBACnB,IAAIC,UAAYC,MAAQA,KAAKD,WAAa,WACxC,IAAIE,EAAiB,SAAuBC,EAAGC,GAQ7C,OAPAF,EAAiBG,OAAOC,iBAAkB,CACxCC,UAAW,EACb,YAAaC,MAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,CAChB,EAAK,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAC5E,IACsBN,EAAGC,CAAC,CAC5B,EACA,OAAO,SAAUD,EAAGC,GAClB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAAY,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAEnI,SAASW,IACPd,KAAKe,YAAcb,CACrB,CAHAD,EAAeC,EAAGC,CAAC,EAInBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACjF,CACF,EAAE,SACKG,cAAe,oBACfC,UAAW,eACXC,sBAAuB,iDACvBC,aAAc,aAMrB,IAAIC,aAA4B,SAAUC,GAExC,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMxB,KAAMyB,SAAS,GAAKzB,KAKhE,OAJAuB,EAAMG,MAAQ,CACZC,QAAS,CAAA,CACX,EACAJ,EAAMK,UAAY,CAAA,EACXL,CACT,CA8DA,OAtEAxB,UAAUsB,EAAcC,CAAM,EAS9BD,EAAaZ,UAAUoB,0BAA4B,SAAUC,GAC3D,IAAIP,EAAQvB,KACR+B,EAAO/B,KAAKgC,MAAMD,KAClB/B,KAAK4B,WAAa5B,KAAKiC,YAAYF,EAAMD,EAAUC,IAAI,GACzD/B,KAAKkC,SAAS,CACZP,QAAS,CAAA,CACX,EAAG,WACDJ,EAAMK,UAAY,CAAA,CACpB,CAAC,CAEL,EACAP,EAAaZ,UAAUwB,YAAc,SAAUF,EAAMI,GAcnD,MAAO,CAAC/B,OAAOgC,GAAGL,EAAMI,CAAQ,CAClC,EACAd,EAAaZ,UAAU4B,MAAQ,WAC7B,IAAId,EAAQvB,KACZ,OAAO,IAAIsC,QAAQ,SAAUC,GAE3BhB,EAAMiB,QAAU,CAAA,EAEhBjB,EAAMkB,eAAiB,CAAA,EACvBlB,EAAMK,UAAY,CAAA,EAClBL,EAAMW,SAAS,CACbP,QAAS,CAAA,CACX,EAAG,WACD,OAAOY,EAAQ,CACjB,CAAC,CACH,CAAC,CACH,EACAlB,EAAaZ,UAAUiC,YAAc,WACnC,OAAO1C,KAAK0B,MAAMC,OACpB,EACAN,EAAaZ,UAAUkC,YAAc,WACnC,IAAIC,EAAK5C,KAAKgC,MACZa,EAAUD,EAAGC,QACbC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SAChB,OAAoB7B,MAAM8B,cAAc7B,kBAAmB,CACzD8B,YAAa,CAACJ,EAAQ,EACtBK,QAAS,WACP,OAAOJ,EAAcA,EAAY,EAAiB5B,MAAM8B,cAAclD,OAAQ,IAAI,CACpF,CACF,EAAG,WACD,OAAOiD,CACT,CAAC,CACH,EACA1B,EAAaZ,UAAU0C,UAAY,aACnC9B,EAAa+B,YAAc,eACpB/B,CACT,EAAED,QAAQ,EACVC,aAAagC,aAAe,GAC5BhC,aAAaiC,UAAY,CACvBC,aAActC,UAAUuC,KACxBX,QAAS5B,UAAUwC,KAAKC,WACxBZ,YAAa7B,UAAUwC,KACvB1B,KAAMd,UAAU0C,MAClB,iBACetC"}