{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["import _Empty from \"antd/es/empty\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __extends } from \"tslib\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport Suspense from './suspense';\n/**\n * SuspenseSync\n * @class\n * @classdesc 传数据\n */\n\nvar SuspenseSync =\n/** @class */\nfunction (_super) {\n  __extends(SuspenseSync, _super);\n\n  function SuspenseSync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      loading: true\n    };\n    _this.isLoading = true;\n    return _this;\n  }\n\n  SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n\n    var data = this.props.data;\n\n    if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\n      this.setState({\n        loading: false\n      }, function () {\n        _this.isLoading = false;\n      });\n    }\n  };\n\n  SuspenseSync.prototype.reset = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true; // 第一次加载\n\n      _this.isFirstLoading = false;\n      _this.isLoading = true;\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return resolve();\n      });\n    });\n  };\n\n  SuspenseSync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n\n  SuspenseSync.prototype.renderInner = function () {\n    var _a = this.props,\n        isEmpty = _a.isEmpty,\n        renderEmpty = _a.renderEmpty,\n        children = _a.children;\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : /*#__PURE__*/React.createElement(_Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n\n  SuspenseSync.prototype.fetchData = function () {};\n\n  return SuspenseSync;\n}(Suspense);\n\nSuspenseSync.defaultProps = {};\nSuspenseSync.propTypes = {\n  firstLoading: PropTypes.node,\n  data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  isEmpty: PropTypes.func.isRequired,\n  renderEmpty: PropTypes.func\n};\nexport default SuspenseSync;"],"names":["_Empty","__extends","PropTypes","React","ConditionalRender","Suspense","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","createElement","conditional","noMatch","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"OAAOA,WAAY,sBACZ,+CACA,uCACEC,SAAwB,KAAP,eACnBC,cAAe,oBACfC,UAAW,eACXC,sBAAuB,iDACvBC,aAAc,aAOrB,IAAIC,aAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAMhE,OAJAF,EAAMI,MAAQ,CACZC,QAAS,CAAA,CACX,EACAL,EAAMM,UAAY,CAAA,EACXN,CACT,CAuDA,OAjEAP,UAAUK,EAAcC,CAAM,EAY9BD,EAAaS,UAAUC,0BAA4B,SAAUC,GAC3D,IAAIT,EAAQE,KAERQ,EAAOR,KAAKS,MAAMD,KAElBR,KAAKI,WAAaM,KAAKC,UAAUJ,EAAUC,MAAQ,EAAE,IAAME,KAAKC,UAAUH,GAAQ,EAAE,GACtFR,KAAKY,SAAS,CACZT,QAAS,CAAA,CACX,EAAG,WACDL,EAAMM,UAAY,CAAA,CACpB,CAAC,CAEL,EAEAR,EAAaS,UAAUQ,MAAQ,WAC7B,IAAIf,EAAQE,KAEZ,OAAO,IAAIc,QAAQ,SAAUC,GAE3BjB,EAAMkB,QAAU,CAAA,EAEhBlB,EAAMmB,eAAiB,CAAA,EACvBnB,EAAMM,UAAY,CAAA,EAElBN,EAAMc,SAAS,CACbT,QAAS,CAAA,CACX,EAAG,WACD,OAAOY,EAAQ,CACjB,CAAC,CACH,CAAC,CACH,EAEAnB,EAAaS,UAAUa,YAAc,WACnC,OAAOlB,KAAKE,MAAMC,OACpB,EAEAP,EAAaS,UAAUc,YAAc,WACnC,IAAIC,EAAKpB,KAAKS,MACVY,EAAUD,EAAGC,QACbC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SAClB,OAAoB9B,MAAM+B,cAAc9B,kBAAmB,CACzD+B,YAAa,CAACJ,EAAQ,EACtBK,QAAS,WACP,OAAOJ,EAAcA,EAAY,EAAiB7B,MAAM+B,cAAclC,OAAQ,IAAI,CACpF,CACF,EAAG,WACD,OAAOiC,CACT,CAAC,CACH,EAEA3B,EAAaS,UAAUsB,UAAY,aAE5B/B,CACT,EAAED,QAAQ,EAEVC,aAAagC,aAAe,GAC5BhC,aAAaiC,UAAY,CACvBC,aAActC,UAAUuC,KACxBvB,KAAMhB,UAAUwC,UAAU,CAACxC,UAAUyC,OAAQzC,UAAU0C,MAAM,EAAEC,WAC/Dd,QAAS7B,UAAU4C,KAAKD,WACxBb,YAAa9B,UAAU4C,IACzB,iBACexC"}