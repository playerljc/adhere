{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["import { __extends } from \"tslib\";\r\nimport { Empty } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Suspense from './suspense';\r\n/**\r\n * SuspenseSync\r\n * @class\r\n * @classdesc 传数据\r\n */\r\nvar SuspenseSync = /** @class */ (function (_super) {\r\n    __extends(SuspenseSync, _super);\r\n    function SuspenseSync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: true,\r\n        };\r\n        _this.isLoading = true;\r\n        return _this;\r\n    }\r\n    SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\r\n        var _this = this;\r\n        var data = this.props.data;\r\n        if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\r\n            this.setState({\r\n                loading: false,\r\n            }, function () {\r\n                _this.isLoading = false;\r\n            });\r\n        }\r\n    };\r\n    SuspenseSync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.isLoading = true;\r\n            _this.setState({\r\n                loading: true,\r\n            }, function () { return resolve(); });\r\n        });\r\n    };\r\n    SuspenseSync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseSync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (React.createElement(ConditionalRender, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : React.createElement(Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseSync.prototype.fetchData = function () { };\r\n    return SuspenseSync;\r\n}(Suspense));\r\nSuspenseSync.defaultProps = {};\r\nSuspenseSync.propTypes = {\r\n    firstLoading: PropTypes.node,\r\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\r\n    isEmpty: PropTypes.func.isRequired,\r\n    renderEmpty: PropTypes.func,\r\n};\r\nexport default SuspenseSync;\r\n//# sourceMappingURL=sync.js.map"],"names":["__extends","Empty","PropTypes","React","ConditionalRender","Suspense","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","createElement","conditional","noMatch","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"OAASA,SAAwB,KAAP,eACjBC,KAAmB,KAAN,cACfC,cAAe,oBACfC,UAAW,eACXC,sBAAuB,iDACvBC,aAAc,aAMrB,IAAIC,aAA8B,SAAUC,GAExC,SAASD,IACL,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAKhE,OAJAF,EAAMI,MAAQ,CACVC,QAAS,CAAA,CACb,EACAL,EAAMM,UAAY,CAAA,EACXN,CACX,CAiCA,OAzCAR,UAAUM,EAAcC,CAAM,EAS9BD,EAAaS,UAAUC,0BAA4B,SAAUC,GACzD,IAAIT,EAAQE,KACRQ,EAAOR,KAAKS,MAAMD,KAClBR,KAAKI,WAAaM,KAAKC,UAAUJ,EAAUC,MAAQ,EAAE,IAAME,KAAKC,UAAUH,GAAQ,EAAE,GACpFR,KAAKY,SAAS,CACVT,QAAS,CAAA,CACb,EAAG,WACCL,EAAMM,UAAY,CAAA,CACtB,CAAC,CAET,EACAR,EAAaS,UAAUQ,MAAQ,WAC3B,IAAIf,EAAQE,KACZ,OAAO,IAAIc,QAAQ,SAAUC,GAEzBjB,EAAMkB,QAAU,CAAA,EAEhBlB,EAAMmB,eAAiB,CAAA,EACvBnB,EAAMM,UAAY,CAAA,EAClBN,EAAMc,SAAS,CACXT,QAAS,CAAA,CACb,EAAG,WAAc,OAAOY,EAAQ,CAAG,CAAC,CACxC,CAAC,CACL,EACAnB,EAAaS,UAAUa,YAAc,WACjC,OAAOlB,KAAKE,MAAMC,OACtB,EACAP,EAAaS,UAAUc,YAAc,WACjC,IAAIC,EAAKpB,KAAKS,MAAOY,EAAUD,EAAGC,QAASC,EAAcF,EAAGE,YAAaC,EAAWH,EAAGG,SACvF,OAAQ9B,MAAM+B,cAAc9B,kBAAmB,CAAE+B,YAAa,CAACJ,EAAQ,EAAGK,QAAS,WAAc,OAAQJ,EAAcA,EAAY,EAAI7B,MAAM+B,cAAcjC,MAAO,IAAI,CAAI,CAAE,EAAG,WAAc,OAAOgC,CAAU,CAAE,CACpN,EACA3B,EAAaS,UAAUsB,UAAY,aAC5B/B,CACX,EAAED,QAAS,EACXC,aAAagC,aAAe,GAC5BhC,aAAaiC,UAAY,CACrBC,aAActC,UAAUuC,KACxBvB,KAAMhB,UAAUwC,UAAU,CAACxC,UAAUyC,OAAQzC,UAAU0C,MAAM,EAAEC,WAC/Dd,QAAS7B,UAAU4C,KAAKD,WACxBb,YAAa9B,UAAU4C,IAC3B,iBACexC"}