{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Empty } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Suspense from './suspense';\r\n/**\r\n * SuspenseAsync\r\n * @class\r\n * @classdesc 调用接口\r\n */\r\nvar SuspenseAsync = /** @class */ (function (_super) {\r\n    __extends(SuspenseAsync, _super);\r\n    function SuspenseAsync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: false,\r\n        };\r\n        return _this;\r\n    }\r\n    SuspenseAsync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseAsync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (React.createElement(ConditionalRender, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : React.createElement(Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseAsync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.fetchData()\r\n                .then(function (res) { return resolve(res); })\r\n                .catch(function () { return resolve(null); });\r\n        });\r\n    };\r\n    SuspenseAsync.prototype.fetchData = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a, _b, _c, _d;\r\n            if (!_this.props.fetchData) {\r\n                _this.setState({\r\n                    loading: false,\r\n                });\r\n                resolve(null);\r\n                return;\r\n            }\r\n            _this.setState({\r\n                loading: true,\r\n            });\r\n            return (_d = (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.props) === null || _a === void 0 ? void 0 : _a.fetchData) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.then(function (res) {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(res); });\r\n            })) === null || _d === void 0 ? void 0 : _d.catch(function () {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(null); });\r\n            });\r\n        });\r\n    };\r\n    return SuspenseAsync;\r\n}(Suspense));\r\nSuspenseAsync.defaultProps = {};\r\nSuspenseAsync.propTypes = {\r\n    firstLoading: PropTypes.node,\r\n    isEmpty: PropTypes.func.isRequired,\r\n    renderEmpty: PropTypes.func,\r\n    fetchData: PropTypes.func,\r\n};\r\nexport default SuspenseAsync;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Empty","PropTypes","React","ConditionalRender","Suspense","SuspenseAsync","_super","_this","apply","arguments","state","loading","showLoading","renderInner","_a","props","isEmpty","renderEmpty","children","createElement","conditional","noMatch","reset","Promise","resolve","isFirst","isFirstLoading","fetchData","then","res","catch","_c","_d","setState","_b","defaultProps","propTypes","firstLoading","node","func","isRequired"],"mappings":"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"}