import{__extends}from"tslib";import{Empty}from"antd";import PropTypes from"prop-types";import React from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Suspense from"./suspense";var SuspenseAsync=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state={loading:!1},t}return __extends(t,n),t.prototype.showLoading=function(){return this.state.loading},t.prototype.renderInner=function(){var t=this.props,n=t.isEmpty,e=t.renderEmpty,r=t.children;return React.createElement(ConditionalRender,{conditional:!n(),noMatch:function(){return e?e():React.createElement(Empty,null)}},function(){return r})},t.prototype.reset=function(){var n=this;return new Promise(function(t){n.isFirst=!0,n.isFirstLoading=!1,n.fetchData().then(function(){return t()}).catch(function(){return t()})})},t.prototype.fetchData=function(){var r=this;return new Promise(function(t){var n,e;if(r.props.fetchData)return r.setState({loading:!0}),null==(e=null==(n=null==(n=null==(e=null==r?void 0:r.props)?void 0:e.fetchData)?void 0:n.call(e))?void 0:n.then(function(){r.setState({loading:!1},function(){return t()})}))?void 0:e.catch(function(){r.setState({loading:!1},function(){return t()})});r.setState({loading:!1}),t()})},t}(Suspense);SuspenseAsync.defaultProps={},SuspenseAsync.propTypes={firstLoading:PropTypes.node,isEmpty:PropTypes.func.isRequired,renderEmpty:PropTypes.func,fetchData:PropTypes.func};export default SuspenseAsync;
//# sourceMappingURL=async.js.map
