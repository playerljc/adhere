import _Empty from"antd/es/empty";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import{__extends}from"tslib";import PropTypes from"prop-types";import React from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Suspense from"./suspense";var SuspenseAsync=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t}return __extends(t,e),t.prototype.showLoading=function(){return this.state.loading},t.prototype.renderInner=function(){var t=this.props,e=t.isEmpty,n=t.renderEmpty,r=t.children;return React.createElement(ConditionalRender,{conditional:!e(),noMatch:function(){return n?n():React.createElement(_Empty,null)}},function(){return r})},t.prototype.reset=function(){var e=this;return new Promise(function(t){e.isFirst=!0,e.isFirstLoading=!1,e.fetchData().then(function(){return t()}).catch(function(){return t()})})},t.prototype.fetchData=function(){var r=this;return new Promise(function(t){var e,n;if(r.props.fetchData)return r.setState({loading:!0}),null==(n=null==(e=null==(e=null==(n=null==r?void 0:r.props)?void 0:n.fetchData)?void 0:e.call(n))?void 0:e.then(function(){r.setState({loading:!1},function(){return t()})}))?void 0:n.catch(function(){r.setState({loading:!1},function(){return t()})});r.setState({loading:!1}),t()})},t}(Suspense);SuspenseAsync.defaultProps={},SuspenseAsync.propTypes={firstLoading:PropTypes.node,isEmpty:PropTypes.func.isRequired,renderEmpty:PropTypes.func,fetchData:PropTypes.func};export default SuspenseAsync;
//# sourceMappingURL=async.js.map
