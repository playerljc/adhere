{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["import _Spin from \"antd/es/spin\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport { __extends } from \"tslib\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  __extends(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    this.fetchData();\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      // @ts-ignore\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    // @ts-ignore\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return /*#__PURE__*/React.createElement(_Spin, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    } // @ts-ignore\n\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: selectorPrefix\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(React.Component);\n\nSuspense.defaultProps = {\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  reset: PropTypes.bool,\n  firstLoading: PropTypes.node\n};\nexport default Suspense;"],"names":["_Spin","_Skeleton","__extends","React","PropTypes","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","fetchData","renderNormalFirstLoading","result","i","push","createElement","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","size","spinning","showLoading","renderInner","renderDispatch","render","Component","defaultProps","propTypes","bool","node"],"mappings":"OAAOA,gCACAC,wCACEC,6BACFC,yBACAC,2BACP,IAAIC,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAHAF,EAAMI,SAAU,EAEhBJ,EAAMK,gBAAiB,EAChBL,EAmGT,OA5GAN,UAAUI,EAAUC,GAYpBD,EAASQ,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZP,KAAKE,SAAU,EAEfF,KAAKG,gBAAiB,EACtBH,KAAKQ,gBAITZ,EAASQ,UAAUK,kBAAoB,WACrCT,KAAKU,aAQPd,EAASe,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,KAAmBrB,MAAMsB,cAAcxB,UAAW,CACvDyB,IAAKH,EAAI,EACTI,SAAS,EACTC,QAAQ,EACRC,QAAQ,KAIZ,OAAoB1B,MAAMsB,cAAc,MAAO,CAC7CK,UAAW,GAAGC,OAAO1B,eAAgB,aACpCiB,IAQLhB,EAASQ,UAAUkB,mBAAqB,WAEtC,IAAIC,EAAevB,KAAKwB,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGF3B,EAASe,4BAQlBf,EAASQ,UAAUqB,aAAe,WAChC,OAAoBhC,MAAMsB,cAAczB,MAAO,CAC7CoC,KAAM,QACNC,SAAU3B,KAAK4B,eACd5B,KAAK6B,gBAQVjC,EAASQ,UAAU0B,eAAiB,WAClC,IAAIb,EAAUjB,KAAK4B,cAYnB,OAVI5B,KAAKE,UAAYF,KAAKG,gBAAkBc,IAC1CjB,KAAKG,gBAAiB,GAIpBH,KAAKE,SAAWF,KAAKG,iBAAmBc,IAC1CjB,KAAKE,SAAU,EACfF,KAAKG,gBAAiB,GAGpBH,KAAKE,QACAF,KAAKsB,qBAGPtB,KAAKyB,gBAGd7B,EAASQ,UAAU2B,OAAS,WAC1B,OAAoBtC,MAAMsB,cAAc,MAAO,CAC7CK,UAAWzB,gBACVK,KAAK8B,mBAGHlC,EA7GT,CA8GEH,MAAMuC,WAERpC,SAASqC,aAAe,CACtB1B,OAAO,EACPgB,aAAc,MAEhB3B,SAASsC,UAAY,CACnB3B,MAAOb,UAAUyC,KACjBZ,aAAc7B,UAAU0C,qBAEXxC"}