{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["import _Spin from \"antd/es/spin\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport { __extends } from \"tslib\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  __extends(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    var _a;\n\n    (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this);\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      // @ts-ignore\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return /*#__PURE__*/React.createElement(_Spin, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    } // @ts-ignore\n\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, this.props.className || ''),\n      style: this.props.style || {}\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(React.Component);\n\nSuspense.defaultProps = {\n  className: '',\n  style: {},\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  reset: PropTypes.bool,\n  firstLoading: PropTypes.node\n};\nexport default Suspense;"],"names":["_Spin","_Skeleton","__extends","classNames","React","PropTypes","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","_a","fetchData","call","renderNormalFirstLoading","result","i","push","createElement","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","size","spinning","showLoading","renderInner","renderDispatch","render","style","Component","defaultProps","propTypes","string","object","bool","node"],"mappings":"OAAOA,gCACAC,wCACEC,6BACFC,mCACAC,yBACAC,2BACP,IAAIC,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAHAF,EAAMI,SAAU,EAEhBJ,EAAMK,gBAAiB,EAChBL,EAqGT,OA9GAP,UAAUK,EAAUC,GAYpBD,EAASQ,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZP,KAAKE,SAAU,EAEfF,KAAKG,gBAAiB,EACtBH,KAAKQ,gBAITZ,EAASQ,UAAUK,kBAAoB,WACrC,IAAIC,EAEkE,QAArEA,EAAKV,MAAAA,UAAmC,EAASA,KAAKW,iBAA8B,IAAPD,GAAyBA,EAAGE,KAAKZ,OAQjHJ,EAASiB,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,KAAmBvB,MAAMwB,cAAc3B,UAAW,CACvD4B,IAAKH,EAAI,EACTI,SAAS,EACTC,QAAQ,EACRC,QAAQ,KAIZ,OAAoB5B,MAAMwB,cAAc,MAAO,CAC7CK,UAAW,GAAGC,OAAO5B,eAAgB,aACpCmB,IAQLlB,EAASQ,UAAUoB,mBAAqB,WACtC,IAAIC,EAAezB,KAAK0B,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGF7B,EAASiB,4BAQlBjB,EAASQ,UAAUuB,aAAe,WAChC,OAAoBlC,MAAMwB,cAAc5B,MAAO,CAC7CuC,KAAM,QACNC,SAAU7B,KAAK8B,eACd9B,KAAK+B,gBAQVnC,EAASQ,UAAU4B,eAAiB,WAClC,IAAIb,EAAUnB,KAAK8B,cAYnB,OAVI9B,KAAKE,UAAYF,KAAKG,gBAAkBgB,IAC1CnB,KAAKG,gBAAiB,GAIpBH,KAAKE,SAAWF,KAAKG,iBAAmBgB,IAC1CnB,KAAKE,SAAU,EACfF,KAAKG,gBAAiB,GAGpBH,KAAKE,QACAF,KAAKwB,qBAGPxB,KAAK2B,gBAGd/B,EAASQ,UAAU6B,OAAS,WAC1B,OAAoBxC,MAAMwB,cAAc,MAAO,CAC7CK,UAAW9B,WAAWG,eAAgBK,KAAK0B,MAAMJ,WAAa,IAC9DY,MAAOlC,KAAK0B,MAAMQ,OAAS,IAC1BlC,KAAKgC,mBAGHpC,EA/GT,CAgHEH,MAAM0C,WAERvC,SAASwC,aAAe,CACtBd,UAAW,GACXY,MAAO,GACP3B,OAAO,EACPkB,aAAc,MAEhB7B,SAASyC,UAAY,CACnBf,UAAW5B,UAAU4C,OACrBJ,MAAOxC,UAAU6C,OACjBhC,MAAOb,UAAU8C,KACjBf,aAAc/B,UAAU+C,qBAEX7C"}