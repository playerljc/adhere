{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["import _Spin from \"antd/es/spin\";\nimport _Skeleton from \"antd/es/skeleton\";\nimport { __extends } from \"tslib\";\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  __extends(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    var _a;\n\n    (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this);\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return /*#__PURE__*/React.createElement(_Spin, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    }\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, this.props.className || ''),\n      style: this.props.style || {}\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(React.PureComponent);\n\nSuspense.defaultProps = {\n  className: '',\n  style: {},\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  reset: PropTypes.bool,\n  firstLoading: PropTypes.node\n};\nexport default Suspense;"],"names":["_Spin","_Skeleton","__extends","classNames","PropTypes","React","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","_a","fetchData","call","renderNormalFirstLoading","result","i","push","createElement","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","size","spinning","showLoading","renderInner","renderDispatch","render","style","PureComponent","defaultProps","propTypes","string","object","bool","node"],"mappings":"OAAOA,UAAW,sBACXC,cAAe,0BACbC,SAAwB,KAAP,eACnBC,eAAgB,oBAChBC,cAAe,oBACfC,UAAW,QAClB,IAAIC,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAMhE,OAHAF,EAAMI,QAAU,CAAA,EAEhBJ,EAAMK,eAAiB,CAAA,EAChBL,CACT,CAkGA,OA5GAP,UAAUK,EAAUC,CAAM,EAY1BD,EAASQ,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZP,KAAKE,QAAU,CAAA,EAEfF,KAAKG,eAAiB,CAAA,EACtBH,KAAKQ,YAAY,EAErB,EAEAZ,EAASQ,UAAUK,kBAAoB,WACrC,IAAIC,EAEJ,OAACA,EAAKV,MAAAA,KAAmC,KAAA,EAASA,KAAKW,YAAgDD,EAAGE,KAAKZ,IAAI,CACrH,EAOAJ,EAASiB,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,CAAC,GACtBD,EAAOE,KAAmBtB,MAAMuB,cAAc3B,UAAW,CACvD4B,IAAKH,EAAI,EACTI,QAAS,CAAA,EACTC,OAAQ,CAAA,EACRC,OAAQ,CAAA,CACV,CAAC,CAAC,EAGJ,OAAoB3B,MAAMuB,cAAc,MAAO,CAC7CK,UAAW,GAAGC,OAAO5B,eAAgB,UAAU,CACjD,EAAGmB,CAAM,CACX,EAOAlB,EAASQ,UAAUoB,mBAAqB,WACtC,IAAIC,EAAezB,KAAK0B,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGF7B,EAASiB,yBAAyB,CAC3C,EAOAjB,EAASQ,UAAUuB,aAAe,WAChC,OAAoBjC,MAAMuB,cAAc5B,MAAO,CAC7CuC,KAAM,QACNC,SAAU7B,KAAK8B,YAAY,CAC7B,EAAG9B,KAAK+B,YAAY,CAAC,CACvB,EAOAnC,EAASQ,UAAU4B,eAAiB,WAClC,IAAIb,EAAUnB,KAAK8B,YAAY,EAW/B,OATI9B,KAAKE,SAAW,CAACF,KAAKG,gBAAkBgB,IAC1CnB,KAAKG,eAAiB,CAAA,GAGpBH,KAAKE,SAAWF,KAAKG,gBAAkB,CAACgB,IAC1CnB,KAAKE,QAAU,CAAA,EACfF,KAAKG,eAAiB,CAAA,GAGpBH,KAAKE,QACAF,KAAKwB,mBAAmB,EAG1BxB,KAAK2B,aAAa,CAC3B,EAEA/B,EAASQ,UAAU6B,OAAS,WAC1B,OAAoBvC,MAAMuB,cAAc,MAAO,CAC7CK,UAAW9B,WAAWG,eAAgBK,KAAK0B,MAAMJ,WAAa,EAAE,EAChEY,MAAOlC,KAAK0B,MAAMQ,OAAS,EAC7B,EAAGlC,KAAKgC,eAAe,CAAC,CAC1B,EAEOpC,CACT,EAAEF,MAAMyC,aAAa,EAErBvC,SAASwC,aAAe,CACtBd,UAAW,GACXY,MAAO,GACP3B,MAAO,CAAA,EACPkB,aAAc,IAChB,EACA7B,SAASyC,UAAY,CACnBf,UAAW7B,UAAU6C,OACrBJ,MAAOzC,UAAU8C,OACjBhC,MAAOd,UAAU+C,KACjBf,aAAchC,UAAUgD,IAC1B,iBACe7C"}