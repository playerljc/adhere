{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\r\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\r\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\r\n/**\r\n * SuspenseAsync\r\n * @class\r\n * @classdesc 调用接口\r\n */\r\nvar SuspenseAsync = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SuspenseAsync, _super);\r\n    function SuspenseAsync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: false,\r\n        };\r\n        return _this;\r\n    }\r\n    SuspenseAsync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseAsync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseAsync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.fetchData()\r\n                .then(function () { return resolve(); })\r\n                .catch(function () { return resolve(); });\r\n        });\r\n    };\r\n    SuspenseAsync.prototype.fetchData = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a, _b, _c, _d;\r\n            if (!_this.props.fetchData) {\r\n                _this.setState({\r\n                    loading: false,\r\n                });\r\n                resolve();\r\n                return;\r\n            }\r\n            _this.setState({\r\n                loading: true,\r\n            });\r\n            return (_d = (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.props) === null || _a === void 0 ? void 0 : _a.fetchData) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.then(function () {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(); });\r\n            })) === null || _d === void 0 ? void 0 : _d.catch(function () {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(); });\r\n            });\r\n        });\r\n    };\r\n    return SuspenseAsync;\r\n}(suspense_1.default));\r\nSuspenseAsync.defaultProps = {};\r\nSuspenseAsync.propTypes = {\r\n    firstLoading: prop_types_1.default.node,\r\n    isEmpty: prop_types_1.default.func.isRequired,\r\n    renderEmpty: prop_types_1.default.func,\r\n    fetchData: prop_types_1.default.func,\r\n};\r\nexports.default = SuspenseAsync;\r\n//# sourceMappingURL=async.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","prop_types_1","__importDefault","react_1","adhere_ui_conditionalrender_1","suspense_1","SuspenseAsync","_super","_this","apply","this","arguments","state","loading","__extends","prototype","showLoading","renderInner","_a","props","isEmpty","renderEmpty","children","default","createElement","conditional","noMatch","Empty","reset","Promise","resolve","isFirst","isFirstLoading","fetchData","then","catch","_c","_d","setState","_b","call","defaultProps","propTypes","firstLoading","node","func","isRequired"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,OAASD,QAAQ,MAAM,EACvBE,aAAeH,QAAQI,gBAAgBH,QAAQ,YAAY,CAAC,EAC5DI,QAAUL,QAAQI,gBAAgBH,QAAQ,OAAO,CAAC,EAClDK,8BAAgCN,QAAQI,gBAAgBH,QAAQ,yCAAyC,CAAC,EAC1GM,WAAaP,QAAQI,gBAAgBH,QAAQ,YAAY,CAAC,EAM1DO,cAA+B,SAAUC,GAEzC,SAASD,IACL,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAIhE,OAHAF,EAAMI,MAAQ,CACVC,QAAS,CAAA,CACb,EACOL,CACX,CA6CA,OApDAV,QAAQgB,UAAUR,EAAeC,CAAM,EAQvCD,EAAcS,UAAUC,YAAc,WAClC,OAAON,KAAKE,MAAMC,OACtB,EACAP,EAAcS,UAAUE,YAAc,WAClC,IAAIC,EAAKR,KAAKS,MAAOC,EAAUF,EAAGE,QAASC,EAAcH,EAAGG,YAAaC,EAAWJ,EAAGI,SACvF,OAAQnB,QAAQoB,QAAQC,cAAcpB,8BAA8BmB,QAAS,CAAEE,YAAa,CAACL,EAAQ,EAAGM,QAAS,WAAc,OAAQL,EAAcA,EAAY,EAAIlB,QAAQoB,QAAQC,cAAcxB,OAAO2B,MAAO,IAAI,CAAI,CAAE,EAAG,WAAc,OAAOL,CAAU,CAAE,CACnQ,EACAhB,EAAcS,UAAUa,MAAQ,WAC5B,IAAIpB,EAAQE,KACZ,OAAO,IAAImB,QAAQ,SAAUC,GAEzBtB,EAAMuB,QAAU,CAAA,EAEhBvB,EAAMwB,eAAiB,CAAA,EACvBxB,EAAMyB,UAAU,EACXC,KAAK,WAAc,OAAOJ,EAAQ,CAAG,CAAC,EACtCK,MAAM,WAAc,OAAOL,EAAQ,CAAG,CAAC,CAChD,CAAC,CACL,EACAxB,EAAcS,UAAUkB,UAAY,WAChC,IAAIzB,EAAQE,KACZ,OAAO,IAAImB,QAAQ,SAAUC,GACzB,IAAYM,EAAIC,EAChB,GAAK7B,EAAMW,MAAMc,UAUjB,OAHAzB,EAAM8B,SAAS,CACXzB,QAAS,CAAA,CACb,CAAC,EACM,OAACwB,EAAK,OAACD,EAAK,OAACG,EAAK,OAACrB,EAAKV,MAAAA,EAAqC,KAAA,EAASA,EAAMW,OAAmC,KAAA,EAASD,EAAGe,WAAuC,KAAA,EAASM,EAAGC,KAAKtB,CAAE,GAA+B,KAAA,EAASkB,EAAGF,KAAK,WACxO1B,EAAM8B,SAAS,CACXzB,QAAS,CAAA,CACb,EAAG,WAAc,OAAOiB,EAAQ,CAAG,CAAC,CACxC,CAAC,GAA+B,KAAA,EAASO,EAAGF,MAAM,WAC9C3B,EAAM8B,SAAS,CACXzB,QAAS,CAAA,CACb,EAAG,WAAc,OAAOiB,EAAQ,CAAG,CAAC,CACxC,CAAC,EAjBGtB,EAAM8B,SAAS,CACXzB,QAAS,CAAA,CACb,CAAC,EACDiB,EAAQ,CAehB,CAAC,CACL,EACOxB,CACX,EAAED,WAAWkB,OAAQ,EACrBjB,cAAcmC,aAAe,GAC7BnC,cAAcoC,UAAY,CACtBC,aAAc1C,aAAasB,QAAQqB,KACnCxB,QAASnB,aAAasB,QAAQsB,KAAKC,WACnCzB,YAAapB,aAAasB,QAAQsB,KAClCZ,UAAWhC,aAAasB,QAAQsB,IACpC,EACAjD,QAAQ2B,QAAUjB"}