{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\n/**\n * SuspenseAsync\n * @class\n * @classdesc 调用接口\n */\n\n\nvar SuspenseAsync =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SuspenseAsync, _super);\n\n  function SuspenseAsync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      loading: false\n    };\n    return _this;\n  }\n\n  SuspenseAsync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n\n  SuspenseAsync.prototype.renderInner = function () {\n    var _a = this.props,\n        isEmpty = _a.isEmpty,\n        renderEmpty = _a.renderEmpty,\n        children = _a.children;\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n\n  SuspenseAsync.prototype.reset = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true; // 第一次加载\n\n      _this.isFirstLoading = false;\n\n      _this.fetchData().then(function () {\n        return resolve();\n      }).catch(function () {\n        return resolve();\n      });\n    });\n  };\n\n  SuspenseAsync.prototype.fetchData = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      var _a, _b, _c, _d;\n\n      if (!_this.props.fetchData) {\n        _this.setState({\n          loading: false\n        });\n\n        resolve();\n        return;\n      }\n\n      _this.setState({\n        loading: true\n      });\n\n      return (_d = (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.props) === null || _a === void 0 ? void 0 : _a.fetchData) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.then(function () {\n        _this.setState({\n          loading: false\n        }, function () {\n          return resolve();\n        });\n      })) === null || _d === void 0 ? void 0 : _d.catch(function () {\n        _this.setState({\n          loading: false\n        }, function () {\n          return resolve();\n        });\n      });\n    });\n  };\n\n  return SuspenseAsync;\n}(suspense_1.default);\n\nSuspenseAsync.defaultProps = {};\nSuspenseAsync.propTypes = {\n  firstLoading: prop_types_1.default.node,\n  isEmpty: prop_types_1.default.func.isRequired,\n  renderEmpty: prop_types_1.default.func,\n  fetchData: prop_types_1.default.func\n};\nexports.default = SuspenseAsync;"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","prop_types_1","__importDefault","react_1","adhere_ui_conditionalrender_1","suspense_1","SuspenseAsync","_super","_this","apply","this","arguments","state","loading","__extends","prototype","showLoading","renderInner","_a","props","isEmpty","renderEmpty","children","default","createElement","conditional","noMatch","Empty","reset","Promise","resolve","isFirst","isFirstLoading","fetchData","then","catch","_c","_d","setState","_b","call","defaultProps","propTypes","firstLoading","node","func","isRequired"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDA,QAAQ,wCAAwC,EAEhDA,QAAQ,+BAA+B,EAEvCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,QAAUL,QAAQ,OAAO,EAEzBM,OAASN,QAAQ,MAAM,EAEvBO,aAAeF,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAE5DS,QAAUJ,QAAQG,gBAAgBR,QAAQ,OAAO,CAAC,EAElDU,8BAAgCL,QAAQG,gBAAgBR,QAAQ,yCAAyC,CAAC,EAE1GW,WAAaN,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAQ1DY,cAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAKhE,OAHAF,EAAMI,MAAQ,CACZC,QAAS,CAAA,CACX,EACOL,CACT,CAyEA,OAlFAT,QAAQe,UAAUR,EAAeC,CAAM,EAWvCD,EAAcS,UAAUC,YAAc,WACpC,OAAON,KAAKE,MAAMC,OACpB,EAEAP,EAAcS,UAAUE,YAAc,WACpC,IAAIC,EAAKR,KAAKS,MACVC,EAAUF,EAAGE,QACbC,EAAcH,EAAGG,YACjBC,EAAWJ,EAAGI,SAClB,OAAOnB,QAAQoB,QAAQC,cAAcpB,8BAA8BmB,QAAS,CAC1EE,YAAa,CAACL,EAAQ,EACtBM,QAAS,WACP,OAAOL,EAAcA,EAAY,EAAIlB,QAAQoB,QAAQC,cAAcxB,OAAO2B,MAAO,IAAI,CACvF,CACF,EAAG,WACD,OAAOL,CACT,CAAC,CACH,EAEAhB,EAAcS,UAAUa,MAAQ,WAC9B,IAAIpB,EAAQE,KAEZ,OAAO,IAAImB,QAAQ,SAAUC,GAE3BtB,EAAMuB,QAAU,CAAA,EAEhBvB,EAAMwB,eAAiB,CAAA,EAEvBxB,EAAMyB,UAAU,EAAEC,KAAK,WACrB,OAAOJ,EAAQ,CACjB,CAAC,EAAEK,MAAM,WACP,OAAOL,EAAQ,CACjB,CAAC,CACH,CAAC,CACH,EAEAxB,EAAcS,UAAUkB,UAAY,WAClC,IAAIzB,EAAQE,KAEZ,OAAO,IAAImB,QAAQ,SAAUC,GAC3B,IAAYM,EAAIC,EAEhB,GAAK7B,EAAMW,MAAMc,UAajB,OAJAzB,EAAM8B,SAAS,CACbzB,QAAS,CAAA,CACX,CAAC,EAEM,OAACwB,EAAK,OAACD,EAAK,OAACG,EAAK,OAACrB,EAAKV,MAAAA,EAAqC,KAAA,EAASA,EAAMW,OAAmC,KAAA,EAASD,EAAGe,WAAuC,KAAA,EAASM,EAAGC,KAAKtB,CAAE,GAA+B,KAAA,EAASkB,EAAGF,KAAK,WAC1O1B,EAAM8B,SAAS,CACbzB,QAAS,CAAA,CACX,EAAG,WACD,OAAOiB,EAAQ,CACjB,CAAC,CACH,CAAC,GAA+B,KAAA,EAASO,EAAGF,MAAM,WAChD3B,EAAM8B,SAAS,CACbzB,QAAS,CAAA,CACX,EAAG,WACD,OAAOiB,EAAQ,CACjB,CAAC,CACH,CAAC,EAxBCtB,EAAM8B,SAAS,CACbzB,QAAS,CAAA,CACX,CAAC,EAEDiB,EAAQ,CAqBZ,CAAC,CACH,EAEOxB,CACT,EAAED,WAAWkB,OAAO,EAEpBjB,cAAcmC,aAAe,GAC7BnC,cAAcoC,UAAY,CACxBC,aAAc1C,aAAasB,QAAQqB,KACnCxB,QAASnB,aAAasB,QAAQsB,KAAKC,WACnCzB,YAAapB,aAAasB,QAAQsB,KAClCZ,UAAWhC,aAAasB,QAAQsB,IAClC,EACAhD,QAAQ0B,QAAUjB"}