{"version":3,"file":"async.js","sources":["async.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar antd_1 = require(\"antd\");\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar adhere_ui_conditionalrender_1 = __importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar suspense_1 = __importDefault(require(\"./suspense\"));\r\n/**\r\n * SuspenseAsync\r\n * @class\r\n * @classdesc 调用接口\r\n */\r\nvar SuspenseAsync = /** @class */ (function (_super) {\r\n    __extends(SuspenseAsync, _super);\r\n    function SuspenseAsync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: false,\r\n        };\r\n        return _this;\r\n    }\r\n    SuspenseAsync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseAsync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseAsync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.fetchData()\r\n                .then(function (res) { return resolve(res); })\r\n                .catch(function () { return resolve(null); });\r\n        });\r\n    };\r\n    SuspenseAsync.prototype.fetchData = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var _a, _b, _c, _d;\r\n            if (!_this.props.fetchData) {\r\n                _this.setState({\r\n                    loading: false,\r\n                });\r\n                resolve(null);\r\n                return;\r\n            }\r\n            _this.setState({\r\n                loading: true,\r\n            });\r\n            return (_d = (_c = (_b = (_a = _this === null || _this === void 0 ? void 0 : _this.props) === null || _a === void 0 ? void 0 : _a.fetchData) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.then(function (res) {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(res); });\r\n            })) === null || _d === void 0 ? void 0 : _d.catch(function () {\r\n                _this.setState({\r\n                    loading: false,\r\n                }, function () { return resolve(null); });\r\n            });\r\n        });\r\n    };\r\n    return SuspenseAsync;\r\n}(suspense_1.default));\r\nSuspenseAsync.defaultProps = {};\r\nSuspenseAsync.propTypes = {\r\n    firstLoading: prop_types_1.default.node,\r\n    isEmpty: prop_types_1.default.func.isRequired,\r\n    renderEmpty: prop_types_1.default.func,\r\n    fetchData: prop_types_1.default.func,\r\n};\r\nexports.default = SuspenseAsync;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","require","prop_types_1","react_1","adhere_ui_conditionalrender_1","suspense_1","SuspenseAsync","_super","_this","apply","arguments","state","loading","showLoading","renderInner","_a","props","isEmpty","renderEmpty","children","createElement","conditional","noMatch","Empty","reset","Promise","resolve","isFirst","isFirstLoading","fetchData","then","res","catch","_c","_d","setState","_b","defaultProps","propTypes","firstLoading","node","func","isRequired"],"mappings":"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"}