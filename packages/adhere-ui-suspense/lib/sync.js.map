{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Empty } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Suspense from './suspense';\r\n/**\r\n * SuspenseSync\r\n * @class\r\n * @classdesc 传数据\r\n */\r\nvar SuspenseSync = /** @class */ (function (_super) {\r\n    __extends(SuspenseSync, _super);\r\n    function SuspenseSync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: true,\r\n        };\r\n        _this.isLoading = true;\r\n        return _this;\r\n    }\r\n    SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\r\n        var _this = this;\r\n        var data = this.props.data;\r\n        if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\r\n            this.setState({\r\n                loading: false,\r\n            }, function () {\r\n                _this.isLoading = false;\r\n            });\r\n        }\r\n    };\r\n    SuspenseSync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.isLoading = true;\r\n            _this.setState({\r\n                loading: true,\r\n            }, function () { return resolve(); });\r\n        });\r\n    };\r\n    SuspenseSync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseSync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (React.createElement(ConditionalRender, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : React.createElement(Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseSync.prototype.fetchData = function () { };\r\n    return SuspenseSync;\r\n}(Suspense));\r\nSuspenseSync.defaultProps = {};\r\nSuspenseSync.propTypes = {\r\n    firstLoading: PropTypes.node,\r\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\r\n    isEmpty: PropTypes.func.isRequired,\r\n    renderEmpty: PropTypes.func,\r\n};\r\nexport default SuspenseSync;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Empty","PropTypes","React","ConditionalRender","Suspense","SuspenseSync","_super","_this","apply","arguments","state","loading","isLoading","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","createElement","conditional","noMatch","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,EAAG,YAAaC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,GAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAAI,GAC/EN,EAAGC,CAAC,CAC7B,EACA,OAAO,SAAUD,EAAGC,GAChB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAE5F,SAASW,IAAOd,KAAKe,YAAcb,CAAG,CADtCD,EAAcC,EAAGC,CAAC,EAElBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACnF,CACH,EAAE,SACMG,KAAmB,KAAN,cACfC,cAAe,oBACfC,UAAW,eACXC,sBAAuB,iDACvBC,aAAc,aAMrB,IAAIC,aAA8B,SAAUC,GAExC,SAASD,IACL,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMzB,KAAM0B,SAAS,GAAK1B,KAKhE,OAJAwB,EAAMG,MAAQ,CACVC,QAAS,CAAA,CACb,EACAJ,EAAMK,UAAY,CAAA,EACXL,CACX,CAiCA,OAzCAzB,UAAUuB,EAAcC,CAAM,EAS9BD,EAAab,UAAUqB,0BAA4B,SAAUC,GACzD,IAAIP,EAAQxB,KACRgC,EAAOhC,KAAKiC,MAAMD,KAClBhC,KAAK6B,WAAaK,KAAKC,UAAUJ,EAAUC,MAAQ,EAAE,IAAME,KAAKC,UAAUH,GAAQ,EAAE,GACpFhC,KAAKoC,SAAS,CACVR,QAAS,CAAA,CACb,EAAG,WACCJ,EAAMK,UAAY,CAAA,CACtB,CAAC,CAET,EACAP,EAAab,UAAU4B,MAAQ,WAC3B,IAAIb,EAAQxB,KACZ,OAAO,IAAIsC,QAAQ,SAAUC,GAEzBf,EAAMgB,QAAU,CAAA,EAEhBhB,EAAMiB,eAAiB,CAAA,EACvBjB,EAAMK,UAAY,CAAA,EAClBL,EAAMY,SAAS,CACXR,QAAS,CAAA,CACb,EAAG,WAAc,OAAOW,EAAQ,CAAG,CAAC,CACxC,CAAC,CACL,EACAjB,EAAab,UAAUiC,YAAc,WACjC,OAAO1C,KAAK2B,MAAMC,OACtB,EACAN,EAAab,UAAUkC,YAAc,WACjC,IAAIC,EAAK5C,KAAKiC,MAAOY,EAAUD,EAAGC,QAASC,EAAcF,EAAGE,YAAaC,EAAWH,EAAGG,SACvF,OAAQ5B,MAAM6B,cAAc5B,kBAAmB,CAAE6B,YAAa,CAACJ,EAAQ,EAAGK,QAAS,WAAc,OAAQJ,EAAcA,EAAY,EAAI3B,MAAM6B,cAAc/B,MAAO,IAAI,CAAI,CAAE,EAAG,WAAc,OAAO8B,CAAU,CAAE,CACpN,EACAzB,EAAab,UAAU0C,UAAY,aAC5B7B,CACX,EAAED,QAAS,EACXC,aAAa8B,aAAe,GAC5B9B,aAAa+B,UAAY,CACrBC,aAAcpC,UAAUqC,KACxBvB,KAAMd,UAAUsC,UAAU,CAACtC,UAAUuC,OAAQvC,UAAUwC,MAAM,EAAEC,WAC/Dd,QAAS3B,UAAU0C,KAAKD,WACxBb,YAAa5B,UAAU0C,IAC3B,iBACetC"}