{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\r\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\r\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\r\n/**\r\n * SuspenseSync\r\n * @class\r\n * @classdesc 传数据\r\n */\r\nvar SuspenseSync = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SuspenseSync, _super);\r\n    function SuspenseSync() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            loading: true,\r\n        };\r\n        _this.isLoading = true;\r\n        return _this;\r\n    }\r\n    SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\r\n        var _this = this;\r\n        var data = this.props.data;\r\n        if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\r\n            this.setState({\r\n                loading: false,\r\n            }, function () {\r\n                _this.isLoading = false;\r\n            });\r\n        }\r\n    };\r\n    SuspenseSync.prototype.reset = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            // 第一次\r\n            _this.isFirst = true;\r\n            // 第一次加载\r\n            _this.isFirstLoading = false;\r\n            _this.isLoading = true;\r\n            _this.setState({\r\n                loading: true,\r\n            }, function () { return resolve(); });\r\n        });\r\n    };\r\n    SuspenseSync.prototype.showLoading = function () {\r\n        return this.state.loading;\r\n    };\r\n    SuspenseSync.prototype.renderInner = function () {\r\n        var _a = this.props, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, children = _a.children;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !isEmpty(), noMatch: function () { return (renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null)); } }, function () { return children; }));\r\n    };\r\n    SuspenseSync.prototype.fetchData = function () { };\r\n    return SuspenseSync;\r\n}(suspense_1.default));\r\nSuspenseSync.defaultProps = {};\r\nSuspenseSync.propTypes = {\r\n    firstLoading: prop_types_1.default.node,\r\n    data: prop_types_1.default.oneOfType([prop_types_1.default.object, prop_types_1.default.array]).isRequired,\r\n    isEmpty: prop_types_1.default.func.isRequired,\r\n    renderEmpty: prop_types_1.default.func,\r\n};\r\nexports.default = SuspenseSync;\r\n//# sourceMappingURL=sync.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","prop_types_1","__importDefault","react_1","adhere_ui_conditionalrender_1","suspense_1","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","__extends","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","default","createElement","conditional","noMatch","Empty","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,OAASD,QAAQ,MAAM,EACvBE,aAAeH,QAAQI,gBAAgBH,QAAQ,YAAY,CAAC,EAC5DI,QAAUL,QAAQI,gBAAgBH,QAAQ,OAAO,CAAC,EAClDK,8BAAgCN,QAAQI,gBAAgBH,QAAQ,yCAAyC,CAAC,EAC1GM,WAAaP,QAAQI,gBAAgBH,QAAQ,YAAY,CAAC,EAM1DO,aAA8B,SAAUC,GAExC,SAASD,IACL,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAKhE,OAJAF,EAAMI,MAAQ,CACVC,QAAS,CAAA,CACb,EACAL,EAAMM,UAAY,CAAA,EACXN,CACX,CAiCA,OAzCAV,QAAQiB,UAAUT,EAAcC,CAAM,EAStCD,EAAaU,UAAUC,0BAA4B,SAAUC,GACzD,IAAIV,EAAQE,KACRS,EAAOT,KAAKU,MAAMD,KAClBT,KAAKI,WAAaO,KAAKC,UAAUJ,EAAUC,MAAQ,EAAE,IAAME,KAAKC,UAAUH,GAAQ,EAAE,GACpFT,KAAKa,SAAS,CACVV,QAAS,CAAA,CACb,EAAG,WACCL,EAAMM,UAAY,CAAA,CACtB,CAAC,CAET,EACAR,EAAaU,UAAUQ,MAAQ,WAC3B,IAAIhB,EAAQE,KACZ,OAAO,IAAIe,QAAQ,SAAUC,GAEzBlB,EAAMmB,QAAU,CAAA,EAEhBnB,EAAMoB,eAAiB,CAAA,EACvBpB,EAAMM,UAAY,CAAA,EAClBN,EAAMe,SAAS,CACXV,QAAS,CAAA,CACb,EAAG,WAAc,OAAOa,EAAQ,CAAG,CAAC,CACxC,CAAC,CACL,EACApB,EAAaU,UAAUa,YAAc,WACjC,OAAOnB,KAAKE,MAAMC,OACtB,EACAP,EAAaU,UAAUc,YAAc,WACjC,IAAIC,EAAKrB,KAAKU,MAAOY,EAAUD,EAAGC,QAASC,EAAcF,EAAGE,YAAaC,EAAWH,EAAGG,SACvF,OAAQ/B,QAAQgC,QAAQC,cAAchC,8BAA8B+B,QAAS,CAAEE,YAAa,CAACL,EAAQ,EAAGM,QAAS,WAAc,OAAQL,EAAcA,EAAY,EAAI9B,QAAQgC,QAAQC,cAAcpC,OAAOuC,MAAO,IAAI,CAAI,CAAE,EAAG,WAAc,OAAOL,CAAU,CAAE,CACnQ,EACA5B,EAAaU,UAAUwB,UAAY,aAC5BlC,CACX,EAAED,WAAW8B,OAAQ,EACrB7B,aAAamC,aAAe,GAC5BnC,aAAaoC,UAAY,CACrBC,aAAc1C,aAAakC,QAAQS,KACnCzB,KAAMlB,aAAakC,QAAQU,UAAU,CAAC5C,aAAakC,QAAQW,OAAQ7C,aAAakC,QAAQY,MAAM,EAAEC,WAChGhB,QAAS/B,aAAakC,QAAQc,KAAKD,WACnCf,YAAahC,aAAakC,QAAQc,IACtC,EACArD,QAAQuC,QAAU7B"}