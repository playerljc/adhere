{"version":3,"file":"sync.js","sources":["sync.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\n/**\n * SuspenseSync\n * @class\n * @classdesc 传数据\n */\n\n\nvar SuspenseSync =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SuspenseSync, _super);\n\n  function SuspenseSync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      loading: true\n    };\n    _this.isLoading = true;\n    return _this;\n  }\n\n  SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n\n    var data = this.props.data;\n\n    if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\n      this.setState({\n        loading: false\n      }, function () {\n        _this.isLoading = false;\n      });\n    }\n  };\n\n  SuspenseSync.prototype.reset = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true; // 第一次加载\n\n      _this.isFirstLoading = false;\n      _this.isLoading = true;\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return resolve();\n      });\n    });\n  };\n\n  SuspenseSync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n\n  SuspenseSync.prototype.renderInner = function () {\n    var _a = this.props,\n        isEmpty = _a.isEmpty,\n        renderEmpty = _a.renderEmpty,\n        children = _a.children;\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n\n  SuspenseSync.prototype.fetchData = function () {};\n\n  return SuspenseSync;\n}(suspense_1.default);\n\nSuspenseSync.defaultProps = {};\nSuspenseSync.propTypes = {\n  firstLoading: prop_types_1.default.node,\n  data: prop_types_1.default.oneOfType([prop_types_1.default.object, prop_types_1.default.array]).isRequired,\n  isEmpty: prop_types_1.default.func.isRequired,\n  renderEmpty: prop_types_1.default.func\n};\nexports.default = SuspenseSync;"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","prop_types_1","__importDefault","react_1","adhere_ui_conditionalrender_1","suspense_1","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","__extends","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","default","createElement","conditional","noMatch","Empty","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDA,QAAQ,wCAAwC,EAEhDA,QAAQ,+BAA+B,EAEvCC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,QAAUL,QAAQ,OAAO,EAEzBM,OAASN,QAAQ,MAAM,EAEvBO,aAAeF,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAE5DS,QAAUJ,QAAQG,gBAAgBR,QAAQ,OAAO,CAAC,EAElDU,8BAAgCL,QAAQG,gBAAgBR,QAAQ,yCAAyC,CAAC,EAE1GW,WAAaN,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAQ1DY,aAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAMhE,OAJAF,EAAMI,MAAQ,CACZC,QAAS,CAAA,CACX,EACAL,EAAMM,UAAY,CAAA,EACXN,CACT,CAuDA,OAjEAT,QAAQgB,UAAUT,EAAcC,CAAM,EAYtCD,EAAaU,UAAUC,0BAA4B,SAAUC,GAC3D,IAAIV,EAAQE,KAERS,EAAOT,KAAKU,MAAMD,KAElBT,KAAKI,WAAaO,KAAKC,UAAUJ,EAAUC,MAAQ,EAAE,IAAME,KAAKC,UAAUH,GAAQ,EAAE,GACtFT,KAAKa,SAAS,CACZV,QAAS,CAAA,CACX,EAAG,WACDL,EAAMM,UAAY,CAAA,CACpB,CAAC,CAEL,EAEAR,EAAaU,UAAUQ,MAAQ,WAC7B,IAAIhB,EAAQE,KAEZ,OAAO,IAAIe,QAAQ,SAAUC,GAE3BlB,EAAMmB,QAAU,CAAA,EAEhBnB,EAAMoB,eAAiB,CAAA,EACvBpB,EAAMM,UAAY,CAAA,EAElBN,EAAMe,SAAS,CACbV,QAAS,CAAA,CACX,EAAG,WACD,OAAOa,EAAQ,CACjB,CAAC,CACH,CAAC,CACH,EAEApB,EAAaU,UAAUa,YAAc,WACnC,OAAOnB,KAAKE,MAAMC,OACpB,EAEAP,EAAaU,UAAUc,YAAc,WACnC,IAAIC,EAAKrB,KAAKU,MACVY,EAAUD,EAAGC,QACbC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SAClB,OAAO/B,QAAQgC,QAAQC,cAAchC,8BAA8B+B,QAAS,CAC1EE,YAAa,CAACL,EAAQ,EACtBM,QAAS,WACP,OAAOL,EAAcA,EAAY,EAAI9B,QAAQgC,QAAQC,cAAcpC,OAAOuC,MAAO,IAAI,CACvF,CACF,EAAG,WACD,OAAOL,CACT,CAAC,CACH,EAEA5B,EAAaU,UAAUwB,UAAY,aAE5BlC,CACT,EAAED,WAAW8B,OAAO,EAEpB7B,aAAamC,aAAe,GAC5BnC,aAAaoC,UAAY,CACvBC,aAAc1C,aAAakC,QAAQS,KACnCzB,KAAMlB,aAAakC,QAAQU,UAAU,CAAC5C,aAAakC,QAAQW,OAAQ7C,aAAakC,QAAQY,MAAM,EAAEC,WAChGhB,QAAS/B,aAAakC,QAAQc,KAAKD,WACnCf,YAAahC,aAAakC,QAAQc,IACpC,EACApD,QAAQsC,QAAU7B"}