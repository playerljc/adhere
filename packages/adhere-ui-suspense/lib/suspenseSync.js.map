{"version":3,"file":"suspenseSync.js","sources":["suspenseSync.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar suspense_1 = tslib_1.__importDefault(require(\"./suspense\"));\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar antd_1 = require(\"antd\");\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n/**\n * SuspenseSync\n * @class\n * @classdesc 传数据\n */\n// @ts-ignore\n\n\nvar SuspenseSync =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(SuspenseSync, _super);\n\n  function SuspenseSync() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      loading: true\n    };\n    _this.isLoading = true;\n    return _this;\n  }\n\n  SuspenseSync.prototype.componentWillReceiveProps = function (nextProps) {\n    var _this = this;\n\n    var data = this.props.data;\n\n    if (this.isLoading && JSON.stringify(nextProps.data || []) !== JSON.stringify(data || [])) {\n      this.setState({\n        loading: false\n      }, function () {\n        _this.isLoading = false;\n      });\n    }\n  };\n\n  SuspenseSync.prototype.reset = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      // 第一次\n      _this.isFirst = true; // 第一次加载\n\n      _this.isFirstLoading = false;\n      _this.isLoading = true;\n\n      _this.setState({\n        loading: true\n      }, function () {\n        return resolve();\n      });\n    });\n  };\n\n  SuspenseSync.prototype.showLoading = function () {\n    return this.state.loading;\n  };\n\n  SuspenseSync.prototype.renderInner = function () {\n    var _a = this.props,\n        isEmpty = _a.isEmpty,\n        renderEmpty = _a.renderEmpty,\n        children = _a.children;\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: !isEmpty(),\n      noMatch: function noMatch() {\n        return renderEmpty ? renderEmpty() : react_1.default.createElement(antd_1.Empty, null);\n      }\n    }, function () {\n      return children;\n    });\n  };\n\n  SuspenseSync.prototype.fetchData = function () {};\n\n  return SuspenseSync;\n}(suspense_1.default);\n\nSuspenseSync.defaultProps = {\n  reset: false\n};\nSuspenseSync.propTypes = {\n  firstLoading: prop_types_1.default.node,\n  data: prop_types_1.default.oneOfType([prop_types_1.default.object, prop_types_1.default.array]).isRequired,\n  isEmpty: prop_types_1.default.func.isRequired,\n  renderEmpty: prop_types_1.default.func\n};\nexports.default = SuspenseSync;"],"names":["require","Object","defineProperty","exports","value","tslib_1","suspense_1","__importDefault","adhere_ui_conditionalrender_1","antd_1","prop_types_1","react_1","SuspenseSync","_super","_this","apply","this","arguments","state","loading","isLoading","__extends","prototype","componentWillReceiveProps","nextProps","data","props","JSON","stringify","setState","reset","Promise","resolve","isFirst","isFirstLoading","showLoading","renderInner","_a","isEmpty","renderEmpty","children","default","createElement","conditional","noMatch","Empty","fetchData","defaultProps","propTypes","firstLoading","node","oneOfType","object","array","isRequired","func"],"mappings":"aAEAA,QAAQ,gDAERA,QAAQ,0CAERA,QAAQ,iCAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,WAAaD,QAAQE,gBAAgBP,QAAQ,eAE7CQ,8BAAgCH,QAAQE,gBAAgBP,QAAQ,4CAEhES,OAAST,QAAQ,QAEjBU,aAAeL,QAAQE,gBAAgBP,QAAQ,eAE/CW,QAAUN,QAAQE,gBAAgBP,QAAQ,UAS1CY,aAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAJAF,EAAMI,MAAQ,CACZC,SAAS,GAEXL,EAAMM,WAAY,EACXN,EAwDT,OAjEAT,QAAQgB,UAAUT,EAAcC,GAYhCD,EAAaU,UAAUC,0BAA4B,SAAUC,GAC3D,IAAIV,EAAQE,KAERS,EAAOT,KAAKU,MAAMD,KAElBT,KAAKI,WAAaO,KAAKC,UAAUJ,EAAUC,MAAQ,MAAQE,KAAKC,UAAUH,GAAQ,KACpFT,KAAKa,SAAS,CACZV,SAAS,GACR,WACDL,EAAMM,WAAY,KAKxBR,EAAaU,UAAUQ,MAAQ,WAC7B,IAAIhB,EAAQE,KAEZ,OAAO,IAAIe,QAAQ,SAAUC,GAE3BlB,EAAMmB,SAAU,EAEhBnB,EAAMoB,gBAAiB,EACvBpB,EAAMM,WAAY,EAElBN,EAAMe,SAAS,CACbV,SAAS,GACR,WACD,OAAOa,SAKbpB,EAAaU,UAAUa,YAAc,WACnC,OAAOnB,KAAKE,MAAMC,SAGpBP,EAAaU,UAAUc,YAAc,WACnC,IAAIC,EAAKrB,KAAKU,MACVY,EAAUD,EAAGC,QACbC,EAAcF,EAAGE,YACjBC,EAAWH,EAAGG,SAClB,OAAO7B,QAAQ8B,QAAQC,cAAclC,8BAA8BiC,QAAS,CAC1EE,aAAcL,IACdM,QAAS,WACP,OAAOL,EAAcA,IAAgB5B,QAAQ8B,QAAQC,cAAcjC,OAAOoC,MAAO,QAElF,WACD,OAAOL,KAIX5B,EAAaU,UAAUwB,UAAY,aAE5BlC,EAlET,CAmEEN,WAAWmC,SAEb7B,aAAamC,aAAe,CAC1BjB,OAAO,GAETlB,aAAaoC,UAAY,CACvBC,aAAcvC,aAAa+B,QAAQS,KACnCzB,KAAMf,aAAa+B,QAAQU,UAAU,CAACzC,aAAa+B,QAAQW,OAAQ1C,aAAa+B,QAAQY,QAAQC,WAChGhB,QAAS5B,aAAa+B,QAAQc,KAAKD,WACnCf,YAAa7B,aAAa+B,QAAQc,MAEpCpD,QAAQsC,QAAU7B"}