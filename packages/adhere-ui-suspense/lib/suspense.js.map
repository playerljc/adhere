{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    var _a;\n\n    (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this);\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push(react_1.default.createElement(antd_1.Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return react_1.default.createElement(antd_1.Spin, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    }\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(selectorPrefix, this.props.className || ''),\n      style: this.props.style || {}\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(react_1.default.PureComponent);\n\nSuspense.defaultProps = {\n  className: '',\n  style: {},\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  className: prop_types_1.default.string,\n  style: prop_types_1.default.object,\n  reset: prop_types_1.default.bool,\n  firstLoading: prop_types_1.default.node\n};\nexports.default = Suspense;"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","classnames_1","__importDefault","prop_types_1","react_1","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","__extends","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","_a","fetchData","call","renderNormalFirstLoading","result","i","push","default","createElement","Skeleton","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","Spin","size","spinning","showLoading","renderInner","renderDispatch","render","style","PureComponent","defaultProps","propTypes","string","object","bool","node"],"mappings":"AAAA,aAEAA,QAAQ,8CAA8C,EAEtDC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EAED,IAAIC,QAAUL,QAAQ,OAAO,EAEzBM,OAASN,QAAQ,MAAM,EAEvBO,aAAeF,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAE5DS,aAAeJ,QAAQG,gBAAgBR,QAAQ,YAAY,CAAC,EAE5DU,QAAUL,QAAQG,gBAAgBR,QAAQ,OAAO,CAAC,EAElDW,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,SAAS,GAAKD,KAMhE,OAHAF,EAAMI,QAAU,CAAA,EAEhBJ,EAAMK,eAAiB,CAAA,EAChBL,CACT,CAkGA,OA5GAT,QAAQe,UAAUR,EAAUC,CAAM,EAYlCD,EAASS,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZR,KAAKE,QAAU,CAAA,EAEfF,KAAKG,eAAiB,CAAA,EACtBH,KAAKS,YAAY,EAErB,EAEAb,EAASS,UAAUK,kBAAoB,WACrC,IAAIC,EAEJ,OAACA,EAAKX,MAAAA,KAAmC,KAAA,EAASA,KAAKY,YAAgDD,EAAGE,KAAKb,IAAI,CACrH,EAOAJ,EAASkB,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,CAAC,GACtBD,EAAOE,KAAKvB,QAAQwB,QAAQC,cAAc7B,OAAO8B,SAAU,CACzDC,IAAKL,EAAI,EACTM,QAAS,CAAA,EACTC,OAAQ,CAAA,EACRC,OAAQ,CAAA,CACV,CAAC,CAAC,EAGJ,OAAO9B,QAAQwB,QAAQC,cAAc,MAAO,CAC1CM,UAAW,GAAGC,OAAO/B,eAAgB,UAAU,CACjD,EAAGoB,CAAM,CACX,EAOAnB,EAASS,UAAUsB,mBAAqB,WACtC,IAAIC,EAAe5B,KAAK6B,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGFhC,EAASkB,yBAAyB,CAC3C,EAOAlB,EAASS,UAAUyB,aAAe,WAChC,OAAOpC,QAAQwB,QAAQC,cAAc7B,OAAOyC,KAAM,CAChDC,KAAM,QACNC,SAAUjC,KAAKkC,YAAY,CAC7B,EAAGlC,KAAKmC,YAAY,CAAC,CACvB,EAOAvC,EAASS,UAAU+B,eAAiB,WAClC,IAAId,EAAUtB,KAAKkC,YAAY,EAW/B,OATIlC,KAAKE,SAAW,CAACF,KAAKG,gBAAkBmB,IAC1CtB,KAAKG,eAAiB,CAAA,GAGpBH,KAAKE,SAAWF,KAAKG,gBAAkB,CAACmB,IAC1CtB,KAAKE,QAAU,CAAA,EACfF,KAAKG,eAAiB,CAAA,GAGpBH,KAAKE,QACAF,KAAK2B,mBAAmB,EAG1B3B,KAAK8B,aAAa,CAC3B,EAEAlC,EAASS,UAAUgC,OAAS,WAC1B,OAAO3C,QAAQwB,QAAQC,cAAc,MAAO,CAC1CM,WAAW,EAAIlC,aAAa2B,SAASvB,eAAgBK,KAAK6B,MAAMJ,WAAa,EAAE,EAC/Ea,MAAOtC,KAAK6B,MAAMS,OAAS,EAC7B,EAAGtC,KAAKoC,eAAe,CAAC,CAC1B,EAEOxC,CACT,EAAEF,QAAQwB,QAAQqB,aAAa,EAE/B3C,SAAS4C,aAAe,CACtBf,UAAW,GACXa,MAAO,GACP9B,MAAO,CAAA,EACPoB,aAAc,IAChB,EACAhC,SAAS6C,UAAY,CACnBhB,UAAWhC,aAAayB,QAAQwB,OAChCJ,MAAO7C,aAAayB,QAAQyB,OAC5BnC,MAAOf,aAAayB,QAAQ0B,KAC5BhB,aAAcnC,aAAayB,QAAQ2B,IACrC,EACA1D,QAAQ+B,QAAUtB"}