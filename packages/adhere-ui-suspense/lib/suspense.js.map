{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar antd_1 = require(\"antd\"); // import type SuspenseSync from './sync';\n// import type SuspenseAsync from './async';\n\n\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    var _a;\n\n    (_a = this === null || this === void 0 ? void 0 : this.fetchData) === null || _a === void 0 ? void 0 : _a.call(this);\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      // @ts-ignore\n      result.push(react_1.default.createElement(antd_1.Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return react_1.default.createElement(antd_1.Spin, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    } // @ts-ignore\n\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return react_1.default.createElement(\"div\", {\n      className: selectorPrefix\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(react_1.default.Component);\n\nSuspense.defaultProps = {\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  reset: prop_types_1.default.bool,\n  firstLoading: prop_types_1.default.node\n};\nexports.default = Suspense;"],"names":["require","Object","defineProperty","exports","value","tslib_1","react_1","__importDefault","prop_types_1","antd_1","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","__extends","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","_a","fetchData","call","renderNormalFirstLoading","result","i","push","default","createElement","Skeleton","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","Spin","size","spinning","showLoading","renderInner","renderDispatch","render","Component","defaultProps","propTypes","bool","node"],"mappings":"aAEAA,QAAQ,gDAERC,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,QAAUL,QAAQ,SAElBM,QAAUD,QAAQE,gBAAgBP,QAAQ,UAE1CQ,aAAeH,QAAQE,gBAAgBP,QAAQ,eAE/CS,OAAST,QAAQ,QAIjBU,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAHAF,EAAMI,SAAU,EAEhBJ,EAAMK,gBAAiB,EAChBL,EAoGT,OA7GAR,QAAQc,UAAUR,EAAUC,GAY5BD,EAASS,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZR,KAAKE,SAAU,EAEfF,KAAKG,gBAAiB,EACtBH,KAAKS,gBAITb,EAASS,UAAUK,kBAAoB,WACrC,IAAIC,EAEkE,QAArEA,EAAKX,MAAAA,UAAmC,EAASA,KAAKY,iBAA8B,IAAPD,GAAyBA,EAAGE,KAAKb,OAQjHJ,EAASkB,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,KAAK1B,QAAQ2B,QAAQC,cAAczB,OAAO0B,SAAU,CACzDC,IAAKL,EAAI,EACTM,SAAS,EACTC,QAAQ,EACRC,QAAQ,KAIZ,OAAOjC,QAAQ2B,QAAQC,cAAc,MAAO,CAC1CM,UAAW,GAAGC,OAAO/B,eAAgB,aACpCoB,IAQLnB,EAASS,UAAUsB,mBAAqB,WACtC,IAAIC,EAAe5B,KAAK6B,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGFhC,EAASkB,4BAQlBlB,EAASS,UAAUyB,aAAe,WAChC,OAAOvC,QAAQ2B,QAAQC,cAAczB,OAAOqC,KAAM,CAChDC,KAAM,QACNC,SAAUjC,KAAKkC,eACdlC,KAAKmC,gBAQVvC,EAASS,UAAU+B,eAAiB,WAClC,IAAId,EAAUtB,KAAKkC,cAYnB,OAVIlC,KAAKE,UAAYF,KAAKG,gBAAkBmB,IAC1CtB,KAAKG,gBAAiB,GAIpBH,KAAKE,SAAWF,KAAKG,iBAAmBmB,IAC1CtB,KAAKE,SAAU,EACfF,KAAKG,gBAAiB,GAGpBH,KAAKE,QACAF,KAAK2B,qBAGP3B,KAAK8B,gBAGdlC,EAASS,UAAUgC,OAAS,WAC1B,OAAO9C,QAAQ2B,QAAQC,cAAc,MAAO,CAC1CM,UAAW9B,gBACVK,KAAKoC,mBAGHxC,EA9GT,CA+GEL,QAAQ2B,QAAQoB,WAElB1C,SAAS2C,aAAe,CACtB/B,OAAO,EACPoB,aAAc,MAEhBhC,SAAS4C,UAAY,CACnBhC,MAAOf,aAAayB,QAAQuB,KAC5Bb,aAAcnC,aAAayB,QAAQwB,MAErCtD,QAAQ8B,QAAUtB"}