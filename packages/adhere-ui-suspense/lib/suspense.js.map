{"version":3,"file":"suspense.js","sources":["suspense.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _spin = _interopRequireDefault(require(\"antd/lib/spin\"));\n\nvar _skeleton = _interopRequireDefault(require(\"antd/lib/skeleton\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar selectorPrefix = 'adhere-ui-suspense';\n/**\n * Suspense\n * @class Suspense\n * @classdesc Suspense\n *\n * 需要重写的方法\n * fetchData\n * renderInner\n * showLoading\n */\n\nvar Suspense =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(Suspense, _super);\n\n  function Suspense() {\n    var _this = _super !== null && _super.apply(this, arguments) || this; // 第一次\n\n\n    _this.isFirst = true; // 第一次加载\n\n    _this.isFirstLoading = false;\n    return _this;\n  }\n\n  Suspense.prototype.componentWillReceiveProps = function (nextProps) {\n    if (nextProps.reset) {\n      // 第一次\n      this.isFirst = true; // 第一次加载\n\n      this.isFirstLoading = false;\n      this.forceUpdate();\n    }\n  };\n\n  Suspense.prototype.componentDidMount = function () {\n    this.fetchData();\n  };\n  /**\n   * renderNormalFirstLoading\n   * @return React.ReactElement\n   */\n\n\n  Suspense.renderNormalFirstLoading = function () {\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      // @ts-ignore\n      result.push( /*#__PURE__*/_react.default.createElement(_skeleton.default, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-loading\")\n    }, result);\n  };\n  /**\n   * renderFirstLoading - 渲染第一次Loading的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderFirstLoading = function () {\n    // @ts-ignore\n    var firstLoading = this.props.firstLoading;\n\n    if (firstLoading !== undefined && firstLoading !== null) {\n      return firstLoading;\n    }\n\n    return Suspense.renderNormalFirstLoading();\n  };\n  /**\n   * renderNormal - 渲染正常的UI\n   * @return {React.Element}\n   */\n\n\n  Suspense.prototype.renderNormal = function () {\n    return /*#__PURE__*/_react.default.createElement(_spin.default, {\n      size: \"large\",\n      spinning: this.showLoading()\n    }, this.renderInner());\n  };\n  /**\n   * renderDispatch\n   * @return {React.Element|*}\n   */\n\n\n  Suspense.prototype.renderDispatch = function () {\n    var loading = this.showLoading();\n\n    if (this.isFirst && !this.isFirstLoading && loading) {\n      this.isFirstLoading = true;\n    } // @ts-ignore\n\n\n    if (this.isFirst && this.isFirstLoading && !loading) {\n      this.isFirst = false;\n      this.isFirstLoading = false;\n    }\n\n    if (this.isFirst) {\n      return this.renderFirstLoading();\n    }\n\n    return this.renderNormal();\n  };\n\n  Suspense.prototype.render = function () {\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: selectorPrefix\n    }, this.renderDispatch());\n  };\n\n  return Suspense;\n}(_react.default.Component);\n\nSuspense.defaultProps = {\n  reset: false,\n  firstLoading: null\n};\nSuspense.propTypes = {\n  reset: _propTypes.default.bool,\n  firstLoading: _propTypes.default.node\n};\nvar _default = Suspense;\nexports.default = _default;"],"names":["require","_interopRequireDefault","Object","defineProperty","exports","value","default","_spin","_skeleton","_tslib","_react","_propTypes","selectorPrefix","Suspense","_super","_this","apply","this","arguments","isFirst","isFirstLoading","__extends","prototype","componentWillReceiveProps","nextProps","reset","forceUpdate","componentDidMount","fetchData","renderNormalFirstLoading","result","i","push","createElement","key","loading","active","avatar","className","concat","renderFirstLoading","firstLoading","props","renderNormal","size","spinning","showLoading","renderInner","renderDispatch","render","Component","defaultProps","propTypes","bool","node","_default"],"mappings":"aAEAA,QAAQ,gDAER,IAAIC,uBAAyBD,QAAQ,gDAErCE,OAAOC,eAAeC,QAAS,aAAc,CAC3CC,OAAO,IAETD,QAAQE,aAAU,EAElB,IAAIC,MAAQN,uBAAuBD,QAAQ,kBAEvCQ,UAAYP,uBAAuBD,QAAQ,sBAE3CS,OAAST,QAAQ,SAEjBU,OAAST,uBAAuBD,QAAQ,UAExCW,WAAaV,uBAAuBD,QAAQ,eAE5CY,eAAiB,qBAYjBC,SAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMC,KAAMC,YAAcD,KAMhE,OAHAF,EAAMI,SAAU,EAEhBJ,EAAMK,gBAAiB,EAChBL,EAmGT,OA5GA,EAAIN,OAAOY,WAAWR,EAAUC,GAYhCD,EAASS,UAAUC,0BAA4B,SAAUC,GACnDA,EAAUC,QAEZR,KAAKE,SAAU,EAEfF,KAAKG,gBAAiB,EACtBH,KAAKS,gBAITb,EAASS,UAAUK,kBAAoB,WACrCV,KAAKW,aAQPf,EAASgB,yBAA2B,WAGlC,IAFA,IAAIC,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IAErBD,EAAOE,KAAmBtB,OAAOJ,QAAQ2B,cAAczB,UAAUF,QAAS,CACxE4B,IAAKH,EAAI,EACTI,SAAS,EACTC,QAAQ,EACRC,QAAQ,KAIZ,OAAoB3B,OAAOJ,QAAQ2B,cAAc,MAAO,CACtDK,UAAW,GAAGC,OAAO3B,eAAgB,aACpCkB,IAQLjB,EAASS,UAAUkB,mBAAqB,WAEtC,IAAIC,EAAexB,KAAKyB,MAAMD,aAE9B,OAAIA,MAAAA,EACKA,EAGF5B,EAASgB,4BAQlBhB,EAASS,UAAUqB,aAAe,WAChC,OAAoBjC,OAAOJ,QAAQ2B,cAAc1B,MAAMD,QAAS,CAC9DsC,KAAM,QACNC,SAAU5B,KAAK6B,eACd7B,KAAK8B,gBAQVlC,EAASS,UAAU0B,eAAiB,WAClC,IAAIb,EAAUlB,KAAK6B,cAYnB,OAVI7B,KAAKE,UAAYF,KAAKG,gBAAkBe,IAC1ClB,KAAKG,gBAAiB,GAIpBH,KAAKE,SAAWF,KAAKG,iBAAmBe,IAC1ClB,KAAKE,SAAU,EACfF,KAAKG,gBAAiB,GAGpBH,KAAKE,QACAF,KAAKuB,qBAGPvB,KAAK0B,gBAGd9B,EAASS,UAAU2B,OAAS,WAC1B,OAAoBvC,OAAOJ,QAAQ2B,cAAc,MAAO,CACtDK,UAAW1B,gBACVK,KAAK+B,mBAGHnC,EA7GT,CA8GEH,OAAOJ,QAAQ4C,WAEjBrC,SAASsC,aAAe,CACtB1B,OAAO,EACPgB,aAAc,MAEhB5B,SAASuC,UAAY,CACnB3B,MAAOd,WAAWL,QAAQ+C,KAC1BZ,aAAc9B,WAAWL,QAAQgD,MAEnC,IAAIC,SAAW1C,SACfT,QAAQE,QAAUiD"}