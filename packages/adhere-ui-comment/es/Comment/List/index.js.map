{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __assign } from \"tslib\";\nimport React, { useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adhere-ui-scrollload';\nimport BackTopAnimation from '@baifendian/adhere-ui-backtopanimation';\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\n\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n      className = _a === void 0 ? '' : _a,\n      _b = props.style,\n      style = _b === void 0 ? {} : _b,\n      _c = props.isLoading,\n      isLoading = _c === void 0 ? false : _c,\n      _d = props.hasMore,\n      hasMore = _d === void 0 ? false : _d,\n      onLoadMore = props.onLoadMore,\n      _e = props.scrollLoadProps,\n      scrollLoadProps = _e === void 0 ? {} : _e,\n      renderFirstLoading = props.renderFirstLoading,\n      getScrollWrapContainer = props.getScrollWrapContainer,\n      children = props.children; // 第一次\n\n  var isFirst = useRef(true); // 第一次加载\n\n  var isFirstLoading = useRef(false);\n  var wrapRef = useRef(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n\n  function renderDispatch() {\n    var loading = isLoading;\n\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n\n\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n\n\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/React.createElement(ScrollLoad, __assign({}, defaultScrollLoadProps, scrollLoadProps || {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(BackTopAnimation, {\n            getContainer: function getContainer() {\n              var _a, _b;\n\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(BackTopAnimation, {\n          getContainer: function getContainer() {\n            var _a;\n\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(selectorPrefix, className || ''),\n    style: style || {},\n    ref: wrapRef\n  }, renderDispatch());\n};\n\nexport default CommentList;"],"names":["_Skeleton","__assign","React","useRef","ReactDOM","classnames","ConditionalRender","ScrollLoad","BackTopAnimation","selectorPrefix","CommentList","props","defaultScrollLoadProps","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","isFirstLoading","wrapRef","createElement","ref","loading","current","result","i","push","key","avatar","concat","_renderFirstLoading","getScrollContainer","firstElementChild","onScrollBottom","conditional","distance","noMatch","getContainer","querySelector","call","onTrigger","Promise","resolve","createPortal"],"mappings":"OAAOA,6HAGEC,4BACFC,OAASC,0BACTC,gCACAC,mCACAC,uEACAC,yDACAC,8DACP,IAAIC,eAAiB,+BAOjBC,YAAc,SAAqBC,GACrC,IA6EMC,EA7EFC,EAAKF,EAAMG,UACXA,OAAmB,IAAPD,EAAgB,GAAKA,EACjCE,EAAKJ,EAAMK,MACXA,OAAe,IAAPD,EAAgB,GAAKA,EAC7BE,EAAKN,EAAMO,UACXA,OAAmB,IAAPD,GAAwBA,EACpCE,EAAKR,EAAMS,QACXA,OAAiB,IAAPD,GAAwBA,EAClCE,EAAaV,EAAMU,WACnBC,EAAKX,EAAMY,gBACXA,OAAyB,IAAPD,EAAgB,GAAKA,EACvCE,EAAqBb,EAAMa,mBAC3BC,EAAyBd,EAAMc,uBAC/BC,EAAWf,EAAMe,SAEjBC,EAAUxB,QAAO,GAEjByB,EAAiBzB,QAAO,GACxB0B,EAAU1B,OAAO,MAuGrB,OAAoBD,MAAM4B,cAAc,MAAO,CAC7ChB,UAAWT,WAAWI,eAAgBK,GAAa,IACnDE,MAAOA,GAAS,GAChBe,IAAKF,IAlGDG,EAAUd,EAEVS,EAAQM,UAAYL,EAAeK,SAAWD,IAChDJ,EAAeK,SAAU,GAGvBN,EAAQM,SAAWL,EAAeK,UAAYD,IAChDL,EAAQM,SAAU,EAClBL,EAAeK,SAAU,GAGvBN,EAAQM,QAad,WACE,GAAIT,EACF,OAAOA,IAKT,IAFA,IAAIU,EAAS,GAEJC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,EAAOE,KAAmBlC,MAAM4B,cAAc9B,UAAW,CACvDqC,IAAKF,EAAI,EACTH,SAAS,EACTM,QAAQ,KAIZ,OAAoBpC,MAAM4B,cAAc,MAAO,CAC7ChB,UAAW,GAAGyB,OAAO9B,eAAgB,wBACpCyB,GA7BMM,IAuCL5B,EAAyB,CAC3B6B,mBAAoB,WAClB,IAAI5B,EAEJ,OAA2H,QAAnHA,EAAKY,MAAAA,OAAuE,EAASA,WAA6C,IAAPZ,OAAgB,EAASA,EAAG6B,mBAEjKC,eAAgBtB,GAEEnB,MAAM4B,cAAcxB,kBAAmB,CACzDsC,YAAaxB,GACZ,WACD,OAAoBlB,MAAM4B,cAAc,MAAO,CAC7ChB,UAAW,GAAGyB,OAAO9B,eAAgB,iBACvBP,MAAM4B,cAAcvB,WAAYN,SAAS,GAAIW,EAAwBW,GAAmB,GAAI,CAC1GsB,UAAWtB,MAAAA,OAAyD,EAASA,EAAgBsB,WAAa,KACxGnB,GAAwBxB,MAAM4B,cAAcxB,kBAAmB,CACjEsC,eAAgBnB,IAAyBA,KACzCqB,QAAS,WACP,OAAoB5C,MAAM4B,cAActB,iBAAkB,CACxDuC,aAAc,WACZ,IAAIlC,EAAIE,EAER,OAAiJ,QAAzIA,EAAkF,QAA5EF,EAAKgB,MAAAA,OAAyC,EAASA,EAAQI,eAA4B,IAAPpB,OAAgB,EAASA,EAAGmC,qBAAkC,IAAPjC,OAAgB,EAASA,EAAGkC,KAAKpC,EAAI,0BAEhMqC,UAAW,WACT,OAAOC,QAAQC,eAIpB,WACD,OAAoBhD,SAASiD,aAA2BnD,MAAM4B,cAActB,iBAAkB,CAC5FuC,aAAc,WACZ,IAAIlC,EAEJ,OAA2H,QAAnHA,EAAKY,MAAAA,OAAuE,EAASA,WAA6C,IAAPZ,OAAgB,EAASA,EAAG6B,mBAEjKQ,UAAW,WACT,OAAOC,QAAQC,aAEf3B,MAAAA,OAAuE,EAASA,6BAY7Ef"}