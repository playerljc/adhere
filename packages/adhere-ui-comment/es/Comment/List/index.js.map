{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classnames from 'classnames';\nimport React, { memo, useRef } from 'react';\nimport BackTopAnimation from '@baifendian/adhere-ui-backtopanimation';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adhere-ui-scrollload';\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\nvar CommentList = /*#__PURE__*/memo(function (props) {\n  var _a = props.className,\n    className = _a === void 0 ? '' : _a,\n    style = props.style,\n    _b = props.isLoading,\n    isLoading = _b === void 0 ? false : _b,\n    _c = props.hasMore,\n    hasMore = _c === void 0 ? false : _c,\n    onLoadMore = props.onLoadMore,\n    scrollLoadProps = props.scrollLoadProps,\n    renderFirstLoading = props.renderFirstLoading,\n    pages = props.pages,\n    children = props.children;\n  var scrollLoadRef = useRef(null);\n  // 第一次\n  var isFirst = useRef(true);\n  // 第一次加载\n  var isFirstLoading = useRef(false);\n  var wrapRef = useRef(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n  function renderDispatch() {\n    var loading = isLoading;\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n    var result = [];\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/React.createElement(ScrollLoad, __assign({\n        ref: scrollLoadRef\n      }, defaultScrollLoadProps, scrollLoadProps !== null && scrollLoadProps !== void 0 ? scrollLoadProps : {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50,\n        disabled: pages <= 1\n      }), children), /*#__PURE__*/React.createElement(BackTopAnimation, {\n        getContainer: function () {\n          var _a, _b;\n          return (_b = (_a = scrollLoadRef === null || scrollLoadRef === void 0 ? void 0 : scrollLoadRef.current) === null || _a === void 0 ? void 0 : _a.getScrollContainer) === null || _b === void 0 ? void 0 : _b.call(_a);\n        },\n        onTrigger: function () {\n          return Promise.resolve();\n        }\n      }));\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    ref: wrapRef\n  }, renderDispatch());\n});\nCommentList.displayName = 'CommentList';\nexport default CommentList;"],"names":["_Skeleton","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classnames","React","memo","useRef","BackTopAnimation","ConditionalRender","ScrollLoad","selectorPrefix","CommentList","props","_a","className","style","_b","isLoading","_c","hasMore","onLoadMore","scrollLoadProps","renderFirstLoading","pages","children","scrollLoadRef","isFirst","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","push","key","avatar","concat","onScrollBottom","conditional","distance","disabled","getContainer","getScrollContainer","onTrigger","Promise","resolve","displayName"],"mappings":"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"}