{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classnames from 'classnames';\nimport React, { memo, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport BackTopAnimation from '@baifendian/adhere-ui-backtopanimation';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adhere-ui-scrollload';\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n    className = _a === void 0 ? '' : _a,\n    _b = props.style,\n    style = _b === void 0 ? {} : _b,\n    _c = props.isLoading,\n    isLoading = _c === void 0 ? false : _c,\n    _d = props.hasMore,\n    hasMore = _d === void 0 ? false : _d,\n    onLoadMore = props.onLoadMore,\n    _e = props.scrollLoadProps,\n    scrollLoadProps = _e === void 0 ? {} : _e,\n    renderFirstLoading = props.renderFirstLoading,\n    getScrollWrapContainer = props.getScrollWrapContainer,\n    children = props.children;\n  // 第一次\n  var isFirst = useRef(true);\n  // 第一次加载\n  var isFirstLoading = useRef(false);\n  var wrapRef = useRef(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n  function renderDispatch() {\n    var loading = isLoading;\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n    var result = [];\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/React.createElement(ScrollLoad, __assign({}, defaultScrollLoadProps, scrollLoadProps !== null && scrollLoadProps !== void 0 ? scrollLoadProps : {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(BackTopAnimation, {\n            getContainer: function getContainer() {\n              var _a, _b;\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scroll-load');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(BackTopAnimation, {\n          getContainer: function getContainer() {\n            var _a;\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    ref: wrapRef\n  }, renderDispatch());\n};\nexport default /*#__PURE__*/memo(CommentList);"],"names":["_Skeleton","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classnames","React","memo","useRef","ReactDOM","BackTopAnimation","ConditionalRender","ScrollLoad","selectorPrefix","CommentList","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","push","key","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","distance","noMatch","getContainer","querySelector","onTrigger","Promise","resolve","createPortal"],"mappings":"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"}