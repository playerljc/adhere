{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { __assign } from \"tslib\";\nimport classnames from 'classnames';\nimport React, { memo, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport BackTopAnimation from '@baifendian/adhere-ui-backtopanimation';\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\nimport ScrollLoad from '@baifendian/adhere-ui-scrollload';\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\n\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n      className = _a === void 0 ? '' : _a,\n      _b = props.style,\n      style = _b === void 0 ? {} : _b,\n      _c = props.isLoading,\n      isLoading = _c === void 0 ? false : _c,\n      _d = props.hasMore,\n      hasMore = _d === void 0 ? false : _d,\n      onLoadMore = props.onLoadMore,\n      _e = props.scrollLoadProps,\n      scrollLoadProps = _e === void 0 ? {} : _e,\n      renderFirstLoading = props.renderFirstLoading,\n      getScrollWrapContainer = props.getScrollWrapContainer,\n      children = props.children; // 第一次\n\n  var isFirst = useRef(true); // 第一次加载\n\n  var isFirstLoading = useRef(false);\n  var wrapRef = useRef(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n\n  function renderDispatch() {\n    var loading = isLoading;\n\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n\n\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/React.createElement(_Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n\n\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/React.createElement(ConditionalRender, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/React.createElement(ScrollLoad, __assign({}, defaultScrollLoadProps, scrollLoadProps || {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), /*#__PURE__*/React.createElement(ConditionalRender, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return /*#__PURE__*/React.createElement(BackTopAnimation, {\n            getContainer: function getContainer() {\n              var _a, _b;\n\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(BackTopAnimation, {\n          getContainer: function getContainer() {\n            var _a;\n\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(selectorPrefix, className || ''),\n    style: style || {},\n    ref: wrapRef\n  }, renderDispatch());\n};\n\nexport default /*#__PURE__*/memo(CommentList);"],"names":["_Skeleton","__assign","classnames","React","memo","useRef","ReactDOM","BackTopAnimation","ConditionalRender","ScrollLoad","selectorPrefix","CommentList","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","i","push","key","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","distance","noMatch","getContainer","querySelector","call","onTrigger","Promise","resolve","createPortal"],"mappings":"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"}