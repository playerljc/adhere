import _Skeleton from"antd/es/skeleton";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import{__assign,__extends}from"tslib";import React,{forwardRef,useRef}from"react";import ReactDOM from"react-dom";import PropTypes from"prop-types";import classnames from"classnames";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import ScrollLoad from"@baifendian/adhere-ui-scrollload";import BackTopAnimation from"@baifendian/adhere-ui-backtopanimation";var selectorPrefix="adhere-ui-comment-list",BackTopAnimationImpl=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return __extends(r,e),r.prototype.componentWillUnmount=function(){try{e.prototype.componentWillUnmount.call(this)}catch(e){}},r}(BackTopAnimation);function CommentList(e){var r,o=e.className,t=e.style,n=e.isLoading,a=e.hasMore,i=e.onLoadMore,s=e.scrollLoadProps,l=e.renderFirstLoading,c=e.getScrollWrapContainer,p=e.children,m=useRef(!0),e=useRef(!1),u=useRef();return React.createElement("div",{className:classnames(selectorPrefix,o||""),style:__assign({},t),ref:u},(n=n,m.current&&!e.current&&n&&(e.current=!0),m.current&&e.current&&!n&&(m.current=!1,e.current=!1),m.current?function(){if(l)return l();for(var e=[],r=0;r<15;r++)e.push(React.createElement(_Skeleton,{key:r+1,loading:!0,active:!0,avatar:!0}));return React.createElement("div",{className:"".concat(selectorPrefix,"-first-loading-wrap")},e)}():(r={getScrollContainer:function(){var e;return null===(e=null==c?void 0:c())||void 0===e?void 0:e.firstElementChild},style:{height:"100%"},onScrollBottom:i},React.createElement(ConditionalRender,{conditional:a},function(){return React.createElement("div",{className:"".concat(selectorPrefix,"-normal-wrap")},React.createElement(ScrollLoad,__assign({},r,s||{},{distance:(null==s?void 0:s.distance)||50}),p),React.createElement(ConditionalRender,{conditional:!(!c||!c()),noMatch:function(){return React.createElement(BackTopAnimationImpl,{target:function(){var e,r;return null===(r=null===(e=null==u?void 0:u.current)||void 0===e?void 0:e.querySelector)||void 0===r?void 0:r.call(e,".adhere-ui-scrollload")},onTrigger:function(){return Promise.resolve(null)}})}},function(){return ReactDOM.createPortal(React.createElement(BackTopAnimationImpl,{target:function(){var e;return null===(e=null==c?void 0:c())||void 0===e?void 0:e.firstElementChild},onTrigger:function(){return Promise.resolve(null)}}),null==c?void 0:c())}))}))))}var defaultProps={},propTypes={getScrollWrapContainer:PropTypes.func,className:PropTypes.string,style:PropTypes.object,isLoading:PropTypes.bool,hasMore:PropTypes.bool,onLoadMore:PropTypes.func,renderFirstLoading:PropTypes.func,scrollLoadProps:PropTypes.shape({className:PropTypes.string,style:PropTypes.object,loadClassName:PropTypes.string,loadStyle:PropTypes.object,emptyClassName:PropTypes.string,emptyStyle:PropTypes.object,errorClassName:PropTypes.string,errorStyle:PropTypes.object,distance:PropTypes.number,onScrollBottom:PropTypes.func,onEmptyClick:PropTypes.func,onErrorClick:PropTypes.func,renderLoading:PropTypes.func,renderEmpty:PropTypes.func,renderError:PropTypes.func})};CommentList.defaultProps=defaultProps,CommentList.propTypes=propTypes;export default forwardRef(CommentList);export{defaultProps,propTypes};
//# sourceMappingURL=index.js.map
