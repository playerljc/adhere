{"version":3,"file":"index.js","sources":["List/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.propTypes = exports.defaultProps = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar prop_types_1 = tslib_1.__importDefault(require(\"prop-types\"));\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar antd_1 = require(\"antd\");\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar adhere_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-scrollload\"));\n\nvar adhere_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\n\nvar selectorPrefix = 'adhere-ui-comment-list';\n\nvar BackTopAnimationImpl =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(BackTopAnimationImpl, _super);\n\n  function BackTopAnimationImpl() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BackTopAnimationImpl.prototype.componentWillUnmount = function () {\n    try {\n      _super.prototype.componentWillUnmount.call(this);\n    } catch (e) {}\n  };\n\n  return BackTopAnimationImpl;\n}(adhere_ui_backtopanimation_1.default);\n/**\n * CommentList\n * @constructor\n */\n\n\nfunction CommentList(_a) {\n  var className = _a.className,\n      style = _a.style,\n      isLoading = _a.isLoading,\n      hasMore = _a.hasMore,\n      onLoadMore = _a.onLoadMore,\n      scrollLoadProps = _a.scrollLoadProps,\n      renderFirstLoading = _a.renderFirstLoading,\n      getScrollWrapContainer = _a.getScrollWrapContainer,\n      children = _a.children; // 第一次\n\n  var isFirst = (0, react_1.useRef)(true); // 第一次加载\n\n  var isFirstLoading = (0, react_1.useRef)(false);\n  var wrapRef = (0, react_1.useRef)();\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n\n  function renderDispatch() {\n    var loading = isLoading;\n\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n\n\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n\n    var result = [];\n\n    for (var i = 0; i < 15; i++) {\n      // @ts-ignore\n      result.push(react_1.default.createElement(antd_1.Skeleton, {\n        key: i + 1,\n        loading: true,\n        active: true,\n        avatar: true\n      }));\n    }\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n\n\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      style: {\n        height: '100%'\n      },\n      onScrollBottom: onLoadMore\n    };\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: hasMore\n    }, function () {\n      return react_1.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, react_1.default.createElement(adhere_ui_scrollload_1.default, tslib_1.__assign({}, defaultScrollLoadProps, scrollLoadProps || {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return react_1.default.createElement(BackTopAnimationImpl, {\n            target: function target() {\n              var _a, _b;\n\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve(null);\n            }\n          });\n        }\n      }, function () {\n        return react_dom_1.default.createPortal(react_1.default.createElement(BackTopAnimationImpl, {\n          target: function target() {\n            var _a;\n\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve(null);\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n\n  return (// @ts-ignore\n    react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(selectorPrefix, className || ''),\n      style: tslib_1.__assign({}, style),\n      ref: wrapRef\n    }, renderDispatch())\n  );\n}\n\nexports.defaultProps = {};\nexports.propTypes = {\n  getScrollWrapContainer: prop_types_1.default.func,\n  className: prop_types_1.default.string,\n  style: prop_types_1.default.object,\n  // 是否是加载数据\n  isLoading: prop_types_1.default.bool,\n  // 是否还有更多\n  hasMore: prop_types_1.default.bool,\n  // 加载更多\n  onLoadMore: prop_types_1.default.func,\n  renderFirstLoading: prop_types_1.default.func,\n  scrollLoadProps: prop_types_1.default.shape({\n    className: prop_types_1.default.string,\n    style: prop_types_1.default.object,\n    loadClassName: prop_types_1.default.string,\n    loadStyle: prop_types_1.default.object,\n    emptyClassName: prop_types_1.default.string,\n    emptyStyle: prop_types_1.default.object,\n    errorClassName: prop_types_1.default.string,\n    errorStyle: prop_types_1.default.object,\n    distance: prop_types_1.default.number,\n    onScrollBottom: prop_types_1.default.func,\n    onEmptyClick: prop_types_1.default.func,\n    onErrorClick: prop_types_1.default.func,\n    renderLoading: prop_types_1.default.func,\n    renderEmpty: prop_types_1.default.func,\n    renderError: prop_types_1.default.func\n  })\n};\nCommentList.defaultProps = exports.defaultProps;\nCommentList.propTypes = exports.propTypes; // @ts-ignore\n\nexports.default = (0, react_1.forwardRef)(CommentList);"],"names":["require","Object","defineProperty","exports","value","propTypes","defaultProps","tslib_1","react_1","__importStar","react_dom_1","__importDefault","prop_types_1","classnames_1","antd_1","adhere_ui_conditionalrender_1","adhere_ui_scrollload_1","adhere_ui_backtopanimation_1","selectorPrefix","BackTopAnimationImpl","_super","apply","this","arguments","__extends","prototype","componentWillUnmount","call","e","default","CommentList","_a","defaultScrollLoadProps","className","style","isLoading","hasMore","onLoadMore","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","createElement","__assign","ref","loading","current","result","i","push","Skeleton","key","active","avatar","concat","_renderFirstLoading","getScrollContainer","firstElementChild","height","onScrollBottom","conditional","distance","noMatch","target","_b","querySelector","onTrigger","Promise","resolve","createPortal","func","string","object","bool","shape","loadClassName","loadStyle","emptyClassName","emptyStyle","errorClassName","errorStyle","number","onEmptyClick","onErrorClick","renderLoading","renderEmpty","renderError","forwardRef"],"mappings":"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"}