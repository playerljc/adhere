{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\r\nvar react_1 = tslib_1.__importStar(require(\"react\"));\r\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\r\nvar adhere_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\r\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar adhere_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-scrollload\"));\r\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\r\n/**\r\n * CommentList\r\n * @constructor\r\n * @classdesc 评论列表\r\n */\r\nvar CommentList = function (props) {\r\n    var _a = props.className, className = _a === void 0 ? '' : _a, _b = props.style, style = _b === void 0 ? {} : _b, _c = props.isLoading, isLoading = _c === void 0 ? false : _c, _d = props.hasMore, hasMore = _d === void 0 ? false : _d, onLoadMore = props.onLoadMore, _e = props.scrollLoadProps, scrollLoadProps = _e === void 0 ? {} : _e, renderFirstLoading = props.renderFirstLoading, getScrollWrapContainer = props.getScrollWrapContainer, children = props.children;\r\n    // 第一次\r\n    var isFirst = (0, react_1.useRef)(true);\r\n    // 第一次加载\r\n    var isFirstLoading = (0, react_1.useRef)(false);\r\n    var wrapRef = (0, react_1.useRef)(null);\r\n    /**\r\n     * renderDispatch\r\n     * @description 渲染的一个分配\r\n     * @return {*}\r\n     */\r\n    function renderDispatch() {\r\n        var loading = isLoading;\r\n        if (isFirst.current && !isFirstLoading.current && loading) {\r\n            isFirstLoading.current = true;\r\n        }\r\n        if (isFirst.current && isFirstLoading.current && !loading) {\r\n            isFirst.current = false;\r\n            isFirstLoading.current = false;\r\n        }\r\n        if (isFirst.current) {\r\n            return _renderFirstLoading();\r\n        }\r\n        return renderNormal();\r\n    }\r\n    /**\r\n     * _renderFirstLoading\r\n     * @description 渲染第一次的UI\r\n     * @return {JSX.Element}\r\n     */\r\n    function _renderFirstLoading() {\r\n        if (renderFirstLoading) {\r\n            return renderFirstLoading();\r\n        }\r\n        var result = [];\r\n        for (var i = 0; i < 7; i++) {\r\n            result.push(react_1.default.createElement(antd_1.Skeleton, { key: i + 1, loading: true, avatar: true }));\r\n        }\r\n        return react_1.default.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-first-loading-wrap\") }, result);\r\n    }\r\n    /**\r\n     * renderNormal\r\n     * @description 渲染真正的UI\r\n     * @return {JSX.Element}\r\n     */\r\n    function renderNormal() {\r\n        var defaultScrollLoadProps = {\r\n            getScrollContainer: function () { var _a; return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild; },\r\n            onScrollBottom: onLoadMore,\r\n        };\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: hasMore }, function () { return (react_1.default.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-normal-wrap\") },\r\n            react_1.default.createElement(adhere_ui_scrollload_1.default, tslib_1.__assign({}, defaultScrollLoadProps, (scrollLoadProps || {}), { distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50 }), children),\r\n            react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null), noMatch: function () { return (react_1.default.createElement(adhere_ui_backtopanimation_1.default, { getContainer: function () { var _a, _b; return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload'); }, onTrigger: function () { return Promise.resolve(); } })); } }, function () {\r\n                return react_dom_1.default.createPortal(react_1.default.createElement(adhere_ui_backtopanimation_1.default, { getContainer: function () { var _a; return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild; }, onTrigger: function () { return Promise.resolve(); } }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\r\n            }))); }));\r\n    }\r\n    return (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(selectorPrefix, className || ''), style: style || {}, ref: wrapRef }, renderDispatch()));\r\n};\r\nexports.default = (0, react_1.memo)(CommentList);\r\n//# sourceMappingURL=index.js.map"],"names":["Object","defineProperty","exports","value","tslib_1","require","antd_1","classnames_1","__importDefault","react_1","__importStar","react_dom_1","adhere_ui_backtopanimation_1","adhere_ui_conditionalrender_1","adhere_ui_scrollload_1","selectorPrefix","CommentList","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","default","createElement","ref","defaultScrollLoadProps","loading","current","result","i","push","Skeleton","key","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","__assign","distance","noMatch","getContainer","querySelector","call","onTrigger","Promise","resolve","createPortal","memo"],"mappings":"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"}