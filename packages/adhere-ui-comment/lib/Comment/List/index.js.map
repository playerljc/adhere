{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _skeleton = _interopRequireDefault(require(\"antd/lib/skeleton\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactDom = require(\"react-dom\");\nvar _adhereUiBacktopanimation = _interopRequireDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\nvar _adhereUiConditionalrender = _interopRequireDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\nvar _adhereUiScrollload = _interopRequireDefault(require(\"@baifendian/adhere-ui-scrollload\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\nvar CommentList = /*#__PURE__*/(0, _react.memo)(function (props) {\n  var _a = props.className,\n    className = _a === void 0 ? '' : _a,\n    _b = props.style,\n    style = _b === void 0 ? {} : _b,\n    _c = props.isLoading,\n    isLoading = _c === void 0 ? false : _c,\n    _d = props.hasMore,\n    hasMore = _d === void 0 ? false : _d,\n    onLoadMore = props.onLoadMore,\n    _e = props.scrollLoadProps,\n    scrollLoadProps = _e === void 0 ? {} : _e,\n    renderFirstLoading = props.renderFirstLoading,\n    getScrollWrapContainer = props.getScrollWrapContainer,\n    children = props.children;\n  // 第一次\n  var isFirst = (0, _react.useRef)(true);\n  // 第一次加载\n  var isFirstLoading = (0, _react.useRef)(false);\n  var wrapRef = (0, _react.useRef)(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n  function renderDispatch() {\n    var loading = isLoading;\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n    var result = [];\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/_react.default.createElement(_skeleton.default, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/_react.default.createElement(_adhereUiScrollload.default, __assign({}, defaultScrollLoadProps, scrollLoadProps !== null && scrollLoadProps !== void 0 ? scrollLoadProps : {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return /*#__PURE__*/_react.default.createElement(_adhereUiBacktopanimation.default, {\n            getContainer: function getContainer() {\n              var _a, _b;\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scroll-load');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return /*#__PURE__*/(0, _reactDom.createPortal)( /*#__PURE__*/_react.default.createElement(_adhereUiBacktopanimation.default, {\n          getContainer: function getContainer() {\n            var _a;\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: (0, _classnames.default)(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    ref: wrapRef\n  }, renderDispatch());\n});\nCommentList.displayName = 'CommentList';\nvar _default = exports.default = CommentList;"],"names":["_interopRequireDefault","require","_typeof","_skeleton","Object","defineProperty","exports","value","default","_classnames","_react","_interopRequireWildcard","_reactDom","_adhereUiBacktopanimation","_adhereUiConditionalrender","_adhereUiScrollload","_getRequireWildcardCache","e","r","t","WeakMap","__esModule","has","get","u","i","n","__proto__","a","getOwnPropertyDescriptor","prototype","hasOwnProperty","call","set","__assign","assign","s","arguments","length","p","apply","this","selectorPrefix","CommentList","memo","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","push","key","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","distance","noMatch","getContainer","querySelector","onTrigger","Promise","resolve","createPortal","_default","displayName"],"mappings":"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"}