{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _skeleton = _interopRequireDefault(require(\"antd/lib/skeleton\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _adhereUiBacktopanimation = _interopRequireDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\nvar _adhereUiConditionalrender = _interopRequireDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\nvar _adhereUiScrollload = _interopRequireDefault(require(\"@baifendian/adhere-ui-scrollload\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\nvar CommentList = /*#__PURE__*/(0, _react.memo)(function (props) {\n  var _a = props.className,\n    className = _a === void 0 ? '' : _a,\n    style = props.style,\n    _b = props.isLoading,\n    isLoading = _b === void 0 ? false : _b,\n    _c = props.hasMore,\n    hasMore = _c === void 0 ? false : _c,\n    onLoadMore = props.onLoadMore,\n    scrollLoadProps = props.scrollLoadProps,\n    renderFirstLoading = props.renderFirstLoading,\n    pages = props.pages,\n    children = props.children;\n  var scrollLoadRef = (0, _react.useRef)(null);\n  // 第一次\n  var isFirst = (0, _react.useRef)(true);\n  // 第一次加载\n  var isFirstLoading = (0, _react.useRef)(false);\n  var wrapRef = (0, _react.useRef)(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n  function renderDispatch() {\n    var loading = isLoading;\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n    var result = [];\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/_react.default.createElement(_skeleton.default, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/_react.default.createElement(_adhereUiScrollload.default, __assign({\n        ref: scrollLoadRef\n      }, defaultScrollLoadProps, scrollLoadProps !== null && scrollLoadProps !== void 0 ? scrollLoadProps : {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50,\n        disabled: pages <= 1\n      }), children), /*#__PURE__*/_react.default.createElement(_adhereUiBacktopanimation.default, {\n        getContainer: function () {\n          var _a, _b;\n          return (_b = (_a = scrollLoadRef === null || scrollLoadRef === void 0 ? void 0 : scrollLoadRef.current) === null || _a === void 0 ? void 0 : _a.getScrollContainer) === null || _b === void 0 ? void 0 : _b.call(_a);\n        },\n        onTrigger: function () {\n          return Promise.resolve();\n        }\n      }));\n    });\n  }\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: (0, _classnames.default)(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    ref: wrapRef\n  }, renderDispatch());\n});\nCommentList.displayName = 'CommentList';\nvar _default = exports.default = CommentList;"],"names":["_interopRequireDefault","require","_skeleton","Object","defineProperty","exports","value","default","_classnames","_react","_interopRequireWildcard","_adhereUiBacktopanimation","_adhereUiConditionalrender","_adhereUiScrollload","_getRequireWildcardCache","e","r","t","WeakMap","__esModule","has","get","u","i","n","__proto__","a","getOwnPropertyDescriptor","hasOwnProperty","call","set","__assign","assign","s","arguments","length","p","prototype","apply","this","selectorPrefix","CommentList","memo","props","_a","className","style","_b","isLoading","_c","hasMore","onLoadMore","scrollLoadProps","renderFirstLoading","pages","children","scrollLoadRef","useRef","isFirst","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","push","key","avatar","concat","onScrollBottom","conditional","distance","disabled","getContainer","getScrollContainer","onTrigger","Promise","resolve","_default","displayName"],"mappings":"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"}