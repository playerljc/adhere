{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar antd_1 = require(\"antd\");\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar adhere_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-scrollload\"));\n\nvar adhere_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\n\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\n\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n      className = _a === void 0 ? '' : _a,\n      _b = props.style,\n      style = _b === void 0 ? {} : _b,\n      _c = props.isLoading,\n      isLoading = _c === void 0 ? false : _c,\n      _d = props.hasMore,\n      hasMore = _d === void 0 ? false : _d,\n      onLoadMore = props.onLoadMore,\n      _e = props.scrollLoadProps,\n      scrollLoadProps = _e === void 0 ? {} : _e,\n      renderFirstLoading = props.renderFirstLoading,\n      getScrollWrapContainer = props.getScrollWrapContainer,\n      children = props.children; // 第一次\n\n  var isFirst = (0, react_1.useRef)(true); // 第一次加载\n\n  var isFirstLoading = (0, react_1.useRef)(false);\n  var wrapRef = (0, react_1.useRef)(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n\n  function renderDispatch() {\n    var loading = isLoading;\n\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n\n\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push(react_1.default.createElement(antd_1.Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n\n\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: hasMore\n    }, function () {\n      return react_1.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, react_1.default.createElement(adhere_ui_scrollload_1.default, tslib_1.__assign({}, defaultScrollLoadProps, scrollLoadProps || {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return react_1.default.createElement(adhere_ui_backtopanimation_1.default, {\n            getContainer: function getContainer() {\n              var _a, _b;\n\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return react_dom_1.default.createPortal(react_1.default.createElement(adhere_ui_backtopanimation_1.default, {\n          getContainer: function getContainer() {\n            var _a;\n\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n\n  return react_1.default.createElement(\"div\", {\n    className: (0, classnames_1.default)(selectorPrefix, className || ''),\n    style: style || {},\n    ref: wrapRef\n  }, renderDispatch());\n};\n\nexports.default = CommentList;"],"names":["require","Object","defineProperty","exports","value","tslib_1","react_1","__importStar","react_dom_1","__importDefault","classnames_1","antd_1","adhere_ui_conditionalrender_1","adhere_ui_scrollload_1","adhere_ui_backtopanimation_1","selectorPrefix","CommentList","props","defaultScrollLoadProps","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","default","createElement","ref","loading","current","result","i","push","Skeleton","key","avatar","concat","_renderFirstLoading","getScrollContainer","firstElementChild","onScrollBottom","conditional","__assign","distance","noMatch","getContainer","querySelector","call","onTrigger","Promise","resolve","createPortal"],"mappings":"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"}