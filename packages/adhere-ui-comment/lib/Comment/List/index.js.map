{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _skeleton = _interopRequireDefault(require(\"antd/lib/skeleton\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _adhereUiBacktopanimation = _interopRequireDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\nvar _adhereUiConditionalrender = _interopRequireDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\nvar _adhereUiScrollload = _interopRequireDefault(require(\"@baifendian/adhere-ui-scrollload\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n    className = _a === void 0 ? '' : _a,\n    _b = props.style,\n    style = _b === void 0 ? {} : _b,\n    _c = props.isLoading,\n    isLoading = _c === void 0 ? false : _c,\n    _d = props.hasMore,\n    hasMore = _d === void 0 ? false : _d,\n    onLoadMore = props.onLoadMore,\n    _e = props.scrollLoadProps,\n    scrollLoadProps = _e === void 0 ? {} : _e,\n    renderFirstLoading = props.renderFirstLoading,\n    getScrollWrapContainer = props.getScrollWrapContainer,\n    children = props.children;\n  // 第一次\n  var isFirst = (0, _react.useRef)(true);\n  // 第一次加载\n  var isFirstLoading = (0, _react.useRef)(false);\n  var wrapRef = (0, _react.useRef)(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n  function renderDispatch() {\n    var loading = isLoading;\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n    var result = [];\n    for (var i = 0; i < 7; i++) {\n      result.push( /*#__PURE__*/_react.default.createElement(_skeleton.default, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: hasMore\n    }, function () {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, /*#__PURE__*/_react.default.createElement(_adhereUiScrollload.default, __assign({}, defaultScrollLoadProps, scrollLoadProps !== null && scrollLoadProps !== void 0 ? scrollLoadProps : {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return /*#__PURE__*/_react.default.createElement(_adhereUiBacktopanimation.default, {\n            getContainer: function getContainer() {\n              var _a, _b;\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return /*#__PURE__*/_reactDom.default.createPortal( /*#__PURE__*/_react.default.createElement(_adhereUiBacktopanimation.default, {\n          getContainer: function getContainer() {\n            var _a;\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: (0, _classnames.default)(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {},\n    ref: wrapRef\n  }, renderDispatch());\n};\nvar _default = /*#__PURE__*/(0, _react.memo)(CommentList);\nexports.default = _default;"],"names":["_interopRequireDefault","require","_typeof","_skeleton","Object","defineProperty","exports","value","default","_classnames","_react","_interopRequireWildcard","_reactDom","_adhereUiBacktopanimation","_adhereUiConditionalrender","_adhereUiScrollload","_getRequireWildcardCache","nodeInterop","cacheBabelInterop","cacheNodeInterop","WeakMap","obj","__esModule","cache","has","get","key","desc","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","prototype","hasOwnProperty","call","set","__assign","assign","t","s","i","n","arguments","length","p","apply","this","selectorPrefix","CommentList","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","createElement","ref","defaultScrollLoadProps","loading","current","result","push","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","distance","noMatch","getContainer","querySelector","onTrigger","Promise","resolve","createPortal","_default","memo"],"mappings":"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"}