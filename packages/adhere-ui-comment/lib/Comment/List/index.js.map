{"version":3,"file":"index.js","sources":["Comment/List/index.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.promise.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar react_1 = tslib_1.__importStar(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar adhere_ui_backtopanimation_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-backtopanimation\"));\n\nvar adhere_ui_conditionalrender_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\n\nvar adhere_ui_scrollload_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-scrollload\"));\n\nvar selectorPrefix = 'adhere-ui-comment-inner-list';\n/**\n * CommentList\n * @constructor\n * @classdesc 评论列表\n */\n\nvar CommentList = function CommentList(props) {\n  var _a = props.className,\n      className = _a === void 0 ? '' : _a,\n      _b = props.style,\n      style = _b === void 0 ? {} : _b,\n      _c = props.isLoading,\n      isLoading = _c === void 0 ? false : _c,\n      _d = props.hasMore,\n      hasMore = _d === void 0 ? false : _d,\n      onLoadMore = props.onLoadMore,\n      _e = props.scrollLoadProps,\n      scrollLoadProps = _e === void 0 ? {} : _e,\n      renderFirstLoading = props.renderFirstLoading,\n      getScrollWrapContainer = props.getScrollWrapContainer,\n      children = props.children; // 第一次\n\n  var isFirst = (0, react_1.useRef)(true); // 第一次加载\n\n  var isFirstLoading = (0, react_1.useRef)(false);\n  var wrapRef = (0, react_1.useRef)(null);\n  /**\n   * renderDispatch\n   * @description 渲染的一个分配\n   * @return {*}\n   */\n\n  function renderDispatch() {\n    var loading = isLoading;\n\n    if (isFirst.current && !isFirstLoading.current && loading) {\n      isFirstLoading.current = true;\n    }\n\n    if (isFirst.current && isFirstLoading.current && !loading) {\n      isFirst.current = false;\n      isFirstLoading.current = false;\n    }\n\n    if (isFirst.current) {\n      return _renderFirstLoading();\n    }\n\n    return renderNormal();\n  }\n  /**\n   * _renderFirstLoading\n   * @description 渲染第一次的UI\n   * @return {JSX.Element}\n   */\n\n\n  function _renderFirstLoading() {\n    if (renderFirstLoading) {\n      return renderFirstLoading();\n    }\n\n    var result = [];\n\n    for (var i = 0; i < 7; i++) {\n      result.push(react_1.default.createElement(antd_1.Skeleton, {\n        key: i + 1,\n        loading: true,\n        avatar: true\n      }));\n    }\n\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-first-loading-wrap\")\n    }, result);\n  }\n  /**\n   * renderNormal\n   * @description 渲染真正的UI\n   * @return {JSX.Element}\n   */\n\n\n  function renderNormal() {\n    var defaultScrollLoadProps = {\n      getScrollContainer: function getScrollContainer() {\n        var _a;\n\n        return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n      },\n      onScrollBottom: onLoadMore\n    };\n    return react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n      conditional: hasMore\n    }, function () {\n      return react_1.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-normal-wrap\")\n      }, react_1.default.createElement(adhere_ui_scrollload_1.default, tslib_1.__assign({}, defaultScrollLoadProps, scrollLoadProps || {}, {\n        distance: (scrollLoadProps === null || scrollLoadProps === void 0 ? void 0 : scrollLoadProps.distance) || 50\n      }), children), react_1.default.createElement(adhere_ui_conditionalrender_1.default, {\n        conditional: !!(getScrollWrapContainer ? getScrollWrapContainer() : null),\n        noMatch: function noMatch() {\n          return react_1.default.createElement(adhere_ui_backtopanimation_1.default, {\n            getContainer: function getContainer() {\n              var _a, _b;\n\n              return (_b = (_a = wrapRef === null || wrapRef === void 0 ? void 0 : wrapRef.current) === null || _a === void 0 ? void 0 : _a.querySelector) === null || _b === void 0 ? void 0 : _b.call(_a, '.adhere-ui-scrollload');\n            },\n            onTrigger: function onTrigger() {\n              return Promise.resolve();\n            }\n          });\n        }\n      }, function () {\n        return react_dom_1.default.createPortal(react_1.default.createElement(adhere_ui_backtopanimation_1.default, {\n          getContainer: function getContainer() {\n            var _a;\n\n            return (_a = getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer()) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n          },\n          onTrigger: function onTrigger() {\n            return Promise.resolve();\n          }\n        }), getScrollWrapContainer === null || getScrollWrapContainer === void 0 ? void 0 : getScrollWrapContainer());\n      }));\n    });\n  }\n\n  return react_1.default.createElement(\"div\", {\n    className: (0, classnames_1.default)(selectorPrefix, className || ''),\n    style: style || {},\n    ref: wrapRef\n  }, renderDispatch());\n};\n\nexports.default = (0, react_1.memo)(CommentList);"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","classnames_1","__importDefault","react_1","__importStar","react_dom_1","adhere_ui_backtopanimation_1","adhere_ui_conditionalrender_1","adhere_ui_scrollload_1","selectorPrefix","CommentList","props","_a","className","_b","style","_c","isLoading","_d","hasMore","onLoadMore","_e","scrollLoadProps","renderFirstLoading","getScrollWrapContainer","children","isFirst","useRef","isFirstLoading","wrapRef","default","createElement","ref","defaultScrollLoadProps","loading","current","result","i","push","Skeleton","key","avatar","concat","getScrollContainer","firstElementChild","onScrollBottom","conditional","__assign","distance","noMatch","getContainer","querySelector","call","onTrigger","Promise","resolve","createPortal","memo"],"mappings":"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"}