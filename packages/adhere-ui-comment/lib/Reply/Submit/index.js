"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.string.trim.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),react_1=tslib_1.__importStar(require("react")),prop_types_1=tslib_1.__importDefault(require("prop-types")),data_1=tslib_1.__importDefault(require("@emoji-mart/data")),react_2=tslib_1.__importDefault(require("@emoji-mart/react")),antd_1=require("antd"),adhere_util_intl_1=tslib_1.__importDefault(require("@baifendian/adhere-util-intl")),adhere_ui_hooks_1=tslib_1.__importDefault(require("@baifendian/adhere-ui-hooks")),ar_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ar.json")),de_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/de.json")),en_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/en.json")),es_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/es.json")),fa_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/fa.json")),fr_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/fr.json")),it_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/it.json")),ja_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ja.json")),nl_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/nl.json")),pl_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/pl.json")),pt_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/pt.json")),ru_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ru.json")),uk_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/uk.json")),zh_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/zh.json")),emoji_1=tslib_1.__importDefault(require("./emoji")),TextArea=antd_1.Input.TextArea,useSetState=adhere_ui_hooks_1.default.useSetState,selectorPrefix="adhere-ui-comment-reply",LOCAL_MAP=new Map([["ar",ar_json_1.default],["de",de_json_1.default],["en",en_json_1.default],["es",es_json_1.default],["fa",fa_json_1.default],["fr",fr_json_1.default],["it",it_json_1.default],["ja",ja_json_1.default],["nl",nl_json_1.default],["pl",pl_json_1.default],["pt",pt_json_1.default],["ru",ru_json_1.default],["uk",uk_json_1.default],["zh",zh_json_1.default]]);function Reply(t){var e=tslib_1.__read(useSetState(""),2),o=e[0],l=e[1],i=(0,react_1.useRef)(),s=(0,react_1.useRef)(),e=tslib_1.__read((0,react_1.useState)(!1),2),r=e[0],n=e[1];return(0,react_1.useLayoutEffect)(function(){var e,t;function r(e){console.log("onDocBodyClick");var t=e.target,e=null==i?void 0:i.current;console.log("target",t),console.log("textAreaRef.current",e),[e.querySelector("textarea")].includes(t)||n(!1)}function a(e){console.log("onEmojiIconWrapClick"),e.stopPropagation()}return document.body.addEventListener("click",r),null!==(t=null===(e=null==s?void 0:s.current)||void 0===e?void 0:e.addEventListener)&&void 0!==t&&t.call(e,"click",a),function(){var e,t;document.body.removeEventListener("click",r),null!==(t=null===(e=null==s?void 0:s.current)||void 0===e?void 0:e.removeEventListener)&&void 0!==t&&t.call(e,"click",a)}},[]),react_1.default.createElement("div",{className:"".concat(selectorPrefix)},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-textarea-wrap"),ref:i},react_1.default.createElement(TextArea,{className:"".concat(selectorPrefix,"-textarea"),placeholder:adhere_util_intl_1.default.v("请输入回复内容"),autoFocus:!0,value:o,onChange:function(e){return l(e.target.value)},showCount:!0,maxLength:100})),react_1.default.createElement("div",{ref:s,className:"".concat(selectorPrefix,"-emoji-wrap")}),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-toolbar")},react_1.default.createElement(antd_1.Popover,{placement:"bottomLeft",getPopupContainer:function(){return s.current},content:react_1.default.createElement(react_2.default,{data:data_1.default,i18n:LOCAL_MAP.get(t.local||"zh"),onEmojiSelect:function(e){var t=e.native,r=null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.querySelector("textarea"),a=r.selectionStart;(e=tslib_1.__spreadArray([],tslib_1.__read(o),!1)).splice(a,0,t),l(e.join(""),function(){r.focus(),r.setSelectionRange(a+1,a+1)})}}),visible:r},react_1.default.createElement("div",{onClick:function(e){e.stopPropagation(),n(!r)}},react_1.default.createElement(emoji_1.default,{className:"".concat(selectorPrefix,"-toolbar-item-emoji")}))),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-toolbar-inner")},react_1.default.createElement(antd_1.Button,{type:"primary",className:"".concat(selectorPrefix,"-toolbar-item"),disabled:!o,onClick:function(){var e;null!==(e=null==t?void 0:t.onResult)&&void 0!==e&&e.call(t,o.trim())}},adhere_util_intl_1.default.v("添加")),react_1.default.createElement(antd_1.Button,{className:"".concat(selectorPrefix,"-toolbar-item"),onClick:function(){var e;return null===(e=null==t?void 0:t.onCancel)||void 0===e?void 0:e.call(t)}},adhere_util_intl_1.default.v("取消")))))}Reply.defaultProps={},Reply.propTypes={onCancel:prop_types_1.default.func,onResult:prop_types_1.default.func,local:prop_types_1.default.string},exports.default=Reply;
//# sourceMappingURL=index.js.map
