"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.map.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/esnext.map.delete-all.js"),require("core-js/modules/esnext.map.every.js"),require("core-js/modules/esnext.map.filter.js"),require("core-js/modules/esnext.map.find.js"),require("core-js/modules/esnext.map.find-key.js"),require("core-js/modules/esnext.map.includes.js"),require("core-js/modules/esnext.map.key-of.js"),require("core-js/modules/esnext.map.map-keys.js"),require("core-js/modules/esnext.map.map-values.js"),require("core-js/modules/esnext.map.merge.js"),require("core-js/modules/esnext.map.reduce.js"),require("core-js/modules/esnext.map.some.js"),require("core-js/modules/esnext.map.update.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.string.trim.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),react_1=tslib_1.__importStar(require("react")),data_1=tslib_1.__importDefault(require("@emoji-mart/data")),react_2=tslib_1.__importDefault(require("@emoji-mart/react")),antd_1=require("antd"),adhere_util_intl_1=tslib_1.__importDefault(require("@baifendian/adhere-util-intl")),adhere_ui_hooks_1=tslib_1.__importDefault(require("@baifendian/adhere-ui-hooks")),ar_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ar.json")),de_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/de.json")),en_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/en.json")),es_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/es.json")),fa_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/fa.json")),fr_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/fr.json")),it_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/it.json")),ja_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ja.json")),nl_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/nl.json")),pl_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/pl.json")),pt_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/pt.json")),ru_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/ru.json")),uk_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/uk.json")),zh_json_1=tslib_1.__importDefault(require("@emoji-mart/data/i18n/zh.json")),emoji_1=tslib_1.__importDefault(require("./emoji")),TextArea=antd_1.Input.TextArea,useSetState=adhere_ui_hooks_1.default.useSetState,selectorPrefix="adhere-ui-comment-reply",LOCAL_MAP=new Map([["ar",ar_json_1.default],["de",de_json_1.default],["en",en_json_1.default],["es",es_json_1.default],["fa",fa_json_1.default],["fr",fr_json_1.default],["it",it_json_1.default],["ja",ja_json_1.default],["nl",nl_json_1.default],["pl",pl_json_1.default],["pt",pt_json_1.default],["ru",ru_json_1.default],["uk",uk_json_1.default],["zh",zh_json_1.default]]),Reply=function(e){var t=e.local,r=void 0===t?"zh":t,t=e.emojiPickerProps,t=void 0===t?{}:t,a=e.onResult,o=e.onCancel,e=tslib_1.__read(useSetState(""),2),i=e[0],s=e[1],l=(0,react_1.useRef)(null),n=(0,react_1.useRef)(null),e=tslib_1.__read((0,react_1.useState)(!1),2),u=e[0],_=e[1];return(0,react_1.useLayoutEffect)(function(){var e,t;function r(e){e=e.target;[(null==l?void 0:l.current).querySelector("textarea")].includes(e)||_(!1)}function a(e){e.stopPropagation()}return document.body.addEventListener("click",r),null!==(t=null===(e=null==n?void 0:n.current)||void 0===e?void 0:e.addEventListener)&&void 0!==t&&t.call(e,"click",a),function(){var e,t;document.body.removeEventListener("click",r),null!==(t=null===(e=null==n?void 0:n.current)||void 0===e?void 0:e.removeEventListener)&&void 0!==t&&t.call(e,"click",a)}},[]),react_1.default.createElement("div",{className:"".concat(selectorPrefix)},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-textarea-wrap"),ref:l},react_1.default.createElement(TextArea,{className:"".concat(selectorPrefix,"-textarea"),placeholder:adhere_util_intl_1.default.v("请输入回复内容"),autoFocus:!0,value:i,onChange:function(e){return s(e.target.value)},showCount:!0,maxLength:100})),react_1.default.createElement("div",{ref:n,className:"".concat(selectorPrefix,"-emoji-wrap")}),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-toolbar")},react_1.default.createElement(antd_1.Popover,{placement:"bottomLeft",getPopupContainer:function(){return n.current},content:react_1.default.createElement(react_2.default,tslib_1.__assign({data:data_1.default,i18n:LOCAL_MAP.get(r||"zh"),onEmojiSelect:function(e){var t=e.native,r=null===(e=null==l?void 0:l.current)||void 0===e?void 0:e.querySelector("textarea"),a=r.selectionStart;s("".concat(i.substring(0,a)).concat(t).concat(i.substring(a)),function(){r.focus(),r.setSelectionRange(a+t.length,a+t.length)})}},t||{})),visible:u},react_1.default.createElement("div",{onClick:function(e){e.stopPropagation(),_(!u)}},react_1.default.createElement(emoji_1.default,{className:"".concat(selectorPrefix,"-toolbar-item-emoji")}))),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-toolbar-inner")},react_1.default.createElement(antd_1.Button,{type:"primary",className:"".concat(selectorPrefix,"-toolbar-item"),disabled:!i,onClick:function(){null!=a&&a(i.trim())}},adhere_util_intl_1.default.v("添加")),react_1.default.createElement(antd_1.Button,{className:"".concat(selectorPrefix,"-toolbar-item"),onClick:function(){return null==o?void 0:o()}},adhere_util_intl_1.default.v("取消")))))};exports.default=Reply;
//# sourceMappingURL=index.js.map
