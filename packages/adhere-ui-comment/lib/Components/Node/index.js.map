{"version":3,"file":"index.js","sources":["Components/Node/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _adhereUiConditionalrender = _interopRequireDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\nvar _adhereUiFlexlayout = _interopRequireDefault(require(\"@baifendian/adhere-ui-flexlayout\"));\nvar _adhereUtil = _interopRequireDefault(require(\"@baifendian/adhere-util\"));\nvar _adhereUtilIntl = _interopRequireDefault(require(\"@baifendian/adhere-util-intl\"));\nvar _Info = _interopRequireDefault(require(\"../../Reply/Info\"));\nvar _Submit = _interopRequireDefault(require(\"../../Reply/Submit\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = void 0 && (void 0).__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar selectorPrefix = 'adhere-ui-comment-node';\nvar DEFAULT_KEYS = {\n  current: 'current',\n  totalPage: 'totalPage',\n  list: 'list',\n  totalCount: 'totalCount'\n};\n/**\n * Node\n * @param props\n * @constructor\n * @classdesc 节点(评论 | 回复)\n */\nvar Node = /*#__PURE__*/(0, _react.memo)(function (props) {\n  var _a, _b;\n  var _c = props.isReply,\n    isReply = _c === void 0 ? false : _c,\n    _d = props.dataKeys,\n    dataKeys = _d === void 0 ? DEFAULT_KEYS : _d,\n    _e = props.limit,\n    limit = _e === void 0 ? 10 : _e,\n    keyProp = props.keyProp,\n    children = props.children,\n    isMoreProp = props.isMoreProp,\n    renderAuthor = props.renderAuthor,\n    renderAvatar = props.renderAvatar,\n    renderContent = props.renderContent,\n    renderDateTime = props.renderDateTime,\n    renderLoading = props.renderLoading,\n    showReplyText = props.showReplyText,\n    hideReplyText = props.hideReplyText,\n    loadMoreReplyText = props.loadMoreReplyText,\n    showReplyTextIcon = props.showReplyTextIcon,\n    loadMoreCollapseTextIcon = props.loadMoreCollapseTextIcon,\n    hideReplyTextIcon = props.hideReplyTextIcon,\n    fetchReply = props.fetchReply,\n    emojiPickerProps = props.emojiPickerProps,\n    _f = props.local,\n    local = _f === void 0 ? 'zh' : _f;\n  var _g = (0, _react.useState)((_a = {}, _a[dataKeys.current] = 1, _a[dataKeys.list] = [], _a[dataKeys.totalCount] = 0, _a[dataKeys.totalPage] = 0, _a)),\n    listData = _g[0],\n    setListData = _g[1];\n  var _h = (0, _react.useState)(props === null || props === void 0 ? void 0 : props.data),\n    data = _h[0],\n    setData = _h[1];\n  var _j = (0, _react.useState)(false),\n    collapse = _j[0],\n    setCollapse = _j[1];\n  var _k = (0, _react.useState)(false),\n    loading = _k[0],\n    setLoading = _k[1];\n  var _l = (0, _react.useState)(false),\n    showReply = _l[0],\n    setShowReply = _l[1];\n  var paging = (0, _react.useRef)({\n    page: 1,\n    limit: limit\n  });\n  var renderActions = (0, _react.useCallback)(function () {\n    var _a;\n    var actions = __spreadArray([], (((_a = props === null || props === void 0 ? void 0 : props.renderActions) === null || _a === void 0 ? void 0 : _a.call(props, __assign({}, data), function (_data) {\n      return setData(_data);\n    })) || []).map(function (action, index) {\n      var _a, _b;\n      return _adhereUiConditionalrender.default.conditionalRender({\n        conditional: !((_b = (_a = action === null || action === void 0 ? void 0 : action.props) === null || _a === void 0 ? void 0 : _a.className) === null || _b === void 0 ? void 0 : _b.endsWith('-actions-action')),\n        noMatch: action,\n        match: /*#__PURE__*/_react.default.createElement(\"li\", {\n          key: index,\n          className: \"\".concat(selectorPrefix, \"-actions-action\")\n        }, action)\n      });\n    }), true);\n    if (!actions.find(function (t) {\n      var _a, _b;\n      return ((_b = (_a = t === null || t === void 0 ? void 0 : t.props) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.key) === 'reply';\n    })) {\n      actions.push( /*#__PURE__*/_react.default.createElement(\"li\", {\n        key: \"reply\",\n        className: (0, _classnames.default)(\"\".concat(selectorPrefix, \"-actions-action\"), \"\".concat(selectorPrefix, \"-actions-action-reply-btn\")),\n        onClick: function onClick() {\n          return setShowReply(true);\n        }\n      }, _adhereUtilIntl.default.v('回复')));\n    }\n    return actions;\n  }, [props === null || props === void 0 ? void 0 : props.renderActions, data, showReply]);\n  var renderChildren = (0, _react.useCallback)(function () {\n    var _a, _b;\n    return /*#__PURE__*/_react.default.createElement(\"ul\", {\n      className: \"\".concat(selectorPrefix, \"-children\")\n    }, (_b = (_a = listData[dataKeys.list] || []) === null || _a === void 0 ? void 0 : _a.map) === null || _b === void 0 ? void 0 : _b.call(_a, function (record) {\n      return /*#__PURE__*/_react.default.createElement(\"li\", {\n        className: \"\".concat(selectorPrefix, \"-children-item\"),\n        key: record[keyProp]\n      }, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: !children,\n        noMatch: function noMatch() {\n          return children === null || children === void 0 ? void 0 : children(record);\n        }\n      }, function () {\n        return /*#__PURE__*/_react.default.createElement(_Info.default, {\n          isReply: true,\n          data: record,\n          dataKeys: dataKeys,\n          limit: limit,\n          keyProp: keyProp,\n          isMoreProp: isMoreProp,\n          fetchData: props === null || props === void 0 ? void 0 : props.fetchData,\n          fetchReply: props === null || props === void 0 ? void 0 : props.fetchReply,\n          renderActions: props === null || props === void 0 ? void 0 : props.renderActions,\n          renderAuthor: renderAuthor,\n          renderAvatar: renderAvatar,\n          renderContent: renderContent,\n          renderDateTime: renderDateTime,\n          renderLoading: renderLoading,\n          showReplyText: showReplyText,\n          hideReplyText: hideReplyText,\n          loadMoreReplyText: loadMoreReplyText,\n          showReplyTextIcon: showReplyTextIcon,\n          hideReplyTextIcon: hideReplyTextIcon,\n          loadMoreCollapseTextIcon: loadMoreCollapseTextIcon,\n          local: local,\n          emojiPickerProps: emojiPickerProps\n        });\n      }));\n    }), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: !loading && hasMore()\n    }, function () {\n      return /*#__PURE__*/_react.default.createElement(\"li\", {\n        className: (0, _classnames.default)(\"\".concat(selectorPrefix, \"-children-item\"), 'more')\n      }, /*#__PURE__*/_react.default.createElement(\"a\", {\n        onClick: appendData\n      }, /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: _adhereUtil.default.isFunction(loadMoreCollapseTextIcon),\n        noMatch: function noMatch() {\n          return loadMoreCollapseTextIcon;\n        }\n      }, function () {\n        return loadMoreCollapseTextIcon instanceof Function ? loadMoreCollapseTextIcon() : loadMoreCollapseTextIcon;\n      })), /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: _adhereUtil.default.isFunction(loadMoreReplyText),\n        noMatch: function noMatch() {\n          return loadMoreReplyText;\n        }\n      }, function () {\n        return loadMoreReplyText instanceof Function ? loadMoreReplyText() : loadMoreReplyText;\n      }))));\n    }));\n  }, [listData, dataKeys.list, keyProp, isMoreProp, renderActions, renderAuthor, renderAvatar, renderContent, renderDateTime, renderLoading, showReplyText, hideReplyText, loadMoreReplyText, showReplyTextIcon, hideReplyTextIcon, loadMoreCollapseTextIcon, loading]);\n  var renderMore = (0, _react.useCallback)(function () {\n    return /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: !collapse,\n      noMatch: function noMatch() {\n        return /*#__PURE__*/_react.default.createElement(\"a\", {\n          className: \"\".concat(selectorPrefix, \"-collapse\"),\n          onClick: function onClick() {\n            return setCollapse(false);\n          }\n        }, /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n          conditional: _adhereUtil.default.isFunction(hideReplyTextIcon),\n          noMatch: function noMatch() {\n            return hideReplyTextIcon;\n          }\n        }, function () {\n          return hideReplyTextIcon instanceof Function ? hideReplyTextIcon() : hideReplyTextIcon;\n        })), /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n          conditional: _adhereUtil.default.isFunction(hideReplyText),\n          noMatch: function noMatch() {\n            return hideReplyText;\n          }\n        }, function () {\n          return hideReplyText instanceof Function ? hideReplyText() : hideReplyText;\n        })));\n      }\n    }, function () {\n      return /*#__PURE__*/_react.default.createElement(\"a\", {\n        className: \"\".concat(selectorPrefix, \"-collapse\"),\n        onClick: function onClick() {\n          var _a;\n          if (!!listData[dataKeys.list].length) {\n            setCollapse(true);\n            return;\n          }\n          (_a = loadData()) === null || _a === void 0 ? void 0 : _a.then(function () {\n            return setCollapse(true);\n          });\n        }\n      }, /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: _adhereUtil.default.isFunction(showReplyTextIcon),\n        noMatch: function noMatch() {\n          return showReplyTextIcon;\n        }\n      }, function () {\n        return showReplyTextIcon instanceof Function ? showReplyTextIcon() : showReplyTextIcon;\n      })), /*#__PURE__*/_react.default.createElement(\"span\", null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n        conditional: _adhereUtil.default.isFunction(showReplyText),\n        noMatch: function noMatch() {\n          return showReplyText;\n        }\n      }, function () {\n        return showReplyText instanceof Function ? showReplyText() : showReplyText;\n      })));\n    });\n  }, [collapse, listData, dataKeys.list, hideReplyText, hideReplyTextIcon, showReplyText, showReplyTextIcon]);\n  var hasMore = (0, _react.useCallback)(\n  // @ts-ignore\n  function () {\n    return listData[dataKeys.list].length <= listData[dataKeys.totalCount];\n  }, [listData, dataKeys.list, dataKeys.totalCount]);\n  var fetchData = (0, _react.useCallback)(function () {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = props === null || props === void 0 ? void 0 : props.fetchData) === null || _a === void 0 ? void 0 : _a.call(props, __assign(__assign({}, paging.current), {\n      record: __assign({}, data)\n    }))) === null || _b === void 0 ? void 0 : _b.then(function (data) {\n      setLoading(false);\n      return data;\n    })) === null || _c === void 0 ? void 0 : _c.catch(function (error) {\n      setLoading(false);\n      return error;\n    });\n  }, [props === null || props === void 0 ? void 0 : props.fetchData, paging.current.page, paging.current.limit, data]);\n  function loadData() {\n    var _a;\n    setLoading(true);\n    paging.current = {\n      page: 1,\n      limit: limit\n    };\n    return (_a = fetchData()) === null || _a === void 0 ? void 0 : _a.then(function (res) {\n      setListData(res);\n    });\n  }\n  function appendData() {\n    var _a;\n    setLoading(true);\n    paging.current.page = paging.current.page + 1;\n    var list = dataKeys.list;\n    return (_a = fetchData()) === null || _a === void 0 ? void 0 : _a.then(function (res) {\n      setListData(function (_listData) {\n        var _a;\n        return __assign(__assign({}, res), (_a = {}, _a[dataKeys.list] = __spreadArray(__spreadArray([], _listData[list], true), res[list], true), _a));\n      });\n    });\n  }\n  (0, _react.useEffect)(function () {\n    setData(props.data);\n  }, [props === null || props === void 0 ? void 0 : props.data]);\n  return /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default, {\n    direction: \"horizontal\",\n    className: (0, _classnames.default)(selectorPrefix, (_b = {}, _b[\"\".concat(selectorPrefix, \"-reply\")] = isReply, _b))\n  }, /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Fixed, {\n    className: \"\".concat(selectorPrefix, \"-avatar-wrap\")\n  }, renderAvatar === null || renderAvatar === void 0 ? void 0 : renderAvatar(__assign({}, data))), /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Auto, {\n    autoFixed: true,\n    fit: true\n  }, /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default, {\n    direction: \"vertical\"\n  }, /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Fixed, {\n    className: \"\".concat(selectorPrefix, \"-title-row\"),\n    fit: false\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-title-row-author\")\n  }, renderAuthor === null || renderAuthor === void 0 ? void 0 : renderAuthor(__assign({}, data))), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-title-row-date-time\")\n  }, renderDateTime === null || renderDateTime === void 0 ? void 0 : renderDateTime(__assign({}, data)))), /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Auto, {\n    className: \"\".concat(selectorPrefix, \"-content-wrap\")\n  }, renderContent === null || renderContent === void 0 ? void 0 : renderContent(__assign({}, data))), /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Fixed, null, /*#__PURE__*/_react.default.createElement(\"ul\", {\n    className: \"\".concat(selectorPrefix, \"-actions\")\n  }, renderActions())), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n    conditional: showReply\n  }, function () {\n    return /*#__PURE__*/_react.default.createElement(_adhereUiFlexlayout.default.Fixed, {\n      style: {\n        marginTop: 15\n      }\n    }, /*#__PURE__*/_react.default.createElement(_Submit.default, {\n      onCancel: function onCancel() {\n        return setShowReply(false);\n      },\n      onResult: function onResult(reply) {\n        var _a;\n        (_a = fetchReply === null || fetchReply === void 0 ? void 0 : fetchReply({\n          id: data === null || data === void 0 ? void 0 : data[keyProp],\n          record: __assign({}, data),\n          reply: reply\n        })) === null || _a === void 0 ? void 0 : _a.then(function () {\n          setShowReply(false);\n          loadData();\n        });\n      },\n      local: local,\n      emojiPickerProps: emojiPickerProps\n    }));\n  }), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n    conditional: data === null || data === void 0 ? void 0 : data[isMoreProp]\n  }, function () {\n    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: !loading\n    }, function () {\n      return renderMore();\n    }), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default.Show, {\n      conditional: collapse\n    }, renderChildren()), /*#__PURE__*/_react.default.createElement(_adhereUiConditionalrender.default, {\n      conditional: loading\n    }, function () {\n      return renderLoading === null || renderLoading === void 0 ? void 0 : renderLoading();\n    }));\n  }))));\n});\nNode.displayName = 'Node';\nvar _default = exports.default = Node;"],"names":["_interopRequireDefault","require","_typeof","_classnames","Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","_adhereUiConditionalrender","_adhereUiFlexlayout","_adhereUtil","_adhereUtilIntl","_Info","_Submit","_getRequireWildcardCache","e","r","t","WeakMap","__esModule","has","get","u","i","n","__proto__","a","getOwnPropertyDescriptor","prototype","hasOwnProperty","call","set","__assign","assign","s","arguments","length","p","apply","this","__spreadArray","to","from","pack","ar","l","Array","slice","concat","selectorPrefix","DEFAULT_KEYS","current","totalPage","list","totalCount","Node","memo","props","_b","_c","isReply","_d","dataKeys","_e","limit","keyProp","children","isMoreProp","renderAuthor","renderAvatar","renderContent","renderDateTime","renderLoading","showReplyText","hideReplyText","loadMoreReplyText","showReplyTextIcon","loadMoreCollapseTextIcon","hideReplyTextIcon","fetchReply","emojiPickerProps","_f","local","_g","useState","_a","listData","setListData","_h","data","setData","_j","collapse","setCollapse","_k","loading","setLoading","_l","showReply","setShowReply","paging","useRef","page","renderActions","useCallback","actions","_data","map","action","index","conditionalRender","conditional","className","endsWith","noMatch","match","createElement","key","find","push","onClick","v","renderChildren","record","fetchData","hasMore","appendData","isFunction","Function","renderMore","loadData","then","catch","error","res","_listData","useEffect","direction","Fixed","Auto","autoFixed","fit","style","marginTop","onCancel","onResult","reply","id","Fragment","Show","_default","displayName"],"mappings":"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"}