var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};import React,{useEffect,useState}from"react";import SelectFormItem from"../SelectFormItem";import TableFormItem from"../TableFormItem";var TableSelectFormItem=function(e){var t=e.dataSource,r=__rest(e,["dataSource"]),e=useState(""),n=e[0],o=e[1],e=useState(r.value?[r.value]:[]),a=e[0],l=e[1],e=useState(r.value?t.find(function(e){return e[r.rowKey||"id"]===r.value}):[]),u=e[0],c=e[1];return useEffect(function(){r.value?(l([r.value]),c([t.find(function(e){return e[r.rowKey||"id"]===r.value})])):(l([]),c([]))},[r.value]),React.createElement(SelectFormItem,{selectProps:__assign({value:r.value,dropdownRender:function(){var e=n?t.filter(function(e){return e[r.labelKey||"name"].startsWith(n)}):t;return React.createElement(TableFormItem,__assign({rowSelection:{type:"radio",selectedRowKeys:a,selectedRows:u,onChange:function(e,t){l(e),c(t),null!=(t=null==r?void 0:r.onChange)&&t.call(r,e.length?e[0]:"")}}},r,{dataSource:e}))},onChange:function(e){var t;null!=(t=null==r?void 0:r.onChange)&&t.call(r,e)},filterOption:function(e){return o(e),!1},onBlur:function(){o("")},onClear:function(){o("")}},r.selectProps||{}),dataSource:t.map(function(e){return{label:e[r.labelKey||"name"],value:e[r.rowKey||"id"]}})})};export default TableSelectFormItem;
//# sourceMappingURL=index.js.map
