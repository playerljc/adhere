{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableMulitSelectFormItem/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport React, { useEffect, useState } from 'react';\r\nimport MulitSelectFormItem from '../MulitSelectFormItem';\r\nimport TableFormItem from '../TableFormItem';\r\n/**\r\n * TableMulitSelectFormItem\r\n * @param dataSource\r\n * @param props\r\n * @constructor\r\n */\r\nvar TableMulitSelectFormItem = function (_a) {\r\n    var dataSource = _a.dataSource, props = __rest(_a, [\"dataSource\"]);\r\n    var _b = useState(''), inputValue = _b[0], setInputValue = _b[1];\r\n    var _c = useState(props.value ? props.value : []), selectedRowKeys = _c[0], setSelectedRowKeys = _c[1];\r\n    var _d = useState(props.value\r\n        ? props.value.map(function (t) { return dataSource.find(function (_item) { return _item[props.rowKey || 'id'] === t; }); })\r\n        : []), selectedRows = _d[0], setSelectedRows = _d[1];\r\n    function renderDropdownRender() {\r\n        var data = inputValue\r\n            ? dataSource.filter(function (t) { return t[props.labelKey || 'name'].startsWith(inputValue); })\r\n            : dataSource;\r\n        return (React.createElement(TableFormItem, __assign({ rowSelection: {\r\n                type: 'checkbox',\r\n                selectedRowKeys: selectedRowKeys,\r\n                // @ts-ignore\r\n                selectedRows: selectedRows,\r\n                onChange: function (selectedRowKeys, selectedRows) {\r\n                    var _a;\r\n                    setSelectedRowKeys(selectedRowKeys);\r\n                    setSelectedRows(selectedRows);\r\n                    (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, selectedRowKeys.length ? selectedRowKeys : []);\r\n                },\r\n            } }, props, { dataSource: data })));\r\n    }\r\n    useEffect(function () {\r\n        if (props.value) {\r\n            setSelectedRowKeys(props.value);\r\n            setSelectedRows(props.value.map(function (t) { return dataSource.find(function (_item) { return _item[props.rowKey || 'id'] === t; }); }));\r\n        }\r\n        else {\r\n            setSelectedRowKeys([]);\r\n            setSelectedRows([]);\r\n        }\r\n    }, [props.value]);\r\n    return (React.createElement(MulitSelectFormItem, { selectProps: __assign({ value: props.value, dropdownRender: renderDropdownRender, onChange: function (values) {\r\n                var _a;\r\n                (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, values);\r\n            }, filterOption: function (inputValue) {\r\n                setInputValue(inputValue);\r\n                return false;\r\n            }, onBlur: function () {\r\n                setInputValue('');\r\n            }, onClear: function () {\r\n                setInputValue('');\r\n            } }, (props.selectProps || {})), dataSource: dataSource.map(function (t) { return ({\r\n            label: t[props.labelKey || 'name'],\r\n            value: t[props.rowKey || 'id'],\r\n        }); }) }));\r\n};\r\nexport default TableMulitSelectFormItem;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useEffect","useState","MulitSelectFormItem","TableFormItem","TableMulitSelectFormItem","_a","dataSource","props","_b","inputValue","setInputValue","_c","value","selectedRowKeys","setSelectedRowKeys","_d","map","find","_item","rowKey","selectedRows","setSelectedRows","createElement","selectProps","dropdownRender","data","filter","labelKey","startsWith","rowSelection","type","onChange","values","filterOption","onBlur","onClear","label"],"mappings":"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"}