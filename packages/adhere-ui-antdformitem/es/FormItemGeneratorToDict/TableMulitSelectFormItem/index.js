var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};import React,{useEffect,useState}from"react";import MulitSelectFormItem from"../MulitSelectFormItem";import TableFormItem from"../TableFormItem";var TableMulitSelectFormItem=function(e){var n=e.dataSource,r=__rest(e,["dataSource"]),e=useState(""),t=e[0],o=e[1],e=useState(r.value||[]),a=e[0],l=e[1],e=useState(r.value?r.value.map(function(t){return n.find(function(e){return e[r.rowKey||"id"]===t})}):[]),u=e[0],i=e[1];return useEffect(function(){r.value?(l(r.value),i(r.value.map(function(t){return n.find(function(e){return e[r.rowKey||"id"]===t})}))):(l([]),i([]))},[r.value]),React.createElement(MulitSelectFormItem,{selectProps:__assign({value:r.value,dropdownRender:function(){var e=t?n.filter(function(e){return e[r.labelKey||"name"].startsWith(t)}):n;return React.createElement(TableFormItem,__assign({rowSelection:{type:"checkbox",selectedRowKeys:a,selectedRows:u,onChange:function(e,t){l(e),i(t),null!=(t=null==r?void 0:r.onChange)&&t.call(r,e.length?e:[])}}},r,{dataSource:e}))},onChange:function(e){var t;null!=(t=null==r?void 0:r.onChange)&&t.call(r,e)},filterOption:function(e){return o(e),!1},onBlur:function(){o("")},onClear:function(){o("")}},r.selectProps||{}),dataSource:n.map(function(e){return{label:e[r.labelKey||"name"],value:e[r.rowKey||"id"]}})})};export default TableMulitSelectFormItem;
//# sourceMappingURL=index.js.map
