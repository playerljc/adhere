{"version":3,"file":"index.js","sources":["FormItemGeneratorToDict/TableSelectFormItem/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport React, { useEffect, useState } from 'react';\r\nimport SelectFormItem from '../SelectFormItem';\r\nimport TableFormItem from '../TableFormItem';\r\n/**\r\n * TableSelectFormItem\r\n * @param dataSource\r\n * @param props\r\n * @constructor\r\n */\r\nvar TableSelectFormItem = function (_a) {\r\n    var dataSource = _a.dataSource, props = __rest(_a, [\"dataSource\"]);\r\n    var _b = useState(''), inputValue = _b[0], setInputValue = _b[1];\r\n    var _c = useState(props.value ? [props.value] : []), selectedRowKeys = _c[0], setSelectedRowKeys = _c[1];\r\n    var _d = useState(\r\n    // @ts-ignore\r\n    props.value ? dataSource.find(function (t) { return t[props.rowKey || 'id'] === props.value; }) : []), selectedRows = _d[0], setSelectedRows = _d[1];\r\n    /**\r\n     * renderDropdownRender\r\n     * @return {JSX.Element}\r\n     */\r\n    function renderDropdownRender() {\r\n        var data = inputValue\r\n            ? dataSource.filter(function (t) { return t[props.labelKey || 'name'].indexOf(inputValue) !== -1; })\r\n            : dataSource;\r\n        return (React.createElement(TableFormItem, __assign({ rowSelection: {\r\n                type: 'radio',\r\n                selectedRowKeys: selectedRowKeys,\r\n                // @ts-ignore\r\n                selectedRows: selectedRows,\r\n                onChange: function (selectedRowKeys, selectedRows) {\r\n                    var _a;\r\n                    setSelectedRowKeys(selectedRowKeys);\r\n                    setSelectedRows(selectedRows);\r\n                    (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, selectedRowKeys.length ? selectedRowKeys[0] : '');\r\n                },\r\n            } }, props, { dataSource: data })));\r\n    }\r\n    useEffect(function () {\r\n        if (props.value) {\r\n            setSelectedRowKeys([props.value]);\r\n            setSelectedRows([dataSource.find(function (t) { return t[props.rowKey || 'id'] === props.value; })]);\r\n        }\r\n        else {\r\n            setSelectedRowKeys([]);\r\n            setSelectedRows([]);\r\n        }\r\n    }, [props.value]);\r\n    return (React.createElement(SelectFormItem, { selectProps: __assign({ value: props.value, dropdownRender: renderDropdownRender, onChange: function (value) {\r\n                var _a;\r\n                (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, value);\r\n            }, filterOption: function () {\r\n                return false;\r\n            }, onSearch: function (inputValue) { return setInputValue(inputValue); }, onBlur: function () {\r\n                setInputValue('');\r\n            }, onClear: function () {\r\n                setInputValue('');\r\n            } }, (props.selectProps || {})), dataSource: dataSource.map(function (t) { return ({\r\n            label: t[props.labelKey || 'name'],\r\n            value: t[props.rowKey || 'id'],\r\n        }); }) }));\r\n};\r\nexport default TableSelectFormItem;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useEffect","useState","SelectFormItem","TableFormItem","TableSelectFormItem","_a","dataSource","props","_b","inputValue","setInputValue","_c","value","selectedRowKeys","setSelectedRowKeys","_d","find","rowKey","selectedRows","setSelectedRows","createElement","selectProps","dropdownRender","data","filter","labelKey","rowSelection","type","onChange","filterOption","onSearch","onBlur","onClear","map","label"],"mappings":"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"}