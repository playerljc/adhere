{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["import React, { createContext, memo, useEffect, useState } from 'react';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Hooks from '@baifendian/adhere-ui-hooks';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport Resource from '@baifendian/adhere-util-resource';\r\nvar Context = createContext({});\r\nvar useForceUpdate = Hooks.useForceUpdate;\r\n/**\r\n * ConfigProvider\r\n * @constructor\r\n * @classdesc 全局配置 国际化、字典配置\r\n */\r\nvar ConfigProvider = function (props) {\r\n    var _a = props.intl, lang = _a.lang, locales = _a.locales, prefix = _a.prefix, children = props.children;\r\n    var _b = useState(false), isIntlInit = _b[0], setIntlInit = _b[1];\r\n    var forceUpdate = useForceUpdate();\r\n    useEffect(function () {\r\n        Intl.init({\r\n            prefix: prefix || 'local',\r\n            currentLocale: lang,\r\n            locales: locales || {},\r\n        }, Intl.isInit()).then(function () {\r\n            Resource.Dict.value.LocalsMoment.value[lang]();\r\n            if (!isIntlInit) {\r\n                setIntlInit(true);\r\n            }\r\n            else {\r\n                forceUpdate();\r\n            }\r\n        });\r\n    }, [lang, locales, prefix]);\r\n    return (React.createElement(ConditionalRender, { conditional: isIntlInit }, function () { return React.createElement(Context.Provider, { value: {} }, children()); }));\r\n};\r\nexport default memo(ConfigProvider);\r\n"],"names":["React","createContext","memo","useEffect","useState","ConditionalRender","Hooks","Intl","Resource","Context","useForceUpdate","ConfigProvider","props","_a","intl","lang","locales","prefix","children","_b","isIntlInit","setIntlInit","forceUpdate","init","currentLocale","isInit","then","Dict","value","LocalsMoment","createElement","conditional","Provider"],"mappings":"OAAOA,OAASC,cAAeC,KAAMC,UAAWC,QAAuB,KAAP,eACzDC,sBAAuB,iDACvBC,UAAW,qCACXC,SAAU,sCACVC,aAAc,mCACrB,IAAIC,QAAUR,cAAc,EAAE,EAC1BS,eAAiBJ,MAAMI,eAMvBC,eAAiB,SAAUC,GAC3B,IAAIC,EAAKD,EAAME,KAAMC,EAAOF,EAAGE,KAAMC,EAAUH,EAAGG,QAASC,EAASJ,EAAGI,OAAQC,EAAWN,EAAMM,SAC5FC,EAAKf,SAAS,CAAA,CAAK,EAAGgB,EAAaD,EAAG,GAAIE,EAAcF,EAAG,GAC3DG,EAAcZ,eAAe,EAgBjC,OAfAP,UAAU,WACNI,KAAKgB,KAAK,CACNN,OAAQA,GAAU,QAClBO,cAAeT,EACfC,QAASA,GAAW,EACxB,EAAGT,KAAKkB,OAAO,CAAC,EAAEC,KAAK,WACnBlB,SAASmB,KAAKC,MAAMC,aAAaD,MAAMb,GAAM,EACxCK,EAIDE,EAAY,EAHZD,EAAY,CAAA,CAAI,CAKxB,CAAC,CACL,EAAG,CAACN,EAAMC,EAASC,EAAO,EAClBjB,MAAM8B,cAAczB,kBAAmB,CAAE0B,YAAaX,CAAW,EAAG,WAAc,OAAOpB,MAAM8B,cAAcrB,QAAQuB,SAAU,CAAEJ,MAAO,EAAG,EAAGV,EAAS,CAAC,CAAG,CAAE,CACzK,iBACehB,KAAKS,cAAc"}