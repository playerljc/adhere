{"version":3,"file":"configprovider.js","sources":["configprovider.js"],"sourcesContent":["import React, { useEffect, createContext, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport Resource from '@baifendian/adhere-util-resource';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Hooks from '@baifendian/adhere-ui-hooks';\r\nvar Context = createContext({});\r\nvar useForceUpdate = Hooks.useForceUpdate;\r\n/**\r\n * ConfigProvider\r\n * @constructor\r\n * @classdesc 全局配置 国际化、字典配置\r\n */\r\nfunction ConfigProvider(props) {\r\n    var _a = props.intl, lang = _a.lang, locales = _a.locales, prefix = _a.prefix, children = props.children;\r\n    var _b = useState(false), isIntlInit = _b[0], setIntlInit = _b[1];\r\n    var forceUpdate = useForceUpdate();\r\n    useEffect(function () {\r\n        Intl.init({\r\n            prefix: prefix || 'local',\r\n            currentLocale: lang,\r\n            locales: locales || {},\r\n        }, Intl.isInit()).then(function () {\r\n            Resource.Dict.value.LocalsMoment.value[lang]();\r\n            if (!isIntlInit) {\r\n                setIntlInit(true);\r\n            }\r\n            else {\r\n                forceUpdate();\r\n            }\r\n        });\r\n    }, [lang, locales, prefix]);\r\n    return (React.createElement(ConditionalRender, { conditional: isIntlInit }, function () { return React.createElement(Context.Provider, { value: {} }, children()); }));\r\n}\r\nConfigProvider.defaultProps = {};\r\nConfigProvider.propTypes = {\r\n    intl: PropTypes.object,\r\n};\r\nexport default ConfigProvider;\r\n"],"names":["React","useEffect","createContext","useState","PropTypes","Intl","Resource","ConditionalRender","Hooks","Context","useForceUpdate","ConfigProvider","props","_a","intl","lang","locales","prefix","children","_b","isIntlInit","setIntlInit","forceUpdate","init","currentLocale","isInit","then","Dict","value","LocalsMoment","createElement","conditional","Provider","defaultProps","propTypes","object"],"mappings":"OAAOA,OAASC,UAAWC,cAAeC,4BACnCC,kCACAC,+CACAC,uDACAC,uEACAC,wCACP,IAAIC,QAAUP,cAAc,IACxBQ,eAAiBF,MAAME,eAM3B,SAASC,eAAeC,GACpB,IAAIC,EAAKD,EAAME,KAAMC,EAAOF,EAAGE,KAAMC,EAAUH,EAAGG,QAASC,EAASJ,EAAGI,OAAQC,EAAWN,EAAMM,SAC5FC,EAAKhB,UAAS,GAAQiB,EAAaD,EAAG,GAAIE,EAAcF,EAAG,GAC3DG,EAAcZ,iBAgBlB,OAfAT,UAAU,WACNI,KAAKkB,KAAK,CACNN,OAAQA,GAAU,QAClBO,cAAeT,EACfC,QAASA,GAAW,IACrBX,KAAKoB,UAAUC,KAAK,WACnBpB,SAASqB,KAAKC,MAAMC,aAAaD,MAAMb,KAClCK,EAIDE,IAHAD,GAAY,MAMrB,CAACN,EAAMC,EAASC,IACXjB,MAAM8B,cAAcvB,kBAAmB,CAAEwB,YAAaX,GAAc,WAAc,OAAOpB,MAAM8B,cAAcrB,QAAQuB,SAAU,CAAEJ,MAAO,IAAMV,OAE1JP,eAAesB,aAAe,GAC9BtB,eAAeuB,UAAY,CACvBpB,KAAMV,UAAU+B,uBAELxB"}