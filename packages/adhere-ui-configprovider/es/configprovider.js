var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};import init from"@baifendian/adhere-ui-css";import{useUpdateEffect,useUpdateLayoutEffect}from"ahooks";import classNames from"classnames";import React,{createContext,memo,useLayoutEffect,useMemo,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import Intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";var Context=createContext({}),useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-config-provider",InternalConfigProvider=memo(function(t){var e=t.intl,n=e.lang,o=e.locales,r=e.prefix,i=e.mainLanguage,a=t.theme,s=t.media,l=t.children,u=t.onIntlInit,e=t.isUseWrapper,c=void 0===e||e,f=useRef(null),e=useState(!1),d=e[0],m=e[1],p=useMemo(function(){return{intl:{lang:n,prefix:r,locales:null!=o?o:{}},media:__assign({isUseMedia:!1,designWidth:192},null!=s?s:{})}},[n,r,o,s]),v=useForceUpdate(),g=useMemo(function(){var e;return c?React.createElement("div",{ref:f,className:classNames(selectorPrefix,null!=(e=t.className)?e:""),style:null!=(e=t.style)?e:{}},l()):l()},[c,l,t.className,t.style]);function h(){return Intl.init({prefix:r||"local",currentLocale:n,locales:null!=o?o:{},mainLanguage:i||"zh_CN"},Intl.isInit())}return useUpdateEffect(function(){h().then(function(){Resource.Dict.value.LocalsMoment.value[n](),v()})},[n,o,r,i]),useLayoutEffect(function(){h().then(function(){Resource.Dict.value.LocalsMoment.value[n](),m(!0),u&&u()})},[]),useUpdateLayoutEffect(function(){d&&f.current&&init(a,f.current)},[a,d]),React.createElement(ConditionalRender,{conditional:d},function(){return React.createElement(Context.Provider,{value:p},g)})}),ConfigProvider=InternalConfigProvider;ConfigProvider.Context=Context,ConfigProvider.displayName="ConfigProvider";export default ConfigProvider;export{Context};
//# sourceMappingURL=ConfigProvider.js.map
