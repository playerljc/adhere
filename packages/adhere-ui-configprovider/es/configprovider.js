import init from"@baifendian/adhere-ui-css";import{useUpdateEffect,useUpdateLayoutEffect}from"ahooks";import classNames from"classnames";import React,{createContext,memo,useLayoutEffect,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import Intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";var Context=createContext({}),useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-config-provider",InternalConfigProvider=memo(function(t){var e=t.intl,n=e.lang,o=e.locales,r=e.prefix,a=e.mainLanguage,i=t.theme,l=t.children,c=t.onIntlInit,u=useRef(null),e=useState(!1),f=e[0],s=e[1],d=useForceUpdate();function m(){return Intl.init({prefix:r||"local",currentLocale:n,locales:null!=o?o:{},mainLanguage:a||"zh_CN"},Intl.isInit())}return useUpdateEffect(function(){m().then(function(){Resource.Dict.value.LocalsMoment.value[n](),d()})},[n,o,r,a]),useLayoutEffect(function(){m().then(function(){Resource.Dict.value.LocalsMoment.value[n](),s(!0),c&&c()})},[]),useUpdateLayoutEffect(function(){f&&u.current&&init(i,u.current)},[i,f]),React.createElement(ConditionalRender,{conditional:f},function(){var e;return React.createElement(Context.Provider,{value:{intl:{lang:n,prefix:r,locales:null!=o?o:{}}}},React.createElement("div",{ref:u,className:classNames(selectorPrefix,null!=(e=t.className)?e:""),style:null!=(e=t.style)?e:{}},l()))})}),ConfigProvider=InternalConfigProvider;ConfigProvider.Context=Context,ConfigProvider.displayName="ConfigProvider";export default ConfigProvider;export{Context};
//# sourceMappingURL=ConfigProvider.js.map
