var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};import init from"@baifendian/adhere-ui-css";import{useUpdateEffect,useUpdateLayoutEffect}from"ahooks";import classNames from"classnames";import React,{createContext,memo,useLayoutEffect,useMemo,useRef,useState}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Hooks from"@baifendian/adhere-ui-hooks";import Intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";var Context=createContext({}),useForceUpdate=Hooks.useForceUpdate,selectorPrefix="adhere-ui-config-provider",InternalConfigProvider=memo(function(t){var e=t.intl,n=e.lang,r=e.locales,o=e.prefix,i=e.mainLanguage,a=t.theme,s=t.media,l=t.children,u=t.onIntlInit,c=t.router,f=t.publicPath,e=t.isUseWrapper,d=void 0===e||e,m=useRef(null),e=useState(!1),p=e[0],v=e[1],g=useMemo(function(){return{intl:{lang:n,prefix:o,locales:null!=r?r:{}},media:__assign({isUseMedia:!1,designWidth:192},null!=s?s:{}),router:null!=c?c:"browser",publicPath:null!=f?f:"/"}},[n,o,r,s]),h=useForceUpdate(),C=useMemo(function(){var e;return d?React.createElement("div",{ref:m,className:classNames(selectorPrefix,null!=(e=t.className)?e:""),style:null!=(e=t.style)?e:{}},l()):l()},[d,l,t.className,t.style]);function x(){return Intl.init({prefix:o||"local",currentLocale:n,locales:null!=r?r:{},mainLanguage:i||"zh_CN"},Intl.isInit())}return useUpdateEffect(function(){x().then(function(){Resource.Dict.value.LocalsMoment.value[n](),h()})},[n,r,o,i]),useLayoutEffect(function(){x().then(function(){Resource.Dict.value.LocalsMoment.value[n](),v(!0),u&&u()})},[]),useUpdateLayoutEffect(function(){p&&m.current&&init(a,m.current,s)},[a,p]),React.createElement(ConditionalRender,{conditional:p},function(){return React.createElement(Context.Provider,{value:g},C)})}),ConfigProvider=InternalConfigProvider;ConfigProvider.Context=Context,ConfigProvider.displayName="ConfigProvider";export default ConfigProvider;export{Context};
//# sourceMappingURL=ConfigProvider.js.map
