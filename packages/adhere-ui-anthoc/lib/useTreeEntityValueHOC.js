"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,l=arguments.length;t<l;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,l){void 0===l&&(l=t);var n=Object.getOwnPropertyDescriptor(r,t);n&&("get"in n?r.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,l,n)}:function(e,r,t,l){e[l=void 0===l?t:l]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__spreadArray=function(e,r,t){if(t||2===arguments.length)for(var l,n=0,a=r.length;n<a;n++)!l&&n in r||((l=l||Array.prototype.slice.call(r,0,n))[n]=r[n]);return e.concat(l||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},omit_js_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("omit.js"))),react_1=__importStar(require("react")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";exports.default=function(i){var e,r=i.value,a=i.onChange,u=i.children,t=i.treeData,l=(0,react_1.useMemo)(function(){return!("isUsePrimaryValue"in i)||i.isUsePrimaryValue},[i.isUsePrimaryValue]);function o(e){var r;if(null!=(r=i.valueProp)?r:DEFAULT_VALUE_PROP in e)return e[null!=(r=i.valueProp)?r:DEFAULT_VALUE_PROP];for(var t=e[DEFAULT_VALUE_PROP],l=0;l<optionKeys.length;l++)if(optionKeys[l]in e){t=e[optionKeys[l]];break}return t}function _(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isPrimitive(e)}function f(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.flat().some(function(e){return adhere_util_1.default.isPrimitive(e)})}function d(e){return e.map(function(e){return _(e)?s(e):adhere_util_1.default.isArray(e)?d(e):e})}function s(a){var e;var r=__spreadArray([],null!=t?t:[],!0);return Array.isArray(i.value)?i.value.forEach(function(e){adhere_util_1.default.isObject(e)&&r.push(e)}):adhere_util_1.default.isObject(i.value)&&r.push(i.value),"treeDataSimpleMode"in u.props&&u.props.treeDataSimpleMode?null!=(e=(null!=r?r:[]).find(function(e){return Object.is(o(e),a)}))?e:a:null!=(e=function e(r){for(var t,l=0;l<r.length;l++){var n=o(r[l]);if(Object.is(n,a)){t=r[l];break}if(t=e(null!=(n=null==(n=r[l])?void 0:n[null!=(n=i.childrenProp)?n:"children"])?n:[]))break}return t}(null!=r?r:[]))?e:a}function n(e){for(var r=e[DEFAULT_VALUE_PROP],t=0;t<optionKeys.length;t++)if(optionKeys[t]in e){r=e[optionKeys[t]];break}return r}return _(r)?null!=a&&a(s(r)):f(r)&&null!=a&&a(d(r)),react_1.default.cloneElement(u,__assign(__assign(__assign({},(0,omit_js_1.default)(i,["children"])),u.props),{value:l?null!=(l=r)&&""!==(null==(e=null==l?void 0:l.trim)?void 0:e.call(l))&&!adhere_util_1.default.isArray(l)&&adhere_util_1.default.isRef(l)?n(r):null!=(e=r)&&""!==(null==(l=null==e?void 0:e.trim)?void 0:l.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.flat().every(function(e){return adhere_util_1.default.isRef(e)})?function r(e){return e.map(function(e){return(adhere_util_1.default.isArray(e)?r:n)(e)})}(r):r:r,realValue:r,onChange:function(e){for(var r,t,l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];_(e)?null!=a&&a.apply(void 0,__spreadArray([s(e)],l,!1)):f(e)?null!=a&&a.apply(void 0,__spreadArray([d(e)],l,!1)):null!=a&&a.apply(void 0,__spreadArray([e],l,!1)),null!=(t=null==(r=u.props)?void 0:r.onChange)&&t.call.apply(t,__spreadArray([r,e],l,!1))}}))};
//# sourceMappingURL=useTreeEntityValueHOC.js.map
