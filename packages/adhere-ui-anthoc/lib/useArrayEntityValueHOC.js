"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,l=1,n=arguments.length;l<n;l++)for(var t in r=arguments[l])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}).apply(this,arguments)},__spreadArray=function(e,r,l){if(l||2===arguments.length)for(var n,t=0,i=r.length;t<i;t++)!n&&t in r||((n=n||Array.prototype.slice.call(r,0,t))[t]=r[t]);return e.concat(n||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},omit_js_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("omit.js"))),react_1=__importDefault(require("react")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";exports.default=function(t){var e,r,l=t.value,i=t.onChange,a=t.children,n=t.options;function u(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isPrimitive(e)}function o(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.some(function(e){return adhere_util_1.default.isPrimitive(e)})}function _(e){return e.map(function(e){return u(e)?s(e):e})}function s(r){var e;return null!=(e=(null!=n?n:[]).find(function(e){return Object.is(function(e){var r;if(null!=(r=t.valueProp)?r:DEFAULT_VALUE_PROP in e)return e[null!=(r=t.valueProp)?r:DEFAULT_VALUE_PROP];for(var l=e[DEFAULT_VALUE_PROP],n=0;n<optionKeys.length;n++)if(optionKeys[n]in e){l=e[optionKeys[n]];break}return l}(e),r)}))?e:r}function f(e){for(var r=e[DEFAULT_VALUE_PROP],l=0;l<optionKeys.length;l++)if(optionKeys[l]in e){r=e[optionKeys[l]];break}return r}return u(l)?null!=i&&i(s(l)):o(l)&&null!=i&&i(_(l)),react_1.default.cloneElement(a,__assign(__assign(__assign({},(0,omit_js_1.default)(t,["children"])),a.props),{value:null!=(e=l)&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&!adhere_util_1.default.isArray(e)&&adhere_util_1.default.isRef(e)?f(l):null!=(r=l)&&""!==(null==(e=null==r?void 0:r.trim)?void 0:e.call(r))&&adhere_util_1.default.isArray(r)&&r.length&&r.every(function(e){return adhere_util_1.default.isRef(e)})?l.map(f):l,realValue:l,onChange:function(e){for(var r,l,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];u(e)?null!=i&&i.apply(void 0,__spreadArray([s(e)],n,!1)):o(e)?null!=i&&i.apply(void 0,__spreadArray([_(e)],n,!1)):null!=i&&i.apply(void 0,__spreadArray([e],n,!1)),null!=(l=null==(r=a.props)?void 0:r.onChange)&&l.call.apply(l,__spreadArray([r,e],n,!1))}}))};
//# sourceMappingURL=useArrayEntityValueHOC.js.map
