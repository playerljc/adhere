"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var l in r=arguments[t])Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,n){void 0===n&&(n=t);var l=Object.getOwnPropertyDescriptor(r,t);l&&("get"in l?r.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,l)}:function(e,r,t,n){e[n=void 0===n?t:n]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__spreadArray=function(e,r,t){if(t||2===arguments.length)for(var n,l=0,i=r.length;l<i;l++)!n&&l in r||((n=n||Array.prototype.slice.call(r,0,l))[l]=r[l]);return e.concat(n||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},omit_js_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("omit.js"))),react_1=__importStar(require("react")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";exports.default=function(l){var e,r=l.value,i=l.onChange,a=l.children,n=l.options,t=(0,react_1.useMemo)(function(){return!("isUsePrimaryValue"in l)||l.isUsePrimaryValue},[l.isUsePrimaryValue]);function u(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isPrimitive(e)}function o(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.some(function(e){return adhere_util_1.default.isPrimitive(e)})}function _(e){return e.map(function(e){return u(e)?s(e):e})}function s(r){var e,t=__spreadArray([],null!=n?n:[],!0);return Array.isArray(l.value)?l.value.forEach(function(e){adhere_util_1.default.isObject(e)&&t.push(e)}):adhere_util_1.default.isObject(l.value)&&t.push(l.value),null!=(e=(null!=t?t:[]).find(function(e){return Object.is(function(e){var r;if(null!=(r=l.valueProp)?r:DEFAULT_VALUE_PROP in e)return e[null!=(r=l.valueProp)?r:DEFAULT_VALUE_PROP];for(var t=e[DEFAULT_VALUE_PROP],n=0;n<optionKeys.length;n++)if(optionKeys[n]in e){t=e[optionKeys[n]];break}return t}(e),r)}))?e:r}function f(e){for(var r=e[DEFAULT_VALUE_PROP],t=0;t<optionKeys.length;t++)if(optionKeys[t]in e){r=e[optionKeys[t]];break}return r}return u(r)?null!=i&&i(s(r)):o(r)&&null!=i&&i(_(r)),react_1.default.cloneElement(a,__assign(__assign(__assign({},(0,omit_js_1.default)(l,["children"])),a.props),{value:t?null!=(t=r)&&""!==(null==(e=null==t?void 0:t.trim)?void 0:e.call(t))&&!adhere_util_1.default.isArray(t)&&adhere_util_1.default.isRef(t)?f(r):null!=(e=r)&&""!==(null==(t=null==e?void 0:e.trim)?void 0:t.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.every(function(e){return adhere_util_1.default.isRef(e)})?r.map(f):r:r,realValue:r,onChange:function(e){for(var r,t,n=[],l=1;l<arguments.length;l++)n[l-1]=arguments[l];u(e)?null!=i&&i.apply(void 0,__spreadArray([s(e)],n,!1)):o(e)?null!=i&&i.apply(void 0,__spreadArray([_(e)],n,!1)):null!=i&&i.apply(void 0,__spreadArray([e],n,!1)),null!=(t=null==(r=a.props)?void 0:r.onChange)&&t.call.apply(t,__spreadArray([r,e],n,!1))}}))};
//# sourceMappingURL=useArrayEntityValueHOC.js.map
