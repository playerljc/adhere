"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var l in r=arguments[t])Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,n){void 0===n&&(n=t);var l=Object.getOwnPropertyDescriptor(r,t);l&&("get"in l?r.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,l)}:function(e,r,t,n){e[n=void 0===n?t:n]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__spreadArray=function(e,r,t){if(t||2===arguments.length)for(var n,l=0,i=r.length;l<i;l++)!n&&l in r||((n=n||Array.prototype.slice.call(r,0,l))[l]=r[l]);return e.concat(n||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},omit_js_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("omit.js"))),react_1=__importStar(require("react")),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";exports.default=function(i){var e,r=i.value,a=i.onChange,u=i.children,n=i.options,t=(0,react_1.useMemo)(function(){return!("isUsePrimaryValue"in i)||i.isUsePrimaryValue},[i.isUsePrimaryValue]);function o(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isPrimitive(e)}function _(e){var r;return null!=e&&""!==(null==(r=null==e?void 0:e.trim)?void 0:r.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.some(function(e){return adhere_util_1.default.isPrimitive(e)})}function s(e){return e.map(function(e){return o(e)?c(e):e})}function c(r){var e,t=__spreadArray([],null!=n?n:[],!0);return Array.isArray(i.value)?i.value.forEach(function(e){adhere_util_1.default.isObject(e)&&t.push(e)}):adhere_util_1.default.isObject(i.value)&&t.push(i.value),null!=(e=(null!=t?t:[]).find(function(e){return Object.is(function(e){var r;if(null!=(r=i.valueProp)?r:DEFAULT_VALUE_PROP in e)return e[null!=(r=i.valueProp)?r:DEFAULT_VALUE_PROP];for(var t=e[DEFAULT_VALUE_PROP],n=0;n<optionKeys.length;n++)if(optionKeys[n]in e){t=e[optionKeys[n]];break}return t}(e),r)}))?e:r}function l(e){for(var r=e[DEFAULT_VALUE_PROP],t=0;t<optionKeys.length;t++)if(optionKeys[t]in e){r=e[optionKeys[t]];break}return r}return o(r)?null!=a&&a(c(r)):_(r)&&null!=a&&a(s(r)),react_1.default.cloneElement(u,__assign(__assign(__assign({},(0,omit_js_1.default)(i,["children","options"])),u.props),{value:t?null!=(t=r)&&""!==(null==(e=null==t?void 0:t.trim)?void 0:e.call(t))&&!adhere_util_1.default.isArray(t)&&adhere_util_1.default.isRef(t)?l(r):null!=(e=r)&&""!==(null==(t=null==e?void 0:e.trim)?void 0:t.call(e))&&adhere_util_1.default.isArray(e)&&e.length&&e.every(function(e){return adhere_util_1.default.isRef(e)})?r.map(l):r:r,realValue:r,onChange:function(e){for(var r,t,n=[],l=1;l<arguments.length;l++)n[l-1]=arguments[l];o(e)?null!=a&&a.apply(void 0,__spreadArray([c(e)],n,!1)):_(e)?null!=a&&a.apply(void 0,__spreadArray([s(e)],n,!1)):null!=a&&a.apply(void 0,__spreadArray([e],n,!1)),Object.is(a,null==(r=u.props)?void 0:r.onChange)||"changePropagation"in i&&!i.changePropagation||null!=(t=null==(r=u.props)?void 0:r.onChange)&&t.call.apply(t,__spreadArray([r,e],n,!1))}}))};
//# sourceMappingURL=useArrayEntityValueHOC.js.map
