"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),react_1=require("react"),DEFAULT_PAGE=1,DEFAULT_LIMIT=10,usePagingTreeRenderProps=function(e){var i=e.loadData,t=e.defaultPage,a=e.defaultLimit,n=e.tablePagingProps,r=e.multiple,u=e.treeDataSimpleMode,o=e.suspenseRef,l=e.onDataSourceChange,s=(0,react_1.useRef)(void 0),c=null!=a?a:DEFAULT_LIMIT,g=null!=t?t:DEFAULT_PAGE,e=(0,react_1.useState)(""),f=e[0],p=e[1],e=(0,react_1.useState)({page:g,limit:c}),_=e[0],d=e[1],e=(0,react_1.useState)(0),P=e[0],h=e[1],e=(0,react_1.useState)([]),m=e[0],v=e[1],e=(0,react_1.useMemo)(function(){return!!r},[r]),D=(0,react_1.useMemo)(function(){return!!u},[u]);function S(){return new Promise(function(r,u){d(function(e){var t,n=e.page,a=e.limit;return null!=(t=null==(a=null==i?void 0:i(n,a,s.current))?void 0:a.then)&&t.call(a,function(e){var t=e.totalCount,a=e.data;h(t),v(a),null!=l&&l(n,a),r(e)}).catch(function(e){return u(e)}),e})})}function T(e,t){d({page:e,limit:t}),p("")}function E(e,t){d({page:e,limit:t}),p("")}return(0,ahooks_1.useUpdateEffect)(function(){d({page:g,limit:c})},[t,a]),(0,ahooks_1.useUpdateEffect)(function(){var e;o?null!=(e=o.fetchData)&&e.call(o):S()},[_]),{inputValue:f,treeData:m,paging:_,setInputValue:p,setPaging:d,defaultCurrentPage:g,defaultPageSize:c,isMultiple:e,isTreeDataSimpleMode:D,fetchData:S,setKw:function(e){s.current=e},renderProps:function(e){return __assign(__assign(__assign({},null!=n?n:{}),e),{totalCount:P,paging:_,defaultLimit:a,onPagingChange:T,onPagingShowSizeChange:E})}}};exports.default=usePagingTreeRenderProps;
//# sourceMappingURL=usePagingTreeRenderProps.js.map
