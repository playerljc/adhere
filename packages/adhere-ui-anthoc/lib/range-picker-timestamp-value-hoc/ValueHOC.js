"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,r,t,n){void 0===n&&(n=t);var a=Object.getOwnPropertyDescriptor(r,t);a&&("get"in a?r.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,a)}:function(e,r,t,n){e[n=void 0===n?t:n]=r[t]},__setModuleDefault=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},__importStar=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__rest=function(e,r){var t={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]]);return t},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},dayjs_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("dayjs"))),quarterOfYear_1=__importDefault(require("dayjs/plugin/quarterOfYear")),weekOfYear_1=__importDefault(require("dayjs/plugin/weekOfYear")),react_1=__importStar(require("react")),range_picker_1=__importDefault(require("../range-picker")),DEFAULT_TYPE=(dayjs_1.default.extend(weekOfYear_1.default),dayjs_1.default.extend(quarterOfYear_1.default),["milliseconds","milliseconds"]),ValueHOC=function(e){var r=e.defaultValue,t=e.value,n=e.onChange,a=e.type,u=void 0===a?DEFAULT_TYPE:a,a=__rest(e,["defaultValue","value","onChange","type"]);function l(e){if(null==e)return e;if(!Array.isArray(e))return null;if(!e.length)return[];for(var r=Array.isArray(null!=u?u:DEFAULT_TYPE)?(null!=u?u:DEFAULT_TYPE).slice(0,2):DEFAULT_TYPE,t=0;t<2;t++)["seconds","milliseconds"].includes(r[t])||(r[t]="milliseconds");return r.join()===["seconds","seconds"].join()||r.join()===["seconds","seconds"].join()?[dayjs_1.default.unix(e[0]),dayjs_1.default.unix(e[1])]:r.join()===["seconds","milliseconds"].join()?[dayjs_1.default.unix(e[0]),(0,dayjs_1.default)(e[1])]:r.join()===["milliseconds","seconds"].join()?[(0,dayjs_1.default)(e[0]),dayjs_1.default.unix(e[1])]:[(0,dayjs_1.default)(e[0]),(0,dayjs_1.default)(e[1])]}function o(e){return Math.round(e/1e3)}function i(e){return{year:e.year(),quarter:e.quarter(),month:e.month(),week:e.week(),day:e.day(),date:e.date(),hour:e.hour(),minute:e.minute(),second:e.second()}}var e=(0,react_1.useMemo)(function(){return l(t)},[t]),s=(0,react_1.useMemo)(function(){return l(r)},[r]);return react_1.default.createElement(range_picker_1.default,__assign({},a,{defaultValue:s,value:e,onChange:function(e,r){var t;null!=n&&n(e&&e.length?(t=[e[0].valueOf(),e[1].valueOf()],!u||!Array.isArray(u)||u.length<2?t:"milliseconds"===u[0]&&"seconds"===u[1]?[t[0],o(t[1])]:"seconds"===u[0]&&"milliseconds"===u[1]?[o(t[0]),t[1]]:"seconds"===u[0]&&"seconds"===u[1]?[o(t[0]),o(t[1])]:t):e,r,e,e&&e.length?[i(e[0]),i(e[1])]:null)}}))};exports.default=ValueHOC;
//# sourceMappingURL=ValueHOC.js.map
