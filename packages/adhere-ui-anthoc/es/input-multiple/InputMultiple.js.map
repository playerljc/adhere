{"version":3,"file":"InputMultiple.js","sources":["input-multiple/InputMultiple.js"],"sourcesContent":["import _CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport _PlusOutlined from \"@ant-design/icons/es/icons/PlusOutlined\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport React, { useMemo, useState } from 'react';\nimport FlexLayout from '@baifendian/adhere-ui-flexlayout';\nimport Hooks from '@baifendian/adhere-ui-hooks';\nimport Space from '@baifendian/adhere-ui-space';\nimport Intl from '@baifendian/adhere-util-intl';\nimport Input from '../input';\nimport Tag from '../tag';\nvar selectorPrefix = 'adhere-ui-anthoc-input-multiple';\nvar usePropToState = Hooks.usePropToState;\n/**\n * InputMultiple\n * @param className\n * @param style\n * @param tagWrapperClassName\n * @param tagWrapperStyle\n * @param inputProps\n * @param tagProps\n * @param renderAdd\n * @param renderClear\n * @param direction\n * @param isCheckAll\n * @param options\n * @param value\n * @param onChange\n */\nvar InputMultiple = function (_a) {\n  var _b, _c;\n  var className = _a.className,\n    style = _a.style,\n    tagWrapperClassName = _a.tagWrapperClassName,\n    tagWrapperStyle = _a.tagWrapperStyle,\n    inputProps = _a.inputProps,\n    tagProps = _a.tagProps,\n    renderAdd = _a.renderAdd,\n    renderClear = _a.renderClear,\n    direction = _a.direction,\n    isCheckAll = _a.isCheckAll,\n    options = _a.options,\n    value = _a.value,\n    onChange = _a.onChange;\n  var _d = useState(''),\n    inputValue = _d[0],\n    setInputValue = _d[1];\n  var _e = usePropToState(options),\n    selectOptions = _e[0],\n    setSelectOptions = _e[1];\n  var _f = usePropToState(value),\n    targetValue = _f[0],\n    setTargetValue = _f[1];\n  var targetTagProps = useMemo(function () {\n    return tagProps !== null && tagProps !== void 0 ? tagProps : {};\n  }, [tagProps]);\n  var targetDirection = useMemo(function () {\n    return direction !== null && direction !== void 0 ? direction : 'horizontal';\n  }, [direction]);\n  var isCheckAllTarget = useMemo(function () {\n    return !!isCheckAll;\n  }, [isCheckAll]);\n  var tagOptions = useMemo(function () {\n    return (selectOptions !== null && selectOptions !== void 0 ? selectOptions : []).map(function (t) {\n      return {\n        value: t.value,\n        children: t.label\n      };\n    });\n  }, [selectOptions]);\n  var TagComponent = useMemo(function () {\n    if (targetDirection === 'vertical') {\n      if (isCheckAllTarget) {\n        return Tag.VerticalCheckAllCheckableTagGroup;\n      }\n      return Tag.VerticalCheckableTagGroup;\n    }\n    if (targetDirection === 'horizontal') {\n      if (isCheckAllTarget) {\n        return Tag.HorizontalCheckAllCheckableTagGroup;\n      }\n      return Tag.HorizontalCheckableTagGroup;\n    }\n    return Tag.HorizontalCheckableTagGroup;\n  }, [targetDirection, isCheckAllTarget]);\n  /**\n   * onAdd\n   */\n  function onAdd() {\n    var targetInputValue = inputValue.trim();\n    if (!targetInputValue) return;\n    var item = (selectOptions !== null && selectOptions !== void 0 ? selectOptions : []).find(function (t) {\n      return t.value === targetInputValue;\n    });\n    if (!item) {\n      setSelectOptions(function (_options) {\n        return __spreadArray(__spreadArray([], _options !== null && _options !== void 0 ? _options : [], true), [{\n          label: inputValue,\n          value: inputValue\n        }], false);\n      });\n    }\n  }\n  /**\n   * onClear\n   */\n  function onClear() {\n    setSelectOptions([]);\n    setInputValue('');\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className),\n    style: style !== null && style !== void 0 ? style : {}\n  }, /*#__PURE__*/React.createElement(FlexLayout, {\n    direction: \"horizontal\"\n  }, /*#__PURE__*/React.createElement(Space.Group, {\n    direction: \"horizontal\",\n    size: 10\n  }, /*#__PURE__*/React.createElement(FlexLayout.Auto, null, /*#__PURE__*/React.createElement(Input, __assign({\n    placeholder: Intl.v('请输入关键字'),\n    showCount: false,\n    allowClear: false\n  }, inputProps !== null && inputProps !== void 0 ? inputProps : {}, {\n    value: inputValue,\n    onChange: function (e) {\n      setInputValue(e.target.value);\n    }\n  }))), /*#__PURE__*/React.createElement(FlexLayout.Fixed, {\n    fit: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onAdd,\n    className: \"\".concat(selectorPrefix, \"-btn-wrapper\")\n  }, (_b = renderAdd === null || renderAdd === void 0 ? void 0 : renderAdd()) !== null && _b !== void 0 ? _b : /*#__PURE__*/React.createElement(_PlusOutlined, {\n    className: \"\".concat(selectorPrefix, \"-btn\")\n  }))), /*#__PURE__*/React.createElement(FlexLayout.Fixed, {\n    fit: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onClear,\n    className: \"\".concat(selectorPrefix, \"-btn-wrapper\")\n  }, (_c = renderClear === null || renderClear === void 0 ? void 0 : renderClear()) !== null && _c !== void 0 ? _c : /*#__PURE__*/React.createElement(_CloseOutlined, {\n    className: \"\".concat(selectorPrefix, \"-btn\")\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(selectorPrefix, \"-tag-wrapper\"), tagWrapperClassName !== null && tagWrapperClassName !== void 0 ? tagWrapperClassName : ''),\n    style: tagWrapperStyle !== null && tagWrapperStyle !== void 0 ? tagWrapperStyle : {}\n  }, /*#__PURE__*/React.createElement(TagComponent, __assign({\n    mode: \"multiple\"\n  }, targetTagProps, {\n    wrap: true,\n    options: tagOptions !== null && tagOptions !== void 0 ? tagOptions : [],\n    value: targetValue,\n    onChange: function (_value) {\n      setTargetValue(_value);\n      onChange === null || onChange === void 0 ? void 0 : onChange(_value);\n    }\n  }))));\n};\nexport default InputMultiple;"],"names":["_CloseOutlined","_PlusOutlined","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","ar","l","Array","slice","concat","classNames","React","useMemo","useState","FlexLayout","Hooks","Space","Intl","Input","Tag","selectorPrefix","usePropToState","InputMultiple","_a","className","style","tagWrapperClassName","tagWrapperStyle","inputProps","tagProps","renderAdd","renderClear","direction","isCheckAll","options","value","onChange","_d","inputValue","setInputValue","_e","selectOptions","setSelectOptions","_f","targetValue","setTargetValue","targetTagProps","targetDirection","isCheckAllTarget","tagOptions","map","children","label","TagComponent","VerticalCheckAllCheckableTagGroup","VerticalCheckableTagGroup","HorizontalCheckAllCheckableTagGroup","HorizontalCheckableTagGroup","createElement","Group","size","Auto","placeholder","v","showCount","allowClear","e","target","Fixed","fit","onClick","targetInputValue","trim","find","_options","_b","_c","mode","wrap","_value"],"mappings":"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"}