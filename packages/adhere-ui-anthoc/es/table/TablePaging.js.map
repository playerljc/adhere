{"version":3,"file":"TablePaging.js","sources":["table/TablePaging.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useMount, useUpdateEffect } from 'ahooks';\nimport React, { memo, useCallback, useMemo, useRef, useState } from 'react';\nimport Suspense from '@baifendian/adhere-ui-suspense';\nimport CheckboxPagingTable from './CheckboxPagingTable';\nimport RadioPagingTable from './RadioPagingTable';\nimport usePagingRenderProps from './usePagingRenderProps';\n/**\n * TablePaging\n * @param mode\n * @param value\n * @param onChange\n * @param pagingProps\n * @param tablePagingProps\n * @param isSuspenseAsync\n * @param suspenseProps\n * @constructor\n */\nvar TablePaging = function TablePaging(_a) {\n  var mode = _a.mode,\n    value = _a.value,\n    onChange = _a.onChange,\n    pagingProps = _a.pagingProps,\n    tablePagingProps = _a.tablePagingProps,\n    _b = _a.isSuspenseAsync,\n    isSuspenseAsync = _b === void 0 ? true : _b,\n    suspenseProps = _a.suspenseProps;\n  var _c = useState(value),\n    currentValue = _c[0],\n    setCurrentValue = _c[1];\n  var suspenseRef = useRef(null);\n  var _d = usePagingRenderProps(__assign(__assign({\n      tablePagingProps: tablePagingProps,\n      mode: mode\n    }, pagingProps), {\n      suspenseRef: suspenseRef.current\n    })),\n    isMultiple = _d.isMultiple,\n    options = _d.options,\n    fetchData = _d.fetchData,\n    renderProps = _d.renderProps,\n    paging = _d.paging;\n  var onTablePagingChange = useMemo(function () {\n    return function (_value, option) {\n      setCurrentValue(_value);\n      onChange === null || onChange === void 0 ? void 0 : onChange(_value, option);\n    };\n  }, [onChange]);\n  var isEmpty = useCallback(function () {\n    return paging.page === 1 && !options.length;\n  }, [paging, options]);\n  useMount(function () {\n    if (!isSuspenseAsync) {\n      fetchData();\n    }\n  });\n  useUpdateEffect(function () {\n    var _a, _b;\n    if (!isSuspenseAsync) {\n      fetchData();\n    } else {\n      (_b = (_a = suspenseRef === null || suspenseRef === void 0 ? void 0 : suspenseRef.current) === null || _a === void 0 ? void 0 : _a.reset) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n  }, [isSuspenseAsync, suspenseRef.current]);\n  useUpdateEffect(function () {\n    setCurrentValue(value);\n  }, [value]);\n  var render = useCallback(function (children) {\n    if (isSuspenseAsync) return (\n      /*#__PURE__*/\n      // @ts-ignore\n      React.createElement(Suspense.ASync\n      // @ts-ignore\n      , __assign({\n        // @ts-ignore\n        ref: suspenseRef\n      }, suspenseProps !== null && suspenseProps !== void 0 ? suspenseProps : {}, {\n        fetchData: fetchData,\n        isEmpty: isEmpty\n      }), children)\n    );\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }, [isSuspenseAsync, suspenseProps, paging, options]);\n  return render([isMultiple && /*#__PURE__*/React.createElement(CheckboxPagingTable, __assign({}, renderProps({\n    value: currentValue,\n    onChange: onTablePagingChange,\n    options: options\n  }))), !isMultiple && /*#__PURE__*/React.createElement(RadioPagingTable, __assign({}, renderProps({\n    value: currentValue,\n    onChange: onTablePagingChange,\n    options: options\n  })))]);\n};\nexport default /*#__PURE__*/memo(TablePaging);"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useMount","useUpdateEffect","React","memo","useCallback","useMemo","useRef","useState","Suspense","CheckboxPagingTable","RadioPagingTable","usePagingRenderProps","TablePaging","_a","mode","value","onChange","pagingProps","tablePagingProps","_b","isSuspenseAsync","suspenseProps","_c","currentValue","setCurrentValue","suspenseRef","_d","current","isMultiple","options","fetchData","renderProps","paging","onTablePagingChange","_value","option","isEmpty","page","reset","children","createElement","ASync","ref","Fragment"],"mappings":"AAAA,IAAIA,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACSO,SAAUC,eAA+B,KAAR,gBACnCC,OAASC,KAAMC,YAAaC,QAASC,OAAQC,QAAuB,KAAP,eAC7DC,aAAc,wCACdC,wBAAyB,+BACzBC,qBAAsB,4BACtBC,yBAA0B,yBAYjC,IAAIC,YAAc,SAAqBC,GACrC,IAAIC,EAAOD,EAAGC,KACZC,EAAQF,EAAGE,MACXC,EAAWH,EAAGG,SACdC,EAAcJ,EAAGI,YACjBC,EAAmBL,EAAGK,iBACtBC,EAAKN,EAAGO,gBACRA,EAAyB,KAAA,IAAPD,GAAuBA,EACzCE,EAAgBR,EAAGQ,cACjBC,EAAKf,SAASQ,CAAK,EACrBQ,EAAeD,EAAG,GAClBE,EAAkBF,EAAG,GACnBG,EAAcnB,OAAO,IAAI,EACzBoB,EAAKf,qBAAqB1B,SAASA,SAAS,CAC5CiC,iBAAkBA,EAClBJ,KAAMA,CACR,EAAGG,CAAW,EAAG,CACfQ,YAAaA,EAAYE,OAC3B,CAAC,CAAC,EACFC,EAAaF,EAAGE,WAChBC,EAAUH,EAAGG,QACbC,EAAYJ,EAAGI,UACfC,EAAcL,EAAGK,YACjBC,EAASN,EAAGM,OACVC,EAAsB5B,QAAQ,WAChC,OAAO,SAAU6B,EAAQC,GACvBX,EAAgBU,CAAM,EACtBlB,MAAAA,GAAoDA,EAASkB,EAAQC,CAAM,CAC7E,CACF,EAAG,CAACnB,EAAS,EACToB,EAAUhC,YAAY,WACxB,OAAuB,IAAhB4B,EAAOK,MAAc,CAACR,EAAQnC,MACvC,EAAG,CAACsC,EAAQH,EAAQ,EAiCpB,OAhCA7B,SAAS,WACFoB,GACHU,EAAU,CAEd,CAAC,EACD7B,gBAAgB,WACd,IAAIY,EAAIM,EACHC,EAGH,OAACD,EAAK,OAACN,EAAKY,MAAAA,EAAiD,KAAA,EAASA,EAAYE,SAAqC,KAAA,EAASd,EAAGyB,QAA4CnB,EAAGrB,KAAKe,CAAE,EAFzLiB,EAAU,CAId,EAAG,CAACV,EAAiBK,EAAYE,QAAQ,EACzC1B,gBAAgB,WACduB,EAAgBT,CAAK,CACvB,EAAG,CAACA,EAAM,EACGX,YAAY,SAAUmC,GACjC,OAAInB,EAGFlB,MAAMsC,cAAchC,SAASiC,MAE3BxD,SAAS,CAETyD,IAAKjB,CACP,EAAGJ,MAAAA,EAAqDA,EAAgB,GAAI,CAC1ES,UAAWA,EACXM,QAASA,CACX,CAAC,EAAGG,CACN,EACoBrC,MAAMsC,cAActC,MAAMyC,SAAU,KAAMJ,CAAQ,CACxE,EAAG,CAACnB,EAAiBC,EAAeW,EAAQH,EAAQ,EACtC,CAACD,GAA2B1B,MAAMsC,cAAc/B,oBAAqBxB,SAAS,GAAI8C,EAAY,CAC1GhB,MAAOQ,EACPP,SAAUiB,EACVJ,QAASA,CACX,CAAC,CAAC,CAAC,EAAG,CAACD,GAA2B1B,MAAMsC,cAAc9B,iBAAkBzB,SAAS,GAAI8C,EAAY,CAC/FhB,MAAOQ,EACPP,SAAUiB,EACVJ,QAASA,CACX,CAAC,CAAC,CAAC,EAAE,CACP,iBAC4B1B,KAAKS,WAAW"}