{"version":3,"file":"TableExt.js","sources":["table/TableExt.js"],"sourcesContent":["import _Table from \"antd/es/table\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { usePrevious } from 'ahooks';\nimport classNames from 'classnames';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport Util from '@baifendian/adhere-util';\nvar selectorPrefix = 'adhere-ui-anthoc-table';\nvar TableExt = function (_a) {\n  var _b;\n  var wrapperClassName = _a.wrapperClassName,\n    wrapperStyle = _a.wrapperStyle,\n    fixedHeaderAutoTable = _a.fixedHeaderAutoTable,\n    fixedTableSpaceBetween = _a.fixedTableSpaceBetween,\n    props = __rest(_a, [\"wrapperClassName\", \"wrapperStyle\", \"fixedHeaderAutoTable\", \"fixedTableSpaceBetween\"]);\n  var tableWrapRef = useRef({});\n  var _c = useState(0),\n    scrollY = _c[0],\n    setScrollY = _c[1];\n  var preScrollY = usePrevious(scrollY);\n  var targetFixedHeaderAutoTable = useMemo(function () {\n    if (Util.isEmpty(fixedHeaderAutoTable)) return true;\n    return fixedHeaderAutoTable;\n  }, [fixedHeaderAutoTable]);\n  var targetFixedTableSpaceBetween = useMemo(function () {\n    if (Util.isEmpty(fixedTableSpaceBetween)) return true;\n    return fixedTableSpaceBetween;\n  }, [fixedTableSpaceBetween]);\n  useEffect(function () {\n    var _a, _b, _c;\n    debugger;\n    if (!tableWrapRef.current) return;\n    if (targetFixedHeaderAutoTable) {\n      var dataSource = (_a = props.dataSource) !== null && _a !== void 0 ? _a : [];\n      if (dataSource && dataSource.length && (preScrollY === 0 && scrollY === 0 || preScrollY !== scrollY)) {\n        var tableWrap = tableWrapRef.current;\n        var tableHeaderHeight = ((_b = tableWrap.querySelector('.ant-table-thead')) === null || _b === void 0 ? void 0 : _b.offsetHeight) || 0;\n        var tablePaginationHeight = ((_c = tableWrap.querySelector('.ant-table-pagination')) === null || _c === void 0 ? void 0 : _c.offsetHeight) || 0;\n        setScrollY(tableWrap.clientHeight - (tableHeaderHeight + (tablePaginationHeight ? tablePaginationHeight + 16 * 2 : 0)));\n      }\n    }\n  });\n  var targetTableProps = useMemo(function () {\n    var targetProps = __assign({}, props);\n    if (targetFixedHeaderAutoTable) {\n      if (targetProps.scroll) {\n        targetProps.scroll.y = scrollY;\n      } else {\n        targetProps.scroll = {\n          y: scrollY\n        };\n      }\n    }\n    return targetProps;\n  }, [scrollY, props, targetFixedHeaderAutoTable]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, (_b = {}, _b[\"\".concat(selectorPrefix, \"-fixed-table-space-between\")] = targetFixedTableSpaceBetween, _b), wrapperClassName),\n    style: wrapperStyle !== null && wrapperStyle !== void 0 ? wrapperStyle : {},\n    // @ts-ignore\n    ref: tableWrapRef\n  }, /*#__PURE__*/React.createElement(_Table, __assign({}, targetTableProps)));\n};\nexport default TableExt;"],"names":["_Table","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","usePrevious","classNames","React","useEffect","useMemo","useRef","useState","Util","selectorPrefix","TableExt","_a","_b","wrapperClassName","wrapperStyle","fixedHeaderAutoTable","fixedTableSpaceBetween","props","tableWrapRef","_c","scrollY","setScrollY","preScrollY","targetFixedHeaderAutoTable","isEmpty","targetFixedTableSpaceBetween","targetTableProps","tableWrap","tableHeaderHeight","tablePaginationHeight","current","dataSource","querySelector","offsetHeight","clientHeight","targetProps","scroll","y","createElement","className","concat","style","ref"],"mappings":"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"}