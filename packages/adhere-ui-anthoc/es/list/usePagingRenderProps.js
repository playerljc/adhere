var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};import{useUpdateEffect}from"ahooks";import{useMemo,useRef,useState}from"react";var DEFAULT_PAGE=1,DEFAULT_LIMIT=10,usePagingListRenderProps=function(t){var r=t.loadData,e=t.defaultPage,n=t.defaultLimit,a=t.listPagingProps,i=t.mode,u=t.suspenseRef,o=t.onDataSourceChange,s=useRef(void 0),l=null!=n?n:DEFAULT_LIMIT,f=null!=e?e:DEFAULT_PAGE,t=useState(""),g=t[0],c=t[1],t=useState({page:f,limit:l}),p=t[0],d=t[1],t=useState(0),P=t[0],m=t[1],t=useState([]),_=t[0],h=t[1],t=useMemo(function(){return"multiple"===i},[i]);function v(){return new Promise(function(i,u){d(function(t){var e,a=t.page,n=t.limit;return null!=(e=null==(n=null==r?void 0:r(a,n,s.current))?void 0:n.then)&&e.call(n,function(t){var e=t.totalCount,n=t.data;m(e),h(n),null!=o&&o(a,n),i(t)}).catch(function(t){return u(t)}),t})})}function L(t,e){d({page:t,limit:e}),c("")}function E(t,e){d({page:t,limit:e}),c("")}return useUpdateEffect(function(){d({page:f,limit:l})},[e,n]),useUpdateEffect(function(){var t;u?null!=(t=u.fetchData)&&t.call(u):v()},[p]),{inputValue:g,options:_,paging:p,setInputValue:c,setPaging:d,defaultCurrentPage:f,defaultPageSize:l,isMultiple:t,fetchData:v,setKw:function(t){s.current=t},renderProps:function(t){return __assign(__assign(__assign({},null!=a?a:{}),t),{totalCount:P,paging:p,defaultLimit:n,onPagingChange:L,onPagingShowSizeChange:E})}}};export default usePagingListRenderProps;
//# sourceMappingURL=usePagingRenderProps.js.map
