{"version":3,"file":"ListPaging.js","sources":["list/ListPaging.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useMount } from 'ahooks';\nimport { useUpdateEffect } from 'ahooks';\nimport React, { memo, useCallback, useMemo, useRef, useState } from 'react';\nimport Suspense from '@baifendian/adhere-ui-suspense';\nimport CheckboxPagingList from './CheckboxPagingList';\nimport RadioPagingList from './RadioPagingList';\nimport usePagingRenderProps from './usePagingRenderProps';\n/**\n * ListPaging\n * @param mode\n * @param value\n * @param onChange\n * @param pagingProps\n * @param listPagingProps\n * @param isSuspenseAsync\n * @param suspenseProps\n * @constructor\n */\nvar ListPaging = /*#__PURE__*/memo(function (_a) {\n  var mode = _a.mode,\n    value = _a.value,\n    onChange = _a.onChange,\n    pagingProps = _a.pagingProps,\n    listPagingProps = _a.listPagingProps,\n    _b = _a.isSuspenseAsync,\n    isSuspenseAsync = _b === void 0 ? true : _b,\n    suspenseProps = _a.suspenseProps;\n  var _c = useState(value),\n    currentValue = _c[0],\n    setCurrentValue = _c[1];\n  var suspenseRef = useRef(null);\n  var _d = usePagingRenderProps(__assign(__assign({\n      listPagingProps: listPagingProps,\n      mode: mode\n    }, pagingProps), {\n      suspenseRef: suspenseRef.current\n    })),\n    isMultiple = _d.isMultiple,\n    options = _d.options,\n    fetchData = _d.fetchData,\n    renderProps = _d.renderProps,\n    paging = _d.paging;\n  var onListPagingChange = useMemo(function () {\n    return function (_value, option) {\n      setCurrentValue(_value);\n      onChange === null || onChange === void 0 ? void 0 : onChange(_value, option);\n    };\n  }, [onChange]);\n  var isEmpty = useCallback(function () {\n    return paging.page === 1 && !options.length;\n  }, [paging, options]);\n  useMount(function () {\n    if (!isSuspenseAsync) {\n      fetchData();\n    }\n  });\n  useUpdateEffect(function () {\n    var _a, _b;\n    if (!isSuspenseAsync) {\n      fetchData();\n    } else {\n      (_b = (_a = suspenseRef === null || suspenseRef === void 0 ? void 0 : suspenseRef.current) === null || _a === void 0 ? void 0 : _a.reset) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n  }, [isSuspenseAsync, suspenseRef.current]);\n  useUpdateEffect(function () {\n    setCurrentValue(value);\n  }, [value]);\n  var render = useCallback(function (children) {\n    if (isSuspenseAsync) return /*#__PURE__*/React.createElement(Suspense.ASync\n    // @ts-ignore\n    , __assign({\n      // @ts-ignore\n      ref: suspenseRef\n    }, suspenseProps !== null && suspenseProps !== void 0 ? suspenseProps : {}, {\n      fetchData: fetchData,\n      isEmpty: isEmpty\n    }), children);\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }, [isSuspenseAsync, suspenseProps, paging, options]);\n  return render([isMultiple && /*#__PURE__*/React.createElement(CheckboxPagingList, __assign({}, renderProps({\n    value: currentValue,\n    onChange: onListPagingChange,\n    options: options\n  }))), !isMultiple && /*#__PURE__*/React.createElement(RadioPagingList, __assign({}, renderProps({\n    value: currentValue,\n    onChange: onListPagingChange,\n    options: options\n  })))]);\n});\nexport default ListPaging;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useMount","useUpdateEffect","React","memo","useCallback","useMemo","useRef","useState","Suspense","CheckboxPagingList","RadioPagingList","usePagingRenderProps","ListPaging","_a","mode","value","onChange","pagingProps","listPagingProps","_b","isSuspenseAsync","suspenseProps","_c","currentValue","setCurrentValue","suspenseRef","_d","current","isMultiple","options","fetchData","renderProps","paging","onListPagingChange","_value","option","isEmpty","page","reset","children","createElement","ASync","ref","Fragment"],"mappings":"AAAA,IAAIA,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACSO,QAAwB,KAAR,gBAChBC,eAA+B,KAAR,gBACzBC,OAASC,KAAMC,YAAaC,QAASC,OAAQC,QAAuB,KAAP,eAC7DC,aAAc,wCACdC,uBAAwB,8BACxBC,oBAAqB,2BACrBC,yBAA0B,yBAYjC,IAAIC,WAA0BT,KAAK,SAAUU,GAC3C,IAAIC,EAAOD,EAAGC,KACZC,EAAQF,EAAGE,MACXC,EAAWH,EAAGG,SACdC,EAAcJ,EAAGI,YACjBC,EAAkBL,EAAGK,gBACrBC,EAAKN,EAAGO,gBACRA,EAAyB,KAAA,IAAPD,GAAuBA,EACzCE,EAAgBR,EAAGQ,cACjBC,EAAKf,SAASQ,CAAK,EACrBQ,EAAeD,EAAG,GAClBE,EAAkBF,EAAG,GACnBG,EAAcnB,OAAO,IAAI,EACzBoB,EAAKf,qBAAqB1B,SAASA,SAAS,CAC5CiC,gBAAiBA,EACjBJ,KAAMA,CACR,EAAGG,CAAW,EAAG,CACfQ,YAAaA,EAAYE,OAC3B,CAAC,CAAC,EACFC,EAAaF,EAAGE,WAChBC,EAAUH,EAAGG,QACbC,EAAYJ,EAAGI,UACfC,EAAcL,EAAGK,YACjBC,EAASN,EAAGM,OACVC,EAAqB5B,QAAQ,WAC/B,OAAO,SAAU6B,EAAQC,GACvBX,EAAgBU,CAAM,EACtBlB,MAAAA,GAAoDA,EAASkB,EAAQC,CAAM,CAC7E,CACF,EAAG,CAACnB,EAAS,EACToB,EAAUhC,YAAY,WACxB,OAAuB,IAAhB4B,EAAOK,MAAc,CAACR,EAAQnC,MACvC,EAAG,CAACsC,EAAQH,EAAQ,EA6BpB,OA5BA7B,SAAS,WACFoB,GACHU,EAAU,CAEd,CAAC,EACD7B,gBAAgB,WACd,IAAIY,EAAIM,EACHC,EAGH,OAACD,EAAK,OAACN,EAAKY,MAAAA,EAAiD,KAAA,EAASA,EAAYE,SAAqC,KAAA,EAASd,EAAGyB,QAA4CnB,EAAGrB,KAAKe,CAAE,EAFzLiB,EAAU,CAId,EAAG,CAACV,EAAiBK,EAAYE,QAAQ,EACzC1B,gBAAgB,WACduB,EAAgBT,CAAK,CACvB,EAAG,CAACA,EAAM,EACGX,YAAY,SAAUmC,GACjC,OAAInB,EAAqClB,MAAMsC,cAAchC,SAASiC,MAEpExD,SAAS,CAETyD,IAAKjB,CACP,EAAGJ,MAAAA,EAAqDA,EAAgB,GAAI,CAC1ES,UAAWA,EACXM,QAASA,CACX,CAAC,EAAGG,CAAQ,EACQrC,MAAMsC,cAActC,MAAMyC,SAAU,KAAMJ,CAAQ,CACxE,EAAG,CAACnB,EAAiBC,EAAeW,EAAQH,EAAQ,EACtC,CAACD,GAA2B1B,MAAMsC,cAAc/B,mBAAoBxB,SAAS,GAAI8C,EAAY,CACzGhB,MAAOQ,EACPP,SAAUiB,EACVJ,QAASA,CACX,CAAC,CAAC,CAAC,EAAG,CAACD,GAA2B1B,MAAMsC,cAAc9B,gBAAiBzB,SAAS,GAAI8C,EAAY,CAC9FhB,MAAOQ,EACPP,SAAUiB,EACVJ,QAASA,CACX,CAAC,CAAC,CAAC,EAAE,CACP,CAAC,iBACcjB"}