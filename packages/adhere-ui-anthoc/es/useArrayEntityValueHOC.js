var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(n){for(var r,l=1,i=arguments.length;l<i;l++)for(var t in r=arguments[l])Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t]);return n}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,r,l){if(l||2===arguments.length)for(var i,t=0,e=r.length;t<e;t++)!i&&t in r||((i=i||Array.prototype.slice.call(r,0,t))[t]=r[t]);return n.concat(i||Array.prototype.slice.call(r))};import omit from"omit.js";import React from"react";import Util from"@baifendian/adhere-util";var optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";export default function(t){var n,r,l=t.value,e=t.onChange,o=t.children,i=t.options;function a(n){var r;return null!=n&&""!==(null==(r=null==n?void 0:n.trim)?void 0:r.call(n))&&Util.isPrimitive(n)}function u(n){var r;return null!=n&&""!==(null==(r=null==n?void 0:n.trim)?void 0:r.call(n))&&Util.isArray(n)&&n.length&&n.some(function(n){return Util.isPrimitive(n)})}function s(n){return n.map(function(n){return a(n)?p(n):n})}function p(r){var n;return null!=(n=(null!=i?i:[]).find(function(n){return Object.is(function(n){var r;if(null!=(r=t.valueProp)?r:DEFAULT_VALUE_PROP in n)return n[null!=(r=t.valueProp)?r:DEFAULT_VALUE_PROP];for(var l=n[DEFAULT_VALUE_PROP],i=0;i<optionKeys.length;i++)if(optionKeys[i]in n){l=n[optionKeys[i]];break}return l}(n),r)}))?n:r}function c(n){for(var r=n[DEFAULT_VALUE_PROP],l=0;l<optionKeys.length;l++)if(optionKeys[l]in n){r=n[optionKeys[l]];break}return r}return a(l)?null!=e&&e(p(l)):u(l)&&null!=e&&e(s(l)),React.cloneElement(o,__assign(__assign(__assign({},omit(t,["children"])),o.props),{value:null!=(n=l)&&""!==(null==(r=null==n?void 0:n.trim)?void 0:r.call(n))&&!Util.isArray(n)&&Util.isRef(n)?c(l):null!=(r=l)&&""!==(null==(n=null==r?void 0:r.trim)?void 0:n.call(r))&&Util.isArray(r)&&r.length&&r.every(function(n){return Util.isRef(n)})?l.map(c):l,realValue:l,onChange:function(n){for(var r,l,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];a(n)?null!=e&&e.apply(void 0,__spreadArray([p(n)],i,!1)):u(n)?null!=e&&e.apply(void 0,__spreadArray([s(n)],i,!1)):null!=e&&e.apply(void 0,__spreadArray([n],i,!1)),null!=(l=null==(r=o.props)?void 0:r.onChange)&&l.call.apply(l,__spreadArray([r,n],i,!1))}}))}
//# sourceMappingURL=useArrayEntityValueHOC.js.map
