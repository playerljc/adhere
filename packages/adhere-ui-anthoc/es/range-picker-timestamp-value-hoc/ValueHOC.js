var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,n){var r={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var t=0,s=Object.getOwnPropertySymbols(e);t<s.length;t++)n.indexOf(s[t])<0&&Object.prototype.propertyIsEnumerable.call(e,s[t])&&(r[s[t]]=e[s[t]]);return r};import dayjs from"dayjs";import quarterOfYear from"dayjs/plugin/quarterOfYear";import weekOfYear from"dayjs/plugin/weekOfYear";import React,{useMemo}from"react";import RangePicker from"../range-picker";dayjs.extend(weekOfYear),dayjs.extend(quarterOfYear);var DEFAULT_TYPE=["milliseconds","milliseconds"],ValueHOC=function(e){var n=e.defaultValue,r=e.value,t=e.onChange,s=e.type,a=void 0===s?DEFAULT_TYPE:s,s=__rest(e,["defaultValue","value","onChange","type"]);function o(e){if(null==e)return e;if(!Array.isArray(e))return null;if(!e.length)return[];for(var n=Array.isArray(null!=a?a:DEFAULT_TYPE)?(null!=a?a:DEFAULT_TYPE).slice(0,2):DEFAULT_TYPE,r=0;r<2;r++)["seconds","milliseconds"].includes(n[r])||(n[r]="milliseconds");return n.join()===["seconds","seconds"].join()||n.join()===["seconds","seconds"].join()?[dayjs.unix(e[0]),dayjs.unix(e[1])]:n.join()===["seconds","milliseconds"].join()?[dayjs.unix(e[0]),dayjs(e[1])]:n.join()===["milliseconds","seconds"].join()?[dayjs(e[0]),dayjs.unix(e[1])]:[dayjs(e[0]),dayjs(e[1])]}function i(e){return Math.round(e/1e3)}function l(e){return{year:e.year(),quarter:e.quarter(),month:e.month(),week:e.week(),day:e.day(),date:e.date(),hour:e.hour(),minute:e.minute(),second:e.second()}}var e=useMemo(function(){return o(r)},[r]),u=useMemo(function(){return o(n)},[n]);return React.createElement(RangePicker,__assign({},s,{defaultValue:u,value:e,onChange:function(e,n){var r;null!=t&&t(e&&e.length?(r=[e[0].valueOf(),e[1].valueOf()],!a||!Array.isArray(a)||a.length<2?r:"milliseconds"===a[0]&&"seconds"===a[1]?[r[0],i(r[1])]:"seconds"===a[0]&&"milliseconds"===a[1]?[i(r[0]),r[1]]:"seconds"===a[0]&&"seconds"===a[1]?[i(r[0]),i(r[1])]:r):e,n,e,e&&e.length?[l(e[0]),l(e[1])]:null)}}))};export default ValueHOC;
//# sourceMappingURL=ValueHOC.js.map
