var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,n){var t={};for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)n.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(t[l[r]]=e[l[r]]);return t},__spreadArray=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,l=0,o=n.length;l<o;l++)!r&&l in n||((r=r||Array.prototype.slice.call(n,0,l))[l]=n[l]);return e.concat(r||Array.prototype.slice.call(n))};import{useUpdateEffect}from"ahooks";import React,{memo,useCallback,useMemo,useRef,useState}from"react";import Empty from"../empty";import Select from"./Select";var DropdownRenderSelect=function(e){function r(e){var n;null!=(n=a.onChange)&&n.call(a,e),u||s(!1)}var t=e.children,n=e.options,l=e.defaultInputValue,o=e.emptyContent,a=__rest(e,["children","options","defaultInputValue","emptyContent"]),u="mode"in a&&"multiple"===a.mode,e=useState(null!=l?l:""),i=e[0],c=e[1],e=useState(!1),p=e[0],s=e[1],f=useRef(),d=useRef(),m=useMemo(function(){var e;return i?null==(e=null==n?void 0:n.filter)?void 0:e.call(n,function(e){var n;return-1!==(null==(n=(e=e.label).indexOf)?void 0:n.call(e,i))}):n},[i,n]),e=useCallback(function(e){var n;return f.current=e,d.current=null!=m&&m.length?null!=(n=null==t?void 0:t({originNode:e,value:a.value,onChange:function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];r(n[0]),null!=(e=a.onChange)&&e.call.apply(e,__spreadArray([a],n,!1))},options:m}))?n:e:null!=o?o:React.createElement(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE}),d.current},[t,m,a.value,a.onChange]);return useUpdateEffect(function(){c(null!=l?l:"")},[l]),React.createElement(Select,__assign({options:m,filterOption:function(){return d.current===f.current},dropdownRender:e,open:p,onDropdownVisibleChange:s,onSearch:function(e){var n;c(null==(n=null==e?void 0:e.trim)?void 0:n.call(e)),null!=(n=null==a?void 0:a.onSearch)&&n.call(a,null==(n=null==e?void 0:e.trim)?void 0:n.call(e))},onClear:function(){var e;c(""),null!=(e=null==a?void 0:a.onClear)&&e.call(a)}},a,{onChange:r}))};export default memo(DropdownRenderSelect);
//# sourceMappingURL=DropdownRenderSelect.js.map
