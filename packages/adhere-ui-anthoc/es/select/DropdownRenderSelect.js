var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};import{useUpdateEffect}from"ahooks";import React,{memo,useCallback,useMemo,useRef,useState}from"react";import Empty from"../empty";import Select from"./Select";var DropdownRenderSelect=function(e){var n=e.children,t=e.options,r=e.defaultInputValue,o=e.emptyContent,l=__rest(e,["children","options","defaultInputValue","emptyContent"]),e=useState(null!=r?r:""),u=e[0],a=e[1],i=useRef(),c=useRef(),s=useMemo(function(){var e;return u?null==(e=null==t?void 0:t.filter)?void 0:e.call(t,function(e){var t;return-1!==(null==(t=(e=e.label).indexOf)?void 0:t.call(e,u))}):t},[u,t]),e=useCallback(function(e){var t;return i.current=e,c.current=null!=s&&s.length?null!=(t=null==n?void 0:n({originNode:e,value:l.value,onChange:l.onChange,options:s}))?t:e:null!=o?o:React.createElement(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE}),c.current},[n,s,l.value,l.onChange]);return useUpdateEffect(function(){a(null!=r?r:"")},[r]),React.createElement(Select,__assign({filterOption:function(){return c.current===i.current},onSearch:function(e){var t;a(e),null!=(t=null==l?void 0:l.onSearch)&&t.call(l,e)},onClear:function(){var e;a(""),null!=(e=null==l?void 0:l.onClear)&&e.call(l)},dropdownRender:e,options:s},l))};export default memo(DropdownRenderSelect);
//# sourceMappingURL=DropdownRenderSelect.js.map
