var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(r){for(var n,l=1,i=arguments.length;l<i;l++)for(var t in n=arguments[l])Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t]);return r}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(r,n,l){if(l||2===arguments.length)for(var i,t=0,e=n.length;t<e;t++)!i&&t in n||((i=i||Array.prototype.slice.call(n,0,t))[t]=n[t]);return r.concat(i||Array.prototype.slice.call(n))};import omit from"omit.js";import React from"react";import Util from"@baifendian/adhere-util";var optionKeys=["value","key","id"],DEFAULT_VALUE_PROP="value";export default function(a){var r,n,l=a.value,e=a.onChange,o=a.children,i=a.treeData;function u(r){var n;if(null!=(n=a.valueProp)?n:DEFAULT_VALUE_PROP in r)return r[null!=(n=a.valueProp)?n:DEFAULT_VALUE_PROP];for(var l=r[DEFAULT_VALUE_PROP],i=0;i<optionKeys.length;i++)if(optionKeys[i]in r){l=r[optionKeys[i]];break}return l}function s(r){var n;return null!=r&&""!==(null==(n=null==r?void 0:r.trim)?void 0:n.call(r))&&Util.isPrimitive(r)}function p(r){var n;return null!=r&&""!==(null==(n=null==r?void 0:r.trim)?void 0:n.call(r))&&Util.isArray(r)&&r.length&&r.flat().some(function(r){return Util.isPrimitive(r)})}function c(r){return r.map(function(r){return s(r)?f(r):Util.isArray(r)?c(r):r})}function f(e){var r;return"treeDataSimpleMode"in o.props&&o.props.treeDataSimpleMode?null!=(r=(null!=i?i:[]).find(function(r){return Object.is(u(r),e)}))?r:e:null!=(r=function r(n){for(var l,i=0;i<n.length;i++){var t=u(n[i]);if(Object.is(t,e)){l=n[i];break}if(l=r(null!=(t=null==(t=n[i])?void 0:t[null!=(t=a.childrenProp)?t:"children"])?t:[]))break}return l}(null!=i?i:[]))?r:e}function t(r){for(var n=r[DEFAULT_VALUE_PROP],l=0;l<optionKeys.length;l++)if(optionKeys[l]in r){n=r[optionKeys[l]];break}return n}return s(l)?null!=e&&e(f(l)):p(l)&&null!=e&&e(c(l)),React.cloneElement(o,__assign(__assign(__assign({},omit(a,["children"])),o.props),{value:null!=(r=l)&&""!==(null==(n=null==r?void 0:r.trim)?void 0:n.call(r))&&!Util.isArray(r)&&Util.isRef(r)?t(l):null!=(n=l)&&""!==(null==(r=null==n?void 0:n.trim)?void 0:r.call(n))&&Util.isArray(n)&&n.length&&n.flat().every(function(r){return Util.isRef(r)})?function n(r){return r.map(function(r){return(Util.isArray(r)?n:t)(r)})}(l):l,realValue:l,onChange:function(r){for(var n,l,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];s(r)?null!=e&&e.apply(void 0,__spreadArray([f(r)],i,!1)):p(r)?null!=e&&e.apply(void 0,__spreadArray([c(r)],i,!1)):null!=e&&e.apply(void 0,__spreadArray([r],i,!1)),null!=(l=null==(n=o.props)?void 0:n.onChange)&&l.call.apply(l,__spreadArray([n,r],i,!1))}}))}
//# sourceMappingURL=useTreeEntityValueHOC.js.map
