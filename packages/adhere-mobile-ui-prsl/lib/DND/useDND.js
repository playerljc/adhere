"use strict";var __spreadArray=function(e,r,t){if(t||2===arguments.length)for(var a,o=0,n=r.length;o<n;o++)!a&&o in r||((a=a||Array.prototype.slice.call(r,0,o))[o]=r[o]);return e.concat(a||Array.prototype.slice.call(r))},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),array_move_1=require("array-move"),react_1=require("react");function UseDND(e){var r=e.mode,t=e.dataSource,a=e.reset,o=e.rowKey,e=e.total,n=(0,react_1.useState)(__spreadArray([],null!=t?t:[],!0)),u=n[0],c=n[1],s=(0,ahooks_1.useLatest)(u),l=(0,ahooks_1.useLatest)(t),n=(0,react_1.useMemo)(function(){return"dnd"===r},[r]);return(0,ahooks_1.useUpdateEffect)(function(){c(__spreadArray([],null!=t?t:[],!0))},[t]),{optionDataSource:{data:u,total:e},isUseDNDMode:n,finish:function(){return s.current.reduce(function(e,r,t){t=l.current[t][o],r=r[o];return t!==r&&e.push({preValue:t,currentValue:r}),e},[])},cancel:function(){var e;c(__spreadArray([],null!=(e=l.current)?e:[],!0)),a()},move:function(e){var r=e.oldIndex,t=e.newIndex;c(function(e){return(0,array_move_1.arrayMoveImmutable)(e,r,t)})}}}exports.default=UseDND;
//# sourceMappingURL=useDND.js.map
