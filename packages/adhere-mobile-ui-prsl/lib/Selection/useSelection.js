"use strict";var __spreadArray=function(e,r,t){if(t||2===arguments.length)for(var n,o=0,u=r.length;o<u;o++)!n&&o in r||((n=n||Array.prototype.slice.call(r,0,o))[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),lodash_difference_1=__importDefault(require("lodash.difference")),react_1=require("react"),DEFAULT_SELECTION_MULTIPLE=!0;function UseSelection(e){var r=e.selectedRowKeys,t=e.selectionMultiple,n=e.mode,o=e.dataSource,u=e.rowKey,e=(0,react_1.useState)(null!=r?r:[]),a=e[0],l=e[1],e=(0,react_1.useState)(null!=r?r:[]),c=e[0],s=e[1],i=(0,ahooks_1.useLatest)(a),_=(0,ahooks_1.useLatest)(c),e=(0,react_1.useMemo)(function(){return"selection"===n},[n]),f=(0,react_1.useMemo)(function(){return null!=t?t:DEFAULT_SELECTION_MULTIPLE},[t]);return(0,ahooks_1.useUpdateEffect)(function(){l(null!=r?r:[]),s(null!=r?r:[])},[r]),{optionSelectedRowKeys:c,targetSelectedRowKeys:a,isUseSelectionMode:e,isSelectionMultiple:f,selectionChange:function(r,t){s(function(e){return r?f?__spreadArray(__spreadArray([],e,!0),[t],!1):[t]:f?e.filter(function(e){return e!==t}):[]})},selectionAllChange:function(r){s(function(e){return r?__spreadArray([],o.map(function(e){return e[u]}),!0):[]})},finish:function(){var e=__spreadArray([],i.current,!0),r=__spreadArray([],_.current,!0),t=(l(r),(0,lodash_difference_1.default)(e,r)),e=(0,lodash_difference_1.default)(r,e);return{selectedRowKeys:r,selectedRows:r.map(function(r){return o.find(function(e){return(null==e?void 0:e[u])===r})}),changeRowKeys:__spreadArray(__spreadArray([],null!=t?t:[],!0),null!=e?e:[],!0),info:{type:(null!=e?e:[]).length?"select":"unselect"}}},cancel:function(){s(__spreadArray([],i.current,!0))}}}exports.default=UseSelection;
//# sourceMappingURL=useSelection.js.map
