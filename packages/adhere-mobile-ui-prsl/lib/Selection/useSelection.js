"use strict";var __spreadArray=function(e,r,t){if(t||2===arguments.length)for(var n,l=0,o=r.length;l<o;l++)!n&&l in r||((n=n||Array.prototype.slice.call(r,0,l))[l]=r[l]);return e.concat(n||Array.prototype.slice.call(r))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),lodash_difference_1=__importDefault(require("lodash.difference")),react_1=require("react"),DEFAULT_SELECTION_MULTIPLE=!0;function UseSelection(e){var r=e.selectedRowKeys,t=e.selectionMultiple,n=e.mode,l=e.dataSource,o=e.rowKey,e=(0,react_1.useState)(null!=r?r:[]),a=e[0],u=e[1],e=(0,react_1.useState)(null!=r?r:[]),c=e[0],i=e[1],e=(0,react_1.useMemo)(function(){return"selection"===n},[n]),s=(0,react_1.useMemo)(function(){return null!=t?t:DEFAULT_SELECTION_MULTIPLE},[t]);return(0,ahooks_1.useUpdateEffect)(function(){u(null!=r?r:[]),i(null!=r?r:[])},[r]),{optionSelectedRowKeys:c,targetSelectedRowKeys:a,isUseSelectionMode:e,isSelectionMultiple:s,selectionChange:function(r,t){i(function(e){return r?s?__spreadArray(__spreadArray([],e,!0),[t],!1):[t]:s?e.filter(function(e){return e!==t}):[]})},selectionAllChange:function(r){i(function(e){return r?__spreadArray([],l.map(function(e){return e[o]}),!0):[]})},finish:function(){var e=__spreadArray([],a,!0),r=__spreadArray([],c,!0),t=(u(r),(0,lodash_difference_1.default)(e,r)),e=(0,lodash_difference_1.default)(r,e);return{selectedRowKeys:r,selectedRows:r.map(function(r){return l.find(function(e){return(null==e?void 0:e[o])===r})}),changeRowKeys:__spreadArray(__spreadArray([],null!=t?t:[],!0),null!=e?e:[],!0),info:{type:(null!=e?e:[]).length?"select":"unselect"}}},cancel:function(){i(__spreadArray([],a,!0))}}}exports.default=UseSelection;
//# sourceMappingURL=useSelection.js.map
