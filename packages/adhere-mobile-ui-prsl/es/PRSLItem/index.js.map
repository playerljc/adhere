{"version":3,"file":"index.js","sources":["PRSLItem/index.js"],"sourcesContent":["import _Radio from \"antd-mobile/es/components/radio\";\nimport _Checkbox from \"antd-mobile/es/components/checkbox\";\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useMemo } from 'react';\nimport { SortableHandle } from 'react-sortable-hoc';\nimport Context from '../Context';\nimport { SortableItem } from '../DND';\nvar selectorPrefix = 'adhere-mobile-ui-prsl-item';\nvar DragHandle = SortableHandle(function () {\n  return /*#__PURE__*/React.createElement(\"span\", null, \"::\");\n});\nvar PRSLItem = function PRSLItem(_a) {\n  var className = _a.className,\n    style = _a.style,\n    children = _a.children,\n    record = _a.record;\n  var _b = useContext(Context),\n    isUseSelectionMode = _b.isUseSelectionMode,\n    isUseDNDMode = _b.isUseDNDMode,\n    getRowKey = _b.getRowKey,\n    getOptionSelectedRowKeys = _b.getOptionSelectedRowKeys,\n    selectionChange = _b.selectionChange,\n    getSelectionMultiple = _b.getSelectionMultiple,\n    getIndexByIdFormOptionDataSource = _b.getIndexByIdFormOptionDataSource;\n  var rowKey = getRowKey();\n  var id = record === null || record === void 0 ? void 0 : record[rowKey];\n  var index = getIndexByIdFormOptionDataSource(id);\n  var selectionMultiple = getSelectionMultiple();\n  var optionSelectedRowKeys = getOptionSelectedRowKeys();\n  var wrapper = useCallback(function (_children) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n      style: style !== null && style !== void 0 ? style : {}\n    }, _children);\n  }, [className, style]);\n  var childrenWrapper = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-main\")\n    }, children);\n  }, [children]);\n  function renderChildren() {\n    // 选择模式\n    if (isUseSelectionMode()) {\n      return wrapper( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-extra\")\n      }, selectionMultiple && /*#__PURE__*/React.createElement(_Checkbox, {\n        checked: optionSelectedRowKeys.includes(id),\n        onChange: function onChange(_checked) {\n          selectionChange(_checked, id);\n        }\n      }), !selectionMultiple && /*#__PURE__*/React.createElement(_Radio, {\n        checked: optionSelectedRowKeys.includes(id),\n        onChange: function onChange(_checked) {\n          selectionChange(_checked, id);\n        }\n      })), childrenWrapper));\n    }\n    // DND模式\n    else if (isUseDNDMode()) {\n      return /*#__PURE__*/React.createElement(SortableItem, {\n        index: index\n      }, wrapper( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-extra\")\n      }, /*#__PURE__*/React.createElement(DragHandle, null)), childrenWrapper)));\n    }\n    // 普通的模式\n    else {\n      return wrapper(childrenWrapper);\n    }\n  }\n  return renderChildren();\n};\nexport default PRSLItem;"],"names":["_Radio","_Checkbox","classNames","React","useCallback","useContext","useMemo","SortableHandle","Context","SortableItem","selectorPrefix","DragHandle","createElement","PRSLItem","_a","className","style","children","record","_b","isUseSelectionMode","isUseDNDMode","getRowKey","getOptionSelectedRowKeys","selectionChange","getSelectionMultiple","getIndexByIdFormOptionDataSource","rowKey","id","index","selectionMultiple","optionSelectedRowKeys","wrapper","_children","childrenWrapper","concat","Fragment","checked","includes","onChange","_checked"],"mappings":"OAAOA,WAAY,yCACZC,cAAe,4CACfC,eAAgB,oBAChBC,OAASC,YAAaC,WAAYC,OAAsB,KAAP,eAC/CC,cAA0C,KAApB,4BACxBC,YAAa,oBACXC,YAA4B,KAAR,SAC7B,IAAIC,eAAiB,6BACjBC,WAAaJ,eAAe,WAC9B,OAAoBJ,MAAMS,cAAc,OAAQ,KAAM,IAAI,CAC5D,CAAC,EACGC,SAAW,SAAkBC,GAC/B,IAAIC,EAAYD,EAAGC,UACjBC,EAAQF,EAAGE,MACXC,EAAWH,EAAGG,SACdC,EAASJ,EAAGI,OACVC,EAAKd,WAAWG,OAAO,EACzBY,EAAqBD,EAAGC,mBACxBC,EAAeF,EAAGE,aAClBC,EAAYH,EAAGG,UACfC,EAA2BJ,EAAGI,yBAC9BC,EAAkBL,EAAGK,gBACrBC,EAAuBN,EAAGM,qBAC1BC,EAAmCP,EAAGO,iCACpCC,EAASL,EAAU,EACnBM,EAAKV,MAAAA,EAAuC,KAAA,EAASA,EAAOS,GAC5DE,EAAQH,EAAiCE,CAAE,EAC3CE,EAAoBL,EAAqB,EACzCM,EAAwBR,EAAyB,EACjDS,EAAU5B,YAAY,SAAU6B,GAClC,OAAoB9B,MAAMS,cAAc,MAAO,CAC7CG,UAAWb,WAAWQ,eAAgBK,MAAAA,EAA6CA,EAAY,EAAE,EACjGC,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGiB,CAAS,CACd,EAAG,CAAClB,EAAWC,EAAM,EACjBkB,EAAkB5B,QAAQ,WAC5B,OAAoBH,MAAMS,cAAc,MAAO,CAC7CG,UAAW,GAAGoB,OAAOzB,eAAgB,OAAO,CAC9C,EAAGO,CAAQ,CACb,EAAG,CAACA,EAAS,EA+Bb,OA5BMG,EAAmB,EACdY,EAAsB7B,MAAMS,cAAcT,MAAMiC,SAAU,KAAmBjC,MAAMS,cAAc,MAAO,CAC7GG,UAAW,GAAGoB,OAAOzB,eAAgB,QAAQ,CAC/C,EAAGoB,GAAkC3B,MAAMS,cAAcX,UAAW,CAClEoC,QAASN,EAAsBO,SAASV,CAAE,EAC1CW,SAAU,SAAkBC,GAC1BhB,EAAgBgB,EAAUZ,CAAE,CAC9B,CACF,CAAC,EAAG,CAACE,GAAkC3B,MAAMS,cAAcZ,OAAQ,CACjEqC,QAASN,EAAsBO,SAASV,CAAE,EAC1CW,SAAU,SAAkBC,GAC1BhB,EAAgBgB,EAAUZ,CAAE,CAC9B,CACF,CAAC,CAAC,EAAGM,CAAe,CAAC,EAGdb,EAAa,EACAlB,MAAMS,cAAcH,aAAc,CACpDoB,MAAOA,CACT,EAAGG,EAAsB7B,MAAMS,cAAcT,MAAMiC,SAAU,KAAmBjC,MAAMS,cAAc,MAAO,CACzGG,UAAW,GAAGoB,OAAOzB,eAAgB,QAAQ,CAC/C,EAAgBP,MAAMS,cAAcD,WAAY,IAAI,CAAC,EAAGuB,CAAe,CAAC,CAAC,EAIlEF,EAAQE,CAAe,CAIpC,iBACerB"}