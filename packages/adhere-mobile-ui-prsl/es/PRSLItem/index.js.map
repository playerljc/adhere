{"version":3,"file":"index.js","sources":["PRSLItem/index.js"],"sourcesContent":["import _Radio from \"antd-mobile/es/components/radio\";\nimport _Checkbox from \"antd-mobile/es/components/checkbox\";\nimport _MoreOutline from \"antd-mobile-icons/es/MoreOutline\";\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useMemo } from 'react';\nimport { SortableHandle } from 'react-sortable-hoc';\nimport Context from '../Context';\nimport { SortableItem } from '../DND';\nvar selectorPrefix = 'adhere-mobile-ui-prsl-item';\nvar DragHandle = SortableHandle(function (_a) {\n  var children = _a.children;\n  return children !== null && children !== void 0 ? children : /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(_MoreOutline, null));\n});\n/**\n * PRSLItem\n * @param className\n * @param style\n * @param children\n * @param record\n * @constructor\n */\nvar PRSLItem = function PRSLItem(_a) {\n  var className = _a.className,\n    style = _a.style,\n    children = _a.children,\n    record = _a.record;\n  var _b = useContext(Context),\n    isUseSelectionMode = _b.isUseSelectionMode,\n    isUseDNDMode = _b.isUseDNDMode,\n    getRowKey = _b.getRowKey,\n    getOptionSelectedRowKeys = _b.getOptionSelectedRowKeys,\n    selectionChange = _b.selectionChange,\n    getSelectionMultiple = _b.getSelectionMultiple,\n    getIndexByIdFormOptionDataSource = _b.getIndexByIdFormOptionDataSource,\n    getDndDragHandle = _b.getDndDragHandle;\n  var rowKey = getRowKey();\n  var id = record === null || record === void 0 ? void 0 : record[rowKey];\n  var index = getIndexByIdFormOptionDataSource(id);\n  var selectionMultiple = getSelectionMultiple();\n  var optionSelectedRowKeys = getOptionSelectedRowKeys();\n  var wrapper = useCallback(function (_children) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n      style: style !== null && style !== void 0 ? style : {}\n    }, _children);\n  }, [className, style]);\n  var childrenWrapper = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-main\")\n    }, children);\n  }, [children]);\n  function renderChildren() {\n    // 选择模式\n    if (isUseSelectionMode()) {\n      return wrapper( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-extra\")\n      }, selectionMultiple && /*#__PURE__*/React.createElement(_Checkbox, {\n        checked: optionSelectedRowKeys.includes(id),\n        onChange: function onChange(_checked) {\n          selectionChange(_checked, id);\n        }\n      }), !selectionMultiple && /*#__PURE__*/React.createElement(_Radio, {\n        checked: optionSelectedRowKeys.includes(id),\n        onChange: function onChange(_checked) {\n          selectionChange(_checked, id);\n        }\n      })), childrenWrapper));\n    }\n    // DND模式\n    else if (isUseDNDMode()) {\n      return /*#__PURE__*/React.createElement(SortableItem, {\n        index: index\n      }, wrapper( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-extra\")\n      }, /*#__PURE__*/React.createElement(DragHandle, null, getDndDragHandle())), childrenWrapper)));\n    }\n    // 普通的模式\n    else {\n      return wrapper(childrenWrapper);\n    }\n  }\n  return renderChildren();\n};\nexport default PRSLItem;"],"names":["_Radio","_Checkbox","_MoreOutline","classNames","React","useCallback","useContext","useMemo","SortableHandle","Context","SortableItem","selectorPrefix","DragHandle","_a","children","createElement","PRSLItem","className","style","record","_b","isUseSelectionMode","isUseDNDMode","getRowKey","getOptionSelectedRowKeys","selectionChange","getSelectionMultiple","getIndexByIdFormOptionDataSource","getDndDragHandle","rowKey","id","index","selectionMultiple","optionSelectedRowKeys","wrapper","_children","childrenWrapper","concat","Fragment","checked","includes","onChange","_checked"],"mappings":"OAAOA,WAAY,yCACZC,cAAe,4CACfC,iBAAkB,0CAClBC,eAAgB,oBAChBC,OAASC,YAAaC,WAAYC,OAAsB,KAAP,eAC/CC,cAA0C,KAApB,4BACxBC,YAAa,oBACXC,YAA4B,KAAR,SAC7B,IAAIC,eAAiB,6BACjBC,WAAaJ,eAAe,SAAUK,GACpCC,EAAWD,EAAGC,SAClB,OAAOA,MAAAA,EAA2CA,EAAwBV,MAAMW,cAAc,OAAQ,KAAmBX,MAAMW,cAAcb,aAAc,IAAI,CAAC,CAClK,CAAC,EASGc,SAAW,SAAkBH,GAC/B,IAAII,EAAYJ,EAAGI,UACjBC,EAAQL,EAAGK,MACXJ,EAAWD,EAAGC,SACdK,EAASN,EAAGM,OACVC,EAAKd,WAAWG,OAAO,EACzBY,EAAqBD,EAAGC,mBACxBC,EAAeF,EAAGE,aAClBC,EAAYH,EAAGG,UACfC,EAA2BJ,EAAGI,yBAC9BC,EAAkBL,EAAGK,gBACrBC,EAAuBN,EAAGM,qBAC1BC,EAAmCP,EAAGO,iCACtCC,EAAmBR,EAAGQ,iBACpBC,EAASN,EAAU,EACnBO,EAAKX,MAAAA,EAAuC,KAAA,EAASA,EAAOU,GAC5DE,EAAQJ,EAAiCG,CAAE,EAC3CE,EAAoBN,EAAqB,EACzCO,EAAwBT,EAAyB,EACjDU,EAAU7B,YAAY,SAAU8B,GAClC,OAAoB/B,MAAMW,cAAc,MAAO,CAC7CE,UAAWd,WAAWQ,eAAgBM,MAAAA,EAA6CA,EAAY,EAAE,EACjGC,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGiB,CAAS,CACd,EAAG,CAAClB,EAAWC,EAAM,EACjBkB,EAAkB7B,QAAQ,WAC5B,OAAoBH,MAAMW,cAAc,MAAO,CAC7CE,UAAW,GAAGoB,OAAO1B,eAAgB,OAAO,CAC9C,EAAGG,CAAQ,CACb,EAAG,CAACA,EAAS,EA+Bb,OA5BMO,EAAmB,EACda,EAAsB9B,MAAMW,cAAcX,MAAMkC,SAAU,KAAmBlC,MAAMW,cAAc,MAAO,CAC7GE,UAAW,GAAGoB,OAAO1B,eAAgB,QAAQ,CAC/C,EAAGqB,GAAkC5B,MAAMW,cAAcd,UAAW,CAClEsC,QAASN,EAAsBO,SAASV,CAAE,EAC1CW,SAAU,SAAkBC,GAC1BjB,EAAgBiB,EAAUZ,CAAE,CAC9B,CACF,CAAC,EAAG,CAACE,GAAkC5B,MAAMW,cAAcf,OAAQ,CACjEuC,QAASN,EAAsBO,SAASV,CAAE,EAC1CW,SAAU,SAAkBC,GAC1BjB,EAAgBiB,EAAUZ,CAAE,CAC9B,CACF,CAAC,CAAC,EAAGM,CAAe,CAAC,EAGdd,EAAa,EACAlB,MAAMW,cAAcL,aAAc,CACpDqB,MAAOA,CACT,EAAGG,EAAsB9B,MAAMW,cAAcX,MAAMkC,SAAU,KAAmBlC,MAAMW,cAAc,MAAO,CACzGE,UAAW,GAAGoB,OAAO1B,eAAgB,QAAQ,CAC/C,EAAgBP,MAAMW,cAAcH,WAAY,KAAMgB,EAAiB,CAAC,CAAC,EAAGQ,CAAe,CAAC,CAAC,EAItFF,EAAQE,CAAe,CAIpC,iBACepB"}