import _Dialog from"@baifendian/adhere-mobile-ui-anthoc/es/dialog";import _Modal from"@baifendian/adhere-mobile-ui-anthoc/es/modal";import _Popup from"@baifendian/adhere-mobile-ui-anthoc/es/popup";import _SortAscendingOutlined from"@ant-design/icons/es/icons/SortAscendingOutlined";import _SortDescendingOutlined from"@ant-design/icons/es/icons/SortDescendingOutlined";import _List from"antd-mobile/es/components/list";import _TransportQRcodeOutline from"antd-mobile-icons/es/TransportQRcodeOutline";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};import{useUpdateEffect}from"ahooks";import classNames from"classnames";import React,{useMemo,useState}from"react";import AdherePopup from"@baifendian/adhere-ui-popup";import Intl from"@baifendian/adhere-util-intl";import NormalItem from"../NormalItem";var selectorPrefix="adhere-mobile-ui-prsl-toolbar-sort-item",SortItem=function(e){var t=e.children,r=e.sortTriggerMode,o=void 0===r?"popup-bottom":r,n=e.sortTriggerProps,i=e.renderSort,a=e.sortConfig,r=e.defaultSortValues,s=void 0===r?[]:r,l=e.onSort,c=e.onSortReset,r=useState(s),m=r[0],p=r[1],u=React.createElement(NormalItem,{key:"sort-item",className:selectorPrefix,icon:React.createElement(_TransportQRcodeOutline,null),label:Intl.v("排序")}),d=useMemo(function(){var e;return null!=(e=null==t?void 0:t(u))?e:u},[t,u]),_=useMemo(function(){return"adhere-popup"===o?[{key:"reset",type:"primary",children:Intl.v("重置"),onClick:f}]:[{key:"reset",primary:!0,text:Intl.v("重置"),onClick:f}]},[o]),g=useMemo(function(){return i?null==i?void 0:i(null!=m?m:[]):React.createElement(_List,{className:"".concat(selectorPrefix,"-list")},null==a?void 0:a.map(function(o){var e;return React.createElement(_List.Item,{key:o.name,className:"".concat(selectorPrefix,"-list-item"),onClick:function(){var t=o,e=__spreadArray([],m,!0),r=e.findIndex(function(e){return e.name===t.name});-1===r?e.push({name:t.name,order:"asc"}):e[r].order?"asc"===e[r].order?e[r]=__assign(__assign({},e[r]),{order:""}):"desc"===e[r].order&&(e[r]=__assign(__assign({},e[r]),{order:"asc"})):e[r]=__assign(__assign({},e[r]),{order:"desc"}),p(e),null!=l&&l(null!=e?e:[])},extra:React.createElement("div",{className:"".concat(selectorPrefix,"-list-item-order")},React.createElement(_SortDescendingOutlined,{className:classNames("".concat(selectorPrefix,"-list-order-item"),((e={})["".concat(selectorPrefix,"-active")]=null==m?void 0:m.some(function(e){return e.name===o.name&&"asc"===e.order}),e))}),React.createElement(_SortAscendingOutlined,{className:classNames("".concat(selectorPrefix,"-list-order-item"),((e={})["".concat(selectorPrefix,"-active")]=null==m?void 0:m.some(function(e){return e.name===o.name&&"desc"===e.order}),e))}))},React.createElement("div",{className:"".concat(selectorPrefix,"-list-item-label")},o.label))}))},[i,a,m]),e=useMemo(function(){var e,t,r=__assign({},n);return["popup-bottom","popup-top","modal","dialog"].includes(null!=o?o:"")?(e=__assign(__assign({},r),{actions:_,popoverTriggerProps:__assign(__assign({},null==n?void 0:n.popoverTriggerProps),{renderTrigger:function(){return d}})}),["popup-bottom","popup-top"].includes(null!=o?o:"")?(t=new Map([["popup-bottom","bottom"],["popup-top","top"]]),t=__assign(__assign({},e),{position:t.get(null!=o?o:"")}),React.createElement(_Popup.Trigger,__assign({},t),g)):"modal"===o?React.createElement(_Modal.TriggerPrompt,__assign({},e),g):"dialog"===o?React.createElement(_Dialog.TriggerPrompt,__assign({},e),g):void 0):"adhere-popup"===o?React.createElement(AdherePopup.Trigger,__assign({},r,{renderTrigger:function(){return d},actions:_}),g):void 0},[o,n,d,g,_]);function f(){return p(s),c?null==c?void 0:c():Promise.resolve()}return useUpdateEffect(function(){p(s)},[s]),e};SortItem.displayName="SortItem";export default SortItem;
//# sourceMappingURL=index.js.map
