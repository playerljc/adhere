import _Dialog from"@baifendian/adhere-mobile-ui-anthoc/es/dialog";import _Modal from"@baifendian/adhere-mobile-ui-anthoc/es/modal";import _Popup from"@baifendian/adhere-mobile-ui-anthoc/es/popup";import _FilterOutline from"antd-mobile-icons/es/FilterOutline";import _Form from"antd-mobile/es/components/form";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};import{useMount,useUpdateEffect}from"ahooks";import isPrimaryEmpty from"lodash.isempty";import React,{useMemo}from"react";import AdherePopup from"@baifendian/adhere-ui-popup";import Intl from"@baifendian/adhere-util-intl";import NormalItem from"../NormalItem";var selectorPrefix="adhere-mobile-ui-prsl-toolbar-filter-item",FilterItem=function(e){var r=e.children,o=e.disabled,t=e.filterTriggerMode,i=void 0===t?"popup-bottom":t,t=e.filterTriggerProps,n=void 0===t?{}:t,l=e.renderFilter,a=e.filterFormProps,s=e.filterConfig,m=e.defaultFilterValues,p=e.onFilter,u=e.onFilterReset,d=_Form.useForm()[0],c=React.createElement(NormalItem,{key:"filter-item",className:selectorPrefix,icon:React.createElement(_FilterOutline,null),label:Intl.v("筛选")}),f=useMemo(function(){var e;return null!=(e=null==r?void 0:r(c))?e:c},[r,c]),g=useMemo(function(){return"adhere-popup"===i?[{key:"ok",type:"primary",children:Intl.v("确定"),onClick:v},{key:"reset",type:"primary",children:Intl.v("重置"),onClick:b}]:[{key:"ok",primary:!0,text:Intl.v("确定"),onClick:v},{key:"reset",primary:!0,text:Intl.v("重置"),onClick:b}]},[i]),_=useMemo(function(){return l?null==l?void 0:l(null!=m?m:{}):React.createElement(_Form,__assign({form:d,layout:"horizontal"},a),null==s?void 0:s.map(function(e){var r=e.key,t=e.name,o=e.label,i=e.formItemProps,e=e.render;return React.createElement(_Form.Item,__assign({key:r,name:t,label:o},null!=i?i:{}),null==e?void 0:e(d))}))},[l,m]),t=useMemo(function(){var e,r,t=__assign({},n);return["popup-bottom","popup-top","modal","dialog"].includes(null!=i?i:"")?(e=__assign(__assign({},t),{actions:g,popoverTriggerProps:__assign(__assign({},null==n?void 0:n.popoverTriggerProps),{renderTrigger:function(){return f}})}),["popup-bottom","popup-top"].includes(null!=i?i:"")?(r=new Map([["popup-bottom","bottom"],["popup-top","top"]]),r=__assign(__assign({},e),{position:r.get(null!=i?i:"")}),React.createElement(_Popup.Trigger,__assign({disabled:o},r),_)):"modal"===i?React.createElement(_Modal.TriggerPrompt,__assign({disabled:o},e),_):"dialog"===i?React.createElement(_Dialog.TriggerPrompt,__assign({disabled:o},e),_):void 0):"adhere-popup"===i?React.createElement(AdherePopup.Trigger,__assign({},t,{disabled:o,renderTrigger:function(){return f},actions:g}),_):void 0},[i,n,f,_,g,o]);function v(){var e;return p?(e=d?d.getFieldsValue():m,null==p?void 0:p(e)):Promise.resolve()}function b(){return null!=d&&d.resetFields(isPrimaryEmpty(m)?void 0:m),u?null==u?void 0:u():Promise.resolve()}return useMount(function(){d&&d.setFieldsValue(m)}),useUpdateEffect(function(){d&&(m?d.setFieldsValue(m):d.resetFields())},[m]),t};FilterItem.displayName="FilterItem";export default FilterItem;
//# sourceMappingURL=index.js.map
