import _Dialog from"@baifendian/adhere-mobile-ui-anthoc/es/dialog";import _Modal from"@baifendian/adhere-mobile-ui-anthoc/es/modal";import _Popup from"@baifendian/adhere-mobile-ui-anthoc/es/popup";import _FilterOutline from"antd-mobile-icons/es/FilterOutline";import _Form from"antd-mobile/es/components/form";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};import{useMount,useUpdateEffect}from"ahooks";import React,{useMemo}from"react";import AdherePopup from"@baifendian/adhere-ui-popup";import Intl from"@baifendian/adhere-util-intl";import NormalItem from"../NormalItem";var selectorPrefix="adhere-mobile-ui-prsl-toolbar-filter-item",FilterItem=function(e){var r=e.children,t=e.filterTriggerMode,o=void 0===t?"popup-bottom":t,t=e.filterTriggerProps,i=void 0===t?{}:t,n=e.renderFilter,l=e.filterFormProps,a=e.filterConfig,u=e.defaultFilterValues,s=e.onFilter,p=e.onFilterReset,m=_Form.useForm()[0],c=React.createElement(NormalItem,{key:"filter-item",className:selectorPrefix,icon:React.createElement(_FilterOutline,null),label:Intl.v("筛选")}),d=useMemo(function(){var e;return null!=(e=null==r?void 0:r(c))?e:c},[r,c]),f=useMemo(function(){return"adhere-popup"===o?[{key:"ok",type:"primary",children:Intl.v("确定"),onClick:_},{key:"reset",type:"primary",children:Intl.v("重置"),onClick:v}]:[{key:"ok",primary:!0,text:Intl.v("确定"),onClick:_},{key:"reset",primary:!0,text:Intl.v("重置"),onClick:v}]},[o]),g=useMemo(function(){return n?null==n?void 0:n(null!=u?u:{}):React.createElement(_Form,__assign({form:m,layout:"horizontal"},l),null==a?void 0:a.map(function(e){var r=e.key,t=e.name,o=e.label,i=e.formItemProps,e=e.render;return React.createElement(_Form.Item,__assign({key:r,name:t,label:o},null!=i?i:{}),null==e?void 0:e())}))},[n,u]),t=useMemo(function(){var e,r,t=__assign({},i);return["popup-bottom","popup-top","modal","dialog"].includes(null!=o?o:"")?(e=__assign(__assign({},t),{actions:f,popoverTriggerProps:__assign(__assign({},null==i?void 0:i.popoverTriggerProps),{renderTrigger:function(){return d}})}),["popup-bottom","popup-top"].includes(null!=o?o:"")?(r=new Map([["popup-bottom","bottom"],["popup-top","top"]]),r=__assign(__assign({},e),{position:r.get(null!=o?o:"")}),React.createElement(_Popup.Trigger,__assign({},r),g)):"modal"===o?React.createElement(_Modal.TriggerPrompt,__assign({},e),g):"dialog"===o?React.createElement(_Dialog.TriggerPrompt,__assign({},e),g):void 0):"adhere-popup"===o?React.createElement(AdherePopup.Trigger,__assign({},t,{renderTrigger:function(){return d},actions:f}),g):void 0},[o,i,d,g,f]);function _(){var e;return s?null==s?void 0:s(null!=(e=null==(e=null==m?void 0:m.getFieldsValue)?void 0:e.call(m))?e:{}):Promise.resolve()}function v(){return null!=m&&m.resetFields(u),p?null==p?void 0:p():Promise.resolve()}return useMount(function(){m&&m.setFieldsValue(u)}),useUpdateEffect(function(){m&&m.setFieldsValue(u)},[u]),t};FilterItem.displayName="FilterItem";export default FilterItem;
//# sourceMappingURL=index.js.map
