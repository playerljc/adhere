{"version":3,"file":"index.js","sources":["Toolbar/index.js"],"sourcesContent":["import _HolderOutlined from \"@ant-design/icons/es/icons/HolderOutlined\";\nimport _Popover from \"antd-mobile/es/components/popover\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { memo, useMemo } from 'react';\nimport { isElement } from 'react-is';\nimport Intl from '@baifendian/adhere-util-intl';\nimport FilterItem from './Items/FilterItem';\nimport NormalItem from './Items/NormalItem';\nimport SortItem from './Items/SortItem';\nimport ViewSettingItem from './Items/ViewSettingItem';\nvar selectorPrefix = 'adhere-mobile-ui-prsl-toolbar';\n/**\n * Toolbar\n * @description 工具栏，分为左侧和右侧，如果item多可以移动到Menu中\n * 左侧: 显示总户数(可有可无)\n * 右侧: {\n *   内置工具: [\n *     FilterItem: 过滤\n *     SortItem: 排序\n *     ViewSettingItem: 视图设置\n *   ]\n *   其他业务工具项: Array\n * }\n * beforeToolBarElement\n * default\n * afterToolBarElement\n */\nvar ToolBar = /*#__PURE__*/memo(function (_a) {\n  var _b;\n  var className = _a.className,\n    style = _a.style,\n    _c = _a.showTotal,\n    showTotal = _c === void 0 ? true : _c,\n    renderToolBar = _a.renderToolBar,\n    afterToolBarRender = _a.afterToolBarRender,\n    beforeToolBarRender = _a.beforeToolBarRender,\n    beforeToolBarRenderClassName = _a.beforeToolBarRenderClassName,\n    beforeToolBarRenderStyle = _a.beforeToolBarRenderStyle,\n    afterToolBarRenderClassName = _a.afterToolBarRenderClassName,\n    afterToolBarRenderStyle = _a.afterToolBarRenderStyle,\n    _d = _a.isShowFilterTrigger,\n    isShowFilterTrigger = _d === void 0 ? true : _d,\n    renderFilterTrigger = _a.renderFilterTrigger,\n    _e = _a.isShowSortTrigger,\n    isShowSortTrigger = _e === void 0 ? true : _e,\n    renderSortTrigger = _a.renderSortTrigger,\n    _f = _a.isShowViewSettingTrigger,\n    isShowViewSettingTrigger = _f === void 0 ? true : _f,\n    renderViewSettingTrigger = _a.renderViewSettingTrigger,\n    toolbarCollapseCount = _a.toolbarCollapseCount,\n    toolbarConfig = _a.toolbarConfig,\n    filterTriggerMode = _a.filterTriggerMode,\n    filterTriggerProps = _a.filterTriggerProps,\n    renderFilter = _a.renderFilter,\n    filterFormProps = _a.filterFormProps,\n    filterConfig = _a.filterConfig,\n    defaultFilterValues = _a.defaultFilterValues,\n    onFilter = _a.onFilter,\n    onFilterReset = _a.onFilterReset,\n    sortTriggerMode = _a.sortTriggerMode,\n    sortTriggerProps = _a.sortTriggerProps,\n    renderSort = _a.renderSort,\n    sortConfig = _a.sortConfig,\n    defaultSortValues = _a.defaultSortValues,\n    onSort = _a.onSort,\n    onSortReset = _a.onSortReset,\n    _g = _a.total,\n    total = _g === void 0 ? 0 : _g;\n  // 显示Total的UI\n  var showTotalElement = useMemo(function () {\n    return showTotal && total > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-show-total\")\n    }, Intl.v(\"\\u5171{total}\\u4E2A\\u7ED3\\u679C\", {\n      total: total\n    })) : null;\n  }, [showTotal, total]);\n  // 显示Total的WrapperUI\n  var showTotalElementWrapper = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-show-total\"))\n    }, showTotalElement);\n  }, [showTotalElement]);\n  // 筛选按钮UI\n  var filterItemElement = useMemo(function () {\n    return isShowFilterTrigger ? /*#__PURE__*/React.createElement(FilterItem, {\n      filterTriggerMode: filterTriggerMode,\n      filterTriggerProps: filterTriggerProps,\n      renderFilter: renderFilter,\n      filterFormProps: filterFormProps,\n      filterConfig: filterConfig,\n      defaultFilterValues: defaultFilterValues,\n      onFilter: onFilter,\n      onFilterReset: onFilterReset\n    }, function (defaultUI) {\n      return renderFilterTrigger === null || renderFilterTrigger === void 0 ? void 0 : renderFilterTrigger(defaultUI);\n    }) : null;\n  }, [isShowFilterTrigger, renderFilterTrigger, filterTriggerMode, filterTriggerProps, renderFilter, filterFormProps, filterConfig, defaultFilterValues, onFilter, onFilterReset]);\n  // 排序按钮UI\n  var sortItemElement = useMemo(function () {\n    return isShowSortTrigger ? /*#__PURE__*/React.createElement(SortItem, {\n      sortTriggerMode: sortTriggerMode,\n      sortTriggerProps: sortTriggerProps,\n      renderSort: renderSort,\n      sortConfig: sortConfig,\n      defaultSortValues: defaultSortValues,\n      onSort: onSort,\n      onSortReset: onSortReset\n    }, function (defaultUI) {\n      return renderSortTrigger === null || renderSortTrigger === void 0 ? void 0 : renderSortTrigger(defaultUI);\n    }) : null;\n  }, [isShowSortTrigger, renderSortTrigger, sortTriggerMode, sortTriggerProps, renderSort, sortConfig, defaultSortValues, onSort, onSortReset]);\n  // 视图设置按钮UI\n  var viewSettingItemElement = useMemo(function () {\n    return isShowViewSettingTrigger ? /*#__PURE__*/React.createElement(ViewSettingItem, null, function (defaultUI) {\n      return renderViewSettingTrigger === null || renderViewSettingTrigger === void 0 ? void 0 : renderViewSettingTrigger(defaultUI);\n    }) : null;\n  }, [isShowViewSettingTrigger, renderViewSettingTrigger]);\n  // 工具栏的按钮组\n  var toolbarItemElements = useMemo(function () {\n    var _a;\n    var config = (_a = toolbarConfig === null || toolbarConfig === void 0 ? void 0 : toolbarConfig([filterItemElement, sortItemElement, viewSettingItemElement].filter(function (t) {\n      return !!t;\n    }))) !== null && _a !== void 0 ? _a : [filterItemElement, sortItemElement, viewSettingItemElement];\n    return config.map(function (el) {\n      if (isElement(el)) return el;\n      return /*#__PURE__*/React.createElement(NormalItem, __assign({}, el));\n    }).filter(function (t) {\n      return !!t;\n    });\n  }, [toolbarConfig, filterItemElement, sortItemElement, viewSettingItemElement]);\n  // 工具栏可显示的按钮\n  var displayItemElements = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-tool-items\")\n    }, toolbarItemElements.slice(0, toolbarCollapseCount).map(function (_item) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(\"\".concat(selectorPrefix, \"-tool-item\"))\n      }, _item);\n    }));\n  }, [toolbarItemElements, toolbarCollapseCount]);\n  // 菜单中的按钮\n  var popoverMenu = useMemo(function () {\n    var popoverMenuElements = toolbarItemElements.slice(toolbarCollapseCount);\n    if (!!popoverMenuElements.length) {\n      return /*#__PURE__*/React.createElement(_Popover, {\n        placement: \"bottom-start\",\n        trigger: \"click\",\n        content: /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"\".concat(selectorPrefix, \"-tool-menu-items\")\n        }, popoverMenuElements.map(function (_element) {\n          return /*#__PURE__*/React.createElement(\"li\", {\n            className: \"\".concat(selectorPrefix, \"-tool-menu-item\")\n          }, _element);\n        }))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-tool-menu-trigger\")\n      }, /*#__PURE__*/React.createElement(_HolderOutlined, null)));\n    }\n    return null;\n  }, [toolbarItemElements, toolbarCollapseCount]);\n  // beforeToolBarElement\n  var beforeToolBarElement = useMemo(function () {\n    return beforeToolBarRender === null || beforeToolBarRender === void 0 ? void 0 : beforeToolBarRender();\n  }, [beforeToolBarRender]);\n  // beforeToolBarWrapperElement\n  var beforeToolBarWrapperElement = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-before\"), beforeToolBarRenderClassName !== null && beforeToolBarRenderClassName !== void 0 ? beforeToolBarRenderClassName : ''),\n      style: beforeToolBarRenderStyle !== null && beforeToolBarRenderStyle !== void 0 ? beforeToolBarRenderStyle : {}\n    }, beforeToolBarElement);\n  }, [beforeToolBarElement, beforeToolBarRenderClassName, beforeToolBarRenderStyle]);\n  // afterToolBarElement\n  var afterToolBarElement = useMemo(function () {\n    return afterToolBarRender === null || afterToolBarRender === void 0 ? void 0 : afterToolBarRender();\n  }, [afterToolBarRender]);\n  // afterToolBarWrapperElement\n  var afterToolBarWrapperElement = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-after\"), afterToolBarRenderClassName !== null && afterToolBarRenderClassName !== void 0 ? afterToolBarRenderClassName : ''),\n      style: afterToolBarRenderStyle !== null && afterToolBarRenderStyle !== void 0 ? afterToolBarRenderStyle : {}\n    }, afterToolBarElement);\n  }, [afterToolBarRenderClassName, afterToolBarRenderStyle, afterToolBarElement]);\n  /**\n   * renderChildren\n   * @description 渲染children\n   */\n  function renderChildren() {\n    var elements = [];\n    if (showTotal) {\n      elements.push(showTotalElementWrapper);\n    }\n    elements.push(displayItemElements);\n    elements.push(popoverMenu);\n    return elements.filter(function (t) {\n      return !!t;\n    });\n  }\n  return (\n    /*#__PURE__*/\n    // Wrapper\n    React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-wrapper\"), className !== null && className !== void 0 ? className : ''),\n      style: style !== null && style !== void 0 ? style : {}\n    }, beforeToolBarElement && beforeToolBarWrapperElement, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-inner\")\n    }, (_b = renderToolBar === null || renderToolBar === void 0 ? void 0 : renderToolBar(toolbarItemElements, showTotalElement)) !== null && _b !== void 0 ? _b : renderChildren()), afterToolBarElement && afterToolBarWrapperElement)\n  );\n});\nToolBar.displayName = 'ToolBar';\nexport default ToolBar;"],"names":["_HolderOutlined","_Popover","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","React","memo","useMemo","isElement","Intl","FilterItem","NormalItem","SortItem","ViewSettingItem","selectorPrefix","ToolBar","_a","className","style","_c","showTotal","renderToolBar","afterToolBarRender","beforeToolBarRender","beforeToolBarRenderClassName","beforeToolBarRenderStyle","afterToolBarRenderClassName","afterToolBarRenderStyle","_d","isShowFilterTrigger","renderFilterTrigger","_e","isShowSortTrigger","renderSortTrigger","_f","isShowViewSettingTrigger","renderViewSettingTrigger","toolbarCollapseCount","toolbarConfig","filterTriggerMode","filterTriggerProps","renderFilter","filterFormProps","filterConfig","defaultFilterValues","onFilter","onFilterReset","sortTriggerMode","sortTriggerProps","renderSort","sortConfig","defaultSortValues","onSort","onSortReset","_g","total","showTotalElement","createElement","concat","v","showTotalElementWrapper","filterItemElement","defaultUI","sortItemElement","viewSettingItemElement","toolbarItemElements","filter","map","el","displayItemElements","slice","_item","popoverMenu","popoverMenuElements","placement","trigger","content","_element","beforeToolBarElement","beforeToolBarWrapperElement","afterToolBarElement","afterToolBarWrapperElement","_b","elements","push","displayName"],"mappings":"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"}