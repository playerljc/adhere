import _HolderOutlined from"@ant-design/icons/es/icons/HolderOutlined";import _Popover from"antd-mobile/es/components/popover";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};import classNames from"classnames";import React,{memo,useMemo,useRef,useState}from"react";import{isElement}from"react-is";import Intl from"@baifendian/adhere-util-intl";import FilterItem from"./Items/FilterItem";import NormalItem from"./Items/NormalItem";import SortItem from"./Items/SortItem";import ViewSettingItem from"./Items/ViewSettingItem";var selectorPrefix="adhere-mobile-ui-prsl-toolbar",ToolBar=memo(function(e){var t=e.className,r=e.style,o=e.showTotal,n=void 0===o||o,o=e.renderToolBar,l=e.afterToolBarRender,i=e.beforeToolBarRender,a=e.beforeToolBarRenderClassName,s=e.beforeToolBarRenderStyle,c=e.afterToolBarRenderClassName,u=e.afterToolBarRenderStyle,m=e.isShowFilterTrigger,f=void 0===m||m,g=e.renderFilterTrigger,m=e.isShowSortTrigger,d=void 0===m||m,p=e.renderSortTrigger,m=e.isShowViewSettingTrigger,v=void 0===m||m,S=e.renderViewSettingTrigger,R=e.viewSettingTriggerMode,T=e.viewSettingTriggerProps,w=e.renderViewSetting,N=e.viewSettingConfig,k=e.defaultViewSettingValue,H=e.onViewSetting,j=e.onViewSettingReset,P=e.toolbarCollapseCount,b=e.toolbarConfig,E=e.filterTriggerMode,M=e.filterTriggerProps,q=e.renderFilter,z=e.filterFormProps,A=e.filterConfig,D=e.defaultFilterValues,G=e.onFilter,J=e.onFilterReset,K=e.sortTriggerMode,L=e.sortTriggerProps,Q=e.renderSort,U=e.sortConfig,W=e.defaultSortValues,X=e.onSort,Y=e.onSortReset,m=e.total,V=void 0===m?0:m,I=e.disabled,Z=useRef(null),m=useState(!1),h=m[0],$=m[1],F=useMemo(function(){return n&&0<V?React.createElement("div",{className:"".concat(selectorPrefix,"-show-total")},Intl.v("共{total}个结果",{total:V})):null},[n,V]),e=useMemo(function(){return React.createElement("div",{className:classNames("".concat(selectorPrefix,"-show-total"))},F)},[F]),x=useMemo(function(){return f?React.createElement(FilterItem,{disabled:null!=I&&I,filterTriggerMode:null!=E?E:"popup-bottom",filterTriggerProps:null!=M?M:{},renderFilter:q,filterFormProps:z,filterConfig:A,defaultFilterValues:D,onFilter:G,onFilterReset:J},function(e){return null==g?void 0:g(e)}):null},[I,f,g,E,M,q,z,A,D,G,J]),C=useMemo(function(){return d?React.createElement(SortItem,{disabled:null!=I&&I,sortTriggerMode:K,sortTriggerProps:L,renderSort:Q,sortConfig:U,defaultSortValues:W,onSort:X,onSortReset:Y},function(e){return null==p?void 0:p(e)}):null},[I,d,p,K,L,Q,U,W,X,Y]),_=useMemo(function(){return v?React.createElement(ViewSettingItem,{disabled:null!=I&&I,viewSettingTriggerMode:R,viewSettingTriggerProps:T,renderViewSetting:w,viewSettingConfig:N,defaultViewSettingValue:k,onViewSetting:H,onViewSettingReset:j},function(e){return null==S?void 0:S(e)}):null},[I,v,S,R,T,w,N,k,H,j]),B=useMemo(function(){var e;return(null!=(e=null==b?void 0:b([x,C,_].filter(function(e){return!!e})))?e:[x,C,_]).map(function(e){return isElement(e)?e:React.createElement(NormalItem,__assign({disabled:null!=I&&I},e))}).filter(function(e){return!!e})},[b,x,C,_,I]),m=useMemo(function(){return React.createElement("div",{className:"".concat(selectorPrefix,"-tool-items")},B.slice(0,P).map(function(e){return React.createElement("div",{className:classNames("".concat(selectorPrefix,"-tool-item"))},e)}))},[B,P]),ee=useMemo(function(){var e=B.slice(P);return e.length?React.createElement(_Popover,{ref:Z,placement:"bottom-start",trigger:"click",visible:h,content:React.createElement("ul",{className:"".concat(selectorPrefix,"-tool-menu-items")},e.map(function(e){return React.createElement("li",{className:"".concat(selectorPrefix,"-tool-menu-item"),onClick:function(){$(!1)}},e)}))},React.createElement("div",{className:"".concat(selectorPrefix,"-tool-menu-trigger"),onClick:function(){$(!h)}},React.createElement(_HolderOutlined,null))):null},[B,P,h]),y=useMemo(function(){return null==i?void 0:i()},[i]),te=useMemo(function(){return React.createElement("div",{className:classNames("".concat(selectorPrefix,"-before"),null!=a?a:""),style:null!=s?s:{}},y)},[y,a,s]),O=useMemo(function(){return null==l?void 0:l()},[l]),re=useMemo(function(){return React.createElement("div",{className:classNames("".concat(selectorPrefix,"-after"),null!=c?c:""),style:null!=u?u:{}},O)},[c,u,O]);return React.createElement("div",{className:classNames("".concat(selectorPrefix,"-wrapper"),null!=t?t:""),style:null!=r?r:{}},y&&te,React.createElement("div",{className:"".concat(selectorPrefix,"-inner")},null!=(t=null==o?void 0:o(B,F,I))?t:(r=[],n&&r.push(e),r.push(m),r.push(ee),r.filter(function(e){return!!e}))),O&&re)});ToolBar.displayName="ToolBar";export default ToolBar;
//# sourceMappingURL=index.js.map
