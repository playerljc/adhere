var __spreadArray=this&&this.__spreadArray||function(e,r,n){if(n||2===arguments.length)for(var t,o=0,l=r.length;o<l;o++)!t&&o in r||((t=t||Array.prototype.slice.call(r,0,o))[o]=r[o]);return e.concat(t||Array.prototype.slice.call(r))};import{useUpdateEffect}from"ahooks";import difference from"lodash.difference";import{useMemo,useState}from"react";var DEFAULT_SELECTION_MULTIPLE=!0;export default function UseSelection(e){var r=e.selectedRowKeys,n=e.selectionMultiple,t=e.mode,o=e.dataSource,l=e.rowKey,e=useState(null!=r?r:[]),a=e[0],u=e[1],e=useState(null!=r?r:[]),c=e[0],i=e[1],e=useMemo(function(){return"selection"===t},[t]),s=useMemo(function(){return null!=n?n:DEFAULT_SELECTION_MULTIPLE},[n]);return useUpdateEffect(function(){u(null!=r?r:[]),i(null!=r?r:[])},[r]),{optionSelectedRowKeys:c,targetSelectedRowKeys:a,isUseSelectionMode:e,isSelectionMultiple:s,selectionChange:function(r,n){i(function(e){return r?s?__spreadArray(__spreadArray([],e,!0),[n],!1):[n]:s?e.filter(function(e){return e!==n}):[]})},selectionAllChange:function(r){i(function(e){return r?__spreadArray([],o.map(function(e){return e[l]}),!0):[]})},finish:function(){var e=__spreadArray([],a,!0),r=__spreadArray([],c,!0),n=(u(r),difference(e,r)),e=difference(r,e);return{selectedRowKeys:r,selectedRows:r.map(function(r){return o.find(function(e){return(null==e?void 0:e[l])===r})}),changeRowKeys:__spreadArray(__spreadArray([],null!=n?n:[],!0),null!=e?e:[],!0),info:{type:(null!=e?e:[]).length?"select":"unselect"}}},cancel:function(){i(__spreadArray([],a,!0))}}}
//# sourceMappingURL=useSelection.js.map
