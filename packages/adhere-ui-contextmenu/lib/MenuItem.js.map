{"version":3,"file":"MenuItem.js","sources":["MenuItem.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport SubMenu from './SubMenu';\r\nimport { ProviderContext } from './ContextMenuContext';\r\nvar selectorPrefix = 'adhere-ui-contextmenu-menuitem';\r\n/**\r\n * MenuItem\r\n * @class MenuItem\r\n * @classdesc MenuItem\r\n */\r\nvar MenuItem = /** @class */ (function (_super) {\r\n    __extends(MenuItem, _super);\r\n    function MenuItem(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.onClick = function (e) {\r\n            e.stopPropagation();\r\n            var \r\n            // @ts-ignore\r\n            _a = _this.props.data, id = _a.id, attribute = _a.attribute, children = _a.children, disabled = _a.disabled;\r\n            // @ts-ignore\r\n            var handler = _this.config.handler;\r\n            if (disabled || children.length > 0)\r\n                return false;\r\n            if (handler) {\r\n                handler(id, attribute);\r\n                // @ts-ignore\r\n                ReactDOM.unmountComponentAtNode(_this.el);\r\n            }\r\n        };\r\n        _this.renderInner = _this.renderInner.bind(_this);\r\n        return _this;\r\n    }\r\n    MenuItem.prototype.renderIcon = function () {\r\n        var icon = this.props.data.icon;\r\n        return (React.createElement(ConditionalRender, { conditional: typeof icon === 'string', \r\n            // @ts-ignore\r\n            noMatch: function () { return React.createElement(\"span\", { className: classNames(selectorPrefix + \"-icon\") }, icon); } }, function () { return React.createElement(\"span\", { className: classNames(selectorPrefix + \"-icon\", icon) }); }));\r\n    };\r\n    MenuItem.prototype.renderName = function () {\r\n        var name = this.props.data.name;\r\n        return React.createElement(\"span\", { className: selectorPrefix + \"-name\" }, name);\r\n    };\r\n    MenuItem.prototype.renderMore = function () {\r\n        var children = this.props.data.children;\r\n        return (React.createElement(ConditionalRender, { conditional: children.length !== 0 }, function () { return React.createElement(\"span\", { className: selectorPrefix + \"-more fa fa-caret-right\" }); }));\r\n    };\r\n    MenuItem.prototype.renderSubMenu = function () {\r\n        var \r\n        // @ts-ignore\r\n        _a = this.props.data, children = _a.children, subMenuClassName = _a.subMenuClassName, subMenuStyle = _a.subMenuStyle;\r\n        return (React.createElement(ConditionalRender, { conditional: children.length !== 0 }, function () { return (React.createElement(SubMenu\r\n        // @ts-ignore\r\n        , { \r\n            // @ts-ignore\r\n            data: children, className: subMenuClassName, style: subMenuStyle })); }));\r\n    };\r\n    MenuItem.prototype.renderInner = function (_a) {\r\n        var _this = this;\r\n        var config = _a.config, el = _a.el;\r\n        var \r\n        // @ts-ignore\r\n        _b = this.props.data, separation = _b.separation, _c = _b.disabled, disabled = _c === void 0 ? false : _c, className = _b.className, style = _b.style;\r\n        // @ts-ignore\r\n        this.config = config;\r\n        // @ts-ignore\r\n        this.el = el;\r\n        return (React.createElement(ConditionalRender, { conditional: !separation, \r\n            // @ts-ignore\r\n            noMatch: function () { return React.createElement(\"li\", { className: selectorPrefix + \"-separation\" }); } }, function () { return (React.createElement(\"li\", { className: classNames(selectorPrefix, disabled ? 'disabled' : '', \r\n            // @ts-ignore\r\n            (className || '').split(' ')), style: __assign({}, (style || {})), onClick: _this.onClick },\r\n            _this.renderIcon(),\r\n            _this.renderName(),\r\n            _this.renderMore(),\r\n            _this.renderSubMenu())); }));\r\n    };\r\n    MenuItem.prototype.render = function () {\r\n        return React.createElement(ProviderContext.Consumer, null, this.renderInner);\r\n    };\r\n    return MenuItem;\r\n}(React.PureComponent));\r\nMenuItem.propTypes = {\r\n    data: PropTypes.shape({\r\n        name: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n        icon: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n        disabled: PropTypes.bool,\r\n        separation: PropTypes.bool,\r\n        attribute: PropTypes.object,\r\n        children: PropTypes.array,\r\n        className: PropTypes.string,\r\n        style: PropTypes.object,\r\n        subMenuClassName: PropTypes.string,\r\n        subMenuStyle: PropTypes.object,\r\n    }),\r\n};\r\nexport default MenuItem;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","ReactDOM","classNames","PropTypes","ConditionalRender","SubMenu","ProviderContext","selectorPrefix","MenuItem","_super","props","_this","onClick","e","stopPropagation","_a","data","id","attribute","children","disabled","handler","config","unmountComponentAtNode","el","renderInner","bind","renderIcon","icon","createElement","conditional","noMatch","className","renderName","name","renderMore","renderSubMenu","subMenuClassName","subMenuStyle","style","_b","separation","_c","split","render","Consumer","PureComponent","propTypes","shape","oneOfType","string","node","bool","object","array"],"mappings":"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"}