var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();import React from"react";import ReactDOM from"react-dom";import classNames from"classnames";import PropTypes from"prop-types";import Menu from"./Menu";import{ProviderContext as ProviderContext}from"./ContextMenuContext";var selectorPrefix="adhere-ui-contextmenu",ContextMenuComponent=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.onClick=function(e){e.stopPropagation();e=o.props.el;ReactDOM.unmountComponentAtNode(e)&&e.parentElement.removeChild(e)},o.onContextMenu=function(e){var t=o.props.el;e.preventDefault(),ReactDOM.unmountComponentAtNode(t)&&t.parentElement.removeChild(t)},o}return __extends(t,e),t.prototype.mount=function(){var e;null!==(e=this.menuIns)&&void 0!==e&&e.mount()},t.prototype.render=function(){var t=this,e=this.props,o=e.data,n=void 0===o?[]:o,o=e.config,e=e.el;return React.createElement(ProviderContext.Provider,{value:{config:o,el:e}},React.createElement("div",{className:classNames(selectorPrefix),style:{zIndex:19998},onClick:this.onClick,onContextMenu:this.onContextMenu},React.createElement(Menu,{data:n,className:o.className,style:o.style,ref:function(e){return t.menuIns=e}})))},t}(React.PureComponent);ContextMenuComponent.defaultProps={data:[],config:{}},ContextMenuComponent.propTypes={data:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.oneOfType([PropTypes.string,PropTypes.node]),icon:PropTypes.oneOfType([PropTypes.string,PropTypes.node]),disabled:PropTypes.bool,separation:PropTypes.bool,attribute:PropTypes.object,children:PropTypes.array})),config:PropTypes.shape({x:PropTypes.number,y:PropTypes.number,width:PropTypes.number,maskClosable:PropTypes.bool,handler:PropTypes.func,className:PropTypes.string,style:PropTypes.object,subMenuClassName:PropTypes.string,subMenuStyle:PropTypes.object}),el:PropTypes.any};var ContextMenu={open:function(e,t){var o=null;t=Object.assign({width:200,maskClosable:!0},t);var n=document.createElement("div");return document.body.appendChild(n),ReactDOM.render(React.createElement(ContextMenuComponent,{data:e,config:t,el:n,ref:function(e){return o=e}}),n,function(){o.mount()}),n},close:function(e){ReactDOM.unmountComponentAtNode(e)&&e.parentElement.removeChild(e)}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
