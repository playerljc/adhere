import classNames from"classnames";import React,{forwardRef,useImperativeHandle,useRef}from"react";import ReactDOM from"react-dom/client";import{ProviderContext}from"./ContextMenuContext";import Menu from"./Menu";var selectorPrefix="adhere-ui-contextmenu",ContextMenuComponent=function(e,t){var n=e.data,n=void 0===n?[]:n,o=e.config,r=e.el,a=useRef(null);return useImperativeHandle(t,function(){return{mount:function(){var e;return null==(e=a.current)?void 0:e.mount()}}}),React.createElement(ProviderContext.Provider,{value:{config:o,el:r}},React.createElement("div",{className:classNames(selectorPrefix),style:{zIndex:19998},onClick:function(e){e.stopPropagation(),(e=openHandlers.get(r))&&e.unmount()},onContextMenu:function(e){e.preventDefault(),(e=openHandlers.get(r))&&e.unmount()}},React.createElement(Menu,{data:n,className:o.className,style:o.style,ref:a})))},ContextMenuComponentHOC=forwardRef(ContextMenuComponent),openHandlers=new WeakMap,ContextMenu={open:function(e,t){var n=React.createRef(),o=(t=Object.assign({width:200,maskClosable:!0},t),document.createElement("div")),r=(document.body.appendChild(o),ReactDOM.createRoot(o));return r.render(React.createElement(ContextMenuComponentHOC,{data:e,config:t,el:o,ref:function(e){n.current=e,null!=(e=n.current)&&e.mount()}})),openHandlers.set(o,r),o},close:function(e){e=openHandlers.get(e);e&&e.unmount()}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
