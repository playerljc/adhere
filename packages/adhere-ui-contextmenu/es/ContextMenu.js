import React,{forwardRef,useImperativeHandle,useRef}from"react";import ReactDOM from"react-dom";import classNames from"classnames";import Menu from"./Menu";import{ProviderContext}from"./ContextMenuContext";var selectorPrefix="adhere-ui-contextmenu",ContextMenuComponent=function(e,t){var n=e.data,o=void 0===n?[]:n,n=e.config,r=e.el,a=useRef(null);return useImperativeHandle(t,function(){return{mount:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.mount()}}}),React.createElement(ProviderContext.Provider,{value:{config:n,el:r}},React.createElement("div",{className:classNames(selectorPrefix),style:{zIndex:19998},onClick:function(e){var t;e.stopPropagation(),ReactDOM.unmountComponentAtNode(r)&&null!==(t=null==r?void 0:r.parentElement)&&void 0!==t&&t.removeChild(r)},onContextMenu:function(e){var t;e.preventDefault(),ReactDOM.unmountComponentAtNode(r)&&null!==(t=null==r?void 0:r.parentElement)&&void 0!==t&&t.removeChild(r)}},React.createElement(Menu,{data:o,className:n.className,style:n.style,ref:a})))},ContextMenuComponentHOC=forwardRef(ContextMenuComponent),ContextMenu={open:function(e,t){var n=React.createRef();t=Object.assign({width:200,maskClosable:!0},t);var o=document.createElement("div");return document.body.appendChild(o),ReactDOM.render(React.createElement(ContextMenuComponentHOC,{data:e,config:t,el:o,ref:n}),o,function(){var e;return null===(e=n.current)||void 0===e?void 0:e.mount()}),o},close:function(e){ReactDOM.unmountComponentAtNode(e)&&e.parentElement.removeChild(e)}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
