import classNames from"classnames";import React,{forwardRef,useImperativeHandle,useRef}from"react";import ReactDOM from"react-dom/client";import CircularMenuFactory from"./CircularMenu/factory";import{ProviderContext}from"./ContextMenuContext";import Menu from"./Menu";var renderToWrapper,selectorPrefix="adhere-ui-context-menu",ContextMenuComponentFunction=forwardRef(function(e,n){var t=e.data,t=void 0===t?[]:t,r=e.config,o=e.el,a=useRef();return useImperativeHandle(n,function(){return{mount:function(){var e;return null==(e=a.current)?void 0:e.mount()}}}),React.createElement(ProviderContext.Provider,{value:{config:r,el:o}},React.createElement("div",{className:classNames(selectorPrefix),style:{zIndex:19998},onClick:function(e){e.stopPropagation(),(e=openHandlers.get(o))&&e.unmount()},onContextMenu:function(e){e.preventDefault(),(e=openHandlers.get(o))&&e.unmount()}},React.createElement(Menu,{data:t,className:null!=(e=r.className)?e:"",style:null!=(n=r.style)?n:{},ref:a})))}),openHandlers=new WeakMap,ContextMenu={setRenderToWrapper:function(e){renderToWrapper=e},open:function(e,n){var t=React.createRef(),r=(n=Object.assign({width:200,maskClosable:!0},n),document.createElement("div")),o=(document.body.appendChild(r),ReactDOM.createRoot(r)),a=React.createElement(ContextMenuComponentFunction,{data:e,config:n,el:r,ref:function(e){t.current=e,null!=(e=t.current)&&e.mount()}});return o.render(null!=(e=null==renderToWrapper?void 0:renderToWrapper(function(){return a}))?e:a),openHandlers.set(r,o),r},close:function(e){e=openHandlers.get(e);e&&e.unmount()},openCircular:function(e,n){CircularMenuFactory.open(e,n)},hideCircular:function(){CircularMenuFactory.hide()},stylesCircular:function(e){CircularMenuFactory.styles(e)}};export default ContextMenu;
//# sourceMappingURL=ContextMenu.js.map
