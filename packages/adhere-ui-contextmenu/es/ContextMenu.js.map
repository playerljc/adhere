{"version":3,"file":"ContextMenu.js","sources":["ContextMenu.js"],"sourcesContent":["import classNames from 'classnames';\r\nimport React, { forwardRef, useImperativeHandle, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { ProviderContext } from './ContextMenuContext';\r\nimport Menu from './Menu';\r\nvar selectorPrefix = 'adhere-ui-contextmenu';\r\nvar ContextMenuComponent = function (props, ref) {\r\n    var _a = props.data, data = _a === void 0 ? [] : _a, config = props.config, el = props.el;\r\n    var menuIns = useRef(null);\r\n    function onClick(e) {\r\n        var _a;\r\n        e.stopPropagation();\r\n        var flag = ReactDOM.unmountComponentAtNode(el);\r\n        if (flag) {\r\n            (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(el);\r\n        }\r\n    }\r\n    function onContextMenu(e) {\r\n        var _a;\r\n        e.preventDefault();\r\n        var flag = ReactDOM.unmountComponentAtNode(el);\r\n        if (flag) {\r\n            (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(el);\r\n        }\r\n    }\r\n    useImperativeHandle(ref, function () { return ({\r\n        mount: function () { var _a; return (_a = menuIns.current) === null || _a === void 0 ? void 0 : _a.mount(); },\r\n    }); });\r\n    return (React.createElement(ProviderContext.Provider, { value: {\r\n            config: config,\r\n            el: el,\r\n        } },\r\n        React.createElement(\"div\", { className: classNames(selectorPrefix), style: { zIndex: 9999 * 2 }, onClick: onClick, onContextMenu: onContextMenu },\r\n            React.createElement(Menu, { data: data, className: config.className, style: config.style, ref: menuIns }))));\r\n};\r\nvar ContextMenuComponentHOC = forwardRef(ContextMenuComponent);\r\nvar ContextMenu = {\r\n    /**\r\n     * config\r\n     * {\r\n     *   name - {String} 名字\r\n     *   icon - {String} 图标\r\n     *   id - {String} 唯一的id\r\n     *   disabled - {Boolean} 不可用\r\n     *   separation - {Bolean} 分割线\r\n     *   attribute - {Object} 自定义属性\r\n     *   children - {Array<Object> 孩子\r\n     * }\r\n     *{\r\n     *   width - {Number} 宽度\r\n     *   x - {Number} 显示的x坐标 相对于body\r\n     *   y - {Number} 现实的y坐标 相对于body\r\n     *   maskClosable - {Boolean} 点击其他位置是否关闭菜单\r\n     *   handler - {Function} 点击的事件句柄\r\n     * }\r\n     * @return {HTMLDivElement}\r\n     * @param data\r\n     * @param config\r\n     */\r\n    open: function (data, config) {\r\n        var contextMenuIns = React.createRef();\r\n        config = Object.assign({ width: 200, maskClosable: true }, config);\r\n        var parentEl = document.createElement('div');\r\n        document.body.appendChild(parentEl);\r\n        ReactDOM.render(React.createElement(ContextMenuComponentHOC, { data: data, config: config, el: parentEl, ref: contextMenuIns }), parentEl, function () { var _a; return (_a = contextMenuIns.current) === null || _a === void 0 ? void 0 : _a.mount(); });\r\n        return parentEl;\r\n    },\r\n    close: function (el) {\r\n        var flag = ReactDOM.unmountComponentAtNode(el);\r\n        if (flag) {\r\n            el.parentElement.removeChild(el);\r\n        }\r\n    },\r\n};\r\nexport default ContextMenu;\r\n"],"names":["classNames","React","forwardRef","useImperativeHandle","useRef","ReactDOM","ProviderContext","Menu","selectorPrefix","ContextMenuComponent","props","ref","_a","data","config","el","menuIns","mount","current","createElement","Provider","value","className","style","zIndex","onClick","e","stopPropagation","unmountComponentAtNode","parentElement","removeChild","onContextMenu","preventDefault","ContextMenuComponentHOC","ContextMenu","open","contextMenuIns","createRef","parentEl","Object","assign","width","maskClosable","document","body","appendChild","render","close"],"mappings":"OAAOA,eAAgB,oBAChBC,OAASC,WAAYC,oBAAqBC,MAAqB,KAAP,eACxDC,aAAc,mBACZC,eAA6C,KAAtB,8BACzBC,SAAU,SACjB,IAAIC,eAAiB,wBACjBC,qBAAuB,SAAUC,EAAOC,GACxC,IAAIC,EAAKF,EAAMG,KAAMA,EAAc,KAAA,IAAPD,EAAgB,GAAKA,EAAIE,EAASJ,EAAMI,OAAQC,EAAKL,EAAMK,GACnFC,EAAUZ,OAAO,IAAI,EAoBzB,OAHAD,oBAAoBQ,EAAK,WAAc,MAAO,CAC1CM,MAAO,WAAc,IAAIL,EAAI,OAAO,OAACA,EAAKI,EAAQE,SAAqC,KAAA,EAASN,EAAGK,MAAM,CAAG,CAC/G,CAAG,CAAC,EACGhB,MAAMkB,cAAcb,gBAAgBc,SAAU,CAAEC,MAAO,CACvDP,OAAQA,EACRC,GAAIA,CACR,CAAE,EACFd,MAAMkB,cAAc,MAAO,CAAEG,UAAWtB,WAAWQ,cAAc,EAAGe,MAAO,CAAEC,OAAQ,KAAS,EAAGC,QAvBrG,SAAiBC,GAEbA,EAAEC,gBAAgB,EACPtB,SAASuB,uBAAuBb,CAAE,GAEzC,OAACH,EAAKG,MAAAA,EAA+B,KAAA,EAASA,EAAGc,gBAAoDjB,EAAGkB,YAAYf,CAAE,CAE9H,EAgBuHgB,cAfvH,SAAuBL,GAEnBA,EAAEM,eAAe,EACN3B,SAASuB,uBAAuBb,CAAE,GAEzC,OAACH,EAAKG,MAAAA,EAA+B,KAAA,EAASA,EAAGc,gBAAoDjB,EAAGkB,YAAYf,CAAE,CAE9H,CAQoJ,EAC5Id,MAAMkB,cAAcZ,KAAM,CAAEM,KAAMA,EAAMS,UAAWR,EAAOQ,UAAWC,MAAOT,EAAOS,MAAOZ,IAAKK,CAAQ,CAAC,CAAC,CAAE,CACvH,EACIiB,wBAA0B/B,WAAWO,oBAAoB,EACzDyB,YAAc,CAuBdC,KAAM,SAAUtB,EAAMC,GAClB,IAAIsB,EAAiBnC,MAAMoC,UAAU,EAEjCC,GADJxB,EAASyB,OAAOC,OAAO,CAAEC,MAAO,IAAKC,aAAc,CAAA,CAAK,EAAG5B,CAAM,EAClD6B,SAASxB,cAAc,KAAK,GAG3C,OAFAwB,SAASC,KAAKC,YAAYP,CAAQ,EAClCjC,SAASyC,OAAO7C,MAAMkB,cAAcc,wBAAyB,CAAEpB,KAAMA,EAAMC,OAAQA,EAAQC,GAAIuB,EAAU3B,IAAKyB,CAAe,CAAC,EAAGE,EAAU,WAAc,IAAI1B,EAAI,OAAO,OAACA,EAAKwB,EAAelB,SAAqC,KAAA,EAASN,EAAGK,MAAM,CAAG,CAAC,EACjPqB,CACX,EACAS,MAAO,SAAUhC,GACFV,SAASuB,uBAAuBb,CAAE,GAEzCA,EAAGc,cAAcC,YAAYf,CAAE,CAEvC,CACJ,iBACemB"}