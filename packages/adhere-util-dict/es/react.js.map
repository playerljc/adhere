{"version":3,"file":"react.js","sources":["react.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React, { forwardRef, useState } from 'react';\r\nimport Suspense from '@baifendian/adhere-ui-suspense';\r\nimport Dict from './dict';\r\n/**\r\n * init - 初始化字典对应的组件\r\n */\r\nexport function init() {\r\n    Object.keys(Dict.handlers).forEach(function (key) {\r\n        if (DictReactComponents[key])\r\n            return;\r\n        var value = Dict.value[key].value;\r\n        // 除了Promise类型\r\n        if (!value.then) {\r\n            DictReactComponents[key] = function (_a) {\r\n                var children = _a.children;\r\n                return children === null || children === void 0 ? void 0 : children(Dict.value[key].value);\r\n            };\r\n        }\r\n        // Promise类型\r\n        else {\r\n            DictReactComponents[key] = forwardRef(function (_a, ref) {\r\n                var children = _a.children, firstLoading = _a.firstLoading, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty;\r\n                var _b = useState(), data = _b[0], setData = _b[1];\r\n                var fetchData = function () { return Dict.value[key].value.then(function (res) { return setData(res); }); };\r\n                var props = {};\r\n                if (firstLoading)\r\n                    props.firstLoading = firstLoading;\r\n                if (renderEmpty)\r\n                    props.renderEmpty = renderEmpty;\r\n                if (isEmpty)\r\n                    props.isEmpty = isEmpty;\r\n                return (React.createElement(Suspense.ASync, __assign({ ref: ref, fetchData: fetchData }, props, { isEmpty: function () { return data === null || data === undefined || (isEmpty === null || isEmpty === void 0 ? void 0 : isEmpty(data)); } }), children === null || children === void 0 ? void 0 : children(data)));\r\n            });\r\n        }\r\n    });\r\n}\r\n/**\r\n * Components - 字典对用的React组件\r\n * 调用init后会自动填充\r\n */\r\nvar DictReactComponents = {};\r\nexport default DictReactComponents;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","forwardRef","useState","Suspense","Dict","init","keys","handlers","forEach","key","DictReactComponents","value","then","_a","ref","children","firstLoading","isEmpty","renderEmpty","_b","data","setData","props","createElement","ASync","fetchData","res"],"mappings":"AAAA,IAAIA,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE7C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAC1DN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,CACX,GACgBU,MAAMb,KAAMO,SAAS,CACzC,SACOO,OAASC,WAAYC,QAAuB,KAAP,eACrCC,aAAc,wCACdC,SAAU,SAIV,SAASC,OACZlB,OAAOmB,KAAKF,KAAKG,QAAQ,EAAEC,QAAQ,SAAUC,GACrCC,oBAAoBD,KAEZL,KAAKO,MAAMF,GAAKE,MAEjBC,KAQPF,oBAAoBD,GAAOR,WAAW,SAAUY,EAAIC,GAChD,IAAIC,EAAWF,EAAGE,SAAUC,EAAeH,EAAGG,aAAcC,EAAUJ,EAAGI,QAASC,EAAcL,EAAGK,YAC/FC,EAAKjB,SAAS,EAAGkB,EAAOD,EAAG,GAAIE,EAAUF,EAAG,GAE5CG,EAAQ,GAOZ,OANIN,IACAM,EAAMN,aAAeA,GACrBE,IACAI,EAAMJ,YAAcA,GACpBD,IACAK,EAAML,QAAUA,GACZjB,MAAMuB,cAAcpB,SAASqB,MAAOvC,SAAS,CAAE6B,IAAKA,EAAKW,UARjD,WAAc,OAAOrB,KAAKO,MAAMF,GAAKE,MAAMC,KAAK,SAAUc,GAAO,OAAOL,EAAQK,CAAG,CAAG,CAAC,CAAG,CAQpB,EAAGJ,EAAO,CAAEL,QAAS,WAAc,OAAOG,MAAAA,IAAwCH,MAAAA,EAAyC,KAAA,EAASA,EAAQG,CAAI,EAAI,CAAE,CAAC,EAAGL,MAAAA,EAA2C,KAAA,EAASA,EAASK,CAAI,CAAE,CACvT,CAAC,EAnBDV,oBAAoBD,GAAO,SAAUI,GAC7BE,EAAWF,EAAGE,SAClB,OAAOA,MAAAA,EAA2C,KAAA,EAASA,EAASX,KAAKO,MAAMF,GAAKE,KAAK,CAC7F,EAkBR,CAAC,CACL,CAKA,IAAID,oBAAsB,kBACXA,2BAnCCL,IAmCkB"}