{"version":3,"file":"react.js","sources":["react.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { useUpdateLayoutEffect } from 'ahooks';\r\nimport React, { forwardRef, useState } from 'react';\r\nimport Suspense from '@baifendian/adhere-ui-suspense';\r\nimport Util from '@baifendian/adhere-util';\r\nimport Dict from './dict';\r\n/**\r\n * set - 设置字典对应的组件\r\n * @param {string} key - 字典名称\r\n * @return {void}\r\n */\r\nexport function set(key) {\r\n    if (DictReactComponents[key])\r\n        return;\r\n    var value = Dict.value[key].value;\r\n    // isFunction\r\n    if (Util.isFunction(value)) {\r\n        DictReactComponents[key] = forwardRef(function (_a, ref) {\r\n            var children = _a.children, firstLoading = _a.firstLoading, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty, args = _a.args, isUseMemo = _a.isUseMemo;\r\n            var _b = useState(), data = _b[0], setData = _b[1];\r\n            var props = {};\r\n            if (firstLoading)\r\n                props.firstLoading = firstLoading;\r\n            if (renderEmpty)\r\n                props.renderEmpty = renderEmpty;\r\n            if (isEmpty)\r\n                props.isEmpty = isEmpty;\r\n            var fetchData = function () {\r\n                var _a;\r\n                Dict.handlers[key].isUseMemo = isUseMemo || false;\r\n                var result = (_a = Dict.value[key]).value.apply(_a, (args || []));\r\n                if (result.then) {\r\n                    return result.then(function (res) {\r\n                        setData(res);\r\n                        return res;\r\n                    });\r\n                }\r\n                else {\r\n                    setData(result);\r\n                    return Promise.resolve(result);\r\n                }\r\n            };\r\n            useUpdateLayoutEffect(function () {\r\n                fetchData();\r\n            }, args || []);\r\n            return (React.createElement(Suspense.ASync, __assign({ ref: ref, fetchData: fetchData }, props, { isEmpty: function () { return data === null || data === undefined || (isEmpty === null || isEmpty === void 0 ? void 0 : isEmpty(data)); } }), children === null || children === void 0 ? void 0 : children(data)));\r\n        });\r\n    }\r\n    // isNotFunction\r\n    else {\r\n        // isNotPromise\r\n        if (!value.then) {\r\n            DictReactComponents[key] = function (_a) {\r\n                var children = _a.children;\r\n                return children === null || children === void 0 ? void 0 : children(Dict.value[key].value);\r\n            };\r\n        }\r\n        // Promise\r\n        else {\r\n            DictReactComponents[key] = forwardRef(function (_a, ref) {\r\n                var children = _a.children, firstLoading = _a.firstLoading, isEmpty = _a.isEmpty, renderEmpty = _a.renderEmpty;\r\n                var _b = useState(), data = _b[0], setData = _b[1];\r\n                var props = {};\r\n                if (firstLoading)\r\n                    props.firstLoading = firstLoading;\r\n                if (renderEmpty)\r\n                    props.renderEmpty = renderEmpty;\r\n                if (isEmpty)\r\n                    props.isEmpty = isEmpty;\r\n                var fetchData = function () {\r\n                    return Dict.value[key].value.then(function (res) {\r\n                        setData(res);\r\n                        return res;\r\n                    });\r\n                };\r\n                return (React.createElement(Suspense.ASync, __assign({ ref: ref, fetchData: fetchData }, props, { isEmpty: function () { return data === null || data === undefined || (isEmpty === null || isEmpty === void 0 ? void 0 : isEmpty(data)); } }), children === null || children === void 0 ? void 0 : children(data)));\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Components - 字典对用的React组件\r\n * 调用init后会自动填充\r\n */\r\nvar DictReactComponents = {};\r\nexport default DictReactComponents;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","useUpdateLayoutEffect","React","forwardRef","useState","Suspense","Util","Dict","set","key","value","DictReactComponents","isFunction","_a","ref","fetchData","handlers","isUseMemo","result","args","then","res","setData","Promise","resolve","children","firstLoading","isEmpty","renderEmpty","_b","data","props","createElement","ASync"],"mappings":"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"}