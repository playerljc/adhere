"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var r in t=arguments[l])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,t,l,n){void 0===n&&(n=l);var r=Object.getOwnPropertyDescriptor(t,l);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[l]}}),Object.defineProperty(e,n,r)}:function(e,t,l,n){e[n=void 0===n?l:n]=t[l]},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)"default"!==l&&Object.prototype.hasOwnProperty.call(e,l)&&__createBinding(t,e,l);return __setModuleDefault(t,e),t},__spreadArray=function(e,t,l){if(l||2===arguments.length)for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},antd_mobile_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("antd-mobile")),antd_mobile_icons_1=require("antd-mobile-icons"),classnames_1=__importDefault(require("classnames")),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-mobile-ui-auto-complete",AutoComplete=function(e){function t(){return!_.length}function r(e){return e[null!=f?f:"id"]}function a(e){return e[null!=p?p:"value"]}function l(e){return null!=(e=e[null!=m?m:"label"])?e:null}function n(l){var t,e;E(function(e){return e.filter(function(e){var t;return(null!=(t=a(e))?t:r(e))!==l})}),null!=b&&b((t=l,null!=(e=null==(e=null==v?void 0:v.filter)?void 0:e.call(v,function(e){return e!==t}))?e:[]))}var u=e.className,c=e.style,i=e.searchBarProps,o=e.checkListProps,s=e.loadData,_=e.searchDataSource,f=e.rowKey,d=e.renderItem,m=e.labelProp,p=e.valueProp,v=e.value,b=e.onChange,e=e.renderEmpty,h=(0,react_1.useState)(""),y=h[0],g=h[1],h=(0,react_1.useState)([]),P=h[0],E=h[1];return(0,react_1.useEffect)(function(){var e;E(null!=(e=null==(e=null==v?void 0:v.map)?void 0:e.call(v,function(l){var e;return null==(e=null==_?void 0:_.find)?void 0:e.call(_,function(e){var t;return(null!=(t=a(e))?t:r(e))===l})}))?e:[])},[_,v]),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,null!=u?u:""),style:null!=c?c:{}},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-search-bar")},react_1.default.createElement(antd_mobile_1.SearchBar,__assign({placeholder:adhere_util_intl_1.default.v("输入文字过滤选项"),value:y,onChange:function(e){e||null!=s&&s(""),g(e)},onSearch:function(){null!=s&&s(y)}},null!=i?i:{}))),react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-body")},t()&&(null!=(h=null==e?void 0:e())?h:react_1.default.createElement(antd_mobile_1.ErrorBlock,{status:"empty"})),!t()&&react_1.default.createElement(antd_mobile_1.CheckList,__assign({},null!=o?o:{},{value:v,onChange:function(e){E(function(n){return e.map(function(l){var e,t;return null==(t=null==(e=__spreadArray(__spreadArray([],_,!0),n,!0))?void 0:e.find)?void 0:t.call(e,function(e){var t;return(null!=(t=a(e))?t:r(e))===l})})}),null!=b&&b(e)}}),(null!=_?_:[]).map(function(e,t){t=d?d(e,t):{value:null!=(t=a(e))?t:r(e),children:null!=m?m:react_1.default.createElement("span",null,l(e))};return react_1.default.createElement(antd_mobile_1.CheckList.Item,__assign({key:r(e)},null!=t?t:{}))}))),!(null==v||!v.length)&&react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-result")},null==P?void 0:P.map(function(e,t){return react_1.default.createElement("div",{key:r(e),className:"".concat(selectorPrefix,"-result-item")},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-result-item-close"),onClick:function(){return n(null==v?void 0:v[t])}},react_1.default.createElement(antd_mobile_icons_1.CloseCircleFill,null)),react_1.default.createElement("span",null,l(e)))})))};exports.default=(0,react_1.memo)(AutoComplete);
//# sourceMappingURL=AutoComplete.js.map
