import _CloseCircleFill from"antd-mobile-icons/es/CloseCircleFill";import _SearchBar from"antd-mobile/es/components/search-bar";import _ErrorBlock from"antd-mobile/es/components/error-block";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var l,r=1,n=arguments.length;r<n;r++)for(var t in l=arguments[r])Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,l,r){if(r||2===arguments.length)for(var n,t=0,a=l.length;t<a;t++)!n&&t in l||((n=n||Array.prototype.slice.call(l,0,t))[t]=l[t]);return e.concat(n||Array.prototype.slice.call(l))};import classNames from"classnames";import React,{memo,useEffect,useState}from"react";import Intl from"@baifendian/adhere-util-intl";var selectorPrefix="adhere-mobile-ui-auto-complete",AutoComplete=memo(function(e){function l(){return!(null!=s&&s.length)}function t(e){return e[null!=m?m:"id"]}function a(e){return e[null!=d?d:"value"]}function n(r){var l,e;A(function(e){return e.filter(function(e){var l;return(null!=(l=a(e))?l:t(e))!==r})}),null!=v&&v((l=r,null!=(e=null==(e=null==p?void 0:p.filter)?void 0:e.call(p,function(e){return e!==l}))?e:[]))}var r=e.className,o=e.style,c=e.placeholder,u=e.searchBarProps,i=e.loadData,s=e.searchDataSource,m=e.rowKey,f=e.labelProp,d=e.valueProp,p=e.value,v=e.onChange,h=e.renderResultItem,_=e.renderEmpty,y=e.showResult,y=void 0===y||y,e=e.children,E=useState(""),C=E[0],b=E[1],E=useState([]),g=E[0],A=E[1];return useEffect(function(){A(function(n){var e;return null!=(e=null==(e=null==p?void 0:p.map)?void 0:e.call(p,function(r){var e,l;return null==(l=null==(e=__spreadArray(__spreadArray([],null!=s?s:[],!0),n,!0))?void 0:e.find)?void 0:l.call(e,function(e){var l;return(null!=(l=a(e))?l:t(e))===r})}))?e:[]})},[s,p]),React.createElement("div",{className:classNames(selectorPrefix,null!=r?r:""),style:null!=o?o:{}},React.createElement("div",{className:"".concat(selectorPrefix,"-search-bar")},React.createElement(_SearchBar,__assign({placeholder:null!=c?c:Intl.v("输入文字过滤选项"),value:C,onChange:function(e){e||null!=i&&i(""),b(e)},onSearch:function(){null!=i&&i(C)}},null!=u?u:{}))),React.createElement("div",{className:"".concat(selectorPrefix,"-body")},l()&&(null!=(E=null==_?void 0:_())?E:React.createElement(_ErrorBlock,{status:"empty"})),!l()&&(null==e?void 0:e({value:p,onChange:function(e){A(function(n){return e.map(function(r){var e,l;return null==(l=null==(e=__spreadArray(__spreadArray([],null!=s?s:[],!0),n,!0))?void 0:e.find)?void 0:l.call(e,function(e){var l;return(null!=(l=a(e))?l:t(e))===r})})}),null!=v&&v(e)},searchDataSource:__spreadArray([],null!=s?s:[],!0)}))),y&&!(null==p||!p.length)&&React.createElement("div",{className:"".concat(selectorPrefix,"-result")},null==g?void 0:g.map(function(e,l){var r;return React.createElement("div",{key:t(e),className:"".concat(selectorPrefix,"-result-item")},React.createElement("div",{className:"".concat(selectorPrefix,"-result-item-close"),onClick:function(){return n(null==p?void 0:p[l])}},React.createElement(_CloseCircleFill,null)),null!=(r=null==h?void 0:h(e))?r:React.createElement("span",null,null!=(r=(r=e)[null!=f?f:"label"])?r:null))})))});AutoComplete.displayName="AutoComplete";export default AutoComplete;
//# sourceMappingURL=AutoComplete.js.map
