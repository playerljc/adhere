var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};import{ERROR_MESSAGE}from"../Constent";import Request from"../Request";import Response from"../Response";var Fetch=function(){function e(e,t){this.source=e,this.origin=t}return e.prototype.send=function(i,a,e,t){var u=this;return new Promise(function(r,n){function s(e){try{var t=new Response(JSON.parse(e.data));e.origin===a&&e.source===i&&o.getRequestId()===t.getRequestId()&&(u.source.removeEventListener("message",s),(500===t.getStatusCode()?n:r)(t))}catch(e){console.warn(e)}}var o=new Request({pathname:e,headers:__assign(__assign({},(null==t?void 0:t.headers)||{}),{origin:u.origin,referer:u.source instanceof Window?u.source.location.href:""}),statusCode:0,stateMessage:ERROR_MESSAGE,body:null==t?void 0:t.data});u.source.addEventListener("message",s);try{i.postMessage(JSON.stringify(o),a)}catch(e){console.error(e)}})},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.delete=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e}();export default Fetch;
//# sourceMappingURL=index.js.map
