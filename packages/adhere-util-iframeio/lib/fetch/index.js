"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Constent_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("../Constent")),Request_1=__importDefault(require("../Request")),Response_1=__importDefault(require("../Response")),Fetch=function(){function e(e,t){this.source=e,this.origin=t}return e.prototype.send=function(i,a,t,u){var p=this;return new Promise(function(r,s){function n(e){try{var t=new Response_1.default(JSON.parse(e.data));e.origin===a&&e.source===i&&o.getRequestId()===t.getRequestId()&&(p.source.removeEventListener("message",n),(500===t.getStatusCode()?s:r)(t))}catch(e){console.warn(e)}}var e,o=new Request_1.default({pathname:t,headers:__assign(__assign({},null!=(e=null==u?void 0:u.headers)?e:{}),{origin:p.origin,referer:p.source instanceof Window?p.source.location.href:""}),statusCode:0,stateMessage:Constent_1.ERROR_MESSAGE,body:null==u?void 0:u.data});p.source.addEventListener("message",n);try{i.postMessage(JSON.stringify(o),a)}catch(e){console.error(e)}})},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.delete=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e}();exports.default=Fetch;
//# sourceMappingURL=index.js.map
