"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var Response_1=__importDefault(require("../Response")),Request_1=__importDefault(require("../Request")),Constent_1=require("../Constent"),Fetch=function(){function e(e,t){this.source=e,this.origin=t}return e.prototype.send=function(i,u,e,t){var a=this;return new Promise(function(s,n){function r(e){var t=new Response_1.default(e.data);t.setRequestId(e.data.requestId),e.origin===u&&e.source===i&&o.getRequestId()===t.getRequestId()&&(a.source.removeEventListener("message",r),(500!==t.getStatusCode()?s:n)(t))}var o=new Request_1.default({pathname:e,headers:__assign(__assign({},(null==t?void 0:t.headers)||{}),{origin:a.origin,referer:a.source instanceof Window?a.source.location.href:""}),statusCode:0,stateMessage:Constent_1.ERROR_MESSAGE,body:null==t?void 0:t.data});a.source.addEventListener("message",r),i.postMessage(o,u)})},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e.prototype.delete=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.send.apply(this,e)},e}();exports.default=Fetch;
//# sourceMappingURL=index.js.map
