var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(o){for(var a,l=1,e=arguments.length;l<e;l++)for(var t in a=arguments[l])Object.prototype.hasOwnProperty.call(a,t)&&(o[t]=a[t]);return o}).apply(this,arguments)};import dayjs from"dayjs";import"dayjs/locale/ar";import"dayjs/locale/en";import"dayjs/locale/pt";import"dayjs/locale/zh";import LocalizedFormat from"dayjs/plugin/localizedFormat";import relativeTime from"dayjs/plugin/relativeTime";import React,{memo}from"react";import ConditionalRender from"@baifendian/adhere-ui-conditionalrender";import Resource from"@baifendian/adhere-util-resource";dayjs.extend(LocalizedFormat),dayjs.extend(relativeTime);var customLocaleFormats={zh:{Q:"MM/DD",q:"M/D"},en:{Q:"DD/MM",q:"D/M"},pt:{Q:"DD/MM",q:"D/M"},ar:{Q:"MMMM/D"}},keys=Object.keys(Resource.Dict.handlers).filter(function(o){return o.startsWith("ResourceMomentFormat")}),globalLocal="zh",Components={dayjs:dayjs,setGlobalLocal:function(o){globalLocal=dayjs.locale(o)},setCustomLocaleFormats:function(o){return __assign(__assign({},customLocaleFormats),null!=o?o:{})}};keys.forEach(function(i){var o=i.substring("ResourceMomentFormat".length);Components["DateDisplay".concat(o)]=memo(function(o){var a=o.value,l=o.split1,e=void 0===l?"-":l,l=o.split2,t=void 0===l?":":l,l=o.errorUI,n=void 0===l?null:l,r=Resource.Dict.value[i].value;return React.createElement(ConditionalRender,{conditional:!!a,noMatch:function(){return n}},function(){return dayjs(a).format(r instanceof Function?r(e,t):r)})}),Components["DateDisplay".concat(o)].toString=function(o){var a=o.value,l=o.split1,l=void 0===l?"-":l,o=o.split2,o=void 0===o?":":o,e=Resource.Dict.value[i].value;return a?dayjs(a).format(e instanceof Function?e(l,o):e):""}}),Components.DateDisplayFromNow=memo(function(o){var l=o.value,e=o.locale,o=o.now,t=void 0!==o&&o;return React.createElement(ConditionalRender,{conditional:!!l},function(){var o,a;return null==(a=null==(o=null==(o=null==(a=dayjs(l))?void 0:a.locale)?void 0:o.call(a,null!=globalLocal?globalLocal:e))?void 0:o.fromNow)?void 0:a.call(o,t)})}),Components.DateDisplayFromNow.toString=function(o){var a=o.value,l=o.locale,o=o.now,o=void 0!==o&&o;return a?dayjs(a).locale(null!=globalLocal?globalLocal:l).fromNow(o):""},Components.DateDisplayToNow=memo(function(o){var a=o.value,l=o.locale,o=o.now,e=void 0!==o&&o;return React.createElement(ConditionalRender,{conditional:!!a},function(){return dayjs(a).locale(null!=globalLocal?globalLocal:l).toNow(e)})}),Components.DateDisplayToNow.toString=function(o){var a=o.value,l=o.locale,o=o.now,o=void 0!==o&&o;return a?dayjs(a).locale(null!=globalLocal?globalLocal:l).toNow(o):""},Components.DateDisplay=memo(function(o){var a=o.value,l=o.locale,o=o.format,e=null!=l?l:globalLocal,t=null!=(l=null==(l=null==customLocaleFormats?void 0:customLocaleFormats[e])?void 0:l[o])?l:o;return React.createElement(ConditionalRender,{conditional:!!a},function(){return dayjs(a).locale(e).format(t)})}),Components.DateDisplay.toString=function(o){var a=o.value,l=o.locale,o=o.format,l=null!=l?l:globalLocal,e=null!=(e=null==(e=null==customLocaleFormats?void 0:customLocaleFormats[l])?void 0:e[o])?e:o;return a?dayjs(a).locale(l).format(e):""};export default Components;
//# sourceMappingURL=datedisplay.js.map
