{"version":3,"file":"datedisplay.js","sources":["datedisplay.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar dayjs_1 = __importDefault(require(\"dayjs\"));\r\nvar adhere_1 = require(\"@baifendian/adhere\");\r\nrequire(\"dayjs/locale/zh-cn\");\r\nrequire(\"dayjs/locale/pt\");\r\nrequire(\"dayjs/locale/en\");\r\nvar relativeTime_1 = __importDefault(require(\"dayjs/plugin/relativeTime\"));\r\nvar localizedFormat_1 = __importDefault(require(\"dayjs/plugin/localizedFormat\"));\r\ndayjs_1.default.extend(localizedFormat_1.default);\r\ndayjs_1.default.extend(relativeTime_1.default);\r\nvar keys = Object.keys(adhere_1.Resource.Dict.handlers).filter(function (dictName) {\r\n    return dictName.startsWith('ResourceMomentFormat');\r\n});\r\nvar Components = {};\r\n// 字典的组件\r\nkeys.forEach(function (key) {\r\n    var name = key.substring('ResourceMomentFormat'.length);\r\n    Components[\"DateDisplay\" + name] = function (_a) {\r\n        var value = _a.value, _b = _a.split1, split1 = _b === void 0 ? '-' : _b, _c = _a.split2, split2 = _c === void 0 ? ':' : _c, _d = _a.errorUI, errorUI = _d === void 0 ? null : _d;\r\n        var dict = adhere_1.Resource.Dict.value[key].value;\r\n        return (react_1.default.createElement(adhere_1.ConditionalRender, { conditional: !!value, noMatch: function () { return errorUI; } }, function () { return dayjs_1.default(value).format(dict instanceof Function ? dict(split1, split2) : dict); }));\r\n    };\r\n});\r\n/**\r\n * DateDisplayFromNow\r\n * @constructor\r\n * @classdesc 返回现在到当前实例的相对时间\r\n */\r\nComponents[\"DateDisplayFromNow\"] = function (_a) {\r\n    var value = _a.value, _b = _a.locale, locale = _b === void 0 ? 'zh-cn' : _b;\r\n    return (react_1.default.createElement(adhere_1.ConditionalRender, { conditional: !!value }, function () { return dayjs_1.default(value).locale(locale).fromNow(); }));\r\n};\r\n/**\r\n * DateDisplayToNow\r\n * @constructor\r\n * @classdesc 返回当前实例到现在的相对时间\r\n */\r\nComponents[\"DateDisplayToNow\"] = function (_a) {\r\n    var value = _a.value, _b = _a.locale, locale = _b === void 0 ? 'zh-cn' : _b;\r\n    return (react_1.default.createElement(adhere_1.ConditionalRender, { conditional: !!value }, function () { return dayjs_1.default(value).locale(locale).toNow(); }));\r\n};\r\n/**\r\n * DateDisplay\r\n * @constructor\r\n */\r\nComponents[\"DateDisplay\"] = function (_a) {\r\n    var value = _a.value, _b = _a.locale, locale = _b === void 0 ? 'zh-cn' : _b, format = _a.format;\r\n    return (react_1.default.createElement(adhere_1.ConditionalRender, { conditional: !!value }, function () { return dayjs_1.default(value).locale(locale).format(format); }));\r\n};\r\n// 本地\r\nvar formats = ['LT', 'LTS', 'L', 'LL', 'LLL', 'LLLL', 'l', 'll', 'lll', 'llll'];\r\nformats.forEach(function (format) {\r\n    Components[\"DateDisplay\" + format] = function (props) {\r\n        var Com = Components['DateDisplay'];\r\n        return react_1.default.createElement(Com, __assign({}, props, { format: format }));\r\n    };\r\n});\r\nexports.default = Components;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","dayjs_1","adhere_1","relativeTime_1","localizedFormat_1","extend","keys","Resource","Dict","handlers","filter","dictName","startsWith","Components","forEach","key","name","substring","_a","_b","split1","_c","split2","_d","errorUI","dict","createElement","ConditionalRender","conditional","noMatch","format","Function","locale","fromNow","toNow","formats","props","Com"],"mappings":"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"}