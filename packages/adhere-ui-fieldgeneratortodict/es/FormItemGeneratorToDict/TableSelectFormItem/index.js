var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};import React,{useEffect,useState}from"react";import SelectFormItem from"../SelectFormItem";import TableFormItem from"../TableFormItem";var TableSelectFormItem=function(e){var t=e.dataSource,n=__rest(e,["dataSource"]),e=useState(""),r=e[0],o=e[1],e=useState(n.value?[n.value]:[]),a=e[0],l=e[1],e=useState(n.value?t.find(function(e){return e[n.rowKey||"id"]===n.value}):[]),u=e[0],c=e[1];return useEffect(function(){n.value?(l([n.value]),c([t.find(function(e){return e[n.rowKey||"id"]===n.value})])):(l([]),c([]))},[n.value]),React.createElement(SelectFormItem,{selectProps:__assign({value:n.value,dropdownRender:function(){var e=r?t.filter(function(e){return-1!==e[n.labelKey||"name"].indexOf(r)}):t;return React.createElement(TableFormItem,__assign({rowSelection:{type:"radio",selectedRowKeys:a,selectedRows:u,onChange:function(e,t){l(e),c(t),null!=(t=null==n?void 0:n.onChange)&&t.call(n,e.length?e[0]:"")}}},n,{dataSource:e}))},onChange:function(e){var t;null!=(t=null==n?void 0:n.onChange)&&t.call(n,e)},filterOption:function(){return!1},onSearch:function(e){return o(e)},onBlur:function(){o("")},onClear:function(){o("")}},n.selectProps||{}),dataSource:t.map(function(e){return{label:e[n.labelKey||"name"],value:e[n.rowKey||"id"]}})})};export default TableSelectFormItem;
//# sourceMappingURL=index.js.map
