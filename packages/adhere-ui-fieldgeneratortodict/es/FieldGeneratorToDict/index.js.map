{"version":3,"file":"index.js","sources":["FieldGeneratorToDict/index.js"],"sourcesContent":["import ArrayEntityValueHOC from './ArrayEntityValueHOC';\nimport AsyncTreeEntityValueHOC from './AsyncTreeEntityValueHOC';\nimport Components from './Components';\nimport ItemFactory from './ItemFactory';\nimport TreeEntityValueHOC from './TreeEntityValueHOC';\nimport './fields/AutoComplete';\nimport './fields/Breadcrumb';\nimport './fields/Cascader';\nimport './fields/CheckBox';\nimport './fields/Dropdown';\nimport './fields/List';\nimport './fields/Mentions';\nimport './fields/Menu';\nimport './fields/MobileCascaderView';\nimport './fields/MobileCheckList';\nimport './fields/MobileCheckbox';\nimport './fields/MobileList';\nimport './fields/MobileRadio';\nimport './fields/MobileSelector';\nimport './fields/Radio';\nimport './fields/Segmented';\nimport './fields/Select';\nimport './fields/Steps';\nimport './fields/Table';\nimport './fields/Tag';\nimport './fields/Timeline';\nimport './fields/Transfer';\nimport './fields/TreeSelect';\nexport var validatorNormal = function validatorNormal(message) {\n  return {\n    validator: function validator(_, value) {\n      if (!value) {\n        return Promise.reject(message);\n      }\n      return Promise.resolve();\n    }\n  };\n};\nexport var validatorMulti = function validatorMulti(message) {\n  return {\n    validator: function validator(_, value) {\n      if (!value) {\n        return Promise.reject(message);\n      }\n      if (Array.isArray(value) && !value.length) {\n        return Promise.reject(message);\n      }\n      return Promise.resolve();\n    }\n  };\n};\nvar dictComponentHash = Object.entries(Components).reduce(function (ret, entry) {\n  var componentName = entry[0],\n    functionNameHash = entry[1];\n  var functionNameArray = Object.keys(functionNameHash);\n  functionNameArray.forEach(function (functionName) {\n    var dictComponentName = functionNameHash[functionName];\n    ret[dictComponentName] = {\n      componentName: componentName,\n      functionName: functionName\n    };\n  });\n  return ret;\n}, {});\nvar ItemNames = Object.entries(Components).reduce(function (ret, entry) {\n  var componentName = entry[0],\n    functionNameHash = entry[1];\n  var functionNameArray = Object.keys(functionNameHash);\n  ret.set(componentName, functionNameArray);\n  return ret;\n}, new Map());\n/**\n * 生成字典组件名\n * @param dictName - 字典名\n * @param componentName - 组件名 (如: SelectFormItem)，可通过 Components 获取\n * @example\n * ```js\n * const dictComponentName = genDictComponentName('SystemUsers', Components.Select.FormItem);\n * ```\n */\nvar genDictComponentName = function genDictComponentName(dictName, componentName) {\n  return \"\".concat(dictName).concat(componentName);\n};\n/**\n * 获取字典组件\n * @param dictName - 字典名\n * @param componentName - 组件名 (如: SelectFormItem)，可通过 Components 获取\n * @returns\n */\nvar getDictComponent = function getDictComponent(dictName, componentName) {\n  var _a = dictComponentHash[componentName],\n    itemName = _a.componentName,\n    functionName = _a.functionName;\n  return ItemFactory({\n    dictName: dictName,\n    itemName: itemName,\n    functionName: functionName\n  });\n};\nexport { Components, ItemNames, getDictComponent, genDictComponentName, ArrayEntityValueHOC, TreeEntityValueHOC, AsyncTreeEntityValueHOC };\nvar ProxyComponent = new Proxy({}, {\n  get: function get(target, p, receiver) {\n    // p\n    // p = SystemAppBasicLayoutRectifyTransferListSectionSelectDynamicMultiFormItem\n    // p = SystemAppBasicLayoutRectifyTransferListSectionSelectDynamic + MultiFormItem\n    // (业务名 + 组件名 + 功能名)\n    // p = SystemAppBasicLayoutRectifyTransferListSection + SelectDynamic + MultiFormItem\n    var _a;\n    if (p === '$$typeof') return Reflect.get(target, p, receiver);\n    // 存在则返回\n    if (p in target && !!target[p]) return Reflect.get(target, p, receiver);\n    // 组件名\n    var itemName;\n    // 功能名\n    var functionName;\n    // 根据 p 进行匹配的结果\n    var matches = [];\n    // 所有组件名称\n    var itemNames = Array.from(ItemNames.keys());\n    var _loop_1 = function _loop_1(i) {\n      // Components的key\n      var _itemName = itemNames[i];\n      // key的值\n      var _functionNames = (_a = ItemNames.get(_itemName)) !== null && _a !== void 0 ? _a : [];\n      var _functionNameIndex = _functionNames.findIndex(function (_functionName) {\n        var concatName = \"\".concat(_itemName).concat(_functionName);\n        return p.endsWith(concatName);\n      });\n      if (_functionNameIndex !== -1) {\n        itemName = _itemName;\n        functionName = _functionNames[_functionNameIndex];\n        matches.push({\n          itemName: itemName,\n          functionName: functionName\n        });\n      }\n    };\n    // loop start\n    for (var i = 0; i < itemNames.length; i++) {\n      _loop_1(i);\n    }\n    // loop end\n    // 没有匹配到\n    if (matches.length === 0) {\n      return;\n    }\n    // 匹配大于1，进行合并后的长度从大到小排序，找出最精确的匹配值\n    if (matches.length > 1) {\n      matches.sort(function (t1, t2) {\n        var str1 = \"\".concat(t1.itemName).concat(t1.functionName);\n        var str2 = \"\".concat(t2.itemName).concat(t2.functionName);\n        if (str1.length > str2.length) return -1;else if (str1.length < str2.length) return 1;else return 0;\n      });\n    }\n    itemName = matches[0].itemName;\n    functionName = matches[0].functionName;\n    // 字典名\n    var dictName = p.substring(0, p.lastIndexOf(functionName));\n    receiver[p] = ItemFactory({\n      itemName: itemName,\n      functionName: functionName,\n      dictName: dictName\n    });\n    return Reflect.get(target, p, receiver);\n  }\n});\nexport default ProxyComponent;"],"names":["ArrayEntityValueHOC","AsyncTreeEntityValueHOC","Components","ItemFactory","TreeEntityValueHOC","validatorNormal","message","validator","_","value","Promise","resolve","reject","validatorMulti","Array","isArray","length","dictComponentHash","Object","entries","reduce","ret","entry","componentName","functionNameHash","keys","forEach","functionName","dictComponentName","ItemNames","functionNameArray","set","Map","genDictComponentName","dictName","concat","getDictComponent","_a","itemName","ProxyComponent","Proxy","get","target","p","receiver","Reflect","matches","itemNames","from","i","_loop_1","_itemName","_functionNames","_functionNameIndex","findIndex","_functionName","concatName","endsWith","push","sort","t1","t2","str1","str2","substring","lastIndexOf"],"mappings":"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"}