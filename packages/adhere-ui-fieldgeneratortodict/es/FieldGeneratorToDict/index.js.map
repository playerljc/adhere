{"version":3,"file":"index.js","sources":["FieldGeneratorToDict/index.js"],"sourcesContent":["import Components from './Components';\nimport ItemFactory from './ItemFactory';\nimport './fields/AutoComplete';\nimport './fields/Breadcrumb';\nimport './fields/Cascader';\nimport './fields/CheckBox';\nimport './fields/Dropdown';\nimport './fields/List';\nimport './fields/Mentions';\nimport './fields/Menu';\nimport './fields/Radio';\nimport './fields/Segmented';\nimport './fields/Select';\nimport './fields/Steps';\nimport './fields/Table';\nimport './fields/Tag';\nimport './fields/Timeline';\nimport './fields/Transfer';\nimport './fields/TreeSelect';\nexport var validatorNormal = function validatorNormal(message) {\n  return {\n    validator: function validator(_, value) {\n      if (!value) {\n        return Promise.reject(message);\n      }\n      return Promise.resolve();\n    }\n  };\n};\nexport var validatorMulti = function validatorMulti(message) {\n  return {\n    validator: function validator(_, value) {\n      if (!value) {\n        return Promise.reject(message);\n      }\n      if (Array.isArray(value) && !value.length) {\n        return Promise.reject(message);\n      }\n      return Promise.resolve();\n    }\n  };\n};\nvar dictComponentHash = Object.entries(Components).reduce(function (ret, entry) {\n  var componentName = entry[0],\n    functionNameHash = entry[1];\n  var functionNameArray = Object.keys(functionNameHash);\n  functionNameArray.forEach(function (functionName) {\n    var dictComponentName = functionNameHash[functionName];\n    ret[dictComponentName] = {\n      componentName: componentName,\n      functionName: functionName\n    };\n  });\n  return ret;\n}, {});\nvar ItemNames = Object.entries(Components).reduce(function (ret, entry) {\n  var componentName = entry[0],\n    functionNameHash = entry[1];\n  var functionNameArray = Object.keys(functionNameHash);\n  ret.set(componentName, functionNameArray);\n  return ret;\n}, new Map());\n/**\n * 生成字典组件名\n * @param dictName - 字典名\n * @param componentName - 组件名 (如: SelectFormItem)，可通过 Components 获取\n * @example\n * ```js\n * const dictComponentName = genDictComponentName('SystemUsers', Components.Select.FormItem);\n * ```\n */\nvar genDictComponentName = function genDictComponentName(dictName, componentName) {\n  return \"\".concat(dictName).concat(componentName);\n};\n/**\n * 获取字典组件\n * @param dictName - 字典名\n * @param componentName - 组件名 (如: SelectFormItem)，可通过 Components 获取\n * @returns\n */\nvar getDictComponent = function getDictComponent(dictName, componentName) {\n  var _a = dictComponentHash[componentName],\n    itemName = _a.componentName,\n    functionName = _a.functionName;\n  return ItemFactory({\n    dictName: dictName,\n    itemName: itemName,\n    functionName: functionName\n  });\n};\nexport { Components, ItemNames, getDictComponent, genDictComponentName };\nvar ProxyComponent = new Proxy({}, {\n  get: function get(target, p, receiver) {\n    // p\n    // p = SystemAppBasicLayoutRectifyTransferListSectionSelectDynamicMultiFormItem\n    // p = SystemAppBasicLayoutRectifyTransferListSectionSelectDynamic + MultiFormItem\n    // (业务名 + 组件名 + 功能名)\n    // p = SystemAppBasicLayoutRectifyTransferListSection + SelectDynamic + MultiFormItem\n    var _a;\n    if (p === '$$typeof') return Reflect.get(target, p, receiver);\n    // 存在则返回\n    if (p in target && !!target[p]) return Reflect.get(target, p, receiver);\n    // 组件名\n    var itemName;\n    // 功能名\n    var functionName;\n    var itemNames = Array.from(ItemNames.keys());\n    var _loop_1 = function _loop_1(i) {\n      if (p === 'SystemFilterBookListAutoCompleteSelectStandard') {\n        debugger;\n      }\n      // Components的key\n      var _itemName = itemNames[i];\n      // key的值\n      var _functionNames = (_a = ItemNames.get(_itemName)) !== null && _a !== void 0 ? _a : [];\n      var _functionNameIndex = _functionNames.findIndex(function (_functionName) {\n        var concatName = \"\".concat(_itemName).concat(_functionName);\n        return p.endsWith(concatName);\n      });\n      if (_functionNameIndex !== -1) {\n        itemName = _itemName;\n        functionName = _functionNames[_functionNameIndex];\n        return \"break\";\n      }\n    };\n    // console.log('p', 'SystemFilterBookListAutoCompleteSelectStandard');\n    for (var i = 0; i < itemNames.length; i++) {\n      var state_1 = _loop_1(i);\n      if (state_1 === \"break\") break;\n    }\n    console.log('itemName', itemName);\n    console.log('functionName', functionName);\n    if (!itemName || !functionName) return;\n    // 字典名\n    var dictName = p.substring(0, p.lastIndexOf(functionName));\n    receiver[p] = ItemFactory({\n      itemName: itemName,\n      functionName: functionName,\n      dictName: dictName\n    });\n    return Reflect.get(target, p, receiver);\n  }\n});\nexport default ProxyComponent;"],"names":["Components","ItemFactory","validatorNormal","message","validator","_","value","Promise","resolve","reject","validatorMulti","Array","isArray","length","dictComponentHash","Object","entries","reduce","ret","entry","componentName","functionNameHash","keys","forEach","functionName","dictComponentName","ItemNames","functionNameArray","set","Map","genDictComponentName","dictName","concat","getDictComponent","_a","itemName","ProxyComponent","Proxy","get","target","p","receiver","Reflect","itemNames","from","i","_itemName","_functionNames","_functionNameIndex","findIndex","_functionName","concatName","endsWith","console","log","substring","lastIndexOf"],"mappings":"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"}