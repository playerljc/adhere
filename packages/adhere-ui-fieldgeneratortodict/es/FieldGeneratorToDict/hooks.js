var __spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var u,a=0,c=t.length;a<c;a++)!u&&a in t||((u=u||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(u||Array.prototype.slice.call(t))};import{useMount,useUpdateEffect}from"ahooks";import{useCallback,useState}from"react";import Dict from"@baifendian/adhere-util-dict";import{deepDep}from"./util";function useDict(e){var t=e.dictName,n=e.cascadeParams,u=e.onDataSourceChange,a=Dict.value[t].value,e=useState([]),c=e[0],r=e[1];function i(){a instanceof Function?r(a(n)):r(a)}return useMount(function(){i()}),useUpdateEffect(function(){i()},[deepDep(n)]),useUpdateEffect(function(){null!=u&&u(c)},[c]),c}function useDynamicDict(e){var t=e.dictName,n=e.cascadeParams,u=e.onDataSourceChange,e=useState([]),a=e[0],c=e[1],r=Dict.value[t].value;function i(){r instanceof Function?r(n).then(function(e){c(e)}):r.then&&r.then(function(e){c(e)})}return useMount(function(){i()}),useUpdateEffect(function(){i()},[deepDep(n)]),useUpdateEffect(function(){null!=u&&u(a)},[a]),a}function useAutoCompleteDict(e){var t=e.dictName,u=e.cascadeParams,n=e.onDataSourceChange,a=Dict.value[t].value,e=useState([]),c=e[0],r=e[1];return useUpdateEffect(function(){null!=n&&n(c)},[c]),{options:__spreadArray([],null!=(t=c)?t:[],!0),loadData:function(e){return new Promise(function(t,n){a(e,u).then(function(e){r(e),t()}).catch(function(e){return n(e)})})}}}function usePaging(e){var t=e.dictName,n=e.cascadeParams,u=e.onDataSourceChange,a=Dict.value[t].value;return useCallback(function(){return function(e,t){return a(e,t,n).then(function(e){return null!=u&&u(e),e})}},[t,u,n])}function useAutoCompletePaging(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,c=Dict.value[t].value;return useCallback(function(){return function(e,t,n){return c(e,t,n,u).then(function(e){return null!=a&&a(e),e})}},[t,a,u])}function useAsyncTree(e){var e=e.dictName,t=Dict.value[e].value;return useCallback(function(){return t},[e])}export{useDict,useDynamicDict,useAutoCompleteDict,usePaging,useAutoCompletePaging,useAsyncTree};
//# sourceMappingURL=hooks.js.map
