"use strict";var __spreadArray=function(e,t,u){if(u||2===arguments.length)for(var a,n=0,r=t.length;n<r;n++)!a&&n in t||((a=a||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useAsyncTree=exports.useAutoCompletePaging=exports.usePaging=exports.useAutoCompleteDict=exports.useDynamicDict=exports.useDict=void 0,require("ahooks")),react_1=require("react"),adhere_util_dict_1=__importDefault(require("@baifendian/adhere-util-dict")),util_1=require("./util");function useDict(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),r=e[0],c=e[1];function o(){n instanceof Function?c(n(u)):c(n)}return(0,ahooks_1.useMount)(function(){o()}),(0,ahooks_1.useUpdateEffect)(function(){o()},[(0,util_1.deepDep)(u)]),(0,ahooks_1.useUpdateEffect)(function(){null!=a&&a(r)},[r]),r}function useDynamicDict(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,e=(0,react_1.useState)([]),n=e[0],r=e[1],c=adhere_util_dict_1.default.value[t].value;function o(){c instanceof Function?c(u).then(function(e){r(e)}):c.then&&c.then(function(e){r(e)})}return(0,ahooks_1.useMount)(function(){o()}),(0,ahooks_1.useUpdateEffect)(function(){o()},[(0,util_1.deepDep)(u)]),(0,ahooks_1.useUpdateEffect)(function(){null!=a&&a(n)},[n]),n}function useAutoCompleteDict(e){var t=e.dictName,a=e.cascadeParams,u=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),r=e[0],c=e[1];return(0,ahooks_1.useUpdateEffect)(function(){null!=u&&u(r)},[r]),{options:__spreadArray([],r,!0),loadData:function(e){return new Promise(function(t,u){n(e,a).then(function(e){c(e),t()}).catch(function(e){return u(e)})})}}}function usePaging(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(){return function(e,t){return n(e,t,u).then(function(e){return null!=a&&a(e),e})}},[t,a,u])}function useAutoCompletePaging(e){var t=e.dictName,a=e.cascadeParams,n=e.onDataSourceChange,r=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(){return function(e,t,u){return r(e,t,u,a).then(function(e){return null!=n&&n(e),e})}},[t,n,a])}function useAsyncTree(e){var e=e.dictName,t=adhere_util_dict_1.default.value[e].value;return(0,react_1.useCallback)(function(){return t},[e])}exports.useDict=useDict,exports.useDynamicDict=useDynamicDict,exports.useAutoCompleteDict=useAutoCompleteDict,exports.usePaging=usePaging,exports.useAutoCompletePaging=useAutoCompletePaging,exports.useAsyncTree=useAsyncTree;
//# sourceMappingURL=hooks.js.map
