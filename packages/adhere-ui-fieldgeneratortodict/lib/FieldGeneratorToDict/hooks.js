"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useAsyncTree=exports.useAutoCompletePaging=exports.usePaging=exports.useTreeAutoCompleteDict=exports.useAutoCompleteDict=exports.useDynamicDict=exports.useDict=void 0,require("ahooks")),react_1=require("react"),adhere_util_dict_1=__importDefault(require("@baifendian/adhere-util-dict")),Util_1=require("./Util");function useDict(e){var t=e.dictName,a=e.cascadeParams,u=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),o=e[0],c=e[1];function i(){n instanceof Function?c(n(a)):c(n)}return(0,ahooks_1.useMount)(function(){i()}),(0,ahooks_1.useUpdateEffect)(function(){i()},[(0,Util_1.deepDep)(a)]),(0,ahooks_1.useUpdateEffect)(function(){null!=u&&u(o)},[o]),o}function useDynamicDict(e){var t=e.dictName,a=e.cascadeParams,u=e.onDataSourceChange,e=(0,react_1.useState)([]),n=e[0],o=e[1],c=adhere_util_dict_1.default.value[t].value;function i(){c instanceof Function?c(a).then(function(e){o(e)}):c.then&&c.then(function(e){o(e)})}return(0,ahooks_1.useMount)(function(){i()}),(0,ahooks_1.useUpdateEffect)(function(){i()},[(0,Util_1.deepDep)(a)]),(0,ahooks_1.useUpdateEffect)(function(){null!=u&&u(n)},[n]),n}function useAutoCompleteDict(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),o=e[0],c=e[1],t=((0,ahooks_1.useUpdateEffect)(function(){null!=a&&a(o)},[o]),(0,react_1.useCallback)(function(e){return new Promise(function(t,a){n(e,u).then(function(e){c(e),t()}).catch(function(e){return a(e)})})},[u]));return{options:o,loadData:t}}function useTreeAutoCompleteDict(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),o=e[0],c=e[1],t=((0,ahooks_1.useUpdateEffect)(function(){null!=a&&a(o)},[o]),(0,react_1.useCallback)(function(e){return new Promise(function(t,a){n(e,u).then(function(e){c(e),t()}).catch(function(e){return a(e)})})},[u]));return{treeData:o,loadData:t}}function usePaging(e){var t=e.dictName,u=e.cascadeParams,n=e.onDataSourceChange,o=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(t,a){return o(t,a,u).then(function(e){return null!=n&&n(e,{type:"paging",info:{page:t,limit:a}}),e})},[t,n,u])}function useAutoCompletePaging(e){var t=e.dictName,u=e.cascadeParams,n=e.onDataSourceChange,o=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(t,a,e){return o(t,a,e,u).then(function(e){return null!=n&&n(e,{type:"paging",info:{page:t,limit:a}}),e})},[t,n,u])}function useAsyncTree(e){var e=e.dictName,t=adhere_util_dict_1.default.value[e].value;return(0,react_1.useCallback)(t,[e])}exports.useDict=useDict,exports.useDynamicDict=useDynamicDict,exports.useAutoCompleteDict=useAutoCompleteDict,exports.useTreeAutoCompleteDict=useTreeAutoCompleteDict,exports.usePaging=usePaging,exports.useAutoCompletePaging=useAutoCompletePaging,exports.useAsyncTree=useAsyncTree;
//# sourceMappingURL=Hooks.js.map
