"use strict";var __spreadArray=function(e,t,a){if(a||2===arguments.length)for(var u,n=0,r=t.length;n<r;n++)!u&&n in t||((u=u||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.useAsyncTree=exports.useAutoCompletePaging=exports.usePaging=exports.useAutoCompleteDict=exports.useDynamicDict=exports.useDict=void 0,require("ahooks")),react_1=require("react"),adhere_util_dict_1=__importDefault(require("@baifendian/adhere-util-dict")),Util_1=require("./Util");function useDict(e){var t=e.dictName,a=e.cascadeParams,u=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),r=e[0],o=e[1];function c(){n instanceof Function?o(n(a)):o(n)}return(0,ahooks_1.useMount)(function(){c()}),(0,ahooks_1.useUpdateEffect)(function(){c()},[(0,Util_1.deepDep)(a)]),(0,ahooks_1.useUpdateEffect)(function(){null!=u&&u(r)},[r]),r}function useDynamicDict(e){var t=e.dictName,a=e.cascadeParams,u=e.onDataSourceChange,e=(0,react_1.useState)([]),n=e[0],r=e[1],o=adhere_util_dict_1.default.value[t].value;function c(){o instanceof Function?o(a).then(function(e){r(e)}):o.then&&o.then(function(e){r(e)})}return(0,ahooks_1.useMount)(function(){c()}),(0,ahooks_1.useUpdateEffect)(function(){c()},[(0,Util_1.deepDep)(a)]),(0,ahooks_1.useUpdateEffect)(function(){null!=u&&u(n)},[n]),__spreadArray([],n,!0)}function useAutoCompleteDict(e){var t=e.dictName,u=e.cascadeParams,a=e.onDataSourceChange,n=adhere_util_dict_1.default.value[t].value,e=(0,react_1.useState)([]),r=e[0],o=e[1];return(0,ahooks_1.useUpdateEffect)(function(){null!=a&&a(r)},[r]),{options:__spreadArray([],null!=(t=r)?t:[],!0),loadData:function(e){return new Promise(function(t,a){n(e,u).then(function(e){o(e),t()}).catch(function(e){return a(e)})})}}}function usePaging(e){var t=e.dictName,u=e.cascadeParams,n=e.onDataSourceChange,r=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(t,a){return r(t,a,u).then(function(e){return null!=n&&n(e,{type:"paging",info:{page:t,limit:a}}),e})},[t,n,u])}function useAutoCompletePaging(e){var t=e.dictName,u=e.cascadeParams,n=e.onDataSourceChange,r=adhere_util_dict_1.default.value[t].value;return(0,react_1.useCallback)(function(t,a,e){return r(t,a,e,u).then(function(e){return null!=n&&n(e,{type:"paging",info:{page:t,limit:a}}),e})},[t,n,u])}function useAsyncTree(e){var e=e.dictName,t=adhere_util_dict_1.default.value[e].value;return(0,react_1.useCallback)(t,[e])}exports.useDict=useDict,exports.useDynamicDict=useDynamicDict,exports.useAutoCompleteDict=useAutoCompleteDict,exports.usePaging=usePaging,exports.useAutoCompletePaging=useAutoCompletePaging,exports.useAsyncTree=useAsyncTree;
//# sourceMappingURL=Hooks.js.map
