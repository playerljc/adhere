{"version":3,"file":"useSlide.js","sources":["useSlide.js"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef, useState, } from 'react';\nimport { createMask } from './SlideLayout';\nexport default (function (props, el, positionConfig) {\n    var _a = props.time, time = _a === void 0 ? 300 : _a, _b = props.mask, mask = _b === void 0 ? true : _b, _c = props.zIndex, zIndex = _c === void 0 ? 9999 : _c, _d = props.direction, direction = _d === void 0 ? 'left' : _d, _e = props.width, width = _e === void 0 ? '80%' : _e, _f = props.height, height = _f === void 0 ? '40%' : _f, onBeforeClose = props.onBeforeClose;\n    var _g = useState(props.collapse), collapse = _g[0], setCollapse = _g[1];\n    var maskEl = useRef();\n    function close() {\n        onBeforeClose && onBeforeClose();\n        setCollapse(false);\n    }\n    function initial() {\n        var _a, _b, _c, _d, _e, _f;\n        if (direction === 'left' || direction === 'right') {\n            // 赋值宽度\n            el.current.style.height = '100%';\n            if (typeof width === 'string') {\n                el.current.style.width = width;\n            }\n            else {\n                el.current.style.width = \"\".concat(((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).offsetWidth * 0.9, \"px\");\n            }\n        }\n        else {\n            // 赋值高度\n            el.current.style.width = '100%';\n            if (typeof height === 'string') {\n                el.current.style.height = height;\n            }\n            else {\n                el.current.style.height = \"\".concat(((_b = el.current) === null || _b === void 0 ? void 0 : _b.parentElement).offsetHeight * 0.3, \"px\");\n            }\n        }\n        // 赋值默认位置\n        (_d = (_c = positionConfig.current['init'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\n        if (collapse) {\n            (_f = (_e = positionConfig.current['show'])[direction]) === null || _f === void 0 ? void 0 : _f.call(_e, 0);\n        }\n    }\n    useEffect(function () {\n        setCollapse(props.collapse);\n    }, [props.collapse]);\n    useLayoutEffect(function () {\n        var _a;\n        if (mask) {\n            maskEl.current = createMask(zIndex, function () { return close(); });\n            ((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).insertBefore(maskEl.current, el.current);\n        }\n        initial();\n        return function () {\n            var _a, _b;\n            if (maskEl.current) {\n                try {\n                    (_b = (_a = maskEl.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(maskEl === null || maskEl === void 0 ? void 0 : maskEl.current);\n                }\n                catch (e) { }\n                // @ts-ignore\n                maskEl.current = null;\n            }\n        };\n    }, []);\n    useLayoutEffect(function () {\n        var _a, _b, _c, _d;\n        if (collapse) {\n            (_b = (_a = positionConfig.current['show'])[direction]) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n        else {\n            (_d = (_c = positionConfig.current['close'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\n        }\n    }, [collapse]);\n    function getDuration(_time) {\n        return _time !== undefined && _time !== null ? _time : time;\n    }\n    return {\n        getDuration: getDuration,\n        maskEl: maskEl,\n    };\n});\n"],"names":["useEffect","useLayoutEffect","useRef","useState","createMask","props","el","positionConfig","_a","time","_b","mask","_c","zIndex","_d","direction","_e","width","_f","height","onBeforeClose","_g","collapse","setCollapse","maskEl","current","parentElement","insertBefore","style","concat","offsetWidth","offsetHeight","call","removeChild","e","getDuration","_time"],"mappings":"OAASA,UAAWC,gBAAiBC,OAAQC,QAAwB,KAAP,eACrDC,UAAiC,KAAf,+BACZ,SAAWC,EAAOC,EAAIC,GACjC,IAAIC,EAAKH,EAAMI,KAAMA,EAAc,KAAA,IAAPD,EAAgB,IAAMA,EAAIE,EAAKL,EAAMM,KAAMA,EAAc,KAAA,IAAPD,GAAuBA,EAAIE,EAAKP,EAAMQ,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,KAAOA,EAAIE,EAAKT,EAAMU,UAAWA,EAAmB,KAAA,IAAPD,EAAgB,OAASA,EAAIE,EAAKX,EAAMY,MAAOA,EAAe,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAKb,EAAMc,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAgBf,EAAMe,cAC/VC,EAAKlB,SAASE,EAAMiB,QAAQ,EAAGA,EAAWD,EAAG,GAAIE,EAAcF,EAAG,GAClEG,EAAStB,OAAO,EAmEpB,OAlCAF,UAAU,WACNuB,EAAYlB,EAAMiB,QAAQ,CAC9B,EAAG,CAACjB,EAAMiB,SAAS,EACnBrB,gBAAgB,WACZ,IA/BoBe,EAAIE,EAqCxB,OALIP,IACAa,EAAOC,QAAUrB,WAAWS,EAAQ,WArCxCO,GAAiBA,EAAc,EAC/BG,EAAY,CAAA,CAAK,CAoCqD,CAAC,GAClE,OAACf,EAAKF,EAAGmB,SAAqC,KAAA,EAASjB,EAAGkB,eAAeC,aAAaH,EAAOC,QAASnB,EAAGmB,OAAO,GAjCnG,SAAdV,GAAsC,UAAdA,GAExBT,EAAGmB,QAAQG,MAAMT,OAAS,OAEtBb,EAAGmB,QAAQG,MAAMX,MADA,UAAjB,OAAOA,EACkBA,EAGA,GAAGY,OAA+F,IAAvF,OAACrB,EAAKF,EAAGmB,SAAqC,KAAA,EAASjB,EAAGkB,eAAeI,YAAmB,IAAI,IAKxIxB,EAAGmB,QAAQG,MAAMX,MAAQ,OAErBX,EAAGmB,QAAQG,MAAMT,OADC,UAAlB,OAAOA,EACmBA,EAGA,GAAGU,OAAgG,IAAxF,OAACnB,EAAKJ,EAAGmB,SAAqC,KAAA,EAASf,EAAGgB,eAAeK,aAAoB,IAAI,GAI9I,OAACjB,GAAMF,EAAKL,EAAekB,QAAc,MAAGV,KAAiDD,EAAGkB,KAAKpB,CAAE,EACnGU,GACA,OAACJ,GAAMF,EAAKT,EAAekB,QAAc,MAAGV,KAAiDG,EAAGc,KAAKhB,EAAI,CAAC,EAavG,WACH,IAAIR,EAAIE,EACR,GAAIc,EAAOC,QAAS,CAChB,IACI,OAACf,EAAK,OAACF,EAAKgB,EAAOC,SAAqC,KAAA,EAASjB,EAAGkB,gBAAoDhB,EAAGuB,YAAYT,MAAAA,EAAuC,KAAA,EAASA,EAAOC,OAAO,CAE7L,CAAZ,MAAOS,IAEPV,EAAOC,QAAU,IACrB,CACJ,CACJ,EAAG,EAAE,EACLxB,gBAAgB,WACZ,IAAYW,EAAIE,EACZQ,EACA,OAACZ,GAAMF,EAAKD,EAAekB,QAAc,MAAGV,KAAiDL,EAAGsB,KAAKxB,CAAE,EAGvG,OAACM,GAAMF,EAAKL,EAAekB,QAAe,OAAGV,KAAiDD,EAAGkB,KAAKpB,CAAE,CAEhH,EAAG,CAACU,EAAS,EAIN,CACHa,YAJJ,SAAqBC,GACjB,OAAOA,MAAAA,EAAwCA,EAAQ3B,CAC3D,EAGIe,OAAQA,CACZ,CACH"}