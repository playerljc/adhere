{"version":3,"file":"useSlide.js","sources":["useSlide.js"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef, useState, } from 'react';\r\nimport { createMask } from './slidelayout';\r\nexport default (function (props, el, positionConfig) {\r\n    var _a = props.time, time = _a === void 0 ? 300 : _a, _b = props.mask, mask = _b === void 0 ? true : _b, _c = props.zIndex, zIndex = _c === void 0 ? 9999 : _c, _d = props.direction, direction = _d === void 0 ? 'left' : _d, _e = props.width, width = _e === void 0 ? '80%' : _e, _f = props.height, height = _f === void 0 ? '40%' : _f, onBeforeClose = props.onBeforeClose;\r\n    var _g = useState(props.collapse), collapse = _g[0], setCollapse = _g[1];\r\n    var maskEl = useRef();\r\n    function close() {\r\n        onBeforeClose && onBeforeClose();\r\n        setCollapse(false);\r\n    }\r\n    function initial() {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        if (direction === 'left' || direction === 'right') {\r\n            // 赋值宽度\r\n            el.current.style.height = '100%';\r\n            if (typeof width === 'string') {\r\n                el.current.style.width = width;\r\n            }\r\n            else {\r\n                el.current.style.width = \"\".concat(((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).offsetWidth * 0.9, \"px\");\r\n            }\r\n        }\r\n        else {\r\n            // 赋值高度\r\n            el.current.style.width = '100%';\r\n            if (typeof height === 'string') {\r\n                el.current.style.height = height;\r\n            }\r\n            else {\r\n                el.current.style.height = \"\".concat(((_b = el.current) === null || _b === void 0 ? void 0 : _b.parentElement).offsetHeight * 0.3, \"px\");\r\n            }\r\n        }\r\n        // 赋值默认位置\r\n        (_d = (_c = positionConfig.current['init'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\r\n        if (collapse) {\r\n            (_f = (_e = positionConfig.current['show'])[direction]) === null || _f === void 0 ? void 0 : _f.call(_e, 0);\r\n        }\r\n    }\r\n    useEffect(function () {\r\n        setCollapse(props.collapse);\r\n    }, [props.collapse]);\r\n    useLayoutEffect(function () {\r\n        var _a;\r\n        if (mask) {\r\n            maskEl.current = createMask(zIndex, function () { return close(); });\r\n            ((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).insertBefore(maskEl.current, el.current);\r\n        }\r\n        initial();\r\n    }, []);\r\n    useLayoutEffect(function () {\r\n        var _a, _b, _c, _d;\r\n        if (collapse) {\r\n            (_b = (_a = positionConfig.current['show'])[direction]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n        else {\r\n            (_d = (_c = positionConfig.current['close'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\r\n        }\r\n    }, [collapse]);\r\n    function getDuration(_time) {\r\n        return _time !== undefined && _time !== null ? _time : time;\r\n    }\r\n    return {\r\n        getDuration: getDuration,\r\n        maskEl: maskEl,\r\n    };\r\n});\r\n"],"names":["useEffect","useLayoutEffect","useRef","useState","createMask","props","el","positionConfig","_a","time","_b","mask","_c","zIndex","_d","direction","_e","width","_f","height","onBeforeClose","_g","collapse","setCollapse","maskEl","current","parentElement","insertBefore","style","concat","offsetWidth","offsetHeight","call","getDuration","_time"],"mappings":"OAASA,UAAWC,gBAAiBC,OAAQC,QAAwB,KAAP,eACrDC,UAAiC,KAAf,+BACZ,SAAWC,EAAOC,EAAIC,GACjC,IAAIC,EAAKH,EAAMI,KAAMA,EAAc,KAAA,IAAPD,EAAgB,IAAMA,EAAIE,EAAKL,EAAMM,KAAMA,EAAc,KAAA,IAAPD,GAAuBA,EAAIE,EAAKP,EAAMQ,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,KAAOA,EAAIE,EAAKT,EAAMU,UAAWA,EAAmB,KAAA,IAAPD,EAAgB,OAASA,EAAIE,EAAKX,EAAMY,MAAOA,EAAe,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAKb,EAAMc,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAgBf,EAAMe,cAC/VC,EAAKlB,SAASE,EAAMiB,QAAQ,EAAGA,EAAWD,EAAG,GAAIE,EAAcF,EAAG,GAClEG,EAAStB,OAAO,EAwDpB,OAvBAF,UAAU,WACNuB,EAAYlB,EAAMiB,QAAQ,CAC9B,EAAG,CAACjB,EAAMiB,SAAS,EACnBrB,gBAAgB,WACZ,IA/BoBe,EAAIE,EAgCpBP,IACAa,EAAOC,QAAUrB,WAAWS,EAAQ,WArCxCO,GAAiBA,EAAc,EAC/BG,EAAY,CAAA,CAAK,CAoCqD,CAAC,GAClE,OAACf,EAAKF,EAAGmB,SAAqC,KAAA,EAASjB,EAAGkB,eAAeC,aAAaH,EAAOC,QAASnB,EAAGmB,OAAO,GAjCnG,SAAdV,GAAsC,UAAdA,GAExBT,EAAGmB,QAAQG,MAAMT,OAAS,OAEtBb,EAAGmB,QAAQG,MAAMX,MADA,UAAjB,OAAOA,EACkBA,EAGA,GAAGY,OAA+F,IAAvF,OAACrB,EAAKF,EAAGmB,SAAqC,KAAA,EAASjB,EAAGkB,eAAeI,YAAmB,IAAI,IAKxIxB,EAAGmB,QAAQG,MAAMX,MAAQ,OAErBX,EAAGmB,QAAQG,MAAMT,OADC,UAAlB,OAAOA,EACmBA,EAGA,GAAGU,OAAgG,IAAxF,OAACnB,EAAKJ,EAAGmB,SAAqC,KAAA,EAASf,EAAGgB,eAAeK,aAAoB,IAAI,GAI9I,OAACjB,GAAMF,EAAKL,EAAekB,QAAc,MAAGV,KAAiDD,EAAGkB,KAAKpB,CAAE,EACnGU,GACA,OAACJ,GAAMF,EAAKT,EAAekB,QAAc,MAAGV,KAAiDG,EAAGc,KAAKhB,EAAI,CAAC,CAalH,EAAG,EAAE,EACLf,gBAAgB,WACZ,IAAYW,EAAIE,EACZQ,EACA,OAACZ,GAAMF,EAAKD,EAAekB,QAAc,MAAGV,KAAiDL,EAAGsB,KAAKxB,CAAE,EAGvG,OAACM,GAAMF,EAAKL,EAAekB,QAAe,OAAGV,KAAiDD,EAAGkB,KAAKpB,CAAE,CAEhH,EAAG,CAACU,EAAS,EAIN,CACHW,YAJJ,SAAqBC,GACjB,OAAOA,MAAAA,EAAwCA,EAAQzB,CAC3D,EAGIe,OAAQA,CACZ,CACH"}