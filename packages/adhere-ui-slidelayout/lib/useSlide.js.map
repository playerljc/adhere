{"version":3,"file":"useSlide.js","sources":["useSlide.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = require(\"react\");\r\nvar slidelayout_1 = require(\"./slidelayout\");\r\nexports.default = (function (props, el, positionConfig) {\r\n    var _a = props.time, time = _a === void 0 ? 300 : _a, _b = props.mask, mask = _b === void 0 ? true : _b, _c = props.zIndex, zIndex = _c === void 0 ? 9999 : _c, _d = props.direction, direction = _d === void 0 ? 'left' : _d, _e = props.width, width = _e === void 0 ? '80%' : _e, _f = props.height, height = _f === void 0 ? '40%' : _f, onBeforeClose = props.onBeforeClose;\r\n    var _g = (0, react_1.useState)(props.collapse), collapse = _g[0], setCollapse = _g[1];\r\n    var maskEl = (0, react_1.useRef)();\r\n    function close() {\r\n        onBeforeClose && onBeforeClose();\r\n        setCollapse(false);\r\n    }\r\n    function initial() {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        if (direction === 'left' || direction === 'right') {\r\n            // 赋值宽度\r\n            el.current.style.height = '100%';\r\n            if (typeof width === 'string') {\r\n                el.current.style.width = width;\r\n            }\r\n            else {\r\n                el.current.style.width = \"\".concat(((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).offsetWidth * 0.9, \"px\");\r\n            }\r\n        }\r\n        else {\r\n            // 赋值高度\r\n            el.current.style.width = '100%';\r\n            if (typeof height === 'string') {\r\n                el.current.style.height = height;\r\n            }\r\n            else {\r\n                el.current.style.height = \"\".concat(((_b = el.current) === null || _b === void 0 ? void 0 : _b.parentElement).offsetHeight * 0.3, \"px\");\r\n            }\r\n        }\r\n        // 赋值默认位置\r\n        (_d = (_c = positionConfig.current['init'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\r\n        if (collapse) {\r\n            (_f = (_e = positionConfig.current['show'])[direction]) === null || _f === void 0 ? void 0 : _f.call(_e, 0);\r\n        }\r\n    }\r\n    (0, react_1.useEffect)(function () {\r\n        setCollapse(props.collapse);\r\n    }, [props.collapse]);\r\n    (0, react_1.useLayoutEffect)(function () {\r\n        var _a;\r\n        if (mask) {\r\n            maskEl.current = (0, slidelayout_1.createMask)(zIndex, function () { return close(); });\r\n            ((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).insertBefore(maskEl.current, el.current);\r\n        }\r\n        initial();\r\n    }, []);\r\n    (0, react_1.useLayoutEffect)(function () {\r\n        var _a, _b, _c, _d;\r\n        if (collapse) {\r\n            (_b = (_a = positionConfig.current['show'])[direction]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n        else {\r\n            (_d = (_c = positionConfig.current['close'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\r\n        }\r\n    }, [collapse]);\r\n    function getDuration(_time) {\r\n        return _time !== undefined && _time !== null ? _time : time;\r\n    }\r\n    return {\r\n        getDuration: getDuration,\r\n        maskEl: maskEl,\r\n    };\r\n});\r\n"],"names":["Object","defineProperty","exports","value","react_1","require","slidelayout_1","default","props","el","positionConfig","_a","time","_b","mask","_c","zIndex","_d","direction","_e","width","_f","height","onBeforeClose","_g","useState","collapse","setCollapse","maskEl","useRef","useEffect","useLayoutEffect","current","createMask","parentElement","insertBefore","style","concat","offsetWidth","offsetHeight","call","getDuration","_time"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,cAAgBD,QAAQ,eAAe,EAC3CH,QAAQK,QAAU,SAAWC,EAAOC,EAAIC,GACpC,IAAIC,EAAKH,EAAMI,KAAMA,EAAc,KAAA,IAAPD,EAAgB,IAAMA,EAAIE,EAAKL,EAAMM,KAAMA,EAAc,KAAA,IAAPD,GAAuBA,EAAIE,EAAKP,EAAMQ,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,KAAOA,EAAIE,EAAKT,EAAMU,UAAWA,EAAmB,KAAA,IAAPD,EAAgB,OAASA,EAAIE,EAAKX,EAAMY,MAAOA,EAAe,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAKb,EAAMc,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAgBf,EAAMe,cAC/VC,GAAK,EAAIpB,QAAQqB,UAAUjB,EAAMkB,QAAQ,EAAGA,EAAWF,EAAG,GAAIG,EAAcH,EAAG,GAC/EI,GAAS,EAAIxB,QAAQyB,QAAQ,EAwDjC,OAvBA,EAAIzB,QAAQ0B,WAAW,WACnBH,EAAYnB,EAAMkB,QAAQ,CAC9B,EAAG,CAAClB,EAAMkB,SAAS,GACnB,EAAItB,QAAQ2B,iBAAiB,WACzB,IA/BoBZ,EAAIE,EAgCpBP,IACAc,EAAOI,SAAU,EAAI1B,cAAc2B,YAAYjB,EAAQ,WArC3DO,GAAiBA,EAAc,EAC/BI,EAAY,CAAA,CAAK,CAoCwE,CAAC,GACrF,OAAChB,EAAKF,EAAGuB,SAAqC,KAAA,EAASrB,EAAGuB,eAAeC,aAAaP,EAAOI,QAASvB,EAAGuB,OAAO,GAjCnG,SAAdd,GAAsC,UAAdA,GAExBT,EAAGuB,QAAQI,MAAMd,OAAS,OAEtBb,EAAGuB,QAAQI,MAAMhB,MADA,UAAjB,OAAOA,EACkBA,EAGA,GAAGiB,OAA+F,IAAvF,OAAC1B,EAAKF,EAAGuB,SAAqC,KAAA,EAASrB,EAAGuB,eAAeI,YAAmB,IAAI,IAKxI7B,EAAGuB,QAAQI,MAAMhB,MAAQ,OAErBX,EAAGuB,QAAQI,MAAMd,OADC,UAAlB,OAAOA,EACmBA,EAGA,GAAGe,OAAgG,IAAxF,OAACxB,EAAKJ,EAAGuB,SAAqC,KAAA,EAASnB,EAAGqB,eAAeK,aAAoB,IAAI,GAI9I,OAACtB,GAAMF,EAAKL,EAAesB,QAAc,MAAGd,KAAiDD,EAAGuB,KAAKzB,CAAE,EACnGW,GACA,OAACL,GAAMF,EAAKT,EAAesB,QAAc,MAAGd,KAAiDG,EAAGmB,KAAKrB,EAAI,CAAC,CAalH,EAAG,EAAE,GACL,EAAIf,QAAQ2B,iBAAiB,WACzB,IAAYhB,EAAIE,EACZS,EACA,OAACb,GAAMF,EAAKD,EAAesB,QAAc,MAAGd,KAAiDL,EAAG2B,KAAK7B,CAAE,EAGvG,OAACM,GAAMF,EAAKL,EAAesB,QAAe,OAAGd,KAAiDD,EAAGuB,KAAKzB,CAAE,CAEhH,EAAG,CAACW,EAAS,EAIN,CACHe,YAJJ,SAAqBC,GACjB,OAAOA,MAAAA,EAAwCA,EAAQ9B,CAC3D,EAGIgB,OAAQA,CACZ,CACH"}