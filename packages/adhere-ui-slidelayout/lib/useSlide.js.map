{"version":3,"file":"useSlide.js","sources":["useSlide.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar SlideLayout_1 = require(\"./SlideLayout\");\nexports.default = (function (props, el, positionConfig) {\n    var _a = props.time, time = _a === void 0 ? 300 : _a, _b = props.mask, mask = _b === void 0 ? true : _b, _c = props.zIndex, zIndex = _c === void 0 ? 9999 : _c, _d = props.direction, direction = _d === void 0 ? 'left' : _d, _e = props.width, width = _e === void 0 ? '80%' : _e, _f = props.height, height = _f === void 0 ? '40%' : _f, onBeforeClose = props.onBeforeClose;\n    var _g = (0, react_1.useState)(props.collapse), collapse = _g[0], setCollapse = _g[1];\n    var maskEl = (0, react_1.useRef)();\n    function close() {\n        onBeforeClose && onBeforeClose();\n        setCollapse(false);\n    }\n    function initial() {\n        var _a, _b, _c, _d, _e, _f;\n        if (direction === 'left' || direction === 'right') {\n            // 赋值宽度\n            el.current.style.height = '100%';\n            if (typeof width === 'string') {\n                el.current.style.width = width;\n            }\n            else {\n                el.current.style.width = \"\".concat(((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).offsetWidth * 0.9, \"px\");\n            }\n        }\n        else {\n            // 赋值高度\n            el.current.style.width = '100%';\n            if (typeof height === 'string') {\n                el.current.style.height = height;\n            }\n            else {\n                el.current.style.height = \"\".concat(((_b = el.current) === null || _b === void 0 ? void 0 : _b.parentElement).offsetHeight * 0.3, \"px\");\n            }\n        }\n        // 赋值默认位置\n        (_d = (_c = positionConfig.current['init'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\n        if (collapse) {\n            (_f = (_e = positionConfig.current['show'])[direction]) === null || _f === void 0 ? void 0 : _f.call(_e, 0);\n        }\n    }\n    (0, react_1.useEffect)(function () {\n        setCollapse(props.collapse);\n    }, [props.collapse]);\n    (0, react_1.useLayoutEffect)(function () {\n        var _a;\n        if (mask) {\n            maskEl.current = (0, SlideLayout_1.createMask)(zIndex, function () { return close(); });\n            ((_a = el.current) === null || _a === void 0 ? void 0 : _a.parentElement).insertBefore(maskEl.current, el.current);\n        }\n        initial();\n        return function () {\n            var _a, _b;\n            if (maskEl.current) {\n                try {\n                    (_b = (_a = maskEl.current) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(maskEl === null || maskEl === void 0 ? void 0 : maskEl.current);\n                }\n                catch (e) { }\n                // @ts-ignore\n                maskEl.current = null;\n            }\n        };\n    }, []);\n    (0, react_1.useLayoutEffect)(function () {\n        var _a, _b, _c, _d;\n        if (collapse) {\n            (_b = (_a = positionConfig.current['show'])[direction]) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n        else {\n            (_d = (_c = positionConfig.current['close'])[direction]) === null || _d === void 0 ? void 0 : _d.call(_c);\n        }\n    }, [collapse]);\n    function getDuration(_time) {\n        return _time !== undefined && _time !== null ? _time : time;\n    }\n    return {\n        getDuration: getDuration,\n        maskEl: maskEl,\n    };\n});\n"],"names":["Object","defineProperty","exports","value","react_1","require","SlideLayout_1","default","props","el","positionConfig","_a","time","_b","mask","_c","zIndex","_d","direction","_e","width","_f","height","onBeforeClose","_g","useState","collapse","setCollapse","maskEl","useRef","useEffect","useLayoutEffect","current","createMask","parentElement","insertBefore","style","concat","offsetWidth","offsetHeight","call","removeChild","e","getDuration","_time"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5D,IAAIC,QAAUC,QAAQ,OAAO,EACzBC,cAAgBD,QAAQ,eAAe,EAC3CH,QAAQK,QAAU,SAAWC,EAAOC,EAAIC,GACpC,IAAIC,EAAKH,EAAMI,KAAMA,EAAc,KAAA,IAAPD,EAAgB,IAAMA,EAAIE,EAAKL,EAAMM,KAAMA,EAAc,KAAA,IAAPD,GAAuBA,EAAIE,EAAKP,EAAMQ,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,KAAOA,EAAIE,EAAKT,EAAMU,UAAWA,EAAmB,KAAA,IAAPD,EAAgB,OAASA,EAAIE,EAAKX,EAAMY,MAAOA,EAAe,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAKb,EAAMc,OAAQA,EAAgB,KAAA,IAAPD,EAAgB,MAAQA,EAAIE,EAAgBf,EAAMe,cAC/VC,GAAK,EAAIpB,QAAQqB,UAAUjB,EAAMkB,QAAQ,EAAGA,EAAWF,EAAG,GAAIG,EAAcH,EAAG,GAC/EI,GAAS,EAAIxB,QAAQyB,QAAQ,EAmEjC,OAlCA,EAAIzB,QAAQ0B,WAAW,WACnBH,EAAYnB,EAAMkB,QAAQ,CAC9B,EAAG,CAAClB,EAAMkB,SAAS,GACnB,EAAItB,QAAQ2B,iBAAiB,WACzB,IA/BoBZ,EAAIE,EAqCxB,OALIP,IACAc,EAAOI,SAAU,EAAI1B,cAAc2B,YAAYjB,EAAQ,WArC3DO,GAAiBA,EAAc,EAC/BI,EAAY,CAAA,CAAK,CAoCwE,CAAC,GACrF,OAAChB,EAAKF,EAAGuB,SAAqC,KAAA,EAASrB,EAAGuB,eAAeC,aAAaP,EAAOI,QAASvB,EAAGuB,OAAO,GAjCnG,SAAdd,GAAsC,UAAdA,GAExBT,EAAGuB,QAAQI,MAAMd,OAAS,OAEtBb,EAAGuB,QAAQI,MAAMhB,MADA,UAAjB,OAAOA,EACkBA,EAGA,GAAGiB,OAA+F,IAAvF,OAAC1B,EAAKF,EAAGuB,SAAqC,KAAA,EAASrB,EAAGuB,eAAeI,YAAmB,IAAI,IAKxI7B,EAAGuB,QAAQI,MAAMhB,MAAQ,OAErBX,EAAGuB,QAAQI,MAAMd,OADC,UAAlB,OAAOA,EACmBA,EAGA,GAAGe,OAAgG,IAAxF,OAACxB,EAAKJ,EAAGuB,SAAqC,KAAA,EAASnB,EAAGqB,eAAeK,aAAoB,IAAI,GAI9I,OAACtB,GAAMF,EAAKL,EAAesB,QAAc,MAAGd,KAAiDD,EAAGuB,KAAKzB,CAAE,EACnGW,GACA,OAACL,GAAMF,EAAKT,EAAesB,QAAc,MAAGd,KAAiDG,EAAGmB,KAAKrB,EAAI,CAAC,EAavG,WACH,IAAIR,EAAIE,EACR,GAAIe,EAAOI,QAAS,CAChB,IACI,OAACnB,EAAK,OAACF,EAAKiB,EAAOI,SAAqC,KAAA,EAASrB,EAAGuB,gBAAoDrB,EAAG4B,YAAYb,MAAAA,EAAuC,KAAA,EAASA,EAAOI,OAAO,CAE7L,CAAZ,MAAOU,IAEPd,EAAOI,QAAU,IACrB,CACJ,CACJ,EAAG,EAAE,GACL,EAAI5B,QAAQ2B,iBAAiB,WACzB,IAAYhB,EAAIE,EACZS,EACA,OAACb,GAAMF,EAAKD,EAAesB,QAAc,MAAGd,KAAiDL,EAAG2B,KAAK7B,CAAE,EAGvG,OAACM,GAAMF,EAAKL,EAAesB,QAAe,OAAGd,KAAiDD,EAAGuB,KAAKzB,CAAE,CAEhH,EAAG,CAACW,EAAS,EAIN,CACHiB,YAJJ,SAAqBC,GACjB,OAAOA,MAAAA,EAAwCA,EAAQhC,CAC3D,EAGIgB,OAAQA,CACZ,CACH"}