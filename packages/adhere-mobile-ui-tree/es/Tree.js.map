{"version":3,"file":"Tree.js","sources":["Tree.js"],"sourcesContent":["import _ErrorBlock from \"antd-mobile/es/components/error-block\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { memo, useMemo } from 'react';\nimport Hooks from '@baifendian/adhere-ui-hooks';\nimport Space from '@baifendian/adhere-ui-space';\nimport { DEFAULT_MULTIPLE, DEFAULT_SIZE, DEFAULT_TREE_CHECKABLE } from './Constant';\nimport TreeContext from './TreeContext';\nimport TreeNode from './TreeNode';\nvar selectorPrefix = 'adhere-mobile-ui-tree';\nvar usePropToState = Hooks.usePropToState;\n/**\n * Tree\n * @description Tree\n */\nvar Tree = /*#__PURE__*/memo(function (_a) {\n  var _b;\n  var className = _a.className,\n    style = _a.style,\n    treeData = _a.treeData,\n    expandAll = _a.expandAll,\n    expandedKeys = _a.expandedKeys,\n    selectedKeys = _a.selectedKeys,\n    switcherIcon = _a.switcherIcon,\n    titleRender = _a.titleRender,\n    renderEmpty = _a.renderEmpty,\n    size = _a.size,\n    checkable = _a.checkable,\n    checkedKeys = _a.checkedKeys,\n    multiple = _a.multiple;\n  // Tree的密度\n  var targetSize = useMemo(function () {\n    return size !== null && size !== void 0 ? size : DEFAULT_SIZE;\n  }, [size]);\n  // 整个Tree是否是可勾选的Tree\n  var targetCheckable = useMemo(function () {\n    if (checkable === undefined || checkable === null) return DEFAULT_TREE_CHECKABLE;\n    return checkable;\n  }, [checkable]);\n  // 是否可以选中多个节点\n  var targetMultiple = useMemo(function () {\n    if (multiple === undefined || multiple === null) return DEFAULT_MULTIPLE;\n    return multiple;\n  }, [multiple]);\n  // Tree的数据\n  var targetTreeData = useMemo(function () {\n    return treeData !== null && treeData !== void 0 ? treeData : [];\n  }, [treeData]);\n  // 展开的keys\n  var defaultExpandedKeys = useMemo(function () {\n    return expandedKeys !== null && expandedKeys !== void 0 ? expandedKeys : [];\n  }, [expandedKeys]);\n  var _c = usePropToState(defaultExpandedKeys),\n    targetExpandedKeys = _c[0],\n    setTargetExpandedKeys = _c[1];\n  // 选择的keys\n  var defaultSelectedKeys = useMemo(function () {\n    return selectedKeys !== null && selectedKeys !== void 0 ? selectedKeys : [];\n  }, [selectedKeys]);\n  var _d = usePropToState(defaultSelectedKeys),\n    targetSelectedKeys = _d[0],\n    setTargetSelectedKeys = _d[1];\n  // check的keys\n  var defaultCheckedKeys = useMemo(function () {\n    return checkedKeys !== null && checkedKeys !== void 0 ? checkedKeys : [];\n  }, [checkedKeys]);\n  var _e = usePropToState(defaultCheckedKeys),\n    targetCheckedKeys = _e[0],\n    setTargetCheckedKeys = _e[1];\n  // 行的间距\n  var rowGap = useMemo(function () {\n    return new Map([['small', 5], ['middle', 15], ['large', 25]]).get(targetSize);\n  }, [targetSize]);\n  var treeChildrenElements = useMemo(function () {\n    return targetTreeData.map(function (_treeNodeData) {\n      return /*#__PURE__*/React.createElement(TreeNode, __assign({\n        level: 0,\n        icon: switcherIcon,\n        titleRender: titleRender,\n        id: _treeNodeData.key\n      }, _treeNodeData));\n    });\n  }, [targetTreeData, switcherIcon, titleRender]);\n  var isEmpty = useMemo(function () {\n    return !treeChildrenElements.length;\n  }, [treeChildrenElements]);\n  var contextProviderValue = useMemo(function () {\n    return {\n      expandedKeys: function () {\n        return targetExpandedKeys;\n      },\n      selectedKeys: function () {\n        return targetSelectedKeys;\n      },\n      checkedKeys: function () {\n        return targetCheckedKeys;\n      },\n      setSelectedKeys: setTargetSelectedKeys,\n      setExpandedKeys: setTargetExpandedKeys,\n      setCheckedKeys: setTargetCheckedKeys,\n      size: function () {\n        return targetSize;\n      },\n      rowGap: function () {\n        return rowGap !== null && rowGap !== void 0 ? rowGap : 15;\n      },\n      multiple: function () {\n        return targetMultiple;\n      },\n      checkable: function () {\n        return targetCheckable;\n      },\n      treeData: function () {\n        return treeData;\n      }\n    };\n  }, [targetExpandedKeys, targetSelectedKeys, targetCheckedKeys, rowGap, targetSize, targetMultiple, targetCheckable, treeData]);\n  return /*#__PURE__*/React.createElement(TreeContext.Provider, {\n    value: contextProviderValue\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: classNames(selectorPrefix, className),\n    style: style !== null && style !== void 0 ? style : {}\n  }, /*#__PURE__*/React.createElement(Space.Group, {\n    direction: \"vertical\",\n    size: rowGap\n  }, isEmpty && /*#__PURE__*/React.createElement(\"li\", null, (_b = renderEmpty === null || renderEmpty === void 0 ? void 0 : renderEmpty()) !== null && _b !== void 0 ? _b : /*#__PURE__*/React.createElement(_ErrorBlock, {\n    status: \"empty\"\n  })), !isEmpty && treeChildrenElements)));\n});\nTree.displayName = 'Tree';\nexport default Tree;"],"names":["_ErrorBlock","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","React","memo","useMemo","Hooks","Space","DEFAULT_MULTIPLE","DEFAULT_SIZE","DEFAULT_TREE_CHECKABLE","TreeContext","TreeNode","selectorPrefix","usePropToState","Tree","_a","className","style","treeData","expandedKeys","expandAll","selectedKeys","switcherIcon","titleRender","renderEmpty","size","checkable","checkedKeys","multiple","targetSize","targetCheckable","targetMultiple","targetTreeData","defaultExpandedKeys","_c","targetExpandedKeys","setTargetExpandedKeys","defaultSelectedKeys","_d","targetSelectedKeys","setTargetSelectedKeys","defaultCheckedKeys","_e","targetCheckedKeys","setTargetCheckedKeys","rowGap","Map","get","treeChildrenElements","map","_treeNodeData","createElement","level","icon","id","key","isEmpty","contextProviderValue","setSelectedKeys","setExpandedKeys","setCheckedKeys","Provider","value","Group","direction","_b","status","displayName"],"mappings":"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"}