{"version":3,"file":"TreeNode.js","sources":["TreeNode.js"],"sourcesContent":["import _AddOutline from \"antd-mobile-icons/es/AddOutline\";\nimport _MinusOutline from \"antd-mobile-icons/es/MinusOutline\";\nimport _Checkbox from \"antd-mobile/es/components/checkbox\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useUpdate } from 'ahooks';\nimport classNames from 'classnames';\nimport React, { memo, useContext, useMemo } from 'react';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport ConfigProvider from '@baifendian/adhere-ui-configprovider';\nimport Space from '@baifendian/adhere-ui-space';\nimport Util from '@baifendian/adhere-util';\nimport { DEFAULT_DISABLED, DEFAULT_SELECTABLE, DEFAULT_TREE_NODE_CHECKABLE, DEFAULT_TREE_UTIL_CONFIG } from './Constant';\nimport TreeContext from './TreeContext';\nimport TreeNodeContext from './TreeNodeContext';\nimport useChecked from './useChecked';\nimport useLoadedLocks from './useLoadedLocks';\nimport useUtil from './useUtil';\nvar selectorPrefix = 'adhere-mobile-ui-tree-node';\n/**\n * TreeNode\n * @description TreeNode\n */\nvar TreeNode = /*#__PURE__*/memo(function (_a) {\n  var _b, _c;\n  var _d, _f, _g;\n  var id = _a.id,\n    level = _a.level,\n    isLeaf = _a.isLeaf,\n    title = _a.title,\n    checkable = _a.checkable,\n    disabled = _a.disabled,\n    selectable = _a.selectable,\n    props = _a.props,\n    checkboxWidth = _a.checkboxWidth,\n    checkboxGap = _a.checkboxGap,\n    titleGap = _a.titleGap,\n    iconGap = _a.iconGap,\n    indent = _a.indent,\n    children = _a.children;\n  var _h = useContext(TreeContext),\n    setSelectedKeys = _h.setSelectedKeys,\n    setExpandedKeys = _h.setExpandedKeys,\n    setCheckedKeys = _h.setCheckedKeys,\n    setLoadedKeys = _h.setLoadedKeys,\n    setTreeData = _h.setTreeData,\n    selectedKeys = _h.selectedKeys,\n    expandedKeys = _h.expandedKeys,\n    checkedKeys = _h.checkedKeys,\n    loadedKeys = _h.loadedKeys,\n    teeDataSimpleMode = _h.teeDataSimpleMode,\n    loadData = _h.loadData,\n    size = _h.size,\n    multiple = _h.multiple,\n    treeCheckable = _h.checkable,\n    checkStrictly = _h.checkStrictly,\n    treeData = _h.treeData,\n    icon = _h.icon,\n    commonCheckboxWidth = _h.checkboxWidth,\n    commonCheckboxGap = _h.checkboxGap,\n    commonTitleGap = _h.titleGap,\n    commonIconGap = _h.iconGap,\n    commonIndent = _h.indent,\n    commonRowGap = _h.rowGap,\n    titleRender = _h.titleRender,\n    switcherIcon = _h.switcherIcon,\n    onSelect = _h.onSelect,\n    onExpand = _h.onExpand,\n    onCheck = _h.onCheck;\n  var update = useUpdate();\n  // loaded的lock\n  var _j = useLoadedLocks(),\n    lock = _j.lock,\n    unLock = _j.unLock,\n    isLock = _j.isLock;\n  var media = useContext(ConfigProvider.Context).media;\n  // 当前节点数据的扩展\n  var nodeDataExtra = useMemo(function () {\n    return {\n      key: id,\n      level: level,\n      disabled: disabled,\n      selectable: selectable,\n      checkable: checkable,\n      isLeaf: !(children === null || children === void 0 ? void 0 : children.length),\n      props: props\n    };\n  }, [id, level, disabled, selectable, checkable, props, children]);\n  // 当前节点的icon\n  var targetIcon = useMemo(function () {\n    return icon === null || icon === void 0 ? void 0 : icon(nodeDataExtra);\n  }, [nodeDataExtra]);\n  var _k = useContext(TreeNodeContext),\n    next = _k.updateParentChecked,\n    existsCheckable = _k.existsCheckableNodeInParentChildren;\n  var _l = useChecked(),\n    handleCheck = _l.handleCheck,\n    updateParentChecked = _l.updateParentChecked,\n    existsCheckableNodeInParentChildren = _l.existsCheckableNodeInParentChildren;\n  var _m = useUtil(),\n    getTreeNodesByKeys = _m.getTreeNodesByKeys,\n    getLeafKeys = _m.getLeafKeys,\n    checkTreeDataSimpleModeFromObject = _m.checkTreeDataSimpleModeFromObject,\n    getValueWithUnit = _m.getValueWithUnit;\n  // 是否可用\n  var targetDisabled = useMemo(function () {\n    if (Util.isEmpty(disabled)) return DEFAULT_DISABLED;\n    return disabled;\n  }, [disabled]);\n  // 是否可选中\n  var targetSelectable = useMemo(function () {\n    if (Util.isEmpty(selectable)) return DEFAULT_SELECTABLE;\n    return selectable;\n  }, [selectable]);\n  // 是否可勾选\n  var targetCheckable = useMemo(function () {\n    if (Util.isEmpty(checkable)) return DEFAULT_TREE_NODE_CHECKABLE;\n    return checkable;\n  }, [checkable]);\n  // children数据\n  var targetChildrenData = useMemo(function () {\n    return children !== null && children !== void 0 ? children : [];\n  }, [children]);\n  // 是否有children\n  var hasChildren = useMemo(function () {\n    if (isLeaf === undefined) {\n      return !!targetChildrenData.length;\n    }\n    return !isLeaf;\n  }, [targetChildrenData]);\n  var targetCheckboxWidth = useMemo(function () {\n    var _a;\n    return (_a = getValueWithUnit(checkboxWidth, media)) !== null && _a !== void 0 ? _a : commonCheckboxWidth();\n  }, [checkboxWidth, commonCheckboxWidth(), media]);\n  var targetCheckboxGap = useMemo(function () {\n    var _a;\n    return (_a = getValueWithUnit(checkboxGap, media)) !== null && _a !== void 0 ? _a : commonCheckboxGap();\n  }, [checkboxGap, commonCheckboxGap(), media]);\n  var targetTitleGap = useMemo(function () {\n    var _a;\n    return (_a = getValueWithUnit(titleGap, media)) !== null && _a !== void 0 ? _a : commonTitleGap();\n  }, [titleGap, commonTitleGap(), media]);\n  var targetIconGap = useMemo(function () {\n    var _a;\n    return (_a = getValueWithUnit(iconGap, media)) !== null && _a !== void 0 ? _a : commonIconGap();\n  }, [iconGap, commonIconGap(), media]);\n  var targetIndent = useMemo(function () {\n    var _a;\n    return (_a = getValueWithUnit(indent, media)) !== null && _a !== void 0 ? _a : commonIndent();\n  }, [indent, commonIndent(), media]);\n  var targetRowGap = useMemo(function () {\n    return commonRowGap();\n  }, [commonRowGap()]);\n  // 1\n  //  1.1\n  //    1.1.1\n  //    1.1.2\n  var childrenElement = useMemo(function () {\n    return targetChildrenData.map(function (_treeNodeData) {\n      return /*#__PURE__*/React.createElement(TreeNodeContext.Provider, {\n        value: {\n          updateParentChecked: function (_a) {\n            var key = _a.key,\n              checked = _a.checked,\n              checkedKeys = _a.checkedKeys;\n            updateParentChecked({\n              key: key,\n              checked: checked,\n              checkedKeys: checkedKeys,\n              childrenData: targetChildrenData,\n              parentId: id,\n              next: next\n            });\n          },\n          existsCheckableNodeInParentChildren: function () {\n            return existsCheckableNodeInParentChildren(targetChildrenData);\n          }\n        }\n      }, /*#__PURE__*/React.createElement(TreeNode, __assign({\n        level: level + 1,\n        id: _treeNodeData[DEFAULT_TREE_UTIL_CONFIG.keyAttr]\n      }, _treeNodeData)));\n    });\n  }, [targetChildrenData]);\n  var checked = useMemo(function () {\n    return checkedKeys().includes(id);\n  }, [checkedKeys(), id]);\n  var isExpanded = expandedKeys().includes(id);\n  var isSelected = selectedKeys().includes(id);\n  /**\n   * onExpandedCombination\n   * @param e\n   */\n  function onExpandedCombination(e) {\n    if (!isExpanded) {\n      if (loadData) {\n        onLoadData(e);\n        return;\n      }\n    }\n    onExpanded(e);\n  }\n  /**\n   * onLoadData\n   * @description 动态加载数据\n   * @param e\n   */\n  function onLoadData(e) {\n    var _a;\n    if (isLock(id)) return;\n    // 如果当前节点已经加载过\n    if (loadedKeys().includes(id)) {\n      onExpanded(e);\n      return;\n    }\n    // 上锁\n    lock(id);\n    // 图标变成loading状态\n    update();\n    (_a = loadData === null || loadData === void 0 ? void 0 : loadData(nodeDataExtra)) === null || _a === void 0 ? void 0 : _a.then(function (childrenTreeData) {\n      setTreeData(function (_treeData) {\n        var _childrenTreeData = childrenTreeData;\n        var targetTreeDataSimpleMode = !!(teeDataSimpleMode === null || teeDataSimpleMode === void 0 ? void 0 : teeDataSimpleMode());\n        if (targetTreeDataSimpleMode) {\n          if (Util.isBoolean(targetTreeDataSimpleMode)) {\n            if (targetTreeDataSimpleMode) {\n              // @ts-ignore\n              _childrenTreeData = Util.arrayToAntdTreeSelect(_childrenTreeData, DEFAULT_TREE_UTIL_CONFIG);\n            }\n          } else if (Util.isObject(targetTreeDataSimpleMode) && checkTreeDataSimpleModeFromObject(targetTreeDataSimpleMode)) {\n            // @ts-ignore\n            _childrenTreeData = Util.arrayToAntdTreeSelect(_childrenTreeData, teeDataSimpleMode === null || teeDataSimpleMode === void 0 ? void 0 : teeDataSimpleMode());\n          }\n        }\n        var item = Util.findNodeByKey(_treeData, nodeDataExtra[DEFAULT_TREE_UTIL_CONFIG.keyAttr], {\n          keyAttr: DEFAULT_TREE_UTIL_CONFIG.keyAttr\n        });\n        if (item) {\n          // @ts-ignore\n          item.children = _childrenTreeData !== null && _childrenTreeData !== void 0 ? _childrenTreeData : [];\n        }\n        return JSON.parse(JSON.stringify(_treeData));\n      });\n      // 展开\n      onExpanded(e);\n      // 解锁\n      unLock(id);\n      // id加入loadedKeys\n      setLoadedKeys(function (_loadedKeys) {\n        return __spreadArray(__spreadArray([], _loadedKeys, true), [id], false);\n      });\n    }).catch(function (error) {\n      // 出现错误从checkedKeys去掉自己\n      if (checkedKeys().includes(id)) {\n        setLoadedKeys(function (_loadedKeys) {\n          return _loadedKeys.filter(function (key) {\n            return key !== id;\n          });\n        });\n      }\n      // 解锁\n      unLock(id);\n      // 图标还原(必须先unLock才能update，上下语句不能换位置)\n      update();\n      // 抛出异常\n      throw new Error(error);\n    });\n  }\n  /**\n   * onExpanded\n   */\n  function onExpanded(e) {\n    function _e(_targetExpandedKeys) {\n      var _a;\n      return {\n        expanded: !isExpanded,\n        expandedNodes: getTreeNodesByKeys({\n          treeData: (_a = treeData()) !== null && _a !== void 0 ? _a : [],\n          keys: _targetExpandedKeys\n        }),\n        node: nodeDataExtra,\n        event: e\n      };\n    }\n    if (isExpanded) {\n      // 关闭\n      setExpandedKeys(function (_expandedKeys) {\n        var targetExpandedKeys = (_expandedKeys !== null && _expandedKeys !== void 0 ? _expandedKeys : []).filter(function (_id) {\n          return _id !== id;\n        });\n        onExpand === null || onExpand === void 0 ? void 0 : onExpand(targetExpandedKeys, _e(targetExpandedKeys));\n        return targetExpandedKeys;\n      });\n      return;\n    }\n    // 展开\n    setExpandedKeys(function (_expandedKeys) {\n      var targetExpandedKeys = __spreadArray(__spreadArray([], _expandedKeys !== null && _expandedKeys !== void 0 ? _expandedKeys : [], true), [id], false);\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(targetExpandedKeys, _e(targetExpandedKeys));\n      return targetExpandedKeys;\n    });\n  }\n  /**\n   * onSelected\n   */\n  function onSelected(e) {\n    // 如果不能选中或者不可用\n    if (!targetSelectable || targetDisabled) return;\n    function _e(keys) {\n      var _a;\n      return {\n        selected: !isSelected,\n        selectedNodes: getTreeNodesByKeys({\n          treeData: (_a = treeData()) !== null && _a !== void 0 ? _a : [],\n          keys: keys\n        }),\n        node: nodeDataExtra,\n        event: e\n      };\n    }\n    // 多选\n    if (multiple()) {\n      if (isSelected) {\n        // 关闭\n        setSelectedKeys(function (_selectedKeys) {\n          var targetSelectedKeys = (_selectedKeys !== null && _selectedKeys !== void 0 ? _selectedKeys : []).filter(function (_id) {\n            return _id !== id;\n          });\n          onSelect === null || onSelect === void 0 ? void 0 : onSelect(targetSelectedKeys, _e(targetSelectedKeys));\n          return targetSelectedKeys;\n        });\n        return;\n      }\n      // 展开\n      setSelectedKeys(function (_selectedKeys) {\n        var targetSelectedKeys = __spreadArray(__spreadArray([], _selectedKeys !== null && _selectedKeys !== void 0 ? _selectedKeys : [], true), [id], false);\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(targetSelectedKeys, _e(targetSelectedKeys));\n        return targetSelectedKeys;\n      });\n      return;\n    }\n    // 单选\n    if (isSelected) {\n      setSelectedKeys([]);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect([], _e([]));\n      return;\n    }\n    setSelectedKeys([id]);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect([id], _e([id]));\n  }\n  /**\n   * onChecked\n   * @param {boolean} _checked\n   */\n  function onChecked(_checked) {\n    var _a;\n    var _b, _c;\n    var _checkedKeys = checkedKeys();\n    handleCheck({\n      node: (_a = {}, _a[DEFAULT_TREE_UTIL_CONFIG.keyAttr] = id, _a.children = children, _a),\n      checked: _checked,\n      checkedKeys: _checkedKeys,\n      checkStrictly: checkStrictly(),\n      next: next\n    });\n    setCheckedKeys(__spreadArray([], _checkedKeys, true));\n    var targetCheckedKeys = __spreadArray([], _checkedKeys, true);\n    // 如果是受控模式的时候\n    if (onCheck && checkStrictly()) {\n      // 需要筛选出叶子节点\n      targetCheckedKeys = getLeafKeys({\n        treeData: (_b = treeData()) !== null && _b !== void 0 ? _b : [],\n        keys: _checkedKeys\n      });\n    }\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(targetCheckedKeys, {\n      checked: _checked,\n      checkedNodes: getTreeNodesByKeys({\n        treeData: (_c = treeData()) !== null && _c !== void 0 ? _c : [],\n        keys: targetCheckedKeys\n      }),\n      node: nodeDataExtra\n    });\n  }\n  return (\n    /*#__PURE__*/\n    /* 一个Tree节点 */\n    React.createElement(\"li\", {\n      key: id,\n      className: classNames(selectorPrefix, \"\".concat(selectorPrefix, \"-\").concat(size()), (_b = {}, _b[\"\".concat(selectorPrefix, \"-disabled\")] = targetDisabled, _b))\n    }, /*#__PURE__*/React.createElement(Space.Group, {\n      direction: \"vertical\",\n      size: targetRowGap\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-info\")\n    }, treeCheckable() && targetCheckable && ( /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-info-checkbox\")),\n      style: {\n        width: targetCheckboxWidth,\n        marginInlineEnd: targetCheckboxGap\n      }\n    }, /*#__PURE__*/React.createElement(_Checkbox, {\n      value: id,\n      checked: checked,\n      disabled: targetDisabled,\n      onChange: onChecked\n    }))), treeCheckable() && !targetCheckable && existsCheckable() && ( /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-info-checkbox\"))\n    })), hasChildren && ( /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(selectorPrefix, \"-info-expanded\"),\n      onClick: onExpandedCombination\n    }, isLock(id) && /*#__PURE__*/React.createElement(LoadingOutlined, {\n      className: \"\".concat(selectorPrefix, \"-info-load\")\n    }), !isLock(id) && isExpanded && ((_d = switcherIcon === null || switcherIcon === void 0 ? void 0 : switcherIcon(isExpanded, nodeDataExtra)) !== null && _d !== void 0 ? _d : /*#__PURE__*/React.createElement(_MinusOutline, null)), !isLock(id) && !isExpanded && ((_f = switcherIcon === null || switcherIcon === void 0 ? void 0 : switcherIcon(isExpanded, nodeDataExtra)) !== null && _f !== void 0 ? _f : /*#__PURE__*/React.createElement(_AddOutline, null)))), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-info-title-wrapper\"), (_c = {}, _c[\"\".concat(selectorPrefix, \"-info-title-selected\")] = targetSelectable && isSelected, _c)),\n      style: {\n        padding: targetTitleGap\n      },\n      onClick: onSelected\n    }, !!targetIcon && ( /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(selectorPrefix, \"-info-icon\"),\n      style: {\n        marginInlineEnd: targetIconGap\n      }\n    }, targetIcon)), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(selectorPrefix, \"-info-title\")\n    }, (_g = titleRender === null || titleRender === void 0 ? void 0 : titleRender(nodeDataExtra)) !== null && _g !== void 0 ? _g : title))), hasChildren && isExpanded && ( /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"\".concat(selectorPrefix, \"-children\"),\n      style: {\n        paddingInlineStart: targetIndent\n      }\n    }, /*#__PURE__*/React.createElement(Space.Group, {\n      direction: \"vertical\",\n      size: targetRowGap\n    }, childrenElement)))))\n  );\n});\nTreeNode.displayName = 'TreeNode';\nexport default TreeNode;"],"names":["_AddOutline","_MinusOutline","_Checkbox","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","ar","l","Array","slice","concat","useUpdate","classNames","React","memo","useContext","useMemo","LoadingOutlined","ConfigProvider","Space","Util","DEFAULT_DISABLED","DEFAULT_SELECTABLE","DEFAULT_TREE_NODE_CHECKABLE","DEFAULT_TREE_UTIL_CONFIG","TreeContext","TreeNodeContext","useChecked","useLoadedLocks","useUtil","selectorPrefix","TreeNode","_a","id","level","isLeaf","title","checkable","disabled","selectable","props","checkboxWidth","checkboxGap","titleGap","iconGap","indent","children","_h","setSelectedKeys","setExpandedKeys","setCheckedKeys","setLoadedKeys","setTreeData","selectedKeys","expandedKeys","checkedKeys","loadedKeys","teeDataSimpleMode","loadData","size","multiple","treeCheckable","checkStrictly","treeData","icon","commonCheckboxWidth","commonCheckboxGap","commonTitleGap","commonIconGap","commonIndent","commonRowGap","rowGap","titleRender","switcherIcon","onSelect","onExpand","onCheck","update","_j","lock","unLock","isLock","media","Context","nodeDataExtra","key","targetIcon","_k","next","updateParentChecked","existsCheckable","existsCheckableNodeInParentChildren","_l","handleCheck","_m","getTreeNodesByKeys","getLeafKeys","checkTreeDataSimpleModeFromObject","getValueWithUnit","targetDisabled","isEmpty","targetSelectable","targetCheckable","targetChildrenData","hasChildren","undefined","targetCheckboxWidth","targetCheckboxGap","targetTitleGap","targetIconGap","targetIndent","targetRowGap","childrenElement","map","_treeNodeData","createElement","Provider","value","checked","childrenData","parentId","keyAttr","includes","isExpanded","isSelected","onExpanded","e","_e","_targetExpandedKeys","expanded","expandedNodes","keys","node","event","_expandedKeys","targetExpandedKeys","filter","_id","className","_b","Group","direction","style","width","marginInlineEnd","onChange","_checked","_c","_checkedKeys","targetCheckedKeys","checkedNodes","onClick","then","childrenTreeData","_treeData","_childrenTreeData","targetTreeDataSimpleMode","item","isBoolean","arrayToAntdTreeSelect","isObject","findNodeByKey","JSON","parse","stringify","_loadedKeys","catch","error","Error","_d","_f","padding","_selectedKeys","targetSelectedKeys","selected","selectedNodes","_g","paddingInlineStart","displayName"],"mappings":"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"}