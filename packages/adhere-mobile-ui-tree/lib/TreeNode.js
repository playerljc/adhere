"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,c=t.length;a<c;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},antd_mobile_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("antd-mobile")),antd_mobile_icons_1=require("antd-mobile-icons"),classnames_1=__importDefault(require("classnames")),react_1=__importStar(require("react")),adhere_ui_space_1=__importDefault(require("@baifendian/adhere-ui-space")),Constant_1=require("./Constant"),TreeContext_1=__importDefault(require("./TreeContext")),TreeNodeContext_1=__importDefault(require("./TreeNodeContext")),useChecked_1=__importDefault(require("./useChecked")),selectorPrefix="adhere-mobile-ui-tree-node",TreeNode=(0,react_1.memo)(function(e){var n=e.id,t=e.level,r=(e.isLeaf,e.icon),a=e.title,c=e.checkable,l=e.disabled,i=e.selectable,u=e.children,o=e.titleRender,e=(0,react_1.useContext)(TreeContext_1.default),d=e.setSelectedKeys,s=e.setExpandedKeys,_=e.setCheckedKeys,f=e.selectedKeys,m=e.expandedKeys,p=e.checkedKeys,h=e.rowGap,y=e.size,b=e.multiple,e=e.checkable,k=(0,react_1.useContext)(TreeNodeContext_1.default).updateParentChecked,C=(0,react_1.useMemo)(function(){return null==l?Constant_1.DEFAULT_DISABLED:l},[l]),v=(0,react_1.useMemo)(function(){return null==i?Constant_1.DEFAULT_SELECTABLE:i},[i]),x=(0,react_1.useMemo)(function(){return null==c?Constant_1.DEFAULT_TREE_NODE_CHECKABLE:c},[c]),E=(0,react_1.useMemo)(function(){return null!=u?u:[]},[u]),P=(0,react_1.useMemo)(function(){return!!E.length},[E]),N=(0,useChecked_1.default)(),T=N.handleCheck,D=N.updateParentChecked,N=(0,react_1.useMemo)(function(){return E.map(function(e){return react_1.default.createElement(TreeNodeContext_1.default.Provider,{value:{updateParentChecked:function(e){var t=e.key,r=e.checked,e=e.checkedKeys;D({key:t,checked:r,checkedKeys:e,childrenData:E,parentId:n,next:k})}}},react_1.default.createElement(TreeNode,__assign({level:t+1,icon:r,titleRender:o,id:e.key},e)))})},[E]),g=(0,react_1.useMemo)(function(){return p().includes(n)},[p(),n]),A=m().includes(n),O=f().includes(n);return react_1.default.createElement("li",{key:n,className:(0,classnames_1.default)(selectorPrefix,"".concat(selectorPrefix,"-").concat(y()),((m={})["".concat(selectorPrefix,"-disabled")]=C,m))},react_1.default.createElement(adhere_ui_space_1.default.Group,{direction:"vertical",size:h()},react_1.default.createElement("div",{className:"".concat(selectorPrefix,"-info")},e()&&x&&react_1.default.createElement("span",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-info-checkbox"))},react_1.default.createElement(antd_mobile_1.Checkbox,{value:n,checked:g,disabled:C,onChange:function(e){var t=p();T({checkedKeys:t,checked:e,node:{key:n,children:u},next:k}),_(__spreadArray([],t,!0))}})),P&&react_1.default.createElement("span",{className:"".concat(selectorPrefix,"-info-expanded"),onClick:function(){s(A?function(e){return(null!=e?e:[]).filter(function(e){return e!==n})}:function(e){return __spreadArray(__spreadArray([],null!=e?e:[],!0),[n],!1)})}},A&&(null!=(f=null==r?void 0:r(A))?f:react_1.default.createElement(antd_mobile_icons_1.MinusOutline,null)),!A&&(null!=(y=null==r?void 0:r(A))?y:react_1.default.createElement(antd_mobile_icons_1.AddOutline,null))),react_1.default.createElement("span",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-info-title"),((m={})["".concat(selectorPrefix,"-info-title-selected")]=v&&O,m)),onClick:function(){if(v)return b()?O?void d(function(e){return(null!=e?e:[]).filter(function(e){return e!==n})}):void d(function(e){return __spreadArray(__spreadArray([],null!=e?e:[],!0),[n],!1)}):void d(O?[]:[n])}},null!=(e=null==o?void 0:o({key:n,title:a,disabled:l,selectable:i,checkable:c,children:u}))?e:a)),P&&A&&react_1.default.createElement("ul",{className:"".concat(selectorPrefix,"-children")},react_1.default.createElement(adhere_ui_space_1.default.Group,{direction:"vertical",size:h()},N))))});TreeNode.displayName="TreeNode",exports.default=TreeNode;
//# sourceMappingURL=TreeNode.js.map
