"use strict";var __spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,c=0,u=t.length;c<u;c++)!r&&c in t||((r=r||Array.prototype.slice.call(t,0,c))[c]=t[c]);return e.concat(r||Array.prototype.slice.call(t))},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},lodash_uniq_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("lodash.uniq"))),adhere_util_1=__importDefault(require("@baifendian/adhere-util")),Constant_1=require("./Constant");function useChecked(){function a(e){return null==(e=null==e?void 0:e.filter(function(e){return!("checkable"in e)||e.checkable}))?void 0:e.filter(function(e){return!("disabled"in e&&e.disabled)})}function i(e){var t=[e[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]],e=a(null!=(e=e.children)?e:[]);return e&&e.forEach(function(e){t=t.concat(i(e))}),t}return{handleCheck:function(e){var t=e.node,n=e.checked,r=e.checkedKeys,c=e.checkStrictly,e=e.next;c?(c=i(t),n?c.forEach(function(e){r.includes(e)||r.push(e)}):c.forEach(function(e){e=r.indexOf(e);-1<e&&r.splice(e,1)}),null!=e&&e(((c={})[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]=t[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr],c.checked=n,c.checkedKeys=r,c))):n?r.includes(t[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr])||r.push(t[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]):r.includes(t[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr])&&r.splice(r.indexOf(t[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]),1)},updateParentChecked:function(e){var t=e.key,n=e.checked,r=e.checkedKeys,c=e.parentId,u=e.childrenData,e=e.next,i=!1,u=a(u);n?(i=(null==u?void 0:u.filter(function(e){return e.key!==t}).map(function(e){return e.key})).every(function(e){return r.includes(e)}))&&!r.includes(c)&&r.push(c):r.includes(c)&&r.splice(r.findIndex(function(e){return e===c}),1),null!=e&&e(((n={})[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]=c,n.checked=i,n.checkedKeys=r,n))},existsCheckableNodeInParentChildren:function(e){return!!e&&(null==e?void 0:e.some(function(e){return!("checkable"in e&&!e.checkable)}))},getDefaultCheckedKeysWithCheckStrictly:function(u,e){var n=__spreadArray([],e,!0);return e.forEach(function(e){var t=adhere_util_1.default.findNodeByKey(u,e,{keyAttr:Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr}),t=(t&&(t=i(t),n.push.apply(n,__spreadArray([e],t,!1))),adhere_util_1.default.findParentNodeByKey(u,e,{keyAttr:Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr}));t&&!function e(t){var n=t.key,r=t.checkedKeys,c=t.parentId,t=t.childrenData,t=((null==t?void 0:t.filter(function(e){return e.key!==n}).map(function(e){return e[Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr]})).every(function(e){return r.includes(e)})&&!r.includes(c)&&r.push(c),adhere_util_1.default.findParentNodeByKey(u,c,{keyAttr:Constant_1.DEFAULT_TREE_UTIL_CONFIG.keyAttr}));t&&e({key:c,checkedKeys:r,parentId:t.key,childrenData:a(t.children)})}({key:e,checkedKeys:n,parentId:t.key,childrenData:a(t.children)})}),(0,lodash_uniq_1.default)(n)}}}exports.default=useChecked;
//# sourceMappingURL=useChecked.js.map
