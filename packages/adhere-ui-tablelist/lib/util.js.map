{"version":3,"file":"util.js","sources":["util.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/*\r\n * @Description: 表格列表\r\n * @Author: yumeng.qin\r\n * @Date: 2021-04-27 16:23:26\r\n * @LastEditor: yumeng.qin\r\n * @LastEditTime: 2021-05-21 10:41:27\r\n */\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar antd_1 = require(\"antd\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar moment_1 = __importDefault(require(\"moment\"));\r\nvar adhere_ui_formitemcreator_1 = __importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar Util = /** @class */ (function () {\r\n    function Util(ins) {\r\n        var _this = this;\r\n        /**\r\n         * 获取对应mode的属性\r\n         */\r\n        this.getModeProps = function () {\r\n            return __assign({ rowKey: 'id' }, _this.ins.props[_this.ins.props.mode || 'table']);\r\n        };\r\n        /**\r\n         * 获取默认显示的列项\r\n         */\r\n        this.getDefaultSelectedColumnKeys = function (columns) {\r\n            var showNumber = _this.getModeProps().showNumber;\r\n            var result = (columns || [])\r\n                .filter(function (v) { return v.show || !v.hasOwnProperty('show'); })\r\n                .map(function (v) { return v.key; });\r\n            if (showNumber && !result.includes('xuhao')) {\r\n                result.unshift((showNumber === null || showNumber === void 0 ? void 0 : showNumber.key) || 'xuhao');\r\n            }\r\n            return result;\r\n        };\r\n        /**\r\n         * 获取rowSelection 默认支持跨页选中，如果想要跨页取消设置clearOnChange为true\r\n         */\r\n        this.getRowSelection = function () {\r\n            var _a = _this.ins.state, _b = _a.selectedRowKeys, selectedRowKeys = _b === void 0 ? [] : _b, _c = _a.selectedRows, selectedRows = _c === void 0 ? [] : _c, selectAll = _a.selectAll;\r\n            var rowSelection = _this.getModeProps().rowSelection;\r\n            return rowSelection\r\n                ? __assign(__assign({ \r\n                    // 在表格变化的时候是否清空选中\r\n                    clearOnChange: false }, rowSelection), { onChange: _this.onSelectChange, selectedRowKeys: rowSelection.selectedRowKeys || selectedRowKeys, \r\n                    // 一下是自定义的变量\r\n                    selectedRows: selectedRows,\r\n                    // 是否选中全部数据\r\n                    selectAll: selectAll }) : null;\r\n        };\r\n        /**\r\n         * 获取排序后的表格数据\r\n         */\r\n        this.getSortDataSource = function () {\r\n            return _this.ins.SortableTableRef.state.dataSource;\r\n        };\r\n        /**\r\n         * 获取参数\r\n         */\r\n        this.getParams = function () {\r\n            var params = _this.ins.props.params;\r\n            var formParams = {};\r\n            if (_this.ins.searchFormRef && _this.ins.searchFormRef.current) {\r\n                formParams = _this.ins.searchFormRef.current.getFieldsValue();\r\n            }\r\n            return __assign(__assign(__assign({}, formParams), _this.ins.state.params), params);\r\n        };\r\n        /**\r\n         * 获取表单统一配置\r\n         * @param {*} Formcolumns\r\n         */\r\n        this.getFormColumns = function (Formcolumns, size, searchNow) {\r\n            return Formcolumns.map(function (temp) {\r\n                var t = temp;\r\n                t.contentProps = t.contentProps || {};\r\n                t.contentProps.size = size;\r\n                if (t.type === adhere_ui_formitemcreator_1.default.RANGEPICKER || t.type === adhere_ui_formitemcreator_1.default.SELECT) {\r\n                    t.contentProps = __assign({ getPopupContainer: function () { return _this.ins.TableListRef; } }, t.contentProps);\r\n                }\r\n                if (t.type === adhere_ui_formitemcreator_1.default.SELECT) {\r\n                    t.contentProps = __assign({ style: { width: '150px' }, allowClear: true }, t.contentProps);\r\n                }\r\n                if (searchNow) {\r\n                    t.contentProps = __assign({ onSearch: t.type === adhere_ui_formitemcreator_1.default.SEARCH ? function (v) {\r\n                            var _a;\r\n                            return _this.onSearch((_a = {}, _a[t.name] = v, _a));\r\n                        } : null, onPressEnter: t.type !== adhere_ui_formitemcreator_1.default.SEARCH\r\n                            ? function (e) {\r\n                                var _a;\r\n                                return _this.onSearch((_a = {},\r\n                                    _a[t.name] = [\r\n                                        adhere_ui_formitemcreator_1.default.INPUT,\r\n                                        adhere_ui_formitemcreator_1.default.TEXTAREA,\r\n                                        adhere_ui_formitemcreator_1.default.NUMBER,\r\n                                    ].includes(t.type)\r\n                                        ? e.target.value\r\n                                        : e,\r\n                                    _a));\r\n                            }\r\n                            : null }, t.contentProps);\r\n                }\r\n                return t;\r\n            });\r\n        };\r\n        /**\r\n         * 获取分页\r\n         */\r\n        this.getPagination = function (pagination) {\r\n            var params = _this.ins.state.params;\r\n            return __assign({ size: 'default', defaultPageSize: 10, current: params.page, pageSize: params.limit, showSizeChanger: true, pageSizeOptions: ['10', '20', '50'], showQuickJumper: true, showTotal: function (total, _a) {\r\n                    var page = _a[0], pageSize = _a[1];\r\n                    return \"\\u5F53\\u524D \" + page + \"-\" + pageSize + \"/\\u5171 \" + total + \" \\u6761\";\r\n                }, onChange: _this.onPageChange, onShowSizeChange: _this.onPageChange }, pagination);\r\n        };\r\n        /**\r\n         * 获取表格的配置项\r\n         */\r\n        this.getTableColumns = function () {\r\n            var params = _this.ins.state.params;\r\n            var _a = _this.getModeProps(), columns = _a.columns, showNumber = _a.showNumber;\r\n            var tableColumns = (columns || []).map(function (item) {\r\n                var _a;\r\n                return (__assign(__assign({}, item), { render: function (text, record, index) {\r\n                        var result = '';\r\n                        if (item.render) {\r\n                            // 如果有render根据传入的显示\r\n                            result = item.render(text, record, index);\r\n                        }\r\n                        else if (item.valueType === 'date') {\r\n                            // 日期类型默认显示\r\n                            result = text ? moment_1.default(text).format('L') : '-';\r\n                        }\r\n                        else if (item.valueType === 'datetime') {\r\n                            // 带时间的日期类型默认显示\r\n                            result = text ? moment_1.default(text).format('LLL') : '-';\r\n                        }\r\n                        else if (item.valueType === 'map' && item.map) {\r\n                            // 根据数组匹配进行显示\r\n                            var current = text && (item.map || []).find(function (v) { return v.value.toString() === text.toString(); });\r\n                            result = text && current ? current.label : '-';\r\n                        }\r\n                        else {\r\n                            // 默认显示\r\n                            result = text;\r\n                        }\r\n                        // ellipsis 超出...\r\n                        if (item === null || item === void 0 ? void 0 : item.ellipsis) {\r\n                            return (react_1.default.createElement(antd_1.Tooltip, { title: result, placement: \"topLeft\" }, result));\r\n                        }\r\n                        return result;\r\n                    }, filtered: ((_a = item.filters) === null || _a === void 0 ? void 0 : _a.length) && params[item.key] }));\r\n            });\r\n            // 如果showNumber 则添加序号列\r\n            if (showNumber && !tableColumns.find(function (v) { return v.key === 'xuhao'; })) {\r\n                tableColumns.unshift(__assign({ title: adhere_util_intl_1.default.v('序号'), dataIndex: 'xuhao', key: 'xuhao', width: 80, render: function (v, r, i) {\r\n                        return (params.page - 1) * params.limit + i + 1;\r\n                    } }, showNumber));\r\n            }\r\n            return tableColumns;\r\n        };\r\n        /*\r\n         * 获取表格或者列表的loading\r\n         */\r\n        this.getLoading = function (loading) {\r\n            if (loading || _this.ins.state.loading) {\r\n                return loading && loading.hasOwnProperty('size') ? loading : { size: 'large' };\r\n            }\r\n            return false;\r\n        };\r\n        /**\r\n         * 发起请求\r\n         * @param {*} params\r\n         */\r\n        this.fetchList = function (params) {\r\n            var fetchParams = __assign(__assign({}, _this.getParams()), params);\r\n            if (_this.ins.props.request) {\r\n                _this.ins.setState({ loading: true });\r\n                _this.ins.props.request(fetchParams).then(function () {\r\n                    _this.ins.setState({ loading: false });\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * 搜索\r\n         */\r\n        this.onSearch = function (searchParams) {\r\n            var params = _this.ins.state.params;\r\n            // 当rowSelection.clearOnChange为true 搜索的时候会清空\r\n            var rowSelection = _this.getRowSelection();\r\n            if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\r\n                rowSelection.onChange([], []);\r\n            }\r\n            _this.ins.setState({\r\n                params: __assign(__assign(__assign({}, params), searchParams), { page: 1 }),\r\n            }, function () {\r\n                _this.fetchList();\r\n            });\r\n        };\r\n        /**\r\n         * 重置\r\n         */\r\n        this.onResetSearch = function () {\r\n            var params = _this.ins.state.params;\r\n            var rowSelection = _this.getRowSelection();\r\n            if (_this.ins.searchFormRef && _this.ins.searchFormRef.current) {\r\n                _this.ins.searchFormRef.current.resetFields();\r\n            }\r\n            params.page = 1;\r\n            // 重置的时候清空\r\n            if (rowSelection) {\r\n                rowSelection.onChange([], []);\r\n            }\r\n            _this.ins.setState({ params: params }, function () {\r\n                _this.fetchList();\r\n            });\r\n        };\r\n        /**\r\n         * 列设置变化\r\n         */\r\n        this.onSettingChange = function (selectedColumnKeys) {\r\n            _this.ins.setState({ selectedColumnKeys: selectedColumnKeys });\r\n        };\r\n        /**\r\n         * 列设置拖拽排序完毕\r\n         */\r\n        this.onSettingSortEnd = function (_a) {\r\n            var oldIndex = _a.oldIndex, newIndex = _a.newIndex;\r\n            var tableColumns = _this.ins.state.tableColumns;\r\n            if (oldIndex !== newIndex) {\r\n                var oldItem = tableColumns[oldIndex];\r\n                var newData = tableColumns.filter(function (_, i) { return i !== oldIndex; });\r\n                newData.splice(newIndex, 0, oldItem);\r\n                _this.ins.setState({ tableColumns: newData });\r\n            }\r\n        };\r\n        /**\r\n         * 表格变化\r\n         * @param {*} _\r\n         * @param {*} filters\r\n         * @param {*} sorter\r\n         */\r\n        this.onTableChange = function (keys, filters, sorter) {\r\n            var _a;\r\n            if (!lodash_1.isEmpty(sorter) || !lodash_1.isEmpty(filters)) {\r\n                var params = __assign(__assign({}, _this.ins.state.params), { order: (_a = sorter === null || sorter === void 0 ? void 0 : sorter.order) === null || _a === void 0 ? void 0 : _a.replace('end', ''), sidx: sorter === null || sorter === void 0 ? void 0 : sorter.field });\r\n                for (var filterKey in filters) {\r\n                    params[filterKey] = filters[filterKey].join(',');\r\n                    params.page = 1;\r\n                }\r\n                // 当rowSelection.clearOnChange为true 表格变化会清空\r\n                var rowSelection = _this.getRowSelection();\r\n                if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\r\n                    rowSelection.onChange([], []);\r\n                }\r\n                _this.ins.setState({ params: params }, function () { return _this.fetchList(); });\r\n            }\r\n        };\r\n        /**\r\n         * 选项变化\r\n         */\r\n        this.onSelectChange = function (selectedRowKeys, selectedRows) {\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, rowSelection = _a.rowSelection;\r\n            var selectAll = _this.ins.state.selectAll;\r\n            if (_this.ins.state.selectAll) {\r\n                var allKeys = dataSource.map(function (v) { return v[rowKey]; });\r\n                var exceptKeys = lodash_1.union(selectAll.exceptKeys || [], lodash_1.difference(allKeys, selectedRowKeys));\r\n                _this.ins.setState({ selectAll: exceptKeys.length ? { exceptKeys: exceptKeys } : true });\r\n            }\r\n            if (rowSelection === null || rowSelection === void 0 ? void 0 : rowSelection.onChange) {\r\n                rowSelection.onChange(selectedRowKeys, selectedRows);\r\n            }\r\n            else {\r\n                _this.ins.setState({ selectedRowKeys: selectedRowKeys, selectedRows: selectedRows });\r\n            }\r\n        };\r\n        /**\r\n         * 分页变化\r\n         * @param {*} page\r\n         * @param {*} limit\r\n         */\r\n        this.onPageChange = function (page, limit) {\r\n            var params = _this.ins.state.params;\r\n            // 当rowSelection.clearOnChange为true 切页面会清空\r\n            var rowSelection = _this.getRowSelection();\r\n            if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\r\n                rowSelection.onChange([], []);\r\n            }\r\n            _this.ins.setState({\r\n                params: __assign(__assign({}, params), { page: page, limit: limit }),\r\n            }, function () { return _this.fetchList(); });\r\n        };\r\n        /*\r\n         * 表格删除时候操作，刷列表\r\n         */\r\n        this.onDelete = function (deletedKeys) {\r\n            if (deletedKeys === void 0) { deletedKeys = []; }\r\n            var _a = _this.getModeProps(), pagination = _a.pagination, rowKey = _a.rowKey;\r\n            var total = pagination.total;\r\n            var _b = _this.ins.state.params, page = _b.page, limit = _b.limit;\r\n            if (total % limit === 1 && page === Math.ceil(total / limit)) {\r\n                _this.ins.setState({\r\n                    params: __assign(__assign({}, _this.ins.state.params), { page: page - deletedKeys.length || 1 }),\r\n                }, function () { return _this.fetchList(); });\r\n                return;\r\n            }\r\n            var rowSelection = _this.getRowSelection();\r\n            if (rowSelection) {\r\n                var selectedRowKeys = rowSelection.selectedRowKeys.filter(function (v) { return !deletedKeys.includes(v); });\r\n                var selectedRows = rowSelection.selectedRows.filter(function (v) { return !deletedKeys.includes(v[rowKey]); });\r\n                rowSelection.onChange(selectedRowKeys, selectedRows);\r\n            }\r\n            _this.fetchList();\r\n        };\r\n        this.ins = ins;\r\n    }\r\n    return Util;\r\n}());\r\nexports.default = Util;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","antd_1","lodash_1","moment_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","Util","ins","_this","getModeProps","rowKey","props","mode","getDefaultSelectedColumnKeys","columns","showNumber","result","filter","v","show","map","key","includes","unshift","getRowSelection","_a","state","_b","selectedRowKeys","_c","selectedRows","selectAll","rowSelection","clearOnChange","onChange","onSelectChange","getSortDataSource","SortableTableRef","dataSource","getParams","params","formParams","searchFormRef","current","getFieldsValue","getFormColumns","Formcolumns","size","searchNow","temp","contentProps","type","RANGEPICKER","SELECT","getPopupContainer","TableListRef","style","width","allowClear","onSearch","SEARCH","name","onPressEnter","e","INPUT","TEXTAREA","NUMBER","target","getPagination","pagination","defaultPageSize","page","pageSize","limit","showSizeChanger","pageSizeOptions","showQuickJumper","showTotal","total","onPageChange","onShowSizeChange","getTableColumns","tableColumns","item","render","text","record","index","valueType","format","find","toString","label","ellipsis","createElement","Tooltip","title","placement","filtered","filters","dataIndex","r","getLoading","loading","fetchList","fetchParams","request","setState","then","searchParams","onResetSearch","resetFields","onSettingChange","selectedColumnKeys","onSettingSortEnd","oldIndex","newIndex","oldItem","newData","_","splice","onTableChange","keys","sorter","isEmpty","filterKey","order","replace","sidx","field","join","allKeys","exceptKeys","union","difference","onDelete","deletedKeys","Math","ceil"],"mappings":"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"}