{"version":3,"file":"Util.js","sources":["Util.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*\n * @Description: 表格列表\n * @Author: yumeng.qin\n * @Date: 2021-04-27 16:23:26\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-21 10:41:27\n */\nvar antd_1 = require(\"antd\");\nvar dayjs_1 = __importDefault(require(\"dayjs\"));\nvar lodash_1 = require(\"lodash\");\nvar react_1 = __importDefault(require(\"react\"));\nvar adhere_ui_formitemcreator_1 = __importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\nvar Util = /** @class */function () {\n  function Util(ins) {\n    var _this = this;\n    /**\n     * 获取对应mode的属性\n     */\n    this.getModeProps = function () {\n      return __assign({\n        rowKey: 'id'\n      }, _this.ins.props[_this.ins.props.mode || 'table']);\n    };\n    /**\n     * 获取默认显示的列项\n     */\n    this.getDefaultSelectedColumnKeys = function (columns) {\n      var showNumber = _this.getModeProps().showNumber;\n      var result = (columns || []).filter(function (v) {\n        return v.show || !v.hasOwnProperty('show');\n      }).map(function (v) {\n        return v.key;\n      });\n      if (showNumber && !result.includes('xuhao')) {\n        result.unshift((showNumber === null || showNumber === void 0 ? void 0 : showNumber.key) || 'xuhao');\n      }\n      return result;\n    };\n    /**\n     * 获取rowSelection 默认支持跨页选中，如果想要跨页取消设置clearOnChange为true\n     */\n    this.getRowSelection = function () {\n      var _a = _this.ins.state,\n        _b = _a.selectedRowKeys,\n        selectedRowKeys = _b === void 0 ? [] : _b,\n        _c = _a.selectedRows,\n        selectedRows = _c === void 0 ? [] : _c,\n        selectAll = _a.selectAll;\n      var rowSelection = _this.getModeProps().rowSelection;\n      return rowSelection ? __assign(__assign({\n        // 在表格变化的时候是否清空选中\n        clearOnChange: false\n      }, rowSelection), {\n        onChange: _this.onSelectChange,\n        selectedRowKeys: rowSelection.selectedRowKeys || selectedRowKeys,\n        // 一下是自定义的变量\n        selectedRows: selectedRows,\n        // 是否选中全部数据\n        selectAll: selectAll\n      }) : null;\n    };\n    /**\n     * 获取排序后的表格数据\n     */\n    this.getSortDataSource = function () {\n      return _this.ins.SortableTableRef.state.dataSource;\n    };\n    /**\n     * 获取参数\n     */\n    this.getParams = function () {\n      var params = _this.ins.props.params;\n      var formParams = {};\n      if (_this.ins.searchFormRef && _this.ins.searchFormRef.current) {\n        formParams = _this.ins.searchFormRef.current.getFieldsValue();\n      }\n      return __assign(__assign(__assign({}, formParams), _this.ins.state.params), params);\n    };\n    /**\n     * 获取表单统一配置\n     * @param {*} Formcolumns\n     */\n    this.getFormColumns = function (Formcolumns, size, searchNow) {\n      return Formcolumns.map(function (temp) {\n        var _a;\n        var t = temp;\n        t.contentProps = (_a = t.contentProps) !== null && _a !== void 0 ? _a : {};\n        t.contentProps.size = size;\n        if (t.type === adhere_ui_formitemcreator_1.default.RANGEPICKER || t.type === adhere_ui_formitemcreator_1.default.SELECT) {\n          t.contentProps = __assign({\n            getPopupContainer: function getPopupContainer() {\n              return _this.ins.TableListRef;\n            }\n          }, t.contentProps);\n        }\n        if (t.type === adhere_ui_formitemcreator_1.default.SELECT) {\n          t.contentProps = __assign({\n            style: {\n              width: '150px'\n            },\n            allowClear: true\n          }, t.contentProps);\n        }\n        if (searchNow) {\n          t.contentProps = __assign({\n            onSearch: t.type === adhere_ui_formitemcreator_1.default.SEARCH ? function (v) {\n              var _a;\n              return _this.onSearch((_a = {}, _a[t.name] = v, _a));\n            } : null,\n            onPressEnter: t.type !== adhere_ui_formitemcreator_1.default.SEARCH ? function (e) {\n              var _a;\n              return _this.onSearch((_a = {}, _a[t.name] = [adhere_ui_formitemcreator_1.default.INPUT, adhere_ui_formitemcreator_1.default.TEXTAREA, adhere_ui_formitemcreator_1.default.NUMBER].includes(t.type) ? e.target.value : e, _a));\n            } : null\n          }, t.contentProps);\n        }\n        return t;\n      });\n    };\n    /**\n     * 获取分页\n     */\n    this.getPagination = function (pagination) {\n      var params = _this.ins.state.params;\n      return __assign({\n        size: 'default',\n        defaultPageSize: 10,\n        current: params.page,\n        pageSize: params.limit,\n        showSizeChanger: true,\n        pageSizeOptions: ['10', '20', '50'],\n        showQuickJumper: true,\n        showTotal: function showTotal(total, _a) {\n          var page = _a[0],\n            pageSize = _a[1];\n          return \"\\u5F53\\u524D \".concat(page, \"-\").concat(pageSize, \"/\\u5171 \").concat(total, \" \\u6761\");\n        },\n        onChange: _this.onPageChange,\n        onShowSizeChange: _this.onPageChange\n      }, pagination);\n    };\n    /**\n     * 获取表格的配置项\n     */\n    this.getTableColumns = function () {\n      var params = _this.ins.state.params;\n      var _a = _this.getModeProps(),\n        columns = _a.columns,\n        showNumber = _a.showNumber;\n      var tableColumns = (columns || []).map(function (item) {\n        var _a;\n        return __assign(__assign({}, item), {\n          render: function render(text, record, index) {\n            var result = '';\n            if (item.render) {\n              // 如果有render根据传入的显示\n              result = item.render(text, record, index);\n            } else if (item.valueType === 'date') {\n              // 日期类型默认显示\n              result = text ? (0, dayjs_1.default)(text).format('L') : '-';\n            } else if (item.valueType === 'datetime') {\n              // 带时间的日期类型默认显示\n              result = text ? (0, dayjs_1.default)(text).format('LLL') : '-';\n            } else if (item.valueType === 'map' && item.map) {\n              // 根据数组匹配进行显示\n              var current = text && (item.map || []).find(function (v) {\n                return v.value.toString() === text.toString();\n              });\n              result = text && current ? current.label : '-';\n            } else {\n              // 默认显示\n              result = text;\n            }\n            // ellipsis 超出...\n            if (item === null || item === void 0 ? void 0 : item.ellipsis) {\n              return react_1.default.createElement(antd_1.Tooltip, {\n                title: result,\n                placement: \"topLeft\"\n              }, result);\n            }\n            return result;\n          },\n          filtered: ((_a = item.filters) === null || _a === void 0 ? void 0 : _a.length) && params[item.key]\n        });\n      });\n      // 如果showNumber 则添加序号列\n      if (showNumber && !tableColumns.find(function (v) {\n        return v.key === 'xuhao';\n      })) {\n        tableColumns.unshift(__assign({\n          title: adhere_util_intl_1.default.v('序号'),\n          dataIndex: 'xuhao',\n          key: 'xuhao',\n          width: 80,\n          render: function render(v, r, i) {\n            return (params.page - 1) * params.limit + i + 1;\n          }\n        }, showNumber));\n      }\n      return tableColumns;\n    };\n    /*\n     * 获取表格或者列表的loading\n     */\n    this.getLoading = function (loading) {\n      if (loading || _this.ins.state.loading) {\n        return loading && loading.hasOwnProperty('size') ? loading : {\n          size: 'large'\n        };\n      }\n      return false;\n    };\n    /**\n     * 发起请求\n     * @param {*} params\n     */\n    this.fetchList = function (params) {\n      var fetchParams = __assign(__assign({}, _this.getParams()), params);\n      if (_this.ins.props.request) {\n        _this.ins.setState({\n          loading: true\n        });\n        _this.ins.props.request(fetchParams).then(function () {\n          _this.ins.setState({\n            loading: false\n          });\n        });\n      }\n    };\n    /**\n     * 搜索\n     */\n    this.onSearch = function (searchParams) {\n      var params = _this.ins.state.params;\n      // 当rowSelection.clearOnChange为true 搜索的时候会清空\n      var rowSelection = _this.getRowSelection();\n      if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\n        rowSelection.onChange([], []);\n      }\n      _this.ins.setState({\n        params: __assign(__assign(__assign({}, params), searchParams), {\n          page: 1\n        })\n      }, function () {\n        _this.fetchList();\n      });\n    };\n    /**\n     * 重置\n     */\n    this.onResetSearch = function () {\n      var params = _this.ins.state.params;\n      var rowSelection = _this.getRowSelection();\n      if (_this.ins.searchFormRef && _this.ins.searchFormRef.current) {\n        _this.ins.searchFormRef.current.resetFields();\n      }\n      params.page = 1;\n      // 重置的时候清空\n      if (rowSelection) {\n        rowSelection.onChange([], []);\n      }\n      _this.ins.setState({\n        params: params\n      }, function () {\n        _this.fetchList();\n      });\n    };\n    /**\n     * 列设置变化\n     */\n    this.onSettingChange = function (selectedColumnKeys) {\n      _this.ins.setState({\n        selectedColumnKeys: selectedColumnKeys\n      });\n    };\n    /**\n     * 列设置拖拽排序完毕\n     */\n    this.onSettingSortEnd = function (_a) {\n      var oldIndex = _a.oldIndex,\n        newIndex = _a.newIndex;\n      var tableColumns = _this.ins.state.tableColumns;\n      if (oldIndex !== newIndex) {\n        var oldItem = tableColumns[oldIndex];\n        var newData = tableColumns.filter(function (_, i) {\n          return i !== oldIndex;\n        });\n        newData.splice(newIndex, 0, oldItem);\n        _this.ins.setState({\n          tableColumns: newData\n        });\n      }\n    };\n    /**\n     * 表格变化\n     * @param {*} _\n     * @param {*} filters\n     * @param {*} sorter\n     */\n    this.onTableChange = function (keys, filters, sorter) {\n      var _a;\n      if (!(0, lodash_1.isEmpty)(sorter) || !(0, lodash_1.isEmpty)(filters)) {\n        var params = __assign(__assign({}, _this.ins.state.params), {\n          order: (_a = sorter === null || sorter === void 0 ? void 0 : sorter.order) === null || _a === void 0 ? void 0 : _a.replace('end', ''),\n          sidx: sorter === null || sorter === void 0 ? void 0 : sorter.field\n        });\n        for (var filterKey in filters) {\n          params[filterKey] = filters[filterKey].join(',');\n          params.page = 1;\n        }\n        // 当rowSelection.clearOnChange为true 表格变化会清空\n        var rowSelection = _this.getRowSelection();\n        if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\n          rowSelection.onChange([], []);\n        }\n        _this.ins.setState({\n          params: params\n        }, function () {\n          return _this.fetchList();\n        });\n      }\n    };\n    /**\n     * 选项变化\n     */\n    this.onSelectChange = function (selectedRowKeys, selectedRows) {\n      var _a = _this.getModeProps(),\n        dataSource = _a.dataSource,\n        rowKey = _a.rowKey,\n        rowSelection = _a.rowSelection;\n      var selectAll = _this.ins.state.selectAll;\n      if (_this.ins.state.selectAll) {\n        var allKeys = dataSource.map(function (v) {\n          return v[rowKey];\n        });\n        var exceptKeys = (0, lodash_1.union)(selectAll.exceptKeys || [], (0, lodash_1.difference)(allKeys, selectedRowKeys));\n        _this.ins.setState({\n          selectAll: exceptKeys.length ? {\n            exceptKeys: exceptKeys\n          } : true\n        });\n      }\n      if (rowSelection === null || rowSelection === void 0 ? void 0 : rowSelection.onChange) {\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      } else {\n        _this.ins.setState({\n          selectedRowKeys: selectedRowKeys,\n          selectedRows: selectedRows\n        });\n      }\n    };\n    /**\n     * 分页变化\n     * @param {*} page\n     * @param {*} limit\n     */\n    this.onPageChange = function (page, limit) {\n      var params = _this.ins.state.params;\n      // 当rowSelection.clearOnChange为true 切页面会清空\n      var rowSelection = _this.getRowSelection();\n      if (rowSelection && !rowSelection.selectAll && rowSelection.clearOnChange) {\n        rowSelection.onChange([], []);\n      }\n      _this.ins.setState({\n        params: __assign(__assign({}, params), {\n          page: page,\n          limit: limit\n        })\n      }, function () {\n        return _this.fetchList();\n      });\n    };\n    /*\n     * 表格删除时候操作，刷列表\n     */\n    this.onDelete = function (deletedKeys) {\n      if (deletedKeys === void 0) {\n        deletedKeys = [];\n      }\n      var _a = _this.getModeProps(),\n        pagination = _a.pagination,\n        rowKey = _a.rowKey;\n      var total = pagination.total;\n      var _b = _this.ins.state.params,\n        page = _b.page,\n        limit = _b.limit;\n      if (total % limit === 1 && page === Math.ceil(total / limit)) {\n        _this.ins.setState({\n          params: __assign(__assign({}, _this.ins.state.params), {\n            page: page - deletedKeys.length || 1\n          })\n        }, function () {\n          return _this.fetchList();\n        });\n        return;\n      }\n      var rowSelection = _this.getRowSelection();\n      if (rowSelection) {\n        var selectedRowKeys = rowSelection.selectedRowKeys.filter(function (v) {\n          return !deletedKeys.includes(v);\n        });\n        var selectedRows = rowSelection.selectedRows.filter(function (v) {\n          return !deletedKeys.includes(v[rowKey]);\n        });\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      }\n      _this.fetchList();\n    };\n    this.ins = ins;\n  }\n  return Util;\n}();\nexports.default = Util;"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","require","dayjs_1","lodash_1","react_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","Util","ins","_this","getModeProps","rowKey","props","mode","getDefaultSelectedColumnKeys","columns","showNumber","result","filter","v","show","map","key","includes","unshift","getRowSelection","_a","state","_b","selectedRowKeys","_c","selectedRows","selectAll","rowSelection","clearOnChange","onChange","onSelectChange","getSortDataSource","SortableTableRef","dataSource","getParams","params","formParams","searchFormRef","current","getFieldsValue","getFormColumns","Formcolumns","size","searchNow","temp","contentProps","type","RANGEPICKER","SELECT","getPopupContainer","TableListRef","style","width","allowClear","onSearch","SEARCH","name","onPressEnter","e","INPUT","TEXTAREA","NUMBER","target","getPagination","pagination","defaultPageSize","page","pageSize","limit","showSizeChanger","pageSizeOptions","showQuickJumper","showTotal","total","concat","onPageChange","onShowSizeChange","getTableColumns","tableColumns","item","render","text","record","index","valueType","format","find","toString","label","ellipsis","createElement","Tooltip","title","placement","filtered","filters","dataIndex","r","getLoading","loading","fetchList","fetchParams","request","setState","then","searchParams","onResetSearch","resetFields","onSettingChange","selectedColumnKeys","onSettingSortEnd","oldItem","oldIndex","newIndex","newData","_","splice","onTableChange","keys","sorter","isEmpty","filterKey","order","replace","sidx","field","join","allKeys","exceptKeys","union","difference","onDelete","deletedKeys","Math","ceil"],"mappings":"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"}