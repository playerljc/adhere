{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.selectorPrefix = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\nvar antd_1 = require(\"antd\");\r\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\r\nvar lodash_1 = require(\"lodash\");\r\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\r\nvar adhere_ui_formitemcreator_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\r\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar sortabletable_1 = tslib_1.__importDefault(require(\"./sortabletable\"));\r\nvar tablelisttoolbar_1 = require(\"./tablelisttoolbar\");\r\nvar util_1 = tslib_1.__importDefault(require(\"./util\"));\r\nexports.selectorPrefix = 'adhere-ui-tablelist';\r\nvar defaultRowKey = 'id';\r\n/**\r\n * Template\r\n * @class Template\r\n * @classdesc Template\r\n */\r\nvar TableList = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TableList, _super);\r\n    function TableList(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * toolbar: 标题，全选----刷新，搜索，设置\r\n         */\r\n        _this.renderToolbar = function () {\r\n            if (!_this.props.toolbar)\r\n                return;\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, pagination = _a.pagination;\r\n            var _b = _this.props.toolbar, className = _b.className, title = _b.title, total = _b.total, selectAll = _b.selectAll, search = _b.search, reload = _b.reload, setting = _b.setting, toolbarOptionRender = _b.toolbarOptionRender;\r\n            var _c = _this.state, selectedColumnKeys = _c.selectedColumnKeys, tableColumns = _c.tableColumns;\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-toolbar\")) },\r\n                react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left\") },\r\n                    title ? react_1.default.createElement(\"span\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-title\") }, title) : null,\r\n                    total ? (react_1.default.createElement(\"span\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-total\") }, total === true\r\n                        ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', { n: pagination && pagination.total })\r\n                        : total)) : null,\r\n                    // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\r\n                    selectAll ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSelectAll, { selectAll: selectAll, dataSource: dataSource, rowSelection: rowSelection, rowKey: rowKey, setSelectAll: function (v) { return _this.setState({ selectAll: v }); } })) : null),\r\n                react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-right\") },\r\n                    toolbarOptionRender,\r\n                    search ? (react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: _this.getFormColumns(search || [], 'default', true) })) : null,\r\n                    reload ? react_1.default.createElement(tablelisttoolbar_1.ToolbarReload, { reload: reload, onSearch: _this.onSearch }) : null,\r\n                    setting ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSetting, { setting: setting, tableColumns: tableColumns, onSettingChange: _this.onSettingChange, onSettingSortEnd: _this.onSettingSortEnd, selectedColumnKeys: selectedColumnKeys })) : null)));\r\n        };\r\n        /**\r\n         * 渲染列表\r\n         */\r\n        _this.renderList = function () {\r\n            if (!_this.props.list)\r\n                return;\r\n            var _a = _this.getModeProps(), rowKey = _a.rowKey, pagination = _a.pagination, loading = _a.loading, renderItem = _a.renderItem, others = tslib_1.__rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(antd_1.List, tslib_1.__assign({ rowKey: rowKey, pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), renderItem: function (item, index) {\r\n                    var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\r\n                    return (react_1.default.createElement(antd_1.List.Item, null,\r\n                        react_1.default.createElement(react_1.default.Fragment, null,\r\n                            rowSelection ? (react_1.default.createElement(antd_1.Checkbox, { checked: rowSelection.selectedRowKeys.includes(item[key]), onChange: function (e) {\r\n                                    if (e.target.checked) {\r\n                                        rowSelection.selectedRowKeys.push(item[key]);\r\n                                        rowSelection.selectedRows.push(item);\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\r\n                                    }\r\n                                    else {\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) { return v !== item[key]; }), rowSelection.selectedRows.filter(function (v) { return v[key] !== item[key]; }));\r\n                                    }\r\n                                } })) : null,\r\n                            renderItem && renderItem(item, index))));\r\n                } }, others)));\r\n        };\r\n        /**\r\n         * 渲染表格\r\n         */\r\n        _this.renderTable = function () {\r\n            if (!_this.props.table)\r\n                return;\r\n            var _a = _this.state, selectedColumnKeys = _a.selectedColumnKeys, tableColumns = _a.tableColumns;\r\n            var _b = _this.getModeProps(), sortable = _b.sortable, pagination = _b.pagination, loading = _b.loading, dataSource = _b.dataSource, columns = _b.columns, rowKey = _b.rowKey, rowSelection = _b.rowSelection, others = tslib_1.__rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\r\n            var tableProps = tslib_1.__assign({ pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), rowSelection: _this.getRowSelection(), columns: tableColumns.filter(function (v) { return selectedColumnKeys.includes(v.key); }), dataSource: dataSource, onChange: _this.onTableChange }, others);\r\n            return sortable ? (react_1.default.createElement(sortabletable_1.default, tslib_1.__assign({ ref: function (c) {\r\n                    _this.SortableTableRef = c;\r\n                }, rowKey: rowKey }, tableProps, { sortable: sortable }))) : (react_1.default.createElement(antd_1.Table, tslib_1.__assign({ rowKey: rowKey }, tableProps)));\r\n        };\r\n        var util = new util_1.default(_this);\r\n        _this.getModeProps = util.getModeProps;\r\n        _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\r\n        _this.getFormColumns = util.getFormColumns;\r\n        _this.getSortDataSource = util.getSortDataSource;\r\n        _this.getParams = util.getParams;\r\n        _this.getRowSelection = util.getRowSelection;\r\n        _this.getPagination = util.getPagination;\r\n        _this.getLoading = util.getLoading;\r\n        _this.getTableColumns = util.getTableColumns;\r\n        _this.fetchList = util.fetchList;\r\n        _this.onSearch = util.onSearch;\r\n        _this.onResetSearch = util.onResetSearch;\r\n        _this.onSettingChange = util.onSettingChange;\r\n        _this.onSettingSortEnd = util.onSettingSortEnd;\r\n        _this.onTableChange = util.onTableChange;\r\n        _this.searchFormRef = react_1.default.createRef();\r\n        var modeProps = _this.getModeProps();\r\n        _this.state = {\r\n            firstLoading: true,\r\n            loading: false,\r\n            selectedColumnKeys: _this.props.table\r\n                ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns)\r\n                : [],\r\n            tableColumns: [],\r\n            params: {\r\n                page: 1,\r\n                limit: (modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize) || 10,\r\n            },\r\n        };\r\n        return _this;\r\n    }\r\n    TableList.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\r\n        if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        else if (nextProps.request &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) &&\r\n            dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    TableList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var modeProps = this.getModeProps();\r\n        if (this.props.request) {\r\n            this.setState({ firstRequest: true }, function () { return _this.fetchList(); });\r\n        }\r\n        else if (modeProps.dataSource) {\r\n            this.setState({ firstLoading: false });\r\n        }\r\n        this.setState({ tableColumns: this.getTableColumns() });\r\n    };\r\n    TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\r\n        var modeProps = this.getModeProps();\r\n        if (nextState.selectAll &&\r\n            JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\r\n            var dataSource = nextModeProps.dataSource, _a = nextModeProps.rowKey, rowKey_1 = _a === void 0 ? defaultRowKey : _a;\r\n            var allKeys = (dataSource || []).map(\r\n            // @ts-ignore\r\n            function (v) { return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1]; });\r\n            // 得到没有被全选排除的keys\r\n            var selectedRowKeys = allKeys.filter(function (v) { var _a, _b; return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v)); });\r\n            if (nextProps.mode === 'table' &&\r\n                nextProps.table &&\r\n                nextProps.table.rowSelection &&\r\n                nextProps.table.rowSelection.onChange) {\r\n                // @ts-ignore\r\n                nextProps.table.rowSelection.onChange(selectedRowKeys, (0, lodash_1.cloneDeep)(dataSource));\r\n                return false;\r\n            }\r\n            this.setState({\r\n                selectedRowKeys: selectedRowKeys,\r\n                selectedRows: dataSource,\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * 渲染搜索\r\n     */\r\n    TableList.prototype.renderSearch = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var search = this.props.search;\r\n        if (!search)\r\n            return;\r\n        var className = search.className, beforeContent = search.beforeContent, afterContent = search.afterContent, optionRender = search.optionRender, columns = search.columns, searchText = search.searchText, resetText = search.resetText, _b = search.size, size = _b === void 0 ? 'middle' : _b;\r\n        return search ? (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-search\")) },\r\n            beforeContent,\r\n            react_1.default.createElement(antd_1.Form, { layout: \"inline\", ref: this.searchFormRef, className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-search-form\"), (_a = {},\r\n                    _a[\"\".concat(exports.selectorPrefix, \"-search-form-havebefore\")] = beforeContent,\r\n                    _a[\"\".concat(exports.selectorPrefix, \"-search-form-haveafter\")] = afterContent,\r\n                    _a)) },\r\n                react_1.default.createElement(\"div\", { className: \"ant-form-search\" },\r\n                    react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender) })),\r\n                search.hasOwnProperty('optionRender') ? (optionRender) : (react_1.default.createElement(\"div\", { className: \"ant-form-btngroup\" },\r\n                    react_1.default.createElement(antd_1.Button, { onClick: function () { return _this.onResetSearch(); }, size: size }, resetText || adhere_util_intl_1.default.v('重置')),\r\n                    react_1.default.createElement(antd_1.Button, { type: \"primary\", onClick: function () { return _this.onSearch(); }, size: size }, searchText || adhere_util_intl_1.default.v('搜索'))))),\r\n            afterContent)) : null;\r\n    };\r\n    /**\r\n     * 渲染内容\r\n     */\r\n    TableList.prototype.renderContent = function () {\r\n        var mode = this.props.mode;\r\n        return (react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-content\") },\r\n            this.renderToolbar(),\r\n            this.state.firstLoading\r\n                ? this.renderLoading()\r\n                : mode === 'list'\r\n                    ? this.renderList()\r\n                    : this.renderTable()));\r\n    };\r\n    /**\r\n     * 加载效果\r\n     */\r\n    TableList.prototype.renderLoading = function () {\r\n        return react_1.default.createElement(antd_1.Skeleton, { paragraph: { rows: 10 }, title: false });\r\n    };\r\n    TableList.prototype.render = function () {\r\n        var _this = this;\r\n        var className = this.props.className;\r\n        return (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(exports.selectorPrefix, className), ref: function (c) {\r\n                _this.TableListRef = c;\r\n            } },\r\n            this.renderSearch(),\r\n            this.renderContent()));\r\n    };\r\n    return TableList;\r\n}(react_1.default.PureComponent));\r\nTableList.defaultProps = {\r\n    mode: 'table',\r\n};\r\nexports.default = TableList;\r\n//# sourceMappingURL=tablelist.js.map"],"names":["Object","defineProperty","exports","value","selectorPrefix","tslib_1","require","antd_1","classnames_1","__importDefault","lodash_1","react_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","sortabletable_1","tablelisttoolbar_1","util_1","defaultRowKey","TableList","_super","props","_this","call","this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","default","createElement","concat","vHtml","n","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","loading","renderItem","others","list","__rest","List","__assign","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","Table","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","__extends","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","hasOwnProperty","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"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"}