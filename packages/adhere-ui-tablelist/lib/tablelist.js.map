{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.search.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectorPrefix = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar antd_1 = require(\"antd\");\n\nvar adhere_ui_formitemcreator_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar lodash_1 = require(\"lodash\");\n\nvar sortabletable_1 = tslib_1.__importDefault(require(\"./sortabletable\"));\n\nvar tablelisttoolbar_1 = require(\"./tablelisttoolbar\");\n\nvar util_1 = tslib_1.__importDefault(require(\"./util\"));\n\nexports.selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\n\nvar TableList =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(TableList, _super);\n\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n\n\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n\n      var _a = _this.getModeProps(),\n          dataSource = _a.dataSource,\n          rowKey = _a.rowKey,\n          pagination = _a.pagination;\n\n      var _b = _this.props.toolbar,\n          className = _b.className,\n          title = _b.title,\n          total = _b.total,\n          selectAll = _b.selectAll,\n          search = _b.search,\n          reload = _b.reload,\n          setting = _b.setting,\n          toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n          selectedColumnKeys = _c.selectedColumnKeys,\n          tableColumns = _c.tableColumns;\n\n      var rowSelection = _this.getRowSelection();\n\n      return react_1.default.createElement(\"div\", {\n        className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-toolbar\"))\n      }, react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left\")\n      }, title ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null, // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? react_1.default.createElement(tablelisttoolbar_1.ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? react_1.default.createElement(tablelisttoolbar_1.ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? react_1.default.createElement(tablelisttoolbar_1.ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n\n\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n\n      var _a = _this.getModeProps(),\n          rowKey = _a.rowKey,\n          pagination = _a.pagination,\n          loading = _a.loading,\n          _renderItem = _a.renderItem,\n          others = tslib_1.__rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n\n      var rowSelection = _this.getRowSelection();\n\n      return react_1.default.createElement(antd_1.List, tslib_1.__assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return react_1.default.createElement(antd_1.List.Item, null, react_1.default.createElement(react_1.default.Fragment, null, rowSelection ? react_1.default.createElement(antd_1.Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n\n\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n          selectedColumnKeys = _a.selectedColumnKeys,\n          tableColumns = _a.tableColumns;\n\n      var _b = _this.getModeProps(),\n          sortable = _b.sortable,\n          pagination = _b.pagination,\n          loading = _b.loading,\n          dataSource = _b.dataSource,\n          columns = _b.columns,\n          rowKey = _b.rowKey,\n          rowSelection = _b.rowSelection,\n          others = tslib_1.__rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n\n      var tableProps = tslib_1.__assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n\n      return sortable ? react_1.default.createElement(sortabletable_1.default, tslib_1.__assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : react_1.default.createElement(antd_1.Table, tslib_1.__assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n\n    var util = new util_1.default(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = react_1.default.createRef();\n\n    var modeProps = _this.getModeProps();\n\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\n\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n\n    return null;\n  };\n\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var modeProps = this.getModeProps();\n\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\n    var modeProps = this.getModeProps();\n\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n          _a = nextModeProps.rowKey,\n          rowKey_1 = _a === void 0 ? defaultRowKey : _a;\n      var allKeys = (dataSource || []).map( // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      }); // 得到没有被全选排除的keys\n\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        nextProps.table.rowSelection.onChange(selectedRowKeys, (0, lodash_1.cloneDeep)(dataSource));\n        return false;\n      }\n\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n\n\n  TableList.prototype.renderSearch = function () {\n    var _a;\n\n    var _this = this;\n\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n        beforeContent = search.beforeContent,\n        afterContent = search.afterContent,\n        optionRender = search.optionRender,\n        columns = search.columns,\n        searchText = search.searchText,\n        resetText = search.resetText,\n        _b = search.size,\n        size = _b === void 0 ? 'middle' : _b;\n    return search ? react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-search\"))\n    }, beforeContent, react_1.default.createElement(antd_1.Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(exports.selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(exports.selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, react_1.default.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : react_1.default.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, react_1.default.createElement(antd_1.Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || adhere_util_intl_1.default.v('重置')), react_1.default.createElement(antd_1.Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || adhere_util_intl_1.default.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n\n\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n\n\n  TableList.prototype.renderLoading = function () {\n    return react_1.default.createElement(antd_1.Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n\n  TableList.prototype.render = function () {\n    var _this = this; // @ts-ignore\n\n\n    var className = this.props.className; // @ts-ignore\n\n    return react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(exports.selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n\n  return TableList;\n}(react_1.default.Component);\n\nTableList.defaultProps = {\n  mode: 'table'\n};\nexports.default = TableList;"],"names":["require","Object","defineProperty","exports","value","selectorPrefix","tslib_1","react_1","__importDefault","classnames_1","antd_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","lodash_1","sortabletable_1","tablelisttoolbar_1","util_1","defaultRowKey","TableList","_super","props","_this","call","this","renderToolbar","toolbar","_a","getModeProps","dataSource","rowKey","pagination","_b","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","_c","state","selectedColumnKeys","tableColumns","rowSelection","getRowSelection","default","createElement","concat","vHtml","n","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","list","loading","_renderItem","renderItem","others","__rest","List","__assign","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","table","sortable","tableProps","onTableChange","ref","c","SortableTableRef","Table","util","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","modeProps","firstLoading","params","page","limit","defaultPageSize","__extends","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","nextModeProps","JSON","stringify","rowKey_1","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","hasOwnProperty","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","Component","defaultProps"],"mappings":"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"}