{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.search.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectorPrefix = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar classnames_1 = tslib_1.__importDefault(require(\"classnames\"));\n\nvar lodash_1 = require(\"lodash\");\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar adhere_ui_formitemcreator_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar sortabletable_1 = tslib_1.__importDefault(require(\"./sortabletable\"));\n\nvar tablelisttoolbar_1 = require(\"./tablelisttoolbar\");\n\nvar util_1 = tslib_1.__importDefault(require(\"./util\"));\n\nexports.selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\n\nvar TableList =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(TableList, _super);\n\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n\n\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n\n      var _a = _this.getModeProps(),\n          dataSource = _a.dataSource,\n          rowKey = _a.rowKey,\n          pagination = _a.pagination;\n\n      var _b = _this.props.toolbar,\n          className = _b.className,\n          title = _b.title,\n          total = _b.total,\n          selectAll = _b.selectAll,\n          search = _b.search,\n          reload = _b.reload,\n          setting = _b.setting,\n          toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n          selectedColumnKeys = _c.selectedColumnKeys,\n          tableColumns = _c.tableColumns;\n\n      var rowSelection = _this.getRowSelection();\n\n      return react_1.default.createElement(\"div\", {\n        className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-toolbar\"))\n      }, react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left\")\n      }, title ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null, // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? react_1.default.createElement(tablelisttoolbar_1.ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? react_1.default.createElement(tablelisttoolbar_1.ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? react_1.default.createElement(tablelisttoolbar_1.ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n\n\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n\n      var _a = _this.getModeProps(),\n          rowKey = _a.rowKey,\n          pagination = _a.pagination,\n          loading = _a.loading,\n          _renderItem = _a.renderItem,\n          others = tslib_1.__rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n\n      var rowSelection = _this.getRowSelection();\n\n      return react_1.default.createElement(antd_1.List, tslib_1.__assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return react_1.default.createElement(antd_1.List.Item, null, react_1.default.createElement(react_1.default.Fragment, null, rowSelection ? react_1.default.createElement(antd_1.Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n\n\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n          selectedColumnKeys = _a.selectedColumnKeys,\n          tableColumns = _a.tableColumns;\n\n      var _b = _this.getModeProps(),\n          sortable = _b.sortable,\n          pagination = _b.pagination,\n          loading = _b.loading,\n          dataSource = _b.dataSource,\n          columns = _b.columns,\n          rowKey = _b.rowKey,\n          rowSelection = _b.rowSelection,\n          others = tslib_1.__rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n\n      var tableProps = tslib_1.__assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n\n      return sortable ? react_1.default.createElement(sortabletable_1.default, tslib_1.__assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : react_1.default.createElement(antd_1.Table, tslib_1.__assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n\n    var util = new util_1.default(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = react_1.default.createRef();\n\n    var modeProps = _this.getModeProps();\n\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\n\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n\n    return null;\n  };\n\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var modeProps = this.getModeProps();\n\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\n    var modeProps = this.getModeProps();\n\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n          _a = nextModeProps.rowKey,\n          rowKey_1 = _a === void 0 ? defaultRowKey : _a;\n      var allKeys = (dataSource || []).map( // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      }); // 得到没有被全选排除的keys\n\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        // @ts-ignore\n        nextProps.table.rowSelection.onChange(selectedRowKeys, (0, lodash_1.cloneDeep)(dataSource));\n        return false;\n      }\n\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n\n\n  TableList.prototype.renderSearch = function () {\n    var _a;\n\n    var _this = this;\n\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n        beforeContent = search.beforeContent,\n        afterContent = search.afterContent,\n        optionRender = search.optionRender,\n        columns = search.columns,\n        searchText = search.searchText,\n        resetText = search.resetText,\n        _b = search.size,\n        size = _b === void 0 ? 'middle' : _b;\n    return search ? react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-search\"))\n    }, beforeContent, react_1.default.createElement(antd_1.Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(exports.selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(exports.selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, react_1.default.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : react_1.default.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, react_1.default.createElement(antd_1.Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || adhere_util_intl_1.default.v('重置')), react_1.default.createElement(antd_1.Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || adhere_util_intl_1.default.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n\n\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n\n\n  TableList.prototype.renderLoading = function () {\n    return react_1.default.createElement(antd_1.Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n\n  TableList.prototype.render = function () {\n    var _this = this;\n\n    var className = this.props.className;\n    return react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(exports.selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n\n  return TableList;\n}(react_1.default.PureComponent);\n\nTableList.defaultProps = {\n  mode: 'table'\n};\nexports.default = TableList;"],"names":["require","Object","defineProperty","exports","value","selectorPrefix","tslib_1","antd_1","classnames_1","__importDefault","lodash_1","react_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","sortabletable_1","tablelisttoolbar_1","util_1","defaultRowKey","TableList","_super","props","_this","call","this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","default","createElement","concat","vHtml","n","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","loading","_renderItem","others","list","renderItem","__rest","List","__assign","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","Table","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","__extends","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","hasOwnProperty","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"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"}