{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.selectorPrefix = void 0;\r\nvar antd_1 = require(\"antd\");\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar lodash_1 = require(\"lodash\");\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar adhere_ui_formitemcreator_1 = __importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar sortabletable_1 = __importDefault(require(\"./sortabletable\"));\r\nvar tablelisttoolbar_1 = require(\"./tablelisttoolbar\");\r\nvar util_1 = __importDefault(require(\"./util\"));\r\nexports.selectorPrefix = 'adhere-ui-tablelist';\r\nvar defaultRowKey = 'id';\r\n/**\r\n * Template\r\n * @class Template\r\n * @classdesc Template\r\n */\r\nvar TableList = /** @class */ (function (_super) {\r\n    __extends(TableList, _super);\r\n    function TableList(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * toolbar: 标题，全选----刷新，搜索，设置\r\n         */\r\n        _this.renderToolbar = function () {\r\n            if (!_this.props.toolbar)\r\n                return;\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, pagination = _a.pagination;\r\n            var _b = _this.props.toolbar, className = _b.className, title = _b.title, total = _b.total, selectAll = _b.selectAll, search = _b.search, reload = _b.reload, setting = _b.setting, toolbarOptionRender = _b.toolbarOptionRender;\r\n            var _c = _this.state, selectedColumnKeys = _c.selectedColumnKeys, tableColumns = _c.tableColumns;\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-toolbar\")) },\r\n                react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left\") },\r\n                    title ? react_1.default.createElement(\"span\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-title\") }, title) : null,\r\n                    total ? (react_1.default.createElement(\"span\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-total\") }, total === true\r\n                        ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', { n: pagination && pagination.total })\r\n                        : total)) : null,\r\n                    // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\r\n                    selectAll ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSelectAll, { selectAll: selectAll, dataSource: dataSource, rowSelection: rowSelection, rowKey: rowKey, setSelectAll: function (v) { return _this.setState({ selectAll: v }); } })) : null),\r\n                react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-toolbar-right\") },\r\n                    toolbarOptionRender,\r\n                    search ? (react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: _this.getFormColumns(search || [], 'default', true) })) : null,\r\n                    reload ? react_1.default.createElement(tablelisttoolbar_1.ToolbarReload, { reload: reload, onSearch: _this.onSearch }) : null,\r\n                    setting ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSetting, { setting: setting, tableColumns: tableColumns, onSettingChange: _this.onSettingChange, onSettingSortEnd: _this.onSettingSortEnd, selectedColumnKeys: selectedColumnKeys })) : null)));\r\n        };\r\n        /**\r\n         * 渲染列表\r\n         */\r\n        _this.renderList = function () {\r\n            if (!_this.props.list)\r\n                return;\r\n            var _a = _this.getModeProps(), rowKey = _a.rowKey, pagination = _a.pagination, loading = _a.loading, renderItem = _a.renderItem, others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(antd_1.List, __assign({ rowKey: rowKey, pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), renderItem: function (item, index) {\r\n                    var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\r\n                    return (react_1.default.createElement(antd_1.List.Item, null,\r\n                        react_1.default.createElement(react_1.default.Fragment, null,\r\n                            rowSelection ? (react_1.default.createElement(antd_1.Checkbox, { checked: rowSelection.selectedRowKeys.includes(item[key]), onChange: function (e) {\r\n                                    if (e.target.checked) {\r\n                                        rowSelection.selectedRowKeys.push(item[key]);\r\n                                        rowSelection.selectedRows.push(item);\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\r\n                                    }\r\n                                    else {\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) { return v !== item[key]; }), rowSelection.selectedRows.filter(function (v) { return v[key] !== item[key]; }));\r\n                                    }\r\n                                } })) : null,\r\n                            renderItem && renderItem(item, index))));\r\n                } }, others)));\r\n        };\r\n        /**\r\n         * 渲染表格\r\n         */\r\n        _this.renderTable = function () {\r\n            if (!_this.props.table)\r\n                return;\r\n            var _a = _this.state, selectedColumnKeys = _a.selectedColumnKeys, tableColumns = _a.tableColumns;\r\n            var _b = _this.getModeProps(), sortable = _b.sortable, pagination = _b.pagination, loading = _b.loading, dataSource = _b.dataSource, columns = _b.columns, rowKey = _b.rowKey, rowSelection = _b.rowSelection, others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\r\n            var tableProps = __assign({ pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), rowSelection: _this.getRowSelection(), columns: tableColumns.filter(function (v) { return selectedColumnKeys.includes(v.key); }), dataSource: dataSource, onChange: _this.onTableChange }, others);\r\n            return sortable ? (react_1.default.createElement(sortabletable_1.default, __assign({ ref: function (c) {\r\n                    _this.SortableTableRef = c;\r\n                }, rowKey: rowKey }, tableProps, { sortable: sortable }))) : (react_1.default.createElement(antd_1.Table, __assign({ rowKey: rowKey }, tableProps)));\r\n        };\r\n        var util = new util_1.default(_this);\r\n        _this.getModeProps = util.getModeProps;\r\n        _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\r\n        _this.getFormColumns = util.getFormColumns;\r\n        _this.getSortDataSource = util.getSortDataSource;\r\n        _this.getParams = util.getParams;\r\n        _this.getRowSelection = util.getRowSelection;\r\n        _this.getPagination = util.getPagination;\r\n        _this.getLoading = util.getLoading;\r\n        _this.getTableColumns = util.getTableColumns;\r\n        _this.fetchList = util.fetchList;\r\n        _this.onSearch = util.onSearch;\r\n        _this.onResetSearch = util.onResetSearch;\r\n        _this.onSettingChange = util.onSettingChange;\r\n        _this.onSettingSortEnd = util.onSettingSortEnd;\r\n        _this.onTableChange = util.onTableChange;\r\n        _this.searchFormRef = react_1.default.createRef();\r\n        var modeProps = _this.getModeProps();\r\n        _this.state = {\r\n            firstLoading: true,\r\n            loading: false,\r\n            selectedColumnKeys: _this.props.table\r\n                ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns)\r\n                : [],\r\n            tableColumns: [],\r\n            params: {\r\n                page: 1,\r\n                limit: (modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize) || 10,\r\n            },\r\n        };\r\n        return _this;\r\n    }\r\n    TableList.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\r\n        if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        else if (nextProps.request &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) &&\r\n            dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    TableList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var modeProps = this.getModeProps();\r\n        if (this.props.request) {\r\n            this.setState({ firstRequest: true }, function () { return _this.fetchList(); });\r\n        }\r\n        else if (modeProps.dataSource) {\r\n            this.setState({ firstLoading: false });\r\n        }\r\n        this.setState({ tableColumns: this.getTableColumns() });\r\n    };\r\n    TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\r\n        var modeProps = this.getModeProps();\r\n        if (nextState.selectAll &&\r\n            JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\r\n            var dataSource = nextModeProps.dataSource, _a = nextModeProps.rowKey, rowKey_1 = _a === void 0 ? defaultRowKey : _a;\r\n            var allKeys = (dataSource || []).map(\r\n            // @ts-ignore\r\n            function (v) { return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1]; });\r\n            // 得到没有被全选排除的keys\r\n            var selectedRowKeys = allKeys.filter(function (v) { var _a, _b; return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v)); });\r\n            if (nextProps.mode === 'table' &&\r\n                nextProps.table &&\r\n                nextProps.table.rowSelection &&\r\n                nextProps.table.rowSelection.onChange) {\r\n                // @ts-ignore\r\n                nextProps.table.rowSelection.onChange(selectedRowKeys, (0, lodash_1.cloneDeep)(dataSource));\r\n                return false;\r\n            }\r\n            this.setState({\r\n                selectedRowKeys: selectedRowKeys,\r\n                selectedRows: dataSource,\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * 渲染搜索\r\n     */\r\n    TableList.prototype.renderSearch = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var search = this.props.search;\r\n        if (!search)\r\n            return;\r\n        var className = search.className, beforeContent = search.beforeContent, afterContent = search.afterContent, optionRender = search.optionRender, columns = search.columns, searchText = search.searchText, resetText = search.resetText, _b = search.size, size = _b === void 0 ? 'middle' : _b;\r\n        return search ? (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-search\")) },\r\n            beforeContent,\r\n            react_1.default.createElement(antd_1.Form, { layout: \"inline\", ref: this.searchFormRef, className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-search-form\"), (_a = {},\r\n                    _a[\"\".concat(exports.selectorPrefix, \"-search-form-havebefore\")] = beforeContent,\r\n                    _a[\"\".concat(exports.selectorPrefix, \"-search-form-haveafter\")] = afterContent,\r\n                    _a)) },\r\n                react_1.default.createElement(\"div\", { className: \"ant-form-search\" },\r\n                    react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender) })),\r\n                search.hasOwnProperty('optionRender') ? (optionRender) : (react_1.default.createElement(\"div\", { className: \"ant-form-btngroup\" },\r\n                    react_1.default.createElement(antd_1.Button, { onClick: function () { return _this.onResetSearch(); }, size: size }, resetText || adhere_util_intl_1.default.v('重置')),\r\n                    react_1.default.createElement(antd_1.Button, { type: \"primary\", onClick: function () { return _this.onSearch(); }, size: size }, searchText || adhere_util_intl_1.default.v('搜索'))))),\r\n            afterContent)) : null;\r\n    };\r\n    /**\r\n     * 渲染内容\r\n     */\r\n    TableList.prototype.renderContent = function () {\r\n        var mode = this.props.mode;\r\n        return (react_1.default.createElement(\"div\", { className: \"\".concat(exports.selectorPrefix, \"-content\") },\r\n            this.renderToolbar(),\r\n            this.state.firstLoading\r\n                ? this.renderLoading()\r\n                : mode === 'list'\r\n                    ? this.renderList()\r\n                    : this.renderTable()));\r\n    };\r\n    /**\r\n     * 加载效果\r\n     */\r\n    TableList.prototype.renderLoading = function () {\r\n        return react_1.default.createElement(antd_1.Skeleton, { paragraph: { rows: 10 }, title: false });\r\n    };\r\n    TableList.prototype.render = function () {\r\n        var _this = this;\r\n        var className = this.props.className;\r\n        return (react_1.default.createElement(\"div\", { className: (0, classnames_1.default)(exports.selectorPrefix, className), ref: function (c) {\r\n                _this.TableListRef = c;\r\n            } },\r\n            this.renderSearch(),\r\n            this.renderContent()));\r\n    };\r\n    return TableList;\r\n}(react_1.default.PureComponent));\r\nTableList.defaultProps = {\r\n    mode: 'table',\r\n};\r\nexports.default = TableList;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","selectorPrefix","require","classnames_1","lodash_1","react_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","sortabletable_1","tablelisttoolbar_1","util_1","defaultRowKey","TableList","_super","props","_this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","createElement","concat","vHtml","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","loading","renderItem","others","list","List","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","Table","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"AAAA,aACA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,iBAClB,CAAEC,UAAW,EAAG,YAAaC,MAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,EAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAAI,IAC/EN,EAAGC,CAAC,CAC7B,EACA,OAAO,SAAUD,EAAGC,GAChB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAE5F,SAASW,IAAOd,KAAKe,YAAcb,CAAG,CADtCD,EAAcC,EAAGC,CAAC,EAElBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACnF,CACH,EAAE,EACCG,SAAYjB,MAAQA,KAAKiB,UAAa,WAStC,OARAA,SAAWb,OAAOc,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE7C,IAAK,IAAIb,KADTY,EAAIG,UAAUF,GACOjB,OAAOK,UAAUC,eAAeC,KAAKS,EAAGZ,CAAC,IAC1DW,EAAEX,GAAKY,EAAEZ,IAEjB,OAAOW,CACX,GACgBM,MAAMzB,KAAMuB,SAAS,CACzC,EACIG,OAAU1B,MAAQA,KAAK0B,QAAW,SAAUN,EAAGO,GAC/C,IAAIR,EAAI,GACR,IAASX,KAAKY,EAAOhB,OAAOK,UAAUC,eAAeC,KAAKS,EAAGZ,CAAC,GAAKmB,EAAEC,QAAQpB,CAAC,EAAI,IAC9EW,EAAEX,GAAKY,EAAEZ,IACb,GAAS,MAALY,GAAqD,YAAxC,OAAOhB,OAAOyB,sBAC3B,IAAK,IAAIR,EAAI,EAAGb,EAAIJ,OAAOyB,sBAAsBT,CAAC,EAAGC,EAAIb,EAAEgB,OAAQH,CAAC,GAC5DM,EAAEC,QAAQpB,EAAEa,EAAE,EAAI,GAAKjB,OAAOK,UAAUqB,qBAAqBnB,KAAKS,EAAGZ,EAAEa,EAAE,IACzEF,EAAEX,EAAEa,IAAMD,EAAEZ,EAAEa,KAE1B,OAAOF,CACX,EACIY,gBAAmB/B,MAAQA,KAAK+B,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAGIG,QAFJ/B,OAAOgC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAC5DD,QAAQE,eAAiB,KAAA,EACZC,QAAQ,MAAM,GACvBC,aAAeV,gBAAgBS,QAAQ,YAAY,CAAC,EACpDE,SAAWF,QAAQ,QAAQ,EAC3BG,QAAUZ,gBAAgBS,QAAQ,OAAO,CAAC,EAC1CI,4BAA8Bb,gBAAgBS,QAAQ,uCAAuC,CAAC,EAC9FK,mBAAqBd,gBAAgBS,QAAQ,8BAA8B,CAAC,EAC5EM,gBAAkBf,gBAAgBS,QAAQ,iBAAiB,CAAC,EAC5DO,mBAAqBP,QAAQ,oBAAoB,EACjDQ,OAASjB,gBAAgBS,QAAQ,QAAQ,CAAC,EAE1CS,eADJZ,QAAQE,eAAiB,sBACL,MAMhBW,UAA2B,SAAUC,GAErC,SAASD,EAAUE,GACf,IAAIC,EAAQF,EAAOxC,KAAKX,KAAMoD,CAAK,GAAKpD,KA+DpCsD,GA3DJD,EAAME,cAAgB,WAClB,IAE+BC,EAA4BC,EAAoBC,EACjDC,EAA0BC,EAAkBC,EAAkBC,EAA0BC,EAAoBC,EAAoBC,EAAsBC,EAC9JC,EAA4CC,EAC9DC,EALJ,GAAKhB,EAAMD,MAAMkB,QAMjB,OAJ+Bd,GAA3Be,EAAKlB,EAAMmB,aAAa,GAAmBhB,WAAYC,EAASc,EAAGd,OAAQC,EAAaa,EAAGb,WACjEC,GAA1Bc,EAAKpB,EAAMD,MAAMkB,SAAwBX,UAAWC,EAAQa,EAAGb,MAAOC,EAAQY,EAAGZ,MAAOC,EAAYW,EAAGX,UAAWC,EAASU,EAAGV,OAAQC,EAASS,EAAGT,OAAQC,EAAUQ,EAAGR,QAASC,EAAsBO,EAAGP,oBACvLC,GAAlBO,EAAKrB,EAAMsB,OAA+BR,mBAAoBC,EAAeM,EAAGN,aAChFC,EAAehB,EAAMuB,gBAAgB,EACjCjC,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,WAAW,EAAIlB,aAAaP,SAASyB,EAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,UAAU,CAAC,CAAE,EAC1II,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,eAAe,CAAE,EACjGqB,EAAQjB,QAAQT,QAAQ2C,cAAc,OAAQ,CAAElB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,qBAAqB,CAAE,EAAGqB,CAAK,EAAI,KAChIC,EAASlB,QAAQT,QAAQ2C,cAAc,OAAQ,CAAElB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,qBAAqB,CAAE,EAAa,CAAA,IAAVsB,EAClHhB,mBAAmBX,QAAQ6C,MAAM,mBAAoB,CAAEzD,EAAGoC,GAAcA,EAAWG,KAAM,CAAC,EAC1FA,CAAM,EAAI,KAEhBC,EAAanB,QAAQT,QAAQ2C,cAAc9B,mBAAmBiC,iBAAkB,CAAElB,UAAWA,EAAWN,WAAYA,EAAYa,aAAcA,EAAcZ,OAAQA,EAAQwB,aAAc,SAAUC,GAAK,OAAO7B,EAAM8B,SAAS,CAAErB,UAAWoB,CAAE,CAAC,CAAG,CAAE,CAAE,EAAI,IAAI,EAClQvC,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,gBAAgB,CAAE,EAClG2B,EACAH,EAAUpB,QAAQT,QAAQ2C,cAAcjC,4BAA4BV,QAAS,CAAEkD,QAAS/B,EAAMgC,eAAetB,GAAU,GAAI,UAAW,CAAA,CAAI,CAAE,CAAE,EAAI,KAClJC,EAASrB,QAAQT,QAAQ2C,cAAc9B,mBAAmBuC,cAAe,CAAEtB,OAAQA,EAAQuB,SAAUlC,EAAMkC,QAAS,CAAC,EAAI,KACzHtB,EAAWtB,QAAQT,QAAQ2C,cAAc9B,mBAAmByC,eAAgB,CAAEvB,QAASA,EAASG,aAAcA,EAAcqB,gBAAiBpC,EAAMoC,gBAAiBC,iBAAkBrC,EAAMqC,iBAAkBvB,mBAAoBA,CAAmB,CAAE,EAAI,IAAI,CAAE,CAC7Q,EAIAd,EAAMsC,WAAa,WACf,IAE+BlC,EAAoBC,EAA4BkC,EAAsBC,EAA4BC,EAC7HzB,EAHJ,GAAKhB,EAAMD,MAAM2C,KAIjB,OAFIxB,EAAKlB,EAAMmB,aAAa,EAAGf,EAASc,EAAGd,OAAQC,EAAaa,EAAGb,WAAYkC,EAAUrB,EAAGqB,QAASC,EAAatB,EAAGsB,WAAYC,EAASpE,OAAO6C,EAAI,CAAC,SAAU,aAAc,UAAW,aAAa,EAClMF,EAAehB,EAAMuB,gBAAgB,EACjCjC,QAAQT,QAAQ2C,cAAc1C,OAAO6D,KAAM/E,SAAS,CAAEwC,OAAQA,EAAQC,WAAYL,EAAM4C,cAAcvC,CAAU,EAAGkC,QAASvC,EAAM6C,WAAWN,CAAO,EAAGC,WAAY,SAAUM,EAAMC,GACnL,IAAIC,EAAwB,YAAlB,OAAO5C,EAAwBA,EAAO0C,CAAI,EAAI1C,EACxD,OAAQd,QAAQT,QAAQ2C,cAAc1C,OAAO6D,KAAKM,KAAM,KACpD3D,QAAQT,QAAQ2C,cAAclC,QAAQT,QAAQqE,SAAU,KACpDlC,EAAgB1B,QAAQT,QAAQ2C,cAAc1C,OAAOqE,SAAU,CAAEC,QAASpC,EAAaqC,gBAAgBC,SAASR,EAAKE,EAAI,EAAGO,SAAU,SAAUjF,GACpIA,EAAEkF,OAAOJ,SACTpC,EAAaqC,gBAAgBI,KAAKX,EAAKE,EAAI,EAC3ChC,EAAa0C,aAAaD,KAAKX,CAAI,EACnC9B,EAAauC,SAASvC,EAAaqC,gBAAiBrC,EAAa0C,YAAY,GAG7E1C,EAAauC,SAASvC,EAAaqC,gBAAgBM,OAAO,SAAU9B,GAAK,OAAOA,IAAMiB,EAAKE,EAAM,CAAC,EAAGhC,EAAa0C,aAAaC,OAAO,SAAU9B,GAAK,OAAOA,EAAEmB,KAASF,EAAKE,EAAM,CAAC,CAAC,CAE5L,CAAE,CAAE,EAAI,KACZR,GAAcA,EAAWM,EAAMC,CAAK,CAAC,CAAE,CACnD,CAAE,EAAGN,CAAM,CAAE,CACrB,EAIAzC,EAAM4D,YAAc,WAChB,IAEsB9C,EAA4CC,EACnC8C,EAAoDtB,EAAsBpC,EAAkDC,EAAoDqC,EAC3MqB,EAJJ,GAAK9D,EAAMD,MAAMgE,MAKjB,OAHI7C,EAAKlB,EAAMsB,MAAOR,EAAqBI,EAAGJ,mBAAoBC,EAAeG,EAAGH,aACrD8C,GAA3BzC,EAAKpB,EAAMmB,aAAa,GAAiB0C,SAAUxD,EAAae,EAAGf,WAAYkC,EAAUnB,EAAGmB,QAASpC,EAAaiB,EAAGjB,WAAsBiB,EAAGW,QAAS3B,EAASgB,EAAGhB,OAAuBgB,EAAGJ,aAAcyB,EAASpE,OAAO+C,EAAI,CAAC,WAAY,aAAc,UAAW,aAAc,UAAW,SAAU,eAAe,EACvT0C,EAAalG,SAAS,CAAEyC,WAAYL,EAAM4C,cAAcvC,CAAU,EAAGkC,QAASvC,EAAM6C,WAAWN,CAAO,EAAGvB,aAAchB,EAAMuB,gBAAgB,EAAGQ,QAAShB,EAAa4C,OAAO,SAAU9B,GAAK,OAAOf,EAAmBwC,SAASzB,EAAEmB,GAAG,CAAG,CAAC,EAAG7C,WAAYA,EAAYoD,SAAUvD,EAAMgE,aAAc,EAAGvB,CAAM,EACvSoB,EAAYvE,QAAQT,QAAQ2C,cAAc/B,gBAAgBZ,QAASjB,SAAS,CAAEqG,IAAK,SAAUC,GAC5FlE,EAAMmE,iBAAmBD,CAC7B,EAAG9D,OAAQA,CAAO,EAAG0D,EAAY,CAAED,SAAUA,CAAS,CAAC,CAAE,EAAKvE,QAAQT,QAAQ2C,cAAc1C,OAAOsF,MAAOxG,SAAS,CAAEwC,OAAQA,CAAO,EAAG0D,CAAU,CAAE,CAC3J,EACW,IAAInE,OAAOd,QAAQmB,CAAK,GAiB/BqE,GAhBJrE,EAAMmB,aAAelB,EAAKkB,aAC1BnB,EAAMsE,6BAA+BrE,EAAKqE,6BAC1CtE,EAAMgC,eAAiB/B,EAAK+B,eAC5BhC,EAAMuE,kBAAoBtE,EAAKsE,kBAC/BvE,EAAMwE,UAAYvE,EAAKuE,UACvBxE,EAAMuB,gBAAkBtB,EAAKsB,gBAC7BvB,EAAM4C,cAAgB3C,EAAK2C,cAC3B5C,EAAM6C,WAAa5C,EAAK4C,WACxB7C,EAAMyE,gBAAkBxE,EAAKwE,gBAC7BzE,EAAM0E,UAAYzE,EAAKyE,UACvB1E,EAAMkC,SAAWjC,EAAKiC,SACtBlC,EAAM2E,cAAgB1E,EAAK0E,cAC3B3E,EAAMoC,gBAAkBnC,EAAKmC,gBAC7BpC,EAAMqC,iBAAmBpC,EAAKoC,iBAC9BrC,EAAMgE,cAAgB/D,EAAK+D,cAC3BhE,EAAM4E,cAAgBtF,QAAQT,QAAQgG,UAAU,EAChC7E,EAAMmB,aAAa,GAanC,OAZAnB,EAAMsB,MAAQ,CACVwD,aAAc,CAAA,EACdvC,QAAS,CAAA,EACTzB,mBAAoBd,EAAMD,MAAMgE,MAC1B/D,EAAMsE,6BAA6BtE,EAAMD,MAAMgE,MAAMhC,OAAO,EAC5D,GACNhB,aAAc,GACdgE,OAAQ,CACJC,KAAM,EACNC,MAAQZ,GAAaA,EAAUhE,YAAcgE,EAAUhE,WAAW6E,iBAAoB,EAC1F,CACJ,EACOlF,CACX,CA2GA,OA3MAtD,UAAUmD,EAAWC,CAAM,EAiG3BD,EAAUsF,yBAA2B,SAAUC,EAAWC,GACtD,IAAIlF,GAAciF,EAAUA,EAAUE,MAAQ,UAAY,IAAInF,WAC9D,MAAI,CAACiF,EAAUG,SAAYF,MAAAA,GAAsDA,EAAUP,cAAiB3E,GAKnGiF,EAAUG,SACdF,MAAAA,GAAsDA,EAAUP,cAChEO,MAAAA,GAAsDA,EAAUG,cACjErF,EACO,CACH2E,aAAc,CAAA,CAClB,EAEG,IACX,EACAjF,EAAUzC,UAAUqI,kBAAoB,WACpC,IAAIzF,EAAQrD,KACR0H,EAAY1H,KAAKwE,aAAa,EAC9BxE,KAAKoD,MAAMwF,QACX5I,KAAKmF,SAAS,CAAE0D,aAAc,CAAA,CAAK,EAAG,WAAc,OAAOxF,EAAM0E,UAAU,CAAG,CAAC,EAE1EL,EAAUlE,YACfxD,KAAKmF,SAAS,CAAEgD,aAAc,CAAA,CAAM,CAAC,EAEzCnI,KAAKmF,SAAS,CAAEf,aAAcpE,KAAK8H,gBAAgB,CAAE,CAAC,CAC1D,EACA5E,EAAUzC,UAAUsI,sBAAwB,SAAUN,EAAWO,GAC7D,IAI0EC,EAJtEC,EAAgBT,EAAUA,EAAUE,MAAQ,UAAY,GACxDjB,EAAY1H,KAAKwE,aAAa,EAClC,MAAIwE,CAAAA,EAAUlF,WACVqF,KAAKC,UAAUF,EAAc1F,UAAU,IAAM2F,KAAKC,UAAU1B,EAAUlE,UAAU,IAC5EA,EAAa0F,EAAc1F,WAAYe,EAAK2E,EAAczF,OAAQwF,EAAkB,KAAA,IAAP1E,EAAgBtB,cAAgBsB,EAK7GmC,GAJWlD,GAAc,IAAI6F,IAEjC,SAAUnE,GAAK,OAAOA,EAAsB,YAApB,OAAO+D,EAA0BA,EAAS/D,CAAC,EAAI+D,EAAW,CAAC,EAErDjC,OAAO,SAAU9B,GAAK,IAAQT,EAAI,MAAO,EAAE,OAACA,EAAK,OAACF,EAAKyE,EAAUlF,WAAuC,KAAA,EAASS,EAAG+E,aAAiD7E,EAAGkC,SAASzB,CAAC,EAAI,CAAC,EAC9L,UAAnBuD,EAAUE,MACVF,EAAUrB,OACVqB,EAAUrB,MAAM/C,cAChBoE,EAAUrB,MAAM/C,aAAauC,SAE7B6B,EAAUrB,MAAM/C,aAAauC,SAASF,GAAiB,EAAIhE,SAAS6G,WAAW/F,CAAU,CAAC,EAG9FxD,KAAKmF,SAAS,CACVuB,gBAAiBA,EACjBK,aAAcvD,CAClB,CAAC,EACM,CAAA,EAGf,EAIAN,EAAUzC,UAAU+I,aAAe,WAC/B,IAKI7F,EAA8B8F,EAAsCC,EAAoCC,EAAoCvE,EAA0BwE,EAAgCC,EAAgDC,EAJtPzG,EAAQrD,KACR+D,EAAS/D,KAAKoD,MAAMW,OACxB,GAAKA,EAGL,OADIJ,EAAYI,EAAOJ,UAAW8F,EAAgB1F,EAAO0F,cAAeC,EAAe3F,EAAO2F,aAAcC,EAAe5F,EAAO4F,aAAcvE,EAAUrB,EAAOqB,QAASwE,EAAa7F,EAAO6F,WAAYC,EAAY9F,EAAO8F,UAA6BC,EAAc,KAAA,KAAhCrF,EAAKV,EAAO+F,MAA6B,SAAWrF,EACrRV,EAAUpB,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,WAAW,EAAIlB,aAAaP,SAASyB,EAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,SAAS,CAAC,CAAE,EAClJkH,EACA9G,QAAQT,QAAQ2C,cAAc1C,OAAO4H,KAAM,CAAEC,OAAQ,SAAU1C,IAAKtH,KAAKiI,cAAetE,WAAW,EAAIlB,aAAaP,SAAS,GAAG4C,OAAOzC,QAAQE,eAAgB,cAAc,IAAIgC,EAAK,IAC3K,GAAGO,OAAOzC,QAAQE,eAAgB,yBAAyB,GAAKkH,EACnElF,EAAG,GAAGO,OAAOzC,QAAQE,eAAgB,wBAAwB,GAAKmH,EAClEnF,EAAG,CAAE,EACT5B,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,UAAW,iBAAkB,EAChEhB,QAAQT,QAAQ2C,cAAcjC,4BAA4BV,QAAS,CAAEkD,QAASpF,KAAKqF,eAAeD,GAAW,GAAI0E,EAAM/F,EAAOrD,eAAe,cAAc,GAAK,CAACiJ,CAAY,CAAE,CAAC,CAAC,EACrL5F,EAAOrD,eAAe,cAAc,EAAI,EAAkBiC,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,UAAW,mBAAoB,EAC5HhB,QAAQT,QAAQ2C,cAAc1C,OAAO8H,OAAQ,CAAEC,QAAS,WAAc,OAAO7G,EAAM2E,cAAc,CAAG,EAAG8B,KAAMA,CAAK,EAAGD,GAAahH,mBAAmBX,QAAQgD,EAAE,IAAI,CAAC,EACpKvC,QAAQT,QAAQ2C,cAAc1C,OAAO8H,OAAQ,CAAEE,KAAM,UAAWD,QAAS,WAAc,OAAO7G,EAAMkC,SAAS,CAAG,EAAGuE,KAAMA,CAAK,EAAGF,GAAc/G,mBAAmBX,QAAQgD,EAAE,IAAI,CAAC,CAAE,CAAC,EAC5LwE,CAAa,EAAI,IACzB,EAIAxG,EAAUzC,UAAU2J,cAAgB,WAChC,IAAIzB,EAAO3I,KAAKoD,MAAMuF,KACtB,OAAQhG,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,UAAU,CAAE,EACpGvC,KAAKuD,cAAc,EACnBvD,KAAK2E,MAAMwD,aACLnI,KAAKqK,cAAc,EACV,SAAT1B,EACI3I,KAAK2F,WAAW,EAChB3F,KAAKiH,YAAY,CAAE,CACrC,EAIA/D,EAAUzC,UAAU4J,cAAgB,WAChC,OAAO1H,QAAQT,QAAQ2C,cAAc1C,OAAOmI,SAAU,CAAEC,UAAW,CAAEC,KAAM,EAAG,EAAG5G,MAAO,CAAA,CAAM,CAAC,CACnG,EACAV,EAAUzC,UAAUgK,OAAS,WACzB,IAAIpH,EAAQrD,KACR2D,EAAY3D,KAAKoD,MAAMO,UAC3B,OAAQhB,QAAQT,QAAQ2C,cAAc,MAAO,CAAElB,WAAW,EAAIlB,aAAaP,SAASG,QAAQE,eAAgBoB,CAAS,EAAG2D,IAAK,SAAUC,GAC/HlE,EAAMqH,aAAenD,CACzB,CAAE,EACFvH,KAAKwJ,aAAa,EAClBxJ,KAAKoK,cAAc,CAAE,CAC7B,EACOlH,CACX,EAAEP,QAAQT,QAAQyI,aAAc,EAChCzH,UAAU0H,aAAe,CACrBjC,KAAM,OACV,EACAtG,QAAQH,QAAUgB"}