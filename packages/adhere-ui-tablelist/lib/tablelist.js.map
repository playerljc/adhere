{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _skeleton = _interopRequireDefault(require(\"antd/lib/skeleton\"));\n\nvar _button = _interopRequireDefault(require(\"antd/lib/button\"));\n\nvar _form = _interopRequireDefault(require(\"antd/lib/form\"));\n\nvar _table = _interopRequireDefault(require(\"antd/lib/table\"));\n\nvar _checkbox = _interopRequireDefault(require(\"antd/lib/checkbox\"));\n\nvar _list = _interopRequireDefault(require(\"antd/lib/list\"));\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.search.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nvar _tslib = require(\"tslib\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _adhereUiFormitemcreator = _interopRequireDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\n\nvar _adhereUtilIntl = _interopRequireDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _sortabletable = _interopRequireDefault(require(\"./sortabletable\"));\n\nvar _tablelisttoolbar = require(\"./tablelisttoolbar\");\n\nvar _util = _interopRequireDefault(require(\"./util\"));\n\nvar selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\n\nvar TableList =\n/** @class */\nfunction (_super) {\n  (0, _tslib.__extends)(TableList, _super);\n\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n\n\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n\n      var _a = _this.getModeProps(),\n          dataSource = _a.dataSource,\n          rowKey = _a.rowKey,\n          pagination = _a.pagination;\n\n      var _b = _this.props.toolbar,\n          className = _b.className,\n          title = _b.title,\n          total = _b.total,\n          selectAll = _b.selectAll,\n          search = _b.search,\n          reload = _b.reload,\n          setting = _b.setting,\n          toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n          selectedColumnKeys = _c.selectedColumnKeys,\n          tableColumns = _c.tableColumns;\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: (0, _classnames.default)(className, \"\".concat(selectorPrefix, \"-toolbar\"))\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left\")\n      }, title ? /*#__PURE__*/_react.default.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? /*#__PURE__*/_react.default.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? _adhereUtilIntl.default.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null, // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? /*#__PURE__*/_react.default.createElement(_tablelisttoolbar.ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? /*#__PURE__*/_react.default.createElement(_adhereUiFormitemcreator.default, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? /*#__PURE__*/_react.default.createElement(_tablelisttoolbar.ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? /*#__PURE__*/_react.default.createElement(_tablelisttoolbar.ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n\n\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n\n      var _a = _this.getModeProps(),\n          rowKey = _a.rowKey,\n          pagination = _a.pagination,\n          loading = _a.loading,\n          _renderItem = _a.renderItem,\n          others = (0, _tslib.__rest)(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/_react.default.createElement(_list.default, (0, _tslib.__assign)({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return /*#__PURE__*/_react.default.createElement(_list.default.Item, null, /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, rowSelection ? /*#__PURE__*/_react.default.createElement(_checkbox.default, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n\n\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n          selectedColumnKeys = _a.selectedColumnKeys,\n          tableColumns = _a.tableColumns;\n\n      var _b = _this.getModeProps(),\n          sortable = _b.sortable,\n          pagination = _b.pagination,\n          loading = _b.loading,\n          dataSource = _b.dataSource,\n          columns = _b.columns,\n          rowKey = _b.rowKey,\n          rowSelection = _b.rowSelection,\n          others = (0, _tslib.__rest)(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n\n      var tableProps = (0, _tslib.__assign)({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n      return sortable ? /*#__PURE__*/_react.default.createElement(_sortabletable.default, (0, _tslib.__assign)({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : /*#__PURE__*/_react.default.createElement(_table.default, (0, _tslib.__assign)({\n        rowKey: rowKey\n      }, tableProps));\n    };\n\n    var util = new _util.default(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = /*#__PURE__*/_react.default.createRef();\n\n    var modeProps = _this.getModeProps();\n\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\n\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n\n    return null;\n  };\n\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var modeProps = this.getModeProps();\n\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\n    var modeProps = this.getModeProps();\n\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n          _a = nextModeProps.rowKey,\n          rowKey_1 = _a === void 0 ? defaultRowKey : _a;\n      var allKeys = (dataSource || []).map( // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      }); // 得到没有被全选排除的keys\n\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        nextProps.table.rowSelection.onChange(selectedRowKeys, (0, _lodash.cloneDeep)(dataSource));\n        return false;\n      }\n\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n\n\n  TableList.prototype.renderSearch = function () {\n    var _a;\n\n    var _this = this;\n\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n        beforeContent = search.beforeContent,\n        afterContent = search.afterContent,\n        optionRender = search.optionRender,\n        columns = search.columns,\n        searchText = search.searchText,\n        resetText = search.resetText,\n        _b = search.size,\n        size = _b === void 0 ? 'middle' : _b;\n    return search ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: (0, _classnames.default)(className, \"\".concat(selectorPrefix, \"-search\"))\n    }, beforeContent, /*#__PURE__*/_react.default.createElement(_form.default, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: (0, _classnames.default)(\"\".concat(selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, /*#__PURE__*/_react.default.createElement(_adhereUiFormitemcreator.default, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, /*#__PURE__*/_react.default.createElement(_button.default, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || _adhereUtilIntl.default.v('重置')), /*#__PURE__*/_react.default.createElement(_button.default, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || _adhereUtilIntl.default.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n\n\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n\n\n  TableList.prototype.renderLoading = function () {\n    return /*#__PURE__*/_react.default.createElement(_skeleton.default, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n\n  TableList.prototype.render = function () {\n    var _this = this; // @ts-ignore\n\n\n    var className = this.props.className; // @ts-ignore\n\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      className: (0, _classnames.default)(selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n\n  return TableList;\n}(_react.default.Component);\n\nTableList.defaultProps = {\n  mode: 'table'\n};\nvar _default = TableList;\nexports.default = _default;"],"names":["require","_interopRequireDefault","Object","defineProperty","exports","value","default","_skeleton","_button","_form","_table","_checkbox","_list","_tslib","_react","_classnames","_adhereUiFormitemcreator","_adhereUtilIntl","_lodash","_sortabletable","_tablelisttoolbar","_util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","call","this","renderToolbar","toolbar","_a","getModeProps","dataSource","rowKey","pagination","_b","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","_c","state","selectedColumnKeys","tableColumns","rowSelection","getRowSelection","createElement","concat","vHtml","n","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","list","loading","_renderItem","renderItem","others","__rest","__assign","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","table","sortable","tableProps","onTableChange","ref","c","SortableTableRef","util","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","modeProps","firstLoading","params","page","limit","defaultPageSize","__extends","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","nextModeProps","JSON","stringify","rowKey_1","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","hasOwnProperty","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","Component","defaultProps","_default"],"mappings":"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"}