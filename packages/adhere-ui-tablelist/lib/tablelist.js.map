{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar antd_1 = require(\"antd\");\r\nvar adhere_ui_formitemcreator_1 = __importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar lodash_1 = require(\"lodash\");\r\nvar sortabletable_1 = __importDefault(require(\"./sortabletable\"));\r\nvar tablelisttoolbar_1 = require(\"./tablelisttoolbar\");\r\nvar util_1 = __importDefault(require(\"./util\"));\r\nvar selectorPrefix = 'adhere-ui-tablelist';\r\nvar defaultRowKey = 'id';\r\n/**\r\n * Template\r\n * @class Template\r\n * @classdesc Template\r\n */\r\nvar TableList = /** @class */ (function (_super) {\r\n    __extends(TableList, _super);\r\n    function TableList(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * toolbar: 标题，全选----刷新，搜索，设置\r\n         */\r\n        _this.renderToolbar = function () {\r\n            if (!_this.props.toolbar)\r\n                return;\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, pagination = _a.pagination;\r\n            var _b = _this.props.toolbar, className = _b.className, title = _b.title, total = _b.total, selectAll = _b.selectAll, search = _b.search, reload = _b.reload, setting = _b.setting, toolbarOptionRender = _b.toolbarOptionRender;\r\n            var _c = _this.state, selectedColumnKeys = _c.selectedColumnKeys, tableColumns = _c.tableColumns;\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(\"div\", { className: classnames_1.default(className, selectorPrefix + \"-toolbar\") },\r\n                react_1.default.createElement(\"div\", { className: selectorPrefix + \"-toolbar-left\" },\r\n                    title ? react_1.default.createElement(\"span\", { className: selectorPrefix + \"-toolbar-left-title\" }, title) : null,\r\n                    total ? (react_1.default.createElement(\"span\", { className: selectorPrefix + \"-toolbar-left-total\" }, total === true\r\n                        ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', { n: pagination && pagination.total })\r\n                        : total)) : null,\r\n                    // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\r\n                    selectAll ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSelectAll, { selectAll: selectAll, dataSource: dataSource, rowSelection: rowSelection, rowKey: rowKey, setSelectAll: function (v) { return _this.setState({ selectAll: v }); } })) : null),\r\n                react_1.default.createElement(\"div\", { className: selectorPrefix + \"-toolbar-right\" },\r\n                    toolbarOptionRender,\r\n                    search ? (react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: _this.getFormColumns(search || [], 'default', true) })) : null,\r\n                    reload ? react_1.default.createElement(tablelisttoolbar_1.ToolbarReload, { reload: reload, onSearch: _this.onSearch }) : null,\r\n                    setting ? (react_1.default.createElement(tablelisttoolbar_1.ToolbarSetting, { setting: setting, tableColumns: tableColumns, onSettingChange: _this.onSettingChange, onSettingSortEnd: _this.onSettingSortEnd, selectedColumnKeys: selectedColumnKeys })) : null)));\r\n        };\r\n        /**\r\n         * 渲染列表\r\n         */\r\n        _this.renderList = function () {\r\n            if (!_this.props.list)\r\n                return;\r\n            var _a = _this.getModeProps(), rowKey = _a.rowKey, pagination = _a.pagination, loading = _a.loading, renderItem = _a.renderItem, others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\r\n            var rowSelection = _this.getRowSelection();\r\n            return (react_1.default.createElement(antd_1.List, __assign({ rowKey: rowKey, pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), renderItem: function (item, index) {\r\n                    var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\r\n                    return (react_1.default.createElement(antd_1.List.Item, null,\r\n                        react_1.default.createElement(react_1.default.Fragment, null,\r\n                            rowSelection ? (react_1.default.createElement(antd_1.Checkbox, { checked: rowSelection.selectedRowKeys.includes(item[key]), onChange: function (e) {\r\n                                    if (e.target.checked) {\r\n                                        rowSelection.selectedRowKeys.push(item[key]);\r\n                                        rowSelection.selectedRows.push(item);\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\r\n                                    }\r\n                                    else {\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) { return v !== item[key]; }), rowSelection.selectedRows.filter(function (v) { return v[key] !== item[key]; }));\r\n                                    }\r\n                                } })) : null,\r\n                            renderItem && renderItem(item, index))));\r\n                } }, others)));\r\n        };\r\n        /**\r\n         * 渲染表格\r\n         */\r\n        _this.renderTable = function () {\r\n            if (!_this.props.table)\r\n                return;\r\n            var _a = _this.state, selectedColumnKeys = _a.selectedColumnKeys, tableColumns = _a.tableColumns;\r\n            var _b = _this.getModeProps(), sortable = _b.sortable, pagination = _b.pagination, loading = _b.loading, dataSource = _b.dataSource, columns = _b.columns, rowKey = _b.rowKey, rowSelection = _b.rowSelection, others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\r\n            var tableProps = __assign({ pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), rowSelection: _this.getRowSelection(), columns: tableColumns.filter(function (v) { return selectedColumnKeys.includes(v.key); }), dataSource: dataSource, onChange: _this.onTableChange }, others);\r\n            return sortable ? (react_1.default.createElement(sortabletable_1.default, __assign({ ref: function (c) {\r\n                    _this.SortableTableRef = c;\r\n                }, rowKey: rowKey }, tableProps, { sortable: sortable }))) : (react_1.default.createElement(antd_1.Table, __assign({ rowKey: rowKey }, tableProps)));\r\n        };\r\n        var util = new util_1.default(_this);\r\n        _this.getModeProps = util.getModeProps;\r\n        _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\r\n        _this.getFormColumns = util.getFormColumns;\r\n        _this.getSortDataSource = util.getSortDataSource;\r\n        _this.getParams = util.getParams;\r\n        _this.getRowSelection = util.getRowSelection;\r\n        _this.getPagination = util.getPagination;\r\n        _this.getLoading = util.getLoading;\r\n        _this.getTableColumns = util.getTableColumns;\r\n        _this.fetchList = util.fetchList;\r\n        _this.onSearch = util.onSearch;\r\n        _this.onResetSearch = util.onResetSearch;\r\n        _this.onSettingChange = util.onSettingChange;\r\n        _this.onSettingSortEnd = util.onSettingSortEnd;\r\n        _this.onTableChange = util.onTableChange;\r\n        _this.searchFormRef = react_1.default.createRef();\r\n        var modeProps = _this.getModeProps();\r\n        _this.state = {\r\n            firstLoading: true,\r\n            loading: false,\r\n            selectedColumnKeys: _this.props.table\r\n                ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns)\r\n                : [],\r\n            tableColumns: [],\r\n            params: {\r\n                page: 1,\r\n                limit: (modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize) || 10,\r\n            },\r\n        };\r\n        return _this;\r\n    }\r\n    TableList.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\r\n        if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) &&\r\n            dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    TableList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var modeProps = this.getModeProps();\r\n        if (this.props.request) {\r\n            this.setState({ firstRequest: true }, function () { return _this.fetchList(); });\r\n        }\r\n        else if (modeProps.dataSource) {\r\n            this.setState({ firstLoading: false });\r\n        }\r\n        this.setState({ tableColumns: this.getTableColumns() });\r\n    };\r\n    TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\r\n        var modeProps = this.getModeProps();\r\n        if (nextState.selectAll &&\r\n            JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\r\n            var dataSource = nextModeProps.dataSource, _a = nextModeProps.rowKey, rowKey_1 = _a === void 0 ? defaultRowKey : _a;\r\n            var allKeys = (dataSource || []).map(function (v) { return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1]; });\r\n            // 得到没有被全选排除的keys\r\n            var selectedRowKeys = allKeys.filter(function (v) { var _a, _b; return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v)); });\r\n            if (nextProps.mode === 'table' &&\r\n                nextProps.table &&\r\n                nextProps.table.rowSelection &&\r\n                nextProps.table.rowSelection.onChange) {\r\n                nextProps.table.rowSelection.onChange(selectedRowKeys, lodash_1.cloneDeep(dataSource));\r\n                return false;\r\n            }\r\n            this.setState({\r\n                selectedRowKeys: selectedRowKeys,\r\n                selectedRows: dataSource,\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * 渲染搜索\r\n     */\r\n    TableList.prototype.renderSearch = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var search = this.props.search;\r\n        if (!search)\r\n            return;\r\n        var className = search.className, beforeContent = search.beforeContent, afterContent = search.afterContent, optionRender = search.optionRender, columns = search.columns, searchText = search.searchText, resetText = search.resetText, _b = search.size, size = _b === void 0 ? 'middle' : _b;\r\n        return search ? (react_1.default.createElement(\"div\", { className: classnames_1.default(className, selectorPrefix + \"-search\") },\r\n            beforeContent,\r\n            react_1.default.createElement(antd_1.Form, { layout: \"inline\", ref: this.searchFormRef, className: classnames_1.default(selectorPrefix + \"-search-form\", (_a = {},\r\n                    _a[selectorPrefix + \"-search-form-havebefore\"] = beforeContent,\r\n                    _a[selectorPrefix + \"-search-form-haveafter\"] = afterContent,\r\n                    _a)) },\r\n                react_1.default.createElement(\"div\", { className: \"ant-form-search\" },\r\n                    react_1.default.createElement(adhere_ui_formitemcreator_1.default, { columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender) })),\r\n                search.hasOwnProperty('optionRender') ? (optionRender) : (react_1.default.createElement(\"div\", { className: \"ant-form-btngroup\" },\r\n                    react_1.default.createElement(antd_1.Button, { onClick: function () { return _this.onResetSearch(); }, size: size }, resetText || adhere_util_intl_1.default.v('重置')),\r\n                    react_1.default.createElement(antd_1.Button, { type: \"primary\", onClick: function () { return _this.onSearch(); }, size: size }, searchText || adhere_util_intl_1.default.v('搜索'))))),\r\n            afterContent)) : null;\r\n    };\r\n    /**\r\n     * 渲染内容\r\n     */\r\n    TableList.prototype.renderContent = function () {\r\n        var mode = this.props.mode;\r\n        return (react_1.default.createElement(\"div\", { className: selectorPrefix + \"-content\" },\r\n            this.renderToolbar(),\r\n            this.state.firstLoading\r\n                ? this.renderLoading()\r\n                : mode === 'list'\r\n                    ? this.renderList()\r\n                    : this.renderTable()));\r\n    };\r\n    /**\r\n     * 加载效果\r\n     */\r\n    TableList.prototype.renderLoading = function () {\r\n        return react_1.default.createElement(antd_1.Skeleton, { paragraph: { rows: 10 }, title: false });\r\n    };\r\n    TableList.prototype.render = function () {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        var className = this.props.className;\r\n        // @ts-ignore\r\n        return (react_1.default.createElement(\"div\", { className: classnames_1.default(selectorPrefix, className), ref: function (c) {\r\n                _this.TableListRef = c;\r\n            } },\r\n            this.renderSearch(),\r\n            this.renderContent()));\r\n    };\r\n    return TableList;\r\n}(react_1.default.Component));\r\nTableList.defaultProps = {\r\n    mode: 'table',\r\n};\r\nexports.default = TableList;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","classnames_1","antd_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","lodash_1","sortabletable_1","tablelisttoolbar_1","util_1","selectorPrefix","defaultRowKey","TableList","_super","props","_this","renderToolbar","toolbar","_a","getModeProps","dataSource","rowKey","pagination","_b","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","_c","state","selectedColumnKeys","tableColumns","rowSelection","getRowSelection","createElement","vHtml","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","list","loading","renderItem","others","List","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","target","push","selectedRows","filter","renderTable","table","sortable","tableProps","onTableChange","ref","c","SortableTableRef","Table","util","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","modeProps","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","componentDidMount","shouldComponentUpdate","nextState","nextModeProps","JSON","stringify","rowKey_1","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","Component","defaultProps"],"mappings":"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"}