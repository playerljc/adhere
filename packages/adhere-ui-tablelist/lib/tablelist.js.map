{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Form, Button, Skeleton, Table, List, Checkbox } from 'antd';\r\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\r\nimport intl from '@baifendian/adhere-util-intl';\r\nimport { cloneDeep } from 'lodash';\r\nimport SortableTable from './sortabletable';\r\nimport { ToolbarSelectAll, ToolbarReload, ToolbarSetting } from './tablelisttoolbar';\r\nimport Util from './util';\r\nvar selectorPrefix = 'adhere-ui-tablelist';\r\nvar defaultRowKey = 'id';\r\n/**\r\n * Template\r\n * @class Template\r\n * @classdesc Template\r\n */\r\nvar TableList = /** @class */ (function (_super) {\r\n    __extends(TableList, _super);\r\n    function TableList(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * toolbar: 标题，全选----刷新，搜索，设置\r\n         */\r\n        _this.renderToolbar = function () {\r\n            if (!_this.props.toolbar)\r\n                return;\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, pagination = _a.pagination;\r\n            var _b = _this.props.toolbar, className = _b.className, title = _b.title, total = _b.total, selectAll = _b.selectAll, search = _b.search, reload = _b.reload, setting = _b.setting, toolbarOptionRender = _b.toolbarOptionRender;\r\n            var _c = _this.state, selectedColumnKeys = _c.selectedColumnKeys, tableColumns = _c.tableColumns;\r\n            var rowSelection = _this.getRowSelection();\r\n            return (React.createElement(\"div\", { className: classNames(className, selectorPrefix + \"-toolbar\") },\r\n                React.createElement(\"div\", { className: selectorPrefix + \"-toolbar-left\" },\r\n                    title ? React.createElement(\"span\", { className: selectorPrefix + \"-toolbar-left-title\" }, title) : null,\r\n                    total ? (React.createElement(\"span\", { className: selectorPrefix + \"-toolbar-left-total\" }, total === true\r\n                        ? intl.vHtml('共 <em>{n}</em> 条', { n: pagination && pagination.total })\r\n                        : total)) : null,\r\n                    // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\r\n                    selectAll ? (React.createElement(ToolbarSelectAll, { selectAll: selectAll, dataSource: dataSource, rowSelection: rowSelection, rowKey: rowKey, setSelectAll: function (v) { return _this.setState({ selectAll: v }); } })) : null),\r\n                React.createElement(\"div\", { className: selectorPrefix + \"-toolbar-right\" },\r\n                    toolbarOptionRender,\r\n                    search ? (React.createElement(FormItemCreator, { columns: _this.getFormColumns(search || [], 'default', true) })) : null,\r\n                    reload ? React.createElement(ToolbarReload, { reload: reload, onSearch: _this.onSearch }) : null,\r\n                    setting ? (React.createElement(ToolbarSetting, { setting: setting, tableColumns: tableColumns, onSettingChange: _this.onSettingChange, onSettingSortEnd: _this.onSettingSortEnd, selectedColumnKeys: selectedColumnKeys })) : null)));\r\n        };\r\n        /**\r\n         * 渲染列表\r\n         */\r\n        _this.renderList = function () {\r\n            if (!_this.props.list)\r\n                return;\r\n            var _a = _this.getModeProps(), rowKey = _a.rowKey, pagination = _a.pagination, loading = _a.loading, renderItem = _a.renderItem, others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\r\n            var rowSelection = _this.getRowSelection();\r\n            return (React.createElement(List, __assign({ rowKey: rowKey, pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), renderItem: function (item, index) {\r\n                    var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\r\n                    return (React.createElement(List.Item, null,\r\n                        React.createElement(React.Fragment, null,\r\n                            rowSelection ? (React.createElement(Checkbox, { checked: rowSelection.selectedRowKeys.includes(item[key]), onChange: function (e) {\r\n                                    if (e.target.checked) {\r\n                                        rowSelection.selectedRowKeys.push(item[key]);\r\n                                        rowSelection.selectedRows.push(item);\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\r\n                                    }\r\n                                    else {\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) { return v !== item[key]; }), rowSelection.selectedRows.filter(function (v) { return v[key] !== item[key]; }));\r\n                                    }\r\n                                } })) : null,\r\n                            renderItem && renderItem(item, index))));\r\n                } }, others)));\r\n        };\r\n        /**\r\n         * 渲染表格\r\n         */\r\n        _this.renderTable = function () {\r\n            if (!_this.props.table)\r\n                return;\r\n            var _a = _this.state, selectedColumnKeys = _a.selectedColumnKeys, tableColumns = _a.tableColumns;\r\n            var _b = _this.getModeProps(), sortable = _b.sortable, pagination = _b.pagination, loading = _b.loading, dataSource = _b.dataSource, columns = _b.columns, rowKey = _b.rowKey, rowSelection = _b.rowSelection, others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\r\n            var tableProps = __assign({ pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), rowSelection: _this.getRowSelection(), columns: tableColumns.filter(function (v) { return selectedColumnKeys.includes(v.key); }), dataSource: dataSource, onChange: _this.onTableChange }, others);\r\n            return sortable ? (React.createElement(SortableTable, __assign({ ref: function (c) {\r\n                    _this.SortableTableRef = c;\r\n                }, rowKey: rowKey }, tableProps, { sortable: sortable }))) : (React.createElement(Table, __assign({ rowKey: rowKey }, tableProps)));\r\n        };\r\n        var util = new Util(_this);\r\n        _this.getModeProps = util.getModeProps;\r\n        _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\r\n        _this.getFormColumns = util.getFormColumns;\r\n        _this.getSortDataSource = util.getSortDataSource;\r\n        _this.getParams = util.getParams;\r\n        _this.getRowSelection = util.getRowSelection;\r\n        _this.getPagination = util.getPagination;\r\n        _this.getLoading = util.getLoading;\r\n        _this.getTableColumns = util.getTableColumns;\r\n        _this.fetchList = util.fetchList;\r\n        _this.onSearch = util.onSearch;\r\n        _this.onResetSearch = util.onResetSearch;\r\n        _this.onSettingChange = util.onSettingChange;\r\n        _this.onSettingSortEnd = util.onSettingSortEnd;\r\n        _this.onTableChange = util.onTableChange;\r\n        _this.searchFormRef = React.createRef();\r\n        var modeProps = _this.getModeProps();\r\n        _this.state = {\r\n            firstLoading: true,\r\n            loading: false,\r\n            selectedColumnKeys: _this.props.table\r\n                ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns)\r\n                : [],\r\n            tableColumns: [],\r\n            params: {\r\n                page: 1,\r\n                limit: (modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize) || 10,\r\n            },\r\n        };\r\n        return _this;\r\n    }\r\n    TableList.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\r\n        if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) &&\r\n            dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    TableList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var modeProps = this.getModeProps();\r\n        if (this.props.request) {\r\n            this.setState({ firstRequest: true }, function () { return _this.fetchList(); });\r\n        }\r\n        else if (modeProps.dataSource) {\r\n            this.setState({ firstLoading: false });\r\n        }\r\n        this.setState({ tableColumns: this.getTableColumns() });\r\n    };\r\n    TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\r\n        var modeProps = this.getModeProps();\r\n        if (nextState.selectAll &&\r\n            JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\r\n            var dataSource = nextModeProps.dataSource, _a = nextModeProps.rowKey, rowKey_1 = _a === void 0 ? defaultRowKey : _a;\r\n            var allKeys = (dataSource || []).map(function (v) { return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1]; });\r\n            // 得到没有被全选排除的keys\r\n            var selectedRowKeys = allKeys.filter(function (v) { var _a, _b; return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v)); });\r\n            if (nextProps.mode === 'table' &&\r\n                nextProps.table &&\r\n                nextProps.table.rowSelection &&\r\n                nextProps.table.rowSelection.onChange) {\r\n                nextProps.table.rowSelection.onChange(selectedRowKeys, cloneDeep(dataSource));\r\n                return false;\r\n            }\r\n            this.setState({\r\n                selectedRowKeys: selectedRowKeys,\r\n                selectedRows: dataSource,\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * 渲染搜索\r\n     */\r\n    TableList.prototype.renderSearch = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var search = this.props.search;\r\n        if (!search)\r\n            return;\r\n        var className = search.className, beforeContent = search.beforeContent, afterContent = search.afterContent, optionRender = search.optionRender, columns = search.columns, searchText = search.searchText, resetText = search.resetText, _b = search.size, size = _b === void 0 ? 'middle' : _b;\r\n        return search ? (React.createElement(\"div\", { className: classNames(className, selectorPrefix + \"-search\") },\r\n            beforeContent,\r\n            React.createElement(Form, { layout: \"inline\", ref: this.searchFormRef, className: classNames(selectorPrefix + \"-search-form\", (_a = {},\r\n                    _a[selectorPrefix + \"-search-form-havebefore\"] = beforeContent,\r\n                    _a[selectorPrefix + \"-search-form-haveafter\"] = afterContent,\r\n                    _a)) },\r\n                React.createElement(\"div\", { className: \"ant-form-search\" },\r\n                    React.createElement(FormItemCreator, { columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender) })),\r\n                search.hasOwnProperty('optionRender') ? (optionRender) : (React.createElement(\"div\", { className: \"ant-form-btngroup\" },\r\n                    React.createElement(Button, { onClick: function () { return _this.onResetSearch(); }, size: size }, resetText || intl.v('重置')),\r\n                    React.createElement(Button, { type: \"primary\", onClick: function () { return _this.onSearch(); }, size: size }, searchText || intl.v('搜索'))))),\r\n            afterContent)) : null;\r\n    };\r\n    /**\r\n     * 渲染内容\r\n     */\r\n    TableList.prototype.renderContent = function () {\r\n        var mode = this.props.mode;\r\n        return (React.createElement(\"div\", { className: selectorPrefix + \"-content\" },\r\n            this.renderToolbar(),\r\n            this.state.firstLoading\r\n                ? this.renderLoading()\r\n                : mode === 'list'\r\n                    ? this.renderList()\r\n                    : this.renderTable()));\r\n    };\r\n    /**\r\n     * 加载效果\r\n     */\r\n    TableList.prototype.renderLoading = function () {\r\n        return React.createElement(Skeleton, { paragraph: { rows: 10 }, title: false });\r\n    };\r\n    TableList.prototype.render = function () {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        var className = this.props.className;\r\n        // @ts-ignore\r\n        return (React.createElement(\"div\", { className: classNames(selectorPrefix, className), ref: function (c) {\r\n                _this.TableListRef = c;\r\n            } },\r\n            this.renderSearch(),\r\n            this.renderContent()));\r\n    };\r\n    return TableList;\r\n}(React.Component));\r\nTableList.defaultProps = {\r\n    mode: 'table',\r\n};\r\nexport default TableList;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","classNames","Form","Button","Skeleton","Table","List","Checkbox","FormItemCreator","intl","cloneDeep","SortableTable","ToolbarSelectAll","ToolbarReload","ToolbarSetting","Util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","renderToolbar","toolbar","_a","getModeProps","dataSource","rowKey","pagination","_b","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","_c","state","selectedColumnKeys","tableColumns","rowSelection","getRowSelection","createElement","vHtml","setSelectAll","v","setState","columns","getFormColumns","onSearch","onSettingChange","onSettingSortEnd","renderList","list","loading","renderItem","others","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","target","push","selectedRows","filter","renderTable","table","sortable","tableProps","onTableChange","ref","c","SortableTableRef","util","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","modeProps","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","componentDidMount","shouldComponentUpdate","nextState","nextModeProps","JSON","stringify","rowKey_1","map","exceptKeys","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","Component","defaultProps"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV3C,GAaxCI,SAAYd,MAAQA,KAAKc,UAAa,WAStC,OARAA,SAAWV,OAAOW,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIV,KADTS,EAAIG,UAAUF,GACOd,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,OAAOQ,IAEKO,MAAMvB,KAAMoB,YAE5BI,OAAUxB,MAAQA,KAAKwB,QAAW,SAAUP,EAAGQ,GAC/C,IAAIT,EAAI,GACR,IAASR,KAAKS,EAAOb,OAAOQ,UAAUH,eAAea,KAAKL,EAAGT,IAAMiB,EAAEC,QAAQlB,GAAK,IAC9EQ,EAAER,GAAKS,EAAET,IACb,GAAS,MAALS,GAAqD,mBAAjCb,OAAOuB,sBAC3B,IAAK,IAAIT,EAAI,EAAGV,EAAIJ,OAAOuB,sBAAsBV,GAAIC,EAAIV,EAAEa,OAAQH,IAC3DO,EAAEC,QAAQlB,EAAEU,IAAM,GAAKd,OAAOQ,UAAUgB,qBAAqBN,KAAKL,EAAGT,EAAEU,MACvEF,EAAER,EAAEU,IAAMD,EAAET,EAAEU,KAE1B,OAAOF,UAEJa,yBACAC,mCACEC,KAAMC,OAAQC,SAAUC,MAAOC,KAAMC,2BACvCC,mEACAC,+CACEC,8BACFC,2CACEC,iBAAkBC,cAAeC,+CACnCC,kBACP,IAAIC,eAAiB,sBACjBC,cAAgB,KAMhBC,UAA2B,SAAUC,GAErC,SAASD,EAAUE,GACf,IAAIC,EAAQF,EAAO1B,KAAKtB,KAAMiD,IAAUjD,KAIxCkD,EAAMC,cAAgB,WAClB,GAAKD,EAAMD,MAAMG,QAAjB,CAEA,IAAIC,EAAKH,EAAMI,eAAgBC,EAAaF,EAAGE,WAAYC,EAASH,EAAGG,OAAQC,EAAaJ,EAAGI,WAC3FC,EAAKR,EAAMD,MAAMG,QAASO,EAAYD,EAAGC,UAAWC,EAAQF,EAAGE,MAAOC,EAAQH,EAAGG,MAAOC,EAAYJ,EAAGI,UAAWC,EAASL,EAAGK,OAAQC,EAASN,EAAGM,OAAQC,EAAUP,EAAGO,QAASC,EAAsBR,EAAGQ,oBACzMC,EAAKjB,EAAMkB,MAAOC,EAAqBF,EAAGE,mBAAoBC,EAAeH,EAAGG,aAChFC,EAAerB,EAAMsB,kBACzB,OAAQ3C,MAAM4C,cAAc,MAAO,CAAEd,UAAW7B,WAAW6B,EAAWd,eAAiB,aACnFhB,MAAM4C,cAAc,MAAO,CAAEd,UAAWd,eAAiB,iBACrDe,EAAQ/B,MAAM4C,cAAc,OAAQ,CAAEd,UAAWd,eAAiB,uBAAyBe,GAAS,KACpGC,EAAShC,MAAM4C,cAAc,OAAQ,CAAEd,UAAWd,eAAiB,wBAAmC,IAAVgB,EACtFvB,KAAKoC,MAAM,mBAAoB,CAAEvD,EAAGsC,GAAcA,EAAWI,QAC7DA,GAAU,KAEhBC,EAAajC,MAAM4C,cAAchC,iBAAkB,CAAEqB,UAAWA,EAAWP,WAAYA,EAAYgB,aAAcA,EAAcf,OAAQA,EAAQmB,aAAc,SAAUC,GAAK,OAAO1B,EAAM2B,SAAS,CAAEf,UAAWc,OAAc,MACjO/C,MAAM4C,cAAc,MAAO,CAAEd,UAAWd,eAAiB,kBACrDqB,EACAH,EAAUlC,MAAM4C,cAAcpC,gBAAiB,CAAEyC,QAAS5B,EAAM6B,eAAehB,GAAU,GAAI,WAAW,KAAY,KACpHC,EAASnC,MAAM4C,cAAc/B,cAAe,CAAEsB,OAAQA,EAAQgB,SAAU9B,EAAM8B,WAAc,KAC5Ff,EAAWpC,MAAM4C,cAAc9B,eAAgB,CAAEsB,QAASA,EAASK,aAAcA,EAAcW,gBAAiB/B,EAAM+B,gBAAiBC,iBAAkBhC,EAAMgC,iBAAkBb,mBAAoBA,IAAyB,SAK1OnB,EAAMiC,WAAa,WACf,GAAKjC,EAAMD,MAAMmC,KAAjB,CAEA,IAAI/B,EAAKH,EAAMI,eAAgBE,EAASH,EAAGG,OAAQC,EAAaJ,EAAGI,WAAY4B,EAAUhC,EAAGgC,QAASC,EAAajC,EAAGiC,WAAYC,EAAS/D,OAAO6B,EAAI,CAAC,SAAU,aAAc,UAAW,eACrLkB,EAAerB,EAAMsB,kBACzB,OAAQ3C,MAAM4C,cAActC,KAAMrB,SAAS,CAAE0C,OAAQA,EAAQC,WAAYP,EAAMsC,cAAc/B,GAAa4B,QAASnC,EAAMuC,WAAWJ,GAAUC,WAAY,SAAUI,EAAMC,GAClK,IAAIC,EAAwB,mBAAXpC,EAAwBA,EAAOkC,GAAQlC,EACxD,OAAQ3B,MAAM4C,cAActC,KAAK0D,KAAM,KACnChE,MAAM4C,cAAc5C,MAAMiE,SAAU,KAChCvB,EAAgB1C,MAAM4C,cAAcrC,SAAU,CAAE2D,QAASxB,EAAayB,gBAAgBC,SAASP,EAAKE,IAAOM,SAAU,SAAUzE,GACnHA,EAAE0E,OAAOJ,SACTxB,EAAayB,gBAAgBI,KAAKV,EAAKE,IACvCrB,EAAa8B,aAAaD,KAAKV,GAC/BnB,EAAa2B,SAAS3B,EAAayB,gBAAiBzB,EAAa8B,eAGjE9B,EAAa2B,SAAS3B,EAAayB,gBAAgBM,OAAO,SAAU1B,GAAK,OAAOA,IAAMc,EAAKE,KAAUrB,EAAa8B,aAAaC,OAAO,SAAU1B,GAAK,OAAOA,EAAEgB,KAASF,EAAKE,SAE5K,KACZN,GAAcA,EAAWI,EAAMC,OACtCJ,MAKbrC,EAAMqD,YAAc,WAChB,GAAKrD,EAAMD,MAAMuD,MAAjB,CAEA,IAAInD,EAAKH,EAAMkB,MAAOC,EAAqBhB,EAAGgB,mBAAoBC,EAAejB,EAAGiB,aAChFZ,EAAKR,EAAMI,eAAgBmD,EAAW/C,EAAG+C,SAAUhD,EAAaC,EAAGD,WAAY4B,EAAU3B,EAAG2B,QAAS9B,EAAaG,EAAGH,WAAkCC,GAAZE,EAAGoB,QAAkBpB,EAAGF,QAAwC+B,GAAjB7B,EAAGa,aAAuB/C,OAAOkC,EAAI,CAAC,WAAY,aAAc,UAAW,aAAc,UAAW,SAAU,kBACxSgD,EAAa5F,SAAS,CAAE2C,WAAYP,EAAMsC,cAAc/B,GAAa4B,QAASnC,EAAMuC,WAAWJ,GAAUd,aAAcrB,EAAMsB,kBAAmBM,QAASR,EAAagC,OAAO,SAAU1B,GAAK,OAAOP,EAAmB4B,SAASrB,EAAEgB,OAAUrC,WAAYA,EAAY2C,SAAUhD,EAAMyD,eAAiBpB,GACxS,OAAOkB,EAAY5E,MAAM4C,cAAcjC,cAAe1B,SAAS,CAAE8F,IAAK,SAAUC,GACxE3D,EAAM4D,iBAAmBD,GAC1BrD,OAAQA,GAAUkD,EAAY,CAAED,SAAUA,KAAiB5E,MAAM4C,cAAcvC,MAAOpB,SAAS,CAAE0C,OAAQA,GAAUkD,MAE1HK,EAAO,IAAInE,KAAKM,GACpBA,EAAMI,aAAeyD,EAAKzD,aAC1BJ,EAAM8D,6BAA+BD,EAAKC,6BAC1C9D,EAAM6B,eAAiBgC,EAAKhC,eAC5B7B,EAAM+D,kBAAoBF,EAAKE,kBAC/B/D,EAAMgE,UAAYH,EAAKG,UACvBhE,EAAMsB,gBAAkBuC,EAAKvC,gBAC7BtB,EAAMsC,cAAgBuB,EAAKvB,cAC3BtC,EAAMuC,WAAasB,EAAKtB,WACxBvC,EAAMiE,gBAAkBJ,EAAKI,gBAC7BjE,EAAMkE,UAAYL,EAAKK,UACvBlE,EAAM8B,SAAW+B,EAAK/B,SACtB9B,EAAMmE,cAAgBN,EAAKM,cAC3BnE,EAAM+B,gBAAkB8B,EAAK9B,gBAC7B/B,EAAMgC,iBAAmB6B,EAAK7B,iBAC9BhC,EAAMyD,cAAgBI,EAAKJ,cAC3BzD,EAAMoE,cAAgBzF,MAAM0F,YACxBC,EAAYtE,EAAMI,eAatB,OAZAJ,EAAMkB,MAAQ,CACVqD,cAAc,EACdpC,SAAS,EACThB,mBAAoBnB,EAAMD,MAAMuD,MAC1BtD,EAAM8D,6BAA6B9D,EAAMD,MAAMuD,MAAM1B,SACrD,GACNR,aAAc,GACdoD,OAAQ,CACJC,KAAM,EACNC,MAAQJ,GAAaA,EAAU/D,YAAc+D,EAAU/D,WAAWoE,iBAAoB,KAGvF3E,EAyGX,OAxMAnD,UAAUgD,EAAWC,GAiGrBD,EAAU+E,yBAA2B,SAAUC,EAAWC,GACtD,IAAIzE,GAAcwE,EAAUA,EAAUE,MAAQ,UAAY,IAAI1E,WAC9D,OAAKwE,EAAUG,SAAYF,MAAAA,GAAsDA,EAAUP,cAAiBlE,GAKnGwE,EAAUG,SAAYF,MAAAA,GAAsDA,EAAUP,cAAkBO,MAAAA,GAAsDA,EAAUG,cAC7K5E,EALO,CACHkE,cAAc,GASf,MAEX1E,EAAUnC,UAAUwH,kBAAoB,WACpC,IAAIlF,EAAQlD,KACRwH,EAAYxH,KAAKsD,eACjBtD,KAAKiD,MAAMiF,QACXlI,KAAK6E,SAAS,CAAEsD,cAAc,GAAQ,WAAc,OAAOjF,EAAMkE,cAE5DI,EAAUjE,YACfvD,KAAK6E,SAAS,CAAE4C,cAAc,IAElCzH,KAAK6E,SAAS,CAAEP,aAActE,KAAKmH,qBAEvCpE,EAAUnC,UAAUyH,sBAAwB,SAAUN,EAAWO,GAC7D,IAAIC,EAAgBR,EAAUA,EAAUE,MAAQ,UAAY,GACxDT,EAAYxH,KAAKsD,eACrB,GAAIgF,EAAUxE,WACV0E,KAAKC,UAAUF,EAAchF,cAAgBiF,KAAKC,UAAUjB,EAAUjE,YAAa,CACnF,IAAIA,EAAagF,EAAchF,WAAYF,EAAKkF,EAAc/E,OAAQkF,OAAkB,IAAPrF,EAAgBP,cAAgBO,EAG7G2C,GAFWzC,GAAc,IAAIoF,IAAI,SAAU/D,GAAK,OAAOA,EAAsB,mBAAb8D,EAA0BA,EAAS9D,GAAK8D,KAE9EpC,OAAO,SAAU1B,GAAK,IAAQlB,EAAI,QAAkG,QAAxFA,EAAoC,QAA9BL,EAAKiF,EAAUxE,iBAA8B,IAAPT,OAAgB,EAASA,EAAGuF,kBAA+B,IAAPlF,GAAyBA,EAAGuC,SAASrB,MAC/M,MAAuB,UAAnBmD,EAAUE,MACVF,EAAUvB,OACVuB,EAAUvB,MAAMjC,cAChBwD,EAAUvB,MAAMjC,aAAa2B,UAC7B6B,EAAUvB,MAAMjC,aAAa2B,SAASF,EAAiBzD,UAAUgB,KAC1D,IAEXvD,KAAK6E,SAAS,CACVmB,gBAAiBA,EACjBK,aAAc9C,KAEX,GAEX,OAAO,GAKXR,EAAUnC,UAAUiI,aAAe,WAC/B,IACI3F,EAAQlD,KACR+D,EAAS/D,KAAKiD,MAAMc,OACxB,GAAKA,EAAL,CAEA,IAAIJ,EAAYI,EAAOJ,UAAWmF,EAAgB/E,EAAO+E,cAAeC,EAAehF,EAAOgF,aAAcC,EAAejF,EAAOiF,aAAclE,EAAUf,EAAOe,QAASmE,EAAalF,EAAOkF,WAAYC,EAAYnF,EAAOmF,UAAWxF,EAAKK,EAAOoF,KAAMA,OAAc,IAAPzF,EAAgB,SAAWA,EAC5R,OAAOK,EAAUlC,MAAM4C,cAAc,MAAO,CAAEd,UAAW7B,WAAW6B,EAAWd,eAAiB,YAC5FiG,EACAjH,MAAM4C,cAAc1C,KAAM,CAAEqH,OAAQ,SAAUxC,IAAK5G,KAAKsH,cAAe3D,UAAW7B,WAAWe,eAAiB,iBAAiBQ,EAAK,IACzHR,eAAiB,2BAA6BiG,EACjDzF,EAAGR,eAAiB,0BAA4BkG,EAChD1F,KACJxB,MAAM4C,cAAc,MAAO,CAAEd,UAAW,mBACpC9B,MAAM4C,cAAcpC,gBAAiB,CAAEyC,QAAS9E,KAAK+E,eAAeD,GAAW,GAAIqE,EAAMpF,EAAOtD,eAAe,kBAAoBuI,MACvIjF,EAAOtD,eAAe,gBAAkB,EAAkBoB,MAAM4C,cAAc,MAAO,CAAEd,UAAW,qBAC9F9B,MAAM4C,cAAczC,OAAQ,CAAEqH,QAAS,WAAc,OAAOnG,EAAMmE,iBAAoB8B,KAAMA,GAAQD,GAAa5G,KAAKsC,EAAE,OACxH/C,MAAM4C,cAAczC,OAAQ,CAAEsH,KAAM,UAAWD,QAAS,WAAc,OAAOnG,EAAM8B,YAAemE,KAAMA,GAAQF,GAAc3G,KAAKsC,EAAE,SAC7ImE,GAAiB,OAKzBhG,EAAUnC,UAAU2I,cAAgB,WAChC,IAAItB,EAAOjI,KAAKiD,MAAMgF,KACtB,OAAQpG,MAAM4C,cAAc,MAAO,CAAEd,UAAWd,eAAiB,YAC7D7C,KAAKmD,gBACLnD,KAAKoE,MAAMqD,aACLzH,KAAKwJ,gBACI,SAATvB,EACIjI,KAAKmF,aACLnF,KAAKuG,gBAKvBxD,EAAUnC,UAAU4I,cAAgB,WAChC,OAAO3H,MAAM4C,cAAcxC,SAAU,CAAEwH,UAAW,CAAEC,KAAM,IAAM9F,OAAO,KAE3Eb,EAAUnC,UAAU+I,OAAS,WACzB,IAAIzG,EAAQlD,KAER2D,EAAY3D,KAAKiD,MAAMU,UAE3B,OAAQ9B,MAAM4C,cAAc,MAAO,CAAEd,UAAW7B,WAAWe,eAAgBc,GAAYiD,IAAK,SAAUC,GAC9F3D,EAAM0G,aAAe/C,IAEzB7G,KAAK6I,eACL7I,KAAKuJ,kBAENxG,EAzMmB,CA0M5BlB,MAAMgI,WACR9G,UAAU+G,aAAe,CACrB7B,KAAM,wBAEKlF"}