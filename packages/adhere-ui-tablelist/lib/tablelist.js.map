{"version":3,"file":"TableList.js","sources":["TableList.js"],"sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectorPrefix = void 0;\nvar antd_1 = require(\"antd\");\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar lodash_1 = require(\"lodash\");\nvar react_1 = __importDefault(require(\"react\"));\nvar adhere_ui_formitemcreator_1 = __importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\nvar SortableTable_1 = __importDefault(require(\"./SortableTable\"));\nvar TableListToolBar_1 = require(\"./TableListToolBar\");\nvar Util_1 = __importDefault(require(\"./Util\"));\nexports.selectorPrefix = 'adhere-ui-table-list';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\nvar TableList = /** @class */function (_super) {\n  __extends(TableList, _super);\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n      var _a = _this.getModeProps(),\n        dataSource = _a.dataSource,\n        rowKey = _a.rowKey,\n        pagination = _a.pagination;\n      var _b = _this.props.toolbar,\n        className = _b.className,\n        title = _b.title,\n        total = _b.total,\n        selectAll = _b.selectAll,\n        search = _b.search,\n        reload = _b.reload,\n        setting = _b.setting,\n        toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n        selectedColumnKeys = _c.selectedColumnKeys,\n        tableColumns = _c.tableColumns;\n      var rowSelection = _this.getRowSelection();\n      return react_1.default.createElement(\"div\", {\n        className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-toolbar\"))\n      }, react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left\")\n      }, title ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? react_1.default.createElement(\"span\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? adhere_util_intl_1.default.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null,\n      // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? react_1.default.createElement(TableListToolBar_1.ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? react_1.default.createElement(TableListToolBar_1.ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? react_1.default.createElement(TableListToolBar_1.ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n      var _a = _this.getModeProps(),\n        rowKey = _a.rowKey,\n        pagination = _a.pagination,\n        loading = _a.loading,\n        _renderItem = _a.renderItem,\n        rest = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n      var rowSelection = _this.getRowSelection();\n      return react_1.default.createElement(antd_1.List, __assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return react_1.default.createElement(antd_1.List.Item, null, react_1.default.createElement(react_1.default.Fragment, null, rowSelection ? react_1.default.createElement(antd_1.Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, rest));\n    };\n    /**\n     * 渲染表格\n     */\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n        selectedColumnKeys = _a.selectedColumnKeys,\n        tableColumns = _a.tableColumns;\n      var _b = _this.getModeProps(),\n        sortable = _b.sortable,\n        pagination = _b.pagination,\n        loading = _b.loading,\n        dataSource = _b.dataSource,\n        columns = _b.columns,\n        rowKey = _b.rowKey,\n        rowSelection = _b.rowSelection,\n        rest = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n      var tableProps = __assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, rest);\n      return sortable ? react_1.default.createElement(SortableTable_1.default, __assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : react_1.default.createElement(antd_1.Table, __assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n    var util = new Util_1.default(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = react_1.default.createRef();\n    var modeProps = _this.getModeProps();\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var _a;\n    var dataSource = ((_a = nextProps[nextProps.mode || 'table']) !== null && _a !== void 0 ? _a : {}).dataSource;\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n    return null;\n  };\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n    var modeProps = this.getModeProps();\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var _a;\n    var nextModeProps = (_a = nextProps[nextProps.mode || 'table']) !== null && _a !== void 0 ? _a : {};\n    var modeProps = this.getModeProps();\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n        _b = nextModeProps.rowKey,\n        rowKey_1 = _b === void 0 ? defaultRowKey : _b;\n      var allKeys = (dataSource || []).map(\n      // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      });\n      // 得到没有被全选排除的keys\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        // @ts-ignore\n        nextProps.table.rowSelection.onChange(selectedRowKeys, (0, lodash_1.cloneDeep)(dataSource));\n        return false;\n      }\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n  TableList.prototype.renderSearch = function () {\n    var _a;\n    var _this = this;\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n      beforeContent = search.beforeContent,\n      afterContent = search.afterContent,\n      optionRender = search.optionRender,\n      columns = search.columns,\n      searchText = search.searchText,\n      resetText = search.resetText,\n      _b = search.size,\n      size = _b === void 0 ? 'middle' : _b;\n    return search ? react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(className, \"\".concat(exports.selectorPrefix, \"-search\"))\n    }, beforeContent, react_1.default.createElement(antd_1.Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(exports.selectorPrefix, \"-search-form-have-before\")] = beforeContent, _a[\"\".concat(exports.selectorPrefix, \"-search-form-have-after\")] = afterContent, _a))\n    }, react_1.default.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : react_1.default.createElement(\"div\", {\n      className: \"ant-form-btn-group\"\n    }, react_1.default.createElement(antd_1.Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || adhere_util_intl_1.default.v('重置')), react_1.default.createElement(antd_1.Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || adhere_util_intl_1.default.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n  TableList.prototype.renderLoading = function () {\n    return react_1.default.createElement(antd_1.Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n  TableList.prototype.render = function () {\n    var _this = this;\n    var className = this.props.className;\n    return react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(exports.selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n  TableList.displayName = 'TableList';\n  return TableList;\n}(react_1.default.PureComponent);\nTableList.defaultProps = {\n  mode: 'table'\n};\nexports.default = TableList;"],"names":["__extends","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","selectorPrefix","require","classnames_1","lodash_1","react_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","SortableTable_1","TableListToolBar_1","Util_1","defaultRowKey","TableList","_super","props","_this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","createElement","concat","vHtml","ToolbarSelectAll","setSelectAll","v","setState","columns","getFormColumns","ToolbarReload","onSearch","ToolbarSetting","onSettingChange","onSettingSortEnd","renderList","loading","_renderItem","rest","list","renderItem","List","getPagination","getLoading","item","index","key","Item","Fragment","Checkbox","checked","selectedRowKeys","includes","onChange","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","Table","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","cloneDeep","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","Form","layout","Button","onClick","type","renderContent","renderLoading","Skeleton","paragraph","rows","render","TableListRef","displayName","PureComponent","defaultProps"],"mappings":"AAAA,aAEA,IAAIA,UAA4C,WAC9C,IAAIC,EAAiB,SAAuBC,EAAGC,GAQ7C,OAPAF,EAAiBG,OAAOC,iBAAkB,CACxCC,UAAW,EACb,YAAaC,MAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,CAChB,EAAK,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAC5E,IACsBN,EAAGC,CAAC,CAC5B,EACA,OAAO,SAAUD,EAAGC,GAClB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAAY,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAEnI,SAASW,IACPC,KAAKC,YAAcd,CACrB,CAHAD,EAAeC,EAAGC,CAAC,EAInBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOa,OAAOd,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACjF,CACF,EAAE,EACEI,SAA0C,WAQ5C,OAPAA,SAAWd,OAAOe,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAId,KADTa,EAAIG,UAAUF,GACOlB,OAAOK,UAAUC,eAAeC,KAAKU,EAAGb,CAAC,IAAGY,EAAEZ,GAAKa,EAAEb,IAE5E,OAAOY,CACT,GACgBM,MAAMX,KAAMS,SAAS,CACvC,EACIG,OAAsC,SAAUN,EAAGO,GACrD,IAAIR,EAAI,GACR,IAASZ,KAAKa,EAAOjB,OAAOK,UAAUC,eAAeC,KAAKU,EAAGb,CAAC,GAAKoB,EAAEC,QAAQrB,CAAC,EAAI,IAAGY,EAAEZ,GAAKa,EAAEb,IAC9F,GAAS,MAALa,GAAqD,YAAxC,OAAOjB,OAAO0B,sBAAsC,IAAK,IAAIR,EAAI,EAAGd,EAAIJ,OAAO0B,sBAAsBT,CAAC,EAAGC,EAAId,EAAEiB,OAAQH,CAAC,GACnIM,EAAEC,QAAQrB,EAAEc,EAAE,EAAI,GAAKlB,OAAOK,UAAUsB,qBAAqBpB,KAAKU,EAAGb,EAAEc,EAAE,IAAGF,EAAEZ,EAAEc,IAAMD,EAAEb,EAAEc,KAEhG,OAAOF,CACT,EACIY,gBAAwD,SAAUC,GACpE,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnCE,QAAWF,CACb,CACF,EAKIG,QAJJhC,OAAOiC,eAAeC,QAAS,aAAc,CAC3CC,MAAO,CAAA,CACT,CAAC,EACDD,QAAQE,eAAiB,KAAA,EACZC,QAAQ,MAAM,GACvBC,aAAeV,gBAAgBS,QAAQ,YAAY,CAAC,EACpDE,SAAWF,QAAQ,QAAQ,EAC3BG,QAAUZ,gBAAgBS,QAAQ,OAAO,CAAC,EAC1CI,4BAA8Bb,gBAAgBS,QAAQ,uCAAuC,CAAC,EAC9FK,mBAAqBd,gBAAgBS,QAAQ,8BAA8B,CAAC,EAC5EM,gBAAkBf,gBAAgBS,QAAQ,iBAAiB,CAAC,EAC5DO,mBAAqBP,QAAQ,oBAAoB,EACjDQ,OAASjB,gBAAgBS,QAAQ,QAAQ,CAAC,EAE1CS,eADJZ,QAAQE,eAAiB,uBACL,MAMhBW,UAAyB,SAAUC,GAErC,SAASD,EAAUE,GACjB,IAAIC,EAAQF,EAAOzC,KAAKI,KAAMsC,CAAK,GAAKtC,KAuIpCwC,GAnIJD,EAAME,cAAgB,WACpB,IAEEC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACEC,EAjBJ,GAAKhB,EAAMD,MAAMkB,QAkBjB,OAhBEd,GADEe,EAAKlB,EAAMmB,aAAa,GACVhB,WAChBC,EAASc,EAAGd,OACZC,EAAaa,EAAGb,WAEhBC,GADEc,EAAKpB,EAAMD,MAAMkB,SACJX,UACfC,EAAQa,EAAGb,MACXC,EAAQY,EAAGZ,MACXC,EAAYW,EAAGX,UACfC,EAASU,EAAGV,OACZC,EAASS,EAAGT,OACZC,EAAUQ,EAAGR,QACbC,EAAsBO,EAAGP,oBAEzBC,GADEO,EAAKrB,EAAMsB,OACWR,mBACxBC,EAAeM,EAAGN,aAChBC,EAAehB,EAAMuB,gBAAgB,EAClCjC,QAAQT,QAAQ2C,cAAc,MAAO,CAC1ClB,WAAW,EAAIlB,aAAaP,SAASyB,EAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,UAAU,CAAC,CAC/F,EAAGI,QAAQT,QAAQ2C,cAAc,MAAO,CACtClB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,eAAe,CAC9D,EAAGqB,EAAQjB,QAAQT,QAAQ2C,cAAc,OAAQ,CAC/ClB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,qBAAqB,CACpE,EAAGqB,CAAK,EAAI,KAAMC,EAAQlB,QAAQT,QAAQ2C,cAAc,OAAQ,CAC9DlB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,qBAAqB,CACpE,EAAa,CAAA,IAAVsB,EAAiBhB,mBAAmBX,QAAQ6C,MAAM,mBAAoB,CACvEzD,EAAGoC,GAAcA,EAAWG,KAC9B,CAAC,EAAIA,CAAK,EAAI,KAEdC,EAAYnB,QAAQT,QAAQ2C,cAAc9B,mBAAmBiC,iBAAkB,CAC7ElB,UAAWA,EACXN,WAAYA,EACZa,aAAcA,EACdZ,OAAQA,EACRwB,aAAc,SAAsBC,GAClC,OAAO7B,EAAM8B,SAAS,CACpBrB,UAAWoB,CACb,CAAC,CACH,CACF,CAAC,EAAI,IAAI,EAAGvC,QAAQT,QAAQ2C,cAAc,MAAO,CAC/ClB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,gBAAgB,CAC/D,EAAG2B,EAAqBH,EAASpB,QAAQT,QAAQ2C,cAAcjC,4BAA4BV,QAAS,CAClGkD,QAAS/B,EAAMgC,eAAetB,GAAU,GAAI,UAAW,CAAA,CAAI,CAC7D,CAAC,EAAI,KAAMC,EAASrB,QAAQT,QAAQ2C,cAAc9B,mBAAmBuC,cAAe,CAClFtB,OAAQA,EACRuB,SAAUlC,EAAMkC,QAClB,CAAC,EAAI,KAAMtB,EAAUtB,QAAQT,QAAQ2C,cAAc9B,mBAAmByC,eAAgB,CACpFvB,QAASA,EACTG,aAAcA,EACdqB,gBAAiBpC,EAAMoC,gBACvBC,iBAAkBrC,EAAMqC,iBACxBvB,mBAAoBA,CACtB,CAAC,EAAI,IAAI,CAAC,CACZ,EAIAd,EAAMsC,WAAa,WACjB,IAEElC,EACAC,EACAkC,EACAC,EACAC,EACEzB,EAPJ,GAAKhB,EAAMD,MAAM2C,KAQjB,OAPIxB,EAAKlB,EAAMmB,aAAa,EAC1Bf,EAASc,EAAGd,OACZC,EAAaa,EAAGb,WAChBkC,EAAUrB,EAAGqB,QACbC,EAActB,EAAGyB,WACjBF,EAAOpE,OAAO6C,EAAI,CAAC,SAAU,aAAc,UAAW,aAAa,EACjEF,EAAehB,EAAMuB,gBAAgB,EAClCjC,QAAQT,QAAQ2C,cAAc1C,OAAO8D,KAAMhF,SAAS,CACzDwC,OAAQA,EACRC,WAAYL,EAAM6C,cAAcxC,CAAU,EAC1CkC,QAASvC,EAAM8C,WAAWP,CAAO,EACjCI,WAAY,SAAoBI,EAAMC,GACpC,IAAIC,EAAwB,YAAlB,OAAO7C,EAAwBA,EAAO2C,CAAI,EAAI3C,EACxD,OAAOd,QAAQT,QAAQ2C,cAAc1C,OAAO8D,KAAKM,KAAM,KAAM5D,QAAQT,QAAQ2C,cAAclC,QAAQT,QAAQsE,SAAU,KAAMnC,EAAe1B,QAAQT,QAAQ2C,cAAc1C,OAAOsE,SAAU,CACvLC,QAASrC,EAAasC,gBAAgBC,SAASR,EAAKE,EAAI,EACxDO,SAAU,SAAkBlF,GACtBA,EAAEmF,OAAOJ,SACXrC,EAAasC,gBAAgBI,KAAKX,EAAKE,EAAI,EAC3CjC,EAAa2C,aAAaD,KAAKX,CAAI,EACnC/B,EAAawC,SAASxC,EAAasC,gBAAiBtC,EAAa2C,YAAY,GAE7E3C,EAAawC,SAASxC,EAAasC,gBAAgBM,OAAO,SAAU/B,GAClE,OAAOA,IAAMkB,EAAKE,EACpB,CAAC,EAAGjC,EAAa2C,aAAaC,OAAO,SAAU/B,GAC7C,OAAOA,EAAEoB,KAASF,EAAKE,EACzB,CAAC,CAAC,CAEN,CACF,CAAC,EAAI,KAAMT,GAAeA,EAAYO,EAAMC,CAAK,CAAC,CAAC,CACrD,CACF,EAAGP,CAAI,CAAC,CACV,EAIAzC,EAAM6D,YAAc,WAClB,IAEE/C,EACAC,EAEA+C,EAEAvB,EACApC,EAEAC,EAEAqC,EACEsB,EAbJ,GAAK/D,EAAMD,MAAMiE,MAuBjB,OAtBI9C,EAAKlB,EAAMsB,MACbR,EAAqBI,EAAGJ,mBACxBC,EAAeG,EAAGH,aAElB+C,GADE1C,EAAKpB,EAAMmB,aAAa,GACZ2C,SACdzD,EAAae,EAAGf,WAChBkC,EAAUnB,EAAGmB,QACbpC,EAAaiB,EAAGjB,WACNiB,EAAGW,QACb3B,EAASgB,EAAGhB,OACGgB,EAAGJ,aAClByB,EAAOpE,OAAO+C,EAAI,CAAC,WAAY,aAAc,UAAW,aAAc,UAAW,SAAU,eAAe,EACxG2C,EAAanG,SAAS,CACxByC,WAAYL,EAAM6C,cAAcxC,CAAU,EAC1CkC,QAASvC,EAAM8C,WAAWP,CAAO,EACjCvB,aAAchB,EAAMuB,gBAAgB,EACpCQ,QAAShB,EAAa6C,OAAO,SAAU/B,GACrC,OAAOf,EAAmByC,SAAS1B,EAAEoB,GAAG,CAC1C,CAAC,EACD9C,WAAYA,EACZqD,SAAUxD,EAAMiE,aAClB,EAAGxB,CAAI,EACAqB,EAAWxE,QAAQT,QAAQ2C,cAAc/B,gBAAgBZ,QAASjB,SAAS,CAChFsG,IAAK,SAAaC,GAChBnE,EAAMoE,iBAAmBD,CAC3B,EACA/D,OAAQA,CACV,EAAG2D,EAAY,CACbD,SAAUA,CACZ,CAAC,CAAC,EAAIxE,QAAQT,QAAQ2C,cAAc1C,OAAOuF,MAAOzG,SAAS,CACzDwC,OAAQA,CACV,EAAG2D,CAAU,CAAC,CAChB,EACW,IAAIpE,OAAOd,QAAQmB,CAAK,GAiB/BsE,GAhBJtE,EAAMmB,aAAelB,EAAKkB,aAC1BnB,EAAMuE,6BAA+BtE,EAAKsE,6BAC1CvE,EAAMgC,eAAiB/B,EAAK+B,eAC5BhC,EAAMwE,kBAAoBvE,EAAKuE,kBAC/BxE,EAAMyE,UAAYxE,EAAKwE,UACvBzE,EAAMuB,gBAAkBtB,EAAKsB,gBAC7BvB,EAAM6C,cAAgB5C,EAAK4C,cAC3B7C,EAAM8C,WAAa7C,EAAK6C,WACxB9C,EAAM0E,gBAAkBzE,EAAKyE,gBAC7B1E,EAAM2E,UAAY1E,EAAK0E,UACvB3E,EAAMkC,SAAWjC,EAAKiC,SACtBlC,EAAM4E,cAAgB3E,EAAK2E,cAC3B5E,EAAMoC,gBAAkBnC,EAAKmC,gBAC7BpC,EAAMqC,iBAAmBpC,EAAKoC,iBAC9BrC,EAAMiE,cAAgBhE,EAAKgE,cAC3BjE,EAAM6E,cAAgBvF,QAAQT,QAAQiG,UAAU,EAChC9E,EAAMmB,aAAa,GAWnC,OAVAnB,EAAMsB,MAAQ,CACZyD,aAAc,CAAA,EACdxC,QAAS,CAAA,EACTzB,mBAAoBd,EAAMD,MAAMiE,MAAQhE,EAAMuE,6BAA6BvE,EAAMD,MAAMiE,MAAMjC,OAAO,EAAI,GACxGhB,aAAc,GACdiE,OAAQ,CACNC,KAAM,EACNC,MAAOZ,GAAaA,EAAUjE,YAAciE,EAAUjE,WAAW8E,iBAAmB,EACtF,CACF,EACOnF,CACT,CAyIA,OA/SAtD,UAAUmD,EAAWC,CAAM,EAuK3BD,EAAUuF,yBAA2B,SAAUC,EAAWC,GACxD,IACInF,GAAc,OAACe,EAAKmE,EAAUA,EAAUE,MAAQ,UAAsCrE,EAAK,IAAIf,WACnG,MAAI,CAACkF,EAAUG,SAAYF,MAAAA,GAAsDA,EAAUP,cAAiB5E,GAIjGkF,EAAUG,SAAYF,MAAAA,GAAsDA,EAAUP,cAAkBO,MAAAA,GAAsDA,EAAUG,cAAiBtF,EAC3L,CACL4E,aAAc,CAAA,CAChB,EAEK,IACT,EACAlF,EAAU1C,UAAUuI,kBAAoB,WACtC,IAAI1F,EAAQvC,KACR6G,EAAY7G,KAAK0D,aAAa,EAC9B1D,KAAKsC,MAAMyF,QACb/H,KAAKqE,SAAS,CACZ2D,aAAc,CAAA,CAChB,EAAG,WACD,OAAOzF,EAAM2E,UAAU,CACzB,CAAC,EACQL,EAAUnE,YACnB1C,KAAKqE,SAAS,CACZiD,aAAc,CAAA,CAChB,CAAC,EAEHtH,KAAKqE,SAAS,CACZf,aAActD,KAAKiH,gBAAgB,CACrC,CAAC,CACH,EACA7E,EAAU1C,UAAUwI,sBAAwB,SAAUN,EAAWO,GAC/D,IAMIC,EALAC,EAAgB,OAAC5E,EAAKmE,EAAUA,EAAUE,MAAQ,UAAsCrE,EAAK,GAC7FoD,EAAY7G,KAAK0D,aAAa,EAClC,MAAIyE,CAAAA,EAAUnF,WAAasF,KAAKC,UAAUF,EAAc3F,UAAU,IAAM4F,KAAKC,UAAU1B,EAAUnE,UAAU,IACrGA,EAAa2F,EAAc3F,WAC7BiB,EAAK0E,EAAc1F,OACnByF,EAAkB,KAAA,IAAPzE,EAAgBxB,cAAgBwB,EAOzCkC,GANWnD,GAAc,IAAI8F,IAEjC,SAAUpE,GACR,OAAOA,EAAsB,YAApB,OAAOgE,EAA0BA,EAAShE,CAAC,EAAIgE,EAC1D,CAAC,EAE6BjC,OAAO,SAAU/B,GAC7C,IAAQT,EACR,MAAO,EAAE,OAACA,EAAK,OAACF,EAAK0E,EAAUnF,WAAuC,KAAA,EAASS,EAAGgF,aAAiD9E,EAAGmC,SAAS1B,CAAC,EAClJ,CAAC,EACsB,UAAnBwD,EAAUE,MAAoBF,EAAUrB,OAASqB,EAAUrB,MAAMhD,cAAgBqE,EAAUrB,MAAMhD,aAAawC,SAEhH6B,EAAUrB,MAAMhD,aAAawC,SAASF,GAAiB,EAAIjE,SAAS8G,WAAWhG,CAAU,CAAC,EAG5F1C,KAAKqE,SAAS,CACZwB,gBAAiBA,EACjBK,aAAcxD,CAChB,CAAC,EACM,CAAA,EAGX,EAIAN,EAAU1C,UAAUiJ,aAAe,WACjC,IAII9F,EACF+F,EACAC,EACAC,EACAxE,EACAyE,EACAC,EAEAC,EAXE1G,EAAQvC,KACRiD,EAASjD,KAAKsC,MAAMW,OACxB,GAAKA,EAUL,OATIJ,EAAYI,EAAOJ,UACrB+F,EAAgB3F,EAAO2F,cACvBC,EAAe5F,EAAO4F,aACtBC,EAAe7F,EAAO6F,aACtBxE,EAAUrB,EAAOqB,QACjByE,EAAa9F,EAAO8F,WACpBC,EAAY/F,EAAO+F,UAEnBC,EAAc,KAAA,KADdtF,EAAKV,EAAOgG,MACW,SAAWtF,EAC7BV,EAASpB,QAAQT,QAAQ2C,cAAc,MAAO,CACnDlB,WAAW,EAAIlB,aAAaP,SAASyB,EAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,SAAS,CAAC,CAC9F,EAAGmH,EAAe/G,QAAQT,QAAQ2C,cAAc1C,OAAO6H,KAAM,CAC3DC,OAAQ,SACR1C,IAAKzG,KAAKoH,cACVvE,WAAW,EAAIlB,aAAaP,SAAS,GAAG4C,OAAOzC,QAAQE,eAAgB,cAAc,IAAIgC,EAAK,IAAO,GAAGO,OAAOzC,QAAQE,eAAgB,0BAA0B,GAAKmH,EAAenF,EAAG,GAAGO,OAAOzC,QAAQE,eAAgB,yBAAyB,GAAKoH,EAAcpF,EAAG,CAC3Q,EAAG5B,QAAQT,QAAQ2C,cAAc,MAAO,CACtClB,UAAW,iBACb,EAAGhB,QAAQT,QAAQ2C,cAAcjC,4BAA4BV,QAAS,CACpEkD,QAAStE,KAAKuE,eAAeD,GAAW,GAAI2E,EAAMhG,EAAOtD,eAAe,cAAc,GAAK,CAACmJ,CAAY,CAC1G,CAAC,CAAC,EAAG7F,EAAOtD,eAAe,cAAc,EAAImJ,EAAejH,QAAQT,QAAQ2C,cAAc,MAAO,CAC/FlB,UAAW,oBACb,EAAGhB,QAAQT,QAAQ2C,cAAc1C,OAAO+H,OAAQ,CAC9CC,QAAS,WACP,OAAO9G,EAAM4E,cAAc,CAC7B,EACA8B,KAAMA,CACR,EAAGD,GAAajH,mBAAmBX,QAAQgD,EAAE,IAAI,CAAC,EAAGvC,QAAQT,QAAQ2C,cAAc1C,OAAO+H,OAAQ,CAChGE,KAAM,UACND,QAAS,WACP,OAAO9G,EAAMkC,SAAS,CACxB,EACAwE,KAAMA,CACR,EAAGF,GAAchH,mBAAmBX,QAAQgD,EAAE,IAAI,CAAC,CAAC,CAAC,EAAGyE,CAAY,EAAI,IAC1E,EAIAzG,EAAU1C,UAAU6J,cAAgB,WAClC,IAAIzB,EAAO9H,KAAKsC,MAAMwF,KACtB,OAAOjG,QAAQT,QAAQ2C,cAAc,MAAO,CAC1ClB,UAAW,GAAGmB,OAAOzC,QAAQE,eAAgB,UAAU,CACzD,EAAGzB,KAAKyC,cAAc,EAAGzC,KAAK6D,MAAMyD,aAAetH,KAAKwJ,cAAc,EAAa,SAAT1B,EAAkB9H,KAAK6E,WAAW,EAAI7E,KAAKoG,YAAY,CAAC,CACpI,EAIAhE,EAAU1C,UAAU8J,cAAgB,WAClC,OAAO3H,QAAQT,QAAQ2C,cAAc1C,OAAOoI,SAAU,CACpDC,UAAW,CACTC,KAAM,EACR,EACA7G,MAAO,CAAA,CACT,CAAC,CACH,EACAV,EAAU1C,UAAUkK,OAAS,WAC3B,IAAIrH,EAAQvC,KACR6C,EAAY7C,KAAKsC,MAAMO,UAC3B,OAAOhB,QAAQT,QAAQ2C,cAAc,MAAO,CAC1ClB,WAAW,EAAIlB,aAAaP,SAASG,QAAQE,eAAgBoB,CAAS,EACtE4D,IAAK,SAAaC,GAChBnE,EAAMsH,aAAenD,CACvB,CACF,EAAG1G,KAAK2I,aAAa,EAAG3I,KAAKuJ,cAAc,CAAC,CAC9C,EACAnH,EAAU0H,YAAc,YACjB1H,CACT,EAAEP,QAAQT,QAAQ2I,aAAa,EAC/B3H,UAAU4H,aAAe,CACvBlC,KAAM,OACR,EACAvG,QAAQH,QAAUgB"}