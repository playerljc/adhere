{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolbarSetting = exports.ToolbarReload = exports.ToolbarSelectAll = void 0;\n\nvar tslib_1 = require(\"tslib\");\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\n\nvar antd_1 = require(\"antd\");\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\n\nvar icons_1 = require(\"@ant-design/icons\");\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar tablelist_1 = require(\"./tablelist\");\n\nvar ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n\n  var selectAll = _a.selectAll,\n      rowSelection = _a.rowSelection,\n      rowKey = _a.rowKey,\n      dataSource = _a.dataSource,\n      setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n\n  return react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('全选'),\n    placement: \"top\"\n  }, selectAll), react_1.default.createElement(antd_1.Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || adhere_util_intl_1.default.v('全选')));\n};\n\nexports.ToolbarSelectAll = ToolbarSelectAll;\n\nvar ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n      onSearch = _a.onSearch;\n  return react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || react_1.default.createElement(icons_1.ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\n\nexports.ToolbarReload = ToolbarReload;\n\nvar ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n      tableColumns = _a.tableColumns,\n      onSettingChange = _a.onSettingChange,\n      onSettingSortEnd = _a.onSettingSortEnd,\n      selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = (0, react_sortable_hoc_1.SortableElement)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox, tslib_1.__assign({}, props));\n  });\n  var SortableWrapper = (0, react_sortable_hoc_1.SortableContainer)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox.Group, tslib_1.__assign({}, props));\n  });\n\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        _onChange = _a.onChange;\n    return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(antd_1.Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, adhere_util_intl_1.default.v('列展示')));\n  };\n\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        onChange = _a.onChange,\n        onSortEnd = _a.onSortEnd;\n    return (// @ts-ignore\n      react_1.default.createElement(SortableWrapper, {\n        helperClass: \"\".concat(tablelist_1.selectorPrefix, \"-set-dragging\"),\n        value: selectedColumnKeys,\n        onChange: onChange,\n        onSortEnd: onSortEnd,\n        distance: 2\n      }, columns.map(function (item, index) {\n        return (// @ts-ignore\n          react_1.default.createElement(SortableItem, {\n            value: item.key,\n            index: index,\n            key: item.key\n          }, item.title)\n        );\n      }))\n    );\n  };\n\n  return react_1.default.createElement(antd_1.Popover, tslib_1.__assign({\n    title: react_1.default.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: react_1.default.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(tablelist_1.selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || react_1.default.createElement(icons_1.SettingOutlined, {\n    type: \"setting\"\n  })));\n};\n\nexports.ToolbarSetting = ToolbarSetting;"],"names":["require","Object","defineProperty","exports","value","ToolbarSetting","ToolbarReload","ToolbarSelectAll","tslib_1","antd_1","react_1","__importDefault","react_sortable_hoc_1","icons_1","adhere_util_intl_1","tablelist_1","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","default","createElement","Tooltip","__assign","title","v","placement","Checkbox","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_e","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","Popover","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","concat","selectorPrefix","distance","item","index","trigger","overlayClassName","SettingOutlined","type"],"mappings":"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"}