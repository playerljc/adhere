{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToolbarSetting = exports.ToolbarReload = exports.ToolbarSelectAll = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\n/*\r\n * @Description: tablelist的工具栏项\r\n * @Author: yumeng.qin\r\n * @Date: 2021-04-28 11:21:06\r\n * @LastEditor: yumeng.qin\r\n * @LastEditTime: 2021-05-06 14:25:16\r\n */\r\nvar antd_1 = require(\"antd\");\r\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar icons_1 = require(\"@ant-design/icons\");\r\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar tablelist_1 = require(\"./tablelist\");\r\nvar ToolbarSelectAll = function (_a) {\r\n    var _b, _c, _d, _e;\r\n    var selectAll = _a.selectAll, rowSelection = _a.rowSelection, rowKey = _a.rowKey, dataSource = _a.dataSource, setSelectAll = _a.setSelectAll;\r\n    if (!rowSelection)\r\n        return null;\r\n    function onChange(e) {\r\n        if (e.target.checked) {\r\n            rowSelection.onChange(dataSource.map(function (v) { return v[rowKey]; }), dataSource);\r\n        }\r\n        else {\r\n            rowSelection.onChange([], []);\r\n        }\r\n        if (selectAll.total && setSelectAll) {\r\n            setSelectAll(e.target.checked);\r\n        }\r\n    }\r\n    return (react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({ title: adhere_util_intl_1.default.v('全选'), placement: \"top\" }, selectAll), react_1.default.createElement(antd_1.Checkbox, { indeterminate: selectAll.total && rowSelection.selectAll\r\n            ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length\r\n            : rowSelection.selectedRowKeys.length &&\r\n                rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), checked: selectAll.total && rowSelection.selectAll\r\n            ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length)\r\n            : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), onChange: onChange }, selectAll.title || adhere_util_intl_1.default.v('全选'))));\r\n};\r\nexports.ToolbarSelectAll = ToolbarSelectAll;\r\nvar ToolbarReload = function (_a) {\r\n    var reload = _a.reload, onSearch = _a.onSearch;\r\n    return (react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({ title: adhere_util_intl_1.default.v('刷新'), placement: \"top\" }, reload), reload.render || react_1.default.createElement(icons_1.ReloadOutlined, { onClick: function () { return onSearch(); } })));\r\n};\r\nexports.ToolbarReload = ToolbarReload;\r\nvar ToolbarSetting = function (_a) {\r\n    var setting = _a.setting, tableColumns = _a.tableColumns, onSettingChange = _a.onSettingChange, onSettingSortEnd = _a.onSettingSortEnd, selectedColumnKeys = _a.selectedColumnKeys;\r\n    var SortableItem = (0, react_sortable_hoc_1.SortableElement)(function (props) { return react_1.default.createElement(antd_1.Checkbox, tslib_1.__assign({}, props)); });\r\n    var SortableWrapper = (0, react_sortable_hoc_1.SortableContainer)(function (props) { return react_1.default.createElement(antd_1.Checkbox.Group, tslib_1.__assign({}, props)); });\r\n    var SettingTitle = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange;\r\n        return (react_1.default.createElement(react_1.default.Fragment, null,\r\n            react_1.default.createElement(antd_1.Checkbox, { indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length), checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length), onChange: function (e) { return onChange(e.target.checked ? columns.map(function (v) { return v.key; }) : []); } }, adhere_util_intl_1.default.v('列展示'))));\r\n    };\r\n    var SettingContent = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange, onSortEnd = _a.onSortEnd;\r\n        return (\r\n        // @ts-ignore\r\n        react_1.default.createElement(SortableWrapper, { helperClass: \"\".concat(tablelist_1.selectorPrefix, \"-set-dragging\"), value: selectedColumnKeys, onChange: onChange, onSortEnd: onSortEnd, distance: 2 }, columns.map(function (item, index) { return (\r\n        // @ts-ignore\r\n        react_1.default.createElement(SortableItem, { value: item.key, index: index, key: item.key }, item.title)); })));\r\n    };\r\n    return (react_1.default.createElement(antd_1.Popover, tslib_1.__assign({ title: react_1.default.createElement(SettingTitle, { columns: tableColumns, onChange: onSettingChange, selectedColumnKeys: selectedColumnKeys }), content: react_1.default.createElement(SettingContent, { columns: tableColumns, onChange: onSettingChange, onSortEnd: onSettingSortEnd, selectedColumnKeys: selectedColumnKeys }), trigger: \"click\", placement: \"bottomRight\", overlayClassName: \"\".concat(tablelist_1.selectorPrefix, \"-settingOverlay\") }, setting.Popover),\r\n        react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({ title: adhere_util_intl_1.default.v('设置'), placement: \"top\" }, setting), setting.render || react_1.default.createElement(icons_1.SettingOutlined, { type: \"setting\" }))));\r\n};\r\nexports.ToolbarSetting = ToolbarSetting;\r\n//# sourceMappingURL=tablelisttoolbar.js.map"],"names":["Object","defineProperty","exports","value","ToolbarSetting","ToolbarReload","ToolbarSelectAll","tslib_1","require","antd_1","react_1","__importDefault","react_sortable_hoc_1","icons_1","adhere_util_intl_1","tablelist_1","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","default","createElement","Tooltip","__assign","title","v","placement","Checkbox","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_e","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","Popover","columns","Fragment","key","content","onSortEnd","helperClass","concat","selectorPrefix","distance","item","index","trigger","overlayClassName","SettingOutlined","type"],"mappings":"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"}