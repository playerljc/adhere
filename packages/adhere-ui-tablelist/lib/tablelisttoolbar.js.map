{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToolbarSetting = exports.ToolbarReload = exports.ToolbarSelectAll = void 0;\r\n/*\r\n * @Description: tablelist的工具栏项\r\n * @Author: yumeng.qin\r\n * @Date: 2021-04-28 11:21:06\r\n * @LastEditor: yumeng.qin\r\n * @LastEditTime: 2021-05-06 14:25:16\r\n */\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar antd_1 = require(\"antd\");\r\n// import Tooltip from 'antd/lib/tooltip';\r\n// import Checkbox from 'antd/lib/checkbox';\r\n// import Popover from 'antd/lib/popover';\r\nvar icons_1 = require(\"@ant-design/icons\");\r\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar selectorPrefix = 'adhere-ui-tablelist';\r\nexports.ToolbarSelectAll = function (_a) {\r\n    var _b, _c, _d, _e;\r\n    var selectAll = _a.selectAll, rowSelection = _a.rowSelection, rowKey = _a.rowKey, dataSource = _a.dataSource, setSelectAll = _a.setSelectAll;\r\n    if (!rowSelection)\r\n        return null;\r\n    function onChange(e) {\r\n        if (e.target.checked) {\r\n            rowSelection.onChange(dataSource.map(function (v) { return v[rowKey]; }), dataSource);\r\n        }\r\n        else {\r\n            rowSelection.onChange([], []);\r\n        }\r\n        if (selectAll.total && setSelectAll) {\r\n            setSelectAll(e.target.checked);\r\n        }\r\n    }\r\n    return (react_1.default.createElement(antd_1.Tooltip, __assign({ title: adhere_util_intl_1.default.v('全选'), placement: \"top\" }, selectAll), react_1.default.createElement(antd_1.Checkbox, { indeterminate: selectAll.total && rowSelection.selectAll\r\n            ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length &&\r\n            rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), checked: selectAll.total && rowSelection.selectAll\r\n            ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length)\r\n            : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), onChange: onChange }, selectAll.title || adhere_util_intl_1.default.v('全选'))));\r\n};\r\nexports.ToolbarReload = function (_a) {\r\n    var reload = _a.reload, onSearch = _a.onSearch;\r\n    return (react_1.default.createElement(antd_1.Tooltip, __assign({ title: adhere_util_intl_1.default.v('刷新'), placement: \"top\" }, reload), reload.render || react_1.default.createElement(icons_1.ReloadOutlined, { onClick: function () { return onSearch(); } })));\r\n};\r\nexports.ToolbarSetting = function (_a) {\r\n    var setting = _a.setting, tableColumns = _a.tableColumns, onSettingChange = _a.onSettingChange, onSettingSortEnd = _a.onSettingSortEnd, selectedColumnKeys = _a.selectedColumnKeys;\r\n    var SortableItem = react_sortable_hoc_1.SortableElement(function (props) { return react_1.default.createElement(antd_1.Checkbox, __assign({}, props)); });\r\n    var SortableWrapper = react_sortable_hoc_1.SortableContainer(function (props) { return react_1.default.createElement(antd_1.Checkbox.Group, __assign({}, props)); });\r\n    var SettingTitle = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange;\r\n        return (react_1.default.createElement(react_1.default.Fragment, null,\r\n            react_1.default.createElement(antd_1.Checkbox, { indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length), checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length), onChange: function (e) { return onChange(e.target.checked ? columns.map(function (v) { return v.key; }) : []); } }, adhere_util_intl_1.default.v('列展示'))));\r\n    };\r\n    var SettingContent = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange, onSortEnd = _a.onSortEnd;\r\n        return (react_1.default.createElement(SortableWrapper, { helperClass: \"set-dragging\", value: selectedColumnKeys, onChange: onChange, onSortEnd: onSortEnd, distance: 2 }, columns.map(function (item, index) { return (react_1.default.createElement(SortableItem, { value: item.key, index: index, key: item.key }, item.title)); })));\r\n    };\r\n    return (react_1.default.createElement(antd_1.Popover, __assign({ title: react_1.default.createElement(SettingTitle, { columns: tableColumns, onChange: onSettingChange, selectedColumnKeys: selectedColumnKeys }), content: react_1.default.createElement(SettingContent, { columns: tableColumns, onChange: onSettingChange, onSortEnd: onSettingSortEnd, selectedColumnKeys: selectedColumnKeys }), trigger: \"click\", placement: \"bottomRight\", overlayClassName: selectorPrefix + \"-settingOverlay\" }, setting.Popover),\r\n        react_1.default.createElement(antd_1.Tooltip, __assign({ title: adhere_util_intl_1.default.v('设置'), placement: \"top\" }, setting), setting.render || react_1.default.createElement(icons_1.SettingOutlined, { type: \"setting\" }))));\r\n};\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","ToolbarSetting","ToolbarReload","ToolbarSelectAll","react_1","require","antd_1","icons_1","react_sortable_hoc_1","adhere_util_intl_1","selectorPrefix","_a","_e","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","Tooltip","title","v","placement","Checkbox","indeterminate","total","_c","_b","exceptKeys","selectedRowKeys","checked","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","Popover","columns","Fragment","key","content","onSortEnd","helperClass","distance","item","index","trigger","overlayClassName","SettingOutlined","type"],"mappings":"aACA,IAAIA,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,IAEKU,MAAMb,KAAMO,YAE5BO,gBAAmBd,MAAQA,KAAKc,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,IAExDd,OAAOiB,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,eAAiBF,QAAQG,cAAgBH,QAAQI,sBAAmB,EAQ5E,IAAIC,QAAUV,gBAAgBW,QAAQ,UAClCC,OAASD,QAAQ,QAIjBE,QAAUF,QAAQ,qBAClBG,qBAAuBH,QAAQ,sBAC/BI,mBAAqBf,gBAAgBW,QAAQ,iCAC7CK,eAAiB,sBACrBX,QAAQI,iBAAmB,SAAUQ,GACjC,IAAgBC,EACZC,EAAYF,EAAGE,UAAWC,EAAeH,EAAGG,aAAcC,EAASJ,EAAGI,OAAQC,EAAaL,EAAGK,WAAYC,EAAeN,EAAGM,aAChI,OAAKH,EAaGV,QAAQP,QAAQqB,cAAcZ,OAAOa,QAASxC,SAAS,CAAEyC,MAAOX,mBAAmBZ,QAAQwB,EAAE,MAAOC,UAAW,OAAST,GAAYT,QAAQP,QAAQqB,cAAcZ,OAAOiB,SAAU,CAAEC,cAAeX,EAAUY,OAASX,EAAaD,UACtI,QAA3Fa,EAAuC,QAAjCC,EAAKb,EAAaD,iBAA8B,IAAPc,OAAgB,EAASA,EAAGC,kBAA+B,IAAPF,OAAgB,EAASA,EAAGtC,OAAS0B,EAAae,gBAAgBzC,QACxK0B,EAAae,gBAAgBzC,UAAY4B,MAAAA,OAA+C,EAASA,EAAW5B,QAAS0C,QAASjB,EAAUY,OAASX,EAAaD,YAC9D,QAA3FD,EAAuC,QAAjCmB,EAAKjB,EAAaD,iBAA8B,IAAPkB,OAAgB,EAASA,EAAGH,kBAA+B,IAAPhB,GAAyBA,EAAGxB,QAClI0B,EAAae,gBAAgBzC,UAAY4B,MAAAA,OAA+C,EAASA,EAAW5B,QAAS4C,SAf/H,SAAkBC,GACVA,EAAEC,OAAOJ,QACThB,EAAakB,SAAShB,EAAWmB,IAAI,SAAUd,GAAK,OAAOA,EAAEN,KAAaC,GAG1EF,EAAakB,SAAS,GAAI,IAE1BnB,EAAUY,OAASR,GACnBA,EAAagB,EAAEC,OAAOJ,WAOuHjB,EAAUO,OAASX,mBAAmBZ,QAAQwB,EAAE,QAhB1L,MAkBftB,QAAQG,cAAgB,SAAUS,GAC9B,IAAIyB,EAASzB,EAAGyB,OAAQC,EAAW1B,EAAG0B,SACtC,OAAQjC,QAAQP,QAAQqB,cAAcZ,OAAOa,QAASxC,SAAS,CAAEyC,MAAOX,mBAAmBZ,QAAQwB,EAAE,MAAOC,UAAW,OAASc,GAASA,EAAOE,QAAUlC,QAAQP,QAAQqB,cAAcX,QAAQgC,eAAgB,CAAEC,QAAS,WAAc,OAAOH,SAEpPtC,QAAQE,eAAiB,SAAUU,GAC/B,IAAI8B,EAAU9B,EAAG8B,QAASC,EAAe/B,EAAG+B,aAAcC,EAAkBhC,EAAGgC,gBAAiBC,EAAmBjC,EAAGiC,iBAAkBC,EAAqBlC,EAAGkC,mBAC5JC,EAAetC,qBAAqBuC,gBAAgB,SAAUC,GAAS,OAAO5C,QAAQP,QAAQqB,cAAcZ,OAAOiB,SAAU5C,SAAS,GAAIqE,MAC1IC,EAAkBzC,qBAAqB0C,kBAAkB,SAAUF,GAAS,OAAO5C,QAAQP,QAAQqB,cAAcZ,OAAOiB,SAAS4B,MAAOxE,SAAS,GAAIqE,MAUzJ,OAAQ5C,QAAQP,QAAQqB,cAAcZ,OAAO8C,QAASzE,SAAS,CAAEyC,MAAOhB,QAAQP,QAAQqB,cATrE,SAAUP,GACzB,IAAIgB,EAAKhB,EAAG0C,QAASA,OAAiB,IAAP1B,EAAgB,GAAKA,EAAID,EAAKf,EAAGkC,mBAAoBA,OAA4B,IAAPnB,EAAgB,GAAKA,EAAIM,EAAWrB,EAAGqB,SAChJ,OAAQ5B,QAAQP,QAAQqB,cAAcd,QAAQP,QAAQyD,SAAU,KAC5DlD,QAAQP,QAAQqB,cAAcZ,OAAOiB,SAAU,CAAEC,cAAuH,KAAvGqB,MAAAA,OAA+D,EAASA,EAAmBzD,UAAkByD,MAAAA,OAA+D,EAASA,EAAmBzD,WAAaiE,MAAAA,OAAyC,EAASA,EAAQjE,QAAS0C,SAAUe,MAAAA,OAA+D,EAASA,EAAmBzD,WAAaiE,MAAAA,OAAyC,EAASA,EAAQjE,QAAS4C,SAAU,SAAUC,GAAK,OAAOD,EAASC,EAAEC,OAAOJ,QAAUuB,EAAQlB,IAAI,SAAUd,GAAK,OAAOA,EAAEkC,MAAU,MAAU9C,mBAAmBZ,QAAQwB,EAAE,UAMnjB,CAAEgC,QAASX,EAAcV,SAAUW,EAAiBE,mBAAoBA,IAAuBW,QAASpD,QAAQP,QAAQqB,cAJvN,SAAUP,GAC3B,IAAIgB,EAAKhB,EAAG0C,QAASA,OAAiB,IAAP1B,EAAgB,GAAKA,EAAID,EAAKf,EAAGkC,mBAAkEb,EAAWrB,EAAGqB,SAAUyB,EAAY9C,EAAG8C,UACzK,OAAQrD,QAAQP,QAAQqB,cAAc+B,EAAiB,CAAES,YAAa,eAAgB1D,WAD0B,IAAP0B,EAAgB,GAAKA,EACbM,SAAUA,EAAUyB,UAAWA,EAAWE,SAAU,GAAKN,EAAQlB,IAAI,SAAUyB,EAAMC,GAAS,OAAQzD,QAAQP,QAAQqB,cAAc4B,EAAc,CAAE9C,MAAO4D,EAAKL,IAAKM,MAAOA,EAAON,IAAKK,EAAKL,KAAOK,EAAKxC,WAEpD,CAAEiC,QAASX,EAAcV,SAAUW,EAAiBc,UAAWb,EAAkBC,mBAAoBA,IAAuBiB,QAAS,QAASxC,UAAW,cAAeyC,iBAAkBrD,eAAiB,mBAAqB+B,EAAQW,SAC9ehD,QAAQP,QAAQqB,cAAcZ,OAAOa,QAASxC,SAAS,CAAEyC,MAAOX,mBAAmBZ,QAAQwB,EAAE,MAAOC,UAAW,OAASmB,GAAUA,EAAQH,QAAUlC,QAAQP,QAAQqB,cAAcX,QAAQyD,gBAAiB,CAAEC,KAAM"}