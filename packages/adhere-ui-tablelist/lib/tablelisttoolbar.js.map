{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolbarSetting = exports.ToolbarReload = exports.ToolbarSelectAll = void 0;\n\nvar tslib_1 = require(\"tslib\");\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar antd_1 = require(\"antd\");\n\nvar icons_1 = require(\"@ant-design/icons\");\n\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar tablelist_1 = require(\"./tablelist\");\n\nvar ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n\n  var selectAll = _a.selectAll,\n      rowSelection = _a.rowSelection,\n      rowKey = _a.rowKey,\n      dataSource = _a.dataSource,\n      setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n\n  return react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('全选'),\n    placement: \"top\"\n  }, selectAll), react_1.default.createElement(antd_1.Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || adhere_util_intl_1.default.v('全选')));\n};\n\nexports.ToolbarSelectAll = ToolbarSelectAll;\n\nvar ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n      onSearch = _a.onSearch;\n  return react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || react_1.default.createElement(icons_1.ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\n\nexports.ToolbarReload = ToolbarReload;\n\nvar ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n      tableColumns = _a.tableColumns,\n      onSettingChange = _a.onSettingChange,\n      onSettingSortEnd = _a.onSettingSortEnd,\n      selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = (0, react_sortable_hoc_1.SortableElement)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox, tslib_1.__assign({}, props));\n  });\n  var SortableWrapper = (0, react_sortable_hoc_1.SortableContainer)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox.Group, tslib_1.__assign({}, props));\n  });\n\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        _onChange = _a.onChange;\n    return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(antd_1.Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, adhere_util_intl_1.default.v('列展示')));\n  };\n\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        onChange = _a.onChange,\n        onSortEnd = _a.onSortEnd;\n    return react_1.default.createElement(SortableWrapper, {\n      helperClass: \"\".concat(tablelist_1.selectorPrefix, \"-set-dragging\"),\n      value: selectedColumnKeys,\n      onChange: onChange,\n      onSortEnd: onSortEnd,\n      distance: 2\n    }, columns.map(function (item, index) {\n      return react_1.default.createElement(SortableItem, {\n        value: item.key,\n        index: index,\n        key: item.key\n      }, item.title);\n    }));\n  };\n\n  return react_1.default.createElement(antd_1.Popover, tslib_1.__assign({\n    title: react_1.default.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: react_1.default.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(tablelist_1.selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), react_1.default.createElement(antd_1.Tooltip, tslib_1.__assign({\n    title: adhere_util_intl_1.default.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || react_1.default.createElement(icons_1.SettingOutlined, {\n    type: \"setting\"\n  })));\n};\n\nexports.ToolbarSetting = ToolbarSetting;"],"names":["require","Object","defineProperty","exports","value","ToolbarSetting","ToolbarReload","ToolbarSelectAll","tslib_1","react_1","__importDefault","antd_1","icons_1","react_sortable_hoc_1","adhere_util_intl_1","tablelist_1","_a","_e","selectAll","rowSelection","rowKey","dataSource","setSelectAll","default","createElement","Tooltip","__assign","title","v","placement","Checkbox","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","Popover","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","concat","selectorPrefix","distance","item","index","trigger","overlayClassName","SettingOutlined","type"],"mappings":"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"}