{"version":3,"file":"TableListToolBar.js","sources":["TableListToolBar.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolbarSetting = exports.ToolbarReload = exports.ToolbarSelectAll = void 0;\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\nvar antd_1 = require(\"antd\");\nvar react_1 = __importDefault(require(\"react\"));\nvar react_sortable_hoc_1 = require(\"react-sortable-hoc\");\nvar icons_1 = require(\"@ant-design/icons\");\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\nvar TableList_1 = require(\"./TableList\");\nvar ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n  var selectAll = _a.selectAll,\n    rowSelection = _a.rowSelection,\n    rowKey = _a.rowKey,\n    dataSource = _a.dataSource,\n    setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n  return react_1.default.createElement(antd_1.Tooltip, __assign({\n    title: adhere_util_intl_1.default.v('全选'),\n    placement: \"top\"\n  }, selectAll), react_1.default.createElement(antd_1.Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || adhere_util_intl_1.default.v('全选')));\n};\nexports.ToolbarSelectAll = ToolbarSelectAll;\nvar ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n    onSearch = _a.onSearch;\n  return react_1.default.createElement(antd_1.Tooltip, __assign({\n    title: adhere_util_intl_1.default.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || react_1.default.createElement(icons_1.ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\nexports.ToolbarReload = ToolbarReload;\nvar ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n    tableColumns = _a.tableColumns,\n    onSettingChange = _a.onSettingChange,\n    onSettingSortEnd = _a.onSettingSortEnd,\n    selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = (0, react_sortable_hoc_1.SortableElement)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox, __assign({}, props));\n  });\n  var SortableWrapper = (0, react_sortable_hoc_1.SortableContainer)(function (props) {\n    return react_1.default.createElement(antd_1.Checkbox.Group, __assign({}, props));\n  });\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      _onChange = _a.onChange;\n    return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(antd_1.Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, adhere_util_intl_1.default.v('列展示')));\n  };\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      onChange = _a.onChange,\n      onSortEnd = _a.onSortEnd;\n    return (\n      // @ts-ignore\n      react_1.default.createElement(SortableWrapper, {\n        helperClass: \"\".concat(TableList_1.selectorPrefix, \"-set-dragging\"),\n        value: selectedColumnKeys,\n        onChange: onChange,\n        onSortEnd: onSortEnd,\n        distance: 2\n      }, columns.map(function (item, index) {\n        return (\n          // @ts-ignore\n          react_1.default.createElement(SortableItem, {\n            value: item.key,\n            index: index,\n            key: item.key\n          }, item.title)\n        );\n      }))\n    );\n  };\n  return react_1.default.createElement(antd_1.Popover, __assign({\n    title: react_1.default.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: react_1.default.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(TableList_1.selectorPrefix, \"-setting-overlay\")\n  }, setting.Popover), react_1.default.createElement(antd_1.Tooltip, __assign({\n    title: adhere_util_intl_1.default.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || react_1.default.createElement(icons_1.SettingOutlined, {\n    type: \"setting\"\n  })));\n};\nexports.ToolbarSetting = ToolbarSetting;"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__importDefault","mod","__esModule","default","antd_1","defineProperty","exports","value","ToolbarSetting","ToolbarReload","ToolbarSelectAll","require","react_1","react_sortable_hoc_1","icons_1","adhere_util_intl_1","TableList_1","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","Tooltip","title","v","placement","Checkbox","indeterminate","total","_c","_b","exceptKeys","selectedRowKeys","checked","_e","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","Popover","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","concat","selectorPrefix","distance","item","index","trigger","overlayClassName","SettingOutlined","type"],"mappings":"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"}