{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ToolbarSetting = exports.ToolbarSelectAll = exports.ToolbarReload = void 0;\n\nvar _popover = _interopRequireDefault(require(\"antd/lib/popover\"));\n\nvar _checkbox = _interopRequireDefault(require(\"antd/lib/checkbox\"));\n\nvar _tooltip = _interopRequireDefault(require(\"antd/lib/tooltip\"));\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nvar _tslib = require(\"tslib\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _icons = require(\"@ant-design/icons\");\n\nvar _reactSortableHoc = require(\"react-sortable-hoc\");\n\nvar _adhereUtilIntl = _interopRequireDefault(require(\"@baifendian/adhere-util-intl\"));\n\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n// import Tooltip from 'antd/lib/tooltip';\n// import Checkbox from 'antd/lib/checkbox';\n// import Popover from 'antd/lib/popover';\nvar selectorPrefix = 'adhere-ui-tablelist';\n\nvar ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n\n  var selectAll = _a.selectAll,\n      rowSelection = _a.rowSelection,\n      rowKey = _a.rowKey,\n      dataSource = _a.dataSource,\n      setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n\n  return /*#__PURE__*/_react.default.createElement(_tooltip.default, (0, _tslib.__assign)({\n    title: _adhereUtilIntl.default.v('全选'),\n    placement: \"top\"\n  }, selectAll), /*#__PURE__*/_react.default.createElement(_checkbox.default, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || _adhereUtilIntl.default.v('全选')));\n};\n\nexports.ToolbarSelectAll = ToolbarSelectAll;\n\nvar ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n      onSearch = _a.onSearch;\n  return /*#__PURE__*/_react.default.createElement(_tooltip.default, (0, _tslib.__assign)({\n    title: _adhereUtilIntl.default.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || /*#__PURE__*/_react.default.createElement(_icons.ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\n\nexports.ToolbarReload = ToolbarReload;\n\nvar ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n      tableColumns = _a.tableColumns,\n      onSettingChange = _a.onSettingChange,\n      onSettingSortEnd = _a.onSettingSortEnd,\n      selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = (0, _reactSortableHoc.SortableElement)(function (props) {\n    return /*#__PURE__*/_react.default.createElement(_checkbox.default, (0, _tslib.__assign)({}, props));\n  });\n  var SortableWrapper = (0, _reactSortableHoc.SortableContainer)(function (props) {\n    return /*#__PURE__*/_react.default.createElement(_checkbox.default.Group, (0, _tslib.__assign)({}, props));\n  });\n\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        _onChange = _a.onChange;\n    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_checkbox.default, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, _adhereUtilIntl.default.v('列展示')));\n  };\n\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        onChange = _a.onChange,\n        onSortEnd = _a.onSortEnd;\n    return /*#__PURE__*/_react.default.createElement(SortableWrapper, {\n      helperClass: \"set-dragging\",\n      value: selectedColumnKeys,\n      onChange: onChange,\n      onSortEnd: onSortEnd,\n      distance: 2\n    }, columns.map(function (item, index) {\n      return /*#__PURE__*/_react.default.createElement(SortableItem, {\n        value: item.key,\n        index: index,\n        key: item.key\n      }, item.title);\n    }));\n  };\n\n  return /*#__PURE__*/_react.default.createElement(_popover.default, (0, _tslib.__assign)({\n    title: /*#__PURE__*/_react.default.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: /*#__PURE__*/_react.default.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), /*#__PURE__*/_react.default.createElement(_tooltip.default, (0, _tslib.__assign)({\n    title: _adhereUtilIntl.default.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || /*#__PURE__*/_react.default.createElement(_icons.SettingOutlined, {\n    type: \"setting\"\n  })));\n};\n\nexports.ToolbarSetting = ToolbarSetting;"],"names":["require","_interopRequireDefault","Object","defineProperty","exports","value","ToolbarSetting","ToolbarSelectAll","ToolbarReload","_popover","_checkbox","_tooltip","_tslib","_react","_icons","_reactSortableHoc","_adhereUtilIntl","selectorPrefix","_a","_e","selectAll","rowSelection","rowKey","dataSource","setSelectAll","default","createElement","__assign","title","v","placement","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_d","onChange","e","target","map","reload","onSearch","render","ReloadOutlined","onClick","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","SortableElement","props","SortableWrapper","SortableContainer","Group","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","distance","item","index","trigger","overlayClassName","concat","Popover","SettingOutlined","type"],"mappings":"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"}