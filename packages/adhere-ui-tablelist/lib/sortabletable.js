"use strict";require("core-js/modules/es.object.define-property.js");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _table=_interopRequireDefault(require("antd/lib/table"));require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.splice.js");var _tslib=require("tslib"),_react=_interopRequireDefault(require("react")),_reactSortableHoc=require("react-sortable-hoc"),SortableItem=(0,_reactSortableHoc.SortableElement)(function(e){return _react.default.createElement("tr",(0,_tslib.__assign)({},e))}),SortableWrapper=(0,_reactSortableHoc.SortableContainer)(function(e){return _react.default.createElement("tbody",(0,_tslib.__assign)({},e))}),SortableTable=function(e){function r(){var o=null!==e&&e.apply(this,arguments)||this;return o.state={dataSource:o.props.dataSource||[],isSort:!1},o.DraggableBodyRow=function(e){e.className,e.style;var r=(0,_tslib.__rest)(e,["className","style"]),t=o.state.dataSource,e=o.props.rowKey,a=void 0===e?"id":e,t=t.findIndex(function(e){return e[a&&"function"==typeof a?a(e):a]===r["data-row-key"]});return _react.default.createElement(SortableItem,(0,_tslib.__assign)({index:t},o.props.sortable&&"boolean"!=typeof o.props.sortable&&o.props.sortable.itemProps,r))},o.DraggableContainer=function(e){return _react.default.createElement(SortableWrapper,(0,_tslib.__assign)({helperClass:"row-dragging",onSortEnd:o.onSortEnd,distance:2},o.props.sortable&&"boolean"!=typeof o.props.sortable&&o.props.sortable.containerProps,e))},o.onSortEnd=function(e){var t=e.oldIndex,r=e.newIndex,a=o.state.dataSource;t!==r&&(e=a[t],(a=a.filter(function(e,r){return r!==t})).splice(r,0,e),o.setState({isSort:!0,dataSource:a}))},o}return(0,_tslib.__extends)(r,e),r.getDerivedStateFromProps=function(e,r){return r.isSort||JSON.stringify(e.dataSource)===JSON.stringify(r.dataSource)?r.isSort?{isSort:!1}:null:{dataSource:e.dataSource}},r.prototype.render=function(){var e=this.props,e=(e.sortable,(0,_tslib.__rest)(e,["sortable"]));return _react.default.createElement(_table.default,(0,_tslib.__assign)({},e,{dataSource:this.state.dataSource,components:{body:{wrapper:this.DraggableContainer,row:this.DraggableBodyRow}}}))},r}(_react.default.Component),_default=SortableTable;exports.default=_default;
//# sourceMappingURL=sortabletable.js.map
