"use strict";require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.splice.js"),Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),antd_1=require("antd"),react_1=tslib_1.__importDefault(require("react")),react_sortable_hoc_1=require("react-sortable-hoc"),tablelist_1=require("./tablelist"),SortableItem=(0,react_sortable_hoc_1.SortableElement)(function(e){return react_1.default.createElement("tr",tslib_1.__assign({},e))}),SortableWrapper=(0,react_sortable_hoc_1.SortableContainer)(function(e){return react_1.default.createElement("tbody",tslib_1.__assign({},e))}),SortableTable=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.state={dataSource:o.props.dataSource||[],isSort:!1},o.DraggableBodyRow=function(e){e.className,e.style;var t=tslib_1.__rest(e,["className","style"]),e=o.state.dataSource,r=o.props.rowKey,a=void 0===r?"id":r,r=e.findIndex(function(e){return e[a&&"function"==typeof a?a(e):a]===t["data-row-key"]});return react_1.default.createElement(SortableItem,tslib_1.__assign({index:r},o.props.sortable&&"boolean"!=typeof o.props.sortable&&o.props.sortable.itemProps,t))},o.DraggableContainer=function(e){return react_1.default.createElement(SortableWrapper,tslib_1.__assign({helperClass:"".concat(tablelist_1.selectorPrefix,"-row-dragging"),onSortEnd:o.onSortEnd,distance:2},o.props.sortable&&"boolean"!=typeof o.props.sortable&&o.props.sortable.containerProps,e))},o.onSortEnd=function(e){var t,r=e.oldIndex,e=e.newIndex,a=o.state.dataSource;r!==e&&(t=a[r],(a=a.filter(function(e,t){return t!==r})).splice(e,0,t),o.setState({isSort:!0,dataSource:a}))},o}return tslib_1.__extends(t,e),t.getDerivedStateFromProps=function(e,t){return t.isSort||JSON.stringify(e.dataSource)===JSON.stringify(t.dataSource)?t.isSort?{isSort:!1}:null:{dataSource:e.dataSource}},t.prototype.render=function(){var e=this.props,e=(e.sortable,tslib_1.__rest(e,["sortable"]));return react_1.default.createElement(antd_1.Table,tslib_1.__assign({},e,{dataSource:this.state.dataSource,components:{body:{wrapper:this.DraggableContainer,row:this.DraggableBodyRow}}}))},t}(react_1.default.Component);exports.default=SortableTable;
//# sourceMappingURL=sortabletable.js.map
