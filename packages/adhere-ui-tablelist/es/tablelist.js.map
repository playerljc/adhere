{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nimport _Button from \"antd/es/button\";\nimport _Form from \"antd/es/form\";\nimport _Table from \"antd/es/table\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _List from \"antd/es/list\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport { cloneDeep } from 'lodash';\nimport React from 'react';\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\nimport intl from '@baifendian/adhere-util-intl';\nimport SortableTable from './sortabletable';\nimport { ToolbarReload, ToolbarSelectAll, ToolbarSetting } from './tablelisttoolbar';\nimport Util from './util';\nexport var selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\nvar TableList = /** @class */function (_super) {\n  __extends(TableList, _super);\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n      var _a = _this.getModeProps(),\n        dataSource = _a.dataSource,\n        rowKey = _a.rowKey,\n        pagination = _a.pagination;\n      var _b = _this.props.toolbar,\n        className = _b.className,\n        title = _b.title,\n        total = _b.total,\n        selectAll = _b.selectAll,\n        search = _b.search,\n        reload = _b.reload,\n        setting = _b.setting,\n        toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n        selectedColumnKeys = _c.selectedColumnKeys,\n        tableColumns = _c.tableColumns;\n      var rowSelection = _this.getRowSelection();\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(className, \"\".concat(selectorPrefix, \"-toolbar\"))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left\")\n      }, title ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? intl.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null,\n      // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? /*#__PURE__*/React.createElement(ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? /*#__PURE__*/React.createElement(FormItemCreator, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? /*#__PURE__*/React.createElement(ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? /*#__PURE__*/React.createElement(ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n      var _a = _this.getModeProps(),\n        rowKey = _a.rowKey,\n        pagination = _a.pagination,\n        loading = _a.loading,\n        _renderItem = _a.renderItem,\n        others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n      var rowSelection = _this.getRowSelection();\n      return /*#__PURE__*/React.createElement(_List, __assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return /*#__PURE__*/React.createElement(_List.Item, null, /*#__PURE__*/React.createElement(React.Fragment, null, rowSelection ? /*#__PURE__*/React.createElement(_Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n        selectedColumnKeys = _a.selectedColumnKeys,\n        tableColumns = _a.tableColumns;\n      var _b = _this.getModeProps(),\n        sortable = _b.sortable,\n        pagination = _b.pagination,\n        loading = _b.loading,\n        dataSource = _b.dataSource,\n        columns = _b.columns,\n        rowKey = _b.rowKey,\n        rowSelection = _b.rowSelection,\n        others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n      var tableProps = __assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n      return sortable ? /*#__PURE__*/React.createElement(SortableTable, __assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : /*#__PURE__*/React.createElement(_Table, __assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n    var util = new Util(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = /*#__PURE__*/React.createRef();\n    var modeProps = _this.getModeProps();\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var _a;\n    var dataSource = ((_a = nextProps[nextProps.mode || 'table']) !== null && _a !== void 0 ? _a : {}).dataSource;\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n    return null;\n  };\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n    var modeProps = this.getModeProps();\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var _a;\n    var nextModeProps = (_a = nextProps[nextProps.mode || 'table']) !== null && _a !== void 0 ? _a : {};\n    var modeProps = this.getModeProps();\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n        _b = nextModeProps.rowKey,\n        rowKey_1 = _b === void 0 ? defaultRowKey : _b;\n      var allKeys = (dataSource || []).map(\n      // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      });\n      // 得到没有被全选排除的keys\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        // @ts-ignore\n        nextProps.table.rowSelection.onChange(selectedRowKeys, cloneDeep(dataSource));\n        return false;\n      }\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n  TableList.prototype.renderSearch = function () {\n    var _a;\n    var _this = this;\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n      beforeContent = search.beforeContent,\n      afterContent = search.afterContent,\n      optionRender = search.optionRender,\n      columns = search.columns,\n      searchText = search.searchText,\n      resetText = search.resetText,\n      _b = search.size,\n      size = _b === void 0 ? 'middle' : _b;\n    return search ? /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(className, \"\".concat(selectorPrefix, \"-search\"))\n    }, beforeContent, /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: classNames(\"\".concat(selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, /*#__PURE__*/React.createElement(FormItemCreator, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, /*#__PURE__*/React.createElement(_Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || intl.v('重置')), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || intl.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n  TableList.prototype.renderLoading = function () {\n    return /*#__PURE__*/React.createElement(_Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n  TableList.prototype.render = function () {\n    var _this = this;\n    var className = this.props.className;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n  return TableList;\n}(React.PureComponent);\nTableList.defaultProps = {\n  mode: 'table'\n};\nexport default TableList;"],"names":["_Skeleton","_Button","_Form","_Table","_Checkbox","_List","__extends","this","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","cloneDeep","React","FormItemCreator","intl","SortableTable","ToolbarReload","ToolbarSelectAll","ToolbarSetting","Util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","createElement","concat","vHtml","setSelectAll","v","setState","columns","getFormColumns","onSearch","onSettingChange","onSettingSortEnd","renderList","loading","_renderItem","others","list","renderItem","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"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"}