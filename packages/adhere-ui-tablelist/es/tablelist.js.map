{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nimport _Button from \"antd/es/button\";\nimport _Form from \"antd/es/form\";\nimport _Table from \"antd/es/table\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _List from \"antd/es/list\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign, __extends, __rest } from \"tslib\";\nimport React from 'react';\nimport classNames from 'classnames';\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\nimport intl from '@baifendian/adhere-util-intl';\nimport { cloneDeep } from 'lodash';\nimport SortableTable from './sortabletable';\nimport { ToolbarSelectAll, ToolbarReload, ToolbarSetting } from './tablelisttoolbar';\nimport Util from './util';\nvar selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\n\nvar TableList =\n/** @class */\nfunction (_super) {\n  __extends(TableList, _super);\n\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n\n\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n\n      var _a = _this.getModeProps(),\n          dataSource = _a.dataSource,\n          rowKey = _a.rowKey,\n          pagination = _a.pagination;\n\n      var _b = _this.props.toolbar,\n          className = _b.className,\n          title = _b.title,\n          total = _b.total,\n          selectAll = _b.selectAll,\n          search = _b.search,\n          reload = _b.reload,\n          setting = _b.setting,\n          toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n          selectedColumnKeys = _c.selectedColumnKeys,\n          tableColumns = _c.tableColumns;\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(className, \"\".concat(selectorPrefix, \"-toolbar\"))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left\")\n      }, title ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? intl.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null, // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? /*#__PURE__*/React.createElement(ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? /*#__PURE__*/React.createElement(FormItemCreator, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? /*#__PURE__*/React.createElement(ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? /*#__PURE__*/React.createElement(ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n\n\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n\n      var _a = _this.getModeProps(),\n          rowKey = _a.rowKey,\n          pagination = _a.pagination,\n          loading = _a.loading,\n          _renderItem = _a.renderItem,\n          others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/React.createElement(_List, __assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return /*#__PURE__*/React.createElement(_List.Item, null, /*#__PURE__*/React.createElement(React.Fragment, null, rowSelection ? /*#__PURE__*/React.createElement(_Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n\n\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n          selectedColumnKeys = _a.selectedColumnKeys,\n          tableColumns = _a.tableColumns;\n\n      var _b = _this.getModeProps(),\n          sortable = _b.sortable,\n          pagination = _b.pagination,\n          loading = _b.loading,\n          dataSource = _b.dataSource,\n          columns = _b.columns,\n          rowKey = _b.rowKey,\n          rowSelection = _b.rowSelection,\n          others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n\n      var tableProps = __assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n\n      return sortable ? /*#__PURE__*/React.createElement(SortableTable, __assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : /*#__PURE__*/React.createElement(_Table, __assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n\n    var util = new Util(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = /*#__PURE__*/React.createRef();\n\n    var modeProps = _this.getModeProps();\n\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\n\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n\n    return null;\n  };\n\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var modeProps = this.getModeProps();\n\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\n    var modeProps = this.getModeProps();\n\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n          _a = nextModeProps.rowKey,\n          rowKey_1 = _a === void 0 ? defaultRowKey : _a;\n      var allKeys = (dataSource || []).map( // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      }); // 得到没有被全选排除的keys\n\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        nextProps.table.rowSelection.onChange(selectedRowKeys, cloneDeep(dataSource));\n        return false;\n      }\n\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n\n\n  TableList.prototype.renderSearch = function () {\n    var _a;\n\n    var _this = this;\n\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n        beforeContent = search.beforeContent,\n        afterContent = search.afterContent,\n        optionRender = search.optionRender,\n        columns = search.columns,\n        searchText = search.searchText,\n        resetText = search.resetText,\n        _b = search.size,\n        size = _b === void 0 ? 'middle' : _b;\n    return search ? /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(className, \"\".concat(selectorPrefix, \"-search\"))\n    }, beforeContent, /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: classNames(\"\".concat(selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, /*#__PURE__*/React.createElement(FormItemCreator, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, /*#__PURE__*/React.createElement(_Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || intl.v('重置')), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || intl.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n\n\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n\n\n  TableList.prototype.renderLoading = function () {\n    return /*#__PURE__*/React.createElement(_Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n\n  TableList.prototype.render = function () {\n    var _this = this; // @ts-ignore\n\n\n    var className = this.props.className; // @ts-ignore\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n\n  return TableList;\n}(React.Component);\n\nTableList.defaultProps = {\n  mode: 'table'\n};\nexport default TableList;"],"names":["_Skeleton","_Button","_Form","_Table","_Checkbox","_List","__assign","__extends","__rest","React","classNames","FormItemCreator","intl","cloneDeep","SortableTable","ToolbarSelectAll","ToolbarReload","ToolbarSetting","Util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","call","this","renderToolbar","toolbar","_a","getModeProps","dataSource","rowKey","pagination","_b","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","_c","state","selectedColumnKeys","tableColumns","rowSelection","getRowSelection","createElement","concat","vHtml","n","setSelectAll","v","setState","columns","getFormColumns","onSearch","onSettingChange","onSettingSortEnd","renderList","list","loading","_renderItem","renderItem","others","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","table","sortable","tableProps","onTableChange","ref","c","SortableTableRef","util","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","modeProps","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","nextModeProps","JSON","stringify","rowKey_1","map","exceptKeys","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","hasOwnProperty","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","Component","defaultProps"],"mappings":"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"}