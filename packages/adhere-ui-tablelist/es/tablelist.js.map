{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["import _Skeleton from \"antd/es/skeleton\";\nimport _Button from \"antd/es/button\";\nimport _Form from \"antd/es/form\";\nimport _Table from \"antd/es/table\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _List from \"antd/es/list\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign, __extends, __rest } from \"tslib\";\nimport classNames from 'classnames';\nimport { cloneDeep } from 'lodash';\nimport React from 'react';\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\nimport intl from '@baifendian/adhere-util-intl';\nimport SortableTable from './sortabletable';\nimport { ToolbarReload, ToolbarSelectAll, ToolbarSetting } from './tablelisttoolbar';\nimport Util from './util';\nexport var selectorPrefix = 'adhere-ui-tablelist';\nvar defaultRowKey = 'id';\n/**\n * Template\n * @class Template\n * @classdesc Template\n */\n\nvar TableList =\n/** @class */\nfunction (_super) {\n  __extends(TableList, _super);\n\n  function TableList(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * toolbar: 标题，全选----刷新，搜索，设置\n     */\n\n\n    _this.renderToolbar = function () {\n      if (!_this.props.toolbar) return;\n\n      var _a = _this.getModeProps(),\n          dataSource = _a.dataSource,\n          rowKey = _a.rowKey,\n          pagination = _a.pagination;\n\n      var _b = _this.props.toolbar,\n          className = _b.className,\n          title = _b.title,\n          total = _b.total,\n          selectAll = _b.selectAll,\n          search = _b.search,\n          reload = _b.reload,\n          setting = _b.setting,\n          toolbarOptionRender = _b.toolbarOptionRender;\n      var _c = _this.state,\n          selectedColumnKeys = _c.selectedColumnKeys,\n          tableColumns = _c.tableColumns;\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(className, \"\".concat(selectorPrefix, \"-toolbar\"))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left\")\n      }, title ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-title\")\n      }, title) : null, total ? /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-left-total\")\n      }, total === true ? intl.vHtml('共 <em>{n}</em> 条', {\n        n: pagination && pagination.total\n      }) : total) : null, // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\n      selectAll ? /*#__PURE__*/React.createElement(ToolbarSelectAll, {\n        selectAll: selectAll,\n        dataSource: dataSource,\n        rowSelection: rowSelection,\n        rowKey: rowKey,\n        setSelectAll: function setSelectAll(v) {\n          return _this.setState({\n            selectAll: v\n          });\n        }\n      }) : null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-toolbar-right\")\n      }, toolbarOptionRender, search ? /*#__PURE__*/React.createElement(FormItemCreator, {\n        columns: _this.getFormColumns(search || [], 'default', true)\n      }) : null, reload ? /*#__PURE__*/React.createElement(ToolbarReload, {\n        reload: reload,\n        onSearch: _this.onSearch\n      }) : null, setting ? /*#__PURE__*/React.createElement(ToolbarSetting, {\n        setting: setting,\n        tableColumns: tableColumns,\n        onSettingChange: _this.onSettingChange,\n        onSettingSortEnd: _this.onSettingSortEnd,\n        selectedColumnKeys: selectedColumnKeys\n      }) : null));\n    };\n    /**\n     * 渲染列表\n     */\n\n\n    _this.renderList = function () {\n      if (!_this.props.list) return;\n\n      var _a = _this.getModeProps(),\n          rowKey = _a.rowKey,\n          pagination = _a.pagination,\n          loading = _a.loading,\n          _renderItem = _a.renderItem,\n          others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\n\n      var rowSelection = _this.getRowSelection();\n\n      return /*#__PURE__*/React.createElement(_List, __assign({\n        rowKey: rowKey,\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        renderItem: function renderItem(item, index) {\n          var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\n          return /*#__PURE__*/React.createElement(_List.Item, null, /*#__PURE__*/React.createElement(React.Fragment, null, rowSelection ? /*#__PURE__*/React.createElement(_Checkbox, {\n            checked: rowSelection.selectedRowKeys.includes(item[key]),\n            onChange: function onChange(e) {\n              if (e.target.checked) {\n                rowSelection.selectedRowKeys.push(item[key]);\n                rowSelection.selectedRows.push(item);\n                rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\n              } else {\n                rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) {\n                  return v !== item[key];\n                }), rowSelection.selectedRows.filter(function (v) {\n                  return v[key] !== item[key];\n                }));\n              }\n            }\n          }) : null, _renderItem && _renderItem(item, index)));\n        }\n      }, others));\n    };\n    /**\n     * 渲染表格\n     */\n\n\n    _this.renderTable = function () {\n      if (!_this.props.table) return;\n      var _a = _this.state,\n          selectedColumnKeys = _a.selectedColumnKeys,\n          tableColumns = _a.tableColumns;\n\n      var _b = _this.getModeProps(),\n          sortable = _b.sortable,\n          pagination = _b.pagination,\n          loading = _b.loading,\n          dataSource = _b.dataSource,\n          columns = _b.columns,\n          rowKey = _b.rowKey,\n          rowSelection = _b.rowSelection,\n          others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\n\n      var tableProps = __assign({\n        pagination: _this.getPagination(pagination),\n        loading: _this.getLoading(loading),\n        rowSelection: _this.getRowSelection(),\n        columns: tableColumns.filter(function (v) {\n          return selectedColumnKeys.includes(v.key);\n        }),\n        dataSource: dataSource,\n        onChange: _this.onTableChange\n      }, others);\n\n      return sortable ? /*#__PURE__*/React.createElement(SortableTable, __assign({\n        ref: function ref(c) {\n          _this.SortableTableRef = c;\n        },\n        rowKey: rowKey\n      }, tableProps, {\n        sortable: sortable\n      })) : /*#__PURE__*/React.createElement(_Table, __assign({\n        rowKey: rowKey\n      }, tableProps));\n    };\n\n    var util = new Util(_this);\n    _this.getModeProps = util.getModeProps;\n    _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\n    _this.getFormColumns = util.getFormColumns;\n    _this.getSortDataSource = util.getSortDataSource;\n    _this.getParams = util.getParams;\n    _this.getRowSelection = util.getRowSelection;\n    _this.getPagination = util.getPagination;\n    _this.getLoading = util.getLoading;\n    _this.getTableColumns = util.getTableColumns;\n    _this.fetchList = util.fetchList;\n    _this.onSearch = util.onSearch;\n    _this.onResetSearch = util.onResetSearch;\n    _this.onSettingChange = util.onSettingChange;\n    _this.onSettingSortEnd = util.onSettingSortEnd;\n    _this.onTableChange = util.onTableChange;\n    _this.searchFormRef = /*#__PURE__*/React.createRef();\n\n    var modeProps = _this.getModeProps();\n\n    _this.state = {\n      firstLoading: true,\n      loading: false,\n      selectedColumnKeys: _this.props.table ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns) : [],\n      tableColumns: [],\n      params: {\n        page: 1,\n        limit: modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize || 10\n      }\n    };\n    return _this;\n  }\n\n  TableList.getDerivedStateFromProps = function (nextProps, prevState) {\n    var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\n\n    if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    } else if (nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) && dataSource) {\n      return {\n        firstLoading: false\n      };\n    }\n\n    return null;\n  };\n\n  TableList.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var modeProps = this.getModeProps();\n\n    if (this.props.request) {\n      this.setState({\n        firstRequest: true\n      }, function () {\n        return _this.fetchList();\n      });\n    } else if (modeProps.dataSource) {\n      this.setState({\n        firstLoading: false\n      });\n    }\n\n    this.setState({\n      tableColumns: this.getTableColumns()\n    });\n  };\n\n  TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\n    var modeProps = this.getModeProps();\n\n    if (nextState.selectAll && JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\n      var dataSource = nextModeProps.dataSource,\n          _a = nextModeProps.rowKey,\n          rowKey_1 = _a === void 0 ? defaultRowKey : _a;\n      var allKeys = (dataSource || []).map( // @ts-ignore\n      function (v) {\n        return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1];\n      }); // 得到没有被全选排除的keys\n\n      var selectedRowKeys = allKeys.filter(function (v) {\n        var _a, _b;\n\n        return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v));\n      });\n\n      if (nextProps.mode === 'table' && nextProps.table && nextProps.table.rowSelection && nextProps.table.rowSelection.onChange) {\n        // @ts-ignore\n        nextProps.table.rowSelection.onChange(selectedRowKeys, cloneDeep(dataSource));\n        return false;\n      }\n\n      this.setState({\n        selectedRowKeys: selectedRowKeys,\n        selectedRows: dataSource\n      });\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * 渲染搜索\n   */\n\n\n  TableList.prototype.renderSearch = function () {\n    var _a;\n\n    var _this = this;\n\n    var search = this.props.search;\n    if (!search) return;\n    var className = search.className,\n        beforeContent = search.beforeContent,\n        afterContent = search.afterContent,\n        optionRender = search.optionRender,\n        columns = search.columns,\n        searchText = search.searchText,\n        resetText = search.resetText,\n        _b = search.size,\n        size = _b === void 0 ? 'middle' : _b;\n    return search ? /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(className, \"\".concat(selectorPrefix, \"-search\"))\n    }, beforeContent, /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      ref: this.searchFormRef,\n      className: classNames(\"\".concat(selectorPrefix, \"-search-form\"), (_a = {}, _a[\"\".concat(selectorPrefix, \"-search-form-havebefore\")] = beforeContent, _a[\"\".concat(selectorPrefix, \"-search-form-haveafter\")] = afterContent, _a))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-search\"\n    }, /*#__PURE__*/React.createElement(FormItemCreator, {\n      columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender)\n    })), search.hasOwnProperty('optionRender') ? optionRender : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ant-form-btngroup\"\n    }, /*#__PURE__*/React.createElement(_Button, {\n      onClick: function onClick() {\n        return _this.onResetSearch();\n      },\n      size: size\n    }, resetText || intl.v('重置')), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        return _this.onSearch();\n      },\n      size: size\n    }, searchText || intl.v('搜索')))), afterContent) : null;\n  };\n  /**\n   * 渲染内容\n   */\n\n\n  TableList.prototype.renderContent = function () {\n    var mode = this.props.mode;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-content\")\n    }, this.renderToolbar(), this.state.firstLoading ? this.renderLoading() : mode === 'list' ? this.renderList() : this.renderTable());\n  };\n  /**\n   * 加载效果\n   */\n\n\n  TableList.prototype.renderLoading = function () {\n    return /*#__PURE__*/React.createElement(_Skeleton, {\n      paragraph: {\n        rows: 10\n      },\n      title: false\n    });\n  };\n\n  TableList.prototype.render = function () {\n    var _this = this;\n\n    var className = this.props.className;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(selectorPrefix, className),\n      ref: function ref(c) {\n        _this.TableListRef = c;\n      }\n    }, this.renderSearch(), this.renderContent());\n  };\n\n  return TableList;\n}(React.PureComponent);\n\nTableList.defaultProps = {\n  mode: 'table'\n};\nexport default TableList;"],"names":["_Skeleton","_Button","_Form","_Table","_Checkbox","_List","__assign","__extends","__rest","classNames","cloneDeep","React","FormItemCreator","intl","SortableTable","ToolbarReload","ToolbarSelectAll","ToolbarSetting","Util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","call","this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","createElement","concat","vHtml","n","setSelectAll","v","setState","columns","getFormColumns","onSearch","onSettingChange","onSettingSortEnd","renderList","loading","_renderItem","others","list","renderItem","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","hasOwnProperty","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"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"}