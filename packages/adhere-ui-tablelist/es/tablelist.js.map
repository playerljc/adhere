{"version":3,"file":"tablelist.js","sources":["tablelist.js"],"sourcesContent":["import { __assign, __extends, __rest } from \"tslib\";\r\nimport { Button, Checkbox, Form, List, Skeleton, Table } from 'antd';\r\nimport classNames from 'classnames';\r\nimport { cloneDeep } from 'lodash';\r\nimport React from 'react';\r\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\r\nimport intl from '@baifendian/adhere-util-intl';\r\nimport SortableTable from './sortabletable';\r\nimport { ToolbarReload, ToolbarSelectAll, ToolbarSetting } from './tablelisttoolbar';\r\nimport Util from './util';\r\nexport var selectorPrefix = 'adhere-ui-tablelist';\r\nvar defaultRowKey = 'id';\r\n/**\r\n * Template\r\n * @class Template\r\n * @classdesc Template\r\n */\r\nvar TableList = /** @class */ (function (_super) {\r\n    __extends(TableList, _super);\r\n    function TableList(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * toolbar: 标题，全选----刷新，搜索，设置\r\n         */\r\n        _this.renderToolbar = function () {\r\n            if (!_this.props.toolbar)\r\n                return;\r\n            var _a = _this.getModeProps(), dataSource = _a.dataSource, rowKey = _a.rowKey, pagination = _a.pagination;\r\n            var _b = _this.props.toolbar, className = _b.className, title = _b.title, total = _b.total, selectAll = _b.selectAll, search = _b.search, reload = _b.reload, setting = _b.setting, toolbarOptionRender = _b.toolbarOptionRender;\r\n            var _c = _this.state, selectedColumnKeys = _c.selectedColumnKeys, tableColumns = _c.tableColumns;\r\n            var rowSelection = _this.getRowSelection();\r\n            return (React.createElement(\"div\", { className: classNames(className, \"\".concat(selectorPrefix, \"-toolbar\")) },\r\n                React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-toolbar-left\") },\r\n                    title ? React.createElement(\"span\", { className: \"\".concat(selectorPrefix, \"-toolbar-left-title\") }, title) : null,\r\n                    total ? (React.createElement(\"span\", { className: \"\".concat(selectorPrefix, \"-toolbar-left-total\") }, total === true\r\n                        ? intl.vHtml('共 <em>{n}</em> 条', { n: pagination && pagination.total })\r\n                        : total)) : null,\r\n                    // selectAll { total: 是否是选中全部数据，默认是当前页数据 }\r\n                    selectAll ? (React.createElement(ToolbarSelectAll, { selectAll: selectAll, dataSource: dataSource, rowSelection: rowSelection, rowKey: rowKey, setSelectAll: function (v) { return _this.setState({ selectAll: v }); } })) : null),\r\n                React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-toolbar-right\") },\r\n                    toolbarOptionRender,\r\n                    search ? (React.createElement(FormItemCreator, { columns: _this.getFormColumns(search || [], 'default', true) })) : null,\r\n                    reload ? React.createElement(ToolbarReload, { reload: reload, onSearch: _this.onSearch }) : null,\r\n                    setting ? (React.createElement(ToolbarSetting, { setting: setting, tableColumns: tableColumns, onSettingChange: _this.onSettingChange, onSettingSortEnd: _this.onSettingSortEnd, selectedColumnKeys: selectedColumnKeys })) : null)));\r\n        };\r\n        /**\r\n         * 渲染列表\r\n         */\r\n        _this.renderList = function () {\r\n            if (!_this.props.list)\r\n                return;\r\n            var _a = _this.getModeProps(), rowKey = _a.rowKey, pagination = _a.pagination, loading = _a.loading, renderItem = _a.renderItem, others = __rest(_a, [\"rowKey\", \"pagination\", \"loading\", \"renderItem\"]);\r\n            var rowSelection = _this.getRowSelection();\r\n            return (React.createElement(List, __assign({ rowKey: rowKey, pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), renderItem: function (item, index) {\r\n                    var key = typeof rowKey === 'function' ? rowKey(item) : rowKey;\r\n                    return (React.createElement(List.Item, null,\r\n                        React.createElement(React.Fragment, null,\r\n                            rowSelection ? (React.createElement(Checkbox, { checked: rowSelection.selectedRowKeys.includes(item[key]), onChange: function (e) {\r\n                                    if (e.target.checked) {\r\n                                        rowSelection.selectedRowKeys.push(item[key]);\r\n                                        rowSelection.selectedRows.push(item);\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys, rowSelection.selectedRows);\r\n                                    }\r\n                                    else {\r\n                                        rowSelection.onChange(rowSelection.selectedRowKeys.filter(function (v) { return v !== item[key]; }), rowSelection.selectedRows.filter(function (v) { return v[key] !== item[key]; }));\r\n                                    }\r\n                                } })) : null,\r\n                            renderItem && renderItem(item, index))));\r\n                } }, others)));\r\n        };\r\n        /**\r\n         * 渲染表格\r\n         */\r\n        _this.renderTable = function () {\r\n            if (!_this.props.table)\r\n                return;\r\n            var _a = _this.state, selectedColumnKeys = _a.selectedColumnKeys, tableColumns = _a.tableColumns;\r\n            var _b = _this.getModeProps(), sortable = _b.sortable, pagination = _b.pagination, loading = _b.loading, dataSource = _b.dataSource, columns = _b.columns, rowKey = _b.rowKey, rowSelection = _b.rowSelection, others = __rest(_b, [\"sortable\", \"pagination\", \"loading\", \"dataSource\", \"columns\", \"rowKey\", \"rowSelection\"]);\r\n            var tableProps = __assign({ pagination: _this.getPagination(pagination), loading: _this.getLoading(loading), rowSelection: _this.getRowSelection(), columns: tableColumns.filter(function (v) { return selectedColumnKeys.includes(v.key); }), dataSource: dataSource, onChange: _this.onTableChange }, others);\r\n            return sortable ? (React.createElement(SortableTable, __assign({ ref: function (c) {\r\n                    _this.SortableTableRef = c;\r\n                }, rowKey: rowKey }, tableProps, { sortable: sortable }))) : (React.createElement(Table, __assign({ rowKey: rowKey }, tableProps)));\r\n        };\r\n        var util = new Util(_this);\r\n        _this.getModeProps = util.getModeProps;\r\n        _this.getDefaultSelectedColumnKeys = util.getDefaultSelectedColumnKeys;\r\n        _this.getFormColumns = util.getFormColumns;\r\n        _this.getSortDataSource = util.getSortDataSource;\r\n        _this.getParams = util.getParams;\r\n        _this.getRowSelection = util.getRowSelection;\r\n        _this.getPagination = util.getPagination;\r\n        _this.getLoading = util.getLoading;\r\n        _this.getTableColumns = util.getTableColumns;\r\n        _this.fetchList = util.fetchList;\r\n        _this.onSearch = util.onSearch;\r\n        _this.onResetSearch = util.onResetSearch;\r\n        _this.onSettingChange = util.onSettingChange;\r\n        _this.onSettingSortEnd = util.onSettingSortEnd;\r\n        _this.onTableChange = util.onTableChange;\r\n        _this.searchFormRef = React.createRef();\r\n        var modeProps = _this.getModeProps();\r\n        _this.state = {\r\n            firstLoading: true,\r\n            loading: false,\r\n            selectedColumnKeys: _this.props.table\r\n                ? _this.getDefaultSelectedColumnKeys(_this.props.table.columns)\r\n                : [],\r\n            tableColumns: [],\r\n            params: {\r\n                page: 1,\r\n                limit: (modeProps && modeProps.pagination && modeProps.pagination.defaultPageSize) || 10,\r\n            },\r\n        };\r\n        return _this;\r\n    }\r\n    TableList.getDerivedStateFromProps = function (nextProps, prevState) {\r\n        var dataSource = (nextProps[nextProps.mode || 'table'] || {}).dataSource;\r\n        if (!nextProps.request && (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) && dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        else if (nextProps.request &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstLoading) &&\r\n            (prevState === null || prevState === void 0 ? void 0 : prevState.firstRequest) &&\r\n            dataSource) {\r\n            return {\r\n                firstLoading: false,\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    TableList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var modeProps = this.getModeProps();\r\n        if (this.props.request) {\r\n            this.setState({ firstRequest: true }, function () { return _this.fetchList(); });\r\n        }\r\n        else if (modeProps.dataSource) {\r\n            this.setState({ firstLoading: false });\r\n        }\r\n        this.setState({ tableColumns: this.getTableColumns() });\r\n    };\r\n    TableList.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        var nextModeProps = nextProps[nextProps.mode || 'table'] || {};\r\n        var modeProps = this.getModeProps();\r\n        if (nextState.selectAll &&\r\n            JSON.stringify(nextModeProps.dataSource) !== JSON.stringify(modeProps.dataSource)) {\r\n            var dataSource = nextModeProps.dataSource, _a = nextModeProps.rowKey, rowKey_1 = _a === void 0 ? defaultRowKey : _a;\r\n            var allKeys = (dataSource || []).map(\r\n            // @ts-ignore\r\n            function (v) { return v[typeof rowKey_1 === 'function' ? rowKey_1(v) : rowKey_1]; });\r\n            // 得到没有被全选排除的keys\r\n            var selectedRowKeys = allKeys.filter(function (v) { var _a, _b; return !((_b = (_a = nextState.selectAll) === null || _a === void 0 ? void 0 : _a.exceptKeys) === null || _b === void 0 ? void 0 : _b.includes(v)); });\r\n            if (nextProps.mode === 'table' &&\r\n                nextProps.table &&\r\n                nextProps.table.rowSelection &&\r\n                nextProps.table.rowSelection.onChange) {\r\n                // @ts-ignore\r\n                nextProps.table.rowSelection.onChange(selectedRowKeys, cloneDeep(dataSource));\r\n                return false;\r\n            }\r\n            this.setState({\r\n                selectedRowKeys: selectedRowKeys,\r\n                selectedRows: dataSource,\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * 渲染搜索\r\n     */\r\n    TableList.prototype.renderSearch = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var search = this.props.search;\r\n        if (!search)\r\n            return;\r\n        var className = search.className, beforeContent = search.beforeContent, afterContent = search.afterContent, optionRender = search.optionRender, columns = search.columns, searchText = search.searchText, resetText = search.resetText, _b = search.size, size = _b === void 0 ? 'middle' : _b;\r\n        return search ? (React.createElement(\"div\", { className: classNames(className, \"\".concat(selectorPrefix, \"-search\")) },\r\n            beforeContent,\r\n            React.createElement(Form, { layout: \"inline\", ref: this.searchFormRef, className: classNames(\"\".concat(selectorPrefix, \"-search-form\"), (_a = {},\r\n                    _a[\"\".concat(selectorPrefix, \"-search-form-havebefore\")] = beforeContent,\r\n                    _a[\"\".concat(selectorPrefix, \"-search-form-haveafter\")] = afterContent,\r\n                    _a)) },\r\n                React.createElement(\"div\", { className: \"ant-form-search\" },\r\n                    React.createElement(FormItemCreator, { columns: this.getFormColumns(columns || [], size, search.hasOwnProperty('optionRender') && !optionRender) })),\r\n                search.hasOwnProperty('optionRender') ? (optionRender) : (React.createElement(\"div\", { className: \"ant-form-btngroup\" },\r\n                    React.createElement(Button, { onClick: function () { return _this.onResetSearch(); }, size: size }, resetText || intl.v('重置')),\r\n                    React.createElement(Button, { type: \"primary\", onClick: function () { return _this.onSearch(); }, size: size }, searchText || intl.v('搜索'))))),\r\n            afterContent)) : null;\r\n    };\r\n    /**\r\n     * 渲染内容\r\n     */\r\n    TableList.prototype.renderContent = function () {\r\n        var mode = this.props.mode;\r\n        return (React.createElement(\"div\", { className: \"\".concat(selectorPrefix, \"-content\") },\r\n            this.renderToolbar(),\r\n            this.state.firstLoading\r\n                ? this.renderLoading()\r\n                : mode === 'list'\r\n                    ? this.renderList()\r\n                    : this.renderTable()));\r\n    };\r\n    /**\r\n     * 加载效果\r\n     */\r\n    TableList.prototype.renderLoading = function () {\r\n        return React.createElement(Skeleton, { paragraph: { rows: 10 }, title: false });\r\n    };\r\n    TableList.prototype.render = function () {\r\n        var _this = this;\r\n        var className = this.props.className;\r\n        return (React.createElement(\"div\", { className: classNames(selectorPrefix, className), ref: function (c) {\r\n                _this.TableListRef = c;\r\n            } },\r\n            this.renderSearch(),\r\n            this.renderContent()));\r\n    };\r\n    return TableList;\r\n}(React.PureComponent));\r\nTableList.defaultProps = {\r\n    mode: 'table',\r\n};\r\nexport default TableList;\r\n//# sourceMappingURL=tablelist.js.map"],"names":["__assign","__extends","__rest","Button","Checkbox","Form","List","Skeleton","Table","classNames","cloneDeep","React","FormItemCreator","intl","SortableTable","ToolbarReload","ToolbarSelectAll","ToolbarSetting","Util","selectorPrefix","defaultRowKey","TableList","_super","props","_this","call","this","util","renderToolbar","dataSource","rowKey","pagination","className","title","total","selectAll","search","reload","setting","toolbarOptionRender","selectedColumnKeys","tableColumns","rowSelection","toolbar","_a","getModeProps","_b","_c","state","getRowSelection","createElement","concat","vHtml","n","setSelectAll","v","setState","columns","getFormColumns","onSearch","onSettingChange","onSettingSortEnd","renderList","loading","renderItem","others","list","getPagination","getLoading","item","index","key","Item","Fragment","checked","selectedRowKeys","includes","onChange","e","target","push","selectedRows","filter","renderTable","sortable","tableProps","table","onTableChange","ref","c","SortableTableRef","modeProps","getDefaultSelectedColumnKeys","getSortDataSource","getParams","getTableColumns","fetchList","onResetSearch","searchFormRef","createRef","firstLoading","params","page","limit","defaultPageSize","getDerivedStateFromProps","nextProps","prevState","mode","request","firstRequest","prototype","componentDidMount","shouldComponentUpdate","nextState","rowKey_1","nextModeProps","JSON","stringify","map","exceptKeys","renderSearch","beforeContent","afterContent","optionRender","searchText","resetText","size","layout","hasOwnProperty","onClick","type","renderContent","renderLoading","paragraph","rows","render","TableListRef","PureComponent","defaultProps"],"mappings":"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"}