{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["import _Popover from \"antd/es/popover\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _Tooltip from \"antd/es/tooltip\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\nimport React from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { ReloadOutlined, SettingOutlined } from '@ant-design/icons';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from './tablelist';\nexport var ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n  var selectAll = _a.selectAll,\n    rowSelection = _a.rowSelection,\n    rowKey = _a.rowKey,\n    dataSource = _a.dataSource,\n    setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('全选'),\n    placement: \"top\"\n  }, selectAll), /*#__PURE__*/React.createElement(_Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || Intl.v('全选')));\n};\nexport var ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n    onSearch = _a.onSearch;\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || /*#__PURE__*/React.createElement(ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\nexport var ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n    tableColumns = _a.tableColumns,\n    onSettingChange = _a.onSettingChange,\n    onSettingSortEnd = _a.onSettingSortEnd,\n    selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = SortableElement(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox, __assign({}, props));\n  });\n  var SortableWrapper = SortableContainer(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox.Group, __assign({}, props));\n  });\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      _onChange = _a.onChange;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, Intl.v('列展示')));\n  };\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      onChange = _a.onChange,\n      onSortEnd = _a.onSortEnd;\n    return (\n      /*#__PURE__*/\n      // @ts-ignore\n      React.createElement(SortableWrapper, {\n        helperClass: \"\".concat(selectorPrefix, \"-set-dragging\"),\n        value: selectedColumnKeys,\n        onChange: onChange,\n        onSortEnd: onSortEnd,\n        distance: 2\n      }, columns.map(function (item, index) {\n        return (\n          /*#__PURE__*/\n          // @ts-ignore\n          React.createElement(SortableItem, {\n            value: item.key,\n            index: index,\n            key: item.key\n          }, item.title)\n        );\n      }))\n    );\n  };\n  return /*#__PURE__*/React.createElement(_Popover, __assign({\n    title: /*#__PURE__*/React.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: /*#__PURE__*/React.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || /*#__PURE__*/React.createElement(SettingOutlined, {\n    type: \"setting\"\n  })));\n};"],"names":["_Popover","_Checkbox","_Tooltip","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","SortableContainer","SortableElement","ReloadOutlined","SettingOutlined","Intl","selectorPrefix","ToolbarSelectAll","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","selectedRowKeys","checked","_e","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","props","SortableWrapper","Group","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","concat","value","distance","item","index","trigger","overlayClassName","Popover","type"],"mappings":"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"}