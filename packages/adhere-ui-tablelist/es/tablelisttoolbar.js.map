{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["import _Popover from \"antd/es/popover\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\nimport React from 'react';\n// import Tooltip from 'antd/lib/tooltip';\n// import Checkbox from 'antd/lib/checkbox';\n// import Popover from 'antd/lib/popover';\nimport { ReloadOutlined, SettingOutlined } from '@ant-design/icons';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport intl from '@baifendian/adhere-util-intl';\nvar selectorPrefix = 'adhere-ui-tablelist';\nexport var ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n\n  var selectAll = _a.selectAll,\n      rowSelection = _a.rowSelection,\n      rowKey = _a.rowKey,\n      dataSource = _a.dataSource,\n      setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: intl.v('全选'),\n    placement: \"top\"\n  }, selectAll), /*#__PURE__*/React.createElement(_Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || intl.v('全选')));\n};\nexport var ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n      onSearch = _a.onSearch;\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: intl.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || /*#__PURE__*/React.createElement(ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\nexport var ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n      tableColumns = _a.tableColumns,\n      onSettingChange = _a.onSettingChange,\n      onSettingSortEnd = _a.onSettingSortEnd,\n      selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = SortableElement(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox, __assign({}, props));\n  });\n  var SortableWrapper = SortableContainer(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox.Group, __assign({}, props));\n  });\n\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        _onChange = _a.onChange;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, intl.v('列展示')));\n  };\n\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        onChange = _a.onChange,\n        onSortEnd = _a.onSortEnd;\n    return /*#__PURE__*/React.createElement(SortableWrapper, {\n      helperClass: \"set-dragging\",\n      value: selectedColumnKeys,\n      onChange: onChange,\n      onSortEnd: onSortEnd,\n      distance: 2\n    }, columns.map(function (item, index) {\n      return /*#__PURE__*/React.createElement(SortableItem, {\n        value: item.key,\n        index: index,\n        key: item.key\n      }, item.title);\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(_Popover, __assign({\n    title: /*#__PURE__*/React.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: /*#__PURE__*/React.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: intl.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || /*#__PURE__*/React.createElement(SettingOutlined, {\n    type: \"setting\"\n  })));\n};"],"names":["_Popover","_Checkbox","_Tooltip","__assign","React","ReloadOutlined","SettingOutlined","SortableContainer","SortableElement","intl","selectorPrefix","ToolbarSelectAll","_a","_e","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","SettingTitle","columns","selectedColumnKeys","_onChange","Fragment","key","SettingContent","onSortEnd","SortableWrapper","helperClass","value","distance","item","index","SortableItem","setting","tableColumns","onSettingChange","onSettingSortEnd","props","Group","content","trigger","overlayClassName","concat","Popover","type"],"mappings":"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"}