{"version":3,"file":"TableListToolBar.js","sources":["TableListToolBar.js"],"sourcesContent":["import _SettingOutlined from \"@ant-design/icons/es/icons/SettingOutlined\";\nimport _Popover from \"antd/es/popover\";\nimport _ReloadOutlined from \"@ant-design/icons/es/icons/ReloadOutlined\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _Tooltip from \"antd/es/tooltip\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\nimport React from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from './TableList';\nexport var ToolbarSelectAll = function (_a) {\n  var _b, _c, _d, _e;\n  var selectAll = _a.selectAll,\n    rowSelection = _a.rowSelection,\n    rowKey = _a.rowKey,\n    dataSource = _a.dataSource,\n    setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('全选'),\n    placement: \"top\"\n  }, selectAll), /*#__PURE__*/React.createElement(_Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || Intl.v('全选')));\n};\nexport var ToolbarReload = function (_a) {\n  var reload = _a.reload,\n    onSearch = _a.onSearch;\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || /*#__PURE__*/React.createElement(_ReloadOutlined, {\n    onClick: function () {\n      return onSearch();\n    }\n  }));\n};\nexport var ToolbarSetting = function (_a) {\n  var setting = _a.setting,\n    tableColumns = _a.tableColumns,\n    onSettingChange = _a.onSettingChange,\n    onSettingSortEnd = _a.onSettingSortEnd,\n    selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = SortableElement(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox, __assign({}, props));\n  });\n  var SortableWrapper = SortableContainer(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox.Group, __assign({}, props));\n  });\n  var SettingTitle = function (_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      onChange = _a.onChange;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function (e) {\n        return onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, Intl.v('列展示')));\n  };\n  var SettingContent = function (_a) {\n    var _b = _a.columns,\n      columns = _b === void 0 ? [] : _b,\n      _c = _a.selectedColumnKeys,\n      selectedColumnKeys = _c === void 0 ? [] : _c,\n      onChange = _a.onChange,\n      onSortEnd = _a.onSortEnd;\n    return (\n      /*#__PURE__*/\n      // @ts-ignore\n      React.createElement(SortableWrapper, {\n        helperClass: \"\".concat(selectorPrefix, \"-set-dragging\"),\n        value: selectedColumnKeys,\n        onChange: onChange,\n        onSortEnd: onSortEnd,\n        distance: 2\n      }, columns.map(function (item, index) {\n        return (\n          /*#__PURE__*/\n          // @ts-ignore\n          React.createElement(SortableItem, {\n            value: item.key,\n            index: index,\n            key: item.key\n          }, item.title)\n        );\n      }))\n    );\n  };\n  return /*#__PURE__*/React.createElement(_Popover, __assign({\n    title: /*#__PURE__*/React.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: /*#__PURE__*/React.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(selectorPrefix, \"-setting-overlay\")\n  }, setting.Popover), /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || /*#__PURE__*/React.createElement(_SettingOutlined, {\n    type: \"setting\"\n  })));\n};"],"names":["_SettingOutlined","_Popover","_ReloadOutlined","_Checkbox","_Tooltip","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","SortableContainer","SortableElement","Intl","selectorPrefix","ToolbarSelectAll","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","selectedRowKeys","checked","_e","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","props","SortableWrapper","Group","columns","Fragment","key","content","onSortEnd","helperClass","concat","value","distance","item","index","trigger","overlayClassName","Popover","type"],"mappings":"OAAOA,qBAAsB,oDACtBC,aAAc,yBACdC,oBAAqB,mDACrBC,cAAe,0BACfC,aAAc,kBACrB,IAAIC,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SASOO,UAAW,eACTC,kBAAmBC,eAA2C,KAApB,4BAC5CC,SAAU,sCACRC,cAAmC,KAAb,cACxB,IAAIC,iBAAmB,SAAUC,GACtC,IACIC,EAAYD,EAAGC,UACjBC,EAAeF,EAAGE,aAClBC,EAASH,EAAGG,OACZC,EAAaJ,EAAGI,WAChBC,EAAeL,EAAGK,aACpB,OAAKH,EAaeR,MAAMY,cAAc5B,SAAUC,SAAS,CACzD4B,MAAOV,KAAKW,EAAE,IAAI,EAClBC,UAAW,KACb,EAAGR,CAAS,EAAgBP,MAAMY,cAAc7B,UAAW,CACzDiC,cAAeT,EAAUU,OAAST,EAAaD,UAAY,OAACW,EAAK,OAACC,EAAKX,EAAaD,WAAuC,KAAA,EAASY,EAAGC,YAAwC,KAAA,EAASF,EAAGxB,OAASc,EAAaa,gBAAgB3B,QAAUc,EAAaa,gBAAgB3B,UAAYgB,MAAAA,EAA+C,KAAA,EAASA,EAAWhB,QACvV4B,QAASf,EAAUU,OAAST,EAAaD,UAAY,EAAE,OAACgB,EAAK,OAACC,EAAKhB,EAAaD,WAAuC,KAAA,EAASiB,EAAGJ,aAAiDG,EAAG7B,QAAUc,EAAaa,gBAAgB3B,UAAYgB,MAAAA,EAA+C,KAAA,EAASA,EAAWhB,QAC7S+B,SAlBF,SAAkBC,GACZA,EAAEC,OAAOL,QACXd,EAAaiB,SAASf,EAAWkB,IAAI,SAAUd,GAC7C,OAAOA,EAAEL,EACX,CAAC,EAAGC,CAAU,EAEdF,EAAaiB,SAAS,GAAI,EAAE,EAE1BlB,EAAUU,OAASN,GACrBA,EAAae,EAAEC,OAAOL,OAAO,CAEjC,CAQA,EAAGf,EAAUM,OAASV,KAAKW,EAAE,IAAI,CAAC,CAAC,EApBT,IAqB5B,EACWe,cAAgB,SAAUvB,GACnC,IAAIwB,EAASxB,EAAGwB,OACdC,EAAWzB,EAAGyB,SAChB,OAAoB/B,MAAMY,cAAc5B,SAAUC,SAAS,CACzD4B,MAAOV,KAAKW,EAAE,IAAI,EAClBC,UAAW,KACb,EAAGe,CAAM,EAAGA,EAAOE,QAAuBhC,MAAMY,cAAc9B,gBAAiB,CAC7EmD,QAAS,WACP,OAAOF,EAAS,CAClB,CACF,CAAC,CAAC,CACJ,EACWG,eAAiB,SAAU5B,GACpC,IAAI6B,EAAU7B,EAAG6B,QACfC,EAAe9B,EAAG8B,aAClBC,EAAkB/B,EAAG+B,gBACrBC,EAAmBhC,EAAGgC,iBACtBC,EAAqBjC,EAAGiC,mBACtBC,EAAetC,gBAAgB,SAAUuC,GAC3C,OAAoBzC,MAAMY,cAAc7B,UAAWE,SAAS,GAAIwD,CAAK,CAAC,CACxE,CAAC,EACGC,EAAkBzC,kBAAkB,SAAUwC,GAChD,OAAoBzC,MAAMY,cAAc7B,UAAU4D,MAAO1D,SAAS,GAAIwD,CAAK,CAAC,CAC9E,CAAC,EA8CD,OAAoBzC,MAAMY,cAAc/B,SAAUI,SAAS,CACzD4B,MAAoBb,MAAMY,cA9CT,SAAUN,GAC3B,IAAIa,EAAKb,EAAGsC,QACVA,EAAiB,KAAA,IAAPzB,EAAgB,GAAKA,EAC/BD,EAAKZ,EAAGiC,mBACRA,EAA4B,KAAA,IAAPrB,EAAgB,GAAKA,EAC1CO,EAAWnB,EAAGmB,SAChB,OAAoBzB,MAAMY,cAAcZ,MAAM6C,SAAU,KAAmB7C,MAAMY,cAAc7B,UAAW,CACxGiC,cAAuH,KAAvGuB,MAAAA,EAA+D,KAAA,EAASA,EAAmB7C,UAAkB6C,MAAAA,EAA+D,KAAA,EAASA,EAAmB7C,WAAakD,MAAAA,EAAyC,KAAA,EAASA,EAAQlD,QAC/R4B,SAAUiB,MAAAA,EAA+D,KAAA,EAASA,EAAmB7C,WAAakD,MAAAA,EAAyC,KAAA,EAASA,EAAQlD,QAC5K+B,SAAU,SAAUC,GAClB,OAAOD,EAASC,EAAEC,OAAOL,QAAUsB,EAAQhB,IAAI,SAAUd,GACvD,OAAOA,EAAEgC,GACX,CAAC,EAAI,EAAE,CACT,CACF,EAAG3C,KAAKW,EAAE,KAAK,CAAC,CAAC,CACnB,EA+BwD,CACpD8B,QAASR,EACTX,SAAUY,EACVE,mBAAoBA,CACtB,CAAC,EACDQ,QAAsB/C,MAAMY,cAnCT,SAAUN,GAC7B,IAAIa,EAAKb,EAAGsC,QACVA,EAAiB,KAAA,IAAPzB,EAAgB,GAAKA,EAC/BD,EAAKZ,EAAGiC,mBACRA,EAA4B,KAAA,IAAPrB,EAAgB,GAAKA,EAC1CO,EAAWnB,EAAGmB,SACduB,EAAY1C,EAAG0C,UACjB,OAGEhD,MAAMY,cAAc8B,EAAiB,CACnCO,YAAa,GAAGC,OAAO9C,eAAgB,eAAe,EACtD+C,MAAOZ,EACPd,SAAUA,EACVuB,UAAWA,EACXI,SAAU,CACZ,EAAGR,EAAQhB,IAAI,SAAUyB,EAAMC,GAC7B,OAGEtD,MAAMY,cAAc4B,EAAc,CAChCW,MAAOE,EAAKP,IACZQ,MAAOA,EACPR,IAAKO,EAAKP,GACZ,EAAGO,EAAKxC,KACV,CACF,CAAC,CACH,CACF,EAO4D,CACxD+B,QAASR,EACTX,SAAUY,EACVW,UAAWV,EACXC,mBAAoBA,CACtB,CAAC,EACDgB,QAAS,QACTxC,UAAW,cACXyC,iBAAkB,GAAGN,OAAO9C,eAAgB,kBAAkB,CAChE,EAAG+B,EAAQsB,OAAO,EAAgBzD,MAAMY,cAAc5B,SAAUC,SAAS,CACvE4B,MAAOV,KAAKW,EAAE,IAAI,EAClBC,UAAW,KACb,EAAGoB,CAAO,EAAGA,EAAQH,QAAuBhC,MAAMY,cAAchC,iBAAkB,CAChF8E,KAAM,SACR,CAAC,CAAC,CAAC,CACL,SAvHWrD,iBA6BAwB,cAYAK,cA8EV"}