{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["import { __assign } from \"tslib\";\r\n/*\r\n * @Description: tablelist的工具栏项\r\n * @Author: yumeng.qin\r\n * @Date: 2021-04-28 11:21:06\r\n * @LastEditor: yumeng.qin\r\n * @LastEditTime: 2021-05-06 14:25:16\r\n */\r\nimport { Checkbox, Popover, Tooltip } from 'antd';\r\nimport React from 'react';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport { ReloadOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport { selectorPrefix } from './tablelist';\r\nexport var ToolbarSelectAll = function (_a) {\r\n    var _b, _c, _d, _e;\r\n    var selectAll = _a.selectAll, rowSelection = _a.rowSelection, rowKey = _a.rowKey, dataSource = _a.dataSource, setSelectAll = _a.setSelectAll;\r\n    if (!rowSelection)\r\n        return null;\r\n    function onChange(e) {\r\n        if (e.target.checked) {\r\n            rowSelection.onChange(dataSource.map(function (v) { return v[rowKey]; }), dataSource);\r\n        }\r\n        else {\r\n            rowSelection.onChange([], []);\r\n        }\r\n        if (selectAll.total && setSelectAll) {\r\n            setSelectAll(e.target.checked);\r\n        }\r\n    }\r\n    return (React.createElement(Tooltip, __assign({ title: Intl.v('全选'), placement: \"top\" }, selectAll), React.createElement(Checkbox, { indeterminate: selectAll.total && rowSelection.selectAll\r\n            ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length\r\n            : rowSelection.selectedRowKeys.length &&\r\n                rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), checked: selectAll.total && rowSelection.selectAll\r\n            ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length)\r\n            : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), onChange: onChange }, selectAll.title || Intl.v('全选'))));\r\n};\r\nexport var ToolbarReload = function (_a) {\r\n    var reload = _a.reload, onSearch = _a.onSearch;\r\n    return (React.createElement(Tooltip, __assign({ title: Intl.v('刷新'), placement: \"top\" }, reload), reload.render || React.createElement(ReloadOutlined, { onClick: function () { return onSearch(); } })));\r\n};\r\nexport var ToolbarSetting = function (_a) {\r\n    var setting = _a.setting, tableColumns = _a.tableColumns, onSettingChange = _a.onSettingChange, onSettingSortEnd = _a.onSettingSortEnd, selectedColumnKeys = _a.selectedColumnKeys;\r\n    var SortableItem = SortableElement(function (props) { return React.createElement(Checkbox, __assign({}, props)); });\r\n    var SortableWrapper = SortableContainer(function (props) { return React.createElement(Checkbox.Group, __assign({}, props)); });\r\n    var SettingTitle = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange;\r\n        return (React.createElement(React.Fragment, null,\r\n            React.createElement(Checkbox, { indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length), checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length), onChange: function (e) { return onChange(e.target.checked ? columns.map(function (v) { return v.key; }) : []); } }, Intl.v('列展示'))));\r\n    };\r\n    var SettingContent = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange, onSortEnd = _a.onSortEnd;\r\n        return (\r\n        // @ts-ignore\r\n        React.createElement(SortableWrapper, { helperClass: \"\".concat(selectorPrefix, \"-set-dragging\"), value: selectedColumnKeys, onChange: onChange, onSortEnd: onSortEnd, distance: 2 }, columns.map(function (item, index) { return (\r\n        // @ts-ignore\r\n        React.createElement(SortableItem, { value: item.key, index: index, key: item.key }, item.title)); })));\r\n    };\r\n    return (React.createElement(Popover, __assign({ title: React.createElement(SettingTitle, { columns: tableColumns, onChange: onSettingChange, selectedColumnKeys: selectedColumnKeys }), content: React.createElement(SettingContent, { columns: tableColumns, onChange: onSettingChange, onSortEnd: onSettingSortEnd, selectedColumnKeys: selectedColumnKeys }), trigger: \"click\", placement: \"bottomRight\", overlayClassName: \"\".concat(selectorPrefix, \"-settingOverlay\") }, setting.Popover),\r\n        React.createElement(Tooltip, __assign({ title: Intl.v('设置'), placement: \"top\" }, setting), setting.render || React.createElement(SettingOutlined, { type: \"setting\" }))));\r\n};\r\n//# sourceMappingURL=tablelisttoolbar.js.map"],"names":["__assign","Checkbox","Popover","Tooltip","React","SortableContainer","SortableElement","ReloadOutlined","SettingOutlined","Intl","selectorPrefix","ToolbarSelectAll","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_e","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","props","SortableWrapper","Group","columns","Fragment","key","content","onSortEnd","helperClass","concat","value","distance","item","index","trigger","overlayClassName","type"],"mappings":"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"}