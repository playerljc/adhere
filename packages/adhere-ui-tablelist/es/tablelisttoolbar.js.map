{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n/*\r\n * @Description: tablelist的工具栏项\r\n * @Author: yumeng.qin\r\n * @Date: 2021-04-28 11:21:06\r\n * @LastEditor: yumeng.qin\r\n * @LastEditTime: 2021-05-06 14:25:16\r\n */\r\nimport React from 'react';\r\nimport { Tooltip, Checkbox, Popover } from 'antd';\r\n// import Tooltip from 'antd/lib/tooltip';\r\n// import Checkbox from 'antd/lib/checkbox';\r\n// import Popover from 'antd/lib/popover';\r\nimport { ReloadOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport intl from '@baifendian/adhere-util-intl';\r\nvar selectorPrefix = 'adhere-ui-tablelist';\r\nexport var ToolbarSelectAll = function (_a) {\r\n    var _b, _c, _d, _e;\r\n    var selectAll = _a.selectAll, rowSelection = _a.rowSelection, rowKey = _a.rowKey, dataSource = _a.dataSource, setSelectAll = _a.setSelectAll;\r\n    if (!rowSelection)\r\n        return null;\r\n    function onChange(e) {\r\n        if (e.target.checked) {\r\n            rowSelection.onChange(dataSource.map(function (v) { return v[rowKey]; }), dataSource);\r\n        }\r\n        else {\r\n            rowSelection.onChange([], []);\r\n        }\r\n        if (selectAll.total && setSelectAll) {\r\n            setSelectAll(e.target.checked);\r\n        }\r\n    }\r\n    return (React.createElement(Tooltip, __assign({ title: intl.v('全选'), placement: \"top\" }, selectAll), React.createElement(Checkbox, { indeterminate: selectAll.total && rowSelection.selectAll\r\n            ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length &&\r\n            rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), checked: selectAll.total && rowSelection.selectAll\r\n            ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length)\r\n            : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length), onChange: onChange }, selectAll.title || intl.v('全选'))));\r\n};\r\nexport var ToolbarReload = function (_a) {\r\n    var reload = _a.reload, onSearch = _a.onSearch;\r\n    return (React.createElement(Tooltip, __assign({ title: intl.v('刷新'), placement: \"top\" }, reload), reload.render || React.createElement(ReloadOutlined, { onClick: function () { return onSearch(); } })));\r\n};\r\nexport var ToolbarSetting = function (_a) {\r\n    var setting = _a.setting, tableColumns = _a.tableColumns, onSettingChange = _a.onSettingChange, onSettingSortEnd = _a.onSettingSortEnd, selectedColumnKeys = _a.selectedColumnKeys;\r\n    var SortableItem = SortableElement(function (props) { return React.createElement(Checkbox, __assign({}, props)); });\r\n    var SortableWrapper = SortableContainer(function (props) { return React.createElement(Checkbox.Group, __assign({}, props)); });\r\n    var SettingTitle = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange;\r\n        return (React.createElement(React.Fragment, null,\r\n            React.createElement(Checkbox, { indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length), checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length), onChange: function (e) { return onChange(e.target.checked ? columns.map(function (v) { return v.key; }) : []); } }, intl.v('列展示'))));\r\n    };\r\n    var SettingContent = function (_a) {\r\n        var _b = _a.columns, columns = _b === void 0 ? [] : _b, _c = _a.selectedColumnKeys, selectedColumnKeys = _c === void 0 ? [] : _c, onChange = _a.onChange, onSortEnd = _a.onSortEnd;\r\n        return (React.createElement(SortableWrapper, { helperClass: \"set-dragging\", value: selectedColumnKeys, onChange: onChange, onSortEnd: onSortEnd, distance: 2 }, columns.map(function (item, index) { return (React.createElement(SortableItem, { value: item.key, index: index, key: item.key }, item.title)); })));\r\n    };\r\n    return (React.createElement(Popover, __assign({ title: React.createElement(SettingTitle, { columns: tableColumns, onChange: onSettingChange, selectedColumnKeys: selectedColumnKeys }), content: React.createElement(SettingContent, { columns: tableColumns, onChange: onSettingChange, onSortEnd: onSettingSortEnd, selectedColumnKeys: selectedColumnKeys }), trigger: \"click\", placement: \"bottomRight\", overlayClassName: selectorPrefix + \"-settingOverlay\" }, setting.Popover),\r\n        React.createElement(Tooltip, __assign({ title: intl.v('设置'), placement: \"top\" }, setting), setting.render || React.createElement(SettingOutlined, { type: \"setting\" }))));\r\n};\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","Tooltip","Checkbox","Popover","ReloadOutlined","SettingOutlined","SortableContainer","SortableElement","intl","selectorPrefix","ToolbarSelectAll","_a","_e","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","selectedRowKeys","checked","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","props","SortableWrapper","Group","columns","Fragment","key","content","onSortEnd","helperClass","value","distance","item","index","trigger","overlayClassName","type"],"mappings":"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"}