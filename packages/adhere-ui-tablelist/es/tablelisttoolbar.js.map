{"version":3,"file":"tablelisttoolbar.js","sources":["tablelisttoolbar.js"],"sourcesContent":["import _Popover from \"antd/es/popover\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport \"core-js/modules/es.array.map.js\";\nimport { __assign } from \"tslib\";\n/*\n * @Description: tablelist的工具栏项\n * @Author: yumeng.qin\n * @Date: 2021-04-28 11:21:06\n * @LastEditor: yumeng.qin\n * @LastEditTime: 2021-05-06 14:25:16\n */\n\nimport React from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { ReloadOutlined, SettingOutlined } from '@ant-design/icons';\nimport Intl from '@baifendian/adhere-util-intl';\nimport { selectorPrefix } from './tablelist';\nexport var ToolbarSelectAll = function ToolbarSelectAll(_a) {\n  var _b, _c, _d, _e;\n\n  var selectAll = _a.selectAll,\n      rowSelection = _a.rowSelection,\n      rowKey = _a.rowKey,\n      dataSource = _a.dataSource,\n      setSelectAll = _a.setSelectAll;\n  if (!rowSelection) return null;\n\n  function onChange(e) {\n    if (e.target.checked) {\n      rowSelection.onChange(dataSource.map(function (v) {\n        return v[rowKey];\n      }), dataSource);\n    } else {\n      rowSelection.onChange([], []);\n    }\n\n    if (selectAll.total && setSelectAll) {\n      setSelectAll(e.target.checked);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('全选'),\n    placement: \"top\"\n  }, selectAll), /*#__PURE__*/React.createElement(_Checkbox, {\n    indeterminate: selectAll.total && rowSelection.selectAll ? (_c = (_b = rowSelection.selectAll) === null || _b === void 0 ? void 0 : _b.exceptKeys) === null || _c === void 0 ? void 0 : _c.length : rowSelection.selectedRowKeys.length && rowSelection.selectedRowKeys.length !== (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    checked: selectAll.total && rowSelection.selectAll ? !((_e = (_d = rowSelection.selectAll) === null || _d === void 0 ? void 0 : _d.exceptKeys) === null || _e === void 0 ? void 0 : _e.length) : rowSelection.selectedRowKeys.length === (dataSource === null || dataSource === void 0 ? void 0 : dataSource.length),\n    onChange: onChange\n  }, selectAll.title || Intl.v('全选')));\n};\nexport var ToolbarReload = function ToolbarReload(_a) {\n  var reload = _a.reload,\n      onSearch = _a.onSearch;\n  return /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('刷新'),\n    placement: \"top\"\n  }, reload), reload.render || /*#__PURE__*/React.createElement(ReloadOutlined, {\n    onClick: function onClick() {\n      return onSearch();\n    }\n  }));\n};\nexport var ToolbarSetting = function ToolbarSetting(_a) {\n  var setting = _a.setting,\n      tableColumns = _a.tableColumns,\n      onSettingChange = _a.onSettingChange,\n      onSettingSortEnd = _a.onSettingSortEnd,\n      selectedColumnKeys = _a.selectedColumnKeys;\n  var SortableItem = SortableElement(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox, __assign({}, props));\n  });\n  var SortableWrapper = SortableContainer(function (props) {\n    return /*#__PURE__*/React.createElement(_Checkbox.Group, __assign({}, props));\n  });\n\n  var SettingTitle = function SettingTitle(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        _onChange = _a.onChange;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Checkbox, {\n      indeterminate: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== 0 && (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) !== (columns === null || columns === void 0 ? void 0 : columns.length),\n      checked: (selectedColumnKeys === null || selectedColumnKeys === void 0 ? void 0 : selectedColumnKeys.length) === (columns === null || columns === void 0 ? void 0 : columns.length),\n      onChange: function onChange(e) {\n        return _onChange(e.target.checked ? columns.map(function (v) {\n          return v.key;\n        }) : []);\n      }\n    }, Intl.v('列展示')));\n  };\n\n  var SettingContent = function SettingContent(_a) {\n    var _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        _c = _a.selectedColumnKeys,\n        selectedColumnKeys = _c === void 0 ? [] : _c,\n        onChange = _a.onChange,\n        onSortEnd = _a.onSortEnd;\n    return (\n      /*#__PURE__*/\n      // @ts-ignore\n      React.createElement(SortableWrapper, {\n        helperClass: \"\".concat(selectorPrefix, \"-set-dragging\"),\n        value: selectedColumnKeys,\n        onChange: onChange,\n        onSortEnd: onSortEnd,\n        distance: 2\n      }, columns.map(function (item, index) {\n        return (\n          /*#__PURE__*/\n          // @ts-ignore\n          React.createElement(SortableItem, {\n            value: item.key,\n            index: index,\n            key: item.key\n          }, item.title)\n        );\n      }))\n    );\n  };\n\n  return /*#__PURE__*/React.createElement(_Popover, __assign({\n    title: /*#__PURE__*/React.createElement(SettingTitle, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    content: /*#__PURE__*/React.createElement(SettingContent, {\n      columns: tableColumns,\n      onChange: onSettingChange,\n      onSortEnd: onSettingSortEnd,\n      selectedColumnKeys: selectedColumnKeys\n    }),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    overlayClassName: \"\".concat(selectorPrefix, \"-settingOverlay\")\n  }, setting.Popover), /*#__PURE__*/React.createElement(_Tooltip, __assign({\n    title: Intl.v('设置'),\n    placement: \"top\"\n  }, setting), setting.render || /*#__PURE__*/React.createElement(SettingOutlined, {\n    type: \"setting\"\n  })));\n};"],"names":["_Popover","_Checkbox","_Tooltip","__assign","React","SortableContainer","SortableElement","ReloadOutlined","SettingOutlined","Intl","selectorPrefix","ToolbarSelectAll","_a","selectAll","rowSelection","rowKey","dataSource","setSelectAll","createElement","title","v","placement","indeterminate","total","_c","_b","exceptKeys","length","selectedRowKeys","checked","_e","_d","onChange","e","target","map","ToolbarReload","reload","onSearch","render","onClick","ToolbarSetting","setting","tableColumns","onSettingChange","onSettingSortEnd","selectedColumnKeys","SortableItem","props","SortableWrapper","Group","columns","_onChange","Fragment","key","content","onSortEnd","helperClass","concat","value","distance","item","index","trigger","overlayClassName","Popover","type"],"mappings":"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"}