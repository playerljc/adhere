"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var r={};for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(r[l[a]]=e[l[a]]);return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(require("react")),prop_types_1=__importDefault(require("prop-types")),classnames_1=__importDefault(require("classnames")),adhere_ui_conditionalrender_1=__importDefault(require("@baifendian/adhere-ui-conditionalrender")),selectorPrefix="adhere-ui-tablegridlayout";function renderHorizontal(e){var t=e.data,r=t.columnCount,t=t.data,n=e.rowCountRef;var s=2*r,r=[];r.length=s,r.fill(0);var o=[];t.forEach(function(e){var t=e.label;"require"in e&&e.require&&(t=react_1.default.cloneElement(t,__assign(__assign({},t.props),{className:classnames_1.default(selectorPrefix+"-table-row-label","require",t.props.className||"")}),t.props.children)),o.push(t),o.push(e.value)});var u=0,i=[];return function e(){for(var t=[],r=0;u<o.length;){var a=o[u];if(r===s)break;"colSpan"in a.props&&"number"==typeof a.props.colSpan?r+=a.props.colSpan:r+=1,t.push(a),u++}r<s&&((l=[]).length=s-r,l.fill(0),l.forEach(function(){t.push(react_1.default.createElement("td",{className:selectorPrefix+"-table-noborder"}))}));var l=react_1.default.createElement("tr",{className:classnames_1.default(selectorPrefix+"-table-row",n.current%2==0?"odd":"even")},t);n.current++,i.push(l),u<o.length&&e()}(),i}function renderVertical(e){var t=e.columnCount,o=e.data;var u=t,t=[];t.length=u,t.fill(0),o.forEach(function(e){var t=e.label;"require"in e&&e.require&&(e.label=react_1.default.cloneElement(t,__assign(__assign({},t.props),{className:t.props.className+" require"}),t.props.children))});var i=0,d=[];return function e(){for(var t=[],r=[],a=0;i<o.length;){var l=o[i];if(a===u)break;"colSpan"in l.value.props&&"number"==typeof l.value.props.colSpan?a+=l.value.props.colSpan:a+=1,t.push(l.label),r.push(l.value),i++}a<u&&((s=[]).length=u-a,s.fill(0),s.forEach(function(){t.push(react_1.default.createElement("td",{className:selectorPrefix+"-table-noborder"})),r.push(react_1.default.createElement("td",{className:selectorPrefix+"-table-noborder"}))}));var n=react_1.default.createElement("tr",{className:classnames_1.default(selectorPrefix+"-table-row","even")},t),s=react_1.default.createElement("tr",{className:classnames_1.default(selectorPrefix+"-table-row","odd")},r);d.push(n,s),i<o.length&&e()}(),d}function renderGridSearchForm(e){for(var t=e.data,r=t.className,a=t.style,l=t.width,n=t.colgroup,s=t.defaultLabelWidth,o=void 0===s?120:s,u=e.layout,i=e.density,t=e.parity,s=void 0!==t&&t,t=new Map([["default","densitydefault"],["middle","densitymiddle"],["small","densitysmall"]]),d=[],p=0;p<n.length;p++)!function(e){var t=n[e];d.push(react_1.default.createElement(adhere_ui_conditionalrender_1.default,{key:e,conditional:"auto"!==t,noMatch:function(){return react_1.default.createElement("col",null)}},function(){return react_1.default.createElement("col",{width:t||o})}))}(p);return react_1.default.createElement("table",{className:classnames_1.default(selectorPrefix+"-table",t.get(i||"default"),s?"parity":"",r||""),style:__assign({width:l||"100%"},a||{})},react_1.default.createElement("colgroup",null,d),react_1.default.createElement(adhere_ui_conditionalrender_1.default,{conditional:"horizontal"===u,noMatch:function(){return renderVertical(e.data)}},function(){return renderHorizontal(e)}))}function TableGridLayout(e){var t=e.data,r=e.className,a=e.style,e=__rest(e,["data","className","style"]);return react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix,r||""),style:a||{}},TableGridLayout.renderGridSearchFormGroup(t,e))}TableGridLayout.renderGridSearchFormGroup=function(e,t){var r={current:0},a=t||{},l=a.bordered,n=void 0!==l&&l,t=a.innerClassName,l=a.innerStyle,s=__rest(a,["bordered","innerClassName","innerStyle"]);return react_1.default.createElement("div",{className:classnames_1.default(n?selectorPrefix+"-border":null,selectorPrefix+"-inner-wrap",t||""),style:l||{}},e.map(function(e,t){return react_1.default.createElement(adhere_ui_conditionalrender_1.default,{key:e.name||t,conditional:0!==t,noMatch:function(){return renderGridSearchForm(__assign({data:e,rowCountRef:r},s))}},function(){return react_1.default.createElement("div",null,renderGridSearchForm(__assign({data:e,rowCountRef:r},s)))})}))},TableGridLayout.Label=function(e){var t=e.className,r=__rest(e,["className"]);return react_1.default.createElement("td",__assign({className:classnames_1.default(selectorPrefix+"-table-row-label",t||"")},r),e.children)},TableGridLayout.Value=function(e){var t=e.className,r=__rest(e,["className"]);return react_1.default.createElement("td",__assign({className:classnames_1.default(selectorPrefix+"-table-row-value",t||"")},r),e.children)},TableGridLayout.defaultProps={data:[],layout:"horizontal",bordered:!1},TableGridLayout.propTypes={className:prop_types_1.default.string,style:prop_types_1.default.object,innerClassName:prop_types_1.default.string,innerStyle:prop_types_1.default.object,bordered:prop_types_1.default.bool,layout:prop_types_1.default.oneOf(["horizontal","vertical"]),density:prop_types_1.default.oneOfType([prop_types_1.default.string,prop_types_1.default.number]),parity:prop_types_1.default.bool,data:prop_types_1.default.arrayOf(prop_types_1.default.shape({className:prop_types_1.default.string,style:prop_types_1.default.object,name:prop_types_1.default.string,width:prop_types_1.default.oneOfType([prop_types_1.default.string,prop_types_1.default.number]),defaultLabelWidth:prop_types_1.default.number,padding:prop_types_1.default.arrayOf(prop_types_1.default.number),colgroup:prop_types_1.default.arrayOf(prop_types_1.default.number).isRequired,columnCount:prop_types_1.default.number.isRequired,data:prop_types_1.default.arrayOf(prop_types_1.default.shape({key:prop_types_1.default.string.isRequired,label:prop_types_1.default.node.isRequired,value:prop_types_1.default.node.isRequired})).isRequired})).isRequired},exports.default=TableGridLayout;
//# sourceMappingURL=tablegridlayout.js.map
