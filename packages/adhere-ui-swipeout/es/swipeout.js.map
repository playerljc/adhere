{"version":3,"file":"swipeout.js","sources":["swipeout.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Swiper from 'swiper';\r\nvar selectorPrefix = 'adhere-ui-swipeout';\r\n/**\r\n * SwipeOut\r\n * @class SwipeOut\r\n * @classdesc SwipeOut\r\n */\r\nvar SwipeOut = /** @class */ (function (_super) {\r\n    __extends(SwipeOut, _super);\r\n    function SwipeOut() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.ref = React.createRef();\r\n        _this.swiper = null;\r\n        _this.map = new Map([\r\n            [[true, true].toString(), 1],\r\n            [[false, false].toString(), 1],\r\n            [[true, false].toString(), 0],\r\n            [[false, true].toString(), 2],\r\n        ]);\r\n        return _this;\r\n    }\r\n    SwipeOut.prototype.componentDidMount = function () {\r\n        this.createSwiper();\r\n    };\r\n    SwipeOut.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props.direction !== nextProps.direction) {\r\n            this.swiper.changeDirection(nextProps.direction);\r\n        }\r\n        if (this.props.beforeShow !== nextProps.beforeShow ||\r\n            this.props.afterShow !== nextProps.afterShow) {\r\n            this.slide(nextProps);\r\n        }\r\n    };\r\n    SwipeOut.prototype.slide = function (props) {\r\n        var beforeShow = props.beforeShow, afterShow = props.afterShow, duration = props.duration;\r\n        this.swiper.slideTo(this.map.get([beforeShow, afterShow].toString()), duration);\r\n    };\r\n    /**\r\n     * createSwiper\r\n     * @private\r\n     */\r\n    SwipeOut.prototype.createSwiper = function () {\r\n        var _this = this;\r\n        if (this.swiper) {\r\n            this.swiper.destroy();\r\n        }\r\n        var _a = this.props, beforeShow = _a.beforeShow, afterShow = _a.afterShow;\r\n        console.log('beforeShow-afterShow', beforeShow, afterShow, [beforeShow, afterShow].toString());\r\n        var initialSlide = this.map.get([beforeShow, afterShow].toString());\r\n        console.log('initialSlide', initialSlide);\r\n        this.swiper = new Swiper(this.ref.current, {\r\n            init: false,\r\n            // 初始化在第一个选项卡上\r\n            initialSlide: initialSlide,\r\n            direction: this.props.direction,\r\n            slidesPerView: 'auto',\r\n            centeredSlides: false,\r\n            spaceBetween: 0,\r\n        });\r\n        this.swiper.on('init', function () {\r\n            _this.trigger('onInit');\r\n        });\r\n        this.swiper.on('slideChangeTransitionStart', function () {\r\n            _this.trigger('onSlideChangeTransitionStart', _this.swiper.activeIndex);\r\n        });\r\n        this.swiper.on('slideChangeTransitionEnd', function () {\r\n            _this.trigger('onSlideChangeTransitionEnd', _this.swiper.activeIndex);\r\n        });\r\n        this.swiper.init();\r\n    };\r\n    /**\r\n     * trigger\r\n     * @param action\r\n     * @param params\r\n     * @private\r\n     */\r\n    SwipeOut.prototype.trigger = function (action, params) {\r\n        if (this.props[action]) {\r\n            this.props[action](params);\r\n        }\r\n    };\r\n    SwipeOut.prototype.render = function () {\r\n        // @ts-ignore\r\n        var _a = this.props, className = _a.className, style = _a.style, contentClassName = _a.contentClassName, contentStyle = _a.contentStyle, beforeClassName = _a.beforeClassName, beforeStyle = _a.beforeStyle, afterClassName = _a.afterClassName, afterStyle = _a.afterStyle, before = _a.before, after = _a.after, children = _a.children;\r\n        // @ts-ignore\r\n        return (React.createElement(\"div\", { className: classNames(selectorPrefix, 'swiper-container', \r\n            // @ts-ignore\r\n            className.split(/\\s+/)), style: __assign({}, style), \r\n            // @ts-ignore\r\n            ref: this.ref },\r\n            React.createElement(\"div\", { className: \"swiper-wrapper\" },\r\n                React.createElement(\"div\", { className: classNames('swiper-slide', selectorPrefix + \"-before\", \r\n                    // @ts-ignore\r\n                    beforeClassName.split(/\\s+/)), style: __assign({}, beforeStyle) }, before()),\r\n                React.createElement(\"div\", { className: classNames('swiper-slide', selectorPrefix + \"-content\", \r\n                    // @ts-ignore\r\n                    contentClassName.split(/\\s+/)), style: __assign({}, contentStyle) }, children),\r\n                React.createElement(\"div\", { className: classNames('swiper-slide', selectorPrefix + \"-after\", \r\n                    // @ts-ignore\r\n                    afterClassName.split(/\\s+/)), style: __assign({}, afterStyle) }, after()))));\r\n    };\r\n    return SwipeOut;\r\n}(React.Component));\r\nSwipeOut.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    beforeClassName: '',\r\n    beforeStyle: {},\r\n    afterClassName: '',\r\n    afterStyle: {},\r\n    contentClassName: '',\r\n    contentStyle: {},\r\n    beforeShow: false,\r\n    afterShow: false,\r\n    direction: 'horizontal',\r\n    duration: 0,\r\n    before: function () { return null; },\r\n    after: function () { return null; },\r\n};\r\nSwipeOut.propTypes = {\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n    beforeClassName: PropTypes.string,\r\n    beforeStyle: PropTypes.object,\r\n    afterClassName: PropTypes.string,\r\n    afterStyle: PropTypes.object,\r\n    contentClassName: PropTypes.string,\r\n    contentStyle: PropTypes.object,\r\n    beforeShow: PropTypes.bool,\r\n    afterShow: PropTypes.bool,\r\n    direction: PropTypes.string,\r\n    duration: PropTypes.number,\r\n    before: PropTypes.func,\r\n    after: PropTypes.func,\r\n    onInit: PropTypes.func,\r\n    slideChangeTransitionStart: PropTypes.func,\r\n    slideChangeTransitionEnd: PropTypes.func,\r\n};\r\nexport default SwipeOut;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","PropTypes","classNames","Swiper","selectorPrefix","SwipeOut","_super","_this","ref","createRef","swiper","map","Map","toString","componentDidMount","createSwiper","componentWillReceiveProps","nextProps","props","direction","changeDirection","beforeShow","afterShow","slide","duration","slideTo","get","destroy","_a","console","log","initialSlide","current","init","slidesPerView","centeredSlides","spaceBetween","on","trigger","activeIndex","action","params","render","className","style","contentClassName","contentStyle","beforeClassName","beforeStyle","afterClassName","afterStyle","before","after","children","createElement","split","Component","defaultProps","propTypes","string","object","bool","number","func","onInit","slideChangeTransitionStart","slideChangeTransitionEnd"],"mappings":"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"}