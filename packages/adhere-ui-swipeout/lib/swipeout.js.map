{"version":3,"file":"swipeout.js","sources":["swipeout.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar swiper_1 = __importDefault(require(\"swiper\"));\r\nvar selectorPrefix = 'adhere-ui-swipeout';\r\n/**\r\n * SwipeOut\r\n * @class SwipeOut\r\n * @classdesc SwipeOut\r\n */\r\nvar SwipeOut = /** @class */ (function (_super) {\r\n    __extends(SwipeOut, _super);\r\n    function SwipeOut() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.ref = react_1.default.createRef();\r\n        _this.swiper = null;\r\n        _this.map = new Map([\r\n            [[true, true].toString(), 1],\r\n            [[false, false].toString(), 1],\r\n            [[true, false].toString(), 0],\r\n            [[false, true].toString(), 2],\r\n        ]);\r\n        return _this;\r\n    }\r\n    SwipeOut.prototype.componentDidMount = function () {\r\n        this.createSwiper();\r\n    };\r\n    SwipeOut.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props.direction !== nextProps.direction) {\r\n            this.swiper.changeDirection(nextProps.direction);\r\n        }\r\n        if (this.props.beforeShow !== nextProps.beforeShow ||\r\n            this.props.afterShow !== nextProps.afterShow) {\r\n            this.slide(nextProps);\r\n        }\r\n    };\r\n    SwipeOut.prototype.slide = function (props) {\r\n        var beforeShow = props.beforeShow, afterShow = props.afterShow, duration = props.duration;\r\n        this.swiper.slideTo(this.map.get([beforeShow, afterShow].toString()), duration);\r\n    };\r\n    /**\r\n     * createSwiper\r\n     * @private\r\n     */\r\n    SwipeOut.prototype.createSwiper = function () {\r\n        var _this = this;\r\n        if (this.swiper) {\r\n            this.swiper.destroy();\r\n        }\r\n        var _a = this.props, beforeShow = _a.beforeShow, afterShow = _a.afterShow;\r\n        // console.log('beforeShow-afterShow', beforeShow, afterShow, [beforeShow, afterShow].toString());\r\n        var initialSlide = this.map.get([beforeShow, afterShow].toString());\r\n        // console.log('initialSlide', initialSlide);\r\n        this.swiper = new swiper_1.default(this.ref.current, {\r\n            init: false,\r\n            // 初始化在第一个选项卡上\r\n            initialSlide: initialSlide,\r\n            direction: this.props.direction,\r\n            slidesPerView: 'auto',\r\n            centeredSlides: false,\r\n            spaceBetween: 0,\r\n        });\r\n        this.swiper.on('init', function () {\r\n            _this.trigger('onInit');\r\n        });\r\n        this.swiper.on('slideChangeTransitionStart', function () {\r\n            _this.trigger('onSlideChangeTransitionStart', _this.swiper.activeIndex);\r\n        });\r\n        this.swiper.on('slideChangeTransitionEnd', function () {\r\n            _this.trigger('onSlideChangeTransitionEnd', _this.swiper.activeIndex);\r\n        });\r\n        this.swiper.init();\r\n    };\r\n    /**\r\n     * trigger\r\n     * @param action\r\n     * @param params\r\n     * @private\r\n     */\r\n    SwipeOut.prototype.trigger = function (action, params) {\r\n        if (this.props[action]) {\r\n            this.props[action](params);\r\n        }\r\n    };\r\n    SwipeOut.prototype.render = function () {\r\n        // @ts-ignore\r\n        var _a = this.props, className = _a.className, style = _a.style, contentClassName = _a.contentClassName, contentStyle = _a.contentStyle, beforeClassName = _a.beforeClassName, beforeStyle = _a.beforeStyle, afterClassName = _a.afterClassName, afterStyle = _a.afterStyle, before = _a.before, after = _a.after, children = _a.children;\r\n        // @ts-ignore\r\n        return (react_1.default.createElement(\"div\", { className: classnames_1.default(selectorPrefix, 'swiper-container', \r\n            // @ts-ignore\r\n            className.split(/\\s+/)), style: __assign({}, style), \r\n            // @ts-ignore\r\n            ref: this.ref },\r\n            react_1.default.createElement(\"div\", { className: \"swiper-wrapper\" },\r\n                react_1.default.createElement(\"div\", { className: classnames_1.default('swiper-slide', selectorPrefix + \"-before\", \r\n                    // @ts-ignore\r\n                    beforeClassName.split(/\\s+/)), style: __assign({}, beforeStyle) }, before()),\r\n                react_1.default.createElement(\"div\", { className: classnames_1.default('swiper-slide', selectorPrefix + \"-content\", \r\n                    // @ts-ignore\r\n                    contentClassName.split(/\\s+/)), style: __assign({}, contentStyle) }, children),\r\n                react_1.default.createElement(\"div\", { className: classnames_1.default('swiper-slide', selectorPrefix + \"-after\", \r\n                    // @ts-ignore\r\n                    afterClassName.split(/\\s+/)), style: __assign({}, afterStyle) }, after()))));\r\n    };\r\n    return SwipeOut;\r\n}(react_1.default.Component));\r\nSwipeOut.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    beforeClassName: '',\r\n    beforeStyle: {},\r\n    afterClassName: '',\r\n    afterStyle: {},\r\n    contentClassName: '',\r\n    contentStyle: {},\r\n    beforeShow: false,\r\n    afterShow: false,\r\n    direction: 'horizontal',\r\n    duration: 0,\r\n    before: function () { return null; },\r\n    after: function () { return null; },\r\n};\r\nSwipeOut.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    beforeClassName: prop_types_1.default.string,\r\n    beforeStyle: prop_types_1.default.object,\r\n    afterClassName: prop_types_1.default.string,\r\n    afterStyle: prop_types_1.default.object,\r\n    contentClassName: prop_types_1.default.string,\r\n    contentStyle: prop_types_1.default.object,\r\n    beforeShow: prop_types_1.default.bool,\r\n    afterShow: prop_types_1.default.bool,\r\n    direction: prop_types_1.default.string,\r\n    duration: prop_types_1.default.number,\r\n    before: prop_types_1.default.func,\r\n    after: prop_types_1.default.func,\r\n    onInit: prop_types_1.default.func,\r\n    slideChangeTransitionStart: prop_types_1.default.func,\r\n    slideChangeTransitionEnd: prop_types_1.default.func,\r\n};\r\nexports.default = SwipeOut;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","prop_types_1","classnames_1","swiper_1","selectorPrefix","SwipeOut","_super","_this","ref","createRef","swiper","map","Map","toString","componentDidMount","createSwiper","componentWillReceiveProps","nextProps","props","direction","changeDirection","beforeShow","afterShow","slide","duration","slideTo","get","destroy","_a","initialSlide","current","init","slidesPerView","centeredSlides","spaceBetween","on","trigger","activeIndex","action","params","render","className","style","contentClassName","contentStyle","beforeClassName","beforeStyle","afterClassName","afterStyle","before","after","children","createElement","split","Component","defaultProps","propTypes","string","object","bool","number","func","onInit","slideChangeTransitionStart","slideChangeTransitionEnd"],"mappings":"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"}