"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){e[n=void 0===n?t:n]=r[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(require("react")),classnames_1=__importDefault(require("classnames")),adhere_ui_flexlayout_1=__importDefault(require("@baifendian/adhere-ui-flexlayout")),FlexContext=adhere_ui_flexlayout_1.default.Context,flexLayoutSelectorPrefix=adhere_ui_flexlayout_1.default.selectorPrefix,directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}},selectorPrefix="adhere-ui-splitlayout";function toPoint(e){return Number(e.replace("%",""))/100}var SplitLayout=function(e){var r=e.className,t=void 0===r?"":r,n=e.style,r=void 0===n?{}:n,n=e.maxSize,l=void 0===n?"100%":n,n=e.minSize,c=void 0===n?10:n,u=e.onCanDrag,o=e.onDragStarted,i=e.onDragFinished,s=(e.onOut,e.onChange),v=react_1.useContext(FlexContext).direction,a=react_1.useRef(null),d=react_1.useRef(),m=react_1.useRef(),f=react_1.useRef(),L=react_1.useRef(new Map([[flexLayoutSelectorPrefix+"-fixed_"+flexLayoutSelectorPrefix+"-auto",!0],[flexLayoutSelectorPrefix+"-auto_"+flexLayoutSelectorPrefix+"-fixed",!0]])),_=react_1.useRef(!1),E=react_1.useRef(!1),p=react_1.useRef(!1),x=react_1.useRef(!1),y=react_1.useRef(0),g=react_1.useRef(0),P=react_1.useRef(0),S=react_1.useRef(0),h=react_1.useRef(0);function b(){var e=a.current,t=e.previousElementSibling,n=e.nextElementSibling;return Array.from(L.current.keys()).some(function(e){var r=e.split("_"),e=r[0],r=r[1];return(null==t?void 0:t.classList.contains(e))&&(null==n?void 0:n.classList.contains(r))})}function R(){var e=a.current,r=e.previousElementSibling,e=e.nextElementSibling;return null!=r&&r.classList.contains(flexLayoutSelectorPrefix+"-fixed")?r:e}function D(){var e=a.current,r=e.previousElementSibling,e=e.nextElementSibling;return null!=r&&r.classList.contains(flexLayoutSelectorPrefix+"-auto")?r:e}function w(){return"vertical"===v?"rowResize":"colResize"}function O(){return directionProp[v]}function M(){if(h.current)return h.current;var e=R(),r=D(),t=O().offset;return h.current=e[t]+r[t],h.current}function j(e){var r;null!==(r=a.current)&&void 0!==r&&r.classList.add(selectorPrefix+"-"+w()),E.current=!1,_.current=!0,u&&u(e)}function C(e){var r;null!==(r=a.current)&&void 0!==r&&r.classList.remove(selectorPrefix+"-"+w()),_.current&&(p.current=!0,y.current=e[O().page],S.current=null===(r=d.current)||void 0===r?void 0:r[O().offset],o&&o(e))}function z(e){var r;null!==(r=a.current)&&void 0!==r&&r.classList.add(selectorPrefix+"-"+w()),p.current&&(p.current=!1,x.current=!1,_.current=!E,y.current=0,P.current=P.current+g.current,i&&i(e))}function q(e){p.current&&(p.current=!1,x.current=!1,_.current=!1,y.current=0,P.current+=g.current,i&&i(e))}function B(e){var r,t,n,u,o,i;_.current&&p.current&&(x.current=!0,n=e[O().page],g.current=n-y.current,r="prev"==(null!=(i=a.current.previousElementSibling)&&i.classList.contains(flexLayoutSelectorPrefix+"-fixed")?"prev":"next")?S.current+g.current:S.current-g.current,t=void 0,u=0,o=M(),"string"==typeof l?u=o*toPoint(l):"number"==typeof l&&(u=l),n=o<u?o:u,i=0,o=M(),u=O().offset,u=a[u],"string"==typeof c?i=o*toPoint(c):"number"==typeof c&&(i=c),i=i<u?u:i,n<=r||r<=i?n<=r?t=n:r<=i&&(t=i):t=r,d.current.style[O().dimension]=t+"px",s&&s(e))}function F(e){E.current=!0,p.current||(_.current=!1,s&&s(e))}function N(){var e;null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseenter",j),null!==(e=a.current)&&void 0!==e&&e.addEventListener("mouseenter",j),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousedown",C),null!==(e=a.current)&&void 0!==e&&e.addEventListener("mousedown",C),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=d.current)&&void 0!==e&&e.addEventListener("mousemove",B),null!==(e=a.current)&&void 0!==e&&e.addEventListener("mousemove",B),null!==(e=m.current)&&void 0!==e&&e.addEventListener("mousemove",B),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=d.current)&&void 0!==e&&e.addEventListener("mouseout",F),null!==(e=a.current)&&void 0!==e&&e.addEventListener("mouseout",F),null!==(e=m.current)&&void 0!==e&&e.addEventListener("mouseout",F),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=d.current)&&void 0!==e&&e.addEventListener("mouseup",z),null!==(e=a.current)&&void 0!==e&&e.addEventListener("mouseup",z),null!==(e=m.current)&&void 0!==e&&e.addEventListener("mouseup",z),null!==(e=f.current)&&void 0!==e&&e.removeEventListener("mouseleave",q),null!==(e=f.current)&&void 0!==e&&e.addEventListener("mouseleave",q)}function k(){var e;null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseenter",j),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseenter",j),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousedown",C),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousedown",C),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mousemove",B),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseout",F),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=d.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=a.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=m.current)&&void 0!==e&&e.removeEventListener("mouseup",z),null!==(e=f.current)&&void 0!==e&&e.removeEventListener("mouseleave",q),null!==(e=f.current)&&void 0!==e&&e.removeEventListener("mouseleave",q)}return react_1.useLayoutEffect(function(){var e;return b()&&(d.current=R(),m.current=D(),f.current=null===(e=a.current)||void 0===e?void 0:e.parentElement,f.current.classList.add(selectorPrefix+"-noSelect"),N()),k},[]),react_1.useLayoutEffect(function(){return b()&&(_.current=!1,E.current=!1,p.current=!1,x.current=!1,y.current=0,g.current=0,P.current=0,S.current=0,h.current=0,d.current=R(),m.current=D(),N()),k}),react_1.default.createElement("div",{ref:a,className:classnames_1.default(selectorPrefix,selectorPrefix+"-"+v,t||""),style:r||{}})};exports.default=SplitLayout;
//# sourceMappingURL=splitlayout.js.map
