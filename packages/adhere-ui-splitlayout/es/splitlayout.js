import classNames from"classnames";import React,{memo,useContext,useLayoutEffect,useRef}from"react";import FlexLayout from"@baifendian/adhere-ui-flexlayout";import*as TRBLC from"./TRBLC";var FlexContext=FlexLayout.Context,flexLayoutSelectorPrefix=FlexLayout.selectorPrefix,directionProp={horizontal:{page:"pageX",dimension:"width",offset:"offsetWidth"},vertical:{page:"pageY",dimension:"height",offset:"offsetHeight"}},selectorPrefix="adhere-ui-splitlayout";function toPoint(e){return Number(e.replace("%",""))/100}var SplitLayout=function(e){var n=e.className,n=void 0===n?"":n,r=e.style,r=void 0===r?{}:r,l=e.maxSize,c=void 0===l?"100%":l,l=e.minSize,i=void 0===l?10:l,t=e.onCanDrag,u=e.onDragStarted,o=e.onDragFinished,s=e.onChange,v=useContext(FlexContext).direction,a=(console.log("direction=====",v),useRef(null)),m=useRef(null),d=useRef(null),f=useRef(),k=useRef(new Map([["".concat(flexLayoutSelectorPrefix,"-fixed_").concat(flexLayoutSelectorPrefix,"-auto"),!0],["".concat(flexLayoutSelectorPrefix,"-auto_").concat(flexLayoutSelectorPrefix,"-fixed"),!0]])),L=useRef(!1),E=useRef(!1),p=useRef(!1),x=useRef(!1),y=useRef(0),S=useRef(0),g=useRef(0),P=useRef(0),R=useRef(0);function b(){var e=a.current,r=e.previousElementSibling,l=e.nextElementSibling;return Array.from(k.current.keys()).some(function(e){var e=e.split("_"),n=e[0],e=e[1];return(null==r?void 0:r.classList.contains(n))&&(null==l?void 0:l.classList.contains(e))})}function C(){var e=a.current,n=e.previousElementSibling,e=e.nextElementSibling;return null!=n&&n.classList.contains("".concat(flexLayoutSelectorPrefix,"-fixed"))?n:e}function h(){var e=a.current,n=e.previousElementSibling,e=e.nextElementSibling;return null!=n&&n.classList.contains("".concat(flexLayoutSelectorPrefix,"-auto"))?n:e}function w(){return"vertical"===v?"row-resize":"col-resize"}function F(){return directionProp[v]}function z(){var e,n,r;return R.current||(e=C(),n=h(),r=F().offset,R.current=e[r]+n[r]),R.current}function N(e){var n;null!=(n=a.current)&&n.classList.add("".concat(selectorPrefix,"-").concat(w())),E.current=!1,L.current=!0,t&&t(e)}function B(e){var n;null!=(n=a.current)&&n.classList.remove("".concat(selectorPrefix,"-").concat(w())),L.current&&(p.current=!0,y.current=e[F().page],P.current=null==(n=m.current)?void 0:n[F().offset],u)&&u(e)}function T(e){var n;null!=(n=a.current)&&n.classList.add("".concat(selectorPrefix,"-").concat(w())),p.current&&(p.current=!1,x.current=!1,L.current=!E,y.current=0,g.current=g.current+S.current,o)&&o(e)}function W(e){p.current&&(p.current=!1,x.current=!1,L.current=!1,y.current=0,g.current+=S.current,o)&&o(e)}function D(e){var n,r,l,t,u,o;L.current&&p.current&&(x.current=!0,o=e[F().page],S.current=o-y.current,o="prev"==(null!=(o=a.current.previousElementSibling)&&o.classList.contains("".concat(flexLayoutSelectorPrefix,"-fixed"))?"prev":"next")?P.current+S.current:P.current-S.current,n=void 0,t=0,u=z(),"string"==typeof c?t=u*toPoint(c):"number"==typeof c&&(t=c),u=u<t?u:t,t=0,r=z(),l=F().offset,l=a[l],"string"==typeof i?t=r*toPoint(i):"number"==typeof i&&(t=i),r=t<l?l:t,u<=o||o<=r?u<=o?n=u:o<=r&&(n=r):n=o,m.current.style[F().dimension]="".concat(n,"px"),s)&&s(e)}function _(e){E.current=!0,p.current||(L.current=!1,s&&s(e))}function A(){var e,n;null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mouseenter",N),null!=(n=null==(e=a.current)?void 0:e.addEventListener)&&n.call(e,"mouseenter",N),null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mousedown",B),null!=(n=null==(e=a.current)?void 0:e.addEventListener)&&n.call(e,"mousedown",B),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=m.current)?void 0:e.addEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=a.current)?void 0:n.addEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=d.current)?void 0:e.addEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=m.current)?void 0:e.addEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=a.current)?void 0:n.addEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=d.current)?void 0:e.addEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=m.current)?void 0:e.addEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=a.current)?void 0:n.addEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=d.current)?void 0:e.addEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=f.current)?void 0:n.removeEventListener)&&e.call(n,"mouseleave",W),null!=(n=null==(e=f.current)?void 0:e.addEventListener)&&n.call(e,"mouseleave",W)}function H(){var e,n;null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mouseenter",N),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mouseenter",N),null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mousedown",B),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mousedown",B),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=m.current)?void 0:e.removeEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mousemove",D),null!=(n=null==(e=d.current)?void 0:e.removeEventListener)&&n.call(e,"mousemove",D),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=m.current)?void 0:e.removeEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mouseout",_),null!=(n=null==(e=d.current)?void 0:e.removeEventListener)&&n.call(e,"mouseout",_),null!=(e=null==(n=m.current)?void 0:n.removeEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=a.current)?void 0:e.removeEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=d.current)?void 0:n.removeEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=m.current)?void 0:e.removeEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=a.current)?void 0:n.removeEventListener)&&e.call(n,"mouseup",T),null!=(n=null==(e=d.current)?void 0:e.removeEventListener)&&n.call(e,"mouseup",T),null!=(e=null==(n=f.current)?void 0:n.removeEventListener)&&e.call(n,"mouseleave",W),null!=(n=null==(e=f.current)?void 0:e.removeEventListener)&&n.call(e,"mouseleave",W)}return useLayoutEffect(function(){var e;return b()&&(m.current=C(),d.current=h(),f.current=null==(e=a.current)?void 0:e.parentElement,f.current.classList.add("".concat(selectorPrefix,"-no-select")),A()),H},[]),useLayoutEffect(function(){return b()&&(L.current=!1,E.current=!1,p.current=!1,x.current=!1,y.current=0,S.current=0,g.current=0,P.current=0,R.current=0,m.current=C(),d.current=h(),A()),H}),React.createElement("div",{ref:a,className:classNames(selectorPrefix,"".concat(selectorPrefix,"-").concat(v),null!=n?n:""),style:null!=r?r:{}})},SplitLayoutWrap=memo(SplitLayout);SplitLayoutWrap.TRBLC=TRBLC;export default SplitLayoutWrap;
//# sourceMappingURL=splitlayout.js.map
