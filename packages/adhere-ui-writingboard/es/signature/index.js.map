{"version":3,"file":"index.js","sources":["signature/index.js"],"sourcesContent":["import _Button from \"antd/es/button\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { forwardRef, memo, useCallback, useImperativeHandle, useRef } from 'react';\nimport MessageDialog from '@baifendian/adhere-ui-messagedialog';\nimport Intl from '@baifendian/adhere-util-intl';\nimport SignatureCore from './SignatureCore';\nvar selectorPrefix = 'adhere-ui-signature';\nvar emptyStr = 'data:image/png;base64,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';\n/**\n * Signature\n * @param props\n * @param ref\n * @constructor\n */\nvar Signature = function Signature(_a, ref) {\n  var className = _a.className,\n    style = _a.style,\n    value = _a.value,\n    onChange = _a.onChange,\n    modalProps = _a.modalProps,\n    coreProps = _a.coreProps;\n  var coreRef = useRef(null);\n  var renderMask = useCallback(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-mask\")),\n      onClick: function onClick() {\n        var dialog = MessageDialog.Modal({\n          config: __assign({\n            title: Intl.v('编辑签名'),\n            width: '60%',\n            maskClosable: false,\n            footer: [/*#__PURE__*/React.createElement(_Button, {\n              key: \"submit\",\n              type: \"primary\",\n              title: Intl.v('保存'),\n              onClick: function onClick() {\n                if (!coreRef.current) return;\n                var base64 = coreRef.current.save();\n                if (onChange) {\n                  onChange(base64);\n                  dialog.close();\n                }\n              }\n            }, Intl.v('保存'))]\n          }, modalProps || {}),\n          children: /*#__PURE__*/React.createElement(SignatureCore, __assign({\n            ref: coreRef\n          }, coreProps))\n        });\n      }\n    }, Intl.v('编辑签名'));\n  }, [coreProps, value, onChange]);\n  var renderInner = useCallback(function () {\n    return value ? /*#__PURE__*/React.createElement(\"img\", {\n      src: value,\n      alt: \"\"\n    }) : null;\n  }, [value]);\n  useImperativeHandle(ref, function () {\n    return {\n      isEmpty: function isEmpty(value) {\n        if (!value) return true;\n        return value === emptyStr;\n      }\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className),\n    style: style || {}\n  }, renderMask(), renderInner());\n};\nexport default /*#__PURE__*/memo( /*#__PURE__*/forwardRef(Signature));"],"names":["_Button","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","React","forwardRef","memo","useCallback","useImperativeHandle","useRef","MessageDialog","Intl","SignatureCore","selectorPrefix","emptyStr","Signature","_a","ref","className","style","value","onChange","modalProps","coreProps","coreRef","renderMask","createElement","concat","onClick","dialog","Modal","config","title","v","width","maskClosable","footer","key","type","base64","current","save","close","children","renderInner","src","alt","isEmpty"],"mappings":"OAAOA,YAAa,iBACpB,IAAIC,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACOO,eAAgB,oBAChBC,OAASC,WAAYC,KAAMC,YAAaC,oBAAqBC,MAAqB,KAAP,eAC3EC,kBAAmB,6CACnBC,SAAU,sCACVC,kBAAmB,kBAC1B,IAAIC,eAAiB,sBACjBC,SAAW,yyKAOXC,UAAY,SAAmBC,EAAIC,GACrC,IAAIC,EAAYF,EAAGE,UACjBC,EAAQH,EAAGG,MACXC,EAAQJ,EAAGI,MACXC,EAAWL,EAAGK,SACdC,EAAaN,EAAGM,WAChBC,EAAYP,EAAGO,UACbC,EAAUf,OAAO,IAAI,EACrBgB,EAAalB,YAAY,WAC3B,OAAoBH,MAAMsB,cAAc,MAAO,CAC7CR,UAAWf,WAAW,GAAGwB,OAAOd,eAAgB,OAAO,CAAC,EACxDe,QAAS,WACP,IAAIC,EAASnB,cAAcoB,MAAM,CAC/BC,OAAQ3C,SAAS,CACf4C,MAAOrB,KAAKsB,EAAE,MAAM,EACpBC,MAAO,MACPC,aAAc,CAAA,EACdC,OAAQ,CAAchC,MAAMsB,cAAcvC,QAAS,CACjDkD,IAAK,SACLC,KAAM,UACNN,MAAOrB,KAAKsB,EAAE,IAAI,EAClBL,QAAS,WACP,IACIW,EADCf,EAAQgB,UACTD,EAASf,EAAQgB,QAAQC,KAAK,EAC9BpB,KACFA,EAASkB,CAAM,EACfV,EAAOa,MAAM,EAEjB,CACF,EAAG/B,KAAKsB,EAAE,IAAI,CAAC,EACjB,EAAGX,GAAc,EAAE,EACnBqB,SAAuBvC,MAAMsB,cAAcd,cAAexB,SAAS,CACjE6B,IAAKO,CACP,EAAGD,CAAS,CAAC,CACf,CAAC,CACH,CACF,EAAGZ,KAAKsB,EAAE,MAAM,CAAC,CACnB,EAAG,CAACV,EAAWH,EAAOC,EAAS,EAC3BuB,EAAcrC,YAAY,WAC5B,OAAOa,EAAqBhB,MAAMsB,cAAc,MAAO,CACrDmB,IAAKzB,EACL0B,IAAK,EACP,CAAC,EAAI,IACP,EAAG,CAAC1B,EAAM,EASV,OARAZ,oBAAoBS,EAAK,WACvB,MAAO,CACL8B,QAAS,SAAiB3B,GACxB,MAAKA,CAAAA,GACEA,IAAUN,QACnB,CACF,CACF,CAAC,EACmBV,MAAMsB,cAAc,MAAO,CAC7CR,UAAWf,WAAWU,eAAgBK,CAAS,EAC/CC,MAAOA,GAAS,EAClB,EAAGM,EAAW,EAAGmB,EAAY,CAAC,CAChC,iBAC4BtC,KAAmBD,WAAWU,SAAS,CAAC"}