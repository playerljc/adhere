{"version":3,"file":"index.js","sources":["signature/index.js"],"sourcesContent":["import _Button from \"antd/es/button\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport React, { forwardRef, memo, useCallback, useImperativeHandle, useRef } from 'react';\nimport MessageDialog from '@baifendian/adhere-ui-messagedialog';\nimport Intl from '@baifendian/adhere-util-intl';\nimport SignatureCore from './SignatureCore';\nvar selectorPrefix = 'adhere-ui-signature';\n/**\n * Signature\n * @param props\n * @param ref\n * @constructor\n */\nvar InternalSignature = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function (_a, ref) {\n  var className = _a.className,\n    style = _a.style,\n    value = _a.value,\n    onChange = _a.onChange,\n    modalProps = _a.modalProps,\n    coreProps = _a.coreProps;\n  var coreRef = useRef(null);\n  var renderMask = useCallback(function () {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-mask\")),\n      onClick: function () {\n        var dialog = MessageDialog.Modal({\n          config: __assign({\n            title: Intl.v('编辑签名'),\n            width: '60%',\n            maskClosable: false,\n            footer: [/*#__PURE__*/React.createElement(_Button, {\n              key: \"submit\",\n              type: \"primary\",\n              title: Intl.v('保存'),\n              onClick: function () {\n                if (!coreRef.current) return;\n                var isEmpty = coreRef.current.isEmpty();\n                if (isEmpty) {\n                  if (onChange) {\n                    onChange('');\n                    dialog === null || dialog === void 0 ? void 0 : dialog.close();\n                  }\n                  return;\n                }\n                var base64 = coreRef.current.save();\n                if (onChange) {\n                  onChange(base64);\n                  dialog === null || dialog === void 0 ? void 0 : dialog.close();\n                }\n              }\n            }, Intl.v('保存'))]\n          }, modalProps !== null && modalProps !== void 0 ? modalProps : {}),\n          children: /*#__PURE__*/React.createElement(SignatureCore, __assign({\n            ref: coreRef\n          }, coreProps))\n        });\n      }\n    }, Intl.v('编辑签名'));\n  }, [coreProps, value, onChange]);\n  var renderInner = useCallback(function () {\n    return value ? /*#__PURE__*/React.createElement(\"img\", {\n      src: value,\n      alt: \"\"\n    }) : null;\n  }, [value]);\n  useImperativeHandle(ref, function () {\n    return {\n      isEmpty: function () {\n        return !value;\n      }\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {}\n  }, renderMask(), renderInner());\n}));\nvar Signature = InternalSignature;\nSignature.SignatureCore = SignatureCore;\nexport default Signature;"],"names":["_Button","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","React","forwardRef","memo","useCallback","useImperativeHandle","useRef","MessageDialog","Intl","SignatureCore","selectorPrefix","InternalSignature","_a","ref","className","style","value","onChange","modalProps","coreProps","coreRef","renderMask","createElement","concat","onClick","dialog","Modal","config","title","v","width","maskClosable","footer","key","type","base64","current","isEmpty","close","save","children","renderInner","src","alt","Signature"],"mappings":"OAAOA,YAAa,iBACpB,IAAIC,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACOO,eAAgB,oBAChBC,OAASC,WAAYC,KAAMC,YAAaC,oBAAqBC,MAAqB,KAAP,eAC3EC,kBAAmB,6CACnBC,SAAU,sCACVC,kBAAmB,kBAC1B,IAAIC,eAAiB,sBAOjBC,kBAAiCR,KAAmBD,WAAW,SAAUU,EAAIC,GAC/E,IAAIC,EAAYF,EAAGE,UACjBC,EAAQH,EAAGG,MACXC,EAAQJ,EAAGI,MACXC,EAAWL,EAAGK,SACdC,EAAaN,EAAGM,WAChBC,EAAYP,EAAGO,UACbC,EAAUd,OAAO,IAAI,EACrBe,EAAajB,YAAY,WAC3B,OAAoBH,MAAMqB,cAAc,MAAO,CAC7CR,UAAWd,WAAW,GAAGuB,OAAOb,eAAgB,OAAO,CAAC,EACxDc,QAAS,WACP,IAAIC,EAASlB,cAAcmB,MAAM,CAC/BC,OAAQ1C,SAAS,CACf2C,MAAOpB,KAAKqB,EAAE,MAAM,EACpBC,MAAO,MACPC,aAAc,CAAA,EACdC,OAAQ,CAAc/B,MAAMqB,cAActC,QAAS,CACjDiD,IAAK,SACLC,KAAM,UACNN,MAAOpB,KAAKqB,EAAE,IAAI,EAClBL,QAAS,WACP,IASIW,EATCf,EAAQgB,UACChB,EAAQgB,QAAQC,QAAQ,EAEhCpB,IACFA,EAAS,EAAE,EACXQ,MAAAA,IAAgDA,EAAOa,MAAM,GAI7DH,EAASf,EAAQgB,QAAQG,KAAK,EAC9BtB,IACFA,EAASkB,CAAM,EACfV,MAAAA,IAAgDA,EAAOa,MAAM,GAEjE,CACF,EAAG9B,KAAKqB,EAAE,IAAI,CAAC,EACjB,EAAGX,MAAAA,EAA+CA,EAAa,EAAE,EACjEsB,SAAuBvC,MAAMqB,cAAcb,cAAexB,SAAS,CACjE4B,IAAKO,CACP,EAAGD,CAAS,CAAC,CACf,CAAC,CACH,CACF,EAAGX,KAAKqB,EAAE,MAAM,CAAC,CACnB,EAAG,CAACV,EAAWH,EAAOC,EAAS,EAC3BwB,EAAcrC,YAAY,WAC5B,OAAOY,EAAqBf,MAAMqB,cAAc,MAAO,CACrDoB,IAAK1B,EACL2B,IAAK,EACP,CAAC,EAAI,IACP,EAAG,CAAC3B,EAAM,EAQV,OAPAX,oBAAoBQ,EAAK,WACvB,MAAO,CACLwB,QAAS,WACP,MAAO,CAACrB,CACV,CACF,CACF,CAAC,EACmBf,MAAMqB,cAAc,MAAO,CAC7CR,UAAWd,WAAWU,eAAgBI,MAAAA,EAA6CA,EAAY,EAAE,EACjGC,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGM,EAAW,EAAGoB,EAAY,CAAC,CAChC,CAAC,CAAC,EACEG,UAAYjC,kBAChBiC,UAAUnC,cAAgBA,6BACXmC"}