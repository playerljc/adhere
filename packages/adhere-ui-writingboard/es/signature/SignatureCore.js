import _Button from"antd/es/button";import _InputNumber from"antd/es/input-number";import _Space from"antd/es/space";import _Card from"antd/es/card";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};import{useUpdateEffect}from"ahooks";import React,{forwardRef,memo,useImperativeHandle,useMemo,useRef,useState}from"react";import{CompactPicker}from"react-color";import FlexLayout from"@baifendian/adhere-ui-flexlayout";import Intl from"@baifendian/adhere-util-intl";import WritingBoard from"../WritingBoard";import{Mode}from"../types";var selectorPrefix="adhere-ui-signature-core",Signature=memo(forwardRef(function(e,t){var r=e.wrapProps,n=e.toolProps,a=e.areaProps,o=e.defaultWidth,i=e.defaultColor,e=useState(Mode.FREE),u=e[0],c=e[1],e=useState(null!=i?i:"#000"),l=e[0],s=e[1],e=useState(null!=o?o:2),f=e[0],m=e[1],d=useRef(),e=useMemo(function(){return{gutter:20,wrapClassName:"".concat(selectorPrefix,"-wrap")}},[]),p=useMemo(function(){return{fit:!0}},[]),_=useMemo(function(){return{autoFixed:!0}},[]),g=useMemo(function(){return React.createElement(_Card,null,React.createElement(_Space,{direction:"vertical",size:20},React.createElement(_InputNumber,{style:{width:"100%"},value:f,precision:0,max:10,min:1,onChange:function(e){m(e),d.current&&d.current.setLineWidth(e)}}),React.createElement(CompactPicker,{color:l,onChangeComplete:function(e){s(e.hex),d.current&&d.current.setStrokeStyle(e.hex)}}),React.createElement(_Button,{size:"large",block:!0,type:"primary",onClick:function(){var e;d.current&&(e=u===Mode.FREE?Mode.RUBBER:Mode.FREE,c(e),d.current.setMode(e))}},u===Mode.FREE?Intl.v("橡皮"):Intl.v("绘制")),React.createElement(_Button,{size:"large",block:!0,type:"primary",onClick:function(){d.current&&d.current.clear()}},Intl.v("清除"))))},[u,f,l,n]),E=useMemo(function(){return React.createElement(_Card,null,React.createElement(WritingBoard,{ref:d,defaultMode:u,defaultLineWidth:f,defaultStrokeStyle:l}))},[a]);return useImperativeHandle(t,function(){return{save:function(e,t,r){if(d.current)return d.current.toDataURL(null!=e?e:"#fff",null!=t?t:"image/png",null!=r?r:1)},isEmpty:function(){var e,t;return null==d||!d.current||(null==(t=null==(e=null==d?void 0:d.current)?void 0:e.isEmpty)?void 0:t.call(e))}}}),useUpdateEffect(function(){m(o)},[o]),useUpdateEffect(function(){s(i)},[i]),React.createElement(FlexLayout.TRBLC.LCLayout,__assign({},e,r,{lProps:__assign(__assign(__assign({},p),n),{children:g}),cProps:__assign(__assign(__assign({},_),a),{children:E})}))}));Signature.displayName="Signature";export default Signature;
//# sourceMappingURL=SignatureCore.js.map
