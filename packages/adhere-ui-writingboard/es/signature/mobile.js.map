{"version":3,"file":"mobile.js","sources":["signature/mobile.js"],"sourcesContent":["import _Modal from \"@baifendian/adhere-mobile-ui-anthoc/es/modal\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport SignatureCore from './MobileSignatureCore';\nimport classNames from 'classnames';\nimport React, { forwardRef, memo, useCallback, useImperativeHandle, useRef } from 'react';\nimport Intl from '@baifendian/adhere-util-intl';\nvar selectorPrefix = 'adhere-ui-mobile-signature';\n/**\n * MobileSignature\n * @param props\n * @param ref\n */\nvar InternalMobileSignature = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function (_a, ref) {\n  var className = _a.className,\n    style = _a.style,\n    value = _a.value,\n    onChange = _a.onChange,\n    modalProps = _a.modalProps,\n    coreProps = _a.coreProps;\n  var coreRef = useRef(null);\n  var renderMask = useCallback(function () {\n    return /*#__PURE__*/React.createElement(_Modal.TriggerPrompt, {\n      title: Intl.v('编辑签名'),\n      popoverTriggerProps: {\n        renderTrigger: function () {\n          return value ? ( /*#__PURE__*/React.createElement(\"img\", {\n            src: value,\n            alt: \"\"\n          })) : ( /*#__PURE__*/React.createElement(\"div\", {\n            className: classNames(\"\".concat(selectorPrefix, \"-mask\"))\n          }, Intl.v('编辑签名')));\n        }\n      },\n      actions: [{\n        key: 'submit',\n        text: Intl.v('保存'),\n        primary: true,\n        onClick: function () {\n          return new Promise(function (resolve) {\n            if (!coreRef.current) return;\n            var isEmpty = coreRef.current.isEmpty();\n            if (isEmpty) {\n              if (onChange) onChange('');\n              resolve('');\n              return;\n            }\n            var base64 = coreRef.current.save();\n            if (onChange) onChange(base64);\n            resolve(base64);\n          });\n        }\n      }]\n    }, /*#__PURE__*/React.createElement(SignatureCore, __assign({\n      ref: coreRef\n    }, coreProps)));\n  }, [coreProps, value, onChange]);\n  useImperativeHandle(ref, function () {\n    return {\n      isEmpty: function () {\n        return !value;\n      }\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {}\n  }, renderMask());\n}));\nvar MobileSignature = InternalMobileSignature;\nMobileSignature.SignatureCore = SignatureCore;\nexport default MobileSignature;"],"names":["_Modal","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","SignatureCore","classNames","React","forwardRef","memo","useCallback","useImperativeHandle","useRef","Intl","selectorPrefix","InternalMobileSignature","_a","ref","className","style","value","onChange","coreProps","modalProps","coreRef","renderMask","createElement","TriggerPrompt","title","v","popoverTriggerProps","renderTrigger","src","alt","concat","actions","key","text","primary","onClick","Promise","resolve","base64","current","isEmpty","save","MobileSignature"],"mappings":"OAAOA,WAAY,+CACnB,IAAIC,SAAWC,MAAQA,KAAKD,UAAY,WAQtC,OAPAA,SAAWE,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMb,KAAMO,SAAS,CACvC,SACOO,kBAAmB,+BACnBC,eAAgB,oBAChBC,OAASC,WAAYC,KAAMC,YAAaC,oBAAqBC,MAAqB,KAAP,eAC3EC,SAAU,+BACjB,IAAIC,eAAiB,6BAMjBC,wBAAuCN,KAAmBD,WAAW,SAAUQ,EAAIC,GACrF,IAAIC,EAAYF,EAAGE,UACjBC,EAAQH,EAAGG,MACXC,EAAQJ,EAAGI,MACXC,EAAWL,EAAGK,SAEdC,GADaN,EAAGO,WACJP,EAAGM,WACbE,EAAUZ,OAAO,IAAI,EACrBa,EAAaf,YAAY,WAC3B,OAAoBH,MAAMmB,cAAcrC,OAAOsC,cAAe,CAC5DC,MAAOf,KAAKgB,EAAE,MAAM,EACpBC,oBAAqB,CACnBC,cAAe,WACb,OAAOX,EAAuBb,MAAMmB,cAAc,MAAO,CACvDM,IAAKZ,EACLa,IAAK,EACP,CAAE,EAAmB1B,MAAMmB,cAAc,MAAO,CAC9CR,UAAWZ,WAAW,GAAG4B,OAAOpB,eAAgB,OAAO,CAAC,CAC1D,EAAGD,KAAKgB,EAAE,MAAM,CAAE,CACpB,CACF,EACAM,QAAS,CAAC,CACRC,IAAK,SACLC,KAAMxB,KAAKgB,EAAE,IAAI,EACjBS,QAAS,CAAA,EACTC,QAAS,WACP,OAAO,IAAIC,QAAQ,SAAUC,GAC3B,IAOIC,EAPClB,EAAQmB,UACCnB,EAAQmB,QAAQC,QAAQ,GAEhCvB,GAAUA,EAAS,EAAE,EACzBoB,EAAQ,EAAE,IAGRC,EAASlB,EAAQmB,QAAQE,KAAK,EAC9BxB,GAAUA,EAASqB,CAAM,EAC7BD,EAAQC,CAAM,GAChB,CAAC,CACH,CACF,EACF,EAAgBnC,MAAMmB,cAAcrB,cAAef,SAAS,CAC1D2B,IAAKO,CACP,EAAGF,CAAS,CAAC,CAAC,CAChB,EAAG,CAACA,EAAWF,EAAOC,EAAS,EAQ/B,OAPAV,oBAAoBM,EAAK,WACvB,MAAO,CACL2B,QAAS,WACP,MAAO,CAACxB,CACV,CACF,CACF,CAAC,EACmBb,MAAMmB,cAAc,MAAO,CAC7CR,UAAWZ,WAAWQ,eAAgBI,MAAAA,EAA6CA,EAAY,EAAE,EACjGC,MAAOA,MAAAA,EAAqCA,EAAQ,EACtD,EAAGM,EAAW,CAAC,CACjB,CAAC,CAAC,EACEqB,gBAAkB/B,wBACtB+B,gBAAgBzC,cAAgBA,6BACjByC"}