{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport classNames from 'classnames';\nimport debounce from 'lodash.debounce';\nimport React, { forwardRef, memo, useImperativeHandle, useLayoutEffect, useRef } from 'react';\nimport Util from '@baifendian/adhere-util';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport Signature from './signature';\nimport { Mode } from './types';\nvar selectorPrefix = 'adhere-ui-writingboard';\n/**\n * WritingBoard\n * @param props\n * @param ref\n * @constructor\n */\nvar WritingBoard = function WritingBoard(props, ref) {\n  var _a = props.defaultMode,\n    defaultMode = _a === void 0 ? Mode.FREE : _a,\n    _b = props.defaultLineWidth,\n    defaultLineWidth = _b === void 0 ? 2 : _b,\n    _c = props.defaultStrokeStyle,\n    defaultStrokeStyle = _c === void 0 ? '#000' : _c,\n    _d = props.resizeTime,\n    resizeTime = _d === void 0 ? 300 : _d;\n  var containerRef = useRef(null);\n  var canvasRef = useRef(null);\n  var ctx = useRef(null);\n  var ro = useRef(null);\n  var startPoint = useRef(null);\n  var prePoint = useRef(null);\n  var curShape = useRef(defaultMode);\n  var lineWidth = useRef(defaultLineWidth);\n  var strokeStyle = useRef(defaultStrokeStyle);\n  var stack = useRef([]);\n  var stackIndex = useRef(0);\n  var config = useRef(new Map([\n  // 自由模式\n  [Mode.FREE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e;\n      var sourcePoint = _a.sourcePoint,\n        targetPoint = _a.targetPoint;\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\n      stack.current.push({\n        shape: curShape.current,\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      draw({\n        sourcePoint: prePoint.current,\n        targetPoint: point\n      });\n    }\n  }],\n  // 直线\n  [Mode.LINE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x, (_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y);\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.lineTo(targetPoint.x, targetPoint.y);\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        sourcePoint: startPoint.current,\n        targetPoint: point\n      });\n    }\n  }],\n  // 矩形\n  [Mode.RECTANGLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      // 判断target在start的四个方向\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - ((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x)), Math.abs(targetPoint.y - ((_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y)));\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.rect(item.x, item.y, item.width, item.height);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b, _c, _d;\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        x: rectStart.x,\n        y: rectStart.y,\n        width: Math.abs(point.x - ((_c = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _c === void 0 ? void 0 : _c.x)),\n        height: Math.abs(point.y - ((_d = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _d === void 0 ? void 0 : _d.y))\n      });\n    }\n  }],\n  // 圆形\n  [Mode.CIRCLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      // 判断target在start的四个方向\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      var radius = getDistanceByBetweenPoint({\n        p2: targetPoint,\n        p1: startPoint.current\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.ellipse(rectStart.x, rectStart.y, radius, radius, 45 * Math.PI / 180, 0, 2 * Math.PI);\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      var center = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      var radius = getDistanceByBetweenPoint({\n        p2: point,\n        p1: startPoint === null || startPoint === void 0 ? void 0 : startPoint.current\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        x: center.x,\n        y: center.y,\n        radiusX: radius,\n        radiusY: radius,\n        rotation: 45 * Math.PI / 180,\n        startAngle: 0,\n        endAngle: 2 * Math.PI\n      });\n    }\n  }],\n  // 三角形(多边形)\n  [Mode.TRIANGLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      var points = triangle({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo(points[0].x, points[0].y);\n      (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.lineTo(points[1].x, points[1].y);\n      (_h = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _h === void 0 ? void 0 : _h.lineTo(points[2].x, points[2].y);\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.closePath();\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d, _e, _f;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.points[0].x, item.points[0].y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.points[1].x, item.points[1].y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(item.points[2].x, item.points[2].y);\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.closePath();\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      var points = triangle({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        points: points\n      });\n    }\n  }],\n  // 橡皮\n  [Mode.RUBBER, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e;\n      var sourcePoint = _a.sourcePoint,\n        targetPoint = _a.targetPoint;\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\n      stack.current.push({\n        shape: curShape.current,\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n      ctx.current.lineWidth = 15;\n      ctx.current.strokeStyle = '#fff';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineJoin = 'round';\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      ctx.current.lineWidth = 15;\n      ctx.current.strokeStyle = '#fff';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineJoin = 'round';\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      draw({\n        sourcePoint: prePoint.current,\n        targetPoint: point\n      });\n    }\n  }]]));\n  /**\n   * style\n   * @param lineWidth\n   * @param strokeStyle\n   */\n  function style(_a) {\n    var lineWidth = _a.lineWidth,\n      strokeStyle = _a.strokeStyle;\n    ctx.current.lineWidth = lineWidth;\n    ctx.current.strokeStyle = strokeStyle;\n    ctx.current.lineCap = 'round';\n    ctx.current.lineJoin = 'round';\n  }\n  /**\n   * triangle - 获取三角形的三个点坐标\n   * @param startPoint\n   * @param targetPoint\n   */\n  function triangle(_a) {\n    var startPoint = _a.startPoint,\n      targetPoint = _a.targetPoint;\n    var s = getPoint({\n      startPoint: startPoint,\n      targetPoint: targetPoint\n    });\n    var w = Math.abs(targetPoint.x - startPoint.x);\n    var h = Math.abs(targetPoint.y - startPoint.y);\n    var point1 = {\n      x: s.x,\n      y: s.y + h\n    };\n    var point2 = {\n      x: s.x + w / 2,\n      y: s.y\n    };\n    var point3 = {\n      x: s.x + w,\n      y: s.y + h\n    };\n    return [point1, point2, point3];\n  }\n  /**\n   * devicePointToCanvasPoint\n   * @param clientX\n   * @param clientY\n   */\n  function devicePointToCanvasPoint(_a) {\n    var _b;\n    var clientX = _a.clientX,\n      clientY = _a.clientY;\n    var _c = (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect(),\n      x = _c.x,\n      y = _c.y;\n    return {\n      x: clientX - x,\n      y: clientY - y\n    };\n  }\n  /**\n   * getDistanceByBetweenPoint\n   * @description 获取p1,p2两点间的距离\n   * @param p1\n   * @param p2\n   */\n  function getDistanceByBetweenPoint(_a) {\n    var p1 = _a.p1,\n      p2 = _a.p2;\n    var Ax1 = p1.x,\n      Ay1 = p1.y;\n    var Ax2 = p2.x,\n      Ay2 = p2.y;\n    return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\n  }\n  /**\n   * drawStack\n   */\n  function drawStack() {\n    for (var i = 0; i < stack.current.length; i++) {\n      var item = stack.current[i];\n      config.current.get(item.shape).drawStack(item);\n    }\n  }\n  /**\n   * getPoint\n   * @param startPoint\n   * @param targetPoint\n   */\n  function getPoint(_a) {\n    var startPoint = _a.startPoint,\n      targetPoint = _a.targetPoint;\n    if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\n      // leftTop\n      return targetPoint;\n    } else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\n      // leftBottom\n      return {\n        x: targetPoint.x,\n        y: startPoint.y\n      };\n    } else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\n      // rightTop\n      return {\n        x: startPoint.x,\n        y: targetPoint.y\n      };\n    } else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\n      // rightBottom\n      return startPoint;\n    }\n  }\n  /**\n   * draw\n   * @param sourcePoint\n   * @param targetPoint\n   */\n  function draw(_a) {\n    var _b;\n    var sourcePoint = _a.sourcePoint,\n      targetPoint = _a.targetPoint;\n    var entry = (_b = config === null || config === void 0 ? void 0 : config.current) === null || _b === void 0 ? void 0 : _b.get(curShape.current);\n    entry.draw({\n      sourcePoint: sourcePoint,\n      targetPoint: targetPoint\n    });\n  }\n  // 注册事件\n  function onMousemove(e) {\n    move(e);\n  }\n  function onTouchmove(e) {\n    move(__assign(__assign({}, e), {\n      clientX: e.targetTouches[0].clientX,\n      clientY: e.targetTouches[0].clientY\n    }));\n  }\n  function onMouseup(e) {\n    end(e);\n  }\n  function onTouchend(e) {\n    end(__assign(__assign({}, e), {\n      clientX: e.changedTouches[0].clientX,\n      clientY: e.changedTouches[0].clientY\n    }));\n  }\n  /**\n   * start\n   * @param e\n   */\n  function start(e) {\n    var _a, _b, _c, _d;\n    // 屏幕坐标转换成canvas坐标\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    startPoint.current = prePoint.current = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousemove', onMousemove);\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseup', onMouseup);\n    (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchmove', onTouchmove);\n    (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.addEventListener('touchend', onTouchend);\n  }\n  /**\n   * move\n   * @param e\n   */\n  function move(e) {\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var point = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    draw({\n      sourcePoint: prePoint.current,\n      targetPoint: point\n    });\n    prePoint.current = point;\n  }\n  /**\n   * end\n   * @param e\n   */\n  function end(e) {\n    var _a, _b, _c, _d, _e;\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var point = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    (_a = config === null || config === void 0 ? void 0 : config.current.get(curShape.current)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\n    startPoint.current = null;\n    prePoint.current = null;\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mousemove', onMousemove);\n    (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('mouseup', onMouseup);\n    (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', onTouchmove);\n    (_e = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', onTouchend);\n  }\n  /**\n   * clear\n   */\n  function clear() {\n    var _a, _b, _c;\n    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.clearRect(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\n    prePoint.current = startPoint.current = null;\n    stack.current = [];\n    stackIndex.current = 0;\n  }\n  /**\n   * toDataURL\n   * @default canvas导出base64\n   * @param backgroundColor\n   * @param type\n   * @param quality\n   */\n  function toDataURL(backgroundColor, type, quality) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    if (backgroundColor) {\n      var _m = Util.colorToRgb(backgroundColor),\n        R = _m[0],\n        G = _m[1],\n        B = _m[2];\n      var fillsIndex = [];\n      // 先设置背景\n      var imageData_1 = (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.getImageData(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\n      for (var i = 0; i < ((_d = imageData_1 === null || imageData_1 === void 0 ? void 0 : imageData_1.data) === null || _d === void 0 ? void 0 : _d.length); i += 4) {\n        // 当该像素是透明的，则设置成backgroundColor\n        if (imageData_1.data[i + 3] === 0) {\n          imageData_1.data[i] = R; // R\n          imageData_1.data[i + 1] = G; // G\n          imageData_1.data[i + 2] = B; // B\n          imageData_1.data[i + 3] = 255;\n          fillsIndex.push(i);\n          fillsIndex.push(i + 1);\n          fillsIndex.push(i + 2);\n          fillsIndex.push(i + 3);\n        }\n      }\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.putImageData(imageData_1, 0, 0);\n      // 生成base64字符串\n      var base64 = (_f = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _f === void 0 ? void 0 : _f.toDataURL(type || 'image/png', quality);\n      // 删除背景\n      imageData_1 = (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.getImageData(0, 0, (_h = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _h === void 0 ? void 0 : _h.width, (_j = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _j === void 0 ? void 0 : _j.height);\n      fillsIndex.forEach(function (index) {\n        imageData_1.data[index] = 0;\n      });\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.putImageData(imageData_1, 0, 0);\n      return base64;\n    }\n    return (_l = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _l === void 0 ? void 0 : _l.toDataURL(type || 'image/png', quality);\n  }\n  useImperativeHandle(ref, function () {\n    return {\n      /**\n       * setMode\n       * @param mode\n       */\n      setMode: function setMode(mode) {\n        curShape.current = mode;\n      },\n      /**\n       * setStrokeStyle\n       * @param style\n       */\n      setStrokeStyle: function setStrokeStyle(style) {\n        strokeStyle.current = style;\n      },\n      /**\n       * setLineWidth\n       * @param width\n       */\n      setLineWidth: function setLineWidth(width) {\n        lineWidth.current = width;\n      },\n      /**\n       * clear\n       * @description 清除画布\n       */\n      clear: clear,\n      /**\n       * toDataURL\n       * @description 获取base64\n       * @param backgroundColor 背景色\n       * @param type 导出的图片类型\n       * @param quality 搭配出图片的质量\n       */\n      toDataURL: toDataURL\n    };\n  });\n  useLayoutEffect(function () {\n    var _a, _b, _c;\n    ctx.current = (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.getContext('2d');\n    var onResize = debounce(function () {\n      var _a, _b, _c, _d, _e;\n      canvasRef.current.width = (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n      canvasRef.current.height = (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight;\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.clearRect(0, 0, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.width, (_e = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _e === void 0 ? void 0 : _e.height);\n      drawStack();\n    }, resizeTime);\n    ro.current = new ResizeObserver(onResize);\n    (_c = (_b = ro === null || ro === void 0 ? void 0 : ro.current) === null || _b === void 0 ? void 0 : _b.observe) === null || _c === void 0 ? void 0 : _c.call(_b, document.body);\n    return function () {\n      var _a;\n      return (_a = ro === null || ro === void 0 ? void 0 : ro.current) === null || _a === void 0 ? void 0 : _a.disconnect();\n    };\n  }, []);\n  useLayoutEffect(function () {\n    var _a, _b;\n    function onMousedown(e) {\n      start(e);\n    }\n    function onTouchstart(e) {\n      start(__assign(__assign({}, e), {\n        clientX: e.targetTouches[0].clientX,\n        clientY: e.targetTouches[0].clientY\n      }));\n    }\n    (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousedown', onMousedown);\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('touchstart', onTouchstart);\n    return function () {\n      var _a, _b;\n      (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousedown', onMousedown);\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', onTouchstart);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames(selectorPrefix, props.className || ''),\n    style: props.style || {}\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef\n  }));\n};\nvar SignatureHOC = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(WritingBoard));\n// @ts-ignore\nSignatureHOC.Signature = Signature;\nexport default SignatureHOC;"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","classNames","debounce","React","forwardRef","memo","useImperativeHandle","useLayoutEffect","useRef","Util","ResizeObserver","Signature","Mode","selectorPrefix","WritingBoard","props","ref","_a","defaultMode","FREE","_b","defaultLineWidth","_c","defaultStrokeStyle","_d","resizeTime","containerRef","canvasRef","ctx","ro","startPoint","prePoint","curShape","lineWidth","strokeStyle","stack","stackIndex","config","Map","draw","_e","sourcePoint","targetPoint","current","beginPath","moveTo","x","y","lineTo","push","shape","style","stroke","drawStack","item","mouseup","point","LINE","_k","clearRect","width","height","_f","_g","_h","_j","RECTANGLE","rectStart","getPoint","rect","Math","abs","CIRCLE","radius","getDistanceByBetweenPoint","p2","p1","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","triangle","closePath","RUBBER","lineCap","lineJoin","w","h","devicePointToCanvasPoint","clientX","clientY","getBoundingClientRect","Ax1","Ay1","Ax2","Ay2","sqrt","pow","get","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","changedTouches","start","addEventListener","removeEventListener","clear","toDataURL","backgroundColor","type","quality","_l","_m","colorToRgb","R","G","B","fillsIndex","imageData_1","getImageData","data","putImageData","base64","forEach","index","setMode","mode","setStrokeStyle","setLineWidth","getContext","onResize","offsetWidth","offsetHeight","observe","document","body","disconnect","onMousedown","onTouchstart","createElement","className","SignatureHOC"],"mappings":"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"}