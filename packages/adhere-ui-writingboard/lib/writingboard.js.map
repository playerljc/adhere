{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar debounce_1 = __importDefault(require(\"lodash/debounce\"));\r\n// import PropTypes from 'prop-types';\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar resize_observer_1 = require(\"@juggle/resize-observer\");\r\nvar types_1 = require(\"./types\");\r\nvar selectorPrefix = 'adhere-ui-writingboard';\r\n/**\r\n * WritingBoard\r\n * @param props\r\n * @param ref\r\n * @constructor\r\n */\r\nvar WritingBoard = function (props, ref) {\r\n    var _a = props.defaultMode, defaultMode = _a === void 0 ? types_1.Mode.FREE : _a, _b = props.defaultLineWidth, defaultLineWidth = _b === void 0 ? 2 : _b, _c = props.defaultStrokeStyle, defaultStrokeStyle = _c === void 0 ? '#000' : _c, _d = props.resizeTime, resizeTime = _d === void 0 ? 300 : _d;\r\n    var containerRef = react_1.useRef(null);\r\n    var canvasRef = react_1.useRef(null);\r\n    var ctx = react_1.useRef(null);\r\n    var ro = react_1.useRef(null);\r\n    var startPoint = react_1.useRef(null);\r\n    var prePoint = react_1.useRef(null);\r\n    var curShape = react_1.useRef(defaultMode);\r\n    var lineWidth = react_1.useRef(defaultLineWidth);\r\n    var strokeStyle = react_1.useRef(defaultStrokeStyle);\r\n    var stack = react_1.useRef([]);\r\n    var stackIndex = react_1.useRef(0);\r\n    var config = react_1.useRef(new Map([\r\n        // 自由模式\r\n        [\r\n            types_1.Mode.FREE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e;\r\n                    var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        sourcePoint: sourcePoint,\r\n                        targetPoint: targetPoint,\r\n                    });\r\n                    style({\r\n                        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\r\n                        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current,\r\n                    });\r\n                    // 描边\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    draw({ sourcePoint: prePoint.current, targetPoint: point });\r\n                },\r\n            },\r\n        ],\r\n        // 直线\r\n        [\r\n            types_1.Mode.LINE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x, (_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y);\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.lineTo(targetPoint.x, targetPoint.y);\r\n                    style({\r\n                        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\r\n                        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current,\r\n                    });\r\n                    // 描边\r\n                    (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        sourcePoint: startPoint.current,\r\n                        targetPoint: point,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 矩形\r\n        [\r\n            types_1.Mode.RECTANGLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    // 判断target在start的四个方向\r\n                    var rectStart = getPoint({ startPoint: startPoint.current, targetPoint: targetPoint });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - ((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x)), Math.abs(targetPoint.y - ((_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y)));\r\n                    style({\r\n                        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\r\n                        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current,\r\n                    });\r\n                    // 描边\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.rect(item.x, item.y, item.width, item.height);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b, _c, _d;\r\n                    var rectStart = getPoint({ startPoint: startPoint.current, targetPoint: point });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        x: rectStart.x,\r\n                        y: rectStart.y,\r\n                        width: Math.abs(point.x - ((_c = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _c === void 0 ? void 0 : _c.x)),\r\n                        height: Math.abs(point.y - ((_d = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _d === void 0 ? void 0 : _d.y)),\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 圆形\r\n        [\r\n            types_1.Mode.CIRCLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    // 判断target在start的四个方向\r\n                    var rectStart = getPoint({ startPoint: startPoint.current, targetPoint: targetPoint });\r\n                    var radius = getDistanceByBetweenPoint({ p2: targetPoint, p1: startPoint.current });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.ellipse(rectStart.x, rectStart.y, radius, radius, (45 * Math.PI) / 180, 0, 2 * Math.PI);\r\n                    style({\r\n                        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\r\n                        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current,\r\n                    });\r\n                    // 描边\r\n                    (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    var center = getPoint({ startPoint: startPoint.current, targetPoint: point });\r\n                    var radius = getDistanceByBetweenPoint({ p2: point, p1: startPoint === null || startPoint === void 0 ? void 0 : startPoint.current });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        x: center.x,\r\n                        y: center.y,\r\n                        radiusX: radius,\r\n                        radiusY: radius,\r\n                        rotation: (45 * Math.PI) / 180,\r\n                        startAngle: 0,\r\n                        endAngle: 2 * Math.PI,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 三角形(多边形)\r\n        [\r\n            types_1.Mode.TRIANGLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    var points = triangle({ startPoint: startPoint.current, targetPoint: targetPoint });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo(points[0].x, points[0].y);\r\n                    (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.lineTo(points[1].x, points[1].y);\r\n                    (_h = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _h === void 0 ? void 0 : _h.lineTo(points[2].x, points[2].y);\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.closePath();\r\n                    style({\r\n                        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\r\n                        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current,\r\n                    });\r\n                    // 描边\r\n                    (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d, _e, _f;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.points[0].x, item.points[0].y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.points[1].x, item.points[1].y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(item.points[2].x, item.points[2].y);\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.closePath();\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    var points = triangle({ startPoint: startPoint.current, targetPoint: point });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        points: points,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 橡皮\r\n        [\r\n            types_1.Mode.RUBBER,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e;\r\n                    var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        sourcePoint: sourcePoint,\r\n                        targetPoint: targetPoint,\r\n                    });\r\n                    ctx.current.lineWidth = 15;\r\n                    ctx.current.strokeStyle = '#fff';\r\n                    ctx.current.lineCap = 'round';\r\n                    ctx.current.lineJoin = 'round';\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    ctx.current.lineWidth = 15;\r\n                    ctx.current.strokeStyle = '#fff';\r\n                    ctx.current.lineCap = 'round';\r\n                    ctx.current.lineJoin = 'round';\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    draw({ sourcePoint: prePoint.current, targetPoint: point });\r\n                },\r\n            },\r\n        ],\r\n    ]));\r\n    /**\r\n     * style\r\n     * @param lineWidth\r\n     * @param strokeStyle\r\n     */\r\n    function style(_a) {\r\n        var lineWidth = _a.lineWidth, strokeStyle = _a.strokeStyle;\r\n        ctx.current.lineWidth = lineWidth;\r\n        ctx.current.strokeStyle = strokeStyle;\r\n        ctx.current.lineCap = 'round';\r\n        ctx.current.lineJoin = 'round';\r\n    }\r\n    /**\r\n     * triangle - 获取三角形的三个点坐标\r\n     * @param startPoint\r\n     * @param targetPoint\r\n     */\r\n    function triangle(_a) {\r\n        var startPoint = _a.startPoint, targetPoint = _a.targetPoint;\r\n        var s = getPoint({ startPoint: startPoint, targetPoint: targetPoint });\r\n        var w = Math.abs(targetPoint.x - startPoint.x);\r\n        var h = Math.abs(targetPoint.y - startPoint.y);\r\n        var point1 = {\r\n            x: s.x,\r\n            y: s.y + h,\r\n        };\r\n        var point2 = {\r\n            x: s.x + w / 2,\r\n            y: s.y,\r\n        };\r\n        var point3 = {\r\n            x: s.x + w,\r\n            y: s.y + h,\r\n        };\r\n        return [point1, point2, point3];\r\n    }\r\n    /**\r\n     * devicePointToCanvasPoint\r\n     * @param clientX\r\n     * @param clientY\r\n     */\r\n    function devicePointToCanvasPoint(_a) {\r\n        var _b;\r\n        var clientX = _a.clientX, clientY = _a.clientY;\r\n        var _c = (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect(), x = _c.x, y = _c.y;\r\n        return {\r\n            x: clientX - x,\r\n            y: clientY - y,\r\n        };\r\n    }\r\n    /**\r\n     * getDistanceByBetweenPoint\r\n     * @description 获取p1,p2两点间的距离\r\n     * @param p1\r\n     * @param p2\r\n     */\r\n    function getDistanceByBetweenPoint(_a) {\r\n        var p1 = _a.p1, p2 = _a.p2;\r\n        var Ax1 = p1.x, Ay1 = p1.y;\r\n        var Ax2 = p2.x, Ay2 = p2.y;\r\n        return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\r\n    }\r\n    /**\r\n     * drawStack\r\n     */\r\n    function drawStack() {\r\n        for (var i = 0; i < stack.current.length; i++) {\r\n            var item = stack.current[i];\r\n            config.current.get(item.shape).drawStack(item);\r\n        }\r\n    }\r\n    /**\r\n     * getPoint\r\n     * @param startPoint\r\n     * @param targetPoint\r\n     */\r\n    function getPoint(_a) {\r\n        var startPoint = _a.startPoint, targetPoint = _a.targetPoint;\r\n        if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\r\n            // leftTop\r\n            return targetPoint;\r\n        }\r\n        else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\r\n            // leftBottom\r\n            return {\r\n                x: targetPoint.x,\r\n                y: startPoint.y,\r\n            };\r\n        }\r\n        else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\r\n            // rightTop\r\n            return {\r\n                x: startPoint.x,\r\n                y: targetPoint.y,\r\n            };\r\n        }\r\n        else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\r\n            // rightBottom\r\n            return startPoint;\r\n        }\r\n    }\r\n    /**\r\n     * draw\r\n     * @param sourcePoint\r\n     * @param targetPoint\r\n     */\r\n    function draw(_a) {\r\n        var _b;\r\n        var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n        var entry = (_b = config === null || config === void 0 ? void 0 : config.current) === null || _b === void 0 ? void 0 : _b.get(curShape.current);\r\n        entry.draw({ sourcePoint: sourcePoint, targetPoint: targetPoint });\r\n    }\r\n    // 注册事件\r\n    function onMousemove(e) {\r\n        move(e);\r\n    }\r\n    function onTouchmove(e) {\r\n        move(__assign(__assign({}, e), { clientX: e.targetTouches[0].clientX, clientY: e.targetTouches[0].clientY }));\r\n    }\r\n    function onMouseup(e) {\r\n        end(e);\r\n    }\r\n    function onTouchend(e) {\r\n        end(__assign(__assign({}, e), { clientX: e.changedTouches[0].clientX, clientY: e.changedTouches[0].clientY }));\r\n    }\r\n    /**\r\n     * start\r\n     * @param e\r\n     */\r\n    function start(e) {\r\n        var _a, _b, _c, _d;\r\n        // 屏幕坐标转换成canvas坐标\r\n        var clientX = e.clientX, clientY = e.clientY;\r\n        startPoint.current = prePoint.current = devicePointToCanvasPoint({ clientX: clientX, clientY: clientY });\r\n        (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousemove', onMousemove);\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseup', onMouseup);\r\n        (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchmove', onTouchmove);\r\n        (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.addEventListener('touchend', onTouchend);\r\n    }\r\n    /**\r\n     * move\r\n     * @param e\r\n     */\r\n    function move(e) {\r\n        var clientX = e.clientX, clientY = e.clientY;\r\n        var point = devicePointToCanvasPoint({ clientX: clientX, clientY: clientY });\r\n        draw({ sourcePoint: prePoint.current, targetPoint: point });\r\n        prePoint.current = point;\r\n    }\r\n    /**\r\n     * end\r\n     * @param e\r\n     */\r\n    function end(e) {\r\n        var _a, _b, _c, _d, _e;\r\n        var clientX = e.clientX, clientY = e.clientY;\r\n        var point = devicePointToCanvasPoint({ clientX: clientX, clientY: clientY });\r\n        (_a = config === null || config === void 0 ? void 0 : config.current.get(curShape.current)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\r\n        startPoint.current = null;\r\n        prePoint.current = null;\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mousemove', onMousemove);\r\n        (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('mouseup', onMouseup);\r\n        (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', onTouchmove);\r\n        (_e = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', onTouchend);\r\n    }\r\n    /**\r\n     * clear\r\n     */\r\n    function clear() {\r\n        var _a, _b, _c;\r\n        (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.clearRect(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\r\n        prePoint.current = startPoint.current = null;\r\n        stack.current = [];\r\n        stackIndex.current = 0;\r\n    }\r\n    react_1.useImperativeHandle(ref, function () { return ({\r\n        setMode: function (mode) {\r\n            curShape.current = mode;\r\n        },\r\n        setStrokeStyle: function (style) {\r\n            strokeStyle.current = style;\r\n        },\r\n        setLineWidth: function (width) {\r\n            lineWidth.current = width;\r\n        },\r\n        /**\r\n         * clear\r\n         * @description 清除画布\r\n         */\r\n        clear: clear,\r\n        /**\r\n         * toDataURL\r\n         * @description 获取base64\r\n         */\r\n        toDataURL: function () { var _a; return (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.toDataURL('image/png', 1.0); },\r\n    }); });\r\n    react_1.useLayoutEffect(function () {\r\n        var _a, _b, _c;\r\n        ctx.current = (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.getContext('2d');\r\n        var onResize = debounce_1.default(function () {\r\n            var _a, _b, _c, _d, _e;\r\n            canvasRef.current.width = (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\r\n            canvasRef.current.height = (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight;\r\n            (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.clearRect(0, 0, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.width, (_e = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _e === void 0 ? void 0 : _e.height);\r\n            drawStack();\r\n        }, resizeTime);\r\n        ro.current = new resize_observer_1.ResizeObserver(onResize);\r\n        (_c = (_b = ro === null || ro === void 0 ? void 0 : ro.current) === null || _b === void 0 ? void 0 : _b.observe) === null || _c === void 0 ? void 0 : _c.call(_b, document.body);\r\n        return function () { var _a; return (_a = ro === null || ro === void 0 ? void 0 : ro.current) === null || _a === void 0 ? void 0 : _a.disconnect(); };\r\n    }, []);\r\n    react_1.useLayoutEffect(function () {\r\n        var _a, _b;\r\n        function onMousedown(e) {\r\n            start(e);\r\n        }\r\n        function onTouchstart(e) {\r\n            start(__assign(__assign({}, e), { clientX: e.targetTouches[0].clientX, clientY: e.targetTouches[0].clientY }));\r\n        }\r\n        (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousedown', onMousedown);\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('touchstart', onTouchstart);\r\n        return function () {\r\n            var _a, _b;\r\n            (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousedown', onMousedown);\r\n            (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', onTouchstart);\r\n        };\r\n    }, []);\r\n    return (react_1.default.createElement(\"div\", { ref: containerRef, className: classnames_1.default(selectorPrefix, props.className || ''), style: props.style || {} },\r\n        react_1.default.createElement(\"canvas\", { ref: canvasRef })));\r\n};\r\nvar Wrap = react_1.memo(react_1.forwardRef(WritingBoard));\r\n// Wrap.defaultProps = {\r\n//   className: '',\r\n//   style: {},\r\n//   defaultMode: Mode.FREE,\r\n//   defaultStrokeStyle: '#000',\r\n//   defaultLineWidth: 2,\r\n//   resizeTime: 300,\r\n// };\r\n//\r\n// Wrap.propTypes = {\r\n//   className: PropTypes.string,\r\n//   style: PropTypes.object,\r\n//   // @ts-ignore\r\n//   defaultMode: PropTypes.string.isRequired,\r\n//   defaultStrokeStyle: PropTypes.string.isRequired,\r\n//   defaultLineWidth: PropTypes.number.isRequired,\r\n//   resizeTime: PropTypes.number.isRequired,\r\n// };\r\nexports.default = Wrap;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","default","classnames_1","exports","require","debounce_1","react_1","resize_observer_1","types_1","selectorPrefix","WritingBoard","props","ref","_a","defaultMode","Mode","FREE","_b","defaultLineWidth","_c","defaultStrokeStyle","_d","resizeTime","containerRef","useRef","canvasRef","ctx","ro","startPoint","prePoint","curShape","lineWidth","strokeStyle","stack","stackIndex","config","Map","draw","_e","sourcePoint","targetPoint","current","beginPath","moveTo","x","y","lineTo","push","shape","style","stroke","drawStack","item","mouseup","point","LINE","_k","clearRect","width","height","_f","_g","_h","_j","RECTANGLE","rectStart","getPoint","rect","Math","abs","CIRCLE","radius","getDistanceByBetweenPoint","p2","p1","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","triangle","closePath","RUBBER","lineCap","lineJoin","w","h","devicePointToCanvasPoint","clientX","clientY","getBoundingClientRect","Ax1","Ay1","Ax2","Ay2","sqrt","pow","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","changedTouches","start","addEventListener","removeEventListener","clear","useImperativeHandle","setMode","mode","setStrokeStyle","setLineWidth","toDataURL","useLayoutEffect","getContext","onResize","offsetWidth","offsetHeight","ResizeObserver","observe","document","body","disconnect","onMousedown","onTouchstart","createElement","className","Wrap","memo","forwardRef"],"mappings":"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"}