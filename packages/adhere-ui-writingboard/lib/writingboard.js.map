{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar lodash_debounce_1 = __importDefault(require(\"lodash.debounce\"));\nvar react_1 = __importStar(require(\"react\"));\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar resize_observer_1 = require(\"@juggle/resize-observer\");\nvar signature_1 = __importDefault(require(\"./signature\"));\nvar types_1 = require(\"./types\");\nvar selectorPrefix = 'adhere-ui-writingboard';\n/**\n * WritingBoard\n * @param props\n * @param ref\n * @constructor\n */\nvar WritingBoard = function WritingBoard(props, ref) {\n  var _a = props.defaultMode,\n    defaultMode = _a === void 0 ? types_1.Mode.FREE : _a,\n    _b = props.defaultLineWidth,\n    defaultLineWidth = _b === void 0 ? 2 : _b,\n    _c = props.defaultStrokeStyle,\n    defaultStrokeStyle = _c === void 0 ? '#000' : _c,\n    _d = props.resizeTime,\n    resizeTime = _d === void 0 ? 300 : _d;\n  var containerRef = (0, react_1.useRef)(null);\n  var canvasRef = (0, react_1.useRef)(null);\n  var ctx = (0, react_1.useRef)(null);\n  var ro = (0, react_1.useRef)(null);\n  var startPoint = (0, react_1.useRef)(null);\n  var prePoint = (0, react_1.useRef)(null);\n  var curShape = (0, react_1.useRef)(defaultMode);\n  var lineWidth = (0, react_1.useRef)(defaultLineWidth);\n  var strokeStyle = (0, react_1.useRef)(defaultStrokeStyle);\n  var stack = (0, react_1.useRef)([]);\n  var stackIndex = (0, react_1.useRef)(0);\n  var config = (0, react_1.useRef)(new Map([\n  // 自由模式\n  [types_1.Mode.FREE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e;\n      var sourcePoint = _a.sourcePoint,\n        targetPoint = _a.targetPoint;\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\n      stack.current.push({\n        shape: curShape.current,\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      draw({\n        sourcePoint: prePoint.current,\n        targetPoint: point\n      });\n    }\n  }],\n  // 直线\n  [types_1.Mode.LINE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x, (_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y);\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.lineTo(targetPoint.x, targetPoint.y);\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        sourcePoint: startPoint.current,\n        targetPoint: point\n      });\n    }\n  }],\n  // 矩形\n  [types_1.Mode.RECTANGLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      // 判断target在start的四个方向\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - ((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x)), Math.abs(targetPoint.y - ((_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y)));\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.rect(item.x, item.y, item.width, item.height);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b, _c, _d;\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        x: rectStart.x,\n        y: rectStart.y,\n        width: Math.abs(point.x - ((_c = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _c === void 0 ? void 0 : _c.x)),\n        height: Math.abs(point.y - ((_d = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _d === void 0 ? void 0 : _d.y))\n      });\n    }\n  }],\n  // 圆形\n  [types_1.Mode.CIRCLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      // 判断target在start的四个方向\n      var rectStart = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      var radius = getDistanceByBetweenPoint({\n        p2: targetPoint,\n        p1: startPoint.current\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.ellipse(rectStart.x, rectStart.y, radius, radius, 45 * Math.PI / 180, 0, 2 * Math.PI);\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      var center = getPoint({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      var radius = getDistanceByBetweenPoint({\n        p2: point,\n        p1: startPoint === null || startPoint === void 0 ? void 0 : startPoint.current\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        x: center.x,\n        y: center.y,\n        radiusX: radius,\n        radiusY: radius,\n        rotation: 45 * Math.PI / 180,\n        startAngle: 0,\n        endAngle: 2 * Math.PI\n      });\n    }\n  }],\n  // 三角形(多边形)\n  [types_1.Mode.TRIANGLE, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k;\n      var targetPoint = _a.targetPoint;\n      // 清除画布\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\n      drawStack();\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\n      var points = triangle({\n        startPoint: startPoint.current,\n        targetPoint: targetPoint\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo(points[0].x, points[0].y);\n      (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.lineTo(points[1].x, points[1].y);\n      (_h = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _h === void 0 ? void 0 : _h.lineTo(points[2].x, points[2].y);\n      (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.closePath();\n      style({\n        lineWidth: lineWidth === null || lineWidth === void 0 ? void 0 : lineWidth.current,\n        strokeStyle: strokeStyle === null || strokeStyle === void 0 ? void 0 : strokeStyle.current\n      });\n      // 描边\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d, _e, _f;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.points[0].x, item.points[0].y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.points[1].x, item.points[1].y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(item.points[2].x, item.points[2].y);\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.closePath();\n      style({\n        lineWidth: item.lineWidth,\n        strokeStyle: item.strokeStyle\n      });\n      (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.stroke();\n    },\n    mouseup: function mouseup(point) {\n      var _a, _b;\n      var points = triangle({\n        startPoint: startPoint.current,\n        targetPoint: point\n      });\n      stack.current.push({\n        shape: curShape.current,\n        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\n        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\n        points: points\n      });\n    }\n  }],\n  // 橡皮\n  [types_1.Mode.RUBBER, {\n    draw: function draw(_a) {\n      var _b, _c, _d, _e;\n      var sourcePoint = _a.sourcePoint,\n        targetPoint = _a.targetPoint;\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\n      stack.current.push({\n        shape: curShape.current,\n        sourcePoint: sourcePoint,\n        targetPoint: targetPoint\n      });\n      ctx.current.lineWidth = 15;\n      ctx.current.strokeStyle = '#fff';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineJoin = 'round';\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\n    },\n    drawStack: function drawStack(item) {\n      var _a, _b, _c, _d;\n      (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\n      (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\n      ctx.current.lineWidth = 15;\n      ctx.current.strokeStyle = '#fff';\n      ctx.current.lineCap = 'round';\n      ctx.current.lineJoin = 'round';\n      (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\n    },\n    mouseup: function mouseup(point) {\n      draw({\n        sourcePoint: prePoint.current,\n        targetPoint: point\n      });\n    }\n  }]]));\n  /**\n   * style\n   * @param lineWidth\n   * @param strokeStyle\n   */\n  function style(_a) {\n    var lineWidth = _a.lineWidth,\n      strokeStyle = _a.strokeStyle;\n    ctx.current.lineWidth = lineWidth;\n    ctx.current.strokeStyle = strokeStyle;\n    ctx.current.lineCap = 'round';\n    ctx.current.lineJoin = 'round';\n  }\n  /**\n   * triangle - 获取三角形的三个点坐标\n   * @param startPoint\n   * @param targetPoint\n   */\n  function triangle(_a) {\n    var startPoint = _a.startPoint,\n      targetPoint = _a.targetPoint;\n    var s = getPoint({\n      startPoint: startPoint,\n      targetPoint: targetPoint\n    });\n    var w = Math.abs(targetPoint.x - startPoint.x);\n    var h = Math.abs(targetPoint.y - startPoint.y);\n    var point1 = {\n      x: s.x,\n      y: s.y + h\n    };\n    var point2 = {\n      x: s.x + w / 2,\n      y: s.y\n    };\n    var point3 = {\n      x: s.x + w,\n      y: s.y + h\n    };\n    return [point1, point2, point3];\n  }\n  /**\n   * devicePointToCanvasPoint\n   * @param clientX\n   * @param clientY\n   */\n  function devicePointToCanvasPoint(_a) {\n    var _b;\n    var clientX = _a.clientX,\n      clientY = _a.clientY;\n    var _c = (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect(),\n      x = _c.x,\n      y = _c.y;\n    return {\n      x: clientX - x,\n      y: clientY - y\n    };\n  }\n  /**\n   * getDistanceByBetweenPoint\n   * @description 获取p1,p2两点间的距离\n   * @param p1\n   * @param p2\n   */\n  function getDistanceByBetweenPoint(_a) {\n    var p1 = _a.p1,\n      p2 = _a.p2;\n    var Ax1 = p1.x,\n      Ay1 = p1.y;\n    var Ax2 = p2.x,\n      Ay2 = p2.y;\n    return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\n  }\n  /**\n   * drawStack\n   */\n  function drawStack() {\n    for (var i = 0; i < stack.current.length; i++) {\n      var item = stack.current[i];\n      config.current.get(item.shape).drawStack(item);\n    }\n  }\n  /**\n   * getPoint\n   * @param startPoint\n   * @param targetPoint\n   */\n  function getPoint(_a) {\n    var startPoint = _a.startPoint,\n      targetPoint = _a.targetPoint;\n    if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\n      // leftTop\n      return targetPoint;\n    } else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\n      // leftBottom\n      return {\n        x: targetPoint.x,\n        y: startPoint.y\n      };\n    } else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\n      // rightTop\n      return {\n        x: startPoint.x,\n        y: targetPoint.y\n      };\n    } else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\n      // rightBottom\n      return startPoint;\n    }\n  }\n  /**\n   * draw\n   * @param sourcePoint\n   * @param targetPoint\n   */\n  function draw(_a) {\n    var _b;\n    var sourcePoint = _a.sourcePoint,\n      targetPoint = _a.targetPoint;\n    var entry = (_b = config === null || config === void 0 ? void 0 : config.current) === null || _b === void 0 ? void 0 : _b.get(curShape.current);\n    entry.draw({\n      sourcePoint: sourcePoint,\n      targetPoint: targetPoint\n    });\n  }\n  // 注册事件\n  function onMousemove(e) {\n    move(e);\n  }\n  function onTouchmove(e) {\n    move(__assign(__assign({}, e), {\n      clientX: e.targetTouches[0].clientX,\n      clientY: e.targetTouches[0].clientY\n    }));\n  }\n  function onMouseup(e) {\n    end(e);\n  }\n  function onTouchend(e) {\n    end(__assign(__assign({}, e), {\n      clientX: e.changedTouches[0].clientX,\n      clientY: e.changedTouches[0].clientY\n    }));\n  }\n  /**\n   * start\n   * @param e\n   */\n  function start(e) {\n    var _a, _b, _c, _d;\n    // 屏幕坐标转换成canvas坐标\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    startPoint.current = prePoint.current = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousemove', onMousemove);\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseup', onMouseup);\n    (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchmove', onTouchmove);\n    (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.addEventListener('touchend', onTouchend);\n  }\n  /**\n   * move\n   * @param e\n   */\n  function move(e) {\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var point = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    draw({\n      sourcePoint: prePoint.current,\n      targetPoint: point\n    });\n    prePoint.current = point;\n  }\n  /**\n   * end\n   * @param e\n   */\n  function end(e) {\n    var _a, _b, _c, _d, _e;\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var point = devicePointToCanvasPoint({\n      clientX: clientX,\n      clientY: clientY\n    });\n    (_a = config === null || config === void 0 ? void 0 : config.current.get(curShape.current)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\n    startPoint.current = null;\n    prePoint.current = null;\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mousemove', onMousemove);\n    (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('mouseup', onMouseup);\n    (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', onTouchmove);\n    (_e = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', onTouchend);\n  }\n  /**\n   * clear\n   */\n  function clear() {\n    var _a, _b, _c;\n    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.clearRect(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\n    prePoint.current = startPoint.current = null;\n    stack.current = [];\n    stackIndex.current = 0;\n  }\n  /**\n   * toDataURL\n   * @default canvas导出base64\n   * @param backgroundColor\n   * @param type\n   * @param quality\n   */\n  function toDataURL(backgroundColor, type, quality) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    if (backgroundColor) {\n      var _m = adhere_util_1.default.colorToRgb(backgroundColor),\n        R = _m[0],\n        G = _m[1],\n        B = _m[2];\n      var fillsIndex = [];\n      // 先设置背景\n      var imageData_1 = (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.getImageData(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\n      for (var i = 0; i < ((_d = imageData_1 === null || imageData_1 === void 0 ? void 0 : imageData_1.data) === null || _d === void 0 ? void 0 : _d.length); i += 4) {\n        // 当该像素是透明的，则设置成backgroundColor\n        if (imageData_1.data[i + 3] === 0) {\n          imageData_1.data[i] = R; // R\n          imageData_1.data[i + 1] = G; // G\n          imageData_1.data[i + 2] = B; // B\n          imageData_1.data[i + 3] = 255;\n          fillsIndex.push(i);\n          fillsIndex.push(i + 1);\n          fillsIndex.push(i + 2);\n          fillsIndex.push(i + 3);\n        }\n      }\n      (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.putImageData(imageData_1, 0, 0);\n      // 生成base64字符串\n      var base64 = (_f = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _f === void 0 ? void 0 : _f.toDataURL(type || 'image/png', quality);\n      // 删除背景\n      imageData_1 = (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.getImageData(0, 0, (_h = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _h === void 0 ? void 0 : _h.width, (_j = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _j === void 0 ? void 0 : _j.height);\n      fillsIndex.forEach(function (index) {\n        imageData_1.data[index] = 0;\n      });\n      (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.putImageData(imageData_1, 0, 0);\n      return base64;\n    }\n    return (_l = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _l === void 0 ? void 0 : _l.toDataURL(type || 'image/png', quality);\n  }\n  (0, react_1.useImperativeHandle)(ref, function () {\n    return {\n      /**\n       * setMode\n       * @param mode\n       */\n      setMode: function setMode(mode) {\n        curShape.current = mode;\n      },\n      /**\n       * setStrokeStyle\n       * @param style\n       */\n      setStrokeStyle: function setStrokeStyle(style) {\n        strokeStyle.current = style;\n      },\n      /**\n       * setLineWidth\n       * @param width\n       */\n      setLineWidth: function setLineWidth(width) {\n        lineWidth.current = width;\n      },\n      /**\n       * clear\n       * @description 清除画布\n       */\n      clear: clear,\n      /**\n       * toDataURL\n       * @description 获取base64\n       * @param backgroundColor 背景色\n       * @param type 导出的图片类型\n       * @param quality 搭配出图片的质量\n       */\n      toDataURL: toDataURL\n    };\n  });\n  (0, react_1.useLayoutEffect)(function () {\n    var _a, _b, _c;\n    ctx.current = (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.getContext('2d');\n    var onResize = (0, lodash_debounce_1.default)(function () {\n      var _a, _b, _c, _d, _e;\n      canvasRef.current.width = (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n      canvasRef.current.height = (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight;\n      (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.clearRect(0, 0, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.width, (_e = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _e === void 0 ? void 0 : _e.height);\n      drawStack();\n    }, resizeTime);\n    ro.current = new resize_observer_1.ResizeObserver(onResize);\n    (_c = (_b = ro === null || ro === void 0 ? void 0 : ro.current) === null || _b === void 0 ? void 0 : _b.observe) === null || _c === void 0 ? void 0 : _c.call(_b, document.body);\n    return function () {\n      var _a;\n      return (_a = ro === null || ro === void 0 ? void 0 : ro.current) === null || _a === void 0 ? void 0 : _a.disconnect();\n    };\n  }, []);\n  (0, react_1.useLayoutEffect)(function () {\n    var _a, _b;\n    function onMousedown(e) {\n      start(e);\n    }\n    function onTouchstart(e) {\n      start(__assign(__assign({}, e), {\n        clientX: e.targetTouches[0].clientX,\n        clientY: e.targetTouches[0].clientY\n      }));\n    }\n    (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousedown', onMousedown);\n    (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('touchstart', onTouchstart);\n    return function () {\n      var _a, _b;\n      (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousedown', onMousedown);\n      (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', onTouchstart);\n    };\n  }, []);\n  return react_1.default.createElement(\"div\", {\n    ref: containerRef,\n    className: (0, classnames_1.default)(selectorPrefix, props.className || ''),\n    style: props.style || {}\n  }, react_1.default.createElement(\"canvas\", {\n    ref: canvasRef\n  }));\n};\nvar SignatureHOC = (0, react_1.memo)((0, react_1.forwardRef)(WritingBoard));\n// @ts-ignore\nSignatureHOC.Signature = signature_1.default;\nexports.default = SignatureHOC;"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__importDefault","default","classnames_1","exports","require","lodash_debounce_1","react_1","adhere_util_1","resize_observer_1","signature_1","types_1","selectorPrefix","WritingBoard","props","ref","_a","defaultMode","Mode","FREE","_b","defaultLineWidth","_c","defaultStrokeStyle","_d","resizeTime","containerRef","useRef","canvasRef","ctx","ro","startPoint","prePoint","curShape","lineWidth","strokeStyle","stack","stackIndex","config","Map","draw","_e","sourcePoint","targetPoint","current","beginPath","moveTo","x","y","lineTo","push","shape","style","stroke","drawStack","item","mouseup","point","LINE","_k","clearRect","width","height","_f","_g","_h","_j","RECTANGLE","rectStart","getPoint","rect","Math","abs","CIRCLE","radius","getDistanceByBetweenPoint","p2","p1","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","triangle","closePath","RUBBER","lineCap","lineJoin","w","h","devicePointToCanvasPoint","clientX","clientY","getBoundingClientRect","Ax1","Ay1","Ax2","Ay2","sqrt","pow","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","changedTouches","start","addEventListener","removeEventListener","clear","toDataURL","backgroundColor","type","quality","_l","_m","colorToRgb","R","G","B","fillsIndex","imageData_1","getImageData","data","putImageData","base64","forEach","index","useImperativeHandle","setMode","mode","setStrokeStyle","setLineWidth","useLayoutEffect","getContext","onResize","offsetWidth","offsetHeight","ResizeObserver","observe","document","body","disconnect","onMousedown","onTouchstart","createElement","className","SignatureHOC","memo","forwardRef","Signature"],"mappings":"AAAA,aAEA,IAAIA,SAA0C,WAQ5C,OAPAA,SAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,CAAC,GAE/C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,IAE5E,OAAON,CACT,GACgBU,MAAMC,KAAMP,SAAS,CACvC,EACIQ,gBAAyDd,OAAOe,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,GACnFC,KAAAA,IAAPD,IAAkBA,EAAKD,GAC3B,IAAIG,EAAOrB,OAAOsB,yBAAyBL,EAAGC,CAAC,EAC1CG,IAAS,QAASA,EAAQJ,EAAEM,WAAaF,CAAAA,EAAKG,UAAYH,CAAAA,EAAKI,gBAClEJ,EAAO,CACLK,WAAY,CAAA,EACZC,IAAK,WACH,OAAOV,EAAEC,EACX,CACF,GAEFlB,OAAO4B,eAAeZ,EAAGG,EAAIE,CAAI,CACnC,EAAI,SAAUL,EAAGC,EAAGC,EAAGC,GAErBH,EADsBG,EAAXC,KAAAA,IAAPD,EAAuBD,EACzBC,GAAMF,EAAEC,EACZ,EACIW,mBAA+D7B,OAAOe,OAAS,SAAUC,EAAGc,GAC9F9B,OAAO4B,eAAeZ,EAAG,UAAW,CAClCU,WAAY,CAAA,EACZK,MAAOD,CACT,CAAC,CACH,EAAI,SAAUd,EAAGc,GACfd,EAAW,QAAIc,CACjB,EACIE,aAAkD,SAAUC,GAC9D,GAAIA,GAAOA,EAAIV,WAAY,OAAOU,EAClC,IAAIC,EAAS,GACb,GAAW,MAAPD,EAAa,IAAK,IAAIf,KAAKe,EAAe,YAANf,GAAmBlB,OAAOS,UAAUC,eAAeC,KAAKsB,EAAKf,CAAC,GAAGJ,gBAAgBoB,EAAQD,EAAKf,CAAC,EAEvI,OADAW,mBAAmBK,EAAQD,CAAG,EACvBC,CACT,EACIC,gBAAwD,SAAUF,GACpE,OAAOA,GAAOA,EAAIV,WAAaU,EAAM,CACnCG,QAAWH,CACb,CACF,EAIII,cAHJrC,OAAO4B,eAAeU,QAAS,aAAc,CAC3CP,MAAO,CAAA,CACT,CAAC,EACkBI,gBAAgBI,QAAQ,YAAY,CAAC,GACpDC,kBAAoBL,gBAAgBI,QAAQ,iBAAiB,CAAC,EAC9DE,QAAUT,aAAaO,QAAQ,OAAO,CAAC,EACvCG,cAAgBP,gBAAgBI,QAAQ,yBAAyB,CAAC,EAClEI,kBAAoBJ,QAAQ,yBAAyB,EACrDK,YAAcT,gBAAgBI,QAAQ,aAAa,CAAC,EACpDM,QAAUN,QAAQ,SAAS,EAC3BO,eAAiB,yBAOjBC,aAAe,SAAsBC,EAAOC,GAC9C,IAAIC,EAAKF,EAAMG,YACbA,EAAqB,KAAA,IAAPD,EAAgBL,QAAQO,KAAKC,KAAOH,EAClDI,EAAKN,EAAMO,iBACXA,EAA0B,KAAA,IAAPD,EAAgB,EAAIA,EACvCE,EAAKR,EAAMS,mBACXA,EAA4B,KAAA,IAAPD,EAAgB,OAASA,EAC9CE,EAAKV,EAAMW,WACXA,EAAoB,KAAA,IAAPD,EAAgB,IAAMA,EACjCE,GAAe,EAAInB,QAAQoB,QAAQ,IAAI,EACvCC,GAAY,EAAIrB,QAAQoB,QAAQ,IAAI,EACpCE,GAAM,EAAItB,QAAQoB,QAAQ,IAAI,EAC9BG,GAAK,EAAIvB,QAAQoB,QAAQ,IAAI,EAC7BI,GAAa,EAAIxB,QAAQoB,QAAQ,IAAI,EACrCK,GAAW,EAAIzB,QAAQoB,QAAQ,IAAI,EACnCM,GAAW,EAAI1B,QAAQoB,QAAQV,CAAW,EAC1CiB,GAAY,EAAI3B,QAAQoB,QAAQN,CAAgB,EAChDc,GAAc,EAAI5B,QAAQoB,QAAQJ,CAAkB,EACpDa,GAAQ,EAAI7B,QAAQoB,QAAQ,EAAE,EAC9BU,GAAa,EAAI9B,QAAQoB,QAAQ,CAAC,EAClCW,GAAS,EAAI/B,QAAQoB,QAAQ,IAAIY,IAAI,CAEzC,CAAC5B,QAAQO,KAAKC,KAAM,CAClBqB,KAAM,SAAcxB,GAClB,IAAgByB,EACZC,EAAc1B,EAAG0B,YACnBC,EAAc3B,EAAG2B,YACnB,OAACvB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGyB,UAAU,EAC/G,OAACvB,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAGwB,OAAOJ,EAAYK,EAAGL,EAAYM,CAAC,EACxI,OAACxB,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAGyB,OAAON,EAAYI,EAAGJ,EAAYK,CAAC,EACxIZ,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBF,YAAaA,EACbC,YAAaA,CACf,CAAC,EACDS,EAAM,CACJlB,UAAWA,MAAAA,EAA6C,KAAA,EAASA,EAAUU,QAC3ET,YAAaA,MAAAA,EAAiD,KAAA,EAASA,EAAYS,OACrF,CAAC,EAED,OAACH,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGY,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAgB/B,EAChB,OAACR,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAG0B,OAAOS,EAAKb,YAAYK,EAAGQ,EAAKb,YAAYM,CAAC,EAClJ,OAAC1B,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG2B,OAAOM,EAAKZ,YAAYI,EAAGQ,EAAKZ,YAAYK,CAAC,EAClJI,EAAM,CACJlB,UAAWqB,EAAKrB,UAChBC,YAAaoB,EAAKpB,WACpB,CAAC,EACD,OAACX,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAG6B,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxBjB,EAAK,CACHE,YAAaV,EAASY,QACtBD,YAAac,CACf,CAAC,CACH,CACF,GAEA,CAAC9C,QAAQO,KAAKwC,KAAM,CAClBlB,KAAM,SAAcxB,GAClB,IAAoC2C,EAChChB,EAAc3B,EAAG2B,YAErB,OAACvB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGwC,UAAU,EAAG,EAAG,OAACtC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGuC,MAAO,OAACrC,EAAKI,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASpB,EAAGsC,MAAM,EAChXR,EAAU,EACV,OAACb,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGI,UAAU,EAC/G,OAACkB,EAAKlC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CmB,EAAGjB,OAAO,OAACkB,EAAKjC,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAASoB,EAAGjB,EAAG,OAACkB,EAAKlC,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAASqB,EAAGjB,CAAC,EACpW,OAACkB,EAAKrC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CsB,EAAGjB,OAAON,EAAYI,EAAGJ,EAAYK,CAAC,EACxII,EAAM,CACJlB,UAAWA,MAAAA,EAA6C,KAAA,EAASA,EAAUU,QAC3ET,YAAaA,MAAAA,EAAiD,KAAA,EAASA,EAAYS,OACrF,CAAC,EAED,OAACe,EAAK9B,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8Ce,EAAGN,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAgB/B,EAChB,OAACR,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAG0B,OAAOS,EAAKb,YAAYK,EAAGQ,EAAKb,YAAYM,CAAC,EAClJ,OAAC1B,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG2B,OAAOM,EAAKZ,YAAYI,EAAGQ,EAAKZ,YAAYK,CAAC,EAClJI,EAAM,CACJlB,UAAWqB,EAAKrB,UAChBC,YAAaoB,EAAKpB,WACpB,CAAC,EACD,OAACX,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAG6B,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxB,IAAQrC,EACRgB,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBV,UAAW,OAAClB,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAAS5B,EAAGkB,UAChHC,YAAa,OAACf,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAASxB,EAAGe,YAClHO,YAAaX,EAAWa,QACxBD,YAAac,CACf,CAAC,CACH,CACF,GAEA,CAAC9C,QAAQO,KAAKiD,UAAW,CACvB3B,KAAM,SAAcxB,GAClB,IAAgCkD,EAC5BvB,EAAc3B,EAAG2B,YAMjByB,GAJJ,OAAChD,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGwC,UAAU,EAAG,EAAG,OAACtC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGuC,MAAO,OAACrC,EAAKI,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASpB,EAAGsC,MAAM,EAChXR,EAAU,EACV,OAACb,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGI,UAAU,EAE/FwB,EAAS,CACvBtC,WAAYA,EAAWa,QACvBD,YAAaA,CACf,CAAC,GACD,OAACoB,EAAKlC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CmB,EAAGO,KAAKF,EAAUrB,EAAGqB,EAAUpB,EAAGuB,KAAKC,IAAI7B,EAAYI,GAAK,OAACiB,EAAKjC,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAASoB,EAAGjB,EAAE,EAAGwB,KAAKC,IAAI7B,EAAYK,GAAK,OAACiB,EAAKlC,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAASqB,EAAGjB,EAAE,CAAC,EACpbI,EAAM,CACJlB,UAAWA,MAAAA,EAA6C,KAAA,EAASA,EAAUU,QAC3ET,YAAaA,MAAAA,EAAiD,KAAA,EAASA,EAAYS,OACrF,CAAC,EAED,OAACsB,EAAKrC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CsB,EAAGb,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAYjC,EACZ,OAACN,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGkD,KAAKf,EAAKR,EAAGQ,EAAKP,EAAGO,EAAKM,MAAON,EAAKO,MAAM,EACjJV,EAAM,CACJlB,UAAWqB,EAAKrB,UAChBC,YAAaoB,EAAKpB,WACpB,CAAC,EACD,OAACb,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG+B,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxB,IAAYnC,EACR8C,EAAYC,EAAS,CACvBtC,WAAYA,EAAWa,QACvBD,YAAac,CACf,CAAC,EACDrB,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBV,UAAW,OAAClB,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAAS5B,EAAGkB,UAChHC,YAAa,OAACf,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAASxB,EAAGe,YAClHY,EAAGqB,EAAUrB,EACbC,EAAGoB,EAAUpB,EACba,MAAOU,KAAKC,IAAIf,EAAMV,GAAK,OAACzB,EAAKS,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAAStB,EAAGyB,EAAE,EACvJe,OAAQS,KAAKC,IAAIf,EAAMT,GAAK,OAACxB,EAAKO,MAAAA,EAA+C,KAAA,EAASA,EAAWa,SAAqC,KAAA,EAASpB,EAAGwB,EAAE,CAC1J,CAAC,CACH,CACF,GAEA,CAACrC,QAAQO,KAAKuD,OAAQ,CACpBjC,KAAM,SAAcxB,GAClB,IAAwBgD,EACpBrB,EAAc3B,EAAG2B,YAMjByB,GAJJ,OAAChD,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGwC,UAAU,EAAG,EAAG,OAACtC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGuC,MAAO,OAACrC,EAAKI,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASpB,EAAGsC,MAAM,EAChXR,EAAU,EACV,OAACb,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGI,UAAU,EAE/FwB,EAAS,CACvBtC,WAAYA,EAAWa,QACvBD,YAAaA,CACf,CAAC,GACG+B,EAASC,EAA0B,CACrCC,GAAIjC,EACJkC,GAAI9C,EAAWa,OACjB,CAAC,EACD,OAACmB,EAAKlC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CmB,EAAGe,QAAQV,EAAUrB,EAAGqB,EAAUpB,EAAG0B,EAAQA,EAAQ,GAAKH,KAAKQ,GAAK,IAAK,EAAG,EAAIR,KAAKQ,EAAE,EACzL3B,EAAM,CACJlB,UAAWA,MAAAA,EAA6C,KAAA,EAASA,EAAUU,QAC3ET,YAAaA,MAAAA,EAAiD,KAAA,EAASA,EAAYS,OACrF,CAAC,EAED,OAACoB,EAAKnC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CoB,EAAGX,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAYjC,EACZ,OAACN,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAG0D,QAAQvB,EAAKR,EAAGQ,EAAKP,EAAGO,EAAKyB,QAASzB,EAAK0B,QAAS1B,EAAK2B,SAAU3B,EAAK4B,WAAY5B,EAAK6B,QAAQ,EACtMhC,EAAM,CACJlB,UAAWqB,EAAKrB,UAChBC,YAAaoB,EAAKpB,WACpB,CAAC,EACD,OAACb,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG+B,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxB,IAAQrC,EACJiE,EAAShB,EAAS,CACpBtC,WAAYA,EAAWa,QACvBD,YAAac,CACf,CAAC,EACGiB,EAASC,EAA0B,CACrCC,GAAInB,EACJoB,GAAI9C,MAAAA,EAA+C,KAAA,EAASA,EAAWa,OACzE,CAAC,EACDR,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBV,UAAW,OAAClB,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAAS5B,EAAGkB,UAChHC,YAAa,OAACf,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAASxB,EAAGe,YAClHY,EAAGsC,EAAOtC,EACVC,EAAGqC,EAAOrC,EACVgC,QAASN,EACTO,QAASP,EACTQ,SAAU,GAAKX,KAAKQ,GAAK,IACzBI,WAAY,EACZC,SAAU,EAAIb,KAAKQ,EACrB,CAAC,CACH,CACF,GAEA,CAACpE,QAAQO,KAAKoE,SAAU,CACtB9C,KAAM,SAAcxB,GAClB,IACI2B,EAAc3B,EAAG2B,YAKjB4C,GAHJ,OAACnE,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGwC,UAAU,EAAG,EAAG,OAACtC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGuC,MAAO,OAACrC,EAAKI,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASpB,EAAGsC,MAAM,EAChXR,EAAU,EACV,OAACb,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGI,UAAU,EAClG2C,EAAS,CACpBzD,WAAYA,EAAWa,QACvBD,YAAaA,CACf,CAAC,GACD,OAACoB,EAAKlC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CmB,EAAGjB,OAAOyC,EAAO,GAAGxC,EAAGwC,EAAO,GAAGvC,CAAC,EACpI,OAACgB,EAAKnC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CoB,EAAGf,OAAOsC,EAAO,GAAGxC,EAAGwC,EAAO,GAAGvC,CAAC,EACpI,OAACiB,EAAKpC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CqB,EAAGhB,OAAOsC,EAAO,GAAGxC,EAAGwC,EAAO,GAAGvC,CAAC,EACpI,OAACkB,EAAKrC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CsB,EAAGuB,UAAU,EAC/GrC,EAAM,CACJlB,UAAWA,MAAAA,EAA6C,KAAA,EAASA,EAAUU,QAC3ET,YAAaA,MAAAA,EAAiD,KAAA,EAASA,EAAYS,OACrF,CAAC,EAED,OAACe,EAAK9B,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8Ce,EAAGN,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAwBQ,EACxB,OAAC/C,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAG0B,OAAOS,EAAKgC,OAAO,GAAGxC,EAAGQ,EAAKgC,OAAO,GAAGvC,CAAC,EAC9I,OAAC1B,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG2B,OAAOM,EAAKgC,OAAO,GAAGxC,EAAGQ,EAAKgC,OAAO,GAAGvC,CAAC,EAC9I,OAACxB,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAGyB,OAAOM,EAAKgC,OAAO,GAAGxC,EAAGQ,EAAKgC,OAAO,GAAGvC,CAAC,EAC9I,OAACP,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGgD,UAAU,EAC/GrC,EAAM,CACJlB,UAAWqB,EAAKrB,UAChBC,YAAaoB,EAAKpB,WACpB,CAAC,EACD,OAAC4B,EAAKlC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CmB,EAAGV,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxB,IAAQrC,EACJmE,EAASC,EAAS,CACpBzD,WAAYA,EAAWa,QACvBD,YAAac,CACf,CAAC,EACDrB,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBV,UAAW,OAAClB,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAAS5B,EAAGkB,UAChHC,YAAa,OAACf,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAASxB,EAAGe,YAClHoD,OAAQA,CACV,CAAC,CACH,CACF,GAEA,CAAC5E,QAAQO,KAAKwE,OAAQ,CACpBlD,KAAM,SAAcxB,GAClB,IAAgByB,EACZC,EAAc1B,EAAG0B,YACnBC,EAAc3B,EAAG2B,YACnB,OAACvB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAGyB,UAAU,EAC/G,OAACvB,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAGwB,OAAOJ,EAAYK,EAAGL,EAAYM,CAAC,EACxI,OAACxB,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAGyB,OAAON,EAAYI,EAAGJ,EAAYK,CAAC,EACxIZ,EAAMQ,QAAQM,KAAK,CACjBC,MAAOlB,EAASW,QAChBF,YAAaA,EACbC,YAAaA,CACf,CAAC,EACDd,EAAIe,QAAQV,UAAY,GACxBL,EAAIe,QAAQT,YAAc,OAC1BN,EAAIe,QAAQ+C,QAAU,QACtB9D,EAAIe,QAAQgD,SAAW,QACvB,OAACnD,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAGY,OAAO,CAC9G,EACAC,UAAW,SAAmBC,GAC5B,IAAgB/B,EAChB,OAACR,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG6B,UAAU,EAC/G,OAACzB,EAAKS,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CxB,EAAG0B,OAAOS,EAAKb,YAAYK,EAAGQ,EAAKb,YAAYM,CAAC,EAClJ,OAAC1B,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAG2B,OAAOM,EAAKZ,YAAYI,EAAGQ,EAAKZ,YAAYK,CAAC,EAClJnB,EAAIe,QAAQV,UAAY,GACxBL,EAAIe,QAAQT,YAAc,OAC1BN,EAAIe,QAAQ+C,QAAU,QACtB9D,EAAIe,QAAQgD,SAAW,QACvB,OAACpE,EAAKK,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CpB,EAAG6B,OAAO,CAC9G,EACAG,QAAS,SAAiBC,GACxBjB,EAAK,CACHE,YAAaV,EAASY,QACtBD,YAAac,CACf,CAAC,CACH,CACF,GAAG,CAAC,EAMJ,SAASL,EAAMpC,GACb,IAAIkB,EAAYlB,EAAGkB,UACjBC,EAAcnB,EAAGmB,YACnBN,EAAIe,QAAQV,UAAYA,EACxBL,EAAIe,QAAQT,YAAcA,EAC1BN,EAAIe,QAAQ+C,QAAU,QACtB9D,EAAIe,QAAQgD,SAAW,OACzB,CAMA,SAASJ,EAASxE,GAChB,IAAIe,EAAaf,EAAGe,WAClBY,EAAc3B,EAAG2B,YACf1E,EAAIoG,EAAS,CACftC,WAAYA,EACZY,YAAaA,CACf,CAAC,EACGkD,EAAItB,KAAKC,IAAI7B,EAAYI,EAAIhB,EAAWgB,CAAC,EACzC+C,EAAIvB,KAAKC,IAAI7B,EAAYK,EAAIjB,EAAWiB,CAAC,EAa7C,MAAO,CAZM,CACXD,EAAG9E,EAAE8E,EACLC,EAAG/E,EAAE+E,EAAI8C,CACX,EACa,CACX/C,EAAG9E,EAAE8E,EAAI8C,EAAI,EACb7C,EAAG/E,EAAE+E,CACP,EACa,CACXD,EAAG9E,EAAE8E,EAAI8C,EACT7C,EAAG/E,EAAE+E,EAAI8C,CACX,EAEF,CAMA,SAASC,EAAyB/E,GAChC,IACIgF,EAAUhF,EAAGgF,QACfC,EAAUjF,EAAGiF,QACX3E,EAAK,OAACF,EAAKQ,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASxB,EAAG8E,sBAAsB,EAGtJ,MAAO,CACLnD,EAAGiD,EAHC1E,EAAGyB,EAIPC,EAAGiD,EAHC3E,EAAG0B,CAIT,CACF,CAOA,SAAS2B,EAA0B3D,GACjC,IAAI6D,EAAK7D,EAAG6D,GACVD,EAAK5D,EAAG4D,GACNuB,EAAMtB,EAAG9B,EACXqD,EAAMvB,EAAG7B,EACPqD,EAAMzB,EAAG7B,EACXuD,EAAM1B,EAAG5B,EACX,OAAOuB,KAAKgC,KAAKhC,KAAKiC,IAAIH,EAAMF,EAAK,CAAC,EAAI5B,KAAKiC,IAAIF,EAAMF,EAAK,CAAC,CAAC,CAClE,CAIA,SAAS9C,IACP,IAAK,IAAIpF,EAAI,EAAGA,EAAIkE,EAAMQ,QAAQvE,OAAQH,CAAC,GAAI,CAC7C,IAAIqF,EAAOnB,EAAMQ,QAAQ1E,GACzBoE,EAAOM,QAAQnD,IAAI8D,EAAKJ,KAAK,EAAEG,UAAUC,CAAI,CAC/C,CACF,CAMA,SAASc,EAASrD,GAChB,IAAIe,EAAaf,EAAGe,WAClBY,EAAc3B,EAAG2B,YACnB,OAAIA,EAAYI,GAAKhB,EAAWgB,GAAKJ,EAAYK,GAAKjB,EAAWiB,EAExDL,EACEA,EAAYI,GAAKhB,EAAWgB,GAAKJ,EAAYK,GAAKjB,EAAWiB,EAE/D,CACLD,EAAGJ,EAAYI,EACfC,EAAGjB,EAAWiB,CAChB,EACSL,EAAYI,GAAKhB,EAAWgB,GAAKJ,EAAYK,GAAKjB,EAAWiB,EAE/D,CACLD,EAAGhB,EAAWgB,EACdC,EAAGL,EAAYK,CACjB,EACSL,EAAYI,GAAKhB,EAAWgB,GAAKJ,EAAYK,GAAKjB,EAAWiB,EAE/DjB,EAFF,KAAA,CAIT,CAMA,SAASS,EAAKxB,GACZ,IAAII,EACAsB,EAAc1B,EAAG0B,YACnBC,EAAc3B,EAAG2B,aACP,OAACvB,EAAKkB,MAAAA,EAAuC,KAAA,EAASA,EAAOM,SAAqC,KAAA,EAASxB,EAAG3B,IAAIwC,EAASW,OAAO,GACxIJ,KAAK,CACTE,YAAaA,EACbC,YAAaA,CACf,CAAC,CACH,CAEA,SAAS8D,EAAYC,GACnBC,EAAKD,CAAC,CACR,CACA,SAASE,EAAYF,GACnBC,EAAK9I,SAASA,SAAS,GAAI6I,CAAC,EAAG,CAC7BV,QAASU,EAAEG,cAAc,GAAGb,QAC5BC,QAASS,EAAEG,cAAc,GAAGZ,OAC9B,CAAC,CAAC,CACJ,CACA,SAASa,EAAUJ,GACjBK,EAAIL,CAAC,CACP,CACA,SAASM,EAAWN,GAClBK,EAAIlJ,SAASA,SAAS,GAAI6I,CAAC,EAAG,CAC5BV,QAASU,EAAEO,eAAe,GAAGjB,QAC7BC,QAASS,EAAEO,eAAe,GAAGhB,OAC/B,CAAC,CAAC,CACJ,CAKA,SAASiB,EAAMR,GACb,IAEIV,EAAUU,EAAEV,QACdC,EAAUS,EAAET,QACdlE,EAAWa,QAAUZ,EAASY,QAAUmD,EAAyB,CAC/DC,QAASA,EACTC,QAASA,CACX,CAAC,EACD,OAACjF,EAAKU,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8C5B,EAAGmG,iBAAiB,YAAaV,CAAW,EACzK,OAACrF,EAAKM,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CxB,EAAG+F,iBAAiB,UAAWL,CAAS,EACrK,OAACxF,EAAKI,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CtB,EAAG6F,iBAAiB,YAAaP,CAAW,EACzK,OAACpF,EAAKE,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CpB,EAAG2F,iBAAiB,WAAYH,CAAU,CACzK,CAKA,SAASL,EAAKD,GAGRjD,EAAQsC,EAAyB,CACnCC,QAHYU,EAAEV,QAIdC,QAHUS,EAAET,OAId,CAAC,EACDzD,EAAK,CACHE,YAAaV,EAASY,QACtBD,YAAac,CACf,CAAC,EACDzB,EAASY,QAAUa,CACrB,CAKA,SAASsD,EAAIL,GACX,IAAgBlF,EAGZiC,EAAQsC,EAAyB,CACnCC,QAHYU,EAAEV,QAIdC,QAHUS,EAAET,OAId,CAAC,EACD,OAACjF,EAAKsB,MAAAA,EAAuC,KAAA,EAASA,EAAOM,QAAQnD,IAAIwC,EAASW,OAAO,IAAwC5B,EAAGwC,QAAQC,CAAK,EACjJ1B,EAAWa,QAAU,MACrBZ,EAASY,QAAU,QAClBxB,EAAKM,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CxB,EAAGgG,oBAAoB,YAAaX,CAAW,EAC5K,OAACnF,EAAKI,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CtB,EAAG8F,oBAAoB,UAAWN,CAAS,EACxK,OAACtF,EAAKE,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CpB,EAAG4F,oBAAoB,YAAaR,CAAW,EAC5K,OAACnE,EAAKf,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CH,EAAG2E,oBAAoB,WAAYJ,CAAU,CAC5K,CAIA,SAASK,IACP,IAAY/F,EACZ,OAACN,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8C5B,EAAG4C,UAAU,EAAG,EAAG,OAACxC,EAAKQ,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASxB,EAAGyC,MAAO,OAACvC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGwC,MAAM,EAChX9B,EAASY,QAAUb,EAAWa,QAAU,KACxCR,EAAMQ,QAAU,GAChBP,EAAWO,QAAU,CACvB,CAQA,SAAS0E,EAAUC,EAAiBC,EAAMC,GACxC,IAAgBjG,EAA4BkG,EAC5C,GAAIH,EAAiB,CAQnB,IAPA,IAAII,EAAKnH,cAAcN,QAAQ0H,WAAWL,CAAe,EACvDM,EAAIF,EAAG,GACPG,EAAIH,EAAG,GACPI,EAAIJ,EAAG,GACLK,EAAa,GAEbC,EAAc,OAACjH,EAAKa,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAAS5B,EAAGkH,aAAa,EAAG,EAAG,OAAC9G,EAAKQ,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASxB,EAAGyC,MAAO,OAACvC,EAAKM,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAStB,EAAGwC,MAAM,EAC5X5F,EAAI,EAAGA,GAAK,OAACsD,EAAKyG,MAAAA,EAAiD,KAAA,EAASA,EAAYE,MAAkC,KAAA,EAAS3G,EAAGnD,QAASH,GAAK,EAE3H,IAA5B+J,EAAYE,KAAKjK,EAAI,KACvB+J,EAAYE,KAAKjK,GAAK2J,EACtBI,EAAYE,KAAKjK,EAAI,GAAK4J,EAC1BG,EAAYE,KAAKjK,EAAI,GAAK6J,EAC1BE,EAAYE,KAAKjK,EAAI,GAAK,IAC1B8J,EAAW9E,KAAKhF,CAAC,EACjB8J,EAAW9E,KAAKhF,EAAI,CAAC,EACrB8J,EAAW9E,KAAKhF,EAAI,CAAC,EACrB8J,EAAW9E,KAAKhF,EAAI,CAAC,GAGzB,OAACuE,EAAKZ,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CH,EAAG2F,aAAaH,EAAa,EAAG,CAAC,EAE/HI,EAAS,OAACtE,EAAKnC,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASmB,EAAGuD,UAAUE,GAAQ,YAAaC,CAAO,EAE1KQ,EAAc,OAACjE,EAAKnC,MAAAA,EAAiC,KAAA,EAASA,EAAIe,SAAqC,KAAA,EAASoB,EAAGkE,aAAa,EAAG,EAAG,OAACjE,EAAKrC,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASqB,EAAGJ,MAAO,OAACK,EAAKtC,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASsB,EAAGJ,MAAM,EAKjY,OAJAkE,EAAWM,QAAQ,SAAUC,GAC3BN,EAAYE,KAAKI,GAAS,CAC5B,CAAC,EACD,OAAC5E,EAAK9B,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8Ce,EAAGyE,aAAaH,EAAa,EAAG,CAAC,EAC5HI,CACT,CACA,OAAO,OAACX,EAAK9F,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAS8E,EAAGJ,UAAUE,GAAQ,YAAaC,CAAO,CACtK,CA2EA,OA1EA,EAAIlH,QAAQiI,qBAAqBzH,EAAK,WACpC,MAAO,CAKL0H,QAAS,SAAiBC,GACxBzG,EAASW,QAAU8F,CACrB,EAKAC,eAAgB,SAAwBvF,GACtCjB,EAAYS,QAAUQ,CACxB,EAKAwF,aAAc,SAAsB/E,GAClC3B,EAAUU,QAAUiB,CACtB,EAKAwD,MAAOA,EAQPC,UAAWA,CACb,CACF,CAAC,GACD,EAAI/G,QAAQsI,iBAAiB,WAE3BhH,EAAIe,QAAU,OAAC5B,EAAKY,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAAS5B,EAAG8H,WAAW,IAAI,EADpJ,IAAYxH,EAERyH,GAAW,EAAIzI,kBAAkBJ,SAAS,WAC5C,IAAoBuC,EACpBb,EAAUgB,QAAQiB,MAAQ,OAAC7C,EAAKU,MAAAA,EAAmD,KAAA,EAASA,EAAakB,SAAqC,KAAA,EAAS5B,EAAGgI,YAC1JpH,EAAUgB,QAAQkB,OAAS,OAAC1C,EAAKM,MAAAA,EAAmD,KAAA,EAASA,EAAakB,SAAqC,KAAA,EAASxB,EAAG6H,aAC3J,OAAC3H,EAAKO,MAAAA,EAAiC,KAAA,EAASA,EAAIe,UAA8CtB,EAAGsC,UAAU,EAAG,EAAG,OAACpC,EAAKI,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASpB,EAAGqC,MAAO,OAACpB,EAAKb,MAAAA,EAA6C,KAAA,EAASA,EAAUgB,SAAqC,KAAA,EAASH,EAAGqB,MAAM,EAChXR,EAAU,CACZ,EAAG7B,CAAU,EAGb,OAFAK,EAAGc,QAAU,IAAInC,kBAAkByI,eAAeH,CAAQ,EAC1D,OAACzH,EAAK,OAACF,EAAKU,MAAAA,EAA+B,KAAA,EAASA,EAAGc,SAAqC,KAAA,EAASxB,EAAG+H,UAA8C7H,EAAG7C,KAAK2C,EAAIgI,SAASC,IAAI,EACxK,WACL,IAAIrI,EACJ,OAAO,OAACA,EAAKc,MAAAA,EAA+B,KAAA,EAASA,EAAGc,SAAqC,KAAA,EAAS5B,EAAGsI,WAAW,CACtH,CACF,EAAG,EAAE,GACL,EAAI/I,QAAQsI,iBAAiB,WAC3B,IAAQzH,EACR,SAASmI,EAAY7C,GACnBQ,EAAMR,CAAC,CACT,CACA,SAAS8C,EAAa9C,GACpBQ,EAAMrJ,SAASA,SAAS,GAAI6I,CAAC,EAAG,CAC9BV,QAASU,EAAEG,cAAc,GAAGb,QAC5BC,QAASS,EAAEG,cAAc,GAAGZ,OAC9B,CAAC,CAAC,CACJ,CAGA,OAFA,OAACjF,EAAKU,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8C5B,EAAGmG,iBAAiB,YAAaoC,CAAW,EACzK,OAACnI,EAAKM,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CxB,EAAG+F,iBAAiB,aAAcqC,CAAY,EACpK,WACL,IAAQpI,EACR,OAACJ,EAAKU,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8C5B,EAAGoG,oBAAoB,YAAamC,CAAW,EAC5K,OAACnI,EAAKM,MAAAA,EAAmD,KAAA,EAASA,EAAakB,UAA8CxB,EAAGgG,oBAAoB,aAAcoC,CAAY,CAChL,CACF,EAAG,EAAE,EACEjJ,QAAQL,QAAQuJ,cAAc,MAAO,CAC1C1I,IAAKW,EACLgI,WAAW,EAAIvJ,aAAaD,SAASU,eAAgBE,EAAM4I,WAAa,EAAE,EAC1EtG,MAAOtC,EAAMsC,OAAS,EACxB,EAAG7C,QAAQL,QAAQuJ,cAAc,SAAU,CACzC1I,IAAKa,CACP,CAAC,CAAC,CACJ,EACI+H,cAAe,EAAIpJ,QAAQqJ,OAAM,EAAIrJ,QAAQsJ,YAAYhJ,YAAY,CAAC,EAE1E8I,aAAaG,UAAYpJ,YAAYR,QACrCE,QAAQF,QAAUyJ"}