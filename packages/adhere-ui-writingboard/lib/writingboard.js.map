{"version":3,"file":"writingboard.js","sources":["writingboard.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar types_1 = require(\"./types\");\r\nvar selectorPrefix = 'adhere-ui-writingboard';\r\n/**\r\n * WritingBoard\r\n * @param props\r\n * @param ref\r\n * @constructor\r\n */\r\nfunction WritingBoard(props, ref) {\r\n    var containerRef = react_1.useRef(null);\r\n    var canvasRef = react_1.useRef(null);\r\n    var ctx = react_1.useRef(null);\r\n    var rect = react_1.useRef(null);\r\n    var startPoint = react_1.useRef(null);\r\n    var prePoint = react_1.useRef(null);\r\n    var curShape = react_1.useRef(props.mode);\r\n    var stack = react_1.useRef([]);\r\n    var stackIndex = react_1.useRef(0);\r\n    var config = react_1.useRef(new Map([\r\n        // 自由模式\r\n        [\r\n            types_1.Mode.FREE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e;\r\n                    var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        sourcePoint: sourcePoint,\r\n                        targetPoint: targetPoint,\r\n                    });\r\n                    style({\r\n                        lineWidth: props.lineWidth,\r\n                        strokeStyle: props.strokeStyle,\r\n                    });\r\n                    // 描边\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    draw({ sourcePoint: prePoint, targetPoint: point });\r\n                },\r\n            },\r\n        ],\r\n        // 直线\r\n        [\r\n            types_1.Mode.LINE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x, (_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y);\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.lineTo(targetPoint.x, targetPoint.y);\r\n                    style({\r\n                        lineWidth: props.lineWidth,\r\n                        strokeStyle: props.strokeStyle,\r\n                    });\r\n                    // 描边\r\n                    (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        sourcePoint: startPoint,\r\n                        targetPoint: point,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 矩形\r\n        [\r\n            types_1.Mode.RECTANGLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    // 判断target在start的四个方向\r\n                    var rectStart = getPoint({ startPoint: startPoint, targetPoint: targetPoint });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.rect(rectStart.x, rectStart.y, Math.abs(targetPoint.x - ((_g = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _g === void 0 ? void 0 : _g.x)), Math.abs(targetPoint.y - ((_h = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _h === void 0 ? void 0 : _h.y)));\r\n                    style({\r\n                        lineWidth: props.lineWidth,\r\n                        strokeStyle: props.strokeStyle,\r\n                    });\r\n                    // 描边\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.rect(item.x, item.y, item.width, item.height);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b, _c, _d;\r\n                    var rectStart = getPoint({ startPoint: startPoint, targetPoint: point });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        x: rectStart.x,\r\n                        y: rectStart.y,\r\n                        width: Math.abs(point.x - ((_c = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _c === void 0 ? void 0 : _c.x)),\r\n                        height: Math.abs(point.y - ((_d = startPoint === null || startPoint === void 0 ? void 0 : startPoint.current) === null || _d === void 0 ? void 0 : _d.y)),\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 圆形\r\n        [\r\n            types_1.Mode.CIRCLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    // 判断target在start的四个方向\r\n                    var rectStart = getPoint({ startPoint: startPoint, targetPoint: targetPoint });\r\n                    var radius = getDistanceByBetweenPoint({ p2: targetPoint, p1: startPoint });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.ellipse(rectStart.x, rectStart.y, radius, radius, (45 * Math.PI) / 180, 0, 2 * Math.PI);\r\n                    style({\r\n                        lineWidth: props.lineWidth,\r\n                        strokeStyle: props.strokeStyle,\r\n                    });\r\n                    // 描边\r\n                    (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.ellipse(item.x, item.y, item.radiusX, item.radiusY, item.rotation, item.startAngle, item.endAngle);\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    var center = getPoint({ startPoint: startPoint, targetPoint: point });\r\n                    var radius = getDistanceByBetweenPoint({ p2: point, p1: startPoint });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        x: center.x,\r\n                        y: center.y,\r\n                        radiusX: radius,\r\n                        radiusY: radius,\r\n                        rotation: (45 * Math.PI) / 180,\r\n                        startAngle: 0,\r\n                        endAngle: 2 * Math.PI,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 三角形(多边形)\r\n        [\r\n            types_1.Mode.TRIANGLE,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n                    var targetPoint = _a.targetPoint;\r\n                    // 清除画布\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.clearRect(0, 0, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.width, (_d = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _d === void 0 ? void 0 : _d.height);\r\n                    drawStack();\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.beginPath();\r\n                    var points = triangle({ startPoint: startPoint, targetPoint: targetPoint });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.moveTo(points[0].x, points[0].y);\r\n                    (_g = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _g === void 0 ? void 0 : _g.lineTo(points[1].x, points[1].y);\r\n                    (_h = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _h === void 0 ? void 0 : _h.lineTo(points[2].x, points[2].y);\r\n                    (_j = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _j === void 0 ? void 0 : _j.closePath();\r\n                    style({\r\n                        lineWidth: props.lineWidth,\r\n                        strokeStyle: props.strokeStyle,\r\n                    });\r\n                    // 描边\r\n                    (_k = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _k === void 0 ? void 0 : _k.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d, _e, _f;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.points[0].x, item.points[0].y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.points[1].x, item.points[1].y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(item.points[2].x, item.points[2].y);\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.closePath();\r\n                    style({\r\n                        lineWidth: item.lineWidth,\r\n                        strokeStyle: item.strokeStyle,\r\n                    });\r\n                    (_f = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _f === void 0 ? void 0 : _f.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    var _a, _b;\r\n                    var points = triangle({ startPoint: startPoint, targetPoint: point });\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        lineWidth: (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.lineWidth,\r\n                        strokeStyle: (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.strokeStyle,\r\n                        points: points,\r\n                    });\r\n                },\r\n            },\r\n        ],\r\n        // 橡皮\r\n        [\r\n            types_1.Mode.RUBBER,\r\n            {\r\n                draw: function (_a) {\r\n                    var _b, _c, _d, _e;\r\n                    var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.beginPath();\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.moveTo(sourcePoint.x, sourcePoint.y);\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.lineTo(targetPoint.x, targetPoint.y);\r\n                    stack.current.push({\r\n                        shape: curShape.current,\r\n                        sourcePoint: sourcePoint,\r\n                        targetPoint: targetPoint,\r\n                    });\r\n                    ctx.current.lineWidth = 15;\r\n                    ctx.current.strokeStyle = '#fff';\r\n                    ctx.current.lineCap = 'round';\r\n                    ctx.current.lineJoin = 'round';\r\n                    (_e = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _e === void 0 ? void 0 : _e.stroke();\r\n                },\r\n                drawStack: function (item) {\r\n                    var _a, _b, _c, _d;\r\n                    (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.beginPath();\r\n                    (_b = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _b === void 0 ? void 0 : _b.moveTo(item.sourcePoint.x, item.sourcePoint.y);\r\n                    (_c = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _c === void 0 ? void 0 : _c.lineTo(item.targetPoint.x, item.targetPoint.y);\r\n                    ctx.current.lineWidth = 15;\r\n                    ctx.current.strokeStyle = '#fff';\r\n                    ctx.current.lineCap = 'round';\r\n                    ctx.current.lineJoin = 'round';\r\n                    (_d = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _d === void 0 ? void 0 : _d.stroke();\r\n                },\r\n                mouseup: function (point) {\r\n                    draw({ sourcePoint: prePoint, targetPoint: point });\r\n                },\r\n            },\r\n        ],\r\n    ]));\r\n    /**\r\n     * style\r\n     * @param lineWidth\r\n     * @param strokeStyle\r\n     */\r\n    function style(_a) {\r\n        var lineWidth = _a.lineWidth, strokeStyle = _a.strokeStyle;\r\n        ctx.current.lineWidth = lineWidth;\r\n        ctx.current.strokeStyle = strokeStyle;\r\n        ctx.current.lineCap = 'round';\r\n        ctx.current.lineJoin = 'round';\r\n    }\r\n    /**\r\n     * triangle - 获取三角形的三个点坐标\r\n     * @param startPoint\r\n     * @param targetPoint\r\n     */\r\n    function triangle(_a) {\r\n        var startPoint = _a.startPoint, targetPoint = _a.targetPoint;\r\n        var s = getPoint({ startPoint: startPoint, targetPoint: targetPoint });\r\n        var w = Math.abs(targetPoint.x - startPoint.x);\r\n        var h = Math.abs(targetPoint.y - startPoint.y);\r\n        var point1 = {\r\n            x: s.x,\r\n            y: s.y + h,\r\n        };\r\n        var point2 = {\r\n            x: s.x + w / 2,\r\n            y: s.y,\r\n        };\r\n        var point3 = {\r\n            x: s.x + w,\r\n            y: s.y + h,\r\n        };\r\n        return [point1, point2, point3];\r\n    }\r\n    /**\r\n     * devicePointToCanvasPoint\r\n     * @param pageX\r\n     * @param pageY\r\n     */\r\n    function devicePointToCanvasPoint(_a) {\r\n        var pageX = _a.pageX, pageY = _a.pageY;\r\n        var _b = rect.current, x = _b.x, y = _b.y;\r\n        return {\r\n            x: pageX - x,\r\n            y: pageY - y,\r\n        };\r\n    }\r\n    /**\r\n     * getDistanceByBetweenPoint\r\n     * @description 获取p1,p2两点间的距离\r\n     * @param p1\r\n     * @param p2\r\n     */\r\n    function getDistanceByBetweenPoint(_a) {\r\n        var p1 = _a.p1, p2 = _a.p2;\r\n        var Ax1 = p1.x, Ay1 = p1.y;\r\n        var Ax2 = p2.x, Ay2 = p2.y;\r\n        return Math.sqrt(Math.pow(Ax2 - Ax1, 2) + Math.pow(Ay2 - Ay1, 2)); // 计算A1A2的长度\r\n    }\r\n    /**\r\n     * drawStack\r\n     */\r\n    function drawStack() {\r\n        for (var i = 0; i < stack.current.length; i++) {\r\n            var item = stack[i];\r\n            config.current.get(item.shape).drawStack(item);\r\n        }\r\n    }\r\n    /**\r\n     * getPoint\r\n     * @param startPoint\r\n     * @param targetPoint\r\n     */\r\n    function getPoint(_a) {\r\n        var startPoint = _a.startPoint, targetPoint = _a.targetPoint;\r\n        if (targetPoint.x <= startPoint.x && targetPoint.y <= startPoint.y) {\r\n            // leftTop\r\n            return targetPoint;\r\n        }\r\n        else if (targetPoint.x <= startPoint.x && targetPoint.y >= startPoint.y) {\r\n            // leftBottom\r\n            return {\r\n                x: targetPoint.x,\r\n                y: startPoint.y,\r\n            };\r\n        }\r\n        else if (targetPoint.x >= startPoint.x && targetPoint.y <= startPoint.y) {\r\n            // rightTop\r\n            return {\r\n                x: startPoint.x,\r\n                y: targetPoint.y,\r\n            };\r\n        }\r\n        else if (targetPoint.x >= startPoint.x && targetPoint.y >= startPoint.y) {\r\n            // rightBottom\r\n            return startPoint;\r\n        }\r\n    }\r\n    /**\r\n     * draw\r\n     * @param sourcePoint\r\n     * @param targetPoint\r\n     */\r\n    function draw(_a) {\r\n        var _b;\r\n        var sourcePoint = _a.sourcePoint, targetPoint = _a.targetPoint;\r\n        var entry = (_b = config === null || config === void 0 ? void 0 : config.current) === null || _b === void 0 ? void 0 : _b.get(curShape.current);\r\n        entry.draw({ sourcePoint: sourcePoint, targetPoint: targetPoint });\r\n    }\r\n    // 注册事件\r\n    function onMousemove(e) {\r\n        move(e);\r\n    }\r\n    function onTouchmove(e) {\r\n        move(__assign(__assign({}, e), { pageX: e.targetTouches[0].pageX, pageY: e.targetTouches[0].pageY }));\r\n    }\r\n    function onMouseup(e) {\r\n        end(e);\r\n    }\r\n    function onTouchend(e) {\r\n        end(__assign(__assign({}, e), { pageX: e.targetTouches[0].pageX, pageY: e.targetTouches[0].pageY }));\r\n    }\r\n    /**\r\n     * start\r\n     * @param e\r\n     */\r\n    function start(e) {\r\n        var _a, _b, _c, _d;\r\n        // 屏幕坐标转换成canvas坐标\r\n        var pageX = e.pageX, pageY = e.pageY;\r\n        startPoint.current = prePoint.current = devicePointToCanvasPoint({ pageX: pageX, pageY: pageY });\r\n        (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousemove', onMousemove);\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseup', onMouseup);\r\n        (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchmove', onTouchmove);\r\n        (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.addEventListener('touchend', onTouchend);\r\n    }\r\n    /**\r\n     * move\r\n     * @param e\r\n     */\r\n    function move(e) {\r\n        var pageX = e.pageX, pageY = e.pageY;\r\n        var point = devicePointToCanvasPoint({ pageX: pageX, pageY: pageY });\r\n        draw({ sourcePoint: prePoint, targetPoint: point });\r\n        prePoint.current = point;\r\n    }\r\n    /**\r\n     * end\r\n     * @param e\r\n     */\r\n    function end(e) {\r\n        var _a, _b, _c, _d, _e;\r\n        var pageX = e.pageX, pageY = e.pageY;\r\n        var point = devicePointToCanvasPoint({ pageX: pageX, pageY: pageY });\r\n        (_a = config === null || config === void 0 ? void 0 : config.current.get(curShape.current)) === null || _a === void 0 ? void 0 : _a.mouseup(point);\r\n        startPoint.current = null;\r\n        prePoint.current = null;\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mousemove', onMousemove);\r\n        (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('mouseup', onMouseup);\r\n        (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchmove', onTouchmove);\r\n        (_e = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _e === void 0 ? void 0 : _e.removeEventListener('touchend', onTouchend);\r\n    }\r\n    react_1.useImperativeHandle(ref, function () { return ({\r\n        /**\r\n         * clear\r\n         * @description 清除画布\r\n         */\r\n        clear: function () {\r\n            var _a, _b, _c;\r\n            (_a = ctx === null || ctx === void 0 ? void 0 : ctx.current) === null || _a === void 0 ? void 0 : _a.clearRect(0, 0, (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.width, (_c = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _c === void 0 ? void 0 : _c.height);\r\n            prePoint.current = startPoint.current = null;\r\n            stack.current = [];\r\n            stackIndex.current = 0;\r\n        },\r\n        /**\r\n         * toDataURL\r\n         * @description 获取base64\r\n         */\r\n        toDataURL: function () { var _a; return (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.toDataURL('image/png', 1.0); },\r\n    }); });\r\n    react_1.useLayoutEffect(function () {\r\n        var _a, _b, _c, _d;\r\n        ctx.current = (_a = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _a === void 0 ? void 0 : _a.getContext('2d');\r\n        rect.current = (_b = canvasRef === null || canvasRef === void 0 ? void 0 : canvasRef.current) === null || _b === void 0 ? void 0 : _b.getBoundingClientRect();\r\n        canvasRef.current.width = (_c = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _c === void 0 ? void 0 : _c.offsetWidth;\r\n        canvasRef.current.height = (_d = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _d === void 0 ? void 0 : _d.offsetHeight;\r\n    }, []);\r\n    react_1.useLayoutEffect(function () {\r\n        var _a, _b;\r\n        function onMousedown(e) {\r\n            start(e);\r\n        }\r\n        function onTouchstart(e) {\r\n            start(__assign(__assign({}, e), { pageX: e.targetTouches[0].pageX, pageY: e.targetTouches[0].pageY }));\r\n        }\r\n        (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('mousedown', onMousedown);\r\n        (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('touchstart', onTouchstart);\r\n        return function () {\r\n            var _a, _b;\r\n            (_a = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousedown', onMousedown);\r\n            (_b = containerRef === null || containerRef === void 0 ? void 0 : containerRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('touchstart', onTouchstart);\r\n        };\r\n    }, []);\r\n    return (react_1.default.createElement(\"div\", { ref: containerRef, className: classnames_1.default(selectorPrefix, props.className || ''), style: props.style || {} },\r\n        react_1.default.createElement(\"canvas\", { ref: canvasRef })));\r\n}\r\nvar Wrap = react_1.forwardRef(WritingBoard);\r\nWrap.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    mode: types_1.Mode.FREE,\r\n    strokeStyle: '#000',\r\n    lineWidth: 2,\r\n};\r\nWrap.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    // @ts-ignore\r\n    mode: prop_types_1.default.string,\r\n    // @ts-ignore\r\n    strokeStyle: prop_types_1.default.string,\r\n    // @ts-ignore\r\n    lineWidth: prop_types_1.default.number,\r\n};\r\nexports.default = Wrap;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","default","exports","classnames_1","require","prop_types_1","react_1","types_1","selectorPrefix","WritingBoard","props","ref","containerRef","useRef","canvasRef","ctx","rect","startPoint","prePoint","curShape","mode","stack","stackIndex","config","Map","Mode","FREE","draw","_a","sourcePoint","targetPoint","_b","current","beginPath","_c","moveTo","x","y","_d","lineTo","push","shape","style","lineWidth","strokeStyle","_e","stroke","drawStack","item","mouseup","point","LINE","_f","_j","clearRect","width","height","_g","_h","_k","RECTANGLE","rectStart","getPoint","Math","abs","CIRCLE","radius","getDistanceByBetweenPoint","p2","p1","ellipse","PI","radiusX","radiusY","rotation","startAngle","endAngle","center","TRIANGLE","points","triangle","closePath","RUBBER","lineCap","lineJoin","w","h","devicePointToCanvasPoint","pageX","pageY","Ax1","Ay1","Ax2","Ay2","sqrt","pow","onMousemove","e","move","onTouchmove","targetTouches","onMouseup","end","onTouchend","start","addEventListener","removeEventListener","useImperativeHandle","clear","toDataURL","useLayoutEffect","getContext","getBoundingClientRect","offsetWidth","offsetHeight","onMousedown","onTouchstart","createElement","className","Wrap","forwardRef","defaultProps","propTypes","string","object","number"],"mappings":"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"}