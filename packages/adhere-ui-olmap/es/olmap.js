var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};return function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};import{Fill,Stroke,Style,Text}from"ol/style.js";import PropTypes from"prop-types";import React,{createRef}from"react";import Resource from"@baifendian/adhere-util-resource";import Constent from"./constent";import Util from"./util";var selectorPrefix="adhere-ui-olmap",OlMap=function(t){function e(e){var r=t.call(this,e)||this;return r.addClickListener=function(e,t,o){Util.addClickListener(r.map,e,t,o,r.setCursor)},r.setCursor=function(e){r.map.getTarget().style.cursor=e},r.el=createRef(),r.zoom=null,r}return __extends(e,t),e.prototype.componentDidMount=function(){var e=this.props,t=e.mapConfig,o=e.type,r=e.maxZoom,n=e.minZoom,a=e.zoom,i=e.layers,p=e.center,e=e.extent;this.map=Util.createMap(__assign({config:{target:this.el.current},type:o,maxZoom:r,zoom:a,minZoom:n,center:p,extent:e,layers:i},t)),this.zoom=this.map.getView().getZoom()},e.prototype.addMainGeoJSONLayer=function(e){var t=e.geoJSONStyle,e=e.geoJSONData,o=t.stroke,r=t.fill,n=t.text;this.mainGeoLayer=this.addGeoLayer(e,function(){return new Style({fill:new Fill(__assign({},r)),stroke:new Stroke(__assign({},o)),text:new Text(__assign(__assign({},n),{fill:new Fill({color:n.color}),overflow:!0}))})})},e.prototype.addGeoLayer=function(e,t,o){return Util.addGeoLayer(this.map,e,t,o=void 0===o?0:o)},e.prototype.addWindLayer=function(e,t,o){return Util.addWindLayer(this.map,e,t,o=void 0===o?0:o)},e.prototype.addDataLayer=function(e){return Util.addVectorLayer(this.map,e)},e.prototype.addHoverListener=function(e,t,o){Util.addHoverListener(this.map,e,t,o)},e.prototype.addZoomListener=function(o){var r=this;this.map.on("moveend",function(e){var t=r.map.getView().getZoom();t!==r.zoom&&o(t),r.zoom=t})},e.prototype.addOverlay=function(e){return Util.addOverlay(this.map,e)},e.prototype.setOverlayState=function(e,t){Util.setOverlayState(e,t)},e.prototype.clear=function(){for(var e=this.map.getLayers(),t=1;t<e.getLength();t++)this.map.removeLayer(e.item(t))},e.prototype.getMap=function(){return this.map},e.prototype.render=function(){return React.createElement("div",{className:selectorPrefix,ref:this.el})},e}(React.Component);OlMap.defaultProps={type:Constent.MAP_TYPE_ADMINISTRATIVE,mapConfig:{},maxZoom:Resource.Dict.value.ResourceGisMapMaxZoom.value,zoom:Resource.Dict.value.ResourceGisMapMaxZoom.value,fitZoom:Resource.Dict.value.ResourceGisMapMaxZoom.value,minZoom:Resource.Dict.value.ResourceGisMapMinZoom.value,center:Resource.Dict.value.ResourceGisXinbeiquCenterPoint.value,extent:Resource.Dict.value.ResourceGisXinbeiquMapExtent.value,layers:void 0},OlMap.propTypes={type:PropTypes.oneOf([Constent.MAP_TYPE_ADMINISTRATIVE,Constent.MAP_TYPE_SATELLITE]),mapConfig:PropTypes.object,maxZoom:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),zoom:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),fitZoom:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),minZoom:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),center:PropTypes.arrayOf(PropTypes.number),extent:PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)),layers:PropTypes.array};export default OlMap;
//# sourceMappingURL=olmap.js.map
