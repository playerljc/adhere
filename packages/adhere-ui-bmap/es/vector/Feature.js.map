{"version":3,"file":"Feature.js","sources":["vector/Feature.js"],"sourcesContent":["import GeometryStyle from './style/GeometryStyle';\nimport { VectorActions, } from './types';\n/**\n * Feature\n * @class Feature\n * @classdesc 要素\n */\nvar Feature = /** @class */ (function () {\n    function Feature(params) {\n        // 要素的名称\n        this.name = '';\n        // 要素的id\n        this.id = '';\n        // 要素的样式\n        this.style = GeometryStyle;\n        // 要素的层级\n        this.zIndex = 1;\n        // 要素的业务属性\n        this.properties = {};\n        this.name = params === null || params === void 0 ? void 0 : params.name;\n        this.id = params === null || params === void 0 ? void 0 : params.id;\n        this.properties = params === null || params === void 0 ? void 0 : params.properties;\n        this.style = params === null || params === void 0 ? void 0 : params.style;\n        this.geometry = params === null || params === void 0 ? void 0 : params.geometry;\n        this.setGeometryContext();\n    }\n    Feature.prototype.setGeometryContext = function () {\n        this.geometry && this.geometry.setContext(this);\n    };\n    Feature.prototype.draw = function (ctx) {\n        // 绘制geometry(几何形状)\n        this.geometry.draw(ctx, this.style);\n    };\n    Feature.prototype.getGeometry = function () {\n        return this.geometry;\n    };\n    Feature.prototype.getId = function () {\n        return this.id;\n    };\n    Feature.prototype.getName = function () {\n        return this.name;\n    };\n    Feature.prototype.getStyle = function () {\n        return this.style;\n    };\n    Feature.prototype.getZIndex = function () {\n        return this.zIndex;\n    };\n    Feature.prototype.getProperties = function () {\n        return this.properties;\n    };\n    Feature.prototype.setGeometry = function (geom) {\n        var _a, _b;\n        this.geometry = geom;\n        this.setGeometryContext();\n        (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(VectorActions.UPDATE);\n    };\n    Feature.prototype.setStyle = function (style) {\n        var _a, _b;\n        this.style = style;\n        (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(VectorActions.UPDATE);\n    };\n    Feature.prototype.setId = function (id) {\n        this.id = id;\n    };\n    Feature.prototype.setName = function (name) {\n        this.name = name;\n    };\n    Feature.prototype.setZIndex = function (zIndex) {\n        var _a, _b;\n        this.zIndex = zIndex;\n        (_b = (_a = this === null || this === void 0 ? void 0 : this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(VectorActions.UPDATE);\n    };\n    Feature.prototype.setProperties = function (properties) {\n        this.properties = properties;\n    };\n    Feature.prototype.getContext = function () {\n        return this.context;\n    };\n    Feature.prototype.setContext = function (context) {\n        this.context = context;\n    };\n    Feature.prototype.getLayer = function () {\n        var _a;\n        // @ts-ignore\n        return (_a = this === null || this === void 0 ? void 0 : this.getContext()) === null || _a === void 0 ? void 0 : _a.getContext();\n    };\n    Feature.prototype.getMap = function () {\n        var _a;\n        return (_a = this === null || this === void 0 ? void 0 : this.getLayer()) === null || _a === void 0 ? void 0 : _a.getMap();\n    };\n    Feature.prototype.isPointInFeature = function (pixel, style) {\n        return this.geometry.isPixelInGeometry(pixel, style);\n    };\n    return Feature;\n}());\nexport default Feature;\n"],"names":["GeometryStyle","VectorActions","Feature","params","this","name","id","style","zIndex","properties","geometry","setGeometryContext","prototype","setContext","draw","ctx","getGeometry","getId","getName","getStyle","getZIndex","getProperties","setGeometry","geom","_b","_a","getLayer","getEmitter","trigger","UPDATE","setStyle","setId","setName","setZIndex","setProperties","getContext","context","getMap","isPointInFeature","pixel","isPixelInGeometry"],"mappings":"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"}