{"version":3,"file":"airpressurelayer.js","sources":["airpressurelayer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * BMapAirPressureLayer\n * @class BMapAirPressureLayer\n * @classdesc 气压层(绘制多边形)\n */\n// @ts-ignore\nvar BMapAirPressureLayer = /** @class */ (function (_super) {\n    __extends(BMapAirPressureLayer, _super);\n    // @ts-ignore\n    function BMapAirPressureLayer(config) {\n        var _this = this;\n        // @ts-ignore\n        _this.update = _this.update.bind(_this);\n        _this = _super.call(this, {\n            // @ts-ignore\n            update: _this.update,\n            paneName: config.paneName,\n            zIndex: config.zIndex,\n        }) || this;\n        _this.map = null;\n        _this.data = null;\n        _this.config = config;\n        var map = config.map, data = config.data;\n        _this.map = map;\n        _this.data = data;\n        return _this;\n    }\n    /**\n     * update\n     */\n    BMapAirPressureLayer.prototype.update = function () {\n        var _this = this;\n        if (!this.canvas)\n            return;\n        var ctx = (this === null || this === void 0 ? void 0 : this.canvas).getContext('2d');\n        if (!ctx) {\n            return;\n        }\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        var _a = this.config, data = _a.data, style = _a.style;\n        var _loop_1 = function (i) {\n            var points = data[i];\n            var bPoints = [];\n            points.forEach(function (p) {\n                /* @ts-ignore */\n                bPoints.push(new BMap.Point(p.lng, p.lat));\n            });\n            ctx.beginPath();\n            ctx.strokeStyle = style.strokeStyle;\n            ctx.lineJoin = style.lineJoin;\n            ctx.lineWidth = style.lineWidth;\n            bPoints.forEach(function (bPoint, index) {\n                var pixel = _this.map.pointToPixel(bPoint);\n                if (index === 0) {\n                    ctx.moveTo(pixel.x, pixel.y);\n                }\n                else {\n                    ctx.lineTo(pixel.x, pixel.y);\n                }\n            });\n            ctx.stroke();\n        };\n        for (var i = 0; i < data.length; i++) {\n            _loop_1(i);\n        }\n    };\n    return BMapAirPressureLayer;\n}(BMap.CanvasLayer));\nexport default BMapAirPressureLayer;\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","BMapAirPressureLayer","_super","config","_this","map","update","bind","paneName","zIndex","data","canvas","ctx","getContext","clearRect","width","height","_a","style","i","length","_loop_1","points","bPoints","forEach","push","BMap","Point","lng","lat","beginPath","strokeStyle","lineJoin","lineWidth","bPoint","index","pixel","pointToPixel","moveTo","x","y","lineTo","stroke","CanvasLayer"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,iBAClB,CAAEC,UAAW,EAAG,YAAaC,MAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,EAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAAI,IAC/EN,EAAGC,CAAC,CAC7B,EACA,OAAO,SAAUD,EAAGC,GAChB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAE5F,SAASW,IAAOd,KAAKe,YAAcb,CAAG,CADtCD,EAAcC,EAAGC,CAAC,EAElBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACnF,CACH,EAAE,EAOCG,qBAAsC,SAAUC,GAGhD,SAASD,EAAqBE,GAC1B,IAAIC,EAAQpB,KAYRqB,GAVJD,EAAME,OAASF,EAAME,OAAOC,KAAKH,CAAK,GACtCA,EAAQF,EAAOP,KAAKX,KAAM,CAEtBsB,OAAQF,EAAME,OACdE,SAAUL,EAAOK,SACjBC,OAAQN,EAAOM,MACnB,CAAC,GAAKzB,MACAqB,IAAM,KACZD,EAAMM,KAAO,MACbN,EAAMD,OAASA,GACEE,KAAKK,EAAOP,EAAOO,KAGpC,OAFAN,EAAMC,IAAMA,EACZD,EAAMM,KAAOA,EACNN,CACX,CAwCA,OA3DArB,UAAUkB,EAAsBC,CAAM,EAuBtCD,EAAqBR,UAAUa,OAAS,WACpC,IAAIF,EAAQpB,KACZ,GAAKA,KAAK2B,OAAV,CAEA,IAAIC,GAAO5B,MAAAA,KAAmC,KAAA,EAASA,KAAK2B,QAAQE,WAAW,IAAI,EACnF,GAAKD,EAAL,CAGAA,EAAIE,UAAU,EAAG,EAAGF,EAAID,OAAOI,MAAOH,EAAID,OAAOK,MAAM,EAwBvD,IAvBA,IAAIC,EAAKjC,KAAKmB,OAAQO,EAAOO,EAAGP,KAAMQ,EAAQD,EAAGC,MAuBxCC,EAAI,EAAGA,EAAIT,EAAKU,OAAQD,CAAC,GAC9BE,CAvBU,SAAUF,GACpB,IAAIG,EAASZ,EAAKS,GACdI,EAAU,GACdD,EAAOE,QAAQ,SAAUhC,GAErB+B,EAAQE,KAAK,IAAIC,KAAKC,MAAMnC,EAAEoC,IAAKpC,EAAEqC,GAAG,CAAC,CAC7C,CAAC,EACDjB,EAAIkB,UAAU,EACdlB,EAAImB,YAAcb,EAAMa,YACxBnB,EAAIoB,SAAWd,EAAMc,SACrBpB,EAAIqB,UAAYf,EAAMe,UACtBV,EAAQC,QAAQ,SAAUU,EAAQC,GAC1BC,EAAQhC,EAAMC,IAAIgC,aAAaH,CAAM,EAC3B,IAAVC,EACAvB,EAAI0B,OAAOF,EAAMG,EAAGH,EAAMI,CAAC,EAG3B5B,EAAI6B,OAAOL,EAAMG,EAAGH,EAAMI,CAAC,CAEnC,CAAC,EACD5B,EAAI8B,OAAO,CACf,EAEYvB,CAAC,CA1Bb,CAJU,CAgCd,EACOlB,CACX,EAAEyB,KAAKiB,WAAY,iBACJ1C"}