{"version":3,"file":"airpressurelayer.js","sources":["airpressurelayer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * BMapAirPressureLayer\r\n * @class BMapAirPressureLayer\r\n * @classdesc 气压层(绘制多边形)\r\n */\r\n// @ts-ignore\r\nvar BMapAirPressureLayer = /** @class */ (function (_super) {\r\n    __extends(BMapAirPressureLayer, _super);\r\n    // @ts-ignore\r\n    function BMapAirPressureLayer(config) {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        _this.update = _this.update.bind(_this);\r\n        _this = _super.call(this, {\r\n            // @ts-ignore\r\n            update: _this.update,\r\n            paneName: config.paneName,\r\n            zIndex: config.zIndex,\r\n        }) || this;\r\n        _this.map = null;\r\n        _this.data = null;\r\n        _this.config = config;\r\n        var map = config.map, data = config.data;\r\n        _this.map = map;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    /**\r\n     * update\r\n     */\r\n    BMapAirPressureLayer.prototype.update = function () {\r\n        var _this = this;\r\n        if (!this.canvas)\r\n            return;\r\n        var ctx = (this === null || this === void 0 ? void 0 : this.canvas).getContext('2d');\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        var _a = this.config, data = _a.data, style = _a.style;\r\n        var _loop_1 = function (i) {\r\n            var points = data[i];\r\n            var bPoints = [];\r\n            points.forEach(function (p) {\r\n                /* @ts-ignore */\r\n                bPoints.push(new BMap.Point(p.lng, p.lat));\r\n            });\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = style.strokeStyle;\r\n            ctx.lineJoin = style.lineJoin;\r\n            ctx.lineWidth = style.lineWidth;\r\n            bPoints.forEach(function (bPoint, index) {\r\n                var pixel = _this.map.pointToPixel(bPoint);\r\n                if (index === 0) {\r\n                    ctx.moveTo(pixel.x, pixel.y);\r\n                }\r\n                else {\r\n                    ctx.lineTo(pixel.x, pixel.y);\r\n                }\r\n            });\r\n            ctx.stroke();\r\n        };\r\n        for (var i = 0; i < data.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    return BMapAirPressureLayer;\r\n}(BMap.CanvasLayer));\r\nexport default BMapAirPressureLayer;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","BMapAirPressureLayer","_super","config","_this","map","update","bind","call","paneName","zIndex","data","canvas","ctx","getContext","clearRect","width","height","_a","style","i","length","_loop_1","points","bPoints","forEach","push","BMap","Point","lng","lat","beginPath","strokeStyle","lineJoin","lineWidth","bPoint","index","pixel","pointToPixel","moveTo","x","y","lineTo","stroke","CanvasLayer"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,EAAG,YAAaC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,GAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAAI,GACxDN,EAAGC,CAAC,CAC7B,EACA,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,CAAG,CADtCD,EAAcC,EAAGC,CAAC,EAElBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,CAAC,GAAKO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,EACnF,CACH,EAAE,EAOCI,qBAAsC,SAAUC,GAGhD,SAASD,EAAqBE,GAC1B,IAAIC,EAAQjB,KAYRkB,GAVJD,EAAME,OAASF,EAAME,OAAOC,KAAKH,CAAK,GACtCA,EAAQF,EAAOM,KAAKrB,KAAM,CAEtBmB,OAAQF,EAAME,OACdG,SAAUN,EAAOM,SACjBC,OAAQP,EAAOO,MACnB,CAAC,GAAKvB,MACAkB,IAAM,KACZD,EAAMO,KAAO,MACbP,EAAMD,OAASA,GACEE,KAAKM,EAAOR,EAAOQ,KAGpC,OAFAP,EAAMC,IAAMA,EACZD,EAAMO,KAAOA,EACNP,CACX,CAwCA,OA3DAlB,UAAUe,EAAsBC,CAAM,EAuBtCD,EAAqBF,UAAUO,OAAS,WACpC,IAAIF,EAAQjB,KACZ,GAAKA,KAAKyB,OAAV,CAEA,IAAIC,GAAO1B,MAAAA,KAAmC,KAAA,EAASA,KAAKyB,QAAQE,WAAW,IAAI,EACnF,GAAKD,EAAL,CAGAA,EAAIE,UAAU,EAAG,EAAGF,EAAID,OAAOI,MAAOH,EAAID,OAAOK,MAAM,EAwBvD,IAvBA,IAAIC,EAAK/B,KAAKgB,OAAQQ,EAAOO,EAAGP,KAAMQ,EAAQD,EAAGC,MAuBxCC,EAAI,EAAGA,EAAIT,EAAKU,OAAQD,CAAC,GAC9BE,CAvBU,SAAUF,GACpB,IAAIG,EAASZ,EAAKS,GACdI,EAAU,GACdD,EAAOE,QAAQ,SAAU9B,GAErB6B,EAAQE,KAAK,IAAIC,KAAKC,MAAMjC,EAAEkC,IAAKlC,EAAEmC,GAAG,CAAC,CAC7C,CAAC,EACDjB,EAAIkB,UAAU,EACdlB,EAAImB,YAAcb,EAAMa,YACxBnB,EAAIoB,SAAWd,EAAMc,SACrBpB,EAAIqB,UAAYf,EAAMe,UACtBV,EAAQC,QAAQ,SAAUU,EAAQC,GAC1BC,EAAQjC,EAAMC,IAAIiC,aAAaH,CAAM,EAC3B,IAAVC,EACAvB,EAAI0B,OAAOF,EAAMG,EAAGH,EAAMI,CAAC,EAG3B5B,EAAI6B,OAAOL,EAAMG,EAAGH,EAAMI,CAAC,CAEnC,CAAC,EACD5B,EAAI8B,OAAO,CACf,EAEYvB,CAAC,CA1Bb,CAJU,CAgCd,EACOnB,CACX,EAAE0B,KAAKiB,WAAY,iBACJ3C"}