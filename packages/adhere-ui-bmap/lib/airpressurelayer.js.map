{"version":3,"file":"airpressurelayer.js","sources":["airpressurelayer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * BMapAirPressureLayer\r\n * @class BMapAirPressureLayer\r\n * @classdesc 气压层\r\n */\r\nvar BMapAirPressureLayer = /** @class */ (function (_super) {\r\n    __extends(BMapAirPressureLayer, _super);\r\n    // @ts-ignore\r\n    function BMapAirPressureLayer(config) {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        _this.update = _this.update.bind(_this);\r\n        _this = _super.call(this, {\r\n            // @ts-ignore\r\n            update: _this.update,\r\n            paneName: config.paneName,\r\n            zIndex: config.zIndex,\r\n        }) || this;\r\n        _this.map = null;\r\n        _this.data = null;\r\n        _this.config = config;\r\n        var map = config.map, data = config.data;\r\n        _this.map = map;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    /**\r\n     * update\r\n     */\r\n    BMapAirPressureLayer.prototype.update = function () {\r\n        var _this = this;\r\n        if (!this.canvas)\r\n            return;\r\n        var ctx = (this === null || this === void 0 ? void 0 : this.canvas).getContext('2d');\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        var _a = this.config, data = _a.data, style = _a.style;\r\n        var _loop_1 = function (i) {\r\n            var points = data[i];\r\n            var bPoints = [];\r\n            points.forEach(function (p) {\r\n                bPoints.push(new BMap.Point(p.lng, p.lat));\r\n            });\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = style.strokeStyle;\r\n            ctx.lineJoin = style.lineJoin;\r\n            ctx.lineWidth = style.lineWidth;\r\n            bPoints.forEach(function (bPoint, index) {\r\n                var pixel = _this.map.pointToPixel(bPoint);\r\n                if (index === 0) {\r\n                    ctx.moveTo(pixel.x, pixel.y);\r\n                }\r\n                else {\r\n                    ctx.lineTo(pixel.x, pixel.y);\r\n                }\r\n            });\r\n            ctx.stroke();\r\n        };\r\n        for (var i = 0; i < data.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    return BMapAirPressureLayer;\r\n}(BMap.CanvasLayer));\r\nexport default BMapAirPressureLayer;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","BMapAirPressureLayer","_super","config","_this","update","bind","call","paneName","zIndex","map","data","canvas","ctx","getContext","clearRect","width","height","_a","style","i","length","points","bPoints","forEach","push","BMap","Point","lng","lat","beginPath","strokeStyle","lineJoin","lineWidth","bPoint","index","pixel","pointToPixel","moveTo","x","y","lineTo","stroke","_loop_1","CanvasLayer"],"mappings":"AAAA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAEhB,SAASO,IAAOV,KAAKW,YAAcT,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEU,UAAkB,OAANT,EAAaC,OAAOS,OAAOV,IAAMO,EAAGE,UAAYT,EAAES,UAAW,IAAIF,IAV3C,GAkBxCI,qBAAsC,SAAUC,GAGhD,SAASD,EAAqBE,GAC1B,IAAIC,EAAQjB,KAEZiB,EAAMC,OAASD,EAAMC,OAAOC,KAAKF,IACjCA,EAAQF,EAAOK,KAAKpB,KAAM,CAEtBkB,OAAQD,EAAMC,OACdG,SAAUL,EAAOK,SACjBC,OAAQN,EAAOM,UACbtB,MACAuB,IAAM,KACZN,EAAMO,KAAO,KAEb,IAAID,GADJN,EAAMD,OAASA,GACEO,IAAKC,EAAOR,EAAOQ,KAGpC,OAFAP,EAAMM,IAAMA,EACZN,EAAMO,KAAOA,EACNP,EAwCX,OA1DAlB,UAAUe,EAAsBC,GAuBhCD,EAAqBF,UAAUM,OAAS,WACpC,IAAID,EAAQjB,KACZ,GAAKA,KAAKyB,OAAV,CAEA,IAAIC,GAAO1B,MAAAA,UAAmC,EAASA,KAAKyB,QAAQE,WAAW,MAC/E,GAAKD,EAAL,CAGAA,EAAIE,UAAU,EAAG,EAAGF,EAAID,OAAOI,MAAOH,EAAID,OAAOK,QAuBjD,IAtBA,IAAIC,EAAK/B,KAAKgB,OAAQQ,EAAOO,EAAGP,KAAMQ,EAAQD,EAAGC,MAsBxCC,EAAI,EAAGA,EAAIT,EAAKU,OAAQD,KArBnB,SAAUA,GACpB,IAAIE,EAASX,EAAKS,GACdG,EAAU,GACdD,EAAOE,QAAQ,SAAU7B,GACrB4B,EAAQE,KAAK,IAAIC,KAAKC,MAAMhC,EAAEiC,IAAKjC,EAAEkC,QAEzChB,EAAIiB,YACJjB,EAAIkB,YAAcZ,EAAMY,YACxBlB,EAAImB,SAAWb,EAAMa,SACrBnB,EAAIoB,UAAYd,EAAMc,UACtBV,EAAQC,QAAQ,SAAUU,EAAQC,GAC1BC,EAAQhC,EAAMM,IAAI2B,aAAaH,GACrB,IAAVC,EACAtB,EAAIyB,OAAOF,EAAMG,EAAGH,EAAMI,GAG1B3B,EAAI4B,OAAOL,EAAMG,EAAGH,EAAMI,KAGlC3B,EAAI6B,SAGJC,CAAQvB,MAGTnB,EA3D8B,CA4DvCyB,KAAKkB,4BACQ3C"}