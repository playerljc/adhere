{"version":3,"file":"airpressurelayer.js","sources":["airpressurelayer.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * BMapAirPressureLayer\r\n * @class BMapAirPressureLayer\r\n * @classdesc 气压层(绘制多边形)\r\n */\r\n// @ts-ignore\r\nvar BMapAirPressureLayer = /** @class */ (function (_super) {\r\n    __extends(BMapAirPressureLayer, _super);\r\n    // @ts-ignore\r\n    function BMapAirPressureLayer(config) {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        _this.update = _this.update.bind(_this);\r\n        _this = _super.call(this, {\r\n            // @ts-ignore\r\n            update: _this.update,\r\n            paneName: config.paneName,\r\n            zIndex: config.zIndex,\r\n        }) || this;\r\n        _this.map = null;\r\n        _this.data = null;\r\n        _this.config = config;\r\n        var map = config.map, data = config.data;\r\n        _this.map = map;\r\n        _this.data = data;\r\n        return _this;\r\n    }\r\n    /**\r\n     * update\r\n     */\r\n    BMapAirPressureLayer.prototype.update = function () {\r\n        var _this = this;\r\n        if (!this.canvas)\r\n            return;\r\n        var ctx = (this === null || this === void 0 ? void 0 : this.canvas).getContext('2d');\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        var _a = this.config, data = _a.data, style = _a.style;\r\n        var _loop_1 = function (i) {\r\n            var points = data[i];\r\n            var bPoints = [];\r\n            points.forEach(function (p) {\r\n                /* @ts-ignore */\r\n                bPoints.push(new BMap.Point(p.lng, p.lat));\r\n            });\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = style.strokeStyle;\r\n            ctx.lineJoin = style.lineJoin;\r\n            ctx.lineWidth = style.lineWidth;\r\n            bPoints.forEach(function (bPoint, index) {\r\n                var pixel = _this.map.pointToPixel(bPoint);\r\n                if (index === 0) {\r\n                    ctx.moveTo(pixel.x, pixel.y);\r\n                }\r\n                else {\r\n                    ctx.lineTo(pixel.x, pixel.y);\r\n                }\r\n            });\r\n            ctx.stroke();\r\n        };\r\n        for (var i = 0; i < data.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    return BMapAirPressureLayer;\r\n}(BMap.CanvasLayer));\r\nexports.default = BMapAirPressureLayer;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","BMapAirPressureLayer","defineProperty","exports","value","_super","config","_this","map","update","bind","paneName","zIndex","data","canvas","ctx","getContext","clearRect","width","height","_a","style","i","length","_loop_1","points","bPoints","forEach","push","BMap","Point","lng","lat","beginPath","strokeStyle","lineJoin","lineWidth","bPoint","index","pixel","pointToPixel","moveTo","x","y","lineTo","stroke","CanvasLayer","default"],"mappings":"AAAA,aACA,IAAIA,UAAaC,MAAQA,KAAKD,WAAc,WACxC,IAAIE,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,EAAG,YAAaC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,GAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,CAAC,IAAGN,EAAEM,GAAKL,EAAEK,GAAI,GAC/EN,EAAGC,CAAC,CAC7B,EACA,OAAO,SAAUD,EAAGC,GAChB,GAAiB,YAAb,OAAOA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,CAAC,EAAI,+BAA+B,EAE5F,SAASW,IAAOd,KAAKe,YAAcb,CAAG,CADtCD,EAAcC,EAAGC,CAAC,EAElBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOY,OAAOb,CAAC,GAAKW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,EACnF,CACH,EAAE,EAQCG,sBAPJb,OAAOc,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAOlB,SAAUC,GAGhD,SAASJ,EAAqBK,GAC1B,IAAIC,EAAQvB,KAYRwB,GAVJD,EAAME,OAASF,EAAME,OAAOC,KAAKH,CAAK,GACtCA,EAAQF,EAAOV,KAAKX,KAAM,CAEtByB,OAAQF,EAAME,OACdE,SAAUL,EAAOK,SACjBC,OAAQN,EAAOM,MACnB,CAAC,GAAK5B,MACAwB,IAAM,KACZD,EAAMM,KAAO,MACbN,EAAMD,OAASA,GACEE,KAAKK,EAAOP,EAAOO,KAGpC,OAFAN,EAAMC,IAAMA,EACZD,EAAMM,KAAOA,EACNN,CACX,CAwCA,OA3DAxB,UAAUkB,EAAsBI,CAAM,EAuBtCJ,EAAqBR,UAAUgB,OAAS,WACpC,IAAIF,EAAQvB,KACZ,GAAKA,KAAK8B,OAAV,CAEA,IAAIC,GAAO/B,MAAAA,KAAmC,KAAA,EAASA,KAAK8B,QAAQE,WAAW,IAAI,EACnF,GAAKD,EAAL,CAGAA,EAAIE,UAAU,EAAG,EAAGF,EAAID,OAAOI,MAAOH,EAAID,OAAOK,MAAM,EAwBvD,IAvBA,IAAIC,EAAKpC,KAAKsB,OAAQO,EAAOO,EAAGP,KAAMQ,EAAQD,EAAGC,MAuBxCC,EAAI,EAAGA,EAAIT,EAAKU,OAAQD,CAAC,GAC9BE,CAvBU,SAAUF,GACpB,IAAIG,EAASZ,EAAKS,GACdI,EAAU,GACdD,EAAOE,QAAQ,SAAUnC,GAErBkC,EAAQE,KAAK,IAAIC,KAAKC,MAAMtC,EAAEuC,IAAKvC,EAAEwC,GAAG,CAAC,CAC7C,CAAC,EACDjB,EAAIkB,UAAU,EACdlB,EAAImB,YAAcb,EAAMa,YACxBnB,EAAIoB,SAAWd,EAAMc,SACrBpB,EAAIqB,UAAYf,EAAMe,UACtBV,EAAQC,QAAQ,SAAUU,EAAQC,GAC1BC,EAAQhC,EAAMC,IAAIgC,aAAaH,CAAM,EAC3B,IAAVC,EACAvB,EAAI0B,OAAOF,EAAMG,EAAGH,EAAMI,CAAC,EAG3B5B,EAAI6B,OAAOL,EAAMG,EAAGH,EAAMI,CAAC,CAEnC,CAAC,EACD5B,EAAI8B,OAAO,CACf,EAEYvB,CAAC,CA1Bb,CAJU,CAgCd,EACOrB,CACX,EAAE4B,KAAKiB,WAAY,GACnB3C,QAAQ4C,QAAU9C"}