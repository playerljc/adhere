var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};import{GeometryType,VectorActions}from"../types";import Geometry from"./Geometry";import GeometryStyle from"../style/GeometryStyle";import RegularPolygonGeometry from"./RegularPolygonGeometry";import StartGeometry from"./StartGeometry";import SectorGeometry from"./SectorGeometry";import CircleGeometry from"./CircleGeometry";import RectGeometry from"./RectGeometry";import RadiusRectGeometry from"./RadiusRectGeometry";import LeafGeometry from"./LeafGeometry";var PointGeometry=function(r){function i(e){var t=r.call(this)||this;return t.coordinates=e,t}return __extends(i,r),i.prototype.setCoordinates=function(e){this.coordinates=e,null!==(e=null==this?void 0:this.getLayer())&&void 0!==e&&e.getEmitter().trigger(VectorActions.UPDATE)},i.prototype.getCoordinates=function(){return __assign({},this.coordinates)},i.prototype.getType=function(){return GeometryType.Point},i.getCenterCoordinate=function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return i.centerCoordinateMapping.get(a.pointType)({ctx:t,coordinates:r,map:o,style:a,isScale:e})},i.prototype.getCenterCoordinate=function(e){var t=e.ctx,r=e.style;e.isScale;return i.getCenterCoordinate({coordinates:this.coordinates,ctx:t,map:this.getMap(),style:r,isScale:!1})},i.drawCirclePoint=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;CircleGeometry.drawCircle({ctx:t,style:r,coordinates:{radius:r.radius,center:o},map:e,isScale:!1})},i.drawImagePoint=function(e){var t=e.ctx,r=e.style,o=e.coordinates,a=e.map,e=new Image(r.img.width,r.img.height);e.src=r.img.src;o=a.pointToPixel(new BMap.Point(o.lng,o.lat));t.drawImage(e,o.x,o.y,r.img.width,r.img.height)},i.drawRegularPolygon=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;RegularPolygonGeometry.drawRegularPolygon({ctx:t,style:r,coordinates:__assign(__assign({},r.regularPolygon),{center:o}),map:e,isScale:!1})},i.drawStart=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;StartGeometry.drawStart({ctx:t,style:r,coordinates:__assign(__assign({},r.start),{center:o}),map:e,isScale:!1})},i.drawSector=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;SectorGeometry.drawSector({ctx:t,style:r,coordinates:__assign(__assign({},r.sector),{center:o}),map:e,isScale:!1})},i.drawRect=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;RectGeometry.drawRect({ctx:t,style:r,coordinates:__assign(__assign({},r.rect),{leftTop:o}),map:e,isScale:!1})},i.drawRadiusRect=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;RadiusRectGeometry.drawRadiusRect({ctx:t,style:r,coordinates:__assign(__assign({},r.radiusRect),{leftTop:o}),map:e,isScale:!1})},i.drawLeaf=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map;LeafGeometry.drawLeaf({ctx:t,style:r,coordinates:__assign(__assign({},r.leaf),{center:o}),map:e,isScale:!1})},i.drawPoint=function(e){var t=e.ctx,r=e.style,o=e.coordinates,e=e.map,r=__assign(__assign(__assign({},GeometryStyle),{radius:5,pointType:"circle"}),r||{});i.drawMapping.get(null===r||void 0===r?void 0:r.pointType)({ctx:t,style:r,coordinates:o,map:e})},i.prototype.draw=function(e,t){i.drawPoint({ctx:e,style:t,coordinates:this.coordinates,map:this.getMap()})},i.isPixelInGeometry=function(e){var t=e.coordinates,r=e.map,o=e.pixel,e=e.style;return i.isPixelInGeometryMapping.get(null===e||void 0===e?void 0:e.pointType)({coordinates:i.pointTypeToCoordinatesMapping.get(null===e||void 0===e?void 0:e.pointType)(t,e),isScale:!1,map:r,style:e,pixel:o})},i.prototype.isPixelInGeometry=function(e,t){return i.isPixelInGeometry({coordinates:this.coordinates,pixel:e,map:this.getMap(),style:t})},i.drawMapping=new Map([["circle",i.drawCirclePoint],["image",i.drawImagePoint],["regularPolygon",i.drawRegularPolygon],["start",i.drawStart],["sector",i.drawSector],["rect",i.drawRect],["radiusRect",i.drawRadiusRect],["leaf",i.drawLeaf]]),i.isPixelInGeometryMapping=new Map([["circle",CircleGeometry.isPixelInGeometry],["image",RectGeometry.isPixelInGeometry],["regularPolygon",RegularPolygonGeometry.isPixelInGeometry],["start",StartGeometry.isPixelInGeometry],["sector",SectorGeometry.isPixelInGeometry],["rect",RectGeometry.isPixelInGeometry],["radiusRect",RadiusRectGeometry.isPixelInGeometry],["leaf",LeafGeometry.isPixelInGeometry]]),i.centerCoordinateMapping=new Map([["circle",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return CircleGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:{center:r,radius:a.radius}})}],["image",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return RectGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({leftTop:r},a.img)})}],["regularPolygon",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return RegularPolygonGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({center:r},a.regularPolygon)})}],["start",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return StartGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({center:r},a.start)})}],["sector",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return SectorGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({center:r},a.sector)})}],["rect",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return RectGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({leftTop:r},a.rect)})}],["radiusRect",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return RadiusRectGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({leftTop:r},a.radiusRect)})}],["leaf",function(e){var t=e.ctx,r=e.coordinates,o=e.map,a=e.style,e=e.isScale;return LeafGeometry.getCenterCoordinate({ctx:t,map:o,style:a,isScale:e,coordinates:__assign({center:r},a.leaf)})}]]),i.pointTypeToCoordinatesMapping=new Map([["circle",function(e,t){return{center:e,radius:t.radius}}],["image",function(e,t){return{leftTop:e,width:t.img.width,height:t.img.height}}],["regularPolygon",function(e,t){return __assign({center:e},t.regularPolygon)}],["start",function(e,t){return __assign({center:e},t.start)}],["sector",function(e,t){return __assign({center:e},t.sector)}],["rect",function(e,t){return __assign({leftTop:e},t.rect)}],["radiusRect",function(e,t){return __assign({leftTop:e},t.radiusRect)}],["leaf",function(e,t){return __assign({center:e},t.leaf)}]]),i}(Geometry);export default PointGeometry;
//# sourceMappingURL=PointGeometry.js.map
