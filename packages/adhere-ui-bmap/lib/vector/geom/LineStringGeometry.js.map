{"version":3,"file":"LineStringGeometry.js","sources":["vector/geom/LineStringGeometry.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport MathUtil from '@baifendian/adhere-util';\r\nimport Util from '../../util';\r\nimport GeometryStyle from '../style/GeometryStyle';\r\nimport TextStyle from '../style/TextStyle';\r\nimport { GeometryType, VectorActions, } from '../types';\r\nimport Geometry from './Geometry';\r\nvar SIZE = new Map([\r\n    ['small', 3],\r\n    ['normal', 10],\r\n    ['large', 20],\r\n]);\r\n/**\r\n * LineStringGeometry\r\n * @class LineStringGeometry\r\n * @classdesc LineStringGeometry - 直线\r\n */\r\nvar LineStringGeometry = /** @class */ (function (_super) {\r\n    __extends(LineStringGeometry, _super);\r\n    function LineStringGeometry(coordinates) {\r\n        var _this = _super.call(this) || this;\r\n        _this.coordinates = coordinates;\r\n        return _this;\r\n    }\r\n    /**\r\n     * drawStartArrow\r\n     * @param ctx\r\n     * @param style\r\n     * @param coordinates\r\n     * @param map\r\n     */\r\n    LineStringGeometry.drawStartArrow = function (_a) {\r\n        var ctx = _a.ctx, style = _a.style, coordinates = _a.coordinates, map = _a.map;\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.lineWidth = style.lineWidth;\r\n        ctx.lineJoin = style.lineJoin;\r\n        ctx.lineCap = style.lineCap;\r\n        ctx.setLineDash(style.lineDash);\r\n        ctx.lineDashOffset = style.lineDashOffset;\r\n        ctx.strokeStyle = style.strokeStyle;\r\n        ctx.fillStyle = style.fillStyle;\r\n        // @ts-ignore\r\n        var pixel1 = map.pointToPixel(new BMap.Point(coordinates.point1.lng, coordinates.point1.lat));\r\n        // @ts-ignore\r\n        var pixel2 = map.pointToPixel(new BMap.Point(coordinates.point2.lng, coordinates.point2.lat));\r\n        var _b = Util.getArrowPoints({\r\n            from: pixel2,\r\n            to: pixel1,\r\n            scale: 1,\r\n            width: SIZE.get(style.arrow.size),\r\n        }), A = _b.A, B = _b.B, C = _b.C;\r\n        ctx.moveTo(A.x, A.y);\r\n        ctx.lineTo(B.x, B.y);\r\n        ctx.lineTo(C.x, C.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.fill();\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * drawEndArrow\r\n     * @param ctx\r\n     * @param style\r\n     * @param coordinates\r\n     * @param map\r\n     */\r\n    LineStringGeometry.drawEndArrow = function (_a) {\r\n        var ctx = _a.ctx, style = _a.style, coordinates = _a.coordinates, map = _a.map;\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.lineWidth = style.lineWidth;\r\n        ctx.lineJoin = style.lineJoin;\r\n        ctx.lineCap = style.lineCap;\r\n        ctx.setLineDash(style.lineDash);\r\n        ctx.lineDashOffset = style.lineDashOffset;\r\n        ctx.strokeStyle = style.strokeStyle;\r\n        ctx.fillStyle = style.fillStyle;\r\n        // @ts-ignore\r\n        var pixel1 = map.pointToPixel(new BMap.Point(coordinates.point1.lng, coordinates.point1.lat));\r\n        // @ts-ignore\r\n        var pixel2 = map.pointToPixel(new BMap.Point(coordinates.point2.lng, coordinates.point2.lat));\r\n        var _b = Util.getArrowPoints({\r\n            from: pixel1,\r\n            to: pixel2,\r\n            scale: 1,\r\n            width: SIZE.get(style.arrow.size),\r\n        }), A = _b.A, B = _b.B, C = _b.C;\r\n        ctx.moveTo(A.x, A.y);\r\n        ctx.lineTo(B.x, B.y);\r\n        ctx.lineTo(C.x, C.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.fill();\r\n        ctx.restore();\r\n    };\r\n    /**\r\n     * drawLineString\r\n     * @param ctx\r\n     * @param style\r\n     * @param coordinates\r\n     * @param map\r\n     */\r\n    LineStringGeometry.drawLineString = function (_a) {\r\n        var ctx = _a.ctx, style = _a.style, coordinates = _a.coordinates, map = _a.map;\r\n        ctx.save();\r\n        var targetStyle = __assign(__assign(__assign({}, GeometryStyle), (style || {})), { arrow: {\r\n                draw: false,\r\n                direction: 'end',\r\n                type: 'normal',\r\n                size: 'normal',\r\n            } });\r\n        // 绘制直线\r\n        ctx.beginPath();\r\n        ctx.lineWidth = targetStyle.lineWidth;\r\n        ctx.lineJoin = targetStyle.lineJoin;\r\n        ctx.lineCap = targetStyle.lineCap;\r\n        ctx.setLineDash(targetStyle.lineDash);\r\n        ctx.lineDashOffset = targetStyle.lineDashOffset;\r\n        ctx.strokeStyle = targetStyle.strokeStyle;\r\n        var point1 = coordinates.point1, point2 = coordinates.point2;\r\n        // @ts-ignore\r\n        var pixel1 = map.pointToPixel(new BMap.Point(point1.lng, point1.lat));\r\n        // @ts-ignore\r\n        var pixel2 = map.pointToPixel(new BMap.Point(point2.lng, point2.lat));\r\n        ctx.moveTo(pixel1.x, pixel1.y);\r\n        ctx.lineTo(pixel2.x, pixel2.y);\r\n        ctx.stroke();\r\n        ctx.restore();\r\n        // 在绘制箭头\r\n        if (style.arrow.draw) {\r\n            if (style.arrow.direction === 'start') {\r\n                LineStringGeometry.drawStartArrow({ ctx: ctx, style: targetStyle, coordinates: coordinates, map: map });\r\n            }\r\n            else if (style.arrow.direction === 'end') {\r\n                LineStringGeometry.drawEndArrow({ ctx: ctx, style: targetStyle, coordinates: coordinates, map: map });\r\n            }\r\n            else if (style.arrow.direction === 'bothEnds') {\r\n                LineStringGeometry.drawStartArrow({ ctx: ctx, style: targetStyle, coordinates: coordinates, map: map });\r\n                LineStringGeometry.drawEndArrow({ ctx: ctx, style: targetStyle, coordinates: coordinates, map: map });\r\n            }\r\n        }\r\n    };\r\n    LineStringGeometry.prototype.setCoordinates = function (coordinates) {\r\n        var _a, _b;\r\n        this.coordinates = coordinates;\r\n        (_b = (_a = this === null || this === void 0 ? void 0 : this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(VectorActions.UPDATE);\r\n    };\r\n    LineStringGeometry.prototype.getCoordinates = function () {\r\n        return __assign({}, this.coordinates);\r\n    };\r\n    LineStringGeometry.prototype.getType = function () {\r\n        return GeometryType.LineString;\r\n    };\r\n    LineStringGeometry.getCenterCoordinate = function (_a) {\r\n        var ctx = _a.ctx, coordinates = _a.coordinates, map = _a.map, style = _a.style, isScale = _a.isScale;\r\n        var point1 = coordinates.point1, point2 = coordinates.point2;\r\n        var point1Pixel = map.pointToPixel(\r\n        // @ts-ignore\r\n        new BMap.Point(point1.lng, point1.lat));\r\n        var point2Pixel = map.pointToPixel(\r\n        // @ts-ignore\r\n        new BMap.Point(point2.lng, point2.lat));\r\n        return MathUtil.midpoint(point1Pixel, point2Pixel);\r\n    };\r\n    LineStringGeometry.prototype.getCenterCoordinate = function (_a) {\r\n        var ctx = _a.ctx, style = _a.style, isScale = _a.isScale;\r\n        return LineStringGeometry.getCenterCoordinate({\r\n            ctx: ctx,\r\n            coordinates: this.coordinates,\r\n            map: this.getMap(),\r\n            style: style,\r\n            isScale: isScale,\r\n        });\r\n    };\r\n    LineStringGeometry.prototype.draw = function (ctx, style) {\r\n        LineStringGeometry.drawLineString({\r\n            ctx: ctx,\r\n            style: style,\r\n            coordinates: this.coordinates,\r\n            map: this.getMap(),\r\n        });\r\n    };\r\n    LineStringGeometry.prototype.drawText = function (_a) {\r\n        var ctx = _a.ctx, text = _a.text, style = _a.style, textStyle = _a.textStyle;\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        // 先旋转在进行绘制\r\n        var map = this.getMap();\r\n        // 中心点\r\n        var centerPixel = this.getCenterCoordinate({ ctx: ctx, style: style, isScale: true });\r\n        // 平移到中心点\r\n        ctx.translate(centerPixel.x, centerPixel.y);\r\n        var _b = this.coordinates, point1 = _b.point1, point2 = _b.point2;\r\n        // @ts-ignore\r\n        var point1Pixel = map.pointToPixel(new BMap.Point(point1.lng, point1.lat));\r\n        // @ts-ignore\r\n        var point2Pixel = map.pointToPixel(new BMap.Point(point2.lng, point2.lat));\r\n        // 斜率的角度\r\n        var radian = MathUtil.slopToRadian(point1Pixel, point2Pixel);\r\n        // 旋转斜率的角度\r\n        ctx.rotate(radian);\r\n        var targetTextStyle = __assign(__assign({}, TextStyle), (textStyle || {}));\r\n        ctx.font = targetTextStyle.font;\r\n        ctx.textAlign = targetTextStyle.textAlign;\r\n        ctx.textBaseline = targetTextStyle.textBaseline;\r\n        ctx.direction = targetTextStyle.direction;\r\n        ctx.strokeStyle = targetTextStyle.strokeStyle;\r\n        ctx.fillStyle = targetTextStyle.fillStyle;\r\n        var targetStyle = __assign(__assign({}, GeometryStyle), (style || {}));\r\n        ctx.lineWidth = targetStyle.lineWidth;\r\n        ctx.lineJoin = targetStyle.lineJoin;\r\n        ctx.lineCap = targetStyle.lineCap;\r\n        ctx.setLineDash(targetStyle.lineDash);\r\n        ctx.lineDashOffset = targetStyle.lineDashOffset;\r\n        ctx.strokeStyle = targetStyle.strokeStyle;\r\n        ctx.fillText(text || '', 0, 0);\r\n        ctx.restore();\r\n    };\r\n    LineStringGeometry.isPixelInGeometry = function (_a) {\r\n        var pixel = _a.pixel, style = _a.style, coordinates = _a.coordinates, map = _a.map;\r\n        var canvas = document.createElement('canvas');\r\n        var ctx = canvas.getContext('2d');\r\n        if (!ctx)\r\n            return false;\r\n        ctx.beginPath();\r\n        var point1 = coordinates.point1, point2 = coordinates.point2;\r\n        // @ts-ignore\r\n        var pixel1 = map.pointToPixel(new BMap.Point(point1.lng, point1.lat));\r\n        // @ts-ignore\r\n        var pixel2 = map.pointToPixel(new BMap.Point(point2.lng, point2.lat));\r\n        ctx.moveTo(pixel1.x, pixel1.y);\r\n        ctx.lineTo(pixel2.x, pixel2.y);\r\n        return ctx.isPointInPath(pixel.x, pixel.y);\r\n    };\r\n    /**\r\n     * isPixelInGeometry\r\n     * @param pixel\r\n     * @param style\r\n     * @return boolean\r\n     */\r\n    LineStringGeometry.prototype.isPixelInGeometry = function (pixel, style) {\r\n        return LineStringGeometry.isPixelInGeometry({\r\n            pixel: pixel,\r\n            style: style,\r\n            coordinates: this.coordinates,\r\n            map: this.getMap(),\r\n        });\r\n    };\r\n    return LineStringGeometry;\r\n}(Geometry));\r\nexport default LineStringGeometry;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","MathUtil","Util","GeometryStyle","TextStyle","GeometryType","VectorActions","Geometry","SIZE","Map","LineStringGeometry","_super","coordinates","_this","drawStartArrow","_a","ctx","style","map","pixel1","save","beginPath","lineWidth","lineJoin","lineCap","setLineDash","lineDash","lineDashOffset","strokeStyle","fillStyle","pointToPixel","BMap","Point","point1","lng","lat","pixel2","point2","_b","getArrowPoints","from","to","scale","width","get","arrow","size","A","B","C","moveTo","x","y","lineTo","closePath","stroke","fill","restore","drawEndArrow","drawLineString","targetStyle","draw","direction","type","setCoordinates","getLayer","getEmitter","trigger","UPDATE","getCoordinates","getType","LineString","getCenterCoordinate","isScale","point1Pixel","point2Pixel","midpoint","getMap","drawText","text","textStyle","centerPixel","translate","radian","slopToRadian","targetTextStyle","rotate","font","textAlign","textBaseline","fillText","isPixelInGeometry","pixel","document","createElement","getContext","isPointInPath"],"mappings":"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"}