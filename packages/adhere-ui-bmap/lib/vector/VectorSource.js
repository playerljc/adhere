"use strict";var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__spreadArray=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||((o=o||Array.prototype.slice.call(e,0,n))[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},adhere_util_emitter_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("@baifendian/adhere-util-emitter"))),GeoJSONFormat_1=__importDefault(require("./format/GeoJSONFormat")),types_1=require("./types"),VectorSource=function(r){function t(t){var e=r.call(this)||this;return e.context=null,e.features=[],e.features=t,e.setFeaturesContext(),e}return __extends(t,r),t.prototype.setFeaturesContext=function(){var e=this;this.features.forEach(function(t){t.setContext(e)})},t.prototype.addFeature=function(t){this.hasFeatureById(t.getId())||(this.features.push(t),this.setFeaturesContext(),null!=(t=null==this?void 0:this.getContext())&&t.getEmitter().trigger(types_1.VectorActions.UPDATE))},t.prototype.addFeatures=function(t){var e=this,t=t.filter(function(t){return!e.hasFeatureById(t.getId())});this.features=__spreadArray(__spreadArray([],this.features,!0),t,!0),this.setFeaturesContext(),null!=(t=null==this?void 0:this.getContext())&&t.getEmitter().trigger(types_1.VectorActions.UPDATE)},t.prototype.addFirstFeature=function(t){this.hasFeatureById(t.getId())||(this.features.unshift(t),null!=(t=null==this?void 0:this.getContext())&&t.getEmitter().trigger(types_1.VectorActions.UPDATE))},t.prototype.insertFeature=function(t,e){this.hasFeatureById(t.getId())||(this.features.splice(e,0,t),this.setFeaturesContext(),null!=(e=null==this?void 0:this.getContext())&&e.getEmitter().trigger(types_1.VectorActions.UPDATE))},t.prototype.removeFeature=function(t){this.removeFeatureById(t.getId())},t.prototype.removeFeatureById=function(e){var t;this.hasFeatureById(e)&&(t=this.features.findIndex(function(t){return t.getId()===e}),this.features.splice(t,1),null!=(t=null==this?void 0:this.getContext()))&&t.getEmitter().trigger(types_1.VectorActions.UPDATE)},t.prototype.clear=function(){var t;this.features=[],null!=(t=null==this?void 0:this.getContext())&&t.getEmitter().trigger(types_1.VectorActions.UPDATE)},t.prototype.getFeatureById=function(e){return this.features.find(function(t){return t.getId()===e})},t.prototype.getFeatures=function(){return __spreadArray([],this.features,!0)},t.prototype.hasFeature=function(t){return-1!==this.features.indexOf(t)},t.prototype.hasFeatureById=function(e){return!!this.features.find(function(t){return t.getId()===e})},t.prototype.readGeoJSON=function(t,e){var r=this;this.features=GeoJSONFormat_1.default.parse(t,e),this.features.forEach(function(t){t.setContext(r)}),null!=(t=null==this?void 0:this.getContext())&&t.getEmitter().trigger(types_1.VectorActions.UPDATE)},t.prototype.appendGeoJSON=function(t,e){var r=this,t=GeoJSONFormat_1.default.parse(t,e);t.forEach(function(t){t.setContext(r)}),this.features=__spreadArray(__spreadArray([],this.features,!0),t,!0),null!=(e=null==this?void 0:this.getContext())&&e.getEmitter().trigger(types_1.VectorActions.UPDATE)},t.prototype.featuresToGeoJSON=function(){return GeoJSONFormat_1.default.stringify(this.features)},t.prototype.setContext=function(t){this.context=t},t.prototype.getContext=function(){return this.context},t}(adhere_util_emitter_1.default.Events);exports.default=VectorSource;
//# sourceMappingURL=VectorSource.js.map
