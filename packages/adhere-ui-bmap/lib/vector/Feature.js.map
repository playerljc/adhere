{"version":3,"file":"Feature.js","sources":["vector/Feature.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar GeometryStyle_1 = __importDefault(require(\"./style/GeometryStyle\"));\r\nvar types_1 = require(\"./types\");\r\n/**\r\n * Feature\r\n * @class Feature\r\n * @classdesc 要素\r\n */\r\nvar Feature = /** @class */ (function () {\r\n    function Feature(params) {\r\n        // 要素的名称\r\n        this.name = '';\r\n        // 要素的id\r\n        this.id = '';\r\n        // 要素的样式\r\n        this.style = GeometryStyle_1.default;\r\n        // 要素的层级\r\n        this.zIndex = 1;\r\n        // 要素的业务属性\r\n        this.properties = {};\r\n        this.name = params === null || params === void 0 ? void 0 : params.name;\r\n        this.id = params === null || params === void 0 ? void 0 : params.id;\r\n        this.properties = params === null || params === void 0 ? void 0 : params.properties;\r\n        this.style = params === null || params === void 0 ? void 0 : params.style;\r\n        this.geometry = params === null || params === void 0 ? void 0 : params.geometry;\r\n        this.setGeometryContext();\r\n    }\r\n    Feature.prototype.setGeometryContext = function () {\r\n        this.geometry && this.geometry.setContext(this);\r\n    };\r\n    Feature.prototype.draw = function (ctx) {\r\n        // 绘制geometry(几何形状)\r\n        this.geometry.draw(ctx, this.style);\r\n    };\r\n    Feature.prototype.getGeometry = function () {\r\n        return this.geometry;\r\n    };\r\n    Feature.prototype.getId = function () {\r\n        return this.id;\r\n    };\r\n    Feature.prototype.getName = function () {\r\n        return this.name;\r\n    };\r\n    Feature.prototype.getStyle = function () {\r\n        return this.style;\r\n    };\r\n    Feature.prototype.getZIndex = function () {\r\n        return this.zIndex;\r\n    };\r\n    Feature.prototype.getProperties = function () {\r\n        return this.properties;\r\n    };\r\n    Feature.prototype.setGeometry = function (geom) {\r\n        var _a, _b;\r\n        this.geometry = geom;\r\n        this.setGeometryContext();\r\n        (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(types_1.VectorActions.UPDATE);\r\n    };\r\n    Feature.prototype.setStyle = function (style) {\r\n        var _a, _b;\r\n        this.style = style;\r\n        (_b = (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(types_1.VectorActions.UPDATE);\r\n    };\r\n    Feature.prototype.setId = function (id) {\r\n        this.id = id;\r\n    };\r\n    Feature.prototype.setName = function (name) {\r\n        this.name = name;\r\n    };\r\n    Feature.prototype.setZIndex = function (zIndex) {\r\n        var _a, _b;\r\n        this.zIndex = zIndex;\r\n        (_b = (_a = this === null || this === void 0 ? void 0 : this.getLayer()) === null || _a === void 0 ? void 0 : _a.getEmitter()) === null || _b === void 0 ? void 0 : _b.trigger(types_1.VectorActions.UPDATE);\r\n    };\r\n    Feature.prototype.setProperties = function (properties) {\r\n        this.properties = properties;\r\n    };\r\n    Feature.prototype.getContext = function () {\r\n        return this.context;\r\n    };\r\n    Feature.prototype.setContext = function (context) {\r\n        this.context = context;\r\n    };\r\n    Feature.prototype.getLayer = function () {\r\n        var _a;\r\n        // @ts-ignore\r\n        return (_a = this === null || this === void 0 ? void 0 : this.getContext()) === null || _a === void 0 ? void 0 : _a.getContext();\r\n    };\r\n    Feature.prototype.getMap = function () {\r\n        var _a;\r\n        return (_a = this === null || this === void 0 ? void 0 : this.getLayer()) === null || _a === void 0 ? void 0 : _a.getMap();\r\n    };\r\n    Feature.prototype.isPointInFeature = function (pixel, style) {\r\n        return this.geometry.isPixelInGeometry(pixel, style);\r\n    };\r\n    return Feature;\r\n}());\r\nexports.default = Feature;\r\n"],"names":["__importDefault","this","mod","__esModule","default","GeometryStyle_1","Object","defineProperty","exports","value","require","types_1","Feature","params","name","id","style","zIndex","properties","geometry","setGeometryContext","prototype","setContext","draw","ctx","getGeometry","getId","getName","getStyle","getZIndex","getProperties","setGeometry","geom","_b","_a","getLayer","getEmitter","trigger","VectorActions","UPDATE","setStyle","setId","setName","setZIndex","setProperties","getContext","context","getMap","isPointInFeature","pixel","isPixelInGeometry"],"mappings":"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"}