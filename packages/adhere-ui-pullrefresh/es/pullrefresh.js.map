{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["import React, { forwardRef, useEffect, useLayoutEffect, useRef, useImperativeHandle, } from 'react';\r\nimport classNames from 'classnames';\r\nimport moment from 'moment';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Util from '@baifendian/adhere-util';\r\nimport Resource from '@baifendian/adhere-util-resource';\r\nimport Hooks from '@baifendian/adhere-ui-hooks';\r\nvar selectorPrefix = 'adhere-ui-pullrefresh';\r\nvar defaultImg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==';\r\nvar useSetState = Hooks.useSetState;\r\nvar PullRefresh = function (props, ref) {\r\n    var _a = props.className, className = _a === void 0 ? '' : _a, _b = props.style, style = _b === void 0 ? {} : _b, _c = props.scrollClassName, scrollClassName = _c === void 0 ? '' : _c, _d = props.scrollStyle, scrollStyle = _d === void 0 ? {} : _d, renderIcon = props.renderIcon, _e = props.renderLabel, renderLabel = _e === void 0 ? function () { return Intl.v('下拉刷新'); } : _e, _f = props.renderCanLabel, renderCanLabel = _f === void 0 ? function () { return Intl.v('松开刷新'); } : _f, _g = props.renderLoadingAnimation, renderLoadingAnimation = _g === void 0 ? 'la-ball-circus la-dark' : _g, _h = props.isShowUpdateTime, isShowUpdateTime = _h === void 0 ? true : _h, _j = props.updateTimeFormat, updateTimeFormat = _j === void 0 ? Resource.Dict.value.ResourceMomentFormat18.value() : _j, children = props.children;\r\n    var _k = useSetState(false), isCan = _k[0], setCan = _k[1];\r\n    var _l = useSetState(moment().valueOf()), preUpdateTime = _l[0], setPreUpdateTime = _l[1];\r\n    var elRef = useRef(null);\r\n    var scrollElRef = useRef(null);\r\n    var iconElRef = useRef(null);\r\n    var refreshElRef = useRef(null);\r\n    var triggerInnerElRef = useRef(null);\r\n    var el = useRef(null);\r\n    var scrollEl = useRef(null);\r\n    var iconEl = useRef(null);\r\n    var triggerInnerEl = useRef(null);\r\n    var maskEl = useRef(null);\r\n    // 是否到顶了\r\n    var isTop = useRef(true);\r\n    var pullHeight = useRef(200);\r\n    var startPageY = useRef(-1);\r\n    var isDownPull = useRef(false);\r\n    var refreshHeight = useRef(0);\r\n    /**\r\n     * renderIcon\r\n     */\r\n    function _renderIcon() {\r\n        return (React.createElement(ConditionalRender, { conditional: !!renderIcon, noMatch: function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\" },\r\n                React.createElement(\"img\", { className: selectorPrefix + \"-trigger-icon-inner\", src: defaultImg, alt: \"\", ref: iconElRef }))); } }, function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\" },\r\n            React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon-inner\", ref: iconElRef }, renderIcon === null || renderIcon === void 0 ? void 0 : renderIcon()))); }));\r\n    }\r\n    function _renderLabel() {\r\n        return (React.createElement(\"p\", { className: selectorPrefix + \"-trigger-label\" },\r\n            React.createElement(ConditionalRender, { conditional: isCan, noMatch: function () { return renderLabel === null || renderLabel === void 0 ? void 0 : renderLabel(); } }, function () { return renderCanLabel === null || renderCanLabel === void 0 ? void 0 : renderCanLabel(); })));\r\n    }\r\n    /**\r\n     * renderUpdateTime\r\n     */\r\n    function renderUpdateTime() {\r\n        return (React.createElement(ConditionalRender, { conditional: isShowUpdateTime }, function () { return (React.createElement(\"p\", { className: selectorPrefix + \"-trigger-update\" },\r\n            Intl.v('更新时间'),\r\n            \"\\uFF1A\",\r\n            React.createElement(\"span\", { className: selectorPrefix + \"-trigger-update-label\" }, moment(preUpdateTime).format(updateTimeFormat)))); }));\r\n    }\r\n    function _renderLoadingAnimation() {\r\n        return (React.createElement(ConditionalRender, { conditional: !!renderLoadingAnimation }, function () { return (React.createElement(ConditionalRender, { conditional: Util.isString(renderLoadingAnimation), noMatch: function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-refresh\", ref: refreshElRef }, renderLoadingAnimation())); } }, function () { return (React.createElement(\"div\", { className: classNames(selectorPrefix + \"-trigger-refresh\", renderLoadingAnimation), ref: refreshElRef },\r\n            React.createElement(\"div\", null),\r\n            React.createElement(\"div\", null),\r\n            React.createElement(\"div\", null),\r\n            React.createElement(\"div\", null),\r\n            React.createElement(\"div\", null))); })); }));\r\n    }\r\n    /**\r\n     * renderMask\r\n     */\r\n    function renderMask() {\r\n        maskEl.current = document.querySelector(\".\" + selectorPrefix + \"-mask\");\r\n        if (!maskEl.current) {\r\n            maskEl.current = document.createElement('div');\r\n            maskEl.current.className = selectorPrefix + \"-mask\";\r\n            document.body.appendChild(maskEl.current);\r\n        }\r\n    }\r\n    /**\r\n     * getPullHeight\r\n     */\r\n    function getPullHeight() {\r\n        var _a = props.pullHeight, pullHeight = _a === void 0 ? 200 : _a;\r\n        if ((pullHeight || 200) <= 0) {\r\n            return 200;\r\n        }\r\n        else {\r\n            if ((pullHeight || 200) > scrollEl.current.clientHeight) {\r\n                return scrollEl.current.clientHeight;\r\n            }\r\n            else {\r\n                return pullHeight || 200;\r\n            }\r\n        }\r\n    }\r\n    function addEvents() {\r\n        var _a, _b, _c;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchstart', onTouchStart);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousedown', onTouchStart);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener('scroll', onScroll);\r\n    }\r\n    /**\r\n     * trigger\r\n     * @param action\r\n     * @param params\r\n     */\r\n    function trigger(action, params) {\r\n        if (props[action]) {\r\n            props[action](params);\r\n        }\r\n    }\r\n    /**\r\n     * translateY - Y平移\r\n     * @param el\r\n     * @param y\r\n     * @param duration\r\n     * @private\r\n     */\r\n    function translateY(el, y, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\r\n        el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\r\n    }\r\n    /**\r\n     * clear\r\n     */\r\n    function clear() {\r\n        removeEvents();\r\n        isDownPull.current = false;\r\n        isTop.current = true;\r\n        el.current.style.display = 'flex';\r\n        refreshElRef.current.style.display = 'none';\r\n        triggerInnerEl.current.style.display = 'flex';\r\n        rotateIcon(iconEl.current, 180, 0);\r\n        scrollEl.current.style.overflowY = 'auto';\r\n        maskEl.current.style.display = 'none';\r\n    }\r\n    /**\r\n     * removeEvents\r\n     */\r\n    function removeEvents() {\r\n        var _a, _b, _c, _d;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousemove', onTouchMove);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mouseup', onTouchEnd);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('touchmove', onTouchMove);\r\n        (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchend', onTouchEnd);\r\n    }\r\n    /**\r\n     * refresh\r\n     */\r\n    function refresh() {\r\n        var _a;\r\n        function onTransitionEnd() {\r\n            var _a;\r\n            triggerInnerEl.current.style.display = 'none';\r\n            refreshElRef.current.style.display = 'block';\r\n            trigger('onPullRefresh');\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', onTransitionEnd);\r\n            setPreUpdateTime(moment().valueOf());\r\n        }\r\n        maskEl.current.style.display = 'block';\r\n        removeEvents();\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('transitionend', onTransitionEnd);\r\n        translateY(scrollEl.current, refreshHeight.current + \"px\", 500);\r\n        translateY(el.current, \"calc(-100% + \" + refreshHeight.current + \"px)\", 500);\r\n        rotateIcon(iconEl.current, 180, 300);\r\n    }\r\n    /**\r\n     * reset\r\n     */\r\n    function reset() {\r\n        var _a;\r\n        function onTransitionEnd() {\r\n            var _a;\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', onTransitionEnd);\r\n            triggerInnerEl.current.style.display = 'flex';\r\n        }\r\n        clear();\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('transitionend', onTransitionEnd);\r\n        translateY(scrollEl.current, '0px', 200);\r\n        translateY(el.current, 'calc(-100% + 0px)', 200);\r\n    }\r\n    /**\r\n     * resetUpdateTime\r\n     * @param updateTime\r\n     * @return Promise\r\n     */\r\n    function resetUpdateTime(updateTime) {\r\n        return new Promise(function (resolve) {\r\n            return setPreUpdateTime(updateTime || moment().valueOf(), function () { return resolve(); });\r\n        });\r\n    }\r\n    /**\r\n     * getUpdateTime\r\n     * @return number\r\n     */\r\n    function getUpdateTime() {\r\n        return preUpdateTime;\r\n    }\r\n    /**\r\n     * rotateIcon\r\n     * @param el\r\n     * @param distance\r\n     * @param duration\r\n     * @private\r\n     */\r\n    function rotateIcon(el, distance, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        var deg = distance;\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\r\n        el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\r\n    }\r\n    /**\r\n     * onTouchStart\r\n     */\r\n    function onTouchStart(e) {\r\n        var _a, _b, _c, _d;\r\n        trigger('onPullStart');\r\n        startPageY.current = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchmove', onTouchMove);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousemove', onTouchMove);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchend', onTouchEnd);\r\n        (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.addEventListener('mouseup', onTouchEnd);\r\n    }\r\n    /**\r\n     * onTouchMove\r\n     * @param e\r\n     */\r\n    function onTouchMove(e) {\r\n        scrollEl.current.style.overflow = 'hidden';\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        var difference = targetY - startPageY.current;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            e.preventDefault();\r\n            isDownPull.current = true;\r\n            // 正常拉\r\n            if (distance < pullHeight.current) {\r\n                translateY(scrollEl.current, distance + \"px\", 0);\r\n                translateY(el.current, \"calc(-100% + \" + distance + \"px)\", 0);\r\n                // 具备刷新条件\r\n                if (distance >= refreshHeight.current + 80) {\r\n                    // console.log('3.具备刷新条件');\r\n                    rotateIcon(iconEl.current, 0, 150);\r\n                    setCan(true, function () { return trigger('onPullCanRefresh'); });\r\n                }\r\n                // 不具备刷新条件\r\n                else {\r\n                    rotateIcon(iconEl.current, 180, 150);\r\n                    setCan(false);\r\n                }\r\n                el.current.style.display = 'flex';\r\n            }\r\n            // 越界了\r\n            else {\r\n                translateY(scrollEl.current, pullHeight.current + \"px\", 0);\r\n                translateY(el.current, \"calc(-100% + \" + pullHeight.current + \"px)\", 0);\r\n                rotateIcon(iconEl.current, 0, 150);\r\n                // console.log('4.拉动到了底部');\r\n                setCan(true, function () { return trigger('onPullBottom'); });\r\n            }\r\n        }\r\n        // 中线上\r\n        else if (isDownPull.current) {\r\n            e.preventDefault();\r\n            translateY(scrollEl.current, '0px', 0);\r\n            translateY(el.current, 'calc(-100% + 0px)', 0);\r\n            rotateIcon(iconEl.current, 180, 0);\r\n        }\r\n        // 其他\r\n        else {\r\n            clear();\r\n        }\r\n    }\r\n    function onTouchEnd(e) {\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        var difference = targetY - startPageY.current;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            // 正常拉\r\n            if (distance < pullHeight.current) {\r\n                if (distance >= refreshHeight.current + 80) {\r\n                    refresh();\r\n                }\r\n                else {\r\n                    // console.log('2.没有具备刷新条件弹回');\r\n                    // self.events.trigger('pullRebound');\r\n                    trigger('onPullRebound');\r\n                    reset();\r\n                }\r\n            }\r\n            // 越界了\r\n            else {\r\n                refresh();\r\n            }\r\n        }\r\n        // 中线上\r\n        else {\r\n            clear();\r\n        }\r\n    }\r\n    function onScroll(e) {\r\n        var _a, _b, _c, _d;\r\n        if (e.target.scrollTop === 0) {\r\n            isTop.current = true;\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchstart', onTouchStart);\r\n            (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousedown', onTouchStart);\r\n        }\r\n        else if (isTop.current) {\r\n            isTop.current = false;\r\n            (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('touchstart', onTouchStart);\r\n            (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('mousedown', onTouchStart);\r\n        }\r\n    }\r\n    useImperativeHandle(ref, function () { return ({\r\n        refresh: refresh,\r\n        reset: reset,\r\n        resetUpdateTime: resetUpdateTime,\r\n        getUpdateTime: getUpdateTime,\r\n    }); });\r\n    useEffect(function () {\r\n        setPreUpdateTime(props.updateTime || moment().valueOf());\r\n    }, [props.updateTime]);\r\n    useEffect(function () {\r\n        renderMask();\r\n    }, []);\r\n    useLayoutEffect(function () {\r\n        el.current = elRef.current;\r\n        iconEl.current = iconElRef.current;\r\n        scrollEl.current = scrollElRef.current;\r\n        triggerInnerEl.current = triggerInnerElRef.current;\r\n        pullHeight.current = getPullHeight();\r\n        refreshHeight.current = el.current.clientHeight;\r\n        addEvents();\r\n    }, []);\r\n    return (React.createElement(\"div\", { className: classNames(selectorPrefix, className || ''), style: style || {} },\r\n        React.createElement(\"div\", { className: classNames(selectorPrefix + \"-scroll\", scrollClassName || ''), style: scrollStyle || {}, ref: scrollElRef }, children),\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-trigger\", ref: elRef },\r\n            React.createElement(\"div\", { className: selectorPrefix + \"-trigger-inner\", ref: triggerInnerElRef },\r\n                _renderIcon(),\r\n                _renderLabel(),\r\n                renderUpdateTime()),\r\n            _renderLoadingAnimation())));\r\n};\r\n// /**\r\n//  * PullRefresh\r\n//  * @class PullRefresh\r\n//  * @classdesc PullRefresh\r\n//  */\r\n// class PullRefresh extends React.Component<IPullRefreshProps, IPullRefreshState> {\r\n//   static defaultProps: any;\r\n//   static propTypes: any;\r\n//\r\n//   state: IPullRefreshState = {\r\n//     isCan: false,\r\n//     preUpdateTime: moment().valueOf(),\r\n//   };\r\n//\r\n//   // 是否到顶了\r\n//   private isTop: boolean = true;\r\n//\r\n//   private el: HTMLElement | null = null;\r\n//   private scrollEl: HTMLElement | null = null;\r\n//   private iconEl: HTMLElement | null = null;\r\n//   private triggerInnerEl: HTMLElement | null = null;\r\n//   private maskEl: HTMLElement | null = null;\r\n//\r\n//   private pullHeight: number = 200;\r\n//   private startPageY: number | undefined;\r\n//   private isDownPull: boolean = false;\r\n//   private refreshHeight: number = 0;\r\n//\r\n//   private elRef = React.createRef();\r\n//   private scrollElRef = React.createRef();\r\n//   private iconElRef = React.createRef();\r\n//   private refreshElRef = React.createRef();\r\n//   private triggerInnerElRef = React.createRef();\r\n//\r\n//   constructor(props) {\r\n//     super(props);\r\n//\r\n//     this.onTouchStart = this.onTouchStart.bind(this);\r\n//     this.onTouchMove = this.onTouchMove.bind(this);\r\n//     this.onTouchEnd = this.onTouchEnd.bind(this);\r\n//     this.onScroll = this.onScroll.bind(this);\r\n//\r\n//     this.renderMask();\r\n//   }\r\n//\r\n//   componentDidMount() {\r\n//     this.el = this.elRef.current as HTMLElement;\r\n//     this.iconEl = this.iconElRef.current as HTMLElement;\r\n//     this.scrollEl = this.scrollElRef.current as HTMLElement;\r\n//     this.triggerInnerEl = this.triggerInnerElRef.current as HTMLElement;\r\n//\r\n//     this.pullHeight = this.getPullHeight();\r\n//     this.refreshHeight = this.el.clientHeight;\r\n//\r\n//     this.addEvents();\r\n//   }\r\n//\r\n//   componentWillReceiveProps(nextProps: Readonly<IPullRefreshProps>, nextContext: any) {\r\n//     if ('updateTime' in nextProps && nextProps.updateTime !== this.props.updateTime) {\r\n//       this.setState({\r\n//         // @ts-ignore\r\n//         preUpdateTime: nextProps.updateTime,\r\n//       });\r\n//     }\r\n//   }\r\n//\r\n//   /**\r\n//    * getPullHeight\r\n//    * @private\r\n//    * @return number\r\n//    */\r\n//   private getPullHeight(): number {\r\n//     const { pullHeight } = this.props;\r\n//\r\n//     if (pullHeight <= 0) {\r\n//       return 200;\r\n//     } else {\r\n//       // @ts-ignore\r\n//       if (pullHeight > this.scrollEl.clientHeight) {\r\n//         // @ts-ignore\r\n//         return this.scrollEl.clientHeight;\r\n//       } else {\r\n//         return pullHeight;\r\n//       }\r\n//     }\r\n//   }\r\n//\r\n//   /**\r\n//    * renderMask\r\n//    * @private\r\n//    */\r\n//   private renderMask(): void {\r\n//     this.maskEl = document.querySelector(`.${selectorPrefix}-mask`);\r\n//\r\n//     if (!this.maskEl) {\r\n//       this.maskEl = document.createElement('div');\r\n//       this.maskEl.className = `${selectorPrefix}-mask`;\r\n//       document.body.appendChild(this.maskEl);\r\n//     }\r\n//   }\r\n//\r\n//   /**\r\n//    * addEvents\r\n//    * @private\r\n//    */\r\n//   private addEvents(): void {\r\n//     // @ts-ignore\r\n//     this.scrollEl.addEventListener('touchstart', this.onTouchStart);\r\n//     // @ts-ignore\r\n//     this.scrollEl.addEventListener('mousedown', this.onTouchStart);\r\n//     // @ts-ignore\r\n//     this.scrollEl.addEventListener('scroll', this.onScroll);\r\n//   }\r\n//\r\n//   /**\r\n//    * removeEvents\r\n//    * @private\r\n//    */\r\n//   private removeEvents(): void {\r\n//     // @ts-ignore\r\n//     this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\r\n//     // @ts-ignore\r\n//     this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\r\n//     // @ts-ignore\r\n//     this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\r\n//     // @ts-ignore\r\n//     this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\r\n//   }\r\n//\r\n//   /**\r\n//    * onTouchStart\r\n//    * @param e\r\n//    * @private\r\n//    */\r\n//   private onTouchStart(e) {\r\n//     this.trigger('onPullStart');\r\n//\r\n//     this.startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n//\r\n//     const { scrollEl } = this;\r\n//\r\n//     // @ts-ignore\r\n//     scrollEl.addEventListener('touchmove', this.onTouchMove);\r\n//     // @ts-ignore\r\n//     scrollEl.addEventListener('mousemove', this.onTouchMove);\r\n//     // @ts-ignore\r\n//     scrollEl.addEventListener('touchend', this.onTouchEnd);\r\n//     // @ts-ignore\r\n//     scrollEl.addEventListener('mouseup', this.onTouchEnd);\r\n//   }\r\n//\r\n//   /**\r\n//    * onTouchMove\r\n//    * @param e\r\n//    * @private\r\n//    */\r\n//   private onTouchMove(e) {\r\n//     // @ts-ignore\r\n//     this.scrollEl.style.overflow = 'hidden';\r\n//\r\n//     const targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n//\r\n//     // @ts-ignore\r\n//     const difference = targetY - this.startPageY;\r\n//\r\n//     const distance = Math.abs(difference);\r\n//\r\n//     // 中线下\r\n//     if (difference > 0) {\r\n//       e.preventDefault();\r\n//\r\n//       this.isDownPull = true;\r\n//\r\n//       // 正常拉\r\n//       if (distance < this.pullHeight) {\r\n//         this.translateY(this.scrollEl, `${distance}px`, 0);\r\n//\r\n//         this.translateY(this.el, `calc(-100% + ${distance}px)`, 0);\r\n//\r\n//         // 具备刷新条件\r\n//         if (distance >= this.refreshHeight + 80) {\r\n//           // console.log('3.具备刷新条件');\r\n//           this.rotateIcon(this.iconEl, 0, 150);\r\n//\r\n//           this.setState(\r\n//             {\r\n//               isCan: true,\r\n//             },\r\n//             () => {\r\n//               this.trigger('onPullCanRefresh');\r\n//             },\r\n//           );\r\n//         }\r\n//         // 不具备刷新条件\r\n//         else {\r\n//           this.rotateIcon(this.iconEl, 180, 150);\r\n//\r\n//           this.setState({\r\n//             isCan: false,\r\n//           });\r\n//         }\r\n//\r\n//         // @ts-ignore\r\n//         this.el.style.display = 'flex';\r\n//       }\r\n//       // 越界了\r\n//       else {\r\n//         this.translateY(this.scrollEl, `${this.pullHeight}px`, 0);\r\n//\r\n//         this.translateY(this.el, `calc(-100% + ${this.pullHeight}px)`, 0);\r\n//\r\n//         this.rotateIcon(this.iconEl, 0, 150);\r\n//\r\n//         // console.log('4.拉动到了底部');\r\n//         this.setState(\r\n//           {\r\n//             isCan: true,\r\n//           },\r\n//           () => {\r\n//             this.trigger('onPullBottom');\r\n//           },\r\n//         );\r\n//       }\r\n//     }\r\n//     // 中线上\r\n//     else if (this.isDownPull) {\r\n//       e.preventDefault();\r\n//\r\n//       this.translateY(this.scrollEl, '0px', 0);\r\n//\r\n//       this.translateY(this.el, 'calc(-100% + 0px)', 0);\r\n//\r\n//       this.rotateIcon(this.iconEl, 180, 0);\r\n//     }\r\n//     // 其他\r\n//     else {\r\n//       this.clear.call(this);\r\n//     }\r\n//   }\r\n//\r\n//   private onTouchEnd(e) {\r\n//     const self = this;\r\n//\r\n//     const targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n//\r\n//     // @ts-ignore\r\n//     const difference = targetY - this.startPageY;\r\n//\r\n//     const distance = Math.abs(difference);\r\n//\r\n//     // 中线下\r\n//     if (difference > 0) {\r\n//       // 正常拉\r\n//       if (distance < this.pullHeight) {\r\n//         if (distance >= this.refreshHeight + 80) {\r\n//           self.refresh();\r\n//         } else {\r\n//           // console.log('2.没有具备刷新条件弹回');\r\n//           // self.events.trigger('pullRebound');\r\n//           self.trigger('onPullRebound');\r\n//           self.reset();\r\n//         }\r\n//       }\r\n//       // 越界了\r\n//       else {\r\n//         self.refresh();\r\n//       }\r\n//     }\r\n//     // 中线上\r\n//     else {\r\n//       self.clear();\r\n//     }\r\n//   }\r\n//\r\n//   private onScroll(e) {\r\n//     const self = this;\r\n//\r\n//     if (e.target.scrollTop === 0) {\r\n//       self.isTop = true;\r\n//\r\n//       // @ts-ignore\r\n//       self.scrollEl.addEventListener('touchstart', this.onTouchStart);\r\n//\r\n//       // @ts-ignore\r\n//       self.scrollEl.addEventListener('mousedown', this.onTouchStart);\r\n//     } else if (self.isTop) {\r\n//       self.isTop = false;\r\n//\r\n//       // @ts-ignore\r\n//       self.scrollEl.removeEventListener('touchstart', this.onTouchStart);\r\n//\r\n//       // @ts-ignore\r\n//       self.scrollEl.removeEventListener('mousedown', this.onTouchStart);\r\n//     }\r\n//   }\r\n//\r\n//   /**\r\n//    * translateY - Y平移\r\n//    * @param el\r\n//    * @param y\r\n//    * @param duration\r\n//    * @private\r\n//    */\r\n//   private translateY(el, y: string, duration = 0) {\r\n//     el.style.transition = el.style.webkitTransition = `transform ${duration}ms ease`;\r\n//     el.style.transform = el.style.webkitTransform = `translate3d(0,${y},0)`;\r\n//   }\r\n//\r\n//   /**\r\n//    * rotateIcon\r\n//    * @param el\r\n//    * @param distance\r\n//    * @param duration\r\n//    * @private\r\n//    */\r\n//   private rotateIcon(el, distance, duration = 0) {\r\n//     const deg = distance;\r\n//     el.style.transition = el.style.webkitTransition = `transform ${duration}ms linear`;\r\n//     el.style.transform = el.style.webkitTransform = `rotate(${deg}deg)`;\r\n//   }\r\n//\r\n//   /**\r\n//    * clear\r\n//    * @access private\r\n//    */\r\n//   private clear() {\r\n//     this.removeEvents();\r\n//\r\n//     this.isDownPull = false;\r\n//\r\n//     this.isTop = true;\r\n//\r\n//     // @ts-ignore\r\n//     this.el.style.display = 'flex';\r\n//\r\n//     // @ts-ignore\r\n//     this.refreshElRef.current.style.display = 'none';\r\n//\r\n//     // @ts-ignore\r\n//     this.triggerInnerEl?.style.display = 'flex';\r\n//\r\n//     this.rotateIcon(this.iconEl, 180, 0);\r\n//\r\n//     // @ts-ignore\r\n//     this.scrollEl.style.overflowY = 'auto';\r\n//\r\n//     // @ts-ignore\r\n//     this.maskEl.style.display = 'none';\r\n//   }\r\n//\r\n//   /**\r\n//    * trigger\r\n//    * @param action\r\n//    * @param params\r\n//    * @private\r\n//    */\r\n//   private trigger(action, params?: any): void {\r\n//     if (this.props[action]) {\r\n//       this.props[action](params);\r\n//     }\r\n//   }\r\n//\r\n//   /**\r\n//    * refresh\r\n//    */\r\n//   refresh() {\r\n//     function onTransitionEnd() {\r\n//       // @ts-ignore\r\n//       self.triggerInnerEl.style.display = 'none';\r\n//\r\n//       // @ts-ignore\r\n//       self.refreshElRef.current.style.display = 'block';\r\n//\r\n//       self.trigger('onPullRefresh', self);\r\n//\r\n//       // @ts-ignore\r\n//       self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\r\n//\r\n//       self.setState({\r\n//         preUpdateTime: moment().valueOf(),\r\n//       });\r\n//     }\r\n//\r\n//     const self = this;\r\n//\r\n//     // @ts-ignore\r\n//     this.maskEl.style.display = 'block';\r\n//\r\n//     this.removeEvents();\r\n//\r\n//     // @ts-ignore\r\n//     self.scrollEl.addEventListener('transitionend', onTransitionEnd);\r\n//\r\n//     self.translateY(self.scrollEl, `${self.refreshHeight}px`, 500);\r\n//\r\n//     self.translateY(self.el, `calc(-100% + ${self.refreshHeight}px)`, 500);\r\n//\r\n//     self.rotateIcon(self.iconEl, 180, 300);\r\n//   }\r\n//\r\n//   /**\r\n//    * reset\r\n//    */\r\n//   reset() {\r\n//     function onTransitionEnd() {\r\n//       // @ts-ignore\r\n//       self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\r\n//\r\n//       // @ts-ignore\r\n//       self.triggerInnerEl?.style.display = 'flex';\r\n//     }\r\n//\r\n//     const self = this;\r\n//\r\n//     self.clear();\r\n//\r\n//     // @ts-ignore\r\n//     self.scrollEl.addEventListener('transitionend', onTransitionEnd);\r\n//\r\n//     self.translateY(self.scrollEl, '0px', 200);\r\n//\r\n//     self.translateY(self.el, 'calc(-100% + 0px)', 200);\r\n//   }\r\n//\r\n//   /**\r\n//    * resetUpdateTime\r\n//    * @param updateTime\r\n//    * @return Promise\r\n//    */\r\n//   resetUpdateTime(updateTime: number): Promise<null> {\r\n//     return new Promise((resolve) => {\r\n//       this.setState(\r\n//         {\r\n//           preUpdateTime: updateTime || moment().valueOf(),\r\n//         },\r\n//         () => resolve(),\r\n//       );\r\n//     });\r\n//   }\r\n//\r\n//   /**\r\n//    * getUpdateTime\r\n//    * @return number\r\n//    */\r\n//   getUpdateTime(): number {\r\n//     return this.state.preUpdateTime;\r\n//   }\r\n//\r\n//   private renderLoadingAnimation() {\r\n//     // @ts-ignore\r\n//     const { renderLoadingAnimation } = this.props;\r\n//\r\n//     return (\r\n//       <ConditionalRender conditional={!!renderLoadingAnimation}>\r\n//         {() => (\r\n//           <ConditionalRender\r\n//             conditional={Util.isString(renderLoadingAnimation)}\r\n//             // @ts-ignore\r\n//             noMatch={() => (\r\n//               <div\r\n//                 className={`${selectorPrefix}-trigger-refresh`}\r\n//                 // @ts-ignore\r\n//                 ref={this.refreshElRef}\r\n//               >\r\n//                 {(renderLoadingAnimation as Function)()}\r\n//               </div>\r\n//             )}\r\n//           >\r\n//             {() => (\r\n//               <div\r\n//                 className={classNames(\r\n//                   `${selectorPrefix}-trigger-refresh`,\r\n//                   ...(renderLoadingAnimation as unknown as string)|| '',\r\n//                 )}\r\n//                 // @ts-ignore\r\n//                 ref={this.refreshElRef}\r\n//               >\r\n//                 <div></div>\r\n//                 <div></div>\r\n//                 <div></div>\r\n//                 <div></div>\r\n//                 <div></div>\r\n//               </div>\r\n//             )}\r\n//           </ConditionalRender>\r\n//         )}\r\n//       </ConditionalRender>\r\n//     );\r\n//   }\r\n//\r\n//   /**\r\n//    * renderIcon\r\n//    * @private\r\n//    */\r\n//   private renderIcon() {\r\n//     const { renderIcon } = this.props;\r\n//\r\n//     return (\r\n//       <ConditionalRender\r\n//         conditional={!!renderIcon}\r\n//         // @ts-ignore\r\n//         noMatch={() => (\r\n//           <div className={`${selectorPrefix}-trigger-icon`}>\r\n//             <img\r\n//               className={`${selectorPrefix}-trigger-icon-inner`}\r\n//               src={defaultImg}\r\n//               alt=\"\"\r\n//               // @ts-ignore\r\n//               ref={this.iconElRef}\r\n//             />\r\n//           </div>\r\n//         )}\r\n//       >\r\n//         {() => (\r\n//           <div className={`${selectorPrefix}-trigger-icon`}>\r\n//             <div\r\n//               className={`${selectorPrefix}-trigger-icon-inner`}\r\n//               // @ts-ignore\r\n//               ref={this.iconElRef}\r\n//             >\r\n//               {/* @ts-ignore */}\r\n//               {renderIcon()}\r\n//             </div>\r\n//           </div>\r\n//         )}\r\n//       </ConditionalRender>\r\n//     );\r\n//   }\r\n//\r\n//   /**\r\n//    * renderLabel\r\n//    * @private\r\n//    */\r\n//   private renderLabel() {\r\n//     const { renderLabel, renderCanLabel } = this.props;\r\n//     const { isCan } = this.state;\r\n//\r\n//     return (\r\n//       <p className={`${selectorPrefix}-trigger-label`}>\r\n//         <ConditionalRender\r\n//           conditional={isCan}\r\n//           // @ts-ignore\r\n//           noMatch={() => renderLabel()}\r\n//         >\r\n//           {() => renderCanLabel()}\r\n//         </ConditionalRender>\r\n//       </p>\r\n//     );\r\n//   }\r\n//\r\n//   /**\r\n//    * renderUpdateTime\r\n//    * @private\r\n//    */\r\n//   private renderUpdateTime() {\r\n//     const { isShowUpdateTime, updateTimeFormat } = this.props;\r\n//     const { preUpdateTime } = this.state;\r\n//\r\n//     return (\r\n//       <ConditionalRender conditional={isShowUpdateTime}>\r\n//         {() => (\r\n//           <p className={`${selectorPrefix}-trigger-update`}>\r\n//             {Intl.v('更新时间')}：\r\n//             <span className={`${selectorPrefix}-trigger-update-label`}>\r\n//               {moment(preUpdateTime).format(updateTimeFormat)}\r\n//             </span>\r\n//           </p>\r\n//         )}\r\n//       </ConditionalRender>\r\n//     );\r\n//   }\r\n//\r\n//   render() {\r\n//     // @ts-ignore\r\n//     const { className, style, scrollClassName, scrollStyle, children } = this.props;\r\n//\r\n//     return (\r\n//       // @ts-ignore\r\n//       <div className={classNames(selectorPrefix, ...className|| '')} style={{ ...style }}>\r\n//         <div\r\n//           // @ts-ignore\r\n//           className={classNames(`${selectorPrefix}-scroll`, ...scrollClassName|| '')}\r\n//           style={{ ...scrollStyle }}\r\n//           // @ts-ignore\r\n//           ref={this.scrollElRef}\r\n//         >\r\n//           {children}\r\n//         </div>\r\n//\r\n//         <div\r\n//           className={`${selectorPrefix}-trigger`}\r\n//           // @ts-ignore\r\n//           ref={this.elRef}\r\n//         >\r\n//           <div\r\n//             className={`${selectorPrefix}-trigger-inner`}\r\n//             // @ts-ignore\r\n//             ref={this.triggerInnerElRef}\r\n//           >\r\n//             {this.renderIcon()}\r\n//             {this.renderLabel()}\r\n//             {this.renderUpdateTime()}\r\n//           </div>\r\n//           {this.renderLoadingAnimation()}\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n//\r\n// PullRefresh.defaultProps = {\r\n//   className: '',\r\n//   style: {},\r\n//   scrollClassName: '',\r\n//   scrollStyle: {},\r\n//   pullHeight: 200,\r\n//   renderLabel: () => Intl.v('下拉刷新'),\r\n//   renderCanLabel: () => Intl.v('松开刷新'),\r\n//   renderLoadingAnimation: 'la-ball-circus la-dark',\r\n//   isShowUpdateTime: true,\r\n//   updateTime: moment().valueOf(),\r\n//   updateTimeFormat: Resource.Dict.value.ResourceMomentFormat18.value(),\r\n// };\r\n//\r\n// PullRefresh.propTypes = {\r\n//   className: PropTypes.string,\r\n//   style: PropTypes.object,\r\n//   scrollClassName: PropTypes.string,\r\n//   scrollStyle: PropTypes.object,\r\n//   pullHeight: PropTypes.number,\r\n//   renderIcon: PropTypes.func,\r\n//   renderLabel: PropTypes.func,\r\n//   renderCanLabel: PropTypes.func,\r\n//   renderLoadingAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n//   isShowUpdateTime: PropTypes.bool,\r\n//   updateTime: PropTypes.number,\r\n//   updateTimeFormat: PropTypes.string,\r\n//   onPullStart: PropTypes.func,\r\n//   onPullCanRefresh: PropTypes.func,\r\n//   onPullRefresh: PropTypes.func,\r\n//   onPullBottom: PropTypes.func,\r\n//   onPullRebound: PropTypes.func,\r\n// };\r\nexport default forwardRef(PullRefresh);\r\n"],"names":["React","forwardRef","useEffect","useLayoutEffect","useRef","useImperativeHandle","classNames","moment","Intl","ConditionalRender","Util","Resource","Hooks","selectorPrefix","defaultImg","useSetState","PullRefresh","props","ref","_a","className","_b","style","_c","scrollClassName","_d","scrollStyle","renderIcon","_e","renderLabel","v","_f","renderCanLabel","_g","renderLoadingAnimation","_h","isShowUpdateTime","_j","updateTimeFormat","Dict","value","ResourceMomentFormat18","children","_k","isCan","setCan","_l","valueOf","preUpdateTime","setPreUpdateTime","elRef","scrollElRef","iconElRef","refreshElRef","triggerInnerElRef","el","scrollEl","iconEl","triggerInnerEl","maskEl","isTop","pullHeight","startPageY","isDownPull","refreshHeight","trigger","action","params","translateY","y","duration","transition","webkitTransition","transform","webkitTransform","clear","removeEvents","current","display","rotateIcon","overflowY","removeEventListener","onTouchMove","onTouchEnd","refresh","addEventListener","onTransitionEnd","reset","resetUpdateTime","updateTime","Promise","resolve","getUpdateTime","distance","deg","onTouchStart","e","changedTouches","pageY","overflow","difference","Math","abs","preventDefault","onScroll","target","scrollTop","document","querySelector","createElement","body","appendChild","clientHeight","conditional","noMatch","src","alt","format","isString"],"mappings":"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"}