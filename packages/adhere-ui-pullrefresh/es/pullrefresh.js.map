{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["import classNames from 'classnames';\r\nimport moment from 'moment';\r\nimport React, { forwardRef, memo, useCallback, useEffect, useImperativeHandle, useLayoutEffect, useRef, } from 'react';\r\nimport ConditionalRender from '@baifendian/adhere-ui-conditionalrender';\r\nimport Hooks from '@baifendian/adhere-ui-hooks';\r\nimport Util from '@baifendian/adhere-util';\r\nimport Intl from '@baifendian/adhere-util-intl';\r\nimport Resource from '@baifendian/adhere-util-resource';\r\nvar selectorPrefix = 'adhere-ui-pullrefresh';\r\nvar defaultImg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHN0eWxlPSJ3aWR0aDozMDhweDtoZWlnaHQ6MzA4cHg7IiB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lvaIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMTAyNHB4IiBoZWlnaHQ9IjEwMjRweCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAyNCAxMDI0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCiAgPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMCIgZmlsbD0iI2VjZjBmMSIgZD0iTTc5Ny43NjQ0MiAzMjYuNTU4NDFjLTguODg0MTk5LTE1LjU2MzMyNy0yNTIuODgwMS0yODYuODE5MDE5LTI2OC4zNzk1MTItMzEzLjU2NzQ4OS0xMC4xMzA1NDQtMTcuNDQ4ODIzLTM0LjI1ODQ5NS0xNy4xOTMxNjItNDQuMzg5MDM4IDBDNDczLjY1MDkzOSAzMi4yNjEzMjQgMjMwLjk5NzI1NSAzMDQuNjM1NTMgMjE4LjM3NDAyMyAzMjcuNDIxMjY0Yy05LjIzNTczMiAxNi41NTQwMTEgMC45NTg3MjcgMzguMzgxMDE5IDIxLjk1NDgzNyAzOC4zODEwMTlsMTE5LjkwNDczMSAwIDAgMjU2LjQ5MTMwMyAwIDM2Ljc4MzE0MSAyOTEuODM2MzU0IDAgMC0yOTMuMzA2NDAyIDEyMy41Nzk4NDkgMEM3OTQuNjk2NDk1IDM2NS43NzAzMjUgODA4Ljk0OTU2MiAzNDYuMTE2NDMxIDc5Ny43NjQ0MiAzMjYuNTU4NDF6IiAvPg0KPHBhdGggY2xhc3M9InN2Z3BhdGgiIGRhdGEtaW5kZXg9InBhdGhfMSIgZmlsbD0iI2VjZjBmMSIgZD0iTTM2MC4yMDE2MzMgNjg5LjY5MjA2MWwyOTIuMzE1NzE4IDAgMCA5MC45MTkyMzItMjkyLjMxNTcxOCAwIDAtOTAuOTE5MjMyWiIgLz4NCjxwYXRoIGNsYXNzPSJzdmdwYXRoIiBkYXRhLWluZGV4PSJwYXRoXzIiIGZpbGw9IiNlY2YwZjEiIGQ9Ik0zNjAuMjAxNjMzIDg0MC45MTUxOTFsMjkyLjMxNTcxOCAwIDAgNjAuNTkxNTE2LTI5Mi4zMTU3MTggMCAwLTYwLjU5MTUxNloiIC8+DQo8cGF0aCBjbGFzcz0ic3ZncGF0aCIgZGF0YS1pbmRleD0icGF0aF8zIiBmaWxsPSIjZWNmMGYxIiBkPSJNMzYwLjIwMTYzMyA5OTIuMzkzOTgybDI5MC40MzAyMjIgMCAwIDMwLjI5NTc1OC0yOTAuNDMwMjIyIDAgMC0zMC4yOTU3NThaIiAvPg0KDQo8L3N2Zz4NCg==';\r\nvar useSetState = Hooks.useSetState;\r\nvar PullRefresh = function (props, ref) {\r\n    var _a = props.className, className = _a === void 0 ? '' : _a, _b = props.style, style = _b === void 0 ? {} : _b, _c = props.scrollClassName, scrollClassName = _c === void 0 ? '' : _c, _d = props.scrollStyle, scrollStyle = _d === void 0 ? {} : _d, renderIcon = props.renderIcon, _e = props.renderLabel, renderLabel = _e === void 0 ? function () { return Intl.v('下拉刷新'); } : _e, _f = props.renderCanLabel, renderCanLabel = _f === void 0 ? function () { return Intl.v('松开刷新'); } : _f, _g = props.renderLoadingAnimation, renderLoadingAnimation = _g === void 0 ? 'la-ball-circus la-dark' : _g, _h = props.isShowUpdateTime, isShowUpdateTime = _h === void 0 ? true : _h, _j = props.updateTimeFormat, updateTimeFormat = _j === void 0 ? Resource.Dict.value.ResourceMomentFormat18.value() : _j, children = props.children;\r\n    var _k = useSetState(false), isCan = _k[0], setCan = _k[1];\r\n    var _l = useSetState(moment().valueOf()), preUpdateTime = _l[0], setPreUpdateTime = _l[1];\r\n    var elRef = useRef(null);\r\n    var scrollElRef = useRef(null);\r\n    var iconElRef = useRef(null);\r\n    var refreshElRef = useRef(null);\r\n    var triggerInnerElRef = useRef(null);\r\n    var el = useRef(null);\r\n    var scrollEl = useRef(null);\r\n    var iconEl = useRef(null);\r\n    var triggerInnerEl = useRef(null);\r\n    var maskEl = useRef(null);\r\n    // 是否到顶了\r\n    var isTop = useRef(true);\r\n    var pullHeight = useRef(200);\r\n    var startPageY = useRef(-1);\r\n    var isDownPull = useRef(false);\r\n    var refreshHeight = useRef(0);\r\n    /**\r\n     * renderIcon\r\n     */\r\n    var _renderIcon = useCallback(function () { return (React.createElement(ConditionalRender, { conditional: !!renderIcon, noMatch: function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\" },\r\n            React.createElement(\"img\", { className: selectorPrefix + \"-trigger-icon-inner\", src: defaultImg, alt: \"\", ref: iconElRef }))); } }, function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\" },\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon-inner\", ref: iconElRef }, renderIcon === null || renderIcon === void 0 ? void 0 : renderIcon()))); })); }, [renderIcon]);\r\n    var _renderLabel = useCallback(function () { return (React.createElement(\"p\", { className: selectorPrefix + \"-trigger-label\" },\r\n        React.createElement(ConditionalRender, { conditional: isCan, noMatch: function () { return renderLabel === null || renderLabel === void 0 ? void 0 : renderLabel(); } }, function () { return renderCanLabel === null || renderCanLabel === void 0 ? void 0 : renderCanLabel(); }))); }, [isCan, renderLabel, renderCanLabel]);\r\n    /**\r\n     * renderUpdateTime\r\n     */\r\n    var renderUpdateTime = useCallback(function () { return (React.createElement(ConditionalRender, { conditional: isShowUpdateTime }, function () { return (React.createElement(\"p\", { className: selectorPrefix + \"-trigger-update\" },\r\n        Intl.v('更新时间'),\r\n        \"\\uFF1A\",\r\n        React.createElement(\"span\", { className: selectorPrefix + \"-trigger-update-label\" }, moment(preUpdateTime).format(updateTimeFormat)))); })); }, [isShowUpdateTime, preUpdateTime, updateTimeFormat]);\r\n    var _renderLoadingAnimation = useCallback(function () { return (React.createElement(ConditionalRender, { conditional: !!renderLoadingAnimation }, function () { return (React.createElement(ConditionalRender, { conditional: Util.isString(renderLoadingAnimation), noMatch: function () { return (React.createElement(\"div\", { className: selectorPrefix + \"-trigger-refresh\", ref: refreshElRef }, renderLoadingAnimation())); } }, function () { return (React.createElement(\"div\", { className: classNames(selectorPrefix + \"-trigger-refresh\", renderLoadingAnimation), ref: refreshElRef },\r\n        React.createElement(\"div\", null),\r\n        React.createElement(\"div\", null),\r\n        React.createElement(\"div\", null),\r\n        React.createElement(\"div\", null),\r\n        React.createElement(\"div\", null))); })); })); }, [renderLoadingAnimation]);\r\n    /**\r\n     * renderMask\r\n     */\r\n    function renderMask() {\r\n        maskEl.current = document.querySelector(\".\" + selectorPrefix + \"-mask\");\r\n        if (!maskEl.current) {\r\n            maskEl.current = document.createElement('div');\r\n            maskEl.current.className = selectorPrefix + \"-mask\";\r\n            document.body.appendChild(maskEl.current);\r\n        }\r\n    }\r\n    /**\r\n     * getPullHeight\r\n     */\r\n    function getPullHeight() {\r\n        var _a = props.pullHeight, pullHeight = _a === void 0 ? 200 : _a;\r\n        if ((pullHeight || 200) <= 0) {\r\n            return 200;\r\n        }\r\n        else {\r\n            if ((pullHeight || 200) > scrollEl.current.clientHeight) {\r\n                return scrollEl.current.clientHeight;\r\n            }\r\n            else {\r\n                return pullHeight || 200;\r\n            }\r\n        }\r\n    }\r\n    function initEvents() {\r\n        var _a, _b, _c;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchstart', onTouchStart);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousedown', onTouchStart);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener('scroll', onScroll);\r\n    }\r\n    /**\r\n     * trigger\r\n     * @param action\r\n     * @param params\r\n     */\r\n    function trigger(action, params) {\r\n        if (props[action]) {\r\n            props[action](params);\r\n        }\r\n    }\r\n    /**\r\n     * translateY - Y平移\r\n     * @param el\r\n     * @param y\r\n     * @param duration\r\n     * @private\r\n     */\r\n    function translateY(el, y, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\r\n        el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\r\n    }\r\n    /**\r\n     * clear\r\n     */\r\n    function clear() {\r\n        removeEvents();\r\n        isDownPull.current = false;\r\n        isTop.current = true;\r\n        el.current.style.display = 'flex';\r\n        refreshElRef.current.style.display = 'none';\r\n        triggerInnerEl.current.style.display = 'flex';\r\n        rotateIcon(iconEl.current, 180, 0);\r\n        scrollEl.current.style.overflowY = 'auto';\r\n        maskEl.current.style.display = 'none';\r\n    }\r\n    /**\r\n     * removeEvents\r\n     */\r\n    function removeEvents() {\r\n        var _a, _b, _c, _d;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mousemove', onTouchMove);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('mouseup', onTouchEnd);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('touchmove', onTouchMove);\r\n        (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('touchend', onTouchEnd);\r\n    }\r\n    /**\r\n     * refresh\r\n     */\r\n    function refresh() {\r\n        var _a;\r\n        function onTransitionEnd() {\r\n            var _a;\r\n            triggerInnerEl.current.style.display = 'none';\r\n            refreshElRef.current.style.display = 'block';\r\n            trigger('onPullRefresh');\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', onTransitionEnd);\r\n            setPreUpdateTime(moment().valueOf());\r\n        }\r\n        maskEl.current.style.display = 'block';\r\n        removeEvents();\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('transitionend', onTransitionEnd);\r\n        translateY(scrollEl.current, refreshHeight.current + \"px\", 500);\r\n        translateY(el.current, \"calc(-100% + \" + refreshHeight.current + \"px)\", 500);\r\n        rotateIcon(iconEl.current, 180, 300);\r\n    }\r\n    /**\r\n     * reset\r\n     */\r\n    function reset() {\r\n        var _a;\r\n        function onTransitionEnd() {\r\n            var _a;\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', onTransitionEnd);\r\n            triggerInnerEl.current.style.display = 'flex';\r\n        }\r\n        clear();\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('transitionend', onTransitionEnd);\r\n        translateY(scrollEl.current, '0px', 200);\r\n        translateY(el.current, 'calc(-100% + 0px)', 200);\r\n    }\r\n    /**\r\n     * resetUpdateTime\r\n     * @param updateTime\r\n     * @return Promise\r\n     */\r\n    function resetUpdateTime(updateTime) {\r\n        return new Promise(function (resolve) {\r\n            return setPreUpdateTime(updateTime || moment().valueOf(), function () { return resolve(); });\r\n        });\r\n    }\r\n    /**\r\n     * getUpdateTime\r\n     * @return number\r\n     */\r\n    function getUpdateTime() {\r\n        return preUpdateTime;\r\n    }\r\n    /**\r\n     * rotateIcon\r\n     * @param el\r\n     * @param distance\r\n     * @param duration\r\n     * @private\r\n     */\r\n    function rotateIcon(el, distance, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        var deg = distance;\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\r\n        el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\r\n    }\r\n    /**\r\n     * onTouchStart\r\n     */\r\n    function onTouchStart(e) {\r\n        var _a, _b, _c, _d;\r\n        trigger('onPullStart');\r\n        startPageY.current = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchmove', onTouchMove);\r\n        (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousemove', onTouchMove);\r\n        (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.addEventListener('touchend', onTouchEnd);\r\n        (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.addEventListener('mouseup', onTouchEnd);\r\n    }\r\n    /**\r\n     * onTouchMove\r\n     * @param e\r\n     */\r\n    function onTouchMove(e) {\r\n        scrollEl.current.style.overflow = 'hidden';\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        var difference = targetY - startPageY.current;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            e.preventDefault();\r\n            isDownPull.current = true;\r\n            // 正常拉\r\n            if (distance < pullHeight.current) {\r\n                translateY(scrollEl.current, distance + \"px\", 0);\r\n                translateY(el.current, \"calc(-100% + \" + distance + \"px)\", 0);\r\n                // 具备刷新条件\r\n                if (distance >= refreshHeight.current + 80) {\r\n                    // console.log('3.具备刷新条件');\r\n                    rotateIcon(iconEl.current, 0, 150);\r\n                    setCan(true, function () { return trigger('onPullCanRefresh'); });\r\n                }\r\n                // 不具备刷新条件\r\n                else {\r\n                    rotateIcon(iconEl.current, 180, 150);\r\n                    setCan(false);\r\n                }\r\n                el.current.style.display = 'flex';\r\n            }\r\n            // 越界了\r\n            else {\r\n                translateY(scrollEl.current, pullHeight.current + \"px\", 0);\r\n                translateY(el.current, \"calc(-100% + \" + pullHeight.current + \"px)\", 0);\r\n                rotateIcon(iconEl.current, 0, 150);\r\n                // console.log('4.拉动到了底部');\r\n                setCan(true, function () { return trigger('onPullBottom'); });\r\n            }\r\n        }\r\n        // 中线上\r\n        else if (isDownPull.current) {\r\n            e.preventDefault();\r\n            translateY(scrollEl.current, '0px', 0);\r\n            translateY(el.current, 'calc(-100% + 0px)', 0);\r\n            rotateIcon(iconEl.current, 180, 0);\r\n        }\r\n        // 其他\r\n        else {\r\n            clear();\r\n        }\r\n    }\r\n    function onTouchEnd(e) {\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        var difference = targetY - startPageY.current;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            // 正常拉\r\n            if (distance < pullHeight.current) {\r\n                if (distance >= refreshHeight.current + 80) {\r\n                    refresh();\r\n                }\r\n                else {\r\n                    // console.log('2.没有具备刷新条件弹回');\r\n                    // self.events.trigger('pullRebound');\r\n                    trigger('onPullRebound');\r\n                    reset();\r\n                }\r\n            }\r\n            // 越界了\r\n            else {\r\n                refresh();\r\n            }\r\n        }\r\n        // 中线上\r\n        else {\r\n            clear();\r\n        }\r\n    }\r\n    function onScroll(e) {\r\n        var _a, _b, _c, _d;\r\n        if (e.target.scrollTop === 0) {\r\n            isTop.current = true;\r\n            (_a = scrollEl.current) === null || _a === void 0 ? void 0 : _a.addEventListener('touchstart', onTouchStart);\r\n            (_b = scrollEl.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mousedown', onTouchStart);\r\n        }\r\n        else if (isTop.current) {\r\n            isTop.current = false;\r\n            (_c = scrollEl.current) === null || _c === void 0 ? void 0 : _c.removeEventListener('touchstart', onTouchStart);\r\n            (_d = scrollEl.current) === null || _d === void 0 ? void 0 : _d.removeEventListener('mousedown', onTouchStart);\r\n        }\r\n    }\r\n    useImperativeHandle(ref, function () { return ({\r\n        refresh: refresh,\r\n        reset: reset,\r\n        resetUpdateTime: resetUpdateTime,\r\n        getUpdateTime: getUpdateTime,\r\n    }); });\r\n    useEffect(function () {\r\n        setPreUpdateTime(props.updateTime || moment().valueOf());\r\n    }, [props.updateTime]);\r\n    useEffect(function () {\r\n        renderMask();\r\n    }, []);\r\n    useLayoutEffect(function () {\r\n        el.current = elRef.current;\r\n        iconEl.current = iconElRef.current;\r\n        scrollEl.current = scrollElRef.current;\r\n        triggerInnerEl.current = triggerInnerElRef.current;\r\n        pullHeight.current = getPullHeight();\r\n        refreshHeight.current = el.current.clientHeight;\r\n    }, []);\r\n    useLayoutEffect(function () {\r\n        initEvents();\r\n        return function () { return removeEvents(); };\r\n    });\r\n    return (React.createElement(\"div\", { className: classNames(selectorPrefix, className || ''), style: style || {} },\r\n        React.createElement(\"div\", { className: classNames(selectorPrefix + \"-scroll\", scrollClassName || ''), style: scrollStyle || {}, ref: scrollElRef }, children),\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-trigger\", ref: elRef },\r\n            React.createElement(\"div\", { className: selectorPrefix + \"-trigger-inner\", ref: triggerInnerElRef },\r\n                _renderIcon(),\r\n                _renderLabel(),\r\n                renderUpdateTime()),\r\n            _renderLoadingAnimation())));\r\n};\r\nexport default memo(forwardRef(PullRefresh));\r\n"],"names":["classNames","moment","React","forwardRef","memo","useCallback","useEffect","useImperativeHandle","useLayoutEffect","useRef","ConditionalRender","Hooks","Util","Intl","Resource","selectorPrefix","defaultImg","useSetState","PullRefresh","props","ref","_a","className","_b","style","_c","scrollClassName","_d","scrollStyle","renderIcon","_e","renderLabel","v","_f","renderCanLabel","_g","renderLoadingAnimation","_h","isShowUpdateTime","_j","updateTimeFormat","Dict","value","ResourceMomentFormat18","children","_k","isCan","setCan","_l","valueOf","preUpdateTime","setPreUpdateTime","elRef","scrollElRef","iconElRef","refreshElRef","triggerInnerElRef","el","scrollEl","iconEl","triggerInnerEl","maskEl","isTop","pullHeight","startPageY","isDownPull","refreshHeight","_renderIcon","createElement","conditional","noMatch","src","alt","_renderLabel","renderUpdateTime","format","_renderLoadingAnimation","isString","trigger","action","params","translateY","y","duration","transition","webkitTransition","transform","webkitTransform","clear","removeEvents","current","display","rotateIcon","overflowY","removeEventListener","onTouchMove","onTouchEnd","refresh","addEventListener","onTransitionEnd","reset","resetUpdateTime","updateTime","Promise","resolve","getUpdateTime","distance","deg","onTouchStart","e","changedTouches","pageY","overflow","difference","Math","abs","preventDefault","onScroll","target","scrollTop","document","querySelector","body","appendChild","clientHeight"],"mappings":"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"}