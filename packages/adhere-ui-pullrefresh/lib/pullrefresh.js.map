{"version":3,"file":"pullrefresh.js","sources":["pullrefresh.js"],"sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar prop_types_1 = __importDefault(require(\"prop-types\"));\r\nvar classnames_1 = __importDefault(require(\"classnames\"));\r\nvar moment_1 = __importDefault(require(\"moment\"));\r\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\r\nvar adhere_ui_conditionalrender_1 = __importDefault(require(\"@baifendian/adhere-ui-conditionalrender\"));\r\nvar adhere_util_resource_1 = __importDefault(require(\"@baifendian/adhere-util-resource\"));\r\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\r\nvar selectorPrefix = 'adhere-ui-pullrefresh';\r\n/**\r\n * PullRefresh\r\n * @class PullRefresh\r\n * @classdesc PullRefresh\r\n */\r\nvar PullRefresh = /** @class */ (function (_super) {\r\n    __extends(PullRefresh, _super);\r\n    function PullRefresh(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.state = {\r\n            isCan: false,\r\n        };\r\n        // 是否到顶了\r\n        _this.isTop = true;\r\n        _this.el = null;\r\n        _this.scrollEl = null;\r\n        _this.iconEl = null;\r\n        _this.triggerInnerEl = null;\r\n        _this.maskEl = null;\r\n        _this.pullHeight = 200;\r\n        _this.isDownPull = false;\r\n        _this.refreshHeight = 0;\r\n        _this.elRef = react_1.default.createRef();\r\n        _this.iconElRef = react_1.default.createRef();\r\n        _this.refreshElRef = react_1.default.createRef();\r\n        _this.scrollElRef = react_1.default.createRef();\r\n        _this.triggerInnerElRef = react_1.default.createRef();\r\n        _this.onTouchStart = _this.onTouchStart.bind(_this);\r\n        _this.onTouchMove = _this.onTouchMove.bind(_this);\r\n        _this.onTouchEnd = _this.onTouchEnd.bind(_this);\r\n        _this.onScroll = _this.onScroll.bind(_this);\r\n        _this.renderMask();\r\n        return _this;\r\n    }\r\n    PullRefresh.prototype.componentDidMount = function () {\r\n        this.el = this.elRef.current;\r\n        this.iconEl = this.iconElRef.current;\r\n        this.scrollEl = this.scrollElRef.current;\r\n        this.triggerInnerEl = this.triggerInnerElRef.current;\r\n        this.pullHeight = this.getPullHeight();\r\n        this.refreshHeight = this.el.clientHeight;\r\n        this.addEvents();\r\n    };\r\n    /**\r\n     * getPullHeight\r\n     * @private\r\n     * @return number\r\n     */\r\n    PullRefresh.prototype.getPullHeight = function () {\r\n        var pullHeight = this.props.pullHeight;\r\n        if (pullHeight <= 0) {\r\n            return 200;\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            if (pullHeight > this.scrollEl.clientHeight) {\r\n                // @ts-ignore\r\n                return this.scrollEl.clientHeight;\r\n            }\r\n            else {\r\n                return pullHeight;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * renderMask\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.renderMask = function () {\r\n        this.maskEl = document.createElement('div');\r\n        this.maskEl.className = selectorPrefix + \"-mask\";\r\n        document.body.appendChild(this.maskEl);\r\n    };\r\n    /**\r\n     * addEvents\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.addEvents = function () {\r\n        // @ts-ignore\r\n        this.scrollEl.addEventListener('touchstart', this.onTouchStart);\r\n        // @ts-ignore\r\n        this.scrollEl.addEventListener('mousedown', this.onTouchStart);\r\n        // @ts-ignore\r\n        this.scrollEl.addEventListener('scroll', this.onScroll);\r\n    };\r\n    /**\r\n     * removeEvents\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.removeEvents = function () {\r\n        // @ts-ignore\r\n        this.scrollEl.removeEventListener('mousemove', this.onTouchMove);\r\n        // @ts-ignore\r\n        this.scrollEl.removeEventListener('mouseup', this.onTouchEnd);\r\n        // @ts-ignore\r\n        this.scrollEl.removeEventListener('touchmove', this.onTouchMove);\r\n        // @ts-ignore\r\n        this.scrollEl.removeEventListener('touchend', this.onTouchEnd);\r\n    };\r\n    /**\r\n     * onTouchStart\r\n     * @param e\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.onTouchStart = function (e) {\r\n        this.trigger('onPullStart');\r\n        this.startPageY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        var scrollEl = this.scrollEl;\r\n        // @ts-ignore\r\n        scrollEl.addEventListener('touchmove', this.onTouchMove);\r\n        // @ts-ignore\r\n        scrollEl.addEventListener('mousemove', this.onTouchMove);\r\n        // @ts-ignore\r\n        scrollEl.addEventListener('touchend', this.onTouchEnd);\r\n        // @ts-ignore\r\n        scrollEl.addEventListener('mouseup', this.onTouchEnd);\r\n    };\r\n    /**\r\n     * onTouchMove\r\n     * @param e\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.onTouchMove = function (e) {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        this.scrollEl.style.overflow = 'hidden';\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        // @ts-ignore\r\n        var difference = targetY - this.startPageY;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            e.preventDefault();\r\n            this.isDownPull = true;\r\n            // 正常拉\r\n            if (distance < this.pullHeight) {\r\n                this.translateY(this.scrollEl, distance + \"px\", 0);\r\n                this.translateY(this.el, \"calc(-100% + \" + distance + \"px)\", 0);\r\n                // 具备刷新条件\r\n                if (distance >= this.refreshHeight + 80) {\r\n                    console.log('3.具备刷新条件');\r\n                    this.rotateIcon(this.iconEl, 0, 150);\r\n                    this.setState({\r\n                        isCan: true,\r\n                    }, function () {\r\n                        _this.trigger('onPullCanRefresh');\r\n                    });\r\n                }\r\n                // 不具备刷新条件\r\n                else {\r\n                    this.rotateIcon(this.iconEl, 180, 150);\r\n                    this.setState({\r\n                        isCan: false,\r\n                    });\r\n                }\r\n                // @ts-ignore\r\n                this.el.style.display = 'flex';\r\n            }\r\n            // 越界了\r\n            else {\r\n                this.translateY(this.scrollEl, this.pullHeight + \"px\", 0);\r\n                this.translateY(this.el, \"calc(-100% + \" + this.pullHeight + \"px)\", 0);\r\n                this.rotateIcon(this.iconEl, 0, 150);\r\n                console.log('4.拉动到了底部');\r\n                this.setState({\r\n                    isCan: true,\r\n                }, function () {\r\n                    _this.trigger('onPullBottom');\r\n                });\r\n            }\r\n        }\r\n        // 中线上\r\n        else if (this.isDownPull) {\r\n            e.preventDefault();\r\n            this.translateY(this.scrollEl, '0px', 0);\r\n            this.translateY(this.el, 'calc(-100% + 0px)', 0);\r\n            this.rotateIcon(this.iconEl, 180, 0);\r\n        }\r\n        // 其他\r\n        else {\r\n            this.clear.call(this);\r\n        }\r\n    };\r\n    PullRefresh.prototype.onTouchEnd = function (e) {\r\n        var self = this;\r\n        var targetY = e.changedTouches ? e.changedTouches[0].pageY : e.pageY;\r\n        // @ts-ignore\r\n        var difference = targetY - this.startPageY;\r\n        var distance = Math.abs(difference);\r\n        // 中线下\r\n        if (difference > 0) {\r\n            // 正常拉\r\n            if (distance < this.pullHeight) {\r\n                if (distance >= this.refreshHeight + 80) {\r\n                    self.refresh();\r\n                }\r\n                else {\r\n                    console.log('2.没有具备刷新条件弹回');\r\n                    // self.events.trigger('pullRebound');\r\n                    self.trigger('onPullRebound');\r\n                    self.reset();\r\n                }\r\n            }\r\n            // 越界了\r\n            else {\r\n                self.refresh();\r\n            }\r\n        }\r\n        // 中线上\r\n        else {\r\n            self.clear();\r\n        }\r\n    };\r\n    PullRefresh.prototype.onScroll = function (e) {\r\n        var self = this;\r\n        if (e.target.scrollTop === 0) {\r\n            self.isTop = true;\r\n            // @ts-ignore\r\n            self.scrollEl.addEventListener('touchstart', this.onTouchStart);\r\n            // @ts-ignore\r\n            self.scrollEl.addEventListener('mousedown', this.onTouchStart);\r\n        }\r\n        else if (self.isTop) {\r\n            self.isTop = false;\r\n            // @ts-ignore\r\n            self.scrollEl.removeEventListener('touchstart', this.onTouchStart);\r\n            // @ts-ignore\r\n            self.scrollEl.removeEventListener('mousedown', this.onTouchStart);\r\n        }\r\n    };\r\n    /**\r\n     * translateY - Y平移\r\n     * @param el\r\n     * @param y\r\n     * @param duration\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.translateY = function (el, y, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms ease\";\r\n        el.style.transform = el.style.webkitTransform = \"translate3d(0,\" + y + \",0)\";\r\n    };\r\n    /**\r\n     * rotateIcon\r\n     * @param el\r\n     * @param distance\r\n     * @param duration\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.rotateIcon = function (el, distance, duration) {\r\n        if (duration === void 0) { duration = 0; }\r\n        var deg = distance;\r\n        el.style.transition = el.style.webkitTransition = \"transform \" + duration + \"ms linear\";\r\n        el.style.transform = el.style.webkitTransform = \"rotate(\" + deg + \"deg)\";\r\n    };\r\n    /**\r\n     * clear\r\n     * @access private\r\n     */\r\n    PullRefresh.prototype.clear = function () {\r\n        var _a;\r\n        this.removeEvents();\r\n        this.isDownPull = false;\r\n        this.isTop = true;\r\n        // @ts-ignore\r\n        this.el.style.display = 'flex';\r\n        // @ts-ignore\r\n        this.refreshElRef.current.style.display = 'none';\r\n        // @ts-ignore\r\n        (_a = this.triggerInnerEl) === null || _a === void 0 ? void 0 : _a.style.display = 'flex';\r\n        this.rotateIcon(this.iconEl, 180, 0);\r\n        // @ts-ignore\r\n        this.scrollEl.style.overflowY = 'auto';\r\n        // @ts-ignore\r\n        this.maskEl.style.display = 'none';\r\n    };\r\n    /**\r\n     * trigger\r\n     * @param action\r\n     * @param params\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.trigger = function (action, params) {\r\n        if (this.props[action]) {\r\n            this.props[action](params);\r\n        }\r\n    };\r\n    /**\r\n     * refresh\r\n     */\r\n    PullRefresh.prototype.refresh = function () {\r\n        function onTransitionEnd() {\r\n            // @ts-ignore\r\n            self.triggerInnerEl.style.display = 'none';\r\n            // @ts-ignore\r\n            self.refreshElRef.current.style.display = 'block';\r\n            self.trigger('onPullRefresh', self);\r\n            // @ts-ignore\r\n            self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\r\n        }\r\n        var self = this;\r\n        // @ts-ignore\r\n        this.maskEl.style.display = 'block';\r\n        this.removeEvents();\r\n        // @ts-ignore\r\n        self.scrollEl.addEventListener('transitionend', onTransitionEnd);\r\n        self.translateY(self.scrollEl, self.refreshHeight + \"px\", 500);\r\n        self.translateY(self.el, \"calc(-100% + \" + self.refreshHeight + \"px)\", 500);\r\n        self.rotateIcon(self.iconEl, 180, 300);\r\n    };\r\n    /**\r\n     * reset\r\n     */\r\n    PullRefresh.prototype.reset = function () {\r\n        function onTransitionEnd() {\r\n            var _a;\r\n            // @ts-ignore\r\n            self.scrollEl.removeEventListener('transitionend', onTransitionEnd);\r\n            // @ts-ignore\r\n            (_a = self.triggerInnerEl) === null || _a === void 0 ? void 0 : _a.style.display = 'flex';\r\n        }\r\n        var self = this;\r\n        self.clear();\r\n        // @ts-ignore\r\n        self.scrollEl.addEventListener('transitionend', onTransitionEnd);\r\n        self.translateY(self.scrollEl, '0px', 200);\r\n        self.translateY(self.el, 'calc(-100% + 0px)', 200);\r\n    };\r\n    PullRefresh.prototype.renderLoadingAnimation = function () {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        var renderLoadingAnimation = this.props.renderLoadingAnimation;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!renderLoadingAnimation }, function () { return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: adhere_util_1.default.isString(renderLoadingAnimation), \r\n            // @ts-ignore\r\n            noMatch: function () { return (react_1.default.createElement(\"div\", { className: selectorPrefix + \"-trigger-refresh\", \r\n                // @ts-ignore\r\n                ref: _this.refreshElRef }, renderLoadingAnimation())); } }, function () { return (react_1.default.createElement(\"div\", { className: classnames_1.default.apply(void 0, __spreadArrays([selectorPrefix + \"-trigger-refresh\"], renderLoadingAnimation.split(' '))), \r\n            // @ts-ignore\r\n            ref: _this.refreshElRef },\r\n            react_1.default.createElement(\"div\", null),\r\n            react_1.default.createElement(\"div\", null),\r\n            react_1.default.createElement(\"div\", null),\r\n            react_1.default.createElement(\"div\", null),\r\n            react_1.default.createElement(\"div\", null))); })); }));\r\n    };\r\n    /**\r\n     * renderIcon\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.renderIcon = function () {\r\n        var _this = this;\r\n        var renderIcon = this.props.renderIcon;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: !!renderIcon, \r\n            // @ts-ignore\r\n            noMatch: function () { return react_1.default.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\", ref: _this.iconElRef }); } }, function () { return (react_1.default.createElement(\"div\", { className: selectorPrefix + \"-trigger-icon\", \r\n            // @ts-ignore\r\n            ref: _this.iconElRef }, renderIcon())); }));\r\n    };\r\n    /**\r\n     * renderLabel\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.renderLabel = function () {\r\n        var _a = this.props, renderLabel = _a.renderLabel, renderCanLabel = _a.renderCanLabel;\r\n        var isCan = this.state.isCan;\r\n        return (react_1.default.createElement(\"p\", { className: selectorPrefix + \"-trigger-label\" },\r\n            react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: isCan, \r\n                // @ts-ignore\r\n                noMatch: function () { return renderLabel(); } }, function () { return renderCanLabel(); })));\r\n    };\r\n    /**\r\n     * renderUpdateTime\r\n     * @private\r\n     */\r\n    PullRefresh.prototype.renderUpdateTime = function () {\r\n        var isShowUpdateTime = this.props.isShowUpdateTime;\r\n        return (react_1.default.createElement(adhere_ui_conditionalrender_1.default, { conditional: isShowUpdateTime }, function () { return (react_1.default.createElement(\"p\", { className: selectorPrefix + \"-trigger-update\" },\r\n            adhere_util_intl_1.default.v('更新时间'),\r\n            \"\\uFF1A\",\r\n            react_1.default.createElement(\"span\", { className: selectorPrefix + \"-trigger-update-label\" }, moment_1.default().format(adhere_util_resource_1.default.Dict.value.ResourceMomentFormatFull.value)))); }));\r\n    };\r\n    PullRefresh.prototype.render = function () {\r\n        // @ts-ignore\r\n        var _a = this.props, className = _a.className, style = _a.style, scrollClassName = _a.scrollClassName, scrollStyle = _a.scrollStyle, children = _a.children;\r\n        return (\r\n        // @ts-ignore\r\n        react_1.default.createElement(\"div\", { className: classnames_1.default.apply(void 0, __spreadArrays([selectorPrefix], className.split(' '))), style: __assign({}, style) },\r\n            react_1.default.createElement(\"div\", { \r\n                // @ts-ignore\r\n                className: classnames_1.default.apply(void 0, __spreadArrays([selectorPrefix + \"-scroll\"], scrollClassName.split(' '))), style: __assign({}, scrollStyle), \r\n                // @ts-ignore\r\n                ref: this.scrollElRef }, children),\r\n            react_1.default.createElement(\"div\", { className: selectorPrefix + \"-trigger\", \r\n                // @ts-ignore\r\n                ref: this.elRef },\r\n                react_1.default.createElement(\"div\", { className: selectorPrefix + \"-trigger-inner\", \r\n                    // @ts-ignore\r\n                    ref: this.triggerInnerElRef },\r\n                    this.renderIcon(),\r\n                    this.renderLabel(),\r\n                    this.renderUpdateTime()),\r\n                this.renderLoadingAnimation())));\r\n    };\r\n    return PullRefresh;\r\n}(react_1.default.Component));\r\nPullRefresh.defaultProps = {\r\n    className: '',\r\n    style: {},\r\n    scrollClassName: '',\r\n    scrollStyle: {},\r\n    pullHeight: 200,\r\n    renderIcon: function () { return null; },\r\n    renderLabel: function () { return adhere_util_intl_1.default.v('下拉刷新'); },\r\n    renderCanLabel: function () { return adhere_util_intl_1.default.v('松开刷新'); },\r\n    isShowUpdateTime: true,\r\n    renderLoadingAnimation: 'la-ball-circus la-dark',\r\n};\r\nPullRefresh.propTypes = {\r\n    className: prop_types_1.default.string,\r\n    style: prop_types_1.default.object,\r\n    scrollClassName: prop_types_1.default.string,\r\n    scrollStyle: prop_types_1.default.object,\r\n    pullHeight: prop_types_1.default.number,\r\n    renderIcon: prop_types_1.default.func,\r\n    renderLabel: prop_types_1.default.func,\r\n    renderCanLabel: prop_types_1.default.func,\r\n    isShowUpdateTime: prop_types_1.default.bool,\r\n    renderLoadingAnimation: prop_types_1.default.oneOfType([prop_types_1.default.string, prop_types_1.default.func]),\r\n    onPullStart: prop_types_1.default.func,\r\n    onPullCanRefresh: prop_types_1.default.func,\r\n    onPullRefresh: prop_types_1.default.func,\r\n    onPullBottom: prop_types_1.default.func,\r\n    onPullRebound: prop_types_1.default.func,\r\n};\r\nexports.default = PullRefresh;\r\n"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__spreadArrays","il","r","k","a","j","jl","__importDefault","mod","__esModule","default","defineProperty","exports","value","react_1","require","prop_types_1","classnames_1","moment_1","adhere_util_intl_1","adhere_ui_conditionalrender_1","adhere_util_resource_1","adhere_util_1","selectorPrefix","PullRefresh","_super","props","_this","state","isCan","isTop","el","scrollEl","iconEl","triggerInnerEl","maskEl","pullHeight","isDownPull","refreshHeight","elRef","createRef","iconElRef","refreshElRef","scrollElRef","triggerInnerElRef","onTouchStart","bind","onTouchMove","onTouchEnd","onScroll","renderMask","componentDidMount","current","getPullHeight","clientHeight","addEvents","document","createElement","className","body","appendChild","addEventListener","removeEvents","removeEventListener","e","trigger","startPageY","changedTouches","pageY","style","overflow","difference","distance","Math","abs","preventDefault","translateY","console","log","rotateIcon","setState","display","clear","self","refresh","reset","target","scrollTop","y","duration","transition","webkitTransition","transform","webkitTransform","deg","_a","overflowY","action","params","onTransitionEnd","renderLoadingAnimation","conditional","isString","noMatch","ref","split","renderIcon","renderLabel","renderCanLabel","renderUpdateTime","isShowUpdateTime","v","format","Dict","ResourceMomentFormatFull","render","scrollClassName","scrollStyle","children","Component","defaultProps","propTypes","string","object","number","func","bool","oneOfType","onPullStart","onPullCanRefresh","onPullRefresh","onPullBottom","onPullRebound"],"mappings":"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"}