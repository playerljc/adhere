var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,n){var e={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e},__spreadArray=this&&this.__spreadArray||function(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||((r=r||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))};import intl from"react-intl-universal";import ar_EG from"./locales/ar_EG";import en_US from"./locales/en_US";import pt_PT from"./locales/pt_PT";import zh_CN from"./locales/zh_CN";var isInit=!1,intlMap={},intlKey={},localKeys=new Map,mainLocales={};function initIntlMap(n){Object.getOwnPropertyNames(n).forEach(function(t){intlMap[n[t]]=intl.get(t),intlKey[n[t]]=t})}function getLocal(t,n){void 0===t&&(t="local");for(var e=__spreadArray([],Array.from(new Set(n)),!0),r={},i=0;i<e.length;i++){var o="".concat(t||"local").concat(i+1);localKeys.get(o)||(localKeys.set(o,o),0),r[o]=e[i]}return r}function getLocales(){return __assign({},mainLocales)}export default{init:function(t,n){var e=t.prefix,i=void 0===e?"local":e,e=t.currentLocale,e=void 0===e?"zh_CN":e,r=t.locales,r=void 0===r?{}:r,o=t.mainLanguage,a=void 0===o?"zh_CN":o,o=__rest(t,["prefix","currentLocale","locales","mainLanguage"]);if(!(n=void 0===n?!1:n)&&isInit)return new Promise(function(t,n){n()});var l,c,s,t={en_US:en_US,zh_CN:zh_CN,pt_PT:pt_PT,ar_EG:ar_EG},n=Object.keys(t),f=Object.keys(r||{});n.length>f.length?(l=t,c=r||{}):n.length<=f.length&&(l=r||{},c=t);for(s in l)!function(e){var t=__spreadArray(__spreadArray([],l[e],!0),c[e]||[],!0),n=[],r=[];t.forEach(function(t){("string"==typeof t?n:r).push(t)}),mainLocales[e]=getLocal(i,Array.from(new Set(n))),r.forEach(function(n){Object.keys(n).forEach(function(t){mainLocales[e][t]=n[t]})})}(s);return intl.init(__assign({currentLocale:e,locales:mainLocales},o)).then(function(){initIntlMap(mainLocales[a]),isInit=!0})},isInit:function(){return isInit},v:function(t,n){return isInit?n?intl.get(intlKey[t],n):intlMap[t]:""},vHtml:function(t,n){return isInit?n?intl.getHTML(intlKey[t],n):intlMap[t]:""},get:function(t,n){return intl.get(t,n)},getHTML:function(t,n){return intl.getHTML(t,n)},getInitOptions:function(){return intl.getInitOptions()},formatMessage:function(t,n){return intl.formatMessage(t,n)},formatHTMLMessage:function(t,n){return intl.formatHTMLMessage(t,n)},load:function(t){intl.load(t)},getLocal:function(t,n){return getLocal(t=void 0===t?"local":t,n)}};export{getLocal,getLocales};
//# sourceMappingURL=intl.js.map
