var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var l in t=arguments[e])Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=t[l]);return n}).apply(this,arguments)},__rest=this&&this.__rest||function(n,t){var e={};for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&t.indexOf(l)<0&&(e[l]=n[l]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,l=Object.getOwnPropertySymbols(n);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(n,l[o])&&(e[l[o]]=n[l[o]]);return e},__spreadArrays=this&&this.__spreadArrays||function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var o=Array(n),l=0,t=0;t<e;t++)for(var r=arguments[t],a=0,i=r.length;a<i;a++,l++)o[l]=r[a];return o};import intl from"react-intl-universal";import en_US from"./locales/en_US";import pt_PT from"./locales/pt_PT";import zh_CN from"./locales/zh_CN";var isInit=!1,intlMap={},intlKey={},localKeys=new Map,mainLocales={};function initIntlMap(t){Object.getOwnPropertyNames(t).forEach(function(n){intlMap[t[n]]=intl.get(n),intlKey[t[n]]=n})}function getLocal(n,t){void 0===n&&(n="local");for(var e=__spreadArrays(Array.from(new Set(t))),o={},l=0;l<e.length;l++){var r=""+(n||"local")+(l+1);localKeys.get(r)||(localKeys.set(r,r),0),o[r]=e[l]}return o}function getLocales(){return __assign({},mainLocales)}export default{init:function(n,t){void 0===t&&(t=!1);var e=n.prefix,l=void 0===e?"local":e,e=n.currentLocale,e=void 0===e?"zh_CN":e,o=n.locales,o=void 0===o?{}:o,r=n.mainLanguage,a=void 0===r?"zh_CN":r,r=__rest(n,["prefix","currentLocale","locales","mainLanguage"]);if(!t&&isInit)return new Promise(function(n,t){t()});var i,s,c,n={en_US:en_US,zh_CN:zh_CN,pt_PT:pt_PT},t=Object.keys(n),g=Object.keys(o||{});t.length>g.length?(i=n,s=o||{}):t.length<=g.length&&(i=o||{},s=n);for(c in i)!function(e){var n=__spreadArrays(i[e],s[e]||[]),t=(console.log("-----------------------------------------start"),console.log("p",e),console.log("masterLocales[p]",i[e]),console.log("slaveLocales[p]",s[e]),console.log("all",n),[]),o=[];n.forEach(function(n){("string"==typeof n?t:o).push(n)}),console.log("stringItems",t),console.log("objEntrys",o),mainLocales[e]=getLocal(l,Array.from(new Set(t))),console.log("mainLocales[p]",mainLocales[e]),console.log("mainLocales",mainLocales),o.forEach(function(t){console.log("entry",t);var n=Object.keys(t);console.log("keys",n),n.forEach(function(n){console.log("key"),mainLocales[e][n]=t[n]})}),console.log("masterLocales[p]",i[e]),console.log("-----------------------------------------end")}(c);return console.log("mainLocales",mainLocales),intl.init(__assign({currentLocale:e,locales:mainLocales},r)).then(function(){initIntlMap(mainLocales[a]),isInit=!0})},isInit:function(){return isInit},v:function(n,t){return isInit?t?intl.get(intlKey[n],t):intlMap[n]:""},vHtml:function(n,t){return isInit?t?intl.getHTML(intlKey[n],t):intlMap[n]:""},get:function(n,t){return intl.get(n,t)},getHTML:function(n,t){return intl.getHTML(n,t)},getInitOptions:function(){return intl.getInitOptions()},formatMessage:function(n,t){return intl.formatMessage(n,t)},formatHTMLMessage:function(n,t){return intl.formatHTMLMessage(n,t)},load:function(n){intl.load(n)},getLocal:function(n,t){return getLocal(n=void 0===n?"local":n,t)}};export{getLocal,getLocales};
//# sourceMappingURL=intl.js.map
