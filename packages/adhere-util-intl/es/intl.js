var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,n){var r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,i=Object.getOwnPropertySymbols(t);e<i.length;e++)n.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(t,i[e])&&(r[i[e]]=t[i[e]]);return r},__spreadArray=this&&this.__spreadArray||function(t,n,r){if(r||2===arguments.length)for(var e,i=0,a=n.length;i<a;i++)!e&&i in n||((e=e||Array.prototype.slice.call(n,0,i))[i]=n[i]);return t.concat(e||Array.prototype.slice.call(n))};import intl from"react-intl-universal";import ar_EG from"./locales/ar_EG";import en_US from"./locales/en_US";import pt_PT from"./locales/pt_PT";import zh_CN from"./locales/zh_CN";var isInit=!1,intlMap={},intlKey={},localKeys=new Map,mainLocales={};function initIntlMap(n){Object.getOwnPropertyNames(n).forEach(function(t){intlMap[n[t]]=intl.get(t),intlKey[n[t]]=t})}function getLocal(t,n){void 0===t&&(t="local");for(var r=__spreadArray([],n,!0),e={},i=0;i<r.length;i++){var a="".concat(t||"local").concat(i+1);localKeys.get(a)||(localKeys.set(a,a),0),e[a]=r[i]}return e}function getLocales(){return __assign({},mainLocales)}export default{init:function(t,n){var e,r,i,a=t.prefix,o=void 0===a?"local":a,a=t.currentLocale,a=void 0===a?"zh_CN":a,l=t.locales,c=void 0===l?{}:l,l=t.mainLanguage,s=void 0===l?"zh_CN":l,l=__rest(t,["prefix","currentLocale","locales","mainLanguage"]);return!(n=void 0===n?!1:n)&&isInit?new Promise(function(t,n){n()}):(e={en_US:__spreadArray([],en_US,!0),zh_CN:__spreadArray([],zh_CN,!0),pt_PT:__spreadArray([],pt_PT,!0),ar_EG:__spreadArray([],ar_EG,!0)},r=[],e[s].forEach(function(t,n){c[s].includes(t)&&r.push(n)}),(t=Object.keys(e)).forEach(function(t){e[t]=e[t].filter(function(t,n){return!r.includes(n)})}),i=t.reduce(function(t,n){var r;return t[n]=__spreadArray(__spreadArray([],null!=(r=e[n])?r:[],!0),null!=(r=c[n])?r:[],!0),t},{}),t.forEach(function(r){var t=i[r],n=[],e=[];t.forEach(function(t){("string"==typeof t?n:e).push(t)}),mainLocales[r]=getLocal(o,n),e.forEach(function(n){Object.keys(n).forEach(function(t){mainLocales[r][t]=n[t]})})}),intl.init(__assign({currentLocale:a,locales:mainLocales},l)).then(function(){initIntlMap(mainLocales[s]),isInit=!0}))},isInit:function(){return isInit},v:function(t,n){return isInit?n?intl.get(intlKey[t],n):intlMap[t]:""},vHtml:function(t,n){return isInit?n?intl.getHTML(intlKey[t],n):intlMap[t]:""},get:function(t,n){return intl.get(t,n)},getHTML:function(t,n){return intl.getHTML(t,n)},formatMessage:function(t,n){return intl.formatMessage(t,n)},formatHTMLMessage:function(t,n){return intl.formatHTMLMessage(t,n)},getInitOptions:function(){return intl.getInitOptions()},load:function(t){intl.load(t)},getLocal:function(t,n){return getLocal(t=void 0===t?"local":t,n)}};export{getLocal,getLocales};
//# sourceMappingURL=intl.js.map
