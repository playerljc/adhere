"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n},__spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),a=0,t=0;t<n;t++)for(var l=arguments[t],r=0,i=l.length;r<i;r++,a++)o[a]=l[r];return o},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},react_intl_universal_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLocales=exports.getLocal=void 0,__importDefault(require("react-intl-universal"))),en_US_1=__importDefault(require("./locales/en_US")),pt_PT_1=__importDefault(require("./locales/pt_PT")),zh_CN_1=__importDefault(require("./locales/zh_CN")),isInit=!1,intlMap={},intlKey={},localKeys=new Map,mainLocales={};function initIntlMap(t){Object.getOwnPropertyNames(t).forEach(function(e){intlMap[t[e]]=react_intl_universal_1.default.get(e),intlKey[t[e]]=e})}function getLocal(e,t){void 0===e&&(e="local");for(var n=__spreadArrays(Array.from(new Set(t))),o={},a=0;a<n.length;a++){var l=""+(e||"local")+(a+1);localKeys.get(l)||(localKeys.set(l,l),0),o[l]=n[a]}return o}function getLocales(){return __assign({},mainLocales)}exports.getLocal=getLocal,exports.getLocales=getLocales,exports.default={init:function(e,t){void 0===t&&(t=!1);var n=e.prefix,a=void 0===n?"local":n,n=e.currentLocale,n=void 0===n?"zh_CN":n,o=e.locales,o=void 0===o?{}:o,l=e.mainLanguage,r=void 0===l?"zh_CN":l,l=__rest(e,["prefix","currentLocale","locales","mainLanguage"]);if(!t&&isInit)return new Promise(function(e,t){t()});var i,s,c,e={en_US:en_US_1.default,zh_CN:zh_CN_1.default,pt_PT:pt_PT_1.default},t=Object.keys(e),u=Object.keys(o||{});t.length>u.length?(i=e,s=o||{}):t.length<=u.length&&(i=o||{},s=e);for(c in i)!function(n){var e=__spreadArrays(i[n],s[n]||[]),t=(console.log("-----------------------------------------start"),console.log("p",n),console.log("masterLocales[p]",i[n]),console.log("slaveLocales[p]",s[n]),console.log("all",e),[]),o=[];e.forEach(function(e){("string"==typeof e?t:o).push(e)}),console.log("stringItems",t),console.log("objEntrys",o),mainLocales[n]=getLocal(a,Array.from(new Set(t))),console.log("mainLocales[p]",mainLocales[n]),console.log("mainLocales",mainLocales),o.forEach(function(t){console.log("entry",t);var e=Object.keys(t);console.log("keys",e),e.forEach(function(e){console.log("key"),mainLocales[n][e]=t[e]})}),console.log("masterLocales[p]",i[n]),console.log("-----------------------------------------end")}(c);return console.log("mainLocales",mainLocales),react_intl_universal_1.default.init(__assign({currentLocale:n,locales:mainLocales},l)).then(function(){initIntlMap(mainLocales[r]),isInit=!0})},isInit:function(){return isInit},v:function(e,t){return isInit?t?react_intl_universal_1.default.get(intlKey[e],t):intlMap[e]:""},vHtml:function(e,t){return isInit?t?react_intl_universal_1.default.getHTML(intlKey[e],t):intlMap[e]:""},get:function(e,t){return react_intl_universal_1.default.get(e,t)},getHTML:function(e,t){return react_intl_universal_1.default.getHTML(e,t)},getInitOptions:function(){return react_intl_universal_1.default.getInitOptions()},formatMessage:function(e,t){return react_intl_universal_1.default.formatMessage(e,t)},formatHTMLMessage:function(e,t){return react_intl_universal_1.default.formatHTMLMessage(e,t)},load:function(e){react_intl_universal_1.default.load(e)},getLocal:function(e,t){return getLocal(e=void 0===e?"local":e,t)}};
//# sourceMappingURL=intl.js.map
