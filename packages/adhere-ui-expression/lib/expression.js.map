{"version":3,"file":"Expression.js","sources":["Expression.js"],"sourcesContent":["\"use strict\";\n\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectorPrefix = void 0;\nvar ahooks_1 = require(\"ahooks\");\nvar antd_1 = require(\"antd\");\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar react_1 = __importStar(require(\"react\"));\nvar icons_1 = require(\"@ant-design/icons\");\nvar adhere_ui_hooks_1 = __importDefault(require(\"@baifendian/adhere-ui-hooks\"));\nvar adhere_util_1 = __importDefault(require(\"@baifendian/adhere-util\"));\nvar adhere_util_intl_1 = __importDefault(require(\"@baifendian/adhere-util-intl\"));\nvar View_1 = __importDefault(require(\"./View\"));\nvar operators_1 = require(\"./operators\");\nvar getCurrentParentElementWithCursor = adhere_util_1.default.getCurrentParentElementWithCursor,\n  getCurrentElementWithCursor = adhere_util_1.default.getCurrentElementWithCursor,\n  setCursorToEnd = adhere_util_1.default.setCursorToEnd,\n  setCursorPositionToNode = adhere_util_1.default.setCursorPositionToNode,\n  setCursorPosition = adhere_util_1.default.setCursorPosition,\n  getCursorIndex = adhere_util_1.default.getCursorIndex,\n  getCursorRectByDocument = adhere_util_1.default.getCursorRectByDocument,\n  isString = adhere_util_1.default.isString,\n  isFunction = adhere_util_1.default.isFunction;\n// 缺省的触发字符code\nvar defaultTriggerCharCode = 32;\n// html的空格\nvar htmlSpace = '&nbsp;';\n// 弹层的宽度\nvar modalWidth = 300;\nvar useSetState = adhere_ui_hooks_1.default.useSetState;\nexports.selectorPrefix = 'adhere-ui-expression';\n/**\n * Expression\n * @param className\n * @param style\n * @param editorClassName\n * @param editorStyle\n * @param operatorWrapClassName\n * @param operatorWrapStyle\n * @param quickTipWrapClassName\n * @param quickTipWrapStyle\n * @param textClassName\n * @param operatorClassName\n * @param value\n * @param placeholder\n * @param triggerCharCode\n * @param quickTipProp\n * @param quickTipDataSource\n * @param disableQuickTip\n * @param operators\n * @param allowClear\n * @param onChange\n * @param onContinuousTextChange\n * @param onEditorInputEnd\n * @param onEditorBlurEnd\n * @param onEditorKeyDownEnd\n * @param onEditorPasteEnd\n * @param ref\n * @constructor\n */\nvar InternalExpression = (0, react_1.memo)((0, react_1.forwardRef)(function (_a, ref) {\n  var _b, _c, _d, _e;\n  var className = _a.className,\n    style = _a.style,\n    editorClassName = _a.editorClassName,\n    editorStyle = _a.editorStyle,\n    operatorWrapClassName = _a.operatorWrapClassName,\n    operatorWrapStyle = _a.operatorWrapStyle,\n    quickTipWrapClassName = _a.quickTipWrapClassName,\n    quickTipWrapStyle = _a.quickTipWrapStyle,\n    textClassName = _a.textClassName,\n    operatorClassName = _a.operatorClassName,\n    value = _a.value,\n    placeholder = _a.placeholder,\n    triggerCharCode = _a.triggerCharCode,\n    quickTipProp = _a.quickTipProp,\n    quickTipDataSource = _a.quickTipDataSource,\n    disableQuickTip = _a.disableQuickTip,\n    operators = _a.operators,\n    allowClear = _a.allowClear,\n    onChange = _a.onChange,\n    onContinuousTextChange = _a.onContinuousTextChange,\n    onEditorInputEnd = _a.onEditorInputEnd,\n    onEditorBlurEnd = _a.onEditorBlurEnd,\n    onEditorKeyDownEnd = _a.onEditorKeyDownEnd,\n    onEditorPasteEnd = _a.onEditorPasteEnd;\n  var operatorsConfig = (0, react_1.useMemo)(function () {\n    return operators !== null && operators !== void 0 ? operators : operators_1.ElasticSearch;\n  }, [operators]);\n  // contextRef\n  var contextRef = (0, react_1.useRef)(null);\n  // input对象\n  var editorRef = (0, react_1.useRef)(null);\n  // 运算符下拉\n  var operatorsRef = (0, react_1.useRef)(null);\n  // quickTipRef\n  var quickTipRef = (0, react_1.useRef)(null);\n  // placeholder\n  var placeholderRef = (0, react_1.useRef)(null);\n  // 光标输入处的父元素\n  var cursorContextParentElement = (0, react_1.useRef)(null);\n  // 光标输入处的元素\n  var cursorContextElement = (0, react_1.useRef)(null);\n  // 光标的索引\n  var cursorIndex = (0, react_1.useRef)(-1);\n  // 之前光标的索引\n  var preCursorIndex = (0, react_1.useRef)(0);\n  // 之前光标处的元素\n  var preCursorContextElement = (0, react_1.useRef)(null);\n  // 连续输入的字符\n  var continuousText = (0, react_1.useRef)('');\n  // 若干可见字符的输入之前，而这些可见字符的输入可能需要一连串的键盘操作、点击输入法的备选词等\n  var comStart = (0, react_1.useRef)(false);\n  var _f = useSetState(false),\n    operatorsShow = _f[0],\n    setOperatorsShow = _f[1];\n  var _g = useSetState(false),\n    quickTipShow = _g[0],\n    setQuickTipShow = _g[1];\n  var _h = useSetState(true),\n    placeholderShow = _h[0],\n    setPlaceholderShow = _h[1];\n  // allowClear是否显示\n  var _j = useSetState(false),\n    showAllowClear = _j[0],\n    setShowAllClear = _j[1];\n  var triggerChar = (0, react_1.useMemo)(function () {\n    return String.fromCharCode(triggerCharCode !== null && triggerCharCode !== void 0 ? triggerCharCode : defaultTriggerCharCode);\n  }, [triggerCharCode]);\n  (0, ahooks_1.useMount)(function () {\n    var editor = getEditorEl();\n    if (editor) {\n      editor.innerHTML = value !== null && value !== void 0 ? value : '';\n    }\n    setCursorToEnd(editor);\n    onReady();\n  });\n  (0, ahooks_1.useUpdateLayoutEffect)(function () {\n    onReady();\n  }, [value]);\n  (0, react_1.useImperativeHandle)(ref, function () {\n    return {\n      setValue: function (_value) {\n        var editor = getEditorEl();\n        if (editor) {\n          editor.innerHTML = _value !== null && _value !== void 0 ? _value : '';\n        }\n        setCursorToEnd(editor);\n        onReady();\n      },\n      getValue: function () {\n        var _a;\n        return (_a = getEditorEl()) === null || _a === void 0 ? void 0 : _a.innerHTML;\n      },\n      isEditorEmpty: isEditorEmpty,\n      showOperators: showOperators,\n      hideOperators: hideOperators,\n      showQuickTip: showQuickTip,\n      hideQuickTip: hideQuickTip,\n      clear: clear\n    };\n  });\n  /**\n   * onReady\n   * @description 组件mount\n   */\n  function onReady() {\n    initial();\n  }\n  /**\n   * initial\n   * @description 初始化\n   */\n  function initial() {\n    if (isEditorEmpty()) {\n      showPlaceholder();\n    } else {\n      hidePlaceholder();\n    }\n  }\n  /**\n   * getEditorEl\n   * @return {HTMLElement}\n   */\n  function getEditorEl() {\n    var _a;\n    if (isFont()) {\n      return (_a = editorRef === null || editorRef === void 0 ? void 0 : editorRef.current) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    } else {\n      return editorRef === null || editorRef === void 0 ? void 0 : editorRef.current;\n    }\n  }\n  /**\n   * isEditorEmpty\n   * @description 编辑器是否为空\n   * @return {boolean}\n   */\n  function isEditorEmpty() {\n    var _a, _b, _c;\n    return ((_c = (_b = (_a = getEditorEl()) === null || _a === void 0 ? void 0 : _a.innerHTML) === null || _b === void 0 ? void 0 : _b.trim) === null || _c === void 0 ? void 0 : _c.call(_b)) === '';\n  }\n  /**\n   * clear\n   * @description 清空内容\n   */\n  function clear() {\n    var contextEditor = getEditorEl();\n    if (contextEditor) {\n      contextEditor.innerHTML = '';\n      hideOperators();\n      hideQuickTip();\n      showPlaceholder();\n      setShowAllClear(false);\n    }\n  }\n  /**\n   * containsEntityCharacters\n   * @description 判断是否是实体字符\n   * @param str\n   */\n  function containsEntityCharacters(str) {\n    var entityRegex = /^&#\\d+;/gim;\n    return entityRegex.test(str);\n  }\n  /**\n   * showModal\n   * @description 显示Modal\n   * @param {HTMLElement} currentEl\n   * @param {Function} callback\n   */\n  function showModal(currentEl, callback) {\n    var _a, _b, _c, _d;\n    var point = getCursorRectByDocument();\n    if (point && currentEl) {\n      var contextWidth = (_a = contextRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n      var contextHeight = (_b = contextRef === null || contextRef === void 0 ? void 0 : contextRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight;\n      var contextRect = (_d = (_c = contextRef.current) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect) === null || _d === void 0 ? void 0 : _d.call(_c);\n      if (!!contextWidth && !!contextHeight && contextRef && currentEl && contextRect) {\n        if ((point === null || point === void 0 ? void 0 : point.x) === 0 && (point === null || point === void 0 ? void 0 : point.y) === 0) {\n          currentEl.style.left = \"\".concat(contextRect.x + 20, \"px\");\n          currentEl.style.top = \"\".concat(contextRect.y + contextHeight - 2, \"px\");\n        } else if ((contextRect === null || contextRect === void 0 ? void 0 : contextRect.x) + contextWidth - (point === null || point === void 0 ? void 0 : point.x) < modalWidth) {\n          currentEl.style.left = \"\".concat(contextRect.x + contextWidth - modalWidth - 10, \"px\");\n          currentEl.style.top = \"\".concat(point.y + 25, \"px\");\n        } else {\n          currentEl.style.left = \"\".concat(point.x + 10, \"px\");\n          currentEl.style.top = \"\".concat(point.y + 25, \"px\");\n        }\n      }\n    }\n    callback === null || callback === void 0 ? void 0 : callback();\n  }\n  /**\n   * showOperators\n   * @description 显示运算符选择下拉\n   */\n  function showOperators() {\n    showModal(operatorsRef.current, function () {\n      return setOperatorsShow(true, function () {});\n    });\n  }\n  /**\n   * hideOperators\n   * @description 关闭运算符选择下拉\n   */\n  function hideOperators() {\n    setOperatorsShow(false);\n  }\n  /**\n   * showQuickTip\n   */\n  function showQuickTip() {\n    showModal(quickTipRef.current, function () {\n      return setQuickTipShow(true);\n    });\n  }\n  /**\n   * hideOperators\n   * @description 关闭运算符选择下拉\n   */\n  function hideQuickTip() {\n    setQuickTipShow(false);\n  }\n  /**\n   * showPlaceholder\n   * @description 显示placeholder\n   */\n  function showPlaceholder() {\n    setPlaceholderShow(true);\n  }\n  /**\n   * hidePlaceholder\n   * @description 隐藏placeholder\n   */\n  function hidePlaceholder() {\n    setPlaceholderShow(false);\n  }\n  /**\n   * createTextElement\n   * @description 创建文本元素\n   * @param {string} html 文本的内容\n   * @return {HTMLSpanElement}\n   */\n  function createTextElement(html) {\n    var targetTextClassName = '';\n    if (isString(textClassName)) {\n      targetTextClassName = textClassName;\n    } else if (isFunction(textClassName)) {\n      targetTextClassName = textClassName(html);\n    }\n    var textElement = document.createElement('span');\n    textElement.className = (0, classnames_1.default)('text', targetTextClassName !== null && targetTextClassName !== void 0 ? targetTextClassName : '');\n    textElement.innerHTML = html;\n    return textElement;\n  }\n  /**\n   * createOperatorElement\n   * @description 创建运算符元素\n   * @param {string} text 元素的文本\n   * @return {HTMLSpanElement}\n   */\n  function createOperatorElement(text) {\n    var targetOperatorClassName = '';\n    if (isString(operatorClassName)) {\n      targetOperatorClassName = operatorClassName;\n    } else if (isFunction(operatorClassName)) {\n      targetOperatorClassName = operatorClassName(text);\n    }\n    var operatorElement = document.createElement('span');\n    operatorElement.className = (0, classnames_1.default)('operator', targetOperatorClassName !== null && targetOperatorClassName !== void 0 ? targetOperatorClassName : '');\n    operatorElement.setAttribute('contenteditable', 'false');\n    operatorElement.innerHTML = text;\n    return operatorElement;\n  }\n  /**\n   * isFont\n   * @description 是否是font元素\n   * @return {boolean}\n   */\n  function isFont() {\n    var _a, _b, _c, _d;\n    return ((_d = (_c = (_b = (_a = editorRef === null || editorRef === void 0 ? void 0 : editorRef.current) === null || _a === void 0 ? void 0 : _a.firstElementChild) === null || _b === void 0 ? void 0 : _b.tagName) === null || _c === void 0 ? void 0 : _c.toLowerCase) === null || _d === void 0 ? void 0 : _d.call(_c)) === 'font';\n  }\n  /**\n   * setContinuousText\n   * @description 设置连续输入的字符\n   * @param {string} text 当前输入的文本\n   */\n  function setContinuousText(text) {\n    if (!preCursorContextElement.current || preCursorContextElement.current === cursorContextElement.current && preCursorIndex.current + 1 === cursorIndex.current) {\n      preCursorIndex.current = cursorIndex.current;\n      preCursorContextElement.current = cursorContextElement.current;\n      continuousText.current += text;\n    } else {\n      preCursorIndex.current = cursorIndex.current;\n      preCursorContextElement.current = cursorContextElement.current;\n      continuousText.current = text;\n    }\n  }\n  /**\n   * onEditorCompositionStart\n   * @description 编辑框输入中文开始\n   */\n  function onEditorCompositionStart() {\n    comStart.current = true;\n    // console.log('中文输入：开始');\n  }\n  /**\n   * onEditorCompositionEnd\n   * @description 编辑框输入中文结束\n   * @param e\n   */\n  function onEditorCompositionEnd(e) {\n    comStart.current = false;\n    // console.log('中文输入：结束');\n    onEditorInput(e);\n  }\n  /**\n   * onEditorInput\n   * @description 编辑框input\n   */\n  function onEditorInput(e) {\n    var _a, _b;\n    if (comStart.current) return; // 中文输入过程中不截断\n    if (cursorContextElement) {\n      cursorContextElement.current = getCurrentElementWithCursor();\n    }\n    if (cursorContextParentElement) {\n      cursorContextParentElement.current = getCurrentParentElementWithCursor();\n    }\n    cursorIndex.current = getCursorIndex();\n    if (isEditorEmpty()) {\n      showPlaceholder();\n    } else {\n      hidePlaceholder();\n    }\n    var text = e.nativeEvent.data;\n    if (text !== null) {\n      setContinuousText(text);\n      if (!disableQuickTip) {\n        onContinuousTextChange === null || onContinuousTextChange === void 0 ? void 0 : onContinuousTextChange(continuousText.current);\n      }\n    } else {\n      if (!disableQuickTip) {\n        onContinuousTextChange === null || onContinuousTextChange === void 0 ? void 0 : onContinuousTextChange((_a = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _a === void 0 ? void 0 : _a.textContent);\n      }\n      // console.log('cursorContextElement', cursorContextElement.current?.textContent);\n    }\n    if (!disableQuickTip) {\n      if (text !== triggerChar) {\n        showQuickTip();\n      }\n    }\n    // input输入结束\n    if (text !== triggerChar) {\n      onEditorInputEnd === null || onEditorInputEnd === void 0 ? void 0 : onEditorInputEnd(text, continuousText.current);\n    }\n    // onChange\n    onChange === null || onChange === void 0 ? void 0 : onChange((_b = editorRef === null || editorRef === void 0 ? void 0 : editorRef.current) === null || _b === void 0 ? void 0 : _b.innerHTML);\n    setShowAllClear(!isEditorEmpty());\n  }\n  /**\n   * onEditorPaste\n   * @description 编辑框粘贴\n   * @param e\n   */\n  function onEditorPaste(e) {\n    // 禁止粘贴内容\n    e.preventDefault();\n    onEditorPasteEnd === null || onEditorPasteEnd === void 0 ? void 0 : onEditorPasteEnd(e);\n  }\n  /**\n   * onEditorKeyDown\n   * @description 编辑框keyDown\n   * @param e\n   * @return {boolean}\n   */\n  function onEditorKeyDown(e) {\n    // 默认空格\n    if (e.keyCode === (triggerCharCode !== null && triggerCharCode !== void 0 ? triggerCharCode : defaultTriggerCharCode)) {\n      hideQuickTip();\n      showOperators();\n      onEditorKeyDownEnd === null || onEditorKeyDownEnd === void 0 ? void 0 : onEditorKeyDownEnd(e);\n      return false;\n    }\n    // 屏蔽回车操作\n    if (e.keyCode === 13) {\n      hideOperators();\n      e.stopPropagation();\n      e.preventDefault();\n      onEditorKeyDownEnd === null || onEditorKeyDownEnd === void 0 ? void 0 : onEditorKeyDownEnd(e);\n      return false;\n    }\n    hideOperators();\n    onEditorKeyDownEnd === null || onEditorKeyDownEnd === void 0 ? void 0 : onEditorKeyDownEnd(e);\n  }\n  /**\n   * onEditorBlur\n   * @description 编辑框失去焦点\n   */\n  function onEditorBlur(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    if (isEditorEmpty()) {\n      showPlaceholder();\n    } else {\n      hidePlaceholder();\n    }\n    onEditorBlurEnd === null || onEditorBlurEnd === void 0 ? void 0 : onEditorBlurEnd(e);\n  }\n  /**\n   * onOperatorsClick\n   * @description 选择运算符\n   * @param {string} operator\n   * @param {OperatorType} operatorType\n   */\n  function onOperatorsClick(operator, operatorType) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;\n    if (operator) {\n      var editor = getEditorEl();\n      // 括号\n      if (operatorType === 'brackets') {\n        var left = operator[0];\n        var right = operator[1];\n        if (containsEntityCharacters(operator)) {\n          var arr = operator.split(';').filter(function (t) {\n            return t;\n          });\n          left = arr[0];\n          right = arr[1];\n        }\n        var leftElement = createOperatorElement(left);\n        var rightElement = createOperatorElement(right);\n        var textElement = createTextElement(\"\".concat(htmlSpace).concat(htmlSpace));\n        // 如果是在editor的文本中进行的编辑\n        if (cursorContextParentElement.current === editor) {\n          var text = (_a = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _a === void 0 ? void 0 : _a.textContent;\n          var startElement = createTextElement((_b = text === null || text === void 0 ? void 0 : text.substring) === null || _b === void 0 ? void 0 : _b.call(text, 0, cursorIndex.current + 1));\n          var endElement = createTextElement((_c = text === null || text === void 0 ? void 0 : text.substring) === null || _c === void 0 ? void 0 : _c.call(text, cursorIndex.current + 1));\n          var df = document.createDocumentFragment();\n          df.appendChild(startElement);\n          df.appendChild(leftElement);\n          df.appendChild(textElement);\n          df.appendChild(rightElement);\n          if (endElement && endElement.textContent) {\n            endElement.textContent.length !== 0 && df.appendChild(endElement);\n          }\n          (_d = editor === null || editor === void 0 ? void 0 : editor.replaceChild) === null || _d === void 0 ? void 0 : _d.call(editor, df, cursorContextElement.current);\n          setCursorPosition(textElement, 1);\n        }\n        // 如果是在text文本中进行的编辑\n        else {\n          var text = (_e = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _e === void 0 ? void 0 : _e.textContent;\n          var startElement = createTextElement((_f = text === null || text === void 0 ? void 0 : text.substring) === null || _f === void 0 ? void 0 : _f.call(text, 0, cursorIndex.current));\n          var endElement = createTextElement((_g = text === null || text === void 0 ? void 0 : text.substring) === null || _g === void 0 ? void 0 : _g.call(text, cursorIndex.current));\n          var df = document.createDocumentFragment();\n          df.appendChild(startElement);\n          df.appendChild(startElement);\n          df.appendChild(leftElement);\n          df.appendChild(textElement);\n          df.appendChild(rightElement);\n          if (endElement && endElement.textContent) {\n            endElement.textContent.length !== 0 && df.appendChild(endElement);\n          }\n          (_k = (_j = (_h = cursorContextParentElement === null || cursorContextParentElement === void 0 ? void 0 : cursorContextParentElement.current) === null || _h === void 0 ? void 0 : _h.parentElement) === null || _j === void 0 ? void 0 : _j.replaceChild) === null || _k === void 0 ? void 0 : _k.call(_j, df, cursorContextParentElement.current);\n          setCursorPosition(textElement, 1);\n        }\n      }\n      // 其他符号\n      else {\n        var operatorElement = createOperatorElement(operator);\n        var textElement = createTextElement(htmlSpace);\n        // 如果是在editor的文本中进行的编辑\n        if (cursorContextParentElement.current === editor) {\n          // 光标所在的元素现在是text元素\n          // let parentElement = getInsertParentElement();\n          // parentElement.appendChild(operatorElement);\n          // parentElement.appendChild(textElement);\n          // setCursorToEnd(parentElement);\n          var text = (_l = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _l === void 0 ? void 0 : _l.textContent;\n          var startElement = createTextElement((_m = text === null || text === void 0 ? void 0 : text.substring) === null || _m === void 0 ? void 0 : _m.call(text, 0, cursorIndex.current + 1));\n          var endElement = createTextElement((_o = text === null || text === void 0 ? void 0 : text.substring) === null || _o === void 0 ? void 0 : _o.call(text, cursorIndex.current + 1));\n          var df = document.createDocumentFragment();\n          df.appendChild(startElement);\n          df.appendChild(operatorElement);\n          df.appendChild(textElement);\n          if (endElement && endElement.textContent) {\n            endElement.textContent.length !== 0 && df.appendChild(endElement);\n          }\n          editor === null || editor === void 0 ? void 0 : editor.replaceChild(df, cursorContextElement.current);\n          setCursorPosition(textElement, 0);\n        }\n        // 如果是在text文本中进行的编辑\n        // @ts-ignore\n        else if ((_r = (_q = (_p = cursorContextParentElement === null || cursorContextParentElement === void 0 ? void 0 : cursorContextParentElement.current) === null || _p === void 0 ? void 0 : _p.classList) === null || _q === void 0 ? void 0 : _q.contains) === null || _r === void 0 ? void 0 : _r.call(_q, 'text')) {\n          var text = (_s = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _s === void 0 ? void 0 : _s.textContent;\n          var startElement = createTextElement((_t = text === null || text === void 0 ? void 0 : text.substring) === null || _t === void 0 ? void 0 : _t.call(text, 0, cursorIndex.current));\n          var endElement = createTextElement((_u = text === null || text === void 0 ? void 0 : text.substring) === null || _u === void 0 ? void 0 : _u.call(text, cursorIndex.current));\n          var df = document.createDocumentFragment();\n          df.appendChild(startElement);\n          df.appendChild(operatorElement);\n          df.appendChild(textElement);\n          if (endElement && endElement.textContent) {\n            endElement.textContent.length !== 0 && df.appendChild(endElement);\n          }\n          (_x = (_w = (_v = cursorContextParentElement === null || cursorContextParentElement === void 0 ? void 0 : cursorContextParentElement.current) === null || _v === void 0 ? void 0 : _v.parentElement) === null || _w === void 0 ? void 0 : _w.replaceChild) === null || _x === void 0 ? void 0 : _x.call(_w, df, cursorContextParentElement.current);\n          setCursorPosition(textElement, 0);\n        }\n      }\n      onChange === null || onChange === void 0 ? void 0 : onChange((_y = editorRef === null || editorRef === void 0 ? void 0 : editorRef.current) === null || _y === void 0 ? void 0 : _y.innerHTML);\n    }\n    hideOperators();\n  }\n  /**\n   * onQuickTipClick\n   * @description 选额智能提示\n   * @param e\n   * @param item\n   */\n  function onQuickTipClick(e, item) {\n    var _a, _b, _c, _d;\n    var tip = item[quickTipProp !== null && quickTipProp !== void 0 ? quickTipProp : 'value'];\n    var editor = getEditorEl();\n    // java\n    if (tip) {\n      // 111\n      var text = ((_a = cursorContextElement.current) === null || _a === void 0 ? void 0 : _a.textContent) || '';\n      var startIndex = text.lastIndexOf(continuousText.current, preCursorIndex.current);\n      // 111(java) -> 111java\n      // (java)111 -> java111\n      // 1(java)11 -> 1java11\n      var endIndex = startIndex + continuousText.current.length;\n      var df_1 = document.createDocumentFragment();\n      var startTextNode = document.createTextNode(text.substring(0, startIndex));\n      var endTextNode = document.createTextNode(text.substring(endIndex));\n      var collapseEl = document.createElement('div');\n      collapseEl.innerHTML = tip;\n      df_1.appendChild(startTextNode);\n      Array.from(collapseEl.childNodes).forEach(function (el) {\n        df_1.appendChild(el);\n      });\n      df_1.appendChild(endTextNode);\n      if (contextRef.current === cursorContextParentElement.current) {\n        editor.innerHTML = '';\n        editor.appendChild(df_1);\n      } else if (editor === cursorContextParentElement.current) {\n        if ((_b = cursorContextElement === null || cursorContextElement === void 0 ? void 0 : cursorContextElement.current) === null || _b === void 0 ? void 0 : _b.parentElement) {\n          cursorContextElement.current.parentElement.replaceChild(df_1, cursorContextElement.current);\n        }\n      } else {\n        if ((_c = cursorContextParentElement === null || cursorContextParentElement === void 0 ? void 0 : cursorContextParentElement.current) === null || _c === void 0 ? void 0 : _c.parentElement) {\n          cursorContextParentElement.current.parentElement.replaceChild(df_1, cursorContextParentElement.current);\n        }\n      }\n      setCursorPositionToNode(endTextNode, 0);\n      onChange === null || onChange === void 0 ? void 0 : onChange((_d = editorRef === null || editorRef === void 0 ? void 0 : editorRef.current) === null || _d === void 0 ? void 0 : _d.innerHTML);\n    }\n    hideQuickTip();\n    hidePlaceholder();\n  }\n  // 获取插入的父元素\n  // function getInsertParentElement() {\n  //   return cursorContextParentElement.current === editor.current\n  //     ? cursorContextParentElement.current\n  //     : cursorContextParentElement.current.parentElement;\n  // }\n  return react_1.default.createElement(\"div\", {\n    ref: contextRef,\n    className: (0, classnames_1.default)(exports.selectorPrefix, className !== null && className !== void 0 ? className : ''),\n    style: style !== null && style !== void 0 ? style : {}\n  }, react_1.default.createElement(\"div\", {\n    ref: editorRef,\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-editor\"), editorClassName !== null && editorClassName !== void 0 ? editorClassName : '', (_b = {}, _b[\"\".concat(exports.selectorPrefix, \"-editor--show-clear\")] = !!allowClear, _b)),\n    style: editorStyle !== null && editorStyle !== void 0 ? editorStyle : {},\n    contentEditable: \"true\",\n    onInput: onEditorInput,\n    onKeyDown: onEditorKeyDown,\n    onBlur: onEditorBlur,\n    onCompositionStart: onEditorCompositionStart,\n    onCompositionEnd: onEditorCompositionEnd,\n    onPaste: onEditorPaste\n  }), !!allowClear && showAllowClear && react_1.default.createElement(\"div\", {\n    className: \"\".concat(exports.selectorPrefix, \"-editor-clear\")\n  }, react_1.default.createElement(icons_1.CloseCircleOutlined, {\n    onClick: function () {\n      var _a;\n      clear();\n      // @ts-ignore\n      (_a = getEditorEl()) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  })), react_1.default.createElement(\"div\", {\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-editor-placeholder\"), (_c = {}, _c[\"\".concat(exports.selectorPrefix, \"-editor-placeholder--show\")] = placeholderShow, _c)),\n    ref: placeholderRef\n  }, placeholder !== null && placeholder !== void 0 ? placeholder : adhere_util_intl_1.default.v('请输入关键词')), react_1.default.createElement(\"div\", {\n    ref: operatorsRef,\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-operators\"), operatorWrapClassName !== null && operatorWrapClassName !== void 0 ? operatorWrapClassName : '', (_d = {}, _d[\"\".concat(exports.selectorPrefix, \"-operators--show\")] = operatorsShow, _d)),\n    style: operatorWrapStyle !== null && operatorWrapStyle !== void 0 ? operatorWrapStyle : {}\n  }, react_1.default.createElement(\"div\", {\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-operators-header\"))\n  }, react_1.default.createElement(\"i\", {\n    onClick: function () {\n      return hideOperators();\n    }\n  }, react_1.default.createElement(icons_1.CloseCircleOutlined, null))), react_1.default.createElement(\"ul\", {\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-operators-main\"))\n  }, operatorsConfig.map(function (_a) {\n    var label = _a.label,\n      value = _a.value,\n      type = _a.type;\n    return react_1.default.createElement(\"li\", {\n      key: value,\n      onClick: function () {\n        onOperatorsClick(value, type);\n      },\n      dangerouslySetInnerHTML: {\n        __html: label\n      }\n    });\n  }))), react_1.default.createElement(\"div\", {\n    ref: quickTipRef,\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-quick-tips\"), quickTipWrapClassName !== null && quickTipWrapClassName !== void 0 ? quickTipWrapClassName : '', (_e = {}, _e[\"\".concat(exports.selectorPrefix, \"-quick-tips--show\")] = quickTipShow, _e)),\n    style: quickTipWrapStyle !== null && quickTipWrapStyle !== void 0 ? quickTipWrapStyle : {}\n  }, react_1.default.createElement(\"div\", {\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-quick-tips-header\"))\n  }, react_1.default.createElement(\"i\", {\n    onClick: function () {\n      return hideQuickTip();\n    }\n  }, react_1.default.createElement(icons_1.CloseCircleOutlined, null))), !(quickTipDataSource || []).length && react_1.default.createElement(\"div\", null, react_1.default.createElement(antd_1.Empty, null)), react_1.default.createElement(\"ul\", {\n    className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-quick-tips-main\"))\n  }, !!(quickTipDataSource || []).length && (quickTipDataSource || []).map(function (t, _index) {\n    return react_1.default.createElement(\"li\", {\n      key: t.value,\n      onClick: function (e) {\n        return onQuickTipClick(e, t);\n      }\n    }, t.label);\n  }))));\n}));\nvar Expression = InternalExpression;\nExpression.View = View_1.default;\nExpression.ElasticSearchOptions = operators_1.ElasticSearch;\nExpression.SqlOptions = operators_1.Sql;\nExpression.MathOptions = operators_1.Math;\n/**\n * parse\n * @description 解析\n * @param {string} queryHtml\n * @param {(value: { nodeType: number; value: string | null }) => string} callback\n * @return {string}\n */\nExpression.parse = function (queryHtml, callback) {\n  var _a, _b;\n  if (!queryHtml) return '';\n  var context = document.createElement('div');\n  context.innerHTML = queryHtml;\n  if (((_b = (_a = context === null || context === void 0 ? void 0 : context.firstElementChild) === null || _a === void 0 ? void 0 : _a.tagName) === null || _b === void 0 ? void 0 : _b.toLowerCase()) === 'font') {\n    context.innerHTML = context.firstElementChild.innerHTML;\n  }\n  var result = '';\n  result = Array.from(context.childNodes).map(function (node) {\n    var _a, _b, _c;\n    // 元素节点\n    if (node.nodeType === 1) {\n      // 文本节点\n      if (node.classList.contains('text')) {\n        return (_a = callback === null || callback === void 0 ? void 0 : callback({\n          nodeType: 3,\n          value: node.textContent\n        })) !== null && _a !== void 0 ? _a : '';\n      }\n      // 运算符\n      else if (node.classList.contains('operator')) {\n        return (_b = callback === null || callback === void 0 ? void 0 : callback({\n          nodeType: 1,\n          value: node.textContent\n        })) !== null && _b !== void 0 ? _b : '';\n      }\n    }\n    // 文本节点\n    else if (node.nodeType === 3) {\n      return (_c = callback === null || callback === void 0 ? void 0 : callback({\n        nodeType: 3,\n        value: node.textContent\n      })) !== null && _c !== void 0 ? _c : '';\n    }\n    return '';\n  }).join('');\n  return result;\n};\n/**\n * validator\n * @return {{validator(*, *): (Promise<void>)}}\n */\nExpression.validator = function () {\n  return {\n    validator: function (_, value) {\n      var context = document.createElement('div');\n      context.innerHTML = value;\n      if (context.innerText) {\n        return Promise.resolve();\n      }\n      return Promise.reject(new Error(adhere_util_intl_1.default.v('请输入关键字')));\n    }\n  };\n};\nExpression.displayName = 'Expression';\nexports.default = Expression;"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","default","ahooks_1","exports","selectorPrefix","require","antd_1","classnames_1","react_1","icons_1","adhere_ui_hooks_1","adhere_util_1","adhere_util_intl_1","View_1","operators_1","getCurrentParentElementWithCursor","getCurrentElementWithCursor","setCursorToEnd","setCursorPositionToNode","setCursorPosition","getCursorIndex","getCursorRectByDocument","isString","isFunction","defaultTriggerCharCode","htmlSpace","modalWidth","useSetState","InternalExpression","memo","forwardRef","_a","ref","className","style","editorClassName","editorStyle","operatorWrapClassName","operatorWrapStyle","quickTipWrapClassName","quickTipWrapStyle","textClassName","operatorClassName","placeholder","triggerCharCode","quickTipProp","quickTipDataSource","disableQuickTip","operators","allowClear","onChange","onContinuousTextChange","onEditorInputEnd","onEditorBlurEnd","onEditorKeyDownEnd","onEditorPasteEnd","operatorsConfig","useMemo","ElasticSearch","contextRef","useRef","editorRef","operatorsRef","quickTipRef","placeholderRef","cursorContextParentElement","cursorContextElement","cursorIndex","preCursorIndex","preCursorContextElement","continuousText","comStart","_f","operatorsShow","setOperatorsShow","_g","quickTipShow","setQuickTipShow","_h","placeholderShow","setPlaceholderShow","_j","showAllowClear","setShowAllClear","triggerChar","String","fromCharCode","onReady","isEditorEmpty","showPlaceholder","hidePlaceholder","getEditorEl","_c","_d","_b","current","firstElementChild","tagName","toLowerCase","innerHTML","trim","clear","contextEditor","hideOperators","hideQuickTip","showModal","currentEl","callback","contextWidth","contextHeight","contextRect","point","offsetWidth","offsetHeight","getBoundingClientRect","x","y","left","concat","top","showOperators","showQuickTip","createTextElement","html","targetTextClassName","textElement","document","createElement","createOperatorElement","text","targetOperatorClassName","operatorElement","setAttribute","onEditorInput","e","nativeEvent","data","textContent","useMount","editor","useUpdateLayoutEffect","useImperativeHandle","setValue","_value","getValue","contentEditable","onInput","onKeyDown","keyCode","stopPropagation","preventDefault","onBlur","onCompositionStart","onCompositionEnd","onPaste","CloseCircleOutlined","onClick","focus","map","label","type","key","operator","operatorType","leftElement","startElement","endElement","df","right","test","arr","split","filter","t","rightElement","substring","createDocumentFragment","appendChild","length","replaceChild","_e","_k","parentElement","_m","_l","_o","_r","_q","_p","classList","contains","_t","_s","_u","_x","_w","_v","_y","dangerouslySetInnerHTML","__html","Empty","_index","tip","item","endIndex","startIndex","lastIndexOf","df_1","startTextNode","createTextNode","endTextNode","collapseEl","Array","from","childNodes","forEach","el","Expression","View","ElasticSearchOptions","SqlOptions","Sql","MathOptions","Math","parse","queryHtml","context","node","nodeType","join","validator","_","innerText","Promise","resolve","reject","Error","displayName"],"mappings":"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"}