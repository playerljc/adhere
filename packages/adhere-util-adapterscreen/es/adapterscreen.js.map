{"version":3,"file":"adapterscreen.js","sources":["adapterscreen.js"],"sourcesContent":["import debounce from 'lodash.debounce';\r\nimport BrowserSniff from '@baifendian/adhere-util-browsersniff';\r\n/**\r\n * detectZoom - 获取浏览器缩放的级别(1为基本单位)\r\n * @return number\r\n */\r\nfunction detectZoom() {\r\n    if (typeof window === 'undefined')\r\n        return;\r\n    var ratio = 0;\r\n    var screen = window.screen;\r\n    // 返回当前显示设备的物理像素分辨率与CSS 像素分辨率之比\r\n    if ('devicePixelRatio' in window) {\r\n        // Safari浏览器\r\n        if (BrowserSniff.isBrowserSafari()) {\r\n            ratio = window.outerWidth / window.innerWidth;\r\n        }\r\n        else {\r\n            ratio = window.devicePixelRatio;\r\n        }\r\n    }\r\n    // IE浏览器\r\n    else if (BrowserSniff.isBrowserIE()) {\r\n        if (screen['deviceXDPI'] && screen['logicalXDPI']) {\r\n            ratio = screen['deviceXDPI'] / screen['logicalXDPI'];\r\n        }\r\n    }\r\n    // 没有像素比且不是IE\r\n    else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {\r\n        ratio = window.outerWidth / window.innerWidth;\r\n    }\r\n    return ratio;\r\n}\r\n/**\r\n * AdapterScreen\r\n * @param el\r\n */\r\nexport default (function (el) {\r\n    if (el === void 0) { el = window.document.body; }\r\n    var onResize = debounce(resize, 1000);\r\n    function resize() {\r\n        // 1.1 | 0.9\r\n        // 2 | 0.5\r\n        var ratio = detectZoom();\r\n        el.style.transformOrigin = 'left top';\r\n        el.style.transform = \"scale(\".concat(1 / ratio, \")\");\r\n        if (ratio !== 1) {\r\n            el.style.width = \"\".concat(ratio * 100, \"%\");\r\n            el.style.height = \"\".concat(ratio * 100, \"%\");\r\n        }\r\n        else if (ratio === 1) {\r\n            el.style.width = \"100%\";\r\n            el.style.height = \"100%\";\r\n        }\r\n    }\r\n    resize();\r\n    window.addEventListener('resize', onResize);\r\n    return function () {\r\n        window.removeEventListener('reset', onResize);\r\n    };\r\n});\r\n"],"names":["debounce","BrowserSniff","detectZoom","ratio","screen","window","isBrowserSafari","outerWidth","innerWidth","devicePixelRatio","isBrowserIE","undefined","el","document","body","onResize","resize","style","transformOrigin","transform","concat","width","height","addEventListener","removeEventListener"],"mappings":"OAAOA,aAAc,yBACdC,iBAAkB,uCAKzB,SAASC,aACL,IAEIC,EACAC,EAHJ,GAAsB,aAAlB,OAAOC,OAwBX,OAtBIF,EAAQ,EACRC,EAASC,OAAOD,OAEhB,qBAAsBC,OAGlBF,EADAF,aAAaK,gBAAgB,EACrBD,OAAOE,WAAaF,OAAOG,WAG3BH,OAAOI,iBAIdR,aAAaS,YAAY,EAC1BN,EAAmB,YAAKA,EAAoB,cAC5CD,EAAQC,EAAmB,WAAIA,EAAoB,aAI5BO,KAAAA,IAAtBN,OAAOE,YAAkDI,KAAAA,IAAtBN,OAAOG,aAC/CL,EAAQE,OAAOE,WAAaF,OAAOG,YAEhCL,CACX,gBAKe,SAAWS,GACX,KAAA,IAAPA,IAAiBA,EAAKP,OAAOQ,SAASC,MAC1C,IAAIC,EAAWf,SAASgB,EAAQ,GAAI,EACpC,SAASA,IAGL,IAAIb,EAAQD,WAAW,EACvBU,EAAGK,MAAMC,gBAAkB,WAC3BN,EAAGK,MAAME,UAAY,SAASC,OAAO,EAAIjB,EAAO,GAAG,EACrC,IAAVA,GACAS,EAAGK,MAAMI,MAAQ,GAAGD,OAAe,IAARjB,EAAa,GAAG,EAC3CS,EAAGK,MAAMK,OAAS,GAAGF,OAAe,IAARjB,EAAa,GAAG,GAE7B,IAAVA,IACLS,EAAGK,MAAMI,MAAQ,OACjBT,EAAGK,MAAMK,OAAS,OAE1B,CAGA,OAFAN,EAAO,EACPX,OAAOkB,iBAAiB,SAAUR,CAAQ,EACnC,WACHV,OAAOmB,oBAAoB,QAAST,CAAQ,CAChD,CACH"}