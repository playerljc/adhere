{"version":3,"file":"adapterscreen.js","sources":["adapterscreen.js"],"sourcesContent":["import debounce from 'lodash.debounce';\nimport BrowserSniff from '@baifendian/adhere-util-browsersniff';\n/**\n * detectZoom - 获取浏览器缩放的级别(1为基本单位)\n * @return number\n */\nfunction detectZoom() {\n    if (typeof window === 'undefined')\n        return;\n    var ratio = 0;\n    var screen = window.screen;\n    // 返回当前显示设备的物理像素分辨率与CSS 像素分辨率之比\n    if ('devicePixelRatio' in window) {\n        // Safari浏览器\n        if (BrowserSniff.isBrowserSafari()) {\n            ratio = window.outerWidth / window.innerWidth;\n        }\n        else {\n            ratio = window.devicePixelRatio;\n        }\n    }\n    // IE浏览器\n    else if (BrowserSniff.isBrowserIE()) {\n        if (screen['deviceXDPI'] && screen['logicalXDPI']) {\n            ratio = screen['deviceXDPI'] / screen['logicalXDPI'];\n        }\n    }\n    // 没有像素比且不是IE\n    // @ts-ignore\n    else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {\n        // @ts-ignore\n        ratio = window.outerWidth / window.innerWidth;\n    }\n    return ratio;\n}\n/**\n * AdapterScreen\n * @param el\n */\nexport default (function (el) {\n    if (el === void 0) { el = window.document.body; }\n    var onResize = debounce(resize, 1000);\n    function resize() {\n        // 1.1 | 0.9\n        // 2 | 0.5\n        var ratio = detectZoom();\n        el.style.transformOrigin = 'left top';\n        el.style.transform = \"scale(\".concat(1 / ratio, \")\");\n        if (ratio !== 1) {\n            el.style.width = \"\".concat(ratio * 100, \"%\");\n            el.style.height = \"\".concat(ratio * 100, \"%\");\n        }\n        else if (ratio === 1) {\n            el.style.width = \"100%\";\n            el.style.height = \"100%\";\n        }\n    }\n    resize();\n    window.addEventListener('resize', onResize);\n    return function () {\n        window.removeEventListener('reset', onResize);\n    };\n});\n"],"names":["debounce","BrowserSniff","detectZoom","ratio","screen","window","isBrowserSafari","outerWidth","innerWidth","devicePixelRatio","isBrowserIE","undefined","el","document","body","onResize","resize","style","transformOrigin","transform","concat","width","height","addEventListener","removeEventListener"],"mappings":"OAAOA,aAAc,yBACdC,iBAAkB,uCAKzB,SAASC,aACL,IAEIC,EACAC,EAHJ,GAAsB,aAAlB,OAAOC,OA0BX,OAxBIF,EAAQ,EACRC,EAASC,OAAOD,OAEhB,qBAAsBC,OAGlBF,EADAF,aAAaK,gBAAgB,EACrBD,OAAOE,WAAaF,OAAOG,WAG3BH,OAAOI,iBAIdR,aAAaS,YAAY,EAC1BN,EAAmB,YAAKA,EAAoB,cAC5CD,EAAQC,EAAmB,WAAIA,EAAoB,aAK5BO,KAAAA,IAAtBN,OAAOE,YAAkDI,KAAAA,IAAtBN,OAAOG,aAE/CL,EAAQE,OAAOE,WAAaF,OAAOG,YAEhCL,CACX,gBAKe,SAAWS,GACX,KAAA,IAAPA,IAAiBA,EAAKP,OAAOQ,SAASC,MAC1C,IAAIC,EAAWf,SAASgB,EAAQ,GAAI,EACpC,SAASA,IAGL,IAAIb,EAAQD,WAAW,EACvBU,EAAGK,MAAMC,gBAAkB,WAC3BN,EAAGK,MAAME,UAAY,SAASC,OAAO,EAAIjB,EAAO,GAAG,EACrC,IAAVA,GACAS,EAAGK,MAAMI,MAAQ,GAAGD,OAAe,IAARjB,EAAa,GAAG,EAC3CS,EAAGK,MAAMK,OAAS,GAAGF,OAAe,IAARjB,EAAa,GAAG,GAE7B,IAAVA,IACLS,EAAGK,MAAMI,MAAQ,OACjBT,EAAGK,MAAMK,OAAS,OAE1B,CAGA,OAFAN,EAAO,EACPX,OAAOkB,iBAAiB,SAAUR,CAAQ,EACnC,WACHV,OAAOmB,oBAAoB,QAAST,CAAQ,CAChD,CACH"}