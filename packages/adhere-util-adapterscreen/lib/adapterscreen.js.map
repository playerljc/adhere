{"version":3,"file":"adapterscreen.js","sources":["adapterscreen.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar lodash_debounce_1 = __importDefault(require(\"lodash.debounce\"));\r\nvar adhere_util_browsersniff_1 = __importDefault(require(\"@baifendian/adhere-util-browsersniff\"));\r\n/**\r\n * detectZoom - 获取浏览器缩放的级别(1为基本单位)\r\n * @return number\r\n */\r\nfunction detectZoom() {\r\n    if (typeof window === 'undefined')\r\n        return;\r\n    var ratio = 0;\r\n    var screen = window.screen;\r\n    // 返回当前显示设备的物理像素分辨率与CSS 像素分辨率之比\r\n    if ('devicePixelRatio' in window) {\r\n        // Safari浏览器\r\n        if (adhere_util_browsersniff_1.default.isBrowserSafari()) {\r\n            ratio = window.outerWidth / window.innerWidth;\r\n        }\r\n        else {\r\n            ratio = window.devicePixelRatio;\r\n        }\r\n    }\r\n    // IE浏览器\r\n    else if (adhere_util_browsersniff_1.default.isBrowserIE()) {\r\n        if (screen['deviceXDPI'] && screen['logicalXDPI']) {\r\n            ratio = screen['deviceXDPI'] / screen['logicalXDPI'];\r\n        }\r\n    }\r\n    // 没有像素比且不是IE\r\n    else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {\r\n        ratio = window.outerWidth / window.innerWidth;\r\n    }\r\n    return ratio;\r\n}\r\n/**\r\n * AdapterScreen\r\n * @param el\r\n */\r\nexports.default = (function (el) {\r\n    if (el === void 0) { el = window.document.body; }\r\n    var onResize = lodash_debounce_1.default(resize, 1000);\r\n    function resize() {\r\n        // 1.1 | 0.9\r\n        // 2 | 0.5\r\n        var ratio = detectZoom();\r\n        el.style.transformOrigin = 'left top';\r\n        el.style.transform = \"scale(\" + 1 / ratio + \")\";\r\n        if (ratio !== 1) {\r\n            el.style.width = ratio * 100 + \"%\";\r\n            el.style.height = ratio * 100 + \"%\";\r\n        }\r\n        else if (ratio === 1) {\r\n            el.style.width = \"100%\";\r\n            el.style.height = \"100%\";\r\n        }\r\n    }\r\n    resize();\r\n    window.addEventListener('resize', onResize);\r\n    return function () {\r\n        window.removeEventListener('reset', onResize);\r\n    };\r\n});\r\n"],"names":["__importDefault","this","mod","__esModule","default","lodash_debounce_1","Object","defineProperty","exports","value","require","adhere_util_browsersniff_1","detectZoom","ratio","screen","window","isBrowserSafari","outerWidth","innerWidth","devicePixelRatio","isBrowserIE","undefined","el","document","body","onResize","resize","style","transformOrigin","transform","width","height","addEventListener","removeEventListener"],"mappings":"AAAA,aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAEIG,mBADJC,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EACpCT,gBAAgBU,QAAQ,iBAAiB,CAAC,GAC9DC,2BAA6BX,gBAAgBU,QAAQ,sCAAsC,CAAC,EAKhG,SAASE,aACL,IAEIC,EACAC,EAHJ,GAAsB,aAAlB,OAAOC,OAwBX,OAtBIF,EAAQ,EACRC,EAASC,OAAOD,OAEhB,qBAAsBC,OAGlBF,EADAF,2BAA2BP,QAAQY,gBAAgB,EAC3CD,OAAOE,WAAaF,OAAOG,WAG3BH,OAAOI,iBAIdR,2BAA2BP,QAAQgB,YAAY,EAChDN,EAAmB,YAAKA,EAAoB,cAC5CD,EAAQC,EAAmB,WAAIA,EAAoB,aAI5BO,KAAAA,IAAtBN,OAAOE,YAAkDI,KAAAA,IAAtBN,OAAOG,aAC/CL,EAAQE,OAAOE,WAAaF,OAAOG,YAEhCL,CACX,CAKAL,QAAQJ,QAAU,SAAWkB,GACd,KAAA,IAAPA,IAAiBA,EAAKP,OAAOQ,SAASC,MAC1C,IAAIC,EAAWpB,kBAAkBD,QAAQsB,EAAQ,GAAI,EACrD,SAASA,IAGL,IAAIb,EAAQD,WAAW,EACvBU,EAAGK,MAAMC,gBAAkB,WAC3BN,EAAGK,MAAME,UAAY,SAAW,EAAIhB,EAAQ,IAC9B,IAAVA,GACAS,EAAGK,MAAMG,MAAgB,IAARjB,EAAc,IAC/BS,EAAGK,MAAMI,OAAiB,IAARlB,EAAc,KAEjB,IAAVA,IACLS,EAAGK,MAAMG,MAAQ,OACjBR,EAAGK,MAAMI,OAAS,OAE1B,CAGA,OAFAL,EAAO,EACPX,OAAOiB,iBAAiB,SAAUP,CAAQ,EACnC,WACHV,OAAOkB,oBAAoB,QAASR,CAAQ,CAChD,CACH"}