{"version":3,"file":"adapterscreen.js","sources":["adapterscreen.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_debounce_1 = __importDefault(require(\"lodash.debounce\"));\nvar adhere_util_browsersniff_1 = __importDefault(require(\"@baifendian/adhere-util-browsersniff\"));\n/**\n * detectZoom - 获取浏览器缩放的级别(1为基本单位)\n * @return number\n */\nfunction detectZoom() {\n    if (typeof window === 'undefined')\n        return;\n    var ratio = 0;\n    var screen = window.screen;\n    // 返回当前显示设备的物理像素分辨率与CSS 像素分辨率之比\n    if ('devicePixelRatio' in window) {\n        // Safari浏览器\n        if (adhere_util_browsersniff_1.default.isBrowserSafari()) {\n            ratio = window.outerWidth / window.innerWidth;\n        }\n        else {\n            ratio = window.devicePixelRatio;\n        }\n    }\n    // IE浏览器\n    else if (adhere_util_browsersniff_1.default.isBrowserIE()) {\n        if (screen['deviceXDPI'] && screen['logicalXDPI']) {\n            ratio = screen['deviceXDPI'] / screen['logicalXDPI'];\n        }\n    }\n    // 没有像素比且不是IE\n    // @ts-ignore\n    else if (window.outerWidth !== undefined && window.innerWidth !== undefined) {\n        // @ts-ignore\n        ratio = window.outerWidth / window.innerWidth;\n    }\n    return ratio;\n}\n/**\n * AdapterScreen\n * @param el\n */\nexports.default = (function (el) {\n    if (el === void 0) { el = window.document.body; }\n    var onResize = (0, lodash_debounce_1.default)(resize, 1000);\n    function resize() {\n        // 1.1 | 0.9\n        // 2 | 0.5\n        var ratio = detectZoom();\n        el.style.transformOrigin = 'left top';\n        el.style.transform = \"scale(\".concat(1 / ratio, \")\");\n        if (ratio !== 1) {\n            el.style.width = \"\".concat(ratio * 100, \"%\");\n            el.style.height = \"\".concat(ratio * 100, \"%\");\n        }\n        else if (ratio === 1) {\n            el.style.width = \"100%\";\n            el.style.height = \"100%\";\n        }\n    }\n    resize();\n    window.addEventListener('resize', onResize);\n    return function () {\n        window.removeEventListener('reset', onResize);\n    };\n});\n"],"names":["__importDefault","this","mod","__esModule","default","lodash_debounce_1","Object","defineProperty","exports","value","require","adhere_util_browsersniff_1","detectZoom","ratio","screen","window","isBrowserSafari","outerWidth","innerWidth","devicePixelRatio","isBrowserIE","undefined","el","document","body","onResize","resize","style","transformOrigin","transform","concat","width","height","addEventListener","removeEventListener"],"mappings":"AAAA,aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,CAAI,CAC5D,EAEIG,mBADJC,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EACpCT,gBAAgBU,QAAQ,iBAAiB,CAAC,GAC9DC,2BAA6BX,gBAAgBU,QAAQ,sCAAsC,CAAC,EAKhG,SAASE,aACL,IAEIC,EACAC,EAHJ,GAAsB,aAAlB,OAAOC,OA0BX,OAxBIF,EAAQ,EACRC,EAASC,OAAOD,OAEhB,qBAAsBC,OAGlBF,EADAF,2BAA2BP,QAAQY,gBAAgB,EAC3CD,OAAOE,WAAaF,OAAOG,WAG3BH,OAAOI,iBAIdR,2BAA2BP,QAAQgB,YAAY,EAChDN,EAAmB,YAAKA,EAAoB,cAC5CD,EAAQC,EAAmB,WAAIA,EAAoB,aAK5BO,KAAAA,IAAtBN,OAAOE,YAAkDI,KAAAA,IAAtBN,OAAOG,aAE/CL,EAAQE,OAAOE,WAAaF,OAAOG,YAEhCL,CACX,CAKAL,QAAQJ,QAAU,SAAWkB,GACd,KAAA,IAAPA,IAAiBA,EAAKP,OAAOQ,SAASC,MAC1C,IAAIC,GAAW,EAAIpB,kBAAkBD,SAASsB,EAAQ,GAAI,EAC1D,SAASA,IAGL,IAAIb,EAAQD,WAAW,EACvBU,EAAGK,MAAMC,gBAAkB,WAC3BN,EAAGK,MAAME,UAAY,SAASC,OAAO,EAAIjB,EAAO,GAAG,EACrC,IAAVA,GACAS,EAAGK,MAAMI,MAAQ,GAAGD,OAAe,IAARjB,EAAa,GAAG,EAC3CS,EAAGK,MAAMK,OAAS,GAAGF,OAAe,IAARjB,EAAa,GAAG,GAE7B,IAAVA,IACLS,EAAGK,MAAMI,MAAQ,OACjBT,EAAGK,MAAMK,OAAS,OAE1B,CAGA,OAFAN,EAAO,EACPX,OAAOkB,iBAAiB,SAAUR,CAAQ,EACnC,WACHV,OAAOmB,oBAAoB,QAAST,CAAQ,CAChD,CACH"}