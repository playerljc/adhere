{"version":3,"file":"util.js","sources":["util.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar adhere_util_preferences_1 = __importDefault(require(\"@baifendian/adhere-util-preferences\"));\r\nexports.default = {\r\n    /**\r\n     * isEmpty - 对象是否为空\r\n     * @param value\r\n     */\r\n    isEmpty: function (value) {\r\n        if (value === null || value === '' || value === undefined)\r\n            return true;\r\n        return false;\r\n    },\r\n    /**\r\n     * isArray - 判断数组\r\n     * @param obj\r\n     * @return {boolean}\r\n     */\r\n    isArray: function (obj) {\r\n        return Array.isArray(obj);\r\n    },\r\n    /**\r\n     * isNumber - 判断是否是number\r\n     * @param val\r\n     * @return {boolean}\r\n     */\r\n    isNumber: function (val) {\r\n        return (!this.isObject(val) && !this.isArray(val) && !this.isFunction(val) && typeof val === 'number');\r\n    },\r\n    /**\r\n     * isBoolean - 判断是否是boolean\r\n     * @param val\r\n     * @return {boolean}\r\n     */\r\n    isBoolean: function (val) {\r\n        return (typeof val).toLowerCase() === 'boolean';\r\n    },\r\n    /**\r\n     * isString - 判断是否是string\r\n     * @param val\r\n     * @return {boolean}\r\n     */\r\n    isString: function (val) {\r\n        return (typeof val).toLowerCase() === 'string';\r\n    },\r\n    /**\r\n     * isFunction - 判断函数\r\n     * @param obj\r\n     * @return {boolean}\r\n     */\r\n    isFunction: function (obj) {\r\n        return obj instanceof Function;\r\n    },\r\n    /**\r\n     * isObject - 是否是对象\r\n     * @param obj\r\n     * @return {boolean}\r\n     */\r\n    isObject: function (obj) {\r\n        return obj instanceof Object && !Array.isArray(obj) && !(obj instanceof Function);\r\n    },\r\n    /**\r\n     * isTextNode - 是否是文本节点\r\n     * @param el - Node\r\n     * @return {boolean}\r\n     */\r\n    isTextNode: function (el) {\r\n        return el.nodeType === Node.TEXT_NODE;\r\n    },\r\n    /**\r\n     * isCommentNode - 是否是注释节点\r\n     * @param el\r\n     * @return {boolean}\r\n     */\r\n    isCommentNode: function (el) {\r\n        return el.nodeType === Node.COMMENT_NODE;\r\n    },\r\n    /**\r\n     * isElementNode - 是否是元素节点\r\n     * @param el - Element\r\n     * @return {boolean}\r\n     */\r\n    isElementNode: function (el) {\r\n        return el.nodeType === Node.ELEMENT_NODE;\r\n    },\r\n    /**\r\n     * createElement - 根据html字符串创建dom\r\n     * @param htmlStr - string\r\n     * @return {Element}\r\n     */\r\n    createElement: function (htmlStr) {\r\n        var el = document.createElement('div');\r\n        el.innerHTML = htmlStr;\r\n        return el.firstElementChild;\r\n    },\r\n    /**\r\n     * chainCallAssignment - 对象的链式赋值\r\n     * obj.a.b.c.d.x.x.x = value\r\n     * @param obj Object - 赋值的对象\r\n     * @param chainStr string - 属性链式表达式 a.b.c\r\n     * @param value any - 要复值的值\r\n     */\r\n    chainCallAssignment: function (_a) {\r\n        var obj = _a.obj, chainStr = _a.chainStr, value = _a.value;\r\n        if (!this.isObject(obj) ||\r\n            !this.isString(chainStr) ||\r\n            this.isEmpty(chainStr) ||\r\n            this.isEmpty(obj))\r\n            return false;\r\n        var chain = chainStr.split('.');\r\n        // const obj = {};\r\n        // a.b.c\r\n        // const item = obj['a']\r\n        var target = obj;\r\n        for (var i = 0; i < chain.length; i++) {\r\n            var property = chain[i];\r\n            if (i < chain.length - 1) {\r\n                target = target[property];\r\n            }\r\n            else {\r\n                target[property] = value;\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * getObjectByChainStr - 通过chainStr获取对象\r\n     * obj.a.b.c.d.x.x.x = value\r\n     * @param obj Object - 赋值的对象\r\n     * @param chainStr string - 属性链式表达式 a.b.c\r\n     * @return Object\r\n     */\r\n    getObjectByChainStr: function (_a) {\r\n        var obj = _a.obj, chainStr = _a.chainStr;\r\n        if (!this.isObject(obj) ||\r\n            !this.isString(chainStr) ||\r\n            this.isEmpty(chainStr) ||\r\n            this.isEmpty(obj))\r\n            return obj;\r\n        var chain = chainStr.split('.');\r\n        // const obj = {};\r\n        // a.b.c\r\n        // const item = obj['a']\r\n        var target = obj;\r\n        for (var i = 0; i < chain.length; i++) {\r\n            target = target[chain[i]];\r\n        }\r\n        return target;\r\n    },\r\n    /**\r\n     * toCamelCase - 用连接符链接的字符串转换成驼峰写法\r\n     * 例：abc-def AbcDef\r\n     * @param str - string 用连接符节点的字符串\r\n     * @param toUpperCase - boolean 是否转换成大写\r\n     * @return {String}\r\n     */\r\n    toCamelCase: function (str, toUpperCase) {\r\n        if (toUpperCase === void 0) { toUpperCase = false; }\r\n        var result = str\r\n            .split('-')\r\n            .map(function (item) { return item.charAt(0).toUpperCase() + item.substring(1); })\r\n            .join('');\r\n        return !toUpperCase ? \"\" + result.charAt(0).toLowerCase() + result.substring(1) : result;\r\n    },\r\n    /**\r\n     * isKebabCase - 是否是烤肉串形式的名字\r\n     * @param name - string 名称\r\n     * @return boolean\r\n     */\r\n    isKebabCase: function (name) {\r\n        return /^([a-z][a-z0-9]*)(-[a-z0-9]+)*$/.test(name);\r\n    },\r\n    /**\r\n     * isPascalCase - 是否是驼峰形式的名字\r\n     * @param name - string 名称\r\n     * @return boolean\r\n     */\r\n    isPascalCase: function (name) {\r\n        return /^[A-Z][a-z]+(?:[A-Z][a-z]+)*$/.test(name);\r\n    },\r\n    /**\r\n     * pascalCaseToKebabCase 驼峰转xxx-xxx-xxx\r\n     * @param name - string pascalCase的字符串\r\n     * @return {string}\r\n     */\r\n    pascalCaseToKebabCase: function (name) {\r\n        var result = name.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2');\r\n        return (result.startsWith('-') ? result.substring(1) : result).toLowerCase();\r\n    },\r\n    /**\r\n     * execExpression - 执行表达式\r\n     * @param context - {Object} 执行的上下文\r\n     * @param expressionStr - {String} 表达式\r\n     * @param data\r\n     * @return {any}\r\n     */\r\n    execExpression: function (context, expressionStr, data) {\r\n        // 实参列表，调用函数传递的参数\r\n        var argv = [data];\r\n        // 形参列表，函数声明的参数列表\r\n        var parameters = ['context'];\r\n        // 迭代context\r\n        for (var p in context) {\r\n            // 拼凑其他实参\r\n            argv.push(context[p]);\r\n            // 拼凑其他形参\r\n            parameters.push(p);\r\n        }\r\n        // 创建函数并调用\r\n        return eval(\"\\n    const fun = new Function(\\n      `\" + parameters.join(',') + \"`,\\n      `return eval(\\\"with(context){\" + expressionStr + \"}\\\")`,\\n    );\\n  \\n    fun.apply(window, argv);\\n  \");\r\n    },\r\n    /**\r\n     * noop - 返回一个空实现的函数\r\n     * @return Function\r\n     */\r\n    noop: function () {\r\n        return function () { };\r\n    },\r\n    /**\r\n     * 函数节流\r\n     */\r\n    /**\r\n     * getCookie\r\n     * @return {string}\r\n     * @param name\r\n     */\r\n    getCookie: function (name) {\r\n        if (name === void 0) { name = 'lang'; }\r\n        var strCookie = document.cookie; // 获取cookie字符串\r\n        var arrCookie = strCookie.split(';'); // 分割\r\n        // 遍历匹配\r\n        var value = '';\r\n        for (var i = 0; i < arrCookie.length; i++) {\r\n            var arr = arrCookie[i].split('=');\r\n            if (arr[0].trim() === name) {\r\n                value = arr[1];\r\n                break;\r\n            }\r\n        }\r\n        return value;\r\n    },\r\n    /**\r\n     * getLang\r\n     * @return {String}\r\n     */\r\n    getLang: function () {\r\n        var language = this.getCookie('lang') || adhere_util_preferences_1.default.getStringByLocal('language');\r\n        if (!language) {\r\n            adhere_util_preferences_1.default.putStringByLocal('language', 'zh_CN');\r\n            language = 'zh_CN';\r\n        }\r\n        return language;\r\n    },\r\n    /**\r\n     * setLang\r\n     * @param lang\r\n     */\r\n    setLang: function (lang) {\r\n        if (lang === void 0) { lang = 'zh_CN'; }\r\n        adhere_util_preferences_1.default.putStringByLocal('language', lang);\r\n    },\r\n    /**\r\n     * getDatePickerFormat\r\n     * @return {string}\r\n     */\r\n    getDatePickerFormat: function () {\r\n        var lang = this.getLang();\r\n        if (lang === 'zh_CN') {\r\n            return 'YYYY-MM-DD';\r\n        }\r\n        else {\r\n            return 'DD-MM-YYYY';\r\n        }\r\n    },\r\n    // /**\r\n    //  * getUserInfo\r\n    //  * @return {Object}\r\n    //  */\r\n    // getUserInfo(): Object {\r\n    //   return Preferences.getObjectBySession('system-userInfo') || {};\r\n    // },\r\n    //\r\n    // /**\r\n    //  * userInfo\r\n    //  * @param userInfo\r\n    //  */\r\n    // setUserInfo(userInfo: Object) {\r\n    //   return Preferences.putObjectBySession('system-userInfo', userInfo);\r\n    // },\r\n    //\r\n    // /**\r\n    //  * getUserAllUserPermission\r\n    //  * @return {Array<String>}\r\n    //  */\r\n    // getUserAllUserPermission(): Array<string> {\r\n    //   // @ts-ignore\r\n    //   return Preferences.getObjectBySession('system-userPermissio');\r\n    // },\r\n    /**\r\n     * 401 casUrl\r\n     * @param baseUrl\r\n     * @param enterUrl\r\n     * @return {string}\r\n     */\r\n    casUrl: function (_a) {\r\n        var baseUrl = _a.baseUrl, enterUrl = _a.enterUrl;\r\n        var language = this.getLang();\r\n        var languageParam = language ? \"&locale=\" + language : '';\r\n        return baseUrl + \"/gotoLogin?backUrl=\" + enterUrl + languageParam;\r\n    },\r\n    /**\r\n     * casLogoutUrl\r\n     * @param {String} - baseUrl\r\n     * @param {String} - enterUrl\r\n     * @param {String} - params\r\n     * @return {string}\r\n     */\r\n    casLogoutUrl: function (_a) {\r\n        var baseUrl = _a.baseUrl, enterUrl = _a.enterUrl, _b = _a.params, params = _b === void 0 ? '' : _b;\r\n        return baseUrl + \"/logout?service=\" + enterUrl + params;\r\n    },\r\n    /**\r\n     * isIframeEmbed - 是否是iframe嵌入\r\n     * @return {boolean}\r\n     */\r\n    isIframeEmbed: function () {\r\n        return window.top && window.top !== window;\r\n    },\r\n    /**\r\n     * toPoint - 百分数转化为小数\r\n     * @param percent\r\n     */\r\n    toPoint: function (percent) {\r\n        var str = percent.replace('%', '');\r\n        // @ts-ignore\r\n        return str / 100;\r\n    },\r\n    /**\r\n     * point - 小数转化为百分数\r\n     * @param point\r\n     */\r\n    toPercent: function (point) {\r\n        var str = Number(point * 100).toFixed(1);\r\n        str += '%';\r\n        return str;\r\n    },\r\n};\r\n"],"names":["__importDefault","this","mod","__esModule","default","Object","defineProperty","exports","value","adhere_util_preferences_1","require","isEmpty","undefined","isArray","obj","Array","isNumber","val","isObject","isFunction","isBoolean","toLowerCase","isString","Function","isTextNode","el","nodeType","Node","TEXT_NODE","isCommentNode","COMMENT_NODE","isElementNode","ELEMENT_NODE","createElement","htmlStr","document","innerHTML","firstElementChild","chainCallAssignment","_a","chainStr","chain","split","target","i","length","property","getObjectByChainStr","toCamelCase","str","toUpperCase","result","map","item","charAt","substring","join","isKebabCase","name","test","isPascalCase","pascalCaseToKebabCase","replace","startsWith","execExpression","context","expressionStr","data","argv","parameters","p","push","eval","noop","getCookie","arrCookie","cookie","arr","trim","getLang","language","getStringByLocal","putStringByLocal","setLang","lang","getDatePickerFormat","casUrl","baseUrl","enterUrl","casLogoutUrl","_b","params","isIframeEmbed","window","top","toPoint","percent","toPercent","point","Number","toFixed"],"mappings":"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"}