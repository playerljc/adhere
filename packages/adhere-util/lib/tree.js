"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}).apply(this,arguments)},__rest=this&&this.__rest||function(r,t){var e={};for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]]);return e},__spreadArrays=this&&this.__spreadArrays||function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),i=0,t=0;t<e;t++)for(var a=arguments[t],o=0,f=a.length;o<f;o++,i++)n[i]=a[o];return n},TreeUtil=(Object.defineProperty(exports,"__esModule",{value:!0}),{treeToArray:function(r,t){var f=t.parentIdAttr,t=t.rootParentId,u=[];return function r(t,e,n){for(var i,a=0;a<e.length;a++){var o=e[a];u.push(__assign(__assign({},o),((i={})[f]=n,i))),o.children&&Array.isArray(o.children)&&o.children.length&&r(t,o.children,o.key)}}(u,r,t),u},arrayToAntdTree:function(e,r){var n=r.keyAttr,i=r.titleAttr,a=r.parentIdAttr,r=r.rootParentId;function o(r,t){return r.filter(function(r){return r[a]==t}).map(function(r){return __assign(__assign({},r),{title:r[i],key:r[n],isLeaf:!0,children:[],properties:__assign({},r)})})}r=o(e,r);return r.forEach(function(r){!function t(r){r.children=o(e,r.properties[n]),r.isLeaf=!r.children.length,r.isLeaf&&delete r.children,(r.children||[]).forEach(function(r){t(r)})}(r)}),r},arrayToAntdTreeSelect:function(e,r){var n=r.keyAttr,i=r.titleAttr,t=r.rootParentId,a=r.parentIdAttr;function o(r,t){return r.filter(function(r){return r[a]==t}).map(function(r){return __assign(__assign({},r),{key:r[n],title:r[i],value:r[n],isLeaf:!0,children:[],properties:__assign({},r)})})}r=o(e,t);return r.forEach(function(r){!function t(r){r.children=o(e,r.properties[n]),r.isLeaf=!r.children.length,r.isLeaf&&delete r.children,(r.children||[]).forEach(function(r){t(r)})}(r)}),r},getAncestor:function(r,t,e){for(var n=[],i=t;i&&i[e.parentIdAttr]!=e.rootParentId;){var a=r.find(function(r){return r[e.keyAttr]===i[e.parentIdAttr]});a&&n.push(a),i=a}return n},getDescendants:function(r,t,n){var i=[];return function t(e){r.filter(function(r){return r[n.parentIdAttr]===e[n.keyAttr]}).forEach(function(r){i.push(r),t(r)})}(t),i},completionIncompleteFlatArr:function(e,r,n){var t=this,i=new Set;return r.forEach(function(r){r=t.getAncestor(e,r,n),r=__spreadArrays(r||[]).map(function(r){return r[n.keyAttr]});i=new Set(__spreadArrays(Array.from(i),r))}),i=new Set(__spreadArrays(Array.from(i),r.map(function(r){return r[n.keyAttr]}))),this.arrayToAntdTree(__spreadArrays(Array.from(i)).map(function(t){return e.find(function(r){return r[n.keyAttr]===t})}),n)},filterTreeByFlatData:function(r,t,e){e.filterAttr;var n,i=__rest(e,["filterAttr"]);return t?(n=r.filter(function(r){return-1!==r[e.filterAttr].indexOf(t)}),this.completionIncompleteFlatArr(r,n,e)):this.arrayToAntdTree(r,i)},filterTree:function(r,t,e){e.filterAttr;var n,i=__rest(e,["filterAttr"]),r=this.treeToArray(r,{parentIdAttr:e.parentIdAttr,rootParentId:e.rootParentId});return t?(n=r.filter(function(r){return-1!==r[e.filterAttr].indexOf(t)}),this.completionIncompleteFlatArr(r,n,e)):this.arrayToAntdTree(r,i)},findNodeByKey:function(r,a,o){return function r(t){for(var e,n=null,i=0;i<t.length;i++){if(t[i][o.keyAttr]===a){n=t[i];break}if("children"in t[i]&&Array.isArray(t[i].children)&&null!=(e=null==(e=t[i])?void 0:e.children)&&e.length&&(n=r(t[i].children)))break}return n}(r)},transformTreeData:function(r,a,o){return function r(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];i[a||"children"]=r(i[a||"children"]),e.push(o(i))}return e}(r)},getLeafNodes:function(r,t){return function r(t,e){for(var n=[],i=0;i<t.length;i++){var a=t[i];e in a&&Array.isArray(a[e])?n=__spreadArrays(n,r(a[e],e)):n.push(a)}return n}((r=void 0===r?[]:r)||[],(t=void 0===t?"children":t)||"children")},getLeafNodesByIndex:function(r,t,e){return function r(t,e,n){for(var i=[],a=0;a<t.length;a++){var o=t[a];n in o&&"boolean"==typeof o[n]&&o[n]&&i.push(o),e in o&&Array.isArray(o[e])&&(i=__spreadArrays(i,r(o[e],e,n)))}return i}((r=void 0===r?[]:r)||[],(t=void 0===t?"children":t)||"children",(e=void 0===e?"isLeaf":e)||"isLeaf")},getLeafNodeByFlatData:function(r,t){var e=t.parentIdAttr,n=t.keyAttr,i=r.filter(function(r){return e in r&&r[e]}).map(function(r){return r[e]});return r.filter(function(r){return!i.includes(r[n])})},getLeafNodeByFlatDataToIndex:function(r,t){return void 0===t&&(t="isLeaf"),r.filter(function(r){return"boolean"==typeof r[t||"isLeaf"]&&r[t]})},getTreeLevel:function(r){for(var n,i=this.treeToArray(r=void 0===r?[]:r,{parentIdAttr:"pid",rootParentId:-1}),a=this.getLeafNodeByFlatData(i,{keyAttr:"key",titleAttr:"key",parentIdAttr:"pid",rootParentId:-1}),o=[],t=0;t<a.length;t++)!function(r){for(var t=1,e=a[r].pid;-1!==e;)e=null==(n=i.find(function(r){return r.key===e}))?void 0:n.pid,t++;o.push(t)}(t);return Math.max.apply(Math,o)},getTreeLevelByIndex:function(r,t){void 0===t&&(t="isLeaf");for(var n,i=this.treeToArray(r=void 0===r?[]:r,{parentIdAttr:"pid",rootParentId:-1}),a=this.getLeafNodeByFlatDataToIndex(i,t),o=[],e=0;e<a.length;e++)!function(r){for(var t=1,e=a[r].pid;-1!==e;)e=null==(n=i.find(function(r){return r.key===e}))?void 0:n.pid,t++;o.push(t)}(e);return Math.max.apply(Math,o)},getTreeLevelToFlat:function(n,i){for(var a,o=this.getLeafNodeByFlatData(n,i),f=[],r=0;r<o.length;r++)!function(r){for(var t=1,e=o[r].pid;-1!==e;)e=null==(a=n.find(function(r){return r[i.keyAttr]===e}))?void 0:a.pid,t++;f.push(t)}(r);return Math.max.apply(Math,f)},getTreeLevelByIndexToFlat:function(n,i,r){for(var a,o=this.getLeafNodeByFlatDataToIndex(n,r),f=[],t=0;t<o.length;t++)!function(r){for(var t=1,e=o[r].pid;-1!==e;)e=null==(a=n.find(function(r){return r[i.keyAttr]===e}))?void 0:a.pid,t++;f.push(t)}(t);return Math.max.apply(Math,f)},excludeAntdTreeNodes:function(r,t){for(var o=this.treeToArray(r,{parentIdAttr:"pid",rootParentId:-1}),e=[],n=0;n<t.length;n++)var i=function r(t){var e=o.filter(function(r){return r.pid===t}).map(function(r){return r.key});var n=e;for(var i=0;i<e.length;i++){var a=r(e[i]);n=__spreadArrays(n,a)}return n}(t[n]),e=__spreadArrays(e,i);e=__spreadArrays(e,t);r=o.filter(function(r){return!e.includes(r.key)});return this.completionIncompleteFlatArr(o,r,{keyAttr:"key",titleAttr:"title",parentIdAttr:"pid",rootParentId:-1})},excludeAntdSelectTreeNodes:function(r,t){for(var o=this.treeToArray(r,{parentIdAttr:"pid",rootParentId:-1}),e=[],n=0;n<t.length;n++)var i=function r(t){var e=o.filter(function(r){return r.pid===t}).map(function(r){return r.key});var n=e;for(var i=0;i<e.length;i++){var a=r(e[i]);n=__spreadArrays(n,a)}return n}(t[n]),e=__spreadArrays(e,i);e=__spreadArrays(e,t);r=o.filter(function(r){return!e.includes(r.key)});return this.completionIncompleteFlatArr(o,r,{keyAttr:"key",titleAttr:"title",parentIdAttr:"pid",rootParentId:-1})}});exports.default=TreeUtil;
//# sourceMappingURL=tree.js.map
