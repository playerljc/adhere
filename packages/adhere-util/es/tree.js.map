{"version":3,"file":"tree.js","sources":["tree.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar TreeUtil = {\n    /**\n     * treeToArray\n     * @description tree数据转换成Array\n     * @param treeData\n     * @param config\n     */\n    treeToArray: function (treeData, config) {\n        // key: string;\n        // title: string;\n        // isLeaf: boolean;\n        // children?: IAntdTreeNode[];\n        // properties?: any;\n        var parentIdAttr = config.parentIdAttr, rootParentId = config.rootParentId;\n        var result = [];\n        function loop(context, data, parentId) {\n            var _a;\n            for (var i = 0; i < data.length; i++) {\n                var item = data[i];\n                result.push(__assign(__assign({}, item), (_a = {}, _a[parentIdAttr] = parentId, _a)));\n                if (item.children && Array.isArray(item.children) && item.children.length) {\n                    loop(context, item.children, item.key);\n                }\n            }\n        }\n        loop(result, treeData, rootParentId);\n        return result;\n    },\n    /**\n     * arrayToAntdTree - array转换成Tree\n     * @param arr\n     * @param config\n     */\n    arrayToAntdTree: function (arr, config) {\n        var \n        // 主键属性\n        keyAttr = config.keyAttr, \n        // title属性\n        titleAttr = config.titleAttr, \n        // parentId属性\n        parentIdAttr = config.parentIdAttr, \n        // root的parentId的值\n        rootParentId = config.rootParentId;\n        /**\n         * findNodesByParentId\n         * @param arr\n         * @param parentId\n         * @return {*}\n         */\n        function findNodesByParentId(arr, parentId) {\n            return arr\n                .filter(function (item) { return item[parentIdAttr] == parentId; })\n                .map(function (item) { return (__assign(__assign({}, item), { title: item[titleAttr], key: item[keyAttr], isLeaf: true, children: [], properties: __assign({}, item) })); });\n        }\n        /**\n         * Recursion\n         * @constructor\n         */\n        function Recursion(node) {\n            node.children = findNodesByParentId(arr, node.properties[keyAttr]);\n            node.isLeaf = !node.children.length;\n            if (node.isLeaf) {\n                delete node.children;\n            }\n            (node.children || []).forEach(function (node) {\n                Recursion(node);\n            });\n        }\n        var roots = findNodesByParentId(arr, rootParentId);\n        roots.forEach(function (root) {\n            Recursion(root);\n        });\n        return roots;\n    },\n    /**\n     * arrayToAntdTreeSelect - array转换成TreeSelect\n     * @param arr\n     * @param config\n     */\n    arrayToAntdTreeSelect: function (arr, config) {\n        var keyAttr = config.keyAttr, titleAttr = config.titleAttr, rootParentId = config.rootParentId, parentIdAttr = config.parentIdAttr;\n        /**\n         * findNodesByParentId\n         * @param arr\n         * @param parentId\n         * @return {*}\n         */\n        function findNodesByParentId(arr, parentId) {\n            return arr\n                .filter(function (item) { return item[parentIdAttr] == parentId; })\n                .map(function (item) { return (__assign(__assign({}, item), { key: item[keyAttr], title: item[titleAttr], value: item[keyAttr], isLeaf: true, children: [], properties: __assign({}, item) })); });\n        }\n        /**\n         * Recursion\n         * @constructor\n         */\n        function Recursion(node) {\n            node.children = findNodesByParentId(arr, node.properties[keyAttr]);\n            node.isLeaf = !node.children.length;\n            if (node.isLeaf) {\n                delete node.children;\n            }\n            (node.children || []).forEach(function (node) {\n                Recursion(node);\n            });\n        }\n        var roots = findNodesByParentId(arr, rootParentId);\n        roots.forEach(function (root) {\n            Recursion(root);\n        });\n        return roots;\n    },\n    /**\n     * getAncestor - 获取祖先\n     * @param data\n     * @param node\n     * @param config\n     */\n    getAncestor: function (data, node, config) {\n        var result = [];\n        var curNode = node;\n        while (curNode && curNode[config.parentIdAttr] != config.rootParentId) {\n            var item = data.find(function (t) { return t[config.keyAttr] === curNode[config.parentIdAttr]; });\n            if (item) {\n                result.push(item);\n            }\n            curNode = item;\n        }\n        return result;\n    },\n    /**\n     * getDescendants\n     * @description - 获取子孙\n     */\n    getDescendants: function (data, node, config) {\n        function loop(n) {\n            var children = data.filter(function (t) { return t[config.parentIdAttr] === n[config.keyAttr]; });\n            children.forEach(function (t) {\n                result.push(t);\n                loop(t);\n            });\n        }\n        var result = [];\n        loop(node);\n        return result;\n    },\n    /**\n     * completionIncompleteFlatArr\n     * @description 补残缺的FlatArr\n     */\n    completionIncompleteFlatArr: function (treeFlatNodes, incompleteTreeFlatNodes, config) {\n        var _this = this;\n        var set = new Set();\n        incompleteTreeFlatNodes.forEach(function (t) {\n            var tops = _this.getAncestor(treeFlatNodes, t, config);\n            var tArr = __spreadArray([], (tops || []), true).map(function (item) { return item[config.keyAttr]; });\n            set = new Set(__spreadArray(__spreadArray([], Array.from(set), true), tArr, true));\n        });\n        set = new Set(__spreadArray(__spreadArray([], Array.from(set), true), incompleteTreeFlatNodes.map(function (t) { return t[config.keyAttr]; }), true));\n        return this.arrayToAntdTree(__spreadArray([], Array.from(set), true).map(function (t) { return treeFlatNodes.find(function (item) { return item[config.keyAttr] === t; }); }), config);\n    },\n    /**\n     * filterTreeByFlatData\n     * @description 本地过滤tree\n     * @param treeFlatNodes\n     * @param kw\n     * @param config\n     */\n    filterTreeByFlatData: function (treeFlatNodes, kw, config) {\n        var filterAttr = config.filterAttr, arrayToAntdTreeConfig = __rest(config, [\"filterAttr\"]);\n        if (kw) {\n            var arr = treeFlatNodes.filter(function (node) {\n                return node[config.filterAttr].indexOf(kw) !== -1;\n            });\n            return this.completionIncompleteFlatArr(treeFlatNodes, arr, config);\n        }\n        else {\n            return this.arrayToAntdTree(treeFlatNodes, arrayToAntdTreeConfig);\n        }\n    },\n    /**\n     * filterTree\n     * @description\n     * @param treeNodes\n     * @param kw\n     * @param config\n     */\n    filterTree: function (treeNodes, kw, config) {\n        var filterAttr = config.filterAttr, arrayToAntdTreeConfig = __rest(config, [\"filterAttr\"]);\n        var treeFlatNodes = this.treeToArray(treeNodes, {\n            parentIdAttr: config.parentIdAttr,\n            rootParentId: config.rootParentId,\n        });\n        if (kw) {\n            var arr = treeFlatNodes.filter(function (node) {\n                return node[config.filterAttr].indexOf(kw) !== -1;\n            });\n            return this.completionIncompleteFlatArr(treeFlatNodes, arr, config);\n        }\n        else {\n            return this.arrayToAntdTree(treeFlatNodes, arrayToAntdTreeConfig);\n        }\n    },\n    /**\n     * findNodeByKey\n     * @description - 根据keyAttr查找结点\n     * @param treeData\n     * @param val\n     * @param config\n     */\n    findNodeByKey: function (treeData, val, config) {\n        function findLoop(data) {\n            var _a, _b;\n            var result = null;\n            for (var i = 0; i < data.length; i++) {\n                if (data[i][config.keyAttr] === val) {\n                    result = data[i];\n                    break;\n                }\n                else {\n                    if ('children' in data[i] &&\n                        Array.isArray(data[i].children) &&\n                        ((_b = (_a = data[i]) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length)) {\n                        result = findLoop(data[i].children);\n                        if (result)\n                            break;\n                    }\n                }\n            }\n            return result;\n        }\n        return findLoop(treeData);\n    },\n    /**\n     * transformTreeData\n     * @description - 转换一个treeData为antd的TreeData\n     * @param treeData\n     * @param childrenAttr\n     * @param onCallback\n     * @return IAntdTreeNode[]\n     */\n    transformTreeData: function (treeData, childrenAttr, onCallback) {\n        function loop(children) {\n            var result = [];\n            for (var i = 0; i < children.length; i++) {\n                var node = children[i];\n                node[childrenAttr || 'children'] = loop(node[childrenAttr || 'children']);\n                result.push(onCallback(node));\n            }\n            return result;\n        }\n        return loop(treeData);\n    },\n    /**\n     * getLeafNodes\n     * @description 获取叶子节点\n     */\n    getLeafNodes: function (nodes, childrenAttr) {\n        if (nodes === void 0) { nodes = []; }\n        if (childrenAttr === void 0) { childrenAttr = 'children'; }\n        function loop(treeNodes, childrenAttr) {\n            var result = [];\n            for (var i = 0; i < treeNodes.length; i++) {\n                var node = treeNodes[i];\n                if (childrenAttr in node && Array.isArray(node[childrenAttr])) {\n                    // 有孩子\n                    result = __spreadArray(__spreadArray([], result, true), loop(node[childrenAttr], childrenAttr), true);\n                }\n                else {\n                    // 没有孩子就是叶子节点\n                    result.push(node);\n                }\n            }\n            return result;\n        }\n        return loop(nodes || [], childrenAttr || 'children');\n    },\n    /**\n     * getLeafNodesByIndex\n     * @description 通过索引获取叶子节点的集合\n     */\n    getLeafNodesByIndex: function (nodes, childrenAttr, indexAttr) {\n        if (nodes === void 0) { nodes = []; }\n        if (childrenAttr === void 0) { childrenAttr = 'children'; }\n        if (indexAttr === void 0) { indexAttr = 'isLeaf'; }\n        function loop(treeNodes, childrenAttr, leafAttr) {\n            var result = [];\n            for (var i = 0; i < treeNodes.length; i++) {\n                var node = treeNodes[i];\n                if (leafAttr in node && typeof node[leafAttr] === 'boolean' && node[leafAttr]) {\n                    result.push(node);\n                }\n                if (childrenAttr in node && Array.isArray(node[childrenAttr])) {\n                    result = __spreadArray(__spreadArray([], result, true), loop(node[childrenAttr], childrenAttr, leafAttr), true);\n                }\n            }\n            return result;\n        }\n        return loop(nodes || [], childrenAttr || 'children', indexAttr || 'isLeaf');\n    },\n    /**\n     * getLeafNodeByFlatData\n     * @description 获取叶子节点通过拉平的数据\n     * @param arr\n     * @param config\n     */\n    getLeafNodeByFlatData: function (arr, config) {\n        var parentIdAttr = config.parentIdAttr, keyAttr = config.keyAttr;\n        // 获取所有的parentId\n        var parentIds = arr\n            .filter(function (t) { return parentIdAttr in t && t[parentIdAttr]; })\n            .map(function (t) { return t[parentIdAttr]; });\n        // 1,2,3 parentIds\n        // 1,2,3,4,5 arr\n        return arr.filter(function (t) { return !parentIds.includes(t[keyAttr]); });\n    },\n    /**\n     * getLeafNodeByFlatDataToIndex\n     * @description 获取叶子节点通过索引和拉平的数据\n     * @param arr\n     * @param indexAttr\n     */\n    getLeafNodeByFlatDataToIndex: function (arr, indexAttr) {\n        if (indexAttr === void 0) { indexAttr = 'isLeaf'; }\n        return arr.filter(function (t) { return typeof t[indexAttr || 'isLeaf'] === 'boolean' && t[indexAttr]; });\n    },\n    /**\n     * getTreeLevel\n     * @description 获取树的层级\n     */\n    getTreeLevel: function (nodes) {\n        var _a;\n        if (nodes === void 0) { nodes = []; }\n        var flat = this.treeToArray(nodes, {\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n        var leafNodes = this.getLeafNodeByFlatData(flat, {\n            keyAttr: 'key',\n            titleAttr: 'key',\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n        var levels = [];\n        var _loop_1 = function (i) {\n            var leafNode = leafNodes[i];\n            var level = 1;\n            var pid = leafNode.pid;\n            while (pid !== -1) {\n                pid = (_a = flat.find(function (node) { return node.key === pid; })) === null || _a === void 0 ? void 0 : _a.pid;\n                level++;\n            }\n            levels.push(level);\n        };\n        for (var i = 0; i < leafNodes.length; i++) {\n            _loop_1(i);\n        }\n        return Math.max.apply(Math, levels);\n    },\n    /**\n     * getTreeLevelByIndex\n     * @description 获取树的层级通过索引\n     */\n    getTreeLevelByIndex: function (nodes, indexAttr) {\n        var _a;\n        if (nodes === void 0) { nodes = []; }\n        if (indexAttr === void 0) { indexAttr = 'isLeaf'; }\n        var flat = this.treeToArray(nodes, {\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n        var leafNodes = this.getLeafNodeByFlatDataToIndex(flat, indexAttr);\n        var levels = [];\n        var _loop_2 = function (i) {\n            var leafNode = leafNodes[i];\n            var level = 1;\n            var pid = leafNode.pid;\n            while (pid !== -1) {\n                pid = (_a = flat.find(function (node) { return node.key === pid; })) === null || _a === void 0 ? void 0 : _a.pid;\n                level++;\n            }\n            levels.push(level);\n        };\n        for (var i = 0; i < leafNodes.length; i++) {\n            _loop_2(i);\n        }\n        return Math.max.apply(Math, levels);\n    },\n    /**\n     * getTreeLevelToFlat\n     * @description 获取树的层级通过拉平的数据\n     */\n    getTreeLevelToFlat: function (flatArr, config) {\n        var _a;\n        var leafNodes = this.getLeafNodeByFlatData(flatArr, config);\n        var levels = [];\n        var _loop_3 = function (i) {\n            var leafNode = leafNodes[i];\n            var level = 1;\n            var pid = leafNode.pid;\n            while (pid !== -1) {\n                pid = (_a = flatArr.find(function (node) { return node[config.keyAttr] === pid; })) === null || _a === void 0 ? void 0 : _a.pid;\n                level++;\n            }\n            levels.push(level);\n        };\n        for (var i = 0; i < leafNodes.length; i++) {\n            _loop_3(i);\n        }\n        return Math.max.apply(Math, levels);\n    },\n    /**\n     * getTreeLevelByIndexToFlat\n     * @description 获取树的层级通过拉平的数据和索引\n     */\n    getTreeLevelByIndexToFlat: function (flatArr, config, indexAttr) {\n        var _a;\n        var leafNodes = this.getLeafNodeByFlatDataToIndex(flatArr, indexAttr);\n        var levels = [];\n        var _loop_4 = function (i) {\n            var leafNode = leafNodes[i];\n            var level = 1;\n            var pid = leafNode.pid;\n            while (pid !== -1) {\n                pid = (_a = flatArr.find(function (node) { return node[config.keyAttr] === pid; })) === null || _a === void 0 ? void 0 : _a.pid;\n                level++;\n            }\n            levels.push(level);\n        };\n        for (var i = 0; i < leafNodes.length; i++) {\n            _loop_4(i);\n        }\n        return Math.max.apply(Math, levels);\n    },\n    /**\n     * excludeAntdTreeNodes\n     * @description 排除指定节点后形成一棵树\n     * @param nodes\n     * @param excludeKeys\n     */\n    excludeAntdTreeNodes: function (nodes, excludeKeys) {\n        var flatArr = this.treeToArray(nodes, {\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n        var _excludeKeys = [];\n        for (var i = 0; i < excludeKeys.length; i++) {\n            var result = loop(excludeKeys[i]);\n            _excludeKeys = __spreadArray(__spreadArray([], _excludeKeys, true), result, true);\n        }\n        _excludeKeys = __spreadArray(__spreadArray([], _excludeKeys, true), excludeKeys, true);\n        var omitArr = flatArr.filter(function (node) { return !_excludeKeys.includes(node.key); });\n        function loop(excludeKey) {\n            var childrenKeys = flatArr.filter(function (t) { return t.pid === excludeKey; }).map(function (t) { return t.key; });\n            var excludeKeys = childrenKeys;\n            for (var i = 0; i < childrenKeys.length; i++) {\n                var result = loop(childrenKeys[i]);\n                excludeKeys = __spreadArray(__spreadArray([], excludeKeys, true), result, true);\n            }\n            return excludeKeys;\n        }\n        return this.completionIncompleteFlatArr(flatArr, omitArr, {\n            keyAttr: 'key',\n            titleAttr: 'title',\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n    },\n    /**\n     * excludeAntdSelectTreeNodes\n     * @description 排除指定节点后形成一棵树\n     * @param nodes\n     * @param excludeKeys\n     */\n    excludeAntdSelectTreeNodes: function (nodes, excludeKeys) {\n        var flatArr = this.treeToArray(nodes, {\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n        var _excludeKeys = [];\n        for (var i = 0; i < excludeKeys.length; i++) {\n            var result = loop(excludeKeys[i]);\n            _excludeKeys = __spreadArray(__spreadArray([], _excludeKeys, true), result, true);\n        }\n        _excludeKeys = __spreadArray(__spreadArray([], _excludeKeys, true), excludeKeys, true);\n        var omitArr = flatArr.filter(function (node) { return !_excludeKeys.includes(node.key); });\n        function loop(excludeKey) {\n            var childrenKeys = flatArr.filter(function (t) { return t.pid === excludeKey; }).map(function (t) { return t.key; });\n            var excludeKeys = childrenKeys;\n            for (var i = 0; i < childrenKeys.length; i++) {\n                var result = loop(childrenKeys[i]);\n                excludeKeys = __spreadArray(__spreadArray([], excludeKeys, true), result, true);\n            }\n            return excludeKeys;\n        }\n        return this.completionIncompleteFlatArr(flatArr, omitArr, {\n            keyAttr: 'key',\n            titleAttr: 'title',\n            parentIdAttr: 'pid',\n            rootParentId: -1,\n        });\n    },\n};\nexport default TreeUtil;\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","ar","l","Array","slice","concat","TreeUtil","treeToArray","treeData","config","parentIdAttr","rootParentId","result","loop","context","data","parentId","_a","item","push","children","isArray","key","arrayToAntdTree","arr","keyAttr","titleAttr","findNodesByParentId","filter","map","title","isLeaf","properties","roots","forEach","root","Recursion","node","arrayToAntdTreeSelect","value","getAncestor","curNode","find","getDescendants","completionIncompleteFlatArr","treeFlatNodes","incompleteTreeFlatNodes","_this","set","Set","tops","tArr","filterTreeByFlatData","kw","filterAttr","arrayToAntdTreeConfig","filterTree","treeNodes","findNodeByKey","val","findLoop","_b","transformTreeData","childrenAttr","onCallback","getLeafNodes","nodes","getLeafNodesByIndex","indexAttr","leafAttr","getLeafNodeByFlatData","parentIds","includes","getLeafNodeByFlatDataToIndex","getTreeLevel","flat","leafNodes","levels","_loop_1","level","pid","Math","max","getTreeLevelByIndex","_loop_2","getTreeLevelToFlat","flatArr","_loop_3","getTreeLevelByIndexToFlat","_loop_4","excludeAntdTreeNodes","excludeKeys","_excludeKeys","excludeKey","childrenKeys","omitArr","excludeAntdSelectTreeNodes"],"mappings":"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"}