{"version":3,"file":"format.js","sources":["format.js"],"sourcesContent":["// @ts-ignore\r\nimport jsonlint from 'jsonlint';\r\nimport vkbeautify from 'vkbeautify';\r\nimport ObjTree from 'xml-objtree';\r\nvar objTree = new ObjTree();\r\nvar FormatUtil = {\r\n    /**\r\n     * prettierJSON\r\n     * @description 格式化JSON字符串\r\n     * @return string\r\n     * @param _jsonStr\r\n     */\r\n    prettierJSON: function (_jsonStr) {\r\n        if (_jsonStr === void 0) { _jsonStr = ''; }\r\n        var jsonStr = (_jsonStr || '').trim();\r\n        var glue = '  ';\r\n        var result = jsonlint.parse(jsonStr);\r\n        try {\r\n            jsonlint.parse(jsonStr);\r\n            if (result) {\r\n                return JSON.stringify(JSON.parse(jsonStr), null, glue);\r\n            }\r\n        }\r\n        catch (e) {\r\n            return _jsonStr;\r\n        }\r\n    },\r\n    /**\r\n     * compressJSON\r\n     * @description 压缩JSON\r\n     * @return string\r\n     * @param _jsonStr\r\n     */\r\n    compressJSON: function (_jsonStr) {\r\n        if (_jsonStr === void 0) { _jsonStr = ''; }\r\n        var jsonStr = (_jsonStr || '').trim();\r\n        var glue = '';\r\n        var result = jsonlint.parse(jsonStr);\r\n        try {\r\n            jsonlint.parse(jsonStr);\r\n            if (result) {\r\n                return JSON.stringify(JSON.parse(jsonStr), null, glue);\r\n            }\r\n        }\r\n        catch (e) {\r\n            return _jsonStr;\r\n        }\r\n    },\r\n    /**\r\n     * prettierXML\r\n     * @description 格式化XML\r\n     * @param _xmlStr\r\n     * @return xmlStr\r\n     */\r\n    prettierXML: function (_xmlStr) {\r\n        if (_xmlStr === void 0) { _xmlStr = ''; }\r\n        var xmlStr = (_xmlStr || '').trim();\r\n        return vkbeautify.xml(xmlStr);\r\n    },\r\n    /**\r\n     * compressXML\r\n     * @description 压缩XML\r\n     * @param _xmlStr\r\n     * @return xmlStr\r\n     */\r\n    compressXML: function (_xmlStr) {\r\n        if (_xmlStr === void 0) { _xmlStr = ''; }\r\n        var xmlStr = (_xmlStr || '').trim();\r\n        return vkbeautify.xmlmin(xmlStr);\r\n    },\r\n    /**\r\n     * prettierHTML\r\n     * @description 格式化HTML\r\n     * @param _htmlStr\r\n     * @return htmlStr\r\n     */\r\n    prettierHTML: function (_htmlStr) {\r\n        if (_htmlStr === void 0) { _htmlStr = ''; }\r\n        var htmlStr = (_htmlStr || '').trim();\r\n        return vkbeautify.html(htmlStr);\r\n    },\r\n    /**\r\n     * compressHTML\r\n     * @description 压缩HTML\r\n     * @param _htmlStr\r\n     * @return htmlStr\r\n     */\r\n    compressHTML: function (_htmlStr) {\r\n        if (_htmlStr === void 0) { _htmlStr = ''; }\r\n        var htmlStr = (_htmlStr || '').trim();\r\n        return vkbeautify.xmlmin(htmlStr);\r\n    },\r\n    /**\r\n     * prettierCSS\r\n     * @description 格式化CSS\r\n     * @param _cssStr\r\n     * @return cssStr\r\n     */\r\n    prettierCSS: function (_cssStr) {\r\n        if (_cssStr === void 0) { _cssStr = ''; }\r\n        var cssStr = (_cssStr || '').trim();\r\n        return vkbeautify.css(cssStr);\r\n    },\r\n    /**\r\n     * compressCSS\r\n     * @description 压缩CSS\r\n     * @param _cssStr\r\n     * @return cssStr\r\n     */\r\n    compressCSS: function (_cssStr) {\r\n        if (_cssStr === void 0) { _cssStr = ''; }\r\n        var cssStr = (_cssStr || '').trim();\r\n        return vkbeautify.cssmin(cssStr);\r\n    },\r\n    /**\r\n     * prettierSQL\r\n     * @description 格式化SQL\r\n     * @param _sqlStr\r\n     * @return sqlStr\r\n     */\r\n    prettierSQL: function (_sqlStr) {\r\n        if (_sqlStr === void 0) { _sqlStr = ''; }\r\n        var sqlStr = (_sqlStr || '').trim();\r\n        return vkbeautify.sql(sqlStr);\r\n    },\r\n    /**\r\n     * compressSQL\r\n     * @description 压缩SQL\r\n     * @param _sqlStr\r\n     * @return sqlStr\r\n     */\r\n    compressSQL: function (_sqlStr) {\r\n        if (_sqlStr === void 0) { _sqlStr = ''; }\r\n        var sqlStr = (_sqlStr || '').trim();\r\n        return vkbeautify.sqlmin(sqlStr);\r\n    },\r\n    /**\r\n     * jsonToXML\r\n     * @description json转xml\r\n     * @param _jsonStr\r\n     * @return xmlStr\r\n     */\r\n    jsonToXML: function (_jsonStr) {\r\n        if (_jsonStr === void 0) { _jsonStr = ''; }\r\n        return objTree.writeXML(JSON.parse((_jsonStr || '').trim()));\r\n    },\r\n    /**\r\n     * xmlToJSON\r\n     * @description xml转json\r\n     * @param _xmlStr\r\n     * @param prettier\r\n     * @return jsonStr\r\n     */\r\n    xmlToJSON: function (_xmlStr, prettier) {\r\n        if (_xmlStr === void 0) { _xmlStr = ''; }\r\n        if (prettier === void 0) { prettier = true; }\r\n        var tree = objTree.parseXML((_xmlStr || '').trim());\r\n        if (!tree.html) {\r\n            var space = prettier ? '  ' : '';\r\n            return JSON.stringify(tree, null, space);\r\n        }\r\n        return '';\r\n    },\r\n};\r\nexport default FormatUtil;\r\n"],"names":["jsonlint","vkbeautify","ObjTree","objTree","FormatUtil","prettierJSON","_jsonStr","jsonStr","trim","result","parse","JSON","stringify","e","compressJSON","prettierXML","_xmlStr","xmlStr","xml","compressXML","xmlmin","prettierHTML","_htmlStr","htmlStr","html","compressHTML","prettierCSS","_cssStr","cssStr","css","compressCSS","cssmin","prettierSQL","_sqlStr","sqlStr","sql","compressSQL","sqlmin","jsonToXML","writeXML","xmlToJSON","prettier","tree","parseXML"],"mappings":"OACOA,aAAc,kBACdC,eAAgB,oBAChBC,YAAa,cACpB,IAAIC,QAAU,IAAID,QACdE,WAAa,CAObC,aAAc,SAAUC,GAEpB,IAAIC,IADuBD,EAAV,KAAA,IAAbA,EAAkC,GACvBA,IAAY,IAAIE,KAAK,EAEhCC,EAAST,SAASU,MAAMH,CAAO,EACnC,IAEI,GADAP,SAASU,MAAMH,CAAO,EAClBE,EACA,OAAOE,KAAKC,UAAUD,KAAKD,MAAMH,CAAO,EAAG,KALxC,IAKkD,CAK7D,CAFA,MAAOM,GACH,OAAOP,CACX,CACJ,EAOAQ,aAAc,SAAUR,GAEpB,IAAIC,IADuBD,EAAV,KAAA,IAAbA,EAAkC,GACvBA,IAAY,IAAIE,KAAK,EAEhCC,EAAST,SAASU,MAAMH,CAAO,EACnC,IAEI,GADAP,SAASU,MAAMH,CAAO,EAClBE,EACA,OAAOE,KAAKC,UAAUD,KAAKD,MAAMH,CAAO,EAAG,KALxC,EAKkD,CAK7D,CAFA,MAAOM,GACH,OAAOP,CACX,CACJ,EAOAS,YAAa,SAAUC,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAIR,KAAK,EAClC,OAAOP,WAAWiB,IAAID,CAAM,CAChC,EAOAE,YAAa,SAAUH,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAIR,KAAK,EAClC,OAAOP,WAAWmB,OAAOH,CAAM,CACnC,EAOAI,aAAc,SAAUC,GAEhBC,IADuBD,EAAV,KAAA,IAAbA,EAAkC,GACvBA,IAAY,IAAId,KAAK,EACpC,OAAOP,WAAWuB,KAAKD,CAAO,CAClC,EAOAE,aAAc,SAAUH,GAEhBC,IADuBD,EAAV,KAAA,IAAbA,EAAkC,GACvBA,IAAY,IAAId,KAAK,EACpC,OAAOP,WAAWmB,OAAOG,CAAO,CACpC,EAOAG,YAAa,SAAUC,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAInB,KAAK,EAClC,OAAOP,WAAW4B,IAAID,CAAM,CAChC,EAOAE,YAAa,SAAUH,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAInB,KAAK,EAClC,OAAOP,WAAW8B,OAAOH,CAAM,CACnC,EAOAI,YAAa,SAAUC,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAIzB,KAAK,EAClC,OAAOP,WAAWkC,IAAID,CAAM,CAChC,EAOAE,YAAa,SAAUH,GAEfC,IADsBD,EAAV,KAAA,IAAZA,EAAgC,GACtBA,IAAW,IAAIzB,KAAK,EAClC,OAAOP,WAAWoC,OAAOH,CAAM,CACnC,EAOAI,UAAW,SAAUhC,GAEjB,OADiB,KAAA,IAAbA,IAAuBA,EAAW,IAC/BH,QAAQoC,SAAS5B,KAAKD,OAAOJ,GAAY,IAAIE,KAAK,CAAC,CAAC,CAC/D,EAQAgC,UAAW,SAAUxB,EAASyB,GAET,KAAA,IAAbA,IAAuBA,EAAW,CAAA,GAClCC,EAAOvC,QAAQwC,WAFO3B,EAAV,KAAA,IAAZA,EAAgC,GAEPA,IAAW,IAAIR,KAAK,CAAC,EAClD,OAAKkC,EAAKlB,KAIH,GAFIb,KAAKC,UAAU8B,EAAM,KADhBD,EAAW,KAAO,EACS,CAG/C,CACJ,iBACerC"}