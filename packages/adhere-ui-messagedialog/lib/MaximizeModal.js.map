{"version":3,"file":"MaximizeModal.js","sources":["MaximizeModal.js"],"sourcesContent":["\"use strict\";\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = void 0 && (void 0).__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = void 0 && (void 0).__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.selectorPrefix = void 0;\nvar classnames_1 = __importDefault(require(\"classnames\"));\nvar react_1 = __importStar(require(\"react\"));\nvar react_draggable_1 = __importDefault(require(\"react-draggable\"));\nvar icons_1 = require(\"@ant-design/icons\");\nvar adhere_ui_space_1 = __importDefault(require(\"@baifendian/adhere-ui-space\"));\nvar Modal_1 = __importDefault(require(\"./Modal\"));\nexports.selectorPrefix = 'adhere-ui-message-dialog-maximize-modal';\n/**\n * MaximizeModalDialog\n * @description 可以最大化的Modal\n * @param props\n * @constructor\n */\nvar MaximizeModalDialog = (0, react_1.memo)(function (props) {\n  var _a = props.config,\n    title = _a.title,\n    closeIcon = _a.closeIcon,\n    restConfig = __rest(_a, [\"title\", \"closeIcon\"]),\n    restProps = __rest(props, [\"config\"]);\n  var draggableRef = (0, react_1.useRef)(null);\n  var _b = (0, react_1.useState)(false),\n    isMaximize = _b[0],\n    setMaximize = _b[1];\n  var _c = (0, react_1.useState)(true),\n    draggableDisabled = _c[0],\n    setDraggableDisabled = _c[1];\n  var _d = (0, react_1.useState)({\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0\n    }),\n    bounds = _d[0],\n    setBounds = _d[1];\n  var modalClassName = (0, react_1.useMemo)(function () {\n    var _a;\n    var _b;\n    return (0, classnames_1.default)(\"\".concat(exports.selectorPrefix), (_b = restConfig.className) !== null && _b !== void 0 ? _b : '', (_a = {}, _a[\"\".concat(exports.selectorPrefix, \"-maximize\")] = isMaximize, _a));\n  }, [isMaximize]);\n  var modalRender = (0, react_1.useCallback)(function (_modal) {\n    return renderDraggableModal(_modal);\n  }, [isMaximize, bounds, draggableDisabled]);\n  /**\n   * renderDraggableModal\n   * @param modal\n   */\n  function renderDraggableModal(modal) {\n    return react_1.default.createElement(react_draggable_1.default, {\n      disabled: isMaximize ? true : draggableDisabled,\n      bounds: bounds,\n      nodeRef: draggableRef,\n      onStart: onDraggableStart\n    }, renderModalInner(modal));\n  }\n  /**\n   * renderClose\n   */\n  function renderClose() {\n    if (closeIcon) {\n      return react_1.default.createElement(\"div\", {\n        className: \"\".concat(exports.selectorPrefix, \"-header-action\"),\n        onClick: onClose\n      }, closeIcon);\n    }\n    return react_1.default.createElement(icons_1.CloseOutlined, {\n      rev: \"\",\n      className: \"\".concat(exports.selectorPrefix, \"-header-action\"),\n      onClick: onClose\n    });\n  }\n  /**\n   * renderModalInner\n   * @param modal\n   */\n  function renderModalInner(modal) {\n    var _a;\n    return react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-inner\"),\n      ref: draggableRef\n    }, react_1.default.createElement(\"div\", {\n      className: (0, classnames_1.default)(\"\".concat(exports.selectorPrefix, \"-header\"), (_a = {}, _a[\"\".concat(exports.selectorPrefix, \"-header-draggable\")] = !isMaximize, _a)),\n      onMouseOver: function () {\n        if (isMaximize) return;\n        if (draggableDisabled) {\n          setDraggableDisabled(false);\n        }\n      },\n      onMouseOut: function () {\n        if (isMaximize) return;\n        setDraggableDisabled(true);\n      }\n    }, react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-header-title\")\n    }, title), react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-header-actions\")\n    }, react_1.default.createElement(adhere_ui_space_1.default.Group, {\n      direction: \"horizontal\",\n      size: 5\n    }, isMaximize && react_1.default.createElement(icons_1.BlockOutlined, {\n      rev: \"\",\n      className: \"\".concat(exports.selectorPrefix, \"-header-action\"),\n      onClick: onRevert\n    }), !isMaximize && react_1.default.createElement(icons_1.BorderOutlined, {\n      rev: \"\",\n      className: \"\".concat(exports.selectorPrefix, \"-header-action\"),\n      onClick: onMaximize\n    }), renderClose()))), react_1.default.createElement(\"div\", {\n      className: \"\".concat(exports.selectorPrefix, \"-body\")\n    }, modal));\n  }\n  /**\n   * onDraggableStart\n   * @param _event\n   * @param uiData\n   */\n  function onDraggableStart(_event, uiData) {\n    var _a, _b;\n    var _c = window.document.documentElement,\n      clientWidth = _c.clientWidth,\n      clientHeight = _c.clientHeight;\n    var targetRect = (_b = (_a = draggableRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect) === null || _b === void 0 ? void 0 : _b.call(_a);\n    if (!targetRect) {\n      return;\n    }\n    setBounds({\n      left: -targetRect.left + uiData.x,\n      right: clientWidth - (targetRect.right - uiData.x),\n      top: -targetRect.top + uiData.y,\n      bottom: clientHeight - (targetRect.bottom - uiData.y)\n    });\n  }\n  function revert() {\n    setMaximize(false);\n  }\n  function maximize() {\n    setMaximize(true);\n  }\n  function close() {\n    var _a;\n    (_a = restProps === null || restProps === void 0 ? void 0 : restProps.close) === null || _a === void 0 ? void 0 : _a.call(restProps);\n  }\n  function onClose() {\n    close();\n  }\n  function onRevert() {\n    revert();\n  }\n  function onMaximize() {\n    maximize();\n  }\n  return react_1.default.createElement(Modal_1.default, __assign({}, restProps, {\n    config: __assign(__assign({}, restConfig !== null && restConfig !== void 0 ? restConfig : {}), {\n      className: modalClassName,\n      modalRender: modalRender\n    })\n  }));\n});\nMaximizeModalDialog.displayName = 'MaximizeModalDialog';\nexports.default = MaximizeModalDialog;"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__importDefault","default","classnames_1","exports","selectorPrefix","require","react_1","react_draggable_1","icons_1","adhere_ui_space_1","Modal_1","MaximizeModalDialog","memo","props","_a","config","title","closeIcon","restConfig","restProps","draggableRef","useRef","_b","useState","isMaximize","setMaximize","_c","draggableDisabled","setDraggableDisabled","_d","left","top","bottom","right","bounds","setBounds","modalClassName","useMemo","concat","className","modalRender","useCallback","_modal","createElement","disabled","nodeRef","onStart","onDraggableStart","modal","ref","onMouseOver","onMouseOut","Group","direction","size","BlockOutlined","rev","onClick","onRevert","BorderOutlined","onMaximize","onClose","CloseOutlined","_event","uiData","window","document","documentElement","clientWidth","clientHeight","targetRect","current","getBoundingClientRect","x","y","close","displayName"],"mappings":"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"}