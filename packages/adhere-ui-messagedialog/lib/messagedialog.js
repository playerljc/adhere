var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var o={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(o[i[r]]=e[i[r]]);return o};import React from"react";import ReactDOM from"react-dom";import{ConfigProvider as ConfigProvider,Button as Button,Form as Form}from"antd";import intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";import FormItemCreator from"@baifendian/adhere-ui-formitemcreator";import Actions from"./actions";import Emitter from"./emitter";import ModalDialog from"./modal";import{selectorPrefix as selectorPrefix}from"./modal";var DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,PromptLayout={labelCol:{span:6},wrapperCol:{span:18}};function renderByIcon(e,t){return React.createElement("div",{className:selectorPrefix+"-renderByIcon"},React.createElement("div",{className:selectorPrefix+"-renderByIcon-fixed"},e),React.createElement("div",{className:selectorPrefix+"-renderByIcon-auto"},t))}var MessageDialogFactory={Confirm:function(e){var t=e.title,o=e.text,r=void 0===o?null:o,i=e.width,n=e.zIndex,a=e.local,o=e.icon,o=void 0===o?null:o,c=e.onSuccess,l=this.Modal({config:{title:t,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===n?1e3:n,footer:[React.createElement(Button,{key:"submit",type:"primary",title:intl.v("确定"),onClick:function(){c?c().then(function(){Emitter.trigger(Actions.close,l)}):Emitter.trigger(Actions.close,l)}},intl.v("确定"))]},local:a,children:o?renderByIcon(o,r):r})},Alert:function(e){var t=e.title,o=e.text,r=void 0===o?null:o,i=e.width,n=e.zIndex,o=e.local,e=e.icon;this.Modal({config:{title:t,centered:!0,width:(void 0===i?300:i)||300,closable:!1,zIndex:void 0===n?1e3:n},local:o,children:e?renderByIcon(e,r):r})},Prompt:function(e){var t=e.title,o=e.config,r=e.layout,i=void 0===r?PromptLayout:r,n=e.width,a=void 0===n?300:n,r=e.zIndex,n=void 0===r?1e3:r,r=e.local,c=e.onSuccess,l=React.createRef(),s=this.Modal({config:{title:t,centered:!0,width:a||300,closable:!1,zIndex:n,footer:[React.createElement(Button,{key:"submit",type:"primary",title:intl.v("确定"),onClick:function(){c?l.current.validateFields().then(function(e){c(e.value).then(function(){Emitter.trigger(Actions.close,s)})}):Emitter.trigger(Actions.close,s)}},intl.v("确定"))]},local:r,children:React.createElement(Form,{name:"Prompt",ref:l,style:{width:"100%"}},React.createElement(FormItemCreator,{columns:[__assign(__assign({},o||{label:"normal",type:FormItemCreator.TEXT,initialValue:""}),{name:"value"})],layout:i||PromptLayout}))})},InputPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.INPUT})}))},TextAreaPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.TEXTAREA})}))},PassWordPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.PASSWORD})}))},NumberPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.NUMBER})}))},Modal:function(e){var t=e.config,o=e.children,r=void 0===o?null:o,i=e.defaultCloneBtn,o=void 0===i||i,i=e.local,e=void 0===i?DEFAULT_LOCAL:i,i=Object.assign({maskClosable:!1},void 0===t?{}:t),t=document.createElement("div");return ReactDOM.render(React.createElement(ConfigProvider,{locale:LOCAL[e||DEFAULT_LOCAL]},React.createElement(ModalDialog,{parent:t,config:i,cloneBtn:o},r)),t),document.body.appendChild(t),t},close:function(e){Emitter.trigger(Actions.close,e)}};export default MessageDialogFactory;
//# sourceMappingURL=messagedialog.js.map
