{"version":3,"file":"messagedialog.js","sources":["messagedialog.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { ConfigProvider, Button } from 'antd';\r\nimport intl from '@baifendian/adhere-util-intl';\r\n// @ts-ignore\r\nimport Resource from '@baifendian/adhere-util-resource';\r\nimport Actions from './actions';\r\nimport Emitter from './emitter';\r\nimport ModalDialog from './modal';\r\nimport { selectorPrefix } from './modal';\r\nvar DEFAULT_LOCAL = 'zh_CN';\r\nvar LOCAL = Resource.Dict.value.LocalsAntd;\r\n/**\r\n * renderByIcon\r\n * @param icon\r\n * @param text\r\n * @return React.ReactElement\r\n */\r\nfunction renderByIcon(icon, text) {\r\n    return (React.createElement(\"div\", { className: selectorPrefix + \"-renderByIcon\" },\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-renderByIcon-fixed\" }, icon),\r\n        React.createElement(\"div\", { className: selectorPrefix + \"-renderByIcon-auto\" }, text)));\r\n}\r\n// @ts-ignore\r\n// @ts-ignore\r\nexport default {\r\n    /**\r\n     * Confirm\r\n     * @param title {String | ReactNode}\r\n     * @param text {String | ReactNode}\r\n     * @param width {number}\r\n     * @param zIndex {number}\r\n     * @param icon {React.ReactElement}\r\n     * @param {Function} - onSuccess\r\n     */\r\n    Confirm: function (_a) {\r\n        var title = _a.title, _b = _a.text, text = _b === void 0 ? null : _b, _c = _a.width, width = _c === void 0 ? 300 : _c, _d = _a.zIndex, zIndex = _d === void 0 ? 1000 : _d, local = _a.local, _e = _a.icon, icon = _e === void 0 ? null : _e, onSuccess = _a.onSuccess;\r\n        var el = this.Modal({\r\n            config: {\r\n                title: title,\r\n                centered: true,\r\n                width: width || 300,\r\n                closable: false,\r\n                zIndex: zIndex,\r\n                // icon,\r\n                footer: [\r\n                    React.createElement(Button, { key: \"submit\", type: \"primary\", title: intl.v('确定'), onClick: function () {\r\n                            if (onSuccess) {\r\n                                onSuccess().then(function () {\r\n                                    Emitter.trigger(Actions.close, el);\r\n                                });\r\n                            }\r\n                            else {\r\n                                Emitter.trigger(Actions.close, el);\r\n                            }\r\n                        } }, intl.v('确定')),\r\n                ],\r\n            },\r\n            local: local,\r\n            // @ts-ignore\r\n            children: icon ? renderByIcon(icon, text) : text,\r\n        });\r\n    },\r\n    /**\r\n     * Alert\r\n     * @param title - {String | ReactNode}\r\n     * @param text - {String | ReactNode}\r\n     * @param width - {number}\r\n     * @param local\r\n     * @param zIndex\r\n     * @param icon - {React.ReactElement | null}\r\n     */\r\n    Alert: function (_a) {\r\n        var title = _a.title, _b = _a.text, text = _b === void 0 ? null : _b, _c = _a.width, width = _c === void 0 ? 300 : _c, _d = _a.zIndex, zIndex = _d === void 0 ? 1000 : _d, local = _a.local, icon = _a.icon;\r\n        this.Modal({\r\n            config: {\r\n                title: title,\r\n                centered: true,\r\n                width: width || 300,\r\n                closable: false,\r\n                zIndex: zIndex,\r\n            },\r\n            local: local,\r\n            // @ts-ignore\r\n            children: icon ? renderByIcon(icon, text) : text,\r\n        });\r\n    },\r\n    /**\r\n     *  Modal\r\n     *  @param {Object} - config\r\n     *  @param {String | ReactElement} - title\r\n     *  @param {Boolean} - maskClosable 是否点击遮罩关闭 默认是false\r\n     *  @param {Number} - zIndex 层级大小\r\n     *  @param {String} - className 容器类名\r\n     *  @param {String} - wrapClassName 包裹容器类名\r\n     *  @param {Boolean} - centered 垂直居中展示 Modal 默认false\r\n     *  @param {String | Number} - width 宽度\r\n     *  @param {Boolean} - closable 是否显示关闭 默认true\r\n     *  @param {Array<ReactNode>} - footer\r\n     *  @param {ReactNode} - children\r\n     *  @param defaultCloneBtn\r\n     */\r\n    Modal: function (_a) {\r\n        var _b = _a.config, config = _b === void 0 ? {} : _b, _c = _a.children, children = _c === void 0 ? null : _c, _d = _a.defaultCloneBtn, defaultCloneBtn = _d === void 0 ? true : _d, _e = _a.local, local = _e === void 0 ? DEFAULT_LOCAL : _e;\r\n        var modalConfig = Object.assign({\r\n            maskClosable: false,\r\n        }, config);\r\n        var el = document.createElement('div');\r\n        // @ts-ignore\r\n        ReactDOM.render(React.createElement(ConfigProvider, { locale: LOCAL[local || DEFAULT_LOCAL] },\r\n            React.createElement(ModalDialog, { parent: el, config: modalConfig, cloneBtn: defaultCloneBtn }, children)), el);\r\n        document.body.appendChild(el);\r\n        return el;\r\n    },\r\n    /**\r\n     * close\r\n     * @param el\r\n     */\r\n    close: function (el) {\r\n        Emitter.trigger(Actions.close, el);\r\n    },\r\n};\r\n"],"names":["React","ReactDOM","ConfigProvider","Button","intl","Resource","Actions","Emitter","ModalDialog","selectorPrefix","DEFAULT_LOCAL","LOCAL","Dict","value","LocalsAntd","renderByIcon","icon","text","createElement","className","Confirm","_a","title","_b","_c","width","_d","zIndex","local","_e","onSuccess","el","this","Modal","config","centered","closable","footer","key","type","v","onClick","then","trigger","close","children","Alert","defaultCloneBtn","modalConfig","Object","assign","maskClosable","document","render","locale","parent","cloneBtn","body","appendChild"],"mappings":"OAAOA,yBACAC,gCACEC,iCAAgBC,mCAClBC,+CAEAC,uDACAC,+BACAC,+BACAC,iCACEC,+CACT,IAAIC,cAAgB,QAChBC,MAAQN,SAASO,KAAKC,MAAMC,WAOhC,SAASC,aAAaC,EAAMC,GACxB,OAAQjB,MAAMkB,cAAc,MAAO,CAAEC,UAAWV,eAAiB,iBAC7DT,MAAMkB,cAAc,MAAO,CAAEC,UAAWV,eAAiB,uBAAyBO,GAClFhB,MAAMkB,cAAc,MAAO,CAAEC,UAAWV,eAAiB,sBAAwBQ,kBAI1E,CAUXG,QAAS,SAAUC,GACf,IAAIC,EAAQD,EAAGC,MAAOC,EAAKF,EAAGJ,KAAMA,OAAc,IAAPM,EAAgB,KAAOA,EAAIC,EAAKH,EAAGI,MAAyCC,EAAKL,EAAGM,OAA4CC,EAAQP,EAAGO,MAAOC,EAAKR,EAAGL,KAAMA,OAAc,IAAPa,EAAgB,KAAOA,EAAIC,EAAYT,EAAGS,UACxPC,EAAKC,KAAKC,MAAM,CAChBC,OAAQ,CACJZ,MAAOA,EACPa,UAAU,EACVV,YAL4F,IAAPD,EAAgB,IAAMA,IAK3F,IAChBY,UAAU,EACVT,YAP+I,IAAPD,EAAgB,IAAOA,EAS/JW,OAAQ,CACJrC,MAAMkB,cAAcf,OAAQ,CAAEmC,IAAK,SAAUC,KAAM,UAAWjB,MAAOlB,KAAKoC,EAAE,MAAOC,QAAS,WAChFX,EACAA,IAAYY,KAAK,WACbnC,QAAQoC,QAAQrC,QAAQsC,MAAOb,KAInCxB,QAAQoC,QAAQrC,QAAQsC,MAAOb,KAElC3B,KAAKoC,EAAE,SAGxBZ,MAAOA,EAEPiB,SAAU7B,EAAOD,aAAaC,EAAMC,GAAQA,KAYpD6B,MAAO,SAAUzB,GACb,IAAIC,EAAQD,EAAGC,MAAOC,EAAKF,EAAGJ,KAAMA,OAAc,IAAPM,EAAgB,KAAOA,EAAIC,EAAKH,EAAGI,MAAyCC,EAAKL,EAAGM,OAA4CC,EAAQP,EAAGO,MAAOZ,EAAOK,EAAGL,KACvMgB,KAAKC,MAAM,CACPC,OAAQ,CACJZ,MAAOA,EACPa,UAAU,EACVV,YAL4F,IAAPD,EAAgB,IAAMA,IAK3F,IAChBY,UAAU,EACVT,YAP+I,IAAPD,EAAgB,IAAOA,GASnKE,MAAOA,EAEPiB,SAAU7B,EAAOD,aAAaC,EAAMC,GAAQA,KAkBpDgB,MAAO,SAAUZ,GACb,IAAIE,EAAKF,EAAGa,OAA0CV,EAAKH,EAAGwB,SAAUA,OAAkB,IAAPrB,EAAgB,KAAOA,EAAIE,EAAKL,EAAG0B,gBAAiBA,OAAyB,IAAPrB,GAAuBA,EAAIG,EAAKR,EAAGO,MAAOA,OAAe,IAAPC,EAAgBnB,cAAgBmB,EACvOmB,EAAcC,OAAOC,OAAO,CAC5BC,cAAc,QAFkB,IAAP5B,EAAgB,GAAKA,GAI9CQ,EAAKqB,SAASlC,cAAc,OAKhC,OAHAjB,SAASoD,OAAOrD,MAAMkB,cAAchB,eAAgB,CAAEoD,OAAQ3C,MAAMiB,GAASlB,gBACzEV,MAAMkB,cAAcV,YAAa,CAAE+C,OAAQxB,EAAIG,OAAQc,EAAaQ,SAAUT,GAAmBF,IAAYd,GACjHqB,SAASK,KAAKC,YAAY3B,GACnBA,GAMXa,MAAO,SAAUb,GACbxB,QAAQoC,QAAQrC,QAAQsC,MAAOb"}