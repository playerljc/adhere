{"version":3,"file":"messagedialog.js","sources":["messagedialog.js"],"sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar antd_1 = require(\"antd\");\n\nvar react_1 = tslib_1.__importDefault(require(\"react\"));\n\nvar react_dom_1 = tslib_1.__importDefault(require(\"react-dom\"));\n\nvar adhere_ui_formitemcreator_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-ui-formitemcreator\"));\n\nvar adhere_util_intl_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-intl\"));\n\nvar adhere_util_resource_1 = tslib_1.__importDefault(require(\"@baifendian/adhere-util-resource\"));\n\nvar modal_1 = tslib_1.__importStar(require(\"./modal\"));\n\nvar DEFAULT_LOCAL = 'zh_CN';\nvar LOCAL = adhere_util_resource_1.default.Dict.value.LocalsAntd.value;\nvar PromptLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 18\n  }\n};\n/**\n * renderByIcon\n * @param icon\n * @param text\n * @return React.ReactElement\n */\n\nfunction renderByIcon(icon, text) {\n  return react_1.default.createElement(\"div\", {\n    className: \"\".concat(modal_1.selectorPrefix, \"-renderByIcon\")\n  }, react_1.default.createElement(\"div\", {\n    className: \"\".concat(modal_1.selectorPrefix, \"-renderByIcon-fixed\")\n  }, icon), react_1.default.createElement(\"div\", {\n    className: \"\".concat(modal_1.selectorPrefix, \"-renderByIcon-auto\")\n  }, text));\n}\n\nvar MessageDialogFactory = {\n  /**\n   * Confirm\n   * @param title {String | ReactNode}\n   * @param text {String | ReactNode}\n   * @param width {number}\n   * @param zIndex {number}\n   * @param icon {React.ReactElement}\n   * @param {Function} - onSuccess\n   */\n  Confirm: function Confirm(_a) {\n    var title = _a.title,\n        _b = _a.text,\n        text = _b === void 0 ? null : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        _e = _a.icon,\n        icon = _e === void 0 ? null : _e,\n        onSuccess = _a.onSuccess;\n    var close = this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex,\n        footer: [react_1.default.createElement(antd_1.Button, {\n          key: \"submit\",\n          type: \"primary\",\n          title: adhere_util_intl_1.default.v('确定'),\n          onClick: function onClick() {\n            if (onSuccess) {\n              onSuccess().then(function () {\n                return close();\n              });\n            } else {\n              close();\n            }\n          }\n        }, adhere_util_intl_1.default.v('确定'))]\n      },\n      local: local,\n      children: icon ? renderByIcon(icon, text) : text\n    }).close;\n  },\n\n  /**\n   * Alert\n   * @param title - {String | ReactNode}\n   * @param text - {String | ReactNode}\n   * @param width - {number}\n   * @param local\n   * @param zIndex\n   * @param icon - {React.ReactElement | null}\n   */\n  Alert: function Alert(_a) {\n    var title = _a.title,\n        _b = _a.text,\n        text = _b === void 0 ? null : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        icon = _a.icon;\n    this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex\n      },\n      local: local,\n      children: icon ? renderByIcon(icon, text) : text\n    });\n  },\n\n  /**\n   * Prompt\n   * @param title\n   * @param config\n   * @param layout\n   * @param width\n   * @param zIndex\n   * @param local\n   * @param onSuccess\n   * @constructor\n   */\n  Prompt: function Prompt(_a) {\n    var title = _a.title,\n        config = _a.config,\n        _b = _a.layout,\n        layout = _b === void 0 ? PromptLayout : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        onSuccess = _a.onSuccess;\n    var ref = react_1.default.createRef();\n    var close = this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex,\n        footer: [react_1.default.createElement(antd_1.Button, {\n          key: \"submit\",\n          type: \"primary\",\n          title: adhere_util_intl_1.default.v('确定'),\n          onClick: function onClick() {\n            if (onSuccess) {\n              ref.current.validateFields().then(function (values) {\n                onSuccess(values === null || values === void 0 ? void 0 : values.value).then(function () {\n                  return close();\n                });\n              });\n            } else {\n              close();\n            }\n          }\n        }, adhere_util_intl_1.default.v('确定'))]\n      },\n      local: local,\n      children: react_1.default.createElement(antd_1.Form, {\n        name: \"Prompt\",\n        ref: ref,\n        style: {\n          width: '100%'\n        }\n      }, react_1.default.createElement(adhere_ui_formitemcreator_1.default, {\n        columns: [tslib_1.__assign(tslib_1.__assign({}, config || {\n          label: 'normal',\n          type: adhere_ui_formitemcreator_1.default.TEXT,\n          initialValue: ''\n        }), {\n          name: 'value'\n        })],\n        layout: layout || PromptLayout\n      }))\n    }).close;\n  },\n  InputPrompt: function InputPrompt(_a) {\n    var config = _a.config,\n        params = tslib_1.__rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(tslib_1.__assign(tslib_1.__assign({}, params), {\n      config: tslib_1.__assign(tslib_1.__assign({}, config), {\n        type: adhere_ui_formitemcreator_1.default.INPUT\n      })\n    }));\n  },\n  TextAreaPrompt: function TextAreaPrompt(_a) {\n    var config = _a.config,\n        params = tslib_1.__rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(tslib_1.__assign(tslib_1.__assign({}, params), {\n      config: tslib_1.__assign(tslib_1.__assign({}, config), {\n        type: adhere_ui_formitemcreator_1.default.TEXTAREA\n      })\n    }));\n  },\n  PassWordPrompt: function PassWordPrompt(_a) {\n    var config = _a.config,\n        params = tslib_1.__rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(tslib_1.__assign(tslib_1.__assign({}, params), {\n      config: tslib_1.__assign(tslib_1.__assign({}, config), {\n        type: adhere_ui_formitemcreator_1.default.PASSWORD\n      })\n    }));\n  },\n  NumberPrompt: function NumberPrompt(_a) {\n    var config = _a.config,\n        params = tslib_1.__rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(tslib_1.__assign(tslib_1.__assign({}, params), {\n      config: tslib_1.__assign(tslib_1.__assign({}, config), {\n        type: adhere_ui_formitemcreator_1.default.NUMBER\n      })\n    }));\n  },\n\n  /**\n   *  Modal\n   *  @param {Object} - config\n   *  @param {String | ReactElement} - title\n   *  @param {Boolean} - maskClosable 是否点击遮罩关闭 默认是false\n   *  @param {Number} - zIndex 层级大小\n   *  @param {String} - className 容器类名\n   *  @param {String} - wrapClassName 包裹容器类名\n   *  @param {Boolean} - centered 垂直居中展示 Modal 默认false\n   *  @param {String | Number} - width 宽度\n   *  @param {Boolean} - closable 是否显示关闭 默认true\n   *  @param {Array<ReactNode>} - footer\n   *  @param {ReactNode} - children\n   *  @param defaultCloseBtn\n   */\n  Modal: function Modal(_a) {\n    var _b = _a.config,\n        config = _b === void 0 ? {} : _b,\n        _c = _a.children,\n        children = _c === void 0 ? null : _c,\n        _d = _a.defaultCloseBtn,\n        defaultCloseBtn = _d === void 0 ? true : _d,\n        _e = _a.local,\n        local = _e === void 0 ? DEFAULT_LOCAL : _e;\n    var modalConfig = Object.assign({\n      maskClosable: false\n    }, config);\n    var el = document.createElement('div');\n\n    function close() {\n      var _a, _b;\n\n      var flag = react_dom_1.default.unmountComponentAtNode(el);\n\n      if (flag) {\n        (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n      }\n    }\n\n    react_dom_1.default.render(react_1.default.createElement(antd_1.ConfigProvider, {\n      locale: LOCAL[local || DEFAULT_LOCAL]\n    }, react_1.default.createElement(modal_1.default, {\n      close: close,\n      config: modalConfig,\n      closeBtn: defaultCloseBtn\n    }, children)), el);\n    document.body.appendChild(el);\n    return {\n      el: el,\n      close: close\n    };\n  },\n\n  /**\n   * close\n   * @param el\n   */\n  close: function close(el) {\n    var _a, _b;\n\n    var flag = react_dom_1.default.unmountComponentAtNode(el);\n\n    if (flag) {\n      (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n    }\n  }\n};\nexports.default = MessageDialogFactory;"],"names":["require","Object","defineProperty","exports","value","tslib_1","antd_1","react_1","__importDefault","react_dom_1","adhere_ui_formitemcreator_1","adhere_util_intl_1","adhere_util_resource_1","modal_1","__importStar","DEFAULT_LOCAL","LOCAL","default","Dict","LocalsAntd","PromptLayout","labelCol","span","wrapperCol","renderByIcon","icon","text","createElement","className","concat","selectorPrefix","MessageDialogFactory","Confirm","_a","title","_b","_c","width","_d","zIndex","local","_e","onSuccess","close","this","Modal","config","centered","closable","footer","Button","key","type","v","onClick","then","children","Alert","Prompt","layout","ref","createRef","current","validateFields","values","Form","name","style","columns","__assign","label","TEXT","initialValue","InputPrompt","params","__rest","INPUT","TextAreaPrompt","TEXTAREA","PassWordPrompt","PASSWORD","NumberPrompt","NUMBER","defaultCloseBtn","modalConfig","assign","maskClosable","el","document","unmountComponentAtNode","parentElement","removeChild","call","render","ConfigProvider","locale","closeBtn","body","appendChild"],"mappings":"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"}