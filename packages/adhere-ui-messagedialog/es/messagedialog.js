import _ConfigProvider from"antd/es/config-provider";import _Form from"antd/es/form";import _Button from"antd/es/button";import"core-js/modules/es.object.assign.js";import{__assign,__rest}from"tslib";import React from"react";import ReactDOM from"react-dom";import FormItemCreator from"@baifendian/adhere-ui-formitemcreator";import Intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";import ModalDialog,{selectorPrefix}from"./modal";var DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,PromptLayout={labelCol:{span:6},wrapperCol:{span:18}};function renderByIcon(e,t){return React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon")},React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-fixed")},e),React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-auto")},t))}var MessageDialogFactory={Confirm:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,r=e.zIndex,a=e.local,i=e.icon,i=void 0===i?null:i,l=e.onSuccess,c=this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===r?1e3:r,footer:[React.createElement(_Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){l?l().then(function(){return c()}):c()}},Intl.v("确定"))]},local:a,children:i?renderByIcon(i,o):o}).close},Alert:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,r=e.zIndex,a=e.local,e=e.icon;this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===r?1e3:r},local:a,children:e?renderByIcon(e,o):o})},Prompt:function(e){var t=e.title,o=e.config,n=e.layout,n=void 0===n?PromptLayout:n,r=e.width,a=e.zIndex,i=e.local,l=e.onSuccess,c=React.createRef(),s=this.Modal({config:{title:t,centered:!0,width:(void 0===r?300:r)||300,closable:!1,zIndex:void 0===a?1e3:a,footer:[React.createElement(_Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){l?c.current.validateFields().then(function(e){l(null==e?void 0:e.value).then(function(){return s()})}):s()}},Intl.v("确定"))]},local:i,children:React.createElement(_Form,{name:"Prompt",ref:c,style:{width:"100%"}},React.createElement(FormItemCreator,{columns:[__assign(__assign({},o||{label:"normal",type:FormItemCreator.TEXT,initialValue:""}),{name:"value"})],layout:n||PromptLayout}))}).close},InputPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.INPUT})}))},TextAreaPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.TEXTAREA})}))},PassWordPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.PASSWORD})}))},NumberPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.NUMBER})}))},Modal:function(e){var t=e.config,o=e.children,o=void 0===o?null:o,n=e.defaultCloseBtn,n=void 0===n||n,e=e.local,e=void 0===e?DEFAULT_LOCAL:e,t=Object.assign({maskClosable:!1},void 0===t?{}:t),r=document.createElement("div");function a(){var e,t;ReactDOM.unmountComponentAtNode(r)&&null!=(t=null==(e=null==r?void 0:r.parentElement)?void 0:e.removeChild)&&t.call(e,r)}return ReactDOM.render(React.createElement(_ConfigProvider,{locale:LOCAL[e||DEFAULT_LOCAL]},React.createElement(ModalDialog,{close:a,config:t,closeBtn:n},o)),r),document.body.appendChild(r),{el:r,close:a}},close:function(e){var t,o;ReactDOM.unmountComponentAtNode(e)&&null!=(o=null==(t=null==e?void 0:e.parentElement)?void 0:t.removeChild)&&o.call(t,e)}};export default MessageDialogFactory;
//# sourceMappingURL=messagedialog.js.map
