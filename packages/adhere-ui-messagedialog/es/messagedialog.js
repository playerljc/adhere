import _ConfigProvider from"antd/es/config-provider";import _Form from"antd/es/form";import _Button from"antd/es/button";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var o={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o};import React from"react";import ReactDOM from"react-dom/client";import FormItemCreator from"@baifendian/adhere-ui-formitemcreator";import Intl from"@baifendian/adhere-util-intl";import{DEFAULT_LOCAL,DEFAULT_WIDTH,DEFAULT_ZINDEX,LOCAL,PROMPT_LAYOUT}from"./constent";import ModalDialog,{selectorPrefix}from"./modal";var antdConfigProviderProps={};function renderByIcon(e,t){return React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon")},React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-fixed")},e),React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-auto")},t))}var MessageDialogHandlers=new WeakMap,MessageDialogFactory={setAntdConfigProviderProps:function(e){antdConfigProviderProps=e},Confirm:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,r=e.zIndex,i=e.local,a=e.icon,a=void 0===a?null:a,c=e.onSuccess,l=this.Modal({config:{title:t,centered:!0,width:(void 0===n?DEFAULT_WIDTH:n)||DEFAULT_WIDTH,closable:!1,zIndex:void 0===r?DEFAULT_ZINDEX:r,footer:[React.createElement(_Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){c?c().then(function(){return l()}):l()}},Intl.v("确定"))]},local:i,children:a?renderByIcon(a,o):o}).close},Alert:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,r=e.zIndex,i=e.local,e=e.icon;this.Modal({config:{title:t,centered:!0,width:(void 0===n?DEFAULT_WIDTH:n)||DEFAULT_WIDTH,closable:!1,zIndex:void 0===r?DEFAULT_ZINDEX:r},local:i,children:e?renderByIcon(e,o):o})},Prompt:function(e){var t=e.title,o=e.config,n=e.layout,n=void 0===n?PROMPT_LAYOUT:n,r=e.width,i=e.zIndex,a=e.local,c=e.onSuccess,l=React.createRef(),s=this.Modal({config:{title:t,centered:!0,width:(void 0===r?DEFAULT_WIDTH:r)||DEFAULT_WIDTH,closable:!1,zIndex:void 0===i?DEFAULT_ZINDEX:i,footer:[React.createElement(_Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){c?l.current.validateFields().then(function(e){c(null==e?void 0:e.value).then(function(){return s()})}):s()}},Intl.v("确定"))]},local:a,children:React.createElement(_Form,{name:"Prompt",ref:l,style:{width:"100%"}},React.createElement(FormItemCreator,{columns:[__assign(__assign({},o||{label:"normal",type:FormItemCreator.TEXT,initialValue:""}),{name:"value"})],layout:n||PROMPT_LAYOUT}))}).close},InputPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.INPUT})}))},TextAreaPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.TEXTAREA})}))},PassWordPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.PASSWORD})}))},NumberPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.NUMBER})}))},Modal:function(e){var t=e.config,o=e.children,o=void 0===o?null:o,n=e.defaultCloseBtn,n=void 0===n||n,e=e.local,e=void 0===e?DEFAULT_LOCAL:e,t=Object.assign({maskClosable:!1},void 0===t?{}:t),r=document.createElement("div");function i(){a.unmount()}var a=ReactDOM.createRoot(r);return a.render(React.createElement(_ConfigProvider,__assign({locale:LOCAL[e||DEFAULT_LOCAL]},antdConfigProviderProps||{}),React.createElement(ModalDialog,{close:i,config:t,closeBtn:n},o))),MessageDialogHandlers.set(r,a),document.body.appendChild(r),{el:r,close:i}},close:function(e){e=MessageDialogHandlers.get(e);e&&e.unmount()}};export default MessageDialogFactory;
//# sourceMappingURL=messagedialog.js.map
