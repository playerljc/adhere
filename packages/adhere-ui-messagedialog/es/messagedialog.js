import{__assign,__rest}from"tslib";import{Button,ConfigProvider,Form}from"antd";import React from"react";import ReactDOM from"react-dom/client";import FormItemCreator from"@baifendian/adhere-ui-formitemcreator";import Intl from"@baifendian/adhere-util-intl";import Resource from"@baifendian/adhere-util-resource";import ModalDialog,{selectorPrefix}from"./modal";var DEFAULT_LOCAL="zh_CN",LOCAL=Resource.Dict.value.LocalsAntd.value,PromptLayout={labelCol:{span:6},wrapperCol:{span:18}};function renderByIcon(e,t){return React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon")},React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-fixed")},e),React.createElement("div",{className:"".concat(selectorPrefix,"-renderByIcon-auto")},t))}var MessageDialogHandlers=new WeakMap,MessageDialogFactory={Confirm:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,a=e.zIndex,r=e.local,i=e.icon,i=void 0===i?null:i,c=e.onSuccess,l=this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===a?1e3:a,footer:[React.createElement(Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){c?c().then(function(){return l()}):l()}},Intl.v("确定"))]},local:r,children:i?renderByIcon(i,o):o}).close},Alert:function(e){var t=e.title,o=e.text,o=void 0===o?null:o,n=e.width,a=e.zIndex,r=e.local,e=e.icon;this.Modal({config:{title:t,centered:!0,width:(void 0===n?300:n)||300,closable:!1,zIndex:void 0===a?1e3:a},local:r,children:e?renderByIcon(e,o):o})},Prompt:function(e){var t=e.title,o=e.config,n=e.layout,n=void 0===n?PromptLayout:n,a=e.width,a=void 0===a?300:a,r=e.zIndex,r=void 0===r?1e3:r,i=e.local,c=e.onSuccess,l=React.createRef(),s=this.Modal({config:{title:t,centered:!0,width:a||300,closable:!1,zIndex:r,footer:[React.createElement(Button,{key:"submit",type:"primary",title:Intl.v("确定"),onClick:function(){c?l.current.validateFields().then(function(e){c(null==e?void 0:e.value).then(function(){return s()})}):s()}},Intl.v("确定"))]},local:i,children:React.createElement(Form,{name:"Prompt",ref:l,style:{width:"100%"}},React.createElement(FormItemCreator,{columns:[__assign(__assign({},o||{label:"normal",type:FormItemCreator.TEXT,initialValue:""}),{name:"value"})],layout:n||PromptLayout}))}).close},InputPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.INPUT})}))},TextAreaPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.TEXTAREA})}))},PassWordPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.PASSWORD})}))},NumberPrompt:function(e){var t=e.config,e=__rest(e,["config"]);MessageDialogFactory.Prompt(__assign(__assign({},e),{config:__assign(__assign({},t),{type:FormItemCreator.NUMBER})}))},Modal:function(e){var t=e.config,o=e.children,o=void 0===o?null:o,n=e.defaultCloseBtn,n=void 0===n||n,e=e.local,e=void 0===e?DEFAULT_LOCAL:e,t=Object.assign({maskClosable:!1},void 0===t?{}:t),a=document.createElement("div");function r(){i.unmount()}var i=ReactDOM.createRoot(a);return i.render(React.createElement(ConfigProvider,{locale:LOCAL[e||DEFAULT_LOCAL]},React.createElement(ModalDialog,{close:r,config:t,closeBtn:n},o))),MessageDialogHandlers.set(a,i),document.body.appendChild(a),{el:a,close:r}},close:function(e){e=MessageDialogHandlers.get(e);e&&e.unmount()}};export default MessageDialogFactory;
//# sourceMappingURL=messagedialog.js.map
