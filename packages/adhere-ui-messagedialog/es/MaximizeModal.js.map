{"version":3,"file":"MaximizeModal.js","sources":["MaximizeModal.js"],"sourcesContent":["import _BorderOutlined from \"@ant-design/icons/es/icons/BorderOutlined\";\nimport _BlockOutlined from \"@ant-design/icons/es/icons/BlockOutlined\";\nimport _CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport React, { memo, useCallback, useMemo, useRef, useState } from 'react';\nimport Draggable from 'react-draggable';\nimport Space from '@baifendian/adhere-ui-space';\nimport Modal from './Modal';\nexport var selectorPrefix = 'adhere-ui-message-dialog-maximize-modal';\n/**\n * MaximizeModalDialog\n * @description 可以最大化的Modal\n * @param props\n * @constructor\n */\nvar MaximizeModalDialog = /*#__PURE__*/memo(function (props) {\n  var _a = props.config,\n    title = _a.title,\n    closeIcon = _a.closeIcon,\n    restConfig = __rest(_a, [\"title\", \"closeIcon\"]),\n    restProps = __rest(props, [\"config\"]);\n  var draggableRef = useRef(null);\n  var _b = useState(false),\n    isMaximize = _b[0],\n    setMaximize = _b[1];\n  var _c = useState(true),\n    draggableDisabled = _c[0],\n    setDraggableDisabled = _c[1];\n  var _d = useState({\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0\n    }),\n    bounds = _d[0],\n    setBounds = _d[1];\n  var modalClassName = useMemo(function () {\n    var _a;\n    var _b;\n    return classNames(\"\".concat(selectorPrefix), (_b = restConfig.className) !== null && _b !== void 0 ? _b : '', (_a = {}, _a[\"\".concat(selectorPrefix, \"-maximize\")] = isMaximize, _a));\n  }, [isMaximize]);\n  var modalRender = useCallback(function (_modal) {\n    return renderDraggableModal(_modal);\n  }, [isMaximize, bounds, draggableDisabled]);\n  /**\n   * renderDraggableModal\n   * @param modal\n   */\n  function renderDraggableModal(modal) {\n    return /*#__PURE__*/React.createElement(Draggable, {\n      disabled: isMaximize ? true : draggableDisabled,\n      bounds: bounds,\n      nodeRef: draggableRef,\n      onStart: onDraggableStart\n    }, renderModalInner(modal));\n  }\n  /**\n   * renderClose\n   */\n  function renderClose() {\n    if (closeIcon) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(selectorPrefix, \"-header-action\"),\n        onClick: onClose\n      }, closeIcon);\n    }\n    return /*#__PURE__*/React.createElement(_CloseOutlined, {\n      rev: \"\",\n      className: \"\".concat(selectorPrefix, \"-header-action\"),\n      onClick: onClose\n    });\n  }\n  /**\n   * renderModalInner\n   * @param modal\n   */\n  function renderModalInner(modal) {\n    var _a;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-inner\"),\n      ref: draggableRef\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(selectorPrefix, \"-header\"), (_a = {}, _a[\"\".concat(selectorPrefix, \"-header-draggable\")] = !isMaximize, _a)),\n      onMouseOver: function onMouseOver() {\n        if (isMaximize) return;\n        if (draggableDisabled) {\n          setDraggableDisabled(false);\n        }\n      },\n      onMouseOut: function onMouseOut() {\n        if (isMaximize) return;\n        setDraggableDisabled(true);\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-header-title\")\n    }, title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-header-actions\")\n    }, /*#__PURE__*/React.createElement(Space.Group, {\n      direction: \"horizontal\",\n      size: 5\n    }, isMaximize && /*#__PURE__*/React.createElement(_BlockOutlined, {\n      rev: \"\",\n      className: \"\".concat(selectorPrefix, \"-header-action\"),\n      onClick: onRevert\n    }), !isMaximize && /*#__PURE__*/React.createElement(_BorderOutlined, {\n      rev: \"\",\n      className: \"\".concat(selectorPrefix, \"-header-action\"),\n      onClick: onMaximize\n    }), renderClose()))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(selectorPrefix, \"-body\")\n    }, modal));\n  }\n  /**\n   * onDraggableStart\n   * @param _event\n   * @param uiData\n   */\n  function onDraggableStart(_event, uiData) {\n    var _a, _b;\n    var _c = window.document.documentElement,\n      clientWidth = _c.clientWidth,\n      clientHeight = _c.clientHeight;\n    var targetRect = (_b = (_a = draggableRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect) === null || _b === void 0 ? void 0 : _b.call(_a);\n    if (!targetRect) {\n      return;\n    }\n    setBounds({\n      left: -targetRect.left + uiData.x,\n      right: clientWidth - (targetRect.right - uiData.x),\n      top: -targetRect.top + uiData.y,\n      bottom: clientHeight - (targetRect.bottom - uiData.y)\n    });\n  }\n  function revert() {\n    setMaximize(false);\n  }\n  function maximize() {\n    setMaximize(true);\n  }\n  function close() {\n    var _a;\n    (_a = restProps === null || restProps === void 0 ? void 0 : restProps.close) === null || _a === void 0 ? void 0 : _a.call(restProps);\n  }\n  function onClose() {\n    close();\n  }\n  function onRevert() {\n    revert();\n  }\n  function onMaximize() {\n    maximize();\n  }\n  return /*#__PURE__*/React.createElement(Modal, __assign({}, restProps, {\n    config: __assign(__assign({}, restConfig !== null && restConfig !== void 0 ? restConfig : {}), {\n      className: modalClassName,\n      modalRender: modalRender\n    })\n  }));\n});\nMaximizeModalDialog.displayName = 'MaximizeModalDialog';\nexport default MaximizeModalDialog;"],"names":["_BorderOutlined","_BlockOutlined","_CloseOutlined","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","classNames","React","memo","useCallback","useMemo","useRef","useState","Draggable","Space","Modal","selectorPrefix","MaximizeModalDialog","props","_a","config","title","closeIcon","restConfig","restProps","draggableRef","_b","isMaximize","setMaximize","_c","draggableDisabled","setDraggableDisabled","_d","left","top","bottom","right","bounds","setBounds","modalClassName","concat","className","modalRender","_modal","createElement","disabled","nodeRef","onStart","onDraggableStart","modal","ref","onMouseOver","onMouseOut","Group","direction","size","rev","onClick","onRevert","onMaximize","onClose","_event","uiData","window","document","documentElement","clientWidth","clientHeight","targetRect","current","getBoundingClientRect","x","y","close","displayName"],"mappings":"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"}