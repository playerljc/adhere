{"version":3,"file":"messagedialog.js","sources":["messagedialog.js"],"sourcesContent":["import _ConfigProvider from \"antd/es/config-provider\";\nimport _Form from \"antd/es/form\";\nimport _Button from \"antd/es/button\";\nimport \"core-js/modules/es.object.assign.js\";\nimport { __assign, __rest } from \"tslib\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport FormItemCreator from '@baifendian/adhere-ui-formitemcreator';\nimport Intl from '@baifendian/adhere-util-intl';\nimport Resource from '@baifendian/adhere-util-resource';\nimport ModalDialog, { selectorPrefix } from './modal';\nvar DEFAULT_LOCAL = 'zh_CN';\nvar LOCAL = Resource.Dict.value.LocalsAntd.value;\nvar PromptLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 18\n  }\n};\n/**\n * renderByIcon\n * @param icon\n * @param text\n * @return React.ReactElement\n */\n\nfunction renderByIcon(icon, text) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-renderByIcon\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-renderByIcon-fixed\")\n  }, icon), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(selectorPrefix, \"-renderByIcon-auto\")\n  }, text));\n}\n\nvar MessageDialogFactory = {\n  /**\n   * Confirm\n   * @param title {String | ReactNode}\n   * @param text {String | ReactNode}\n   * @param width {number}\n   * @param zIndex {number}\n   * @param icon {React.ReactElement}\n   * @param {Function} - onSuccess\n   */\n  Confirm: function Confirm(_a) {\n    var title = _a.title,\n        _b = _a.text,\n        text = _b === void 0 ? null : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        _e = _a.icon,\n        icon = _e === void 0 ? null : _e,\n        onSuccess = _a.onSuccess;\n    var close = this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex,\n        footer: [/*#__PURE__*/React.createElement(_Button, {\n          key: \"submit\",\n          type: \"primary\",\n          title: Intl.v('确定'),\n          onClick: function onClick() {\n            if (onSuccess) {\n              onSuccess().then(function () {\n                return close();\n              });\n            } else {\n              close();\n            }\n          }\n        }, Intl.v('确定'))]\n      },\n      local: local,\n      children: icon ? renderByIcon(icon, text) : text\n    }).close;\n  },\n\n  /**\n   * Alert\n   * @param title - {String | ReactNode}\n   * @param text - {String | ReactNode}\n   * @param width - {number}\n   * @param local\n   * @param zIndex\n   * @param icon - {React.ReactElement | null}\n   */\n  Alert: function Alert(_a) {\n    var title = _a.title,\n        _b = _a.text,\n        text = _b === void 0 ? null : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        icon = _a.icon;\n    this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex\n      },\n      local: local,\n      children: icon ? renderByIcon(icon, text) : text\n    });\n  },\n\n  /**\n   * Prompt\n   * @param title\n   * @param config\n   * @param layout\n   * @param width\n   * @param zIndex\n   * @param local\n   * @param onSuccess\n   * @constructor\n   */\n  Prompt: function Prompt(_a) {\n    var title = _a.title,\n        config = _a.config,\n        _b = _a.layout,\n        layout = _b === void 0 ? PromptLayout : _b,\n        _c = _a.width,\n        width = _c === void 0 ? 300 : _c,\n        _d = _a.zIndex,\n        zIndex = _d === void 0 ? 1000 : _d,\n        local = _a.local,\n        onSuccess = _a.onSuccess;\n    var ref = /*#__PURE__*/React.createRef();\n    var close = this.Modal({\n      config: {\n        title: title,\n        centered: true,\n        width: width || 300,\n        closable: false,\n        zIndex: zIndex,\n        footer: [/*#__PURE__*/React.createElement(_Button, {\n          key: \"submit\",\n          type: \"primary\",\n          title: Intl.v('确定'),\n          onClick: function onClick() {\n            if (onSuccess) {\n              ref.current.validateFields().then(function (values) {\n                onSuccess(values === null || values === void 0 ? void 0 : values.value).then(function () {\n                  return close();\n                });\n              });\n            } else {\n              close();\n            }\n          }\n        }, Intl.v('确定'))]\n      },\n      local: local,\n      children: /*#__PURE__*/React.createElement(_Form, {\n        name: \"Prompt\",\n        ref: ref,\n        style: {\n          width: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(FormItemCreator, {\n        columns: [__assign(__assign({}, config || {\n          label: 'normal',\n          type: FormItemCreator.TEXT,\n          initialValue: ''\n        }), {\n          name: 'value'\n        })],\n        layout: layout || PromptLayout\n      }))\n    }).close;\n  },\n  InputPrompt: function InputPrompt(_a) {\n    var config = _a.config,\n        params = __rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(__assign(__assign({}, params), {\n      config: __assign(__assign({}, config), {\n        type: FormItemCreator.INPUT\n      })\n    }));\n  },\n  TextAreaPrompt: function TextAreaPrompt(_a) {\n    var config = _a.config,\n        params = __rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(__assign(__assign({}, params), {\n      config: __assign(__assign({}, config), {\n        type: FormItemCreator.TEXTAREA\n      })\n    }));\n  },\n  PassWordPrompt: function PassWordPrompt(_a) {\n    var config = _a.config,\n        params = __rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(__assign(__assign({}, params), {\n      config: __assign(__assign({}, config), {\n        type: FormItemCreator.PASSWORD\n      })\n    }));\n  },\n  NumberPrompt: function NumberPrompt(_a) {\n    var config = _a.config,\n        params = __rest(_a, [\"config\"]);\n\n    MessageDialogFactory.Prompt(__assign(__assign({}, params), {\n      config: __assign(__assign({}, config), {\n        type: FormItemCreator.NUMBER\n      })\n    }));\n  },\n\n  /**\n   *  Modal\n   *  @param {Object} - config\n   *  @param {String | ReactElement} - title\n   *  @param {Boolean} - maskClosable 是否点击遮罩关闭 默认是false\n   *  @param {Number} - zIndex 层级大小\n   *  @param {String} - className 容器类名\n   *  @param {String} - wrapClassName 包裹容器类名\n   *  @param {Boolean} - centered 垂直居中展示 Modal 默认false\n   *  @param {String | Number} - width 宽度\n   *  @param {Boolean} - closable 是否显示关闭 默认true\n   *  @param {Array<ReactNode>} - footer\n   *  @param {ReactNode} - children\n   *  @param defaultCloseBtn\n   */\n  Modal: function Modal(_a) {\n    var _b = _a.config,\n        config = _b === void 0 ? {} : _b,\n        _c = _a.children,\n        children = _c === void 0 ? null : _c,\n        _d = _a.defaultCloseBtn,\n        defaultCloseBtn = _d === void 0 ? true : _d,\n        _e = _a.local,\n        local = _e === void 0 ? DEFAULT_LOCAL : _e;\n    var modalConfig = Object.assign({\n      maskClosable: false\n    }, config);\n    var el = document.createElement('div');\n\n    function close() {\n      var _a, _b;\n\n      var flag = ReactDOM.unmountComponentAtNode(el);\n\n      if (flag) {\n        (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n      }\n    }\n\n    ReactDOM.render( /*#__PURE__*/React.createElement(_ConfigProvider, {\n      locale: LOCAL[local || DEFAULT_LOCAL]\n    }, /*#__PURE__*/React.createElement(ModalDialog, {\n      close: close,\n      config: modalConfig,\n      closeBtn: defaultCloseBtn\n    }, children)), el);\n    document.body.appendChild(el);\n    return {\n      el: el,\n      close: close\n    };\n  },\n\n  /**\n   * close\n   * @param el\n   */\n  close: function close(el) {\n    var _a, _b;\n\n    var flag = ReactDOM.unmountComponentAtNode(el);\n\n    if (flag) {\n      (_b = (_a = el === null || el === void 0 ? void 0 : el.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild) === null || _b === void 0 ? void 0 : _b.call(_a, el);\n    }\n  }\n};\nexport default MessageDialogFactory;"],"names":["_ConfigProvider","_Form","_Button","__assign","__rest","React","ReactDOM","FormItemCreator","Intl","Resource","ModalDialog","selectorPrefix","DEFAULT_LOCAL","LOCAL","Dict","value","LocalsAntd","PromptLayout","labelCol","span","wrapperCol","renderByIcon","icon","text","createElement","className","concat","MessageDialogFactory","Confirm","_a","title","_b","_c","width","_d","zIndex","local","_e","onSuccess","close","this","Modal","config","centered","closable","footer","key","type","v","onClick","then","children","Alert","Prompt","layout","ref","createRef","current","validateFields","values","name","style","columns","label","TEXT","initialValue","InputPrompt","params","INPUT","TextAreaPrompt","TEXTAREA","PassWordPrompt","PASSWORD","NumberPrompt","NUMBER","defaultCloseBtn","modalConfig","Object","assign","maskClosable","el","document","unmountComponentAtNode","parentElement","removeChild","call","render","locale","closeBtn","body","appendChild"],"mappings":"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"}