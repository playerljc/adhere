var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};import classNames from"classnames";import debounce from"lodash.debounce";import{forwardRef}from"react";import React,{useEffect,useImperativeHandle,useMemo,useRef}from"react";import MessageDialog from"./MessageDialog";import{selectorPrefix}from"./Modal";import SubmitButton from"./SubmitButton";var Trigger=forwardRef(function(e,n){var r=e.className,t=e.style,o=e.value,i=e.disabled,l=void 0!==i&&i,a=e.onChange,u=e.children,i=e.renderTrigger,c=e.modalConfig,s=e.actions,f=e.maximized,g=void 0===f||f,f=e.defaultCloseBtn,m=void 0===f||f,d=e.beforeTrigger,v=useRef(null),p=useMemo(function(){return u&&React.cloneElement(u,__assign(__assign({},u.props),{value:o}),u.props.children)},[u,o]);return useEffect(function(){var e,n;try{var r=null!=(e=null==c?void 0:c.config)?e:{};null!=(n=v.current)&&n.setConfig(function(n){Object.keys(r).forEach(function(e){n[e]=r[e]})},p)}catch(e){}}),useImperativeHandle(n,function(){return{close:function(){v.current.close()}}}),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-trigger"),null!=r?r:""),style:null!=t?t:{},onClick:debounce(function(){function e(){var e,n=null!=(n=null==c?void 0:c.config)?n:{},r=(n.footer=null!=(e=null==(e=(r=null!=s?s:[]).map)?void 0:e.call(r,function(e){return React.createElement(SubmitButton,__assign({},null!=e?e:{},{onClick:function(){return t=e.onClick,o=v.current.close,new Promise(function(n,r){var e;null!=(e=null==t?void 0:t())&&e.then(function(e){null!=a&&a(e),setTimeout(function(){n(e),null!=o&&o()},300)}).catch(function(e){return r(e)})});var t,o}}))}))?e:[],new Map([[!0,MessageDialog.MaximizeModal],[!1,MessageDialog.Modal]]));v.current=null==(e=r.get(g))?void 0:e({config:n,defaultCloseBtn:m,children:p})}l||(d?d().then(function(){e()}):e())},200)},null==i?void 0:i())});Trigger.displayName="Trigger";export default Trigger;
//# sourceMappingURL=Trigger.js.map
