var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}).apply(this,arguments)};import classNames from"classnames";import debounce from"lodash.debounce";import React,{useEffect,useMemo,useRef}from"react";import MessageDialog from"./MessageDialog";import{selectorPrefix}from"./Modal";import SubmitButton from"./SubmitButton";var Trigger=function(e){var n=e.className,t=e.style,o=e.value,l=e.disabled,r=void 0!==l&&l,i=e.onChange,a=e.children,l=e.renderTrigger,u=e.modalConfig,s=e.actions,c=e.maximized,f=void 0===c||c,c=e.defaultCloseBtn,g=void 0===c||c,m=useRef(null),d=useMemo(function(){return a&&React.cloneElement(a,__assign(__assign({},a.props),{value:o}),a.props.children)},[a,o]);return useEffect(function(){var e,n;try{var t=null!=(e=null==u?void 0:u.config)?e:{};null!=(n=m.current)&&n.setConfig(function(n){Object.keys(t).forEach(function(e){n[e]=t[e]})},d)}catch(e){}}),React.createElement("div",{className:classNames("".concat(selectorPrefix,"-trigger"),null!=n?n:""),style:null!=t?t:{},onClick:debounce(function(){var e,n,t;r||((n=null!=(n=null==u?void 0:u.config)?n:{}).footer=null!=(e=null==(e=(t=null!=s?s:[]).map)?void 0:e.call(t,function(e){return React.createElement(SubmitButton,__assign({},null!=e?e:{},{onClick:function(){return o=e.onClick,l=m.current.close,new Promise(function(n,t){var e;null!=(e=null==o?void 0:o())&&e.then(function(e){null!=i&&i(e),setTimeout(function(){n(e),null!=l&&l()},300)}).catch(function(e){return t(e)})});var o,l}}))}))?e:[],t=new Map([[!0,MessageDialog.MaximizeModal],[!1,MessageDialog.Modal]]),m.current=null==(e=t.get(f))?void 0:e({config:n,defaultCloseBtn:g,children:d}))},200)},null==l?void 0:l())};Trigger.displayName="Trigger";export default Trigger;
//# sourceMappingURL=Trigger.js.map
