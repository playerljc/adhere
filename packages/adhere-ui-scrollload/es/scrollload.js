var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,l=1,t=arguments.length;l<t;l++)for(var s in r=arguments[l])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};import React,{forwardRef,useImperativeHandle,useRef,useLayoutEffect}from"react";import classNames from"classnames";import Intl from"@baifendian/adhere-util-intl";var selectorPrefix="adhere-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",ScrollLoad=function(e,r){var l=e.className,t=void 0===l?"":l,s=e.style,a=void 0===s?{}:s,n=e.children,o=e.getScrollContainer,c=e.distance,i=void 0===c?50:c,d=e.onScrollBottom,u=e.onEmptyClick,f=e.onErrorClick,m=e.renderLoading,v=e.loadClassName,y=void 0===v?"":v,p=e.loadStyle,R=void 0===p?{}:p,l=e.renderEmpty,s=e.emptyClassName,c=void 0===s?"":s,v=e.emptyStyle,p=void 0===v?{}:v,s=e.renderError,v=e.errorClassName,v=void 0===v?"":v,e=e.errorStyle,e=void 0===e?{}:e,E=useRef(!1),N=useRef(null),L=useRef(null),O=useRef(null),g=useRef(null);function h(){return o?o():N.current}function P(){var e=h(),r=e.scrollHeight-e.offsetHeight,e=e.scrollTop;d&&Math.abs(e-r)<=i&&(E.current||(E.current=!0,L.current.style.display="flex",d(function(e){L.current.style.display="none",e===EMPTY?O.current.style.display="block":e===ERROR&&(g.current.style.display="block"),E.current=!1})))}function S(){u&&u()}function _(){f&&f()}function C(){L.current.style.display="none",g.current.style.display="none",O.current.style.display="none"}return useImperativeHandle(r,function(){return{hideAll:C}}),useLayoutEffect(function(){var e;return null!==(e=h())&&void 0!==e&&e.addEventListener("scroll",P),null!==(e=O.current)&&void 0!==e&&e.addEventListener("click",S),null!==(e=g.current)&&void 0!==e&&e.addEventListener("click",_),function(){var e;null!==(e=h())&&void 0!==e&&e.removeEventListener("scroll",P),null!==(e=O.current)&&void 0!==e&&e.removeEventListener("click",S),null!==(e=g.current)&&void 0!==e&&e.removeEventListener("click",_)}}),React.createElement("div",{className:classNames(selectorPrefix,t||""),style:__assign(__assign({},a||{}),{overflowY:h()===N.current?"auto":"initial"}),ref:N},n,m?React.createElement("div",{className:classNames(selectorPrefix+"-load",y||""),style:__assign({},R),ref:L},m()):React.createElement("div",{className:classNames(selectorPrefix+"-load","standard",y||""),style:R||{},ref:L},Intl.v("数据加载中")),l?React.createElement("div",{className:classNames(selectorPrefix+"-empty",c||""),style:p||{},ref:O},l()):React.createElement("div",{className:classNames(selectorPrefix+"-empty",c||""),style:p||{},ref:O},"~",Intl.v("没有更多")),s?React.createElement("div",{className:classNames(selectorPrefix+"-error",v||""),style:e||{},ref:g},s()):React.createElement("div",{className:classNames(selectorPrefix+"-error",v||""),style:e||{},ref:g},Intl.v("出现错误")))},ScrollLoadHOC=forwardRef(ScrollLoad);ScrollLoadHOC.EMPTY="empty",ScrollLoadHOC.ERROR="error",ScrollLoadHOC.NORMAL="normal";export default ScrollLoadHOC;
//# sourceMappingURL=scrollload.js.map
