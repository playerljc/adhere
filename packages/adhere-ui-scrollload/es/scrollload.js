var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,l=1,t=arguments.length;l<t;l++)for(var a in r=arguments[l])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};import classNames from"classnames";import React,{forwardRef,memo,useCallback,useImperativeHandle,useLayoutEffect,useRef}from"react";import Intl from"@baifendian/adhere-util-intl";var selectorPrefix="adhere-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",ScrollLoad=function(e,r){var l=e.className,l=void 0===l?"":l,t=e.style,t=void 0===t?{}:t,a=e.children,n=e.getScrollContainer,s=e.distance,c=void 0===s?50:s,o=e.onScrollBottom,i=e.onEmptyClick,u=e.onErrorClick,d=e.renderLoading,s=e.loadClassName,f=void 0===s?"":s,s=e.loadStyle,m=void 0===s?{}:s,v=e.renderEmpty,s=e.emptyClassName,y=void 0===s?"":s,s=e.emptyStyle,p=void 0===s?{}:s,R=e.renderError,s=e.errorClassName,E=void 0===s?"":s,s=e.errorStyle,N=void 0===s?{}:s,L=useRef(!1),C=useRef(null),O=useRef(null),h=useRef(null),k=useRef(null);function P(){return n?n():C.current}function S(){var e=P(),r=e.scrollHeight-e.offsetHeight,e=e.scrollTop;o&&Math.abs(e-r)<=c&&(L.current||(L.current=!0,O.current.style.display="flex",o(function(e){O.current.style.display="none",e===EMPTY?h.current.style.display="block":e===ERROR&&(k.current.style.display="block"),L.current=!1})))}function g(){i&&i()}function b(){u&&u()}function x(){O.current.style.display="none",k.current.style.display="none",h.current.style.display="none"}var e=useCallback(function(){return d?React.createElement("div",{className:classNames(selectorPrefix+"-load",f||""),style:m||{},ref:O},d()):React.createElement("div",{className:classNames(selectorPrefix+"-load","standard",f||""),style:m||{},ref:O},Intl.v("数据加载中"))},[d,f,m]),s=useCallback(function(){return v?React.createElement("div",{className:classNames(selectorPrefix+"-empty",y||""),style:p||{},ref:h},v()):React.createElement("div",{className:classNames(selectorPrefix+"-empty",y||""),style:p||{},ref:h},"~",Intl.v("没有更多"))},[v,y,p]),_=useCallback(function(){return R?React.createElement("div",{className:classNames(selectorPrefix+"-error",E||""),style:N||{},ref:k},R()):React.createElement("div",{className:classNames(selectorPrefix+"-error",E||""),style:N||{},ref:k},Intl.v("出现错误"))},[R,E,N]);return useImperativeHandle(r,function(){return{hideAll:x}}),useLayoutEffect(function(){var e;return null!=(e=P())&&e.addEventListener("scroll",S),null!=(e=h.current)&&e.addEventListener("click",g),null!=(e=k.current)&&e.addEventListener("click",b),function(){var e;null!=(e=P())&&e.removeEventListener("scroll",S),null!=(e=h.current)&&e.removeEventListener("click",g),null!=(e=k.current)&&e.removeEventListener("click",b)}}),React.createElement("div",{className:classNames(selectorPrefix,l||""),style:__assign(__assign({},t||{}),{overflowY:P()===C.current?"auto":"initial"}),ref:C},a,e(),s(),_())},ScrollLoadHOC=memo(forwardRef(ScrollLoad));ScrollLoadHOC.EMPTY="empty",ScrollLoadHOC.ERROR="error",ScrollLoadHOC.NORMAL="normal";export default ScrollLoadHOC;
//# sourceMappingURL=scrollload.js.map
