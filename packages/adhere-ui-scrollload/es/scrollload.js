var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};import React from"react";import PropTypes from"prop-types";import classNames from"classnames";import Intl from"@baifendian/adhere-util-intl";var selectorPrefix="adhere-ui-scrollload",ScrollLoad=function(t){function a(e){e=t.call(this,e)||this;return e.lock=!1,e.onScroll=e.onScroll.bind(e),e.onEmptyClick=e.onEmptyClick.bind(e),e.onErrorClick=e.onErrorClick.bind(e),e}return __extends(a,t),a.prototype.componentDidMount=function(){this.initEvents()},a.prototype.getScrollContainer=function(){return this.props.getScrollContainer?this.props.getScrollContainer():this.el},a.prototype.initEvents=function(){this.getScrollContainer().addEventListener("scroll",this.onScroll),this.emptyEl.addEventListener("click",this.onEmptyClick),this.errorEl.addEventListener("click",this.onErrorClick)},a.prototype.onScroll=function(){var t=this,e=this,r=e.loadEl,o=e.errorEl,n=e.emptyEl,s=e.props,l=s.distance,i=s.onScrollBottom,e=this.getScrollContainer(),s=e.scrollHeight-e.offsetHeight,e=e.scrollTop;i&&Math.abs(e-s)<=l&&(this.lock||(this.lock=!0,r.style.display="flex",i(function(e){r.style.display="none",e===a.EMPTY?n.style.display="block":e===a.ERROR&&(o.style.display="block"),t.lock=!1})))},a.prototype.onEmptyClick=function(){var e=this.props.onEmptyClick;e&&e()},a.prototype.onErrorClick=function(){var e=this.props.onErrorClick;e&&e()},a.prototype.hideAll=function(){this.loadEl.style.display="none",this.errorEl.style.display="none",this.emptyEl.style.display="none"},a.prototype.renderLoading=function(){var t=this,e=this.props,r=e.renderLoading,o=e.loadClassName,e=e.loadStyle;return r?React.createElement("div",{className:classNames(selectorPrefix+"-load",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.loadEl=e}},r()):React.createElement("div",{className:classNames(selectorPrefix+"-load","standard",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.loadEl=e}},Intl.v("数据加载中"))},a.prototype.renderEmpty=function(){var t=this,e=this.props,r=e.renderEmpty,o=e.emptyClassName,e=e.emptyStyle;return r?React.createElement("div",{className:classNames(selectorPrefix+"-empty",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.emptyEl=e}},r()):React.createElement("div",{className:classNames(selectorPrefix+"-empty",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.emptyEl=e}},"~",Intl.v("没有更多"))},a.prototype.renderError=function(){var t=this,e=this.props,r=e.renderError,o=e.errorClassName,e=e.errorStyle;return r?React.createElement("div",{className:classNames(selectorPrefix+"-error",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.errorEl=e}},r()):React.createElement("div",{className:classNames(selectorPrefix+"-error",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.errorEl=e}},Intl.v("出现错误"))},a.prototype.render=function(){var t=this,e=this.props,r=e.className,o=e.style,e=e.children;return React.createElement("div",{className:classNames(selectorPrefix,(r||"").split(/\s+/)),style:__assign(__assign({},o),{overflowY:this.getScrollContainer()===this.el?"auto":"initial"}),ref:function(e){return t.el=e}},e,this.renderLoading(),this.renderEmpty(),this.renderError())},a.EMPTY="empty",a.ERROR="error",a.NORMAL="normal",a}(React.Component);ScrollLoad.defaultProps={className:"",style:{},loadClassName:"",loadStyle:{},emptyClassName:"",emptyStyle:{},errorClassName:"",errorStyle:{},distance:50,onScrollBottom:function(){},onEmptyClick:function(){},onErrorClick:function(){},renderLoading:void 0,renderEmpty:void 0,renderError:void 0},ScrollLoad.propTypes={getScrollContainer:PropTypes.func,className:PropTypes.string,style:PropTypes.object,loadClassName:PropTypes.string,loadStyle:PropTypes.object,emptyClassName:PropTypes.string,emptyStyle:PropTypes.object,errorClassName:PropTypes.string,errorStyle:PropTypes.object,distance:PropTypes.number,onScrollBottom:Function,onEmptyClick:Function,onErrorClick:Function,renderLoading:Function,renderEmpty:Function,renderError:Function};export default ScrollLoad;
//# sourceMappingURL=scrollload.js.map
