"use strict";var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(require("react")),prop_types_1=__importDefault(require("prop-types")),classnames_1=__importDefault(require("classnames")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scrollload",ScrollLoad=function(t){function a(e){e=t.call(this,e)||this;return e.lock=!1,e.onScroll=e.onScroll.bind(e),e.onEmptyClick=e.onEmptyClick.bind(e),e.onErrorClick=e.onErrorClick.bind(e),e}return __extends(a,t),a.prototype.componentDidMount=function(){this.initEvents()},a.prototype.getScrollContainer=function(){return this.props.getScrollContainer?this.props.getScrollContainer():this.el},a.prototype.initEvents=function(){this.getScrollContainer().addEventListener("scroll",this.onScroll),this.emptyEl.addEventListener("click",this.onEmptyClick),this.errorEl.addEventListener("click",this.onErrorClick)},a.prototype.onScroll=function(){var t=this,e=this,r=e.loadEl,o=e.errorEl,l=e.emptyEl,n=e.props,s=n.distance,i=n.onScrollBottom,e=this.getScrollContainer(),n=e.scrollHeight-e.offsetHeight,e=e.scrollTop;i&&Math.abs(e-n)<=s&&(this.lock||(this.lock=!0,r.style.display="flex",i(function(e){r.style.display="none",e===a.EMPTY?l.style.display="block":e===a.ERROR&&(o.style.display="block"),t.lock=!1})))},a.prototype.onEmptyClick=function(){var e=this.props.onEmptyClick;e&&e()},a.prototype.onErrorClick=function(){var e=this.props.onErrorClick;e&&e()},a.prototype.hideAll=function(){this.loadEl.style.display="none",this.errorEl.style.display="none",this.emptyEl.style.display="none"},a.prototype.renderLoading=function(){var t=this,e=this.props,r=e.renderLoading,o=e.loadClassName,e=e.loadStyle;return r?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-load",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.loadEl=e}},r()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-load","standard",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.loadEl=e}},adhere_util_intl_1.default.v("数据加载中"))},a.prototype.renderEmpty=function(){var t=this,e=this.props,r=e.renderEmpty,o=e.emptyClassName,e=e.emptyStyle;return r?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-empty",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.emptyEl=e}},r()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-empty",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.emptyEl=e}},"~",adhere_util_intl_1.default.v("没有更多"))},a.prototype.renderError=function(){var t=this,e=this.props,r=e.renderError,o=e.errorClassName,e=e.errorStyle;return r?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-error",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.errorEl=e}},r()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-error",o.split(/\s+/)),style:__assign({},e),ref:function(e){return t.errorEl=e}},adhere_util_intl_1.default.v("出现错误"))},a.prototype.render=function(){var t=this,e=this.props,r=e.className,o=e.style,e=e.children;return react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix,(r||"").split(/\s+/)),style:__assign({},o),ref:function(e){return t.el=e}},e,this.renderLoading(),this.renderEmpty(),this.renderError())},a.EMPTY="empty",a.ERROR="error",a.NORMAL="normal",a}(react_1.default.Component);ScrollLoad.defaultProps={className:"",style:{},loadClassName:"",loadStyle:{},emptyClassName:"",emptyStyle:{},errorClassName:"",errorStyle:{},distance:50,onScrollBottom:function(){},onEmptyClick:function(){},onErrorClick:function(){},renderLoading:void 0,renderEmpty:void 0,renderError:void 0},ScrollLoad.propTypes={getScrollContainer:prop_types_1.default.func,className:prop_types_1.default.string,style:prop_types_1.default.object,loadClassName:prop_types_1.default.string,loadStyle:prop_types_1.default.object,emptyClassName:prop_types_1.default.string,emptyStyle:prop_types_1.default.object,errorClassName:prop_types_1.default.string,errorStyle:prop_types_1.default.object,distance:prop_types_1.default.number,onScrollBottom:Function,onEmptyClick:Function,onErrorClick:Function,renderLoading:Function,renderEmpty:Function,renderError:Function},exports.default=ScrollLoad;
//# sourceMappingURL=scrollload.js.map
