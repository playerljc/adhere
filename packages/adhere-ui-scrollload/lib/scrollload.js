"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,l=arguments.length;r<l;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,l,a)}:function(e,t,r,l){e[l=void 0===l?r:l]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=this&&this.__rest||function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",ScrollLoad=function(e,t){var r=e.className,r=void 0===r?"":r,l=e.style,l=void 0===l?{}:l,a=e.children,n=e.getScrollContainer,c=e.distance,o=void 0===c?50:c,s=e.onScrollBottom,i=e.onEmptyClick,u=e.onErrorClick,d=e.renderLoading,c=e.loadClassName,f=void 0===c?"":c,c=e.loadStyle,_=void 0===c?{}:c,m=e.renderEmpty,c=e.emptyClassName,y=void 0===c?"":c,c=e.emptyStyle,p=void 0===c?{}:c,v=e.renderError,c=e.errorClassName,O=void 0===c?"":c,c=e.errorStyle,h=void 0===c?{}:c,c=__rest(e,["className","style","children","getScrollContainer","distance","onScrollBottom","onEmptyClick","onErrorClick","renderLoading","loadClassName","loadStyle","renderEmpty","emptyClassName","emptyStyle","renderError","errorClassName","errorStyle"]),E=(0,react_1.useRef)(!1),b=(0,react_1.useRef)(null),g=(0,react_1.useRef)(null),S=(0,react_1.useRef)(null),C=(0,react_1.useRef)(null);function P(){return n?n():b.current}function L(){var e=P(),t=e.scrollHeight-e.offsetHeight,e=e.scrollTop;s&&Math.abs(e-t)<=o&&(E.current||(E.current=!0,g.current.style.display="flex",s(function(e){g.current.style.display="none",e===EMPTY?S.current.style.display="block":e===ERROR&&(C.current.style.display="block"),E.current=!1})))}function N(){i&&i()}function R(){u&&u()}function j(){g.current.style.display="none",C.current.style.display="none",S.current.style.display="none"}var e=(0,react_1.useCallback)(function(){return d?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),f),style:null!=_?_:{},ref:g},d()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",f),style:null!=_?_:{},ref:g},adhere_util_intl_1.default.v("数据加载中"))},[d,f,_]),k=(0,react_1.useCallback)(function(){return m?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),y),style:null!=p?p:{},ref:S},m()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),y),style:null!=p?p:{},ref:S},"~",adhere_util_intl_1.default.v("没有更多"))},[m,y,p]),x=(0,react_1.useCallback)(function(){return v?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),O),style:null!=h?h:{},ref:C},v()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),O),style:null!=h?h:{},ref:C},adhere_util_intl_1.default.v("出现错误"))},[v,O,h]);return(0,react_1.useImperativeHandle)(t,function(){return{hideAll:j}}),(0,react_1.useLayoutEffect)(function(){var e;return null!=(e=P())&&e.addEventListener("scroll",L),null!=(e=S.current)&&e.addEventListener("click",N),null!=(e=C.current)&&e.addEventListener("click",R),function(){var e;null!=(e=P())&&e.removeEventListener("scroll",L),null!=(e=S.current)&&e.removeEventListener("click",N),null!=(e=C.current)&&e.removeEventListener("click",R)}}),react_1.default.createElement("div",__assign({},c,{className:(0,classnames_1.default)(selectorPrefix,r),style:__assign(__assign({},null!=l?l:{}),{overflowY:P()===b.current?"auto":"initial"}),ref:b}),a,e(),k(),x())},ScrollLoadHOC=(0,react_1.memo)((0,react_1.forwardRef)(ScrollLoad));ScrollLoadHOC.EMPTY="empty",ScrollLoadHOC.ERROR="error",ScrollLoadHOC.NORMAL="normal",exports.default=ScrollLoadHOC;
//# sourceMappingURL=scrollload.js.map
