"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,l=arguments.length;r<l;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,l,n)}:function(e,t,r,l){e[l=void 0===l?r:l]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=this&&this.__rest||function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ahooks_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("ahooks")),classnames_1=__importDefault(require("classnames")),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scroll-load",EMPTY="empty",ERROR="error",NORMAL="normal",InternalScrollLoad=(0,react_1.memo)((0,react_1.forwardRef)(function(e,t){var r=e.className,r=void 0===r?"":r,l=e.style,l=void 0===l?{}:l,n=e.loadClassName,a=void 0===n?"":n,n=e.loadStyle,o=void 0===n?{}:n,n=e.emptyClassName,c=void 0===n?"":n,n=e.emptyStyle,s=void 0===n?{}:n,n=e.errorClassName,i=void 0===n?"":n,n=e.errorStyle,u=void 0===n?{}:n,d=e.getScrollContainer,n=e.distance,f=void 0===n?50:n,_=e.renderLoading,m=e.renderEmpty,y=e.renderError,v=e.onScrollBottom,p=e.onEmptyClick,E=e.onErrorClick,n=e.disabled,h=void 0!==n&&n,n=e.children,e=__rest(e,["className","style","loadClassName","loadStyle","emptyClassName","emptyStyle","errorClassName","errorStyle","getScrollContainer","distance","renderLoading","renderEmpty","renderError","onScrollBottom","onEmptyClick","onErrorClick","disabled","children"]),b=(0,react_1.useRef)(!1),O=(0,react_1.useRef)(null),g=(0,react_1.useRef)(null),S=(0,react_1.useRef)(null),L=(0,react_1.useRef)(null);function P(){return d?d():O.current}function N(){var e=P(),t=e.scrollHeight-e.offsetHeight,e=e.scrollTop;v&&Math.abs(e-t)<=f&&(b.current||(b.current=!0,g.current.style.display="flex",v(function(e){g.current.style.display="none",e===EMPTY?S.current.style.display="block":e===ERROR&&(L.current.style.display="block"),b.current=!1})))}function R(){p&&p()}function k(){E&&E()}function C(){g.current.style.display="none",L.current.style.display="none",S.current.style.display="none"}var j=(0,react_1.useCallback)(function(){return _?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),a),style:null!=o?o:{},ref:g},_()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",a),style:null!=o?o:{},ref:g},adhere_util_intl_1.default.v("数据加载中"))},[_,a,o]),x=(0,react_1.useCallback)(function(){return m?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),c),style:null!=s?s:{},ref:S},m()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),c),style:null!=s?s:{},ref:S},"~",adhere_util_intl_1.default.v("没有更多"))},[m,c,s]),M=(0,react_1.useCallback)(function(){return y?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),i),style:null!=u?u:{},ref:L},y()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),i),style:null!=u?u:{},ref:L},adhere_util_intl_1.default.v("出现错误"))},[y,i,u]);return(0,react_1.useImperativeHandle)(t,function(){return{hideAll:C,getScrollContainer:P}}),(0,react_1.useLayoutEffect)(function(){var e;return h||null!=(e=P())&&e.addEventListener("scroll",N),null!=(e=S.current)&&e.addEventListener("click",R),null!=(e=L.current)&&e.addEventListener("click",k),function(){var e;h||null!=(e=P())&&e.removeEventListener("scroll",N),null!=(e=S.current)&&e.removeEventListener("click",R),null!=(e=L.current)&&e.removeEventListener("click",k)}}),(0,ahooks_1.useUpdateEffect)(function(){var e;return h?null!=(e=P())&&e.removeEventListener("scroll",N):(null!=(e=P())&&e.removeEventListener("scroll",N),null!=(e=P())&&e.addEventListener("scroll",N)),function(){var e;null!=(e=P())&&e.removeEventListener("scroll",N)}},[h]),react_1.default.createElement("div",__assign({},e,{className:(0,classnames_1.default)(selectorPrefix,r),style:__assign(__assign({},null!=l?l:{}),{overflowY:P()===O.current?"auto":"initial"}),ref:O}),n,j(),x(),M())})),ScrollLoad=InternalScrollLoad;ScrollLoad.displayName="ScrollLoad",ScrollLoad.EMPTY="empty",ScrollLoad.ERROR="error",ScrollLoad.NORMAL="normal",exports.default=ScrollLoad;
//# sourceMappingURL=ScrollLoad.js.map
