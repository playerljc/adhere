"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,l=arguments.length;r<l;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,l,a)}:function(e,t,r,l){e[l=void 0===l?r:l]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",ScrollLoad=function(e,t){var r=e.className,r=void 0===r?"":r,l=e.style,l=void 0===l?{}:l,a=e.children,n=e.getScrollContainer,c=e.distance,s=void 0===c?50:c,o=e.onScrollBottom,i=e.onEmptyClick,u=e.onErrorClick,d=e.renderLoading,c=e.loadClassName,f=void 0===c?"":c,c=e.loadStyle,_=void 0===c?{}:c,m=e.renderEmpty,c=e.emptyClassName,v=void 0===c?"":c,c=e.emptyStyle,y=void 0===c?{}:c,p=e.renderError,c=e.errorClassName,h=void 0===c?"":c,c=e.errorStyle,E=void 0===c?{}:c,O=(0,react_1.useRef)(!1),b=(0,react_1.useRef)(null),g=(0,react_1.useRef)(null),L=(0,react_1.useRef)(null),P=(0,react_1.useRef)(null);function R(){return n?n():b.current}function S(){var e=R(),t=e.scrollHeight-e.offsetHeight,e=e.scrollTop;o&&Math.abs(e-t)<=s&&(O.current||(O.current=!0,g.current.style.display="flex",o(function(e){g.current.style.display="none",e===EMPTY?L.current.style.display="block":e===ERROR&&(P.current.style.display="block"),O.current=!1})))}function C(){i&&i()}function M(){u&&u()}function N(){g.current.style.display="none",P.current.style.display="none",L.current.style.display="none"}var e=(0,react_1.useCallback)(function(){return d?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),f||""),style:_||{},ref:g},d()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",f||""),style:_||{},ref:g},adhere_util_intl_1.default.v("数据加载中"))},[d,f,_]),c=(0,react_1.useCallback)(function(){return m?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),v||""),style:y||{},ref:L},m()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),v||""),style:y||{},ref:L},"~",adhere_util_intl_1.default.v("没有更多"))},[m,v,y]),k=(0,react_1.useCallback)(function(){return p?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),h||""),style:E||{},ref:P},p()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),h||""),style:E||{},ref:P},adhere_util_intl_1.default.v("出现错误"))},[p,h,E]);return(0,react_1.useImperativeHandle)(t,function(){return{hideAll:N}}),(0,react_1.useLayoutEffect)(function(){var e;return null!=(e=R())&&e.addEventListener("scroll",S),null!=(e=L.current)&&e.addEventListener("click",C),null!=(e=P.current)&&e.addEventListener("click",M),function(){var e;null!=(e=R())&&e.removeEventListener("scroll",S),null!=(e=L.current)&&e.removeEventListener("click",C),null!=(e=P.current)&&e.removeEventListener("click",M)}}),react_1.default.createElement("div",{className:(0,classnames_1.default)(selectorPrefix,r||""),style:__assign(__assign({},l||{}),{overflowY:R()===b.current?"auto":"initial"}),ref:b},a,e(),c(),k())},ScrollLoadHOC=(0,react_1.memo)((0,react_1.forwardRef)(ScrollLoad));ScrollLoadHOC.EMPTY="empty",ScrollLoadHOC.ERROR="error",ScrollLoadHOC.NORMAL="normal",exports.default=ScrollLoadHOC;
//# sourceMappingURL=scrollload.js.map
