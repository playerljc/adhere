"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,l=arguments.length;r<l;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,l,a)}:function(e,t,r,l){e[l=void 0===l?r:l]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=this&&this.__rest||function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},classnames_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("classnames"))),react_1=__importStar(require("react")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scroll-load",EMPTY="empty",ERROR="error",NORMAL="normal",InternalScrollLoad=(0,react_1.memo)((0,react_1.forwardRef)(function(e,t){var r=e.className,r=void 0===r?"":r,l=e.style,l=void 0===l?{}:l,a=e.loadClassName,n=void 0===a?"":a,a=e.loadStyle,o=void 0===a?{}:a,a=e.emptyClassName,c=void 0===a?"":a,a=e.emptyStyle,s=void 0===a?{}:a,a=e.errorClassName,i=void 0===a?"":a,a=e.errorStyle,u=void 0===a?{}:a,d=e.getScrollContainer,a=e.distance,f=void 0===a?50:a,_=e.renderLoading,m=e.renderEmpty,y=e.renderError,p=e.onScrollBottom,v=e.onEmptyClick,h=e.onErrorClick,a=e.children,e=__rest(e,["className","style","loadClassName","loadStyle","emptyClassName","emptyStyle","errorClassName","errorStyle","getScrollContainer","distance","renderLoading","renderEmpty","renderError","onScrollBottom","onEmptyClick","onErrorClick","children"]),E=(0,react_1.useRef)(!1),b=(0,react_1.useRef)(null),O=(0,react_1.useRef)(null),g=(0,react_1.useRef)(null),S=(0,react_1.useRef)(null);function L(){return d?d():b.current}function P(){var e=L(),t=e.scrollHeight-e.offsetHeight,e=e.scrollTop;p&&Math.abs(e-t)<=f&&(E.current||(E.current=!0,O.current.style.display="flex",p(function(e){O.current.style.display="none",e===EMPTY?g.current.style.display="block":e===ERROR&&(S.current.style.display="block"),E.current=!1})))}function N(){v&&v()}function R(){h&&h()}function C(){O.current.style.display="none",S.current.style.display="none",g.current.style.display="none"}var j=(0,react_1.useCallback)(function(){return _?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),n),style:null!=o?o:{},ref:O},_()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-load"),"standard",n),style:null!=o?o:{},ref:O},adhere_util_intl_1.default.v("数据加载中"))},[_,n,o]),k=(0,react_1.useCallback)(function(){return m?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),c),style:null!=s?s:{},ref:g},m()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-empty"),c),style:null!=s?s:{},ref:g},"~",adhere_util_intl_1.default.v("没有更多"))},[m,c,s]),x=(0,react_1.useCallback)(function(){return y?react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),i),style:null!=u?u:{},ref:S},y()):react_1.default.createElement("div",{className:(0,classnames_1.default)("".concat(selectorPrefix,"-error"),i),style:null!=u?u:{},ref:S},adhere_util_intl_1.default.v("出现错误"))},[y,i,u]);return(0,react_1.useImperativeHandle)(t,function(){return{hideAll:C,getScrollContainer:L}}),(0,react_1.useLayoutEffect)(function(){var e;return null!=(e=L())&&e.addEventListener("scroll",P),null!=(e=g.current)&&e.addEventListener("click",N),null!=(e=S.current)&&e.addEventListener("click",R),function(){var e;null!=(e=L())&&e.removeEventListener("scroll",P),null!=(e=g.current)&&e.removeEventListener("click",N),null!=(e=S.current)&&e.removeEventListener("click",R)}}),react_1.default.createElement("div",__assign({},e,{className:(0,classnames_1.default)(selectorPrefix,r),style:__assign(__assign({},null!=l?l:{}),{overflowY:L()===b.current?"auto":"initial"}),ref:b}),a,j(),k(),x())})),ScrollLoad=InternalScrollLoad;ScrollLoad.displayName="ScrollLoad",ScrollLoad.EMPTY="empty",ScrollLoad.ERROR="error",ScrollLoad.NORMAL="normal",exports.default=ScrollLoad;
//# sourceMappingURL=ScrollLoad.js.map
