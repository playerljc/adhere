"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,l=arguments.length;r<l;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r),Object.defineProperty(e,l,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,l){e[l=void 0===l?r:l]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(require("react")),classnames_1=__importDefault(require("classnames")),adhere_util_intl_1=__importDefault(require("@baifendian/adhere-util-intl")),selectorPrefix="adhere-ui-scrollload",EMPTY="empty",ERROR="error",NORMAL="normal",ScrollLoad=function(e,t){var r=e.className,l=void 0===r?"":r,a=e.style,n=void 0===a?{}:a,s=e.children,i=e.getScrollContainer,c=e.distance,o=void 0===c?50:c,u=e.onScrollBottom,d=e.onEmptyClick,f=e.onErrorClick,_=e.renderLoading,m=e.loadClassName,v=void 0===m?"":m,y=e.loadStyle,p=void 0===y?{}:y,r=e.renderEmpty,a=e.emptyClassName,c=void 0===a?"":a,m=e.emptyStyle,y=void 0===m?{}:m,a=e.renderError,m=e.errorClassName,m=void 0===m?"":m,e=e.errorStyle,e=void 0===e?{}:e,h=react_1.useRef(!1),E=react_1.useRef(null),O=react_1.useRef(null),L=react_1.useRef(null),R=react_1.useRef(null);function g(){return i?i():E.current}function P(){var e=g(),t=e.scrollHeight-e.offsetHeight,e=e.scrollTop;u&&Math.abs(e-t)<=o&&(h.current||(h.current=!0,O.current.style.display="flex",u(function(e){O.current.style.display="none",e===EMPTY?L.current.style.display="block":e===ERROR&&(R.current.style.display="block"),h.current=!1})))}function S(){d&&d()}function b(){f&&f()}function N(){O.current.style.display="none",R.current.style.display="none",L.current.style.display="none"}return react_1.useImperativeHandle(t,function(){return{hideAll:N}}),react_1.useLayoutEffect(function(){var e;return null!==(e=g())&&void 0!==e&&e.addEventListener("scroll",P),null!==(e=L.current)&&void 0!==e&&e.addEventListener("click",S),null!==(e=R.current)&&void 0!==e&&e.addEventListener("click",b),function(){var e;null!==(e=g())&&void 0!==e&&e.removeEventListener("scroll",P),null!==(e=L.current)&&void 0!==e&&e.removeEventListener("click",S),null!==(e=R.current)&&void 0!==e&&e.removeEventListener("click",b)}}),react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix,l||""),style:__assign(__assign({},n||{}),{overflowY:g()===E.current?"auto":"initial"}),ref:E},s,_?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-load",v||""),style:__assign({},p),ref:O},_()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-load","standard",v||""),style:p||{},ref:O},adhere_util_intl_1.default.v("数据加载中")),r?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-empty",c||""),style:y||{},ref:L},r()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-empty",c||""),style:y||{},ref:L},"~",adhere_util_intl_1.default.v("没有更多")),a?react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-error",m||""),style:e||{},ref:R},a()):react_1.default.createElement("div",{className:classnames_1.default(selectorPrefix+"-error",m||""),style:e||{},ref:R},adhere_util_intl_1.default.v("出现错误")))},ScrollLoadHOC=react_1.forwardRef(ScrollLoad);ScrollLoadHOC.EMPTY="empty",ScrollLoadHOC.ERROR="error",ScrollLoadHOC.NORMAL="normal",exports.default=ScrollLoadHOC;
//# sourceMappingURL=scrollload.js.map
