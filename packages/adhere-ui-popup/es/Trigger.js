import _LeftOutline from"antd-mobile-icons/es/LeftOutline";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,l=0,c=t.length;l<c;l++)!n&&l in t||((n=n||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(n||Array.prototype.slice.call(t))};import classNames from"classnames";import debounce from"lodash.debounce";import React,{useMemo}from"react";import Intl from"@baifendian/adhere-util-intl";import SubmitButton from"./SubmitButton";import Popup from"./popup";var selectorPrefix="adhere-ui-popup",triggerSelectorPrefix="".concat(selectorPrefix,"-trigger"),triggerSelectorInnerPrefix="".concat(triggerSelectorPrefix,"-inner"),Trigger=function(e){var t=e.className,r=e.style,n=e.renderTrigger,l=e.popupConfig,c=e.title,a=e.closeIcon,o=void 0===a||a,i=e.extra,s=e.actions,u=e.children,m=e.value,f=e.onChange,g=useMemo(function(){return u?React.cloneElement(u,__assign(__assign({},u.props),{value:m}),u.props.children):null},[u]);return React.createElement("div",{className:classNames(triggerSelectorPrefix,null!=t?t:""),style:null!=r?r:{},onClick:debounce(function(){var e,t,r=Popup.create(__assign(__assign({},null!=l?l:{}),{onBeforeClose:function(){var e,t;return null!=(t=null==(t=null==(e=null!=l?l:{})?void 0:e.onBeforeClose)?void 0:t.call(e))?t:Promise.resolve()},onAfterClose:function(){var e,t;return null!=(t=null==(t=null==(e=null!=l?l:{})?void 0:e.onAfterClose)?void 0:t.call(e))?t:Popup.destroy(r)},children:React.createElement("div",{className:classNames(triggerSelectorInnerPrefix)},React.createElement("div",{className:classNames("".concat(triggerSelectorInnerPrefix,"-header"))},React.createElement("div",{className:"".concat(triggerSelectorInnerPrefix,"-close"),onClick:function(){r.close()}},o&&React.createElement("span",{className:"".concat(triggerSelectorInnerPrefix,"-close-inner")},React.createElement(_LeftOutline,null))),c&&React.createElement("div",{className:"".concat(triggerSelectorInnerPrefix,"-title")},c),i&&React.createElement("div",{className:"".concat(triggerSelectorInnerPrefix,"-extra")},i)),React.createElement("div",{className:classNames("".concat(triggerSelectorInnerPrefix,"-body"))},g),React.createElement("div",{className:classNames("".concat(triggerSelectorInnerPrefix,"-actions"))},__spreadArray([React.createElement("div",{key:"close",className:classNames("".concat(triggerSelectorInnerPrefix,"-action"))},React.createElement(SubmitButton,{key:"close",onClick:function(){return new Promise(function(e){setTimeout(function(){null!=r&&r.close()},100),e()})}},Intl.v("关闭")))],null!=(t=null==(t=(e=null!=s?s:[]).map)?void 0:t.call(e,function(e){return React.createElement("div",{key:e.key,className:classNames("".concat(triggerSelectorInnerPrefix,"-action"))},React.createElement(SubmitButton,__assign({},null!=e?e:{},{onClick:function(){return n=e.onClick,l=function(){return null==r?void 0:r.close()},new Promise(function(t,r){var e;null!=(e=null==n?void 0:n())&&e.then(function(e){null!=f&&f(e),setTimeout(function(){t(e),null!=l&&l()},400)}).catch(function(e){return r(e)})});var n,l}})))}))?t:[],!0)))}));r.show()},200)},null==n?void 0:n())};export default Trigger;
//# sourceMappingURL=Trigger.js.map
