var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};import classNames from"classnames";import React,{memo,useLayoutEffect,useRef}from"react";import Resource from"@baifendian/adhere-util-resource";var selectorPrefix="adhere-ui-back-top-animation",BackTopAnimation=memo(function(e){var n=e.className,t=e.style,r=e.zIndex,o=void 0===r?Resource.Dict.value.ResourceNormalMaxZIndex.value:r,i=e.getContainer,s=e.onScrollTop,r=e.duration,u=void 0===r?300:r,a=useRef(null),l=useRef(null),d=useRef(!1);function f(){return"updateInterval"in screen?screen.updateInterval:16.7}return useLayoutEffect(function(){l.current=document.body.querySelector(".".concat(selectorPrefix,"-mask")),l.current||(l.current=document.createElement("div"),l.current.className="".concat(selectorPrefix,"-mask"),l.current.style.zIndex="".concat(o),document.body.appendChild(l.current))},[]),useLayoutEffect(function(){var e=i();function n(){0!==e.scrollTop?a.current.style.display="block":a.current.style.display="none"}return e.addEventListener("scroll",n),function(){return e.removeEventListener("scroll",n)}}),React.createElement("div",{ref:a,className:classNames(selectorPrefix,null!=n?n:""),style:__assign({zIndex:o},null!=t?t:{}),onClick:function(){d.current||e.onTrigger&&e.onTrigger().then(function(){d.current=!0,l.current.style.display="block";var t=i(),r=t.scrollTop,o=r,a=0,c=t.scrollHeight/(u/f()+(u%f()!=0?1:0));"undefined"!=typeof window&&window.requestAnimationFrame(function e(){function n(){l.current.style.display="none",d.current=!1}r<a?a<o+c?o=a:o+=c:o-c<a?o=a:o-=c,t.scrollTop=o,s&&s(o),r<a?a<=o?n():"undefined"!=typeof window&&window.requestAnimationFrame(e):o<=a?n():"undefined"!=typeof window&&window.requestAnimationFrame(e)})})}})});BackTopAnimation.displayName="BackTopAnimation";export default BackTopAnimation;
//# sourceMappingURL=BackTopAnimation.js.map
