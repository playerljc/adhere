var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};import classNames from"classnames";import React,{memo,useLayoutEffect,useRef}from"react";import Resource from"@baifendian/adhere-util-resource";var selectorPrefix="adhere-ui-backtopanimation",BackTopAnimation=function(e){var n=e.className,r=e.style,t=e.zIndex,o=void 0===t?Resource.Dict.value.ResourceNormalMaxZIndex.value:t,i=e.getContainer,s=e.onScrollTop,t=e.duration,u=void 0===t?300:t,c=useRef(null),l=useRef(null),d=useRef(!1);function f(){return"updateInterval"in screen?screen.updateInterval:16.7}return useLayoutEffect(function(){l.current=document.body.querySelector(".".concat(selectorPrefix,"-mask")),l.current||(l.current=document.createElement("div"),l.current.className="".concat(selectorPrefix,"-mask"),l.current.style.zIndex="".concat(o),document.body.appendChild(l.current))},[]),useLayoutEffect(function(){var e=i();function n(){0!==e.scrollTop?c.current.style.display="block":c.current.style.display="none"}return e.addEventListener("scroll",n),function(){return e.removeEventListener("scroll",n)}}),React.createElement("div",{ref:c,className:classNames(selectorPrefix,n||""),style:__assign({zIndex:o},r||{}),onClick:function(){d.current||e.onTrigger&&e.onTrigger().then(function(){d.current=!0,l.current.style.display="block";var r=i(),t=r.scrollTop,o=t,c=0,a=r.scrollHeight/(u/f()+(u%f()!=0?1:0));"undefined"!=typeof window&&window.requestAnimationFrame(function e(){function n(){l.current.style.display="none",d.current=!1}t<c?c<o+a?o=c:o+=a:o-a<c?o=c:o-=a,r.scrollTop=o,s&&s(o),t<c?c<=o?n():"undefined"!=typeof window&&window.requestAnimationFrame(e):o<=c?n():"undefined"!=typeof window&&window.requestAnimationFrame(e)})})}})};export default memo(BackTopAnimation);
//# sourceMappingURL=backtopanimation.js.map
