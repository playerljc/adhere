{"version":3,"file":"Hooks.js","sources":["Hooks.js"],"sourcesContent":["import _DoubleLeftOutlined from \"@ant-design/icons/es/icons/DoubleLeftOutlined\";\nimport _DoubleRightOutlined from \"@ant-design/icons/es/icons/DoubleRightOutlined\";\nimport { useMount, useUpdateEffect } from 'ahooks';\nimport classNames from 'classnames';\nimport React, { useCallback, useMemo, useState } from 'react';\n// import { ResizeObserver } from '@juggle/resize-observer';\nimport { gridCount } from './Fixed';\n/**\n * useGrid\n * @description 是否使用了栅格系统\n * @param {FixedProps} props\n * @return {boolean}\n */\nexport var useGrid = function (props) {\n  return useMemo(function () {\n    return 'span' in props && typeof props.span === 'number' && props.span >= 0 && props.span <= gridCount;\n  }, [props.span]);\n};\n/**\n * useGap\n * @param {number | number[]} gutter\n * @return {boolean}\n */\nexport var useGap = function (gutter) {\n  return useMemo(function () {\n    if (gutter === undefined || gutter === null || gutter === '' || gutter === 0 || typeof gutter === 'function' || typeof gutter === 'object' && !Array.isArray(gutter)) return false;\n    if (Array.isArray(gutter)) {\n      if (gutter.length === 0) return false;\n      if (gutter.length >= 1 && gutter.length <= 2) {\n        return !gutter.some(function (g) {\n          return g === undefined || g === null || g === '' || typeof g !== 'number';\n        });\n      }\n    }\n    return true;\n  }, [gutter]);\n};\n/**\n * useTrigger\n */\nexport var useTrigger = function (_a) {\n  var trigger = _a.trigger,\n    _b = _a.collapseDirection,\n    collapseDirection = _b === void 0 ? 'L' : _b,\n    _c = _a.collapsedSize,\n    collapsedSize = _c === void 0 ? 80 : _c,\n    _d = _a.defaultCollapsible,\n    defaultCollapsible = _d === void 0 ? false : _d,\n    onCollapse = _a.onCollapse,\n    selectorPrefix = _a.selectorPrefix,\n    elRef = _a.elRef;\n  var _e = useState(defaultCollapsible),\n    collapsible = _e[0],\n    setCollapsible = _e[1];\n  var _f = useState({\n      width: 10000,\n      height: 10000\n    }),\n    box = _f[0],\n    setBox = _f[1];\n  // const originElSize = useRef<{\n  //   computedWidth: number | string;\n  //   computedHeight: number | string;\n  // }>({ computedWidth: 0, computedHeight: 0 });\n  // 缺省的Trigger元素\n  var DefaultTrigger = useMemo(function () {\n    if (collapseDirection === 'L') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(_DoubleRightOutlined, null);\n      } else return /*#__PURE__*/React.createElement(_DoubleLeftOutlined, null);\n    } else if (collapseDirection === 'R') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(_DoubleLeftOutlined, null);\n      } else return /*#__PURE__*/React.createElement(_DoubleRightOutlined, null);\n    } else if (collapseDirection === 'T') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(_DoubleRightOutlined, {\n          style: {\n            transform: 'rotate(90deg)'\n          }\n        });\n      } else return /*#__PURE__*/React.createElement(_DoubleLeftOutlined, {\n        style: {\n          transform: 'rotate(90deg)'\n        }\n      });\n    } else if (collapseDirection === 'B') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(_DoubleLeftOutlined, {\n          style: {\n            transform: 'rotate(90deg)'\n          }\n        });\n      } else return /*#__PURE__*/React.createElement(_DoubleRightOutlined, {\n        style: {\n          transform: 'rotate(90deg)'\n        }\n      });\n    }\n  }, [collapseDirection, collapsible]);\n  // 渲染Trigger\n  var renderTrigger = useCallback(function () {\n    if (trigger) {\n      var triggerInner = trigger === null || trigger === void 0 ? void 0 : trigger(collapsible, DefaultTrigger);\n      if (triggerInner) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: classNames(\"\".concat(selectorPrefix, \"-trigger\"), \"\".concat(selectorPrefix, \"-trigger-\").concat(collapseDirection === null || collapseDirection === void 0 ? void 0 : collapseDirection.toLowerCase())),\n          onClick: _onCollapse\n        }, triggerInner);\n      }\n      return null;\n    }\n    return null;\n  }, [trigger, collapseDirection, DefaultTrigger]);\n  useUpdateEffect(function () {\n    setCollapsible(defaultCollapsible);\n  }, [defaultCollapsible]);\n  // useUpdateEffect(() => {\n  //   adapterSize();\n  // }, [collapsible]);\n  // useEffect(() => {\n  //   const el = elRef.current as HTMLDivElement;\n  //\n  //   const ro = new ResizeObserver((entries) => {\n  //     if (!collapsible) {\n  //       for (const entry of entries) {\n  //         const target = entry.target as HTMLElement;\n  //\n  //         if (target === el) {\n  //           originElSize.current = {\n  //             computedWidth: toPx(target.offsetWidth),\n  //             computedHeight: toPx(target.offsetHeight),\n  //           };\n  //         }\n  //       }\n  //     }\n  //   });\n  //\n  //   ro.observe(el);\n  //\n  //   return () => {\n  //     ro.unobserve(el);\n  //   };\n  // }, [collapsible]);\n  // useMount(() => {\n  //   // 获取originElSize\n  //   const computedStyle = window.getComputedStyle(elRef.current as HTMLDivElement);\n  //   const width = computedStyle.width;\n  //   const height = computedStyle.height;\n  //   originElSize.current = {\n  //     computedWidth: width ? width : 'auto',\n  //     computedHeight: height ? height : 'auto',\n  //   };\n  // });\n  useMount(function () {\n    // adapterSize();\n    var computedStyle = window.getComputedStyle(elRef.current);\n    var width = parseFloat(computedStyle.width);\n    var height = parseFloat(computedStyle.height);\n    setBox({\n      width: width,\n      height: height\n    });\n  });\n  // /**\n  //  * toPx\n  //  * @param value\n  //  */\n  // function toPx(value) {\n  //   if (typeof value === 'number') return `${value}px`;\n  //\n  //   return value;\n  // }\n  /**\n   * adapterSize\n   */\n  // function adapterSize() {\n  //   const el = elRef.current as HTMLDivElement;\n  //\n  //   if (collapsible) {\n  //     if (collapseDirection === 'L') {\n  //       el.style.width = toPx(collapsedSize);\n  //     } else if (collapseDirection === 'R') {\n  //       el.style.width = toPx(collapsedSize);\n  //     } else if (collapseDirection === 'T') {\n  //       el.style.height = toPx(collapsedSize);\n  //     } else if (collapseDirection === 'B') {\n  //       el.style.height = toPx(collapsedSize);\n  //     }\n  //     return;\n  //   }\n  //\n  //   if (collapseDirection === 'L') {\n  //     el.style.width = `${originElSize.current.computedWidth}`;\n  //   } else if (collapseDirection === 'R') {\n  //     el.style.width = `${originElSize.current.computedWidth}`;\n  //   } else if (collapseDirection === 'T') {\n  //     el.style.height = `${originElSize.current.computedHeight}`;\n  //   } else if (collapseDirection === 'B') {\n  //     el.style.height = `${originElSize.current.computedHeight}`;\n  //   }\n  // }\n  // const collapseClassName = useMemo(() => {\n  //   // 关闭\n  //   if (collapsible) {\n  //     if (collapseDirection === 'L') {\n  //       return `${selectorPrefix}-l-close`;\n  //     } else if (collapseDirection === 'R') {\n  //       return `${selectorPrefix}-r-close`;\n  //     } else if (collapseDirection === 'T') {\n  //       return `${selectorPrefix}-t-close`;\n  //     } else if (collapseDirection === 'B') {\n  //       return `${selectorPrefix}-b-close`;\n  //     }\n  //     return null;\n  //   }\n  //\n  //   if (collapseDirection === 'L') {\n  //     return `${selectorPrefix}-l-open`;\n  //   } else if (collapseDirection === 'R') {\n  //     return `${selectorPrefix}-r-open`;\n  //   } else if (collapseDirection === 'T') {\n  //     return `${selectorPrefix}-t-open`;\n  //   } else if (collapseDirection === 'B') {\n  //     return `${selectorPrefix}-b-open`;\n  //   }\n  //\n  //   return null;\n  // }, [collapseDirection, collapsible, collapsedSize]);\n  var collapseStyle = useMemo(function () {\n    // 关闭\n    if (collapsible) {\n      if (collapseDirection === 'L') {\n        return {\n          maxWidth: collapsedSize\n        };\n      } else if (collapseDirection === 'R') {\n        return {\n          maxWidth: collapsedSize\n        };\n      } else if (collapseDirection === 'T') {\n        return {\n          maxHeight: collapsedSize\n        };\n      } else if (collapseDirection === 'B') {\n        return {\n          maxHeight: collapsedSize\n        };\n      }\n      return {};\n    }\n    var width = box.width,\n      height = box.height;\n    // 显示\n    if (collapseDirection === 'L') {\n      return {\n        maxWidth: width\n      };\n    } else if (collapseDirection === 'R') {\n      return {\n        maxWidth: width\n      };\n    } else if (collapseDirection === 'T') {\n      return {\n        maxHeight: height\n      };\n    } else if (collapseDirection === 'B') {\n      return {\n        maxHeight: height\n      };\n    }\n    return {};\n  }, [collapseDirection, collapsible, collapsedSize, box]);\n  /**\n   * _onCollapse\n   */\n  function _onCollapse() {\n    setCollapsible(!collapsible);\n    onCollapse === null || onCollapse === void 0 ? void 0 : onCollapse(!collapsible);\n  }\n  return {\n    renderTrigger: renderTrigger,\n    // collapseClassName,\n    collapseStyle: collapseStyle\n  };\n};"],"names":["_DoubleLeftOutlined","_DoubleRightOutlined","useMount","useUpdateEffect","classNames","React","useCallback","useMemo","useState","gridCount","useGrid","props","span","useGap","gutter","Array","isArray","length","some","g","useTrigger","_a","trigger","_b","collapseDirection","_c","collapsedSize","_d","defaultCollapsible","onCollapse","selectorPrefix","elRef","_e","collapsible","setCollapsible","_f","width","height","box","setBox","DefaultTrigger","createElement","style","transform","renderTrigger","triggerInner","className","concat","toLowerCase","onClick","_onCollapse","computedStyle","window","getComputedStyle","current","parseFloat","collapseStyle","maxWidth","maxHeight"],"mappings":"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"}