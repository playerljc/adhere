{"version":3,"file":"Hooks.js","sources":["Hooks.js"],"sourcesContent":["import _typeof from \"@babel/runtime/helpers/typeof\";\nimport { useMount, useUpdateEffect } from 'ahooks';\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { DoubleLeftOutlined, DoubleRightOutlined } from '@ant-design/icons';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { gridCount } from './Fixed';\n/**\n * useGrid\n * @description 是否使用了栅格系统\n * @param {FixedProps} props\n * @return {boolean}\n */\nexport var useGrid = function useGrid(props) {\n  return useMemo(function () {\n    return 'span' in props && typeof props.span === 'number' && props.span >= 0 && props.span <= gridCount;\n  }, [props.span]);\n};\n/**\n * useGap\n * @param {number | number[]} gutter\n * @return {boolean}\n */\nexport var useGap = function useGap(gutter) {\n  return useMemo(function () {\n    if (gutter === undefined || gutter === null || gutter === '' || gutter === 0 || typeof gutter === 'function' || _typeof(gutter) === 'object' && !Array.isArray(gutter)) return false;\n    if (Array.isArray(gutter)) {\n      if (gutter.length === 0) return false;\n      if (gutter.length >= 1 && gutter.length <= 2) {\n        return !gutter.some(function (g) {\n          return g === undefined || g === null || g === '' || typeof g !== 'number';\n        });\n      }\n    }\n    return true;\n  }, [gutter]);\n};\n/**\n * useTrigger\n */\nexport var useTrigger = function useTrigger(_a) {\n  var trigger = _a.trigger,\n    _b = _a.collapseDirection,\n    collapseDirection = _b === void 0 ? 'L' : _b,\n    _c = _a.collapsedSize,\n    collapsedSize = _c === void 0 ? 80 : _c,\n    _d = _a.defaultCollapsible,\n    defaultCollapsible = _d === void 0 ? false : _d,\n    onCollapse = _a.onCollapse,\n    selectorPrefix = _a.selectorPrefix,\n    elRef = _a.elRef;\n  var _e = useState(defaultCollapsible),\n    collapsible = _e[0],\n    setCollapsible = _e[1];\n  var originElSize = useRef({\n    computedWidth: 0,\n    computedHeight: 0\n  });\n  var DefaultTrigger = useMemo(function () {\n    if (collapseDirection === 'L') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(DoubleRightOutlined, null);\n      } else return /*#__PURE__*/React.createElement(DoubleLeftOutlined, null);\n    } else if (collapseDirection === 'R') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(DoubleLeftOutlined, null);\n      } else return /*#__PURE__*/React.createElement(DoubleRightOutlined, null);\n    } else if (collapseDirection === 'T') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(DoubleRightOutlined, {\n          style: {\n            transform: 'rotate(90deg)'\n          }\n        });\n      } else return /*#__PURE__*/React.createElement(DoubleLeftOutlined, {\n        style: {\n          transform: 'rotate(90deg)'\n        }\n      });\n    } else if (collapseDirection === 'B') {\n      if (collapsible) {\n        return /*#__PURE__*/React.createElement(DoubleLeftOutlined, {\n          style: {\n            transform: 'rotate(90deg)'\n          }\n        });\n      } else return /*#__PURE__*/React.createElement(DoubleRightOutlined, {\n        style: {\n          transform: 'rotate(90deg)'\n        }\n      });\n    }\n  }, [collapseDirection, collapsible]);\n  var renderTrigger = useCallback(function () {\n    if (trigger) {\n      var triggerInner = trigger === null || trigger === void 0 ? void 0 : trigger(collapsible, DefaultTrigger);\n      if (triggerInner) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: classNames(\"\".concat(selectorPrefix, \"-trigger\"), \"\".concat(selectorPrefix, \"-trigger-\").concat(collapseDirection === null || collapseDirection === void 0 ? void 0 : collapseDirection.toLowerCase())),\n          onClick: _onCollapse\n        }, triggerInner);\n      }\n      return null;\n    }\n    return null;\n  }, [trigger, collapseDirection, DefaultTrigger]);\n  useUpdateEffect(function () {\n    setCollapsible(defaultCollapsible);\n  }, [defaultCollapsible]);\n  useUpdateEffect(function () {\n    adapterSize();\n  }, [collapsible]);\n  useEffect(function () {\n    var el = elRef.current;\n    var ro = new ResizeObserver(function (entries) {\n      if (!collapsible) {\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n          var entry = entries_1[_i];\n          var target = entry.target;\n          if (target === el) {\n            originElSize.current = {\n              computedWidth: toPx(target.offsetWidth),\n              computedHeight: toPx(target.offsetHeight)\n            };\n          }\n        }\n      }\n    });\n    ro.observe(el);\n    return function () {\n      ro.unobserve(el);\n    };\n  }, [collapsible]);\n  useMount(function () {\n    // 获取originElSize\n    var computedStyle = window.getComputedStyle(elRef.current);\n    var width = computedStyle.width;\n    var height = computedStyle.height;\n    originElSize.current = {\n      computedWidth: width ? width : 'auto',\n      computedHeight: height ? height : 'auto'\n    };\n  });\n  useMount(function () {\n    adapterSize();\n  });\n  /**\n   * toPx\n   * @param val\n   */\n  function toPx(val) {\n    if (typeof val === 'number') return \"\".concat(val, \"px\");\n    return val;\n  }\n  /**\n   * adapterSize\n   */\n  function adapterSize() {\n    var el = elRef.current;\n    if (collapsible) {\n      if (collapseDirection === 'L') {\n        el.style.width = toPx(collapsedSize);\n      } else if (collapseDirection === 'R') {\n        el.style.width = toPx(collapsedSize);\n      } else if (collapseDirection === 'T') {\n        el.style.height = toPx(collapsedSize);\n      } else if (collapseDirection === 'B') {\n        el.style.height = toPx(collapsedSize);\n      }\n      return;\n    }\n    if (collapseDirection === 'L') {\n      el.style.width = \"\".concat(originElSize.current.computedWidth);\n    } else if (collapseDirection === 'R') {\n      el.style.width = \"\".concat(originElSize.current.computedWidth);\n    } else if (collapseDirection === 'T') {\n      el.style.height = \"\".concat(originElSize.current.computedHeight);\n    } else if (collapseDirection === 'B') {\n      el.style.height = \"\".concat(originElSize.current.computedHeight);\n    }\n  }\n  /**\n   * _onCollapse\n   */\n  function _onCollapse() {\n    setCollapsible(!collapsible);\n    onCollapse === null || onCollapse === void 0 ? void 0 : onCollapse(!collapsible);\n  }\n  return renderTrigger;\n};"],"names":["_typeof","useMount","useUpdateEffect","classNames","React","useCallback","useEffect","useMemo","useRef","useState","DoubleLeftOutlined","DoubleRightOutlined","ResizeObserver","gridCount","useGrid","props","span","useGap","gutter","Array","isArray","length","some","g","useTrigger","_a","trigger","_b","collapseDirection","_c","collapsedSize","_d","defaultCollapsible","onCollapse","selectorPrefix","elRef","_e","collapsible","setCollapsible","originElSize","computedWidth","computedHeight","DefaultTrigger","createElement","style","transform","renderTrigger","triggerInner","className","concat","toLowerCase","onClick","_onCollapse","toPx","val","adapterSize","el","current","width","height","ro","entries","_i","entries_1","target","offsetWidth","offsetHeight","observe","unobserve","computedStyle","window","getComputedStyle"],"mappings":"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"}